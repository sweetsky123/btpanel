import{c as a,g as e,v as l,a8 as s,J as t,z as r,x as u,y as n,e as o,ak as i,D as d,n as m,aj as p,an as c,am as v,U as b,bu as f,i as x}from"./base-lib.js?v=1763689792";import{L as j,$ as w}from"./utils-lib.js?v=1763689792";import{f as g,a as y,e as _,b as h,h as D,c as V,r as k,i as H,g as E,d as q,m as C}from"./index64.js?v=1763689792";import{o as U,h as z,j as M,b as O}from"./form-item.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./useMethod9.js?v=1763689792";import"./validator.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";import"./site.js?v=1763689792";import"./index109.js?v=1763689792";import"./useMethod8.js?v=1763689792";import"./firewall.js?v=1763689792";import"./useStore6.js?v=1763689792";import"./useMethod11.js?v=1763689792";const F={class:"py-[1rem] px-[3rem]"};const S="!w-[300px]",B=a({__name:"index",props:{compData:{type:Object,default:()=>({})}},setup(a,{expose:B}){const J=a,{isEdit:L,row:$}=J.compData,A=e(()=>0===g.value?[{content:'<span class="text-dangerDark">全部：捕获当前域名下，所有邮件（包括不存在的邮箱的邮件）</span>',isHtml:!0},{content:'<span class="text-dangerDark">不存在：捕获当前域名下，不存在的邮箱的邮件</span>',isHtml:!0},{content:'<span class="text-dangerDark">前缀：捕获当前域名下，以指定字符串的开头的邮箱（邮箱可以不存在）的邮件</span>',isHtml:!0},{content:'<span class="text-dangerDark">后缀：捕获当前域名下，邮箱地址@以前的部分以指定字符串的结尾的邮箱（邮箱可以不存在）的邮件</span>',isHtml:!0},{content:'<span class="text-dangerDark">包含：捕获当前域名下，邮箱地址@以前的部分包含指定字符串的邮箱（邮箱可以不存在）的邮件</span>',isHtml:!0}]:[{content:'<span class="text-dangerDark">转发示例：配置bt.cn转发到btmail.cn，则：a@bt.cn->a@btmail.cn、b@bt.cn->b@btmail.cn、...</span>',isHtml:!0}]),G=[{label:"前缀",value:"prefix"},{label:"后缀",value:"suffix"},{label:"包含",value:"contain"},{label:"全部",value:"all"},{label:"不存在",value:"none"}],I=a=>[z(" ",()=>o(p,{disabled:L,modelValue:a.value.type,"onUpdate:modelValue":e=>a.value.type=e,onChange:e=>{a.value.rule_str="",a.value.rule="all",m(()=>{P.value&&P.value.clearValidate(),P.value&&P.value.validateField("receiver")})}},{default:()=>[o(i,{value:"mail",size:"default"},{default:()=>[d("邮箱")]}),o(i,{class:"ml-[6rem]",value:"wildcard",size:"default"},{default:()=>[d("通配符")]})]}),"type"),M("域名","domain",q.value,{attrs:{class:S,disabled:L,onChange:e=>{a.value.rule_str="",E(e)}},rules:[{required:!0,message:"请选择域名"}]}),"mail"===a.value.type?M("邮箱","rule_str",C.value,{attrs:{class:S,disabled:!a.value.domain||L,placeholder:"请先选择域名，再选择邮箱"},rules:[{validator:(e,l,s)=>{if("mail"===a.value.type)l?s():s(new Error("请选择邮箱"));else{if("none"===a.value.rule||"all"===a.value.rule)return void s();l?s():s(new Error("请输入规则内容"))}}}]}):z("规则",()=>{let e;const l="none"===a.value.rule||"all"===a.value.rule;return o("div",{class:"flex items-center"},[o(c,{disabled:L,modelValue:a.value.rule,"onUpdate:modelValue":e=>a.value.rule=e,onChange:e=>{"none"!==e&&"all"!==e||(a.value.rule_str="",m(()=>{P.value&&P.value.clearValidate("rule_str")}))},placeholder:"选择规则",class:"!w-[100px]"},(s=e=G.map(a=>o(v,{label:a.label,value:a.value},null)),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!x(s)?e:{default:()=>[e]})),o(b,{modelValue:a.value.rule_str,"onUpdate:modelValue":e=>a.value.rule_str=e,disabled:l||L,placeholder:"输入规则",class:"!w-[190px] ml-[10px]"},null)]);var s},"rule_str",{rules:[{validator:(e,l,s)=>{"none"!==a.value.rule&&"all"!==a.value.rule?l?s():s(new Error("请输入规则内容")):s()}}]}),O("接收者","receiver",{attrs:{placeholder:"输入需要转发的邮箱",type:"textarea",rows:4,class:S},rules:[{required:!0,message:"请输入需要转发的邮箱",validator:(a,e,l)=>{e?l():l(new Error("请输入需要转发的邮箱"))}}]})],{BtForm:K,submit:N,ref:P}=j({data:()=>y.value,options:a=>e(()=>[...0===g.value?I(a):[M("域名","domain",q.value,{attrs:{class:S,disabled:L},rules:[{required:!0,message:"请选择域名"}]}),O("接收域名","receiver",{attrs:{placeholder:"输入需要接收的域名",class:S},rules:[{required:!0,message:"请输入需要接收的域名"}]})],U("状态","status",{attrs:{class:"!w-[50px]"}})]),submit:async(a,e)=>{let l;return await e(),l=L?await _(a.value,$.address):await h(a.value),l}});return l(async()=>{L?D($):await V()}),s(()=>{k()}),B({onConfirm:async()=>await N()}),(a,e)=>{const l=w,s=f;return t((u(),n("div",F,[o(r(K)),o(l,{options:r(A)},null,8,["options"])])),[[s,r(H)]])}}});export{B as default};
