import{hy as e,bR as a,hx as t,ao as l,ap as s,$ as r,j as i,b as o}from"./utils-lib.js?v=1763689792";import{_ as n}from"./index109.js?v=1763689792";import{B as p}from"./index119.js?v=1763689792";import{c as d,I as m,x as u,y as c,z as h,F as f,e as x,C as b,H as y,D as v,O as g,G as j,A as k,J as C,R as _}from"./base-lib.js?v=1763689792";import{a as B,b as V,u as R}from"./column.js?v=1763689792";import{u as S,S as E}from"./useStore4.js?v=1763689792";import{u as T,i as w,e as F,a as H,h as U,c as q,b as z,s as A,d as D,f as G,g as I,j as J,k as L}from"./useController20.js?v=1763689792";const O={class:"h-full"},$={key:1,class:"bg-light flex items-center justify-center h-full",style:{"min-height":"600px"}},K={class:"bg-lighter px-[48px] py-[16px] text-default flex"},M={class:"p-[20px]"},N=d({__name:"index",setup(d,{expose:N}){const P=o(),{isBindExtranet:Q,siteType:W}=S(),{jumpTabEvent:X}=E(),{isRefreshList:Y}=T(),Z=s([{label:"启用重定向规则",value:"start",event:L},{label:"停用重定向规则",value:"stop",event:L},{label:"删除重定向规则",value:"delete",event:L}]),{BtTable:ee,BtRefresh:ae,BtBatch:te,refresh:le}=e({request:w,columns:[B(),{label:"被重定向",render:e=>{var t;return e.errorpage?"404错误页面":"domain"===e.domainorpath?null==(t=a(e.redirectdomain,"array",[]))?void 0:t.join("、"):e.redirectpath}},{label:"重定向类型",prop:"domainorpath",render:e=>e.errorpage?"错误":"domain"===e.domainorpath?"域名":"路径"},{label:"重定向到",render:e=>e.topath?e.topath:e.tourl},V({prop:"type",event:G,data:["已停止","运行中"]}),R([{width:70,title:"配置文件",onClick:e=>{if(!e.type)return P.warn("请先启用重定向规则再查看配置文件");I(e)}},{title:"编辑",onClick:e=>{e.errorpage?H(e):F(e)}},{onClick:J,title:"删除"}])],extension:[t(),Z,l(Y)]});return N({init:le}),(e,a)=>{const t=n,l=r,s=i,o=m("bt-loading");return u(),c("div",O,[h(Q)?(u(),c(f,{key:0},[x(t,null,{"header-left":b(()=>[x(h(y),{type:"primary",onClick:a[0]||(a[0]=e=>h(F)())},{default:b(()=>[...a[7]||(a[7]=[v("添加重定向",-1)])]),_:1}),["php","html"].includes(h(W))?(u(),g(h(y),{key:0,type:"default",onClick:a[1]||(a[1]=e=>h(H)())},{default:b(()=>[...a[8]||(a[8]=[v("404重定向",-1)])]),_:1})):j("",!0)]),"header-right":b(()=>[x(h(ae))]),content:b(()=>[x(h(ee),{"max-height":460})]),"footer-left":b(()=>[x(h(te))]),_:1}),x(l,{class:"mt-2rem",options:h(U),"list-style":"disc"},null,8,["options"])],64)):(u(),c("div",$,[k("div",K,[a[9]||(a[9]=v(" 请开启 ",-1)),k("span",{class:"mx-[.4rem] bt-link",onClick:a[2]||(a[2]=e=>h(X)("mapping"))},"外网映射"),a[10]||(a[10]=v(" 后查看配置信息 ",-1))])])),x(s,{title:"编辑配置文件",modelValue:h(D),"onUpdate:modelValue":a[6]||(a[6]=e=>_(D)?D.value=e:null),area:54},{default:b(()=>[k("div",M,[a[12]||(a[12]=v(" 提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换 ",-1)),C(x(h(p),{class:"!h-[36rem] my-[8px]",ref:"aceEditor",modelValue:h(z),"onUpdate:modelValue":a[3]||(a[3]=e=>_(z)?z.value=e:null),onSave:a[4]||(a[4]=e=>h(A)())},null,8,["modelValue"]),[[o,h(q)]]),x(h(y),{type:"primary",onClick:a[5]||(a[5]=e=>h(A)())},{default:b(()=>[...a[11]||(a[11]=[v("保存",-1)])]),_:1}),a[13]||(a[13]=k("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[20px]"},[k("li",null,"此处为该重定向的配置文件，若您不了解配置规则,请勿随意修改。")],-1))])]),_:1},8,["modelValue"])])}}});export{N as _};
