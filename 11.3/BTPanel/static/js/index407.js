import{Q as e,n as s,H as t,f as l,b as i,_ as a}from"./utils-lib.js?v=1763689792";import{c,r,g as n,v as u,I as o,J as v,z as d,x as p,y as m,A as y,e as b,C as f,L as A,bt as x,B as g,K as C,F as L,b1 as h,D as w,aZ as T,H as D,G as P}from"./base-lib.js?v=1763689792";import{getBusSslProductList as _,applyCertOrderPay as k}from"./site.js?v=1763689792";import{u as B}from"./useStore12.js?v=1763689792";import{C as I}from"./useController15.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./useStore4.js?v=1763689792";import"./index109.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./useController6.js?v=1763689792";import"./validator.js?v=1763689792";import"./index107.js?v=1763689792";import"./useController5.js?v=1763689792";import"./useMethod5.js?v=1763689792";import"./useController4.js?v=1763689792";import"./ssl.js?v=1763689792";const j={class:""},N={class:"px-[3rem] py-[2rem] min-h-[62rem]"},V={class:"ssl-bus-pay-form"},E={class:"ssl-line"},F={class:"ssl-content"},S={class:"ssl-box mb-[4px]"},O={class:"ssl-number-select"},q={class:"ssl-service"},M={class:"flex items-center"},G={class:"ssl-line"},H={class:"ssl-content"},z={class:"ssl-option-list w-full"},J=["onClick"],K={class:"ssl-type-title"},Q={class:"ssl-type-tips"},R={key:0,class:"ssl-subscript-tips"},U={class:"ssl-tips-list mb-[.4rem]"},Z={class:"mt-[.4rem]"},W={class:"ssl-line"},X={class:"ssl-content"},Y={class:"ssl-option-list"},$=["onClick"],ee={class:"ssl-type-title !font-normal border-none"},se={key:0,class:"ssl-subscript-tips"},te={class:"ssl-tips-list mb-[.4rem]"},le={class:"mt-[.4rem]"},ie={class:"ssl-line"},ae={class:"ssl-content"},ce={class:"ssl-option-list"},re=["onClick"],ne={class:"ssl-type-title !font-normal border-none"},ue={key:0,class:"ssl-subscript-tips"},oe={class:"ssl-tips-list mb-[.4rem]"},ve={class:"mt-[.4rem]"},de={class:"ssl-line"},pe={class:"ssl-content"},me={class:"ssl-option-list"},ye=["onClick"],be={class:"ssl-type-title !font-normal border-none"},fe={key:0,class:"ssl-subscript-tips"},Ae={class:"ssl-tips-list mb-[.4rem]"},xe={class:"mt-[.4rem]"},ge={class:"mt-[4px]"},Ce={class:"ssl-line"},Le={class:"ssl-content"},he={class:"ssl-option-list"},we=["onClick"],Te={class:"ssl-type-title !font-normal border-none"},De={key:0,class:"ssl-subscript-tips"},Pe={class:"ssl-tips-list mb-[.4rem]"},_e={class:"mt-[.4rem]"},ke={class:"ssl-info-view rounded-small"},Be={class:"flex justify-between w-full"},Ie={class:"flex flex-col"},je={class:"mb-[4px]"},Ne={class:"mr-[1rem]"},Ve={class:"flex flex-col"},Ee={class:"flex h-[2.2rem] items-end mb-[4px]"},Fe={class:"text-warning text-small"},Se={class:"text-extraLarge font-bold"},Oe={class:"pl-[6rem] text-small text-tertiary line-through"},qe={class:"flex items-center"},Me=a(c({__name:"index",emits:["close"],setup(a,{emit:c}){const Me=i(),{sslApplicationInfo:Ge,productInfo:He,orderInfo:ze}=B(),Je=c,Ke=r(!1),Qe=r(0),Re={single:["仅支持绑定一个二级域名或者子域名，例如 bt.com、cloud.bt.com、dnspod.cloud.bt.com的其中之一 。","如需要绑定同级的所有子域名，例如*.bt.com，请购买泛域名证书。"],wildcard:["带通配符的域名，例如：*.bt.com、*.cloud.bt.com均为泛域名，包含同一级的全部子域名。","注意泛域名不支持跨级，例如*.bt.com 不包含 *.cloud.bt.com的支持"]},Ue={0:[],1:["宝塔提供9:00 - 24:00的人工部署证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"],2:["宝塔提供9:00 - 24:00的人工部署国密算法证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"]},Ze=r({num:1,certClassAcitve:"OV",certClass:[{name:"OV证书",title:"推荐企业使用",value:"OV",tips:[],data:[]},{name:"DV证书",title:"推荐个人，测试使用",value:"DV",subscript:"热销",tips:[]},{name:"EV证书",title:"推荐大型政企使用，高安全性",value:"EV",tips:[]}],certBrandAcitve:"",certBrand:[{name:"宝塔证书",title:"宝塔证书",value:"宝塔证书",tips:[]},{name:"Positive",title:"Positive",value:"Positive",tips:[]},{name:"锐安信",title:"锐安信",value:"锐安信",tips:[]},{name:"CFCA",title:"CFCA",value:"CFCA",tips:[]},{name:"Digicert",title:"Digicert",value:"Digicert",tips:[]},{name:"GeoTrust",title:"GeoTrust",value:"GeoTrust",tips:[]},{name:"Sectigo",title:"Sectigo",value:"Sectigo",tips:[]},{name:"亚洲诚信",title:"亚洲诚信",value:"亚洲诚信",tips:[]}],certTypeAcitve:"single",certType:[{name:"single",title:"单域名",value:"single",tips:[]},{name:"multiple",title:"多域名",value:"multiple",tips:[]},{name:"wildcard",title:"泛域名",value:"wildcard",tips:[]},{name:"ip",title:"IP证书",value:"ip",tips:[]}],certLifeAcitve:1,certLife:[{name:"1年",title:"1年",value:1,tips:[]},{name:"2年",title:"2年",value:2,tips:[]},{name:"3年",title:"3年",value:3,tips:[]},{name:"4年",title:"4年",value:4,tips:[]},{name:"5年",title:"5年",value:5,tips:[]}],certDeployAcitve:1,certDeploy:[{name:"不需要",title:"不需要",value:0,tips:[]},{name:"部署服务",title:"部署服务",value:1,tips:[]},{name:"部署服务（国密）",title:"部署服务（国密）",value:2,tips:[]}]}),We=r({}),Xe=r({addPrice:0,productName:"",price:0,totalPrice:0,originalPrice:0,deploymentPrice:0,pid:0,years:1,yearsPrice:0,number:1,extraNumber:0,extraPrice:0,install:1}),Ye=r({oid:0,wxcode:"",alicode:"",qq:"",orderInfo:{}}),$e={defalutList:[],domianNumList:[],classList:[],brandList:[],typeList:[]},es=n(()=>{const e=Ze.value.certClass.filter(e=>e.value===Ze.value.certClassAcitve);return e&&e.length>0?e[0].tips:[]}),ss=n(()=>{const e=Ze.value.certBrand.filter(e=>e.value===Ze.value.certBrandAcitve);return e&&e.length>0?e[0].tips:[]}),ts=n(()=>{const e=Ze.value.certType.filter(e=>e.value===Ze.value.certTypeAcitve);return e&&e.length>0?e[0].tips:[]}),ls=n(()=>{const e=Ze.value.certLife.filter(e=>e.value===parseInt(Ze.value.certLifeAcitve));return e&&e.length>0?e[0].tips:[]}),is=n(()=>{const e=Ze.value.certDeploy.filter(e=>e.value===parseInt(Ze.value.certDeployAcitve));return e&&e.length>0?e[0].tips:[]}),as=({type:e,brand:s,times:t})=>{Ze.value.certClass=gs(Ze.value.certClass,e,(e,s)=>s["".concat(e.value).toLowerCase()]),Re.multiple=Re.single,Ze.value.certType=gs(Ze.value.certType,Re),Ze.value.certDeploy=gs(Ze.value.certDeploy,Ue),Ze.value.certBrand=gs(Ze.value.certBrand,s,(e,s)=>s["Positive"!==e.value?"".concat(e.value).toLowerCase():"Positive"]),Ze.value.certLife=gs(Ze.value.certLife,t,(e,s)=>s[e.value+"_year"])},cs=e=>{const s=[];e.forEach(e=>{var t;const l=null==(t=e.type.match(/(OV|DV|EV)/))?void 0:t[0],i=-1!==e.code.indexOf("wildcard"),a=-1!==e.code.indexOf("ip"),c=e.add_price>0;let r=i?"wildcard":c?"multiple":"single";"Digicert"===e.brand&&(r=i?"wildcard":"single"),s.push({...e,type:l,certType:r,isMulti:c,isIp:a})}),$e.defalutList=s},rs=(e={})=>{let{num:s,classify:t,brand:l,type:i,life:a,deploy:c}=e;const r=Ze.value;return s||(s=r.num),t||(t=r.certClassAcitve),l||(l=r.certBrandAcitve),i||(i=r.certTypeAcitve),a||(a=r.certLifeAcitve),c||(c=r.certDeployAcitve),{num:s,classify:t,brand:l,type:i,life:a,deploy:c}},ns=()=>{Ze.value.certClassAcitve="DV",Ze.value.certBrandAcitve=os(),Ze.value.certTypeAcitve="single",Ze.value.certLifeAcitve=1,Ze.value.certDeployAcitve=1},us=()=>{ds($e.defalutList),vs(),As()},os=()=>{var e;return We.value[null==(e=Ze.value.certClassAcitve)?void 0:e.toLowerCase()]},vs=()=>{const{domianNumList:e,classList:s,brandList:t,typeList:l}=$e;Ze.value.certClass.forEach(s=>{let t=e.some(e=>e.type===s.value);"EV"==s.value&&"wildcard"===Ze.value.certTypeAcitve&&(t=!1),s.disable=!t}),Ze.value.certBrand.forEach(e=>{var t,l,i;const a=!s.some(s=>s.brand===e.value);if(e.hidden=a,e.subscript=e.value===os()?"推荐":"",e.value===Ze.value.certBrandAcitve&&e.hidden){Ze.value.certBrandAcitve=os(),e.value===Ze.value.certBrandAcitve&&e.hidden&&(Ze.value.certBrandAcitve=null==(l=null==(t=null==$e?void 0:$e.classList)?void 0:t[0])?void 0:l.brand);const s=null==(i=null==$e?void 0:$e.classList)?void 0:i.filter(e=>e.brand===Ze.value.certBrandAcitve);s.length>0&&($e.brandList=s,ys(s))}}),Ze.value.certType.forEach(e=>{let s=!t.some(s=>!(!s.isIp||"ip"!==e.value)||s.certType===e.value);"single"===e.value&&Ze.value.num>1&&(s=!0),"multiple"===e.value&&1===Ze.value.num&&(s=!0),"multiple"===e.value&&Ze.value.num>1&&(s=!1),"ip"===e.value&&Ze.value.num>1&&(s=!0),e.hidden=s}),"CFCA"!==Ze.value.certBrandAcitve&&2===Ze.value.certDeployAcitve&&(Ze.value.certDeployAcitve=1)},ds=e=>{let{num:s}=rs();const t=e.filter(e=>!(s>1)||e.isMulti);t.length>0&&($e.domianNumList=t,ps(t))},ps=e=>{const{classify:s}=rs(),t=e.filter(e=>e.type===s);t.length>0&&($e.classList=t,ms(t))},ms=e=>{const{brand:s}=rs(),t=e.filter(e=>e.brand===s);t.length>0&&($e.brandList=t,ys(t))},ys=e=>{const{type:s}=rs();1===e.length&&(Ze.value.certTypeAcitve=e[0].certType);const t=e.filter(e=>{const t="multiple"===Ze.value.certTypeAcitve&&"wildcard"!==e.certType&&e.isMulti,l="wildcard"===Ze.value.certTypeAcitve&&"wildcard"===e.certType&&e.isMulti,i="ip"===Ze.value.certTypeAcitve&&e.isIp;return e.certType===s||t||l||i});t.length>0&&($e.typeList=t)},bs=(e=Ze.value.num)=>{let s=e;if("number"!=typeof e?(e=parseInt(e.data),s=parseInt(Ze.value.num)||1):s=parseInt(Ze.value.num+e)||1,s&&(s<1||s>99))return Ze.value.num=s<1?1:99,Me.error("域名数量范围为1-99");Ze.value.num=s,"wildcard"!==Ze.value.certTypeAcitve&&(Ze.value.certTypeAcitve=Ze.value.num>1?"multiple":"single"),us()},fs=(e,s,t)=>{t||(t=Ze.value[s].filter(s=>s.value===e)),t.disable||("".concat(s,"Acitve")in Ze.value&&(Ze.value["".concat(s,"Acitve")]=e),us())},As=()=>{const e=$e.typeList[0]||null;if(Qe.value=(null==e?void 0:e.num)||0,e){const{num:s,life:t,deploy:l}=rs(),{price:i,other_price:a,add_price:c,pid:r,num:n,install_price:u,install_price_v2:o}=e,v=s-n<0?0:s-n,d=[0,u,o][l],p=c*v,m=(p+i)*t+d,y=a+p+d;Xe.value={addPrice:c||0,productName:e.title,price:i,totalPrice:m,originalPrice:y,deploymentPrice:d,pid:r,years:t,yearsPrice:i*t,number:n,extraNumber:v,extraPrice:p,install:Number(l)}}},xs=async()=>{try{const{pid:s,install:t,years:l,extraNumber:i}=Xe.value,a={pdata:JSON.stringify({pid:s,install:t,years:l,num:i})},{data:c,msg:r}=await e({loading:"正在创建商业证书订单，请稍后...",request:k(a)}),{status:n}=c;if(!n)return Me.error(r);const{oid:u,wxcode:o,alicode:v,qq:d,order_info:p}=c.msg;Ye.value={oid:u,wxcode:o,alicode:v,qq:d,orderInfo:p},Cs({...Ye.value,productInfo:Xe.value}),Je("close")}catch(s){}},gs=(e,s,t)=>e.map((e,l)=>{const i=t?t(e,s):s[e.value];return{...e,tips:i}}),Cs=e=>{He.value=e.productInfo,ze.value=e.orderInfo,s({title:"支付商业证书订单",area:[60],component:()=>t(()=>import("./pay-bus-ssl2.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:e})};return u(()=>{(async()=>{try{Ke.value=!0;const{data:{info:e,data:s,administrator:t}}=await _();We.value=e.recommend,ns(),as(e),cs(s),us(),Ge.value={...t}}catch(e){}finally{Ke.value=!1}})()}),(e,s)=>{const t=T,i=l,a=D,c=o("bt-loading");return v((p(),m("div",j,[y("div",N,[b(t,{type:"error",closable:!1},{title:f(()=>[...s[3]||(s[3]=[y("span",{class:"text-small flex items-center"},[y("span",{class:"svgtofont-hint-confirm-icon !text-extraLarge"}),y("span",null," 禁止含有诈骗、赌博、色情、木马、病毒等违法违规业务信息的站点申请SSL证书，如有违反，撤销申请，停用账号。 ")],-1)])]),_:1}),y("div",V,[y("div",E,[s[6]||(s[6]=y("div",{class:"ssl-label"},"域名数量",-1)),y("div",F,[y("div",S,[y("div",O,[y("div",{class:A(["del-number",{"is-disable":1===d(Ze).num}]),onClick:s[0]||(s[0]=e=>bs(-1))},null,2),v(y("input",{type:"number",class:"input-number",min:"1",max:"99","onUpdate:modelValue":s[1]||(s[1]=e=>d(Ze).num=e),onInput:bs},null,544),[[x,d(Ze).num]]),y("div",{class:A(["add-number",{"is-disable":99===d(Ze).num}]),onClick:s[2]||(s[2]=e=>bs(1))},null,2)]),y("div",q,[b(I,{placement:"right"},{default:f(()=>[y("div",M,[b(i,{src:"../icons/service-icon.svg",class:"mx-[.4rem] w-1.6rem h-1.6rem"}),s[4]||(s[4]=y("span",{class:"ml5"},"教我选择？",-1))])]),_:1})]),v(y("div",{class:"ssl-tips"},"默认包含"+g(d(Qe))+"个域名，超出数量每个域名"+g(d(Xe).addPrice)+"元/个/年",513),[[C,0!==d(Xe).addPrice]])]),s[5]||(s[5]=y("div",{class:"ssl-tips"},"请选择当前证书包含的域名数量",-1))])]),y("div",G,[s[7]||(s[7]=y("div",{class:"ssl-label"},"证书分类",-1)),y("div",H,[y("div",z,[(p(!0),m(L,null,h(d(Ze).certClass,e=>(p(),m("div",{class:A(["ssl-option-item flex-1",{"is-active":e.value===d(Ze).certClassAcitve,"is-disabled":e.disable,"!hidden":e.hidden}]),key:e.value,onClick:s=>fs(e.value,"certClass",e)},[y("div",K,g(e.name),1),y("div",Q,g(e.title),1),e.subscript?(p(),m("em",R,g(e.subscript),1)):P("",!0)],10,J))),128))]),y("div",U,[(p(!0),m(L,null,h(d(es),e=>(p(),m("p",Z,g(e),1))),256))])])]),y("div",W,[s[8]||(s[8]=y("div",{class:"ssl-label"},"证书品牌",-1)),y("div",X,[y("div",Y,[(p(!0),m(L,null,h(d(Ze).certBrand,e=>(p(),m("div",{class:A(["ssl-option-item min-w-[9rem]",{"is-active":e.value===d(Ze).certBrandAcitve,"is-disabled":e.disable,"!hidden":e.hidden}]),key:e.value,onClick:s=>fs(e.value,"certBrand",e)},[y("div",ee,g(e.title),1),e.subscript?(p(),m("em",se,g(e.subscript),1)):P("",!0)],10,$))),128))]),y("div",te,[(p(!0),m(L,null,h(d(ss),e=>(p(),m("p",le,g(e),1))),256))])])]),y("div",ie,[s[9]||(s[9]=y("div",{class:"ssl-label"},"证书类型",-1)),y("div",ae,[y("div",ce,[(p(!0),m(L,null,h(d(Ze).certType,e=>(p(),m("div",{class:A(["ssl-option-item min-w-[9rem]",{"is-active":e.value===d(Ze).certTypeAcitve,"is-disabled":e.disable,"!hidden":e.hidden}]),key:e.value,onClick:s=>fs(e.value,"certType",e)},[y("div",ne,g(e.title),1),e.subscript?(p(),m("em",ue,g(e.subscript),1)):P("",!0)],10,re))),128))]),y("div",oe,[(p(!0),m(L,null,h(d(ts),e=>(p(),m("p",ve,g(e),1))),256))])])]),y("div",de,[s[10]||(s[10]=y("div",{class:"ssl-label"},"购买年限",-1)),y("div",pe,[y("div",me,[(p(!0),m(L,null,h(d(Ze).certLife,e=>(p(),m("div",{class:A(["ssl-option-item min-w-[9rem]",{"is-active":e.value===d(Ze).certLifeAcitve}]),key:e.value,onClick:s=>fs(e.value,"certLife",e)},[y("div",be,g(e.title),1),e.subscript?(p(),m("em",fe,g(e.subscript),1)):P("",!0)],10,ye))),128))]),y("div",Ae,[(p(!0),m(L,null,h(d(ls),e=>(p(),m("p",xe,g(e),1))),256)),v(y("p",ge,"部署成功后会生成自动续签任务 请不要变更DNS验证内容",512),[[C,"宝塔证书"===d(Ze).certBrandAcitve&&d(Ze).certLifeAcitve>1]])])])]),y("div",Ce,[s[11]||(s[11]=y("div",{class:"ssl-label"},"部署服务",-1)),y("div",Le,[y("div",he,[(p(!0),m(L,null,h(d(Ze).certDeploy,e=>(p(),m(L,{key:e.value},[2!==e.value||"CFCA"===d(Ze).certBrandAcitve?(p(),m("div",{key:0,class:A(["ssl-option-item min-w-[9rem]",{"is-active":e.value===d(Ze).certDeployAcitve}]),onClick:s=>fs(e.value,"certDeploy",e)},[y("div",Te,g(e.title),1),e.subscript?(p(),m("em",De,g(e.subscript),1)):P("",!0)],10,we)):P("",!0)],64))),128))]),y("div",Pe,[(p(!0),m(L,null,h(d(is),e=>(p(),m("p",_e,g(e),1))),256))])])])])]),y("div",ke,[y("div",Be,[y("div",Ie,[y("div",je,[s[12]||(s[12]=w(" 商品包含：",-1)),y("span",Ne,g("".concat(d(Xe).productName," - 默认包含").concat(d(Xe).number,"个域名 ").concat(d(Xe).yearsPrice,"元/").concat(d(Xe).years,"年"))+g(d(Xe).extraNumber>0?"，额外超出".concat(d(Xe).extraNumber,"个域名").concat(d(Xe).extraPrice.toFixed(2),"元/").concat(d(Xe).years,"年"):""),1)]),y("div",Ve,[y("div",Ee,[s[13]||(s[13]=y("span",null,"总计费用：",-1)),y("div",Fe,[y("span",Se,g(d(Xe).totalPrice.toFixed(2)),1),y("span",null,"元/"+g(d(Xe).years)+"年",1),v(y("span",null,"（包含部署服务）",512),[[C,d(Xe).install]])])]),y("div",Oe,"原价"+g((Number(d(Xe).originalPrice)*d(Xe).years).toFixed(2))+"元/"+g(d(Xe).years)+"年",1)])]),y("div",qe,[b(a,{size:"large",type:"primary",onClick:xs},{default:f(()=>[...s[14]||(s[14]=[w("立即购买",-1)])]),_:1})])])])])),[[c,d(Ke)],[c,"正在获取商业证书信息，请稍后...","title"]])}}}),[["__scopeId","data-v-9d990dcf"]]);export{Me as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
