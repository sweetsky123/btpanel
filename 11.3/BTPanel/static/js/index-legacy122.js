!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function u(n,r,a,i){var u=r&&r.prototype instanceof s?r:s,c=Object.create(u.prototype);return o(c,"_invoke",function(n,r,o){var a,i,u,s=0,c=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,i=0,u=e,p.n=n,l}};function d(n,r){for(i=n,u=r,t=0;!f&&s&&!o&&t<c.length;t++){var o,a=c[t],d=p.p,v=a[2];n>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(i=0,p.v=r,p.n=a[1]):d<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,p.n=v,i=0))}if(o||n>1)return l;throw f=!0,r}return function(o,c,v){if(s>1)throw TypeError("Generator is already running");for(f&&1===c&&d(c,v),i=c,u=v;(t=i<2?e:u)||!f;){a||(i?i<3?(i>1&&(p.n=-1),d(i,u)):p.n=u:p.v=u);try{if(s=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(f=p.n<0)?u:n.call(r,p))!==l)break}catch(t){a=e,i=1,u=t}finally{s=1}}return{value:t,done:f}}}(n,a,i),!0),c}var l={};function s(){}function c(){}function f(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(o(t={},a,function(){return this}),t),d=f.prototype=s.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=f,o(d,"constructor",f),o(f,"constructor",c),c.displayName="GeneratorFunction",o(f,i,"GeneratorFunction"),o(d),o(d,i,"Generator"),o(d,a,function(){return this}),o(d,"toString",function(){return"[object Generator]"}),(r=function(){return{w:u,m:v}})()}function o(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,t,n,r){function i(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},o(e,t,n,r)}function a(e,t,n,r,o,a,i){try{var u=e[a](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,o)}function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./vue-virtual-scroller.esm-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(e,o){"use strict";var u,l,s,c,f,p,d,v,m,y,b,g,h,w,j,S,O,k,_,x,P,z,C,E,F,N,G,T,D,A,I,L,R,U,H,J,K;return{setters:[function(e){u=e.az,l=e.p,s=e.e,c=e.b,f=e._},function(e){p=e.c,d=e.r,v=e.o,m=e.g,y=e.v,b=e.aG,g=e.x,h=e.y,w=e.J,j=e.K,S=e.z,O=e.A,k=e.F,_=e.e,x=e.C,P=e.D,z=e.G,C=e.B,E=e.L,F=e.M,N=e.O,G=e.at,T=e.as,D=e.ar,A=e.H,I=e.aT},function(e){L=e._},function(e){R=e.s},function(e){U=e.F,H=e.cI,J=e.cJ,K=e.cK},null,null,null],execute:function(){var o={id:"upload-mask"},M={class:"p-[20px]"},X=["webkitdirectory"],B={class:"mb-[16px] flex justify-between"},$={key:1,class:"upload-press"},q={key:2,class:"upload-press"},Q={key:3,class:"upload-files-tips"},V={key:4,class:"uploader-list"},W={class:"th"},Y={class:"td justify-end"},Z={class:"uploader-file tr"},ee={class:"td-block"},te={class:"td !w-[55%] flex"},ne=["title"],re={class:"td"},oe={class:"td"},ae={class:"truncate"},ie={key:0},ue={class:"td justify-end"},le={class:"flex justify-end"},se=p({__name:"index",props:{compData:{default:function(){return{path:""}}}},setup:function(e,f){var p=f.expose,se=e,ce=c(),fe=U().refreshFilesList,pe=null,de=d(),ve=d(!1),me=d("paused"),ye=d([]),be=d(),ge=d(!1),he=v({totalProgress:0,uploadList:0,sizeUploaded:0,currentSpeed:0,timeRemaining:0,timeElapsed:0,averageSpeed:0,errorNumber:0,successNumber:0,uploadSize:""}),we=new H({target:"/files?action=upload",uploadPath:se.compData.path||"/www/wwwroot",renewalData:function(e){ye.value=i(e)},renewalSpeed:function(e){he.totalProgress=e.totalProgress,he.uploadList=e.uploadList,he.sizeUploaded=e.sizeUploaded,he.currentSpeed=e.currentSpeed,he.timeRemaining=e.timeRemaining},renewalStatus:function(e){me.value=e.status,he.timeElapsed=e.timeElapsed,he.averageSpeed=e.averageSpeed,he.uploadSize=e.uploadSize,he.successNumber=e.successNumber,he.errorNumber=e.errorNumber}}),je=we.uploadStatusInfo,Se=we.initData,Oe=we.fileUploadLimit,ke=we.cancelFile,_e=m(function(){return!ye.value.length}),xe=m(function(){return!ye.value.length}),Pe=function(e){return"".concat(e.path,"/").concat(e.name).replace(/\/\//,"/")},ze=function(e){if(e.isFolder)return"folder";var t=e.name.split(".").pop();return["zip","rar","gz","tar","war","tgz","bz2","7z","tar.gz"].includes(t)?"compress":t},Ce=function(e){we.isGetFiles=!0,"file"!==e&&u(e)?ge.value=!0:ge.value=!1,setTimeout(function(){be.value.click()},0)},Ee=function(e){for(var t=e.target.files,n=0;n<t.length;n++){var r="/".concat(""===t[n].webkitRelativePath?t[n].name:t[n].webkitRelativePath);if(!Oe(t[n],r))return!1}if(!we.isGetFiles)return!1},Fe=function(e){return"success"===e.status?{transform:"translateX(-0%)"}:{transform:"translateX(-".concat(100-e.progress,"%)")}},Ne=function(){if(0===ye.value.length)return ce.error("请添加需要上传的文件");me.value="uploading",we.useFileUploadExistsConfirm()},Ge=function(){Se(),ye.value=[],me.value="paused",be.value.value=""},Te=function(){ve.value=!0,"success"===me.value&&Ge()},De=function(){ve.value=!1},Ae=function(e){ve.value=!1,we.fileSelectHandler(e,function(e){ye.value=e||[]})},Ie=function(){var e,t=(e=r().m(function e(){return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!["uploading","paused"].includes(me.value)||!ye.value.length){e.n=2;break}return e.n=1,l({title:"取消上传",width:"35rem",icon:"warning-filled",content:"是否取消上传，取消后将清空上传列表？"});case 1:return fe(),e.a(2,!0);case 2:e.n=4;break;case 3:return e.p=3,e.v,e.a(2,!1);case 4:return e.a(2)}},e,null,[[0,3]])}),function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function u(e){a(i,r,o,u,l,"next",e)}function l(e){a(i,r,o,u,l,"throw",e)}u(void 0)})});return function(){return t.apply(this,arguments)}}();return y(function(){pe=function(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({},J({dragenter:Te,dragleave:De,drop:Ae,dragover:function(){}}))}),b(function(){K(pe)}),p({onCancel:Ie}),function(e,t){var n=G,r=T,a=D,u=A,l=L,c=I,f=s;return g(),h("div",{ref_key:"upload",ref:de,class:"upload-file-view"},[w(O("div",o,"请将需要上传的文件/文件夹拖到此处",512),[[j,S(ve)]]),O("div",M,[S(me).indexOf("paused")>-1?(g(),h(k,{key:0},[O("input",{ref_key:"uploadFileInput",ref:be,type:"file",webkitdirectory:S(ge),style:{display:"none"},multiple:"",onChange:Ee},null,40,X),O("div",B,[_(a,{"split-button":"",type:"default","show-timeout":50,"hide-timeout":50,onClick:Ce,onCommand:Ce},{dropdown:x(function(){return[_(r,{class:"w-[10rem]"},{default:x(function(){return[_(n,{command:"file"},{default:x(function(){return i(t[0]||(t[0]=[P("上传文件",-1)]))}),_:1}),_(n,{command:"dir"},{default:x(function(){return i(t[1]||(t[1]=[P("上传文件夹",-1)]))}),_:1})]}),_:1})]}),default:x(function(){return[t[2]||(t[2]=P(" 上传文件 ",-1))]}),_:1}),_(u,{disabled:S(_e),onClick:Ge},{default:x(function(){return i(t[3]||(t[3]=[P("清空列表",-1)]))}),_:1},8,["disabled"])])],64)):z("",!0),S(me).indexOf("uploading")>-1?(g(),h("div",$,[O("span",null,"总进度："+C(S(he).totalProgress)+"%",1),_(l),O("span",null,"正在上传：("+C("".concat(S(he).uploadList,"/").concat(S(ye).length))+")",1),_(l),O("span",null,"上传速度："+C(S(he).currentSpeed)+"/s",1),_(l),O("span",null,"预计耗时："+C(S(he).timeRemaining),1)])):z("",!0),S(me).indexOf("success")>-1?(g(),h("div",q,[O("span",null,"上传大小："+C(S(he).uploadSize),1),_(l),O("span",null,"共耗时："+C(S(he).timeElapsed),1),_(l),O("span",null,"平均上传速度："+C(S(he).averageSpeed)+"/s",1),_(l),O("span",null,"上传成功："+C(S(he).successNumber)+"个",1),w(_(l,null,null,512),[[j,S(he).errorNumber>0]]),w(O("span",null,"上传失败："+C(S(he).errorNumber)+"个",513),[[j,S(he).errorNumber>0]])])):z("",!0),S(xe)?(g(),h("div",Q,i(t[4]||(t[4]=[O("span",null,"请将需要上传的文件/文件夹拖到此处",-1)])))):(g(),h("div",V,[O("div",W,[t[5]||(t[5]=O("div",{class:"td !w-[55%]"},"文件名",-1)),t[6]||(t[6]=O("div",{class:"td"},"文件大小",-1)),t[7]||(t[7]=O("div",{class:"td"},"上传状态",-1)),w(O("div",Y,"操作",512),[[j,"success"!==S(me)]])]),O("div",null,[_(S(R),{class:E(["!mb-0 overflow-auto file-upload-list files-list","!h-[400px]"]),items:S(ye),"item-size":45,buffer:800,"key-field":"vid"},{default:x(function(e){var n=e.item;return[O("div",Z,[O("div",{class:E({"td-progress":!0,error:"error"===n.status,success:"success"===n.status}),style:F(Fe(n))},null,6),O("div",ee,[O("div",te,[O("i",{class:E(["icon-bg","".concat(ze(n),"-icon")])},null,2),O("span",{class:"flex-1 w-0 ml-[4px] truncate h-[20px] leading-[20px]",title:Pe(n)},C(Pe(n)),9,ne)]),O("div",re,C(n.size),1),O("div",oe,[w(_(c,{effect:"dark",content:"".concat(S(je)(n.status)).concat(n.message?"，".concat(n.message):""),placement:"right","show-after":200},{default:x(function(){return[w(O("span",ae,[P(C(S(je)(n.status))+" ",1),n.message?(g(),h("span",ie," ,"+C(n.message),1)):z("",!0)],512),[[j,"uploading"!==n.status]])]}),_:2},1032,["content"]),[[j,"uploading"!==n.status]]),w(O("span",null,[O("span",null,"上传中("+C(parseInt(n.progress))+"%)",1)],512),[[j,"uploading"===n.status]])]),w(O("div",ue,[w(_(f,{onClick:function(e){return S(ke)(n)}},{default:x(function(){return i(t[8]||(t[8]=[P("取消",-1)]))}),_:1},8,["onClick"]),[[j,S(me).indexOf("paused")>-1]])],512),[[j,"success"!==S(me)]])])])]}),_:1},8,["items"])])])),O("div",le,[S(me).indexOf("paused")>-1?(g(),N(u,{key:0,type:"primary",onClick:Ne},{default:x(function(){return i(t[9]||(t[9]=[P(" 开始上传 ",-1)]))}),_:1})):z("",!0),["success","error"].includes(S(me))?(g(),N(u,{key:1,type:"primary",onClick:Ge},{default:x(function(){return i(t[10]||(t[10]=[P(" 继续上传 ",-1)]))}),_:1})):z("",!0)])])],512)}}});e("default",f(se,[["__scopeId","data-v-1e82b219"]]))}}})}();
