!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function i(t,a,l,o){var i=a&&a.prototype instanceof s?a:s,c=Object.create(i.prototype);return r(c,"_invoke",function(t,r,a){var l,o,i,s=0,c=a||[],p=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return l=n,o=0,i=e,f.n=t,u}};function v(t,r){for(o=t,i=r,n=0;!p&&s&&!a&&n<c.length;n++){var a,l=c[n],v=f.p,d=l[2];t>3?(a=d===r)&&(i=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=v&&((a=t<2&&v<l[1])?(o=0,f.v=r,f.n=l[1]):v<d&&(a=t<3||l[0]>r||r>d)&&(l[4]=t,l[5]=r,f.n=d,o=0))}if(a||t>1)return u;throw p=!0,r}return function(a,c,d){if(s>1)throw TypeError("Generator is already running");for(p&&1===c&&v(c,d),o=c,i=d;(n=o<2?e:i)||!p;){l||(o?o<3?(o>1&&(f.n=-1),v(o,i)):f.n=i:f.v=i);try{if(s=2,l){if(o||(a="next"),n=l[a]){if(!(n=n.call(l,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,o<2&&(o=0)}else 1===o&&(n=l.return)&&n.call(l),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);l=e}else if((n=(p=f.n<0)?i:t.call(r,f))!==u)break}catch(n){l=e,o=1,i=n}finally{s=1}}return{value:n,done:p}}}(t,l,o),!0),c}var u={};function s(){}function c(){}function p(){}n=Object.getPrototypeOf;var f=[][l]?n(n([][l]())):(r(n={},l,function(){return this}),n),v=p.prototype=s.prototype=Object.create(f);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,r(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=p,r(v,"constructor",p),r(p,"constructor",c),c.displayName="GeneratorFunction",r(p,o,"GeneratorFunction"),r(v),r(v,o,"Generator"),r(v,l,function(){return this}),r(v,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:d}})()}function r(e,n,t,a){var l=Object.defineProperty;try{l({},"",{})}catch(e){l=0}r=function(e,n,t,a){function o(n,t){r(e,n,function(e){return this._invoke(n,t,e)})}n?l?l(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[n]=t:(o("next",0),o("throw",1),o("return",2))},r(e,n,t,a)}function a(e,n,t,r,a,l,o){try{var i=e[l](o),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function l(e){return function(){var n=this,t=arguments;return new Promise(function(r,l){var o=e.apply(n,t);function i(e){a(o,r,l,i,u,"next",e)}function u(e){a(o,r,l,i,u,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./useController-legacy15.js?v=1763689792","./useStore-legacy11.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./useStore-legacy12.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./useController-legacy6.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792","./useController-legacy5.js?v=1763689792","./useMethod-legacy5.js?v=1763689792","./useController-legacy4.js?v=1763689792","./ssl-legacy.js?v=1763689792"],function(n,r){"use strict";var a,o,i,u,s,c,p,f,v,d,y,m,h,g,b,x,w,k,_,j,O,S,T,C,D,P,A,G;return{setters:[function(e){a=e.B,o=e.l,i=e.$,u=e.j,s=e.b},function(e){c=e._},function(e){p=e.c,f=e.s,v=e.r,d=e.e,y=e.v,m=e.x,h=e.y,g=e.D,b=e.A,x=e.B,w=e.z,k=e.C,_=e.F,j=e.b1,O=e.G,S=e.O,T=e.H},function(e){C=e.validateDomain,D=e.authDomainApi,P=e.getOrderDetail},function(e){A=e.l},function(e){G=e.u},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var r={class:"p-[1.5rem]"},I={class:"ml-[.4rem] text-danger"},L={class:"max-h-[38rem] overflow-auto"},M={key:0,class:"flex justify-end"},E={class:"h-full overflow-auto bg-[#222] text-white"},H=["innerHTML"];n("default",p({__name:"index",props:{compData:{type:Object,default:function(){}}},emits:["close"],setup:function(n,p){var R=p.emit,F=f(G()),N=F.activeTabs,U=F.sslIsRefresh,q=F.testIsRefresh,B=F.encryptIsRefresh,$=F.otherIsRefresh,z=s(),X=n,J=R,K=v({}),Q=v([]),V=v(!1),W=v("");v();var Y=v([]),Z=v(!1),ee=v(""),ne=v([{text:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{text:""},{text:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}]),te=v([{label:"解析域名",prop:"domain",showOverflowTooltip:!0},{label:"记录值",prop:"auth_value",showOverflowTooltip:!0,render:function(e,n){var t="dns"===K.value.auth_type?e.auth_value:e.file_path;return d("div",{class:"flex items-center"},[d("div",{class:"truncate w-[15rem]"},[t]),d("span",{class:"svgtofont-icon-copy ml-[4px] text-secondary text-medium w-[1.6rem] cursor-pointer",onClick:function(){return a({value:t})}},null)])}},{label:"类型",prop:"type",showOverflowTooltip:!0,render:function(e,n){return"dns"===K.value.auth_type?d("span",null,[e.type]):d("div",{class:"flex items-center"},[d("div",{class:"truncate w-[15rem]"},[e.content]),d("span",{class:"svgtofont-icon-copy ml-[4px] text-secondary text-medium w-[1.6rem] cursor-pointer",onClick:function(){return a({value:e.content})}},null)])}},{label:"必需",prop:"must",width:100}]),re=function(e){var n="";if(void 0===e[1].challenges)n+="<p><span>响应状态：</span>"+e[1].status+"</p>",n+="<p><span>错误类型：</span>"+e[1].type+"</p>",n+="<p><span>错误来源：</span><a class='bt-link' href='https://letsencrypt.org/' target='_blank' rel='noreferrer noopener'>Let's Encrypt官网</a></p>",n+='<div class="flex flex-col">错误代码：<pre class="!text-white  !bg-darkPrimary !inline-block  ! ml-[4px] ">'+e[1].detail+"</pre></div>";else if(e[1].challenges[1]||e[1].challenges[0]&&(e[1].challenges[1]=e[1].challenges[0]),"invalid"===e[1].status){for(var t="",r=0;r<Q.value.length;r++){var a,l;if(-1!=(null===(a=Q.value[r].outerText)||void 0===a?void 0:a.indexOf(e[1].identifier.value))){var o=null===(l=Q.value[r].outerText)||void 0===l?void 0:l.split("\t");if((null==o?void 0:o.length)>1){t=o[1];break}}}if(n+="<p><span>验证域名：</span>"+e[1].identifier.value+"</p>","dns"===K.value.type)n+="<p><span>验证解析：</span>"+("_acme-challenge."+e[1].identifier.value)+"</p>",n+="<p><span>验证内容：</span>"+t+"</p>",n+='<div class="flex flex-col">错误代码：<pre class="!text-white  !bg-darkPrimary !inline-block  ! ml-[4px] ">'+e[1].challenges[1].error.detail+"</pre></div>";else n+="<p><span>验证URL：</span><a class='bt-link' href='"+("http://"+e[1].identifier.value+"/.well-known/acme-challenge/"+e[1].challenges[0].token)+"' target='_blank' rel='noreferrer noopener'>点击查看</a></p>",n+="<p><span>验证内容：</span>"+e[1].challenges[0].token+"</p>",n+='<div class="flex flex-col">错误代码：<pre class="!text-white !bg-darkPrimary !inline-block  ! ml-[4px] ">'+e[1].challenges[0].error.detail+"</pre></div>";n+="<p><span>验证结果：</span> <a style='color:red;'>验证失败</a></p>"}z.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,icon:"x",message:'<div class="flex items-center justify-center mt-[8px] mb-[20px]"><i class="svgtofont-el-circle-close-filled mr-[8px] text-[var(--el-color-error-light-8)] text-iconLarge"></i><a class="text-danger text-medium">'+e[0]+'</a></div><div class="p-[20px] border border-1 border-color-dark !rounded-base !mb-[12px] !leading-[26px] bg-light">'+n+"</div>",showClose:!0,duration:0})},ae=function(){var e=l(t().m(function e(){var n,r,a,l,o;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,V.value=!0,e.n=1,A();case 1:return n=e.v,e.n=2,C({index:K.value.index});case 2:if(r=e.v,a=r.data,n._props.onCancel(),V.value=!1,!0!==a.status){e.n=3;break}null===(l=(o={ssl:function(){return U.value=!0},test:function(){return q.value=!0},encrypt:function(){return B.value=!0},other:function(){return $.value=!0}})[N.value])||void 0===l||l.call(o),J("close"),e.n=5;break;case 3:if("string"!=typeof(null==a?void 0:a.msg)){e.n=4;break}return e.a(2,z.error(a.msg));case 4:re(a);case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:return e.a(2)}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),le=function(){var e=l(t().m(function e(n){var r,a,l;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,V.value=!0,e.n=1,A();case 1:return r=e.v,e.n=2,D({index:K.value.index,domain:n});case 2:if(a=e.v,l=a.data,r._props.onCancel(),V.value=!1,"valid"!==l.status){e.n=3;break}z.success("验证成功"),e.n=6;break;case 3:if(!0!==l.status){e.n=4;break}J("close"),e.n=6;break;case 4:if("string"!=typeof(null==l?void 0:l.msg)){e.n=5;break}return e.a(2,z.error(l.msg));case 5:re(l);case 6:e.n=8;break;case 7:e.p=7,e.v;case 8:return e.a(2)}},e,null,[[0,7]])}));return function(n){return e.apply(this,arguments)}}(),oe=function(){var e=l(t().m(function e(n){var r,a,l;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=null,e.p=1,r=z.load("正在验证证书申请状态，请稍后..."),e.n=2,P({index:n.index});case 2:(a=e.v).status?(Y.value=a.data.auths,a.data.hasOwnProperty("error")?(Z.value=a.data.error,ee.value=a.data.error_msg):(Z.value=!1,ee.value=""),K.value=n,te.value[1].label="dns"===n.auth_type?"记录值":"文件路径",te.value[1].prop="dns"===n.auth_type?"auth_value":"file_path",te.value[2].label="dns"===n.auth_type?"类型":"文件内容",te.value[2].prop="dns"===n.auth_type?"type":"content",ne.value[1].text="可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(null===(l=Q.value[0])||void 0===l||null===(l=l.domain)||void 0===l?void 0:l.replace("*.",""))):(z.request(a),J("close")),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,r&&r.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}();return y(function(){oe(X.compData.row)}),function(n,t){var a=o,l=T,s=c,p=i,f=u;return m(),h("div",r,[t[2]||(t[2]=g(" 请按以下列表做TXT解析: ",-1)),b("span",I,x(w(ee)),1),d(s,null,{content:k(function(){return[b("div",L,[(m(!0),h(_,null,j(w(Y),function(n,r){return m(),h(_,null,[n.data.length?(m(),h("div",{key:r},[b("span",null,"验证域名："+x(n.domain),1),d(a,{class:"my-[1rem]",column:w(te),data:n.data},null,8,["column","data"]),w(Z)?(m(),h("div",M,[d(l,{type:"default",onClick:function(e){return le(n.domain)}},{default:k(function(){return e(t[0]||(t[0]=[g("验证",-1)]))}),_:1},8,["onClick"])])):O("",!0)])):O("",!0)],64)}),256))])]}),"footer-right":k(function(){return[w(Z)?O("",!0):(m(),S(l,{key:0,type:"primary",onClick:ae},{default:k(function(){return e(t[1]||(t[1]=[g("验证",-1)]))}),_:1}))]}),_:1}),d(p,{list:w(ne),listStyle:"disc",class:"ml-[2rem]"},null,8,["list"]),d(f,{visible:w(V),area:[50,25],"show-close":!1},{default:k(function(){return[b("div",E,[b("pre",{innerHTML:w(W),class:"whitespace-pre-wrap p-[1rem]"},null,8,H)])]}),_:1},8,["visible"])])}}}))}}})}();
