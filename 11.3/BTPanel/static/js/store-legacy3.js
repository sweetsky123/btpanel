!function(){function n(n){return function(n){if(Array.isArray(n))return e(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return e(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,e,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function u(t,a,o,i){var u=a&&a.prototype instanceof s?a:s,l=Object.create(u.prototype);return r(l,"_invoke",function(t,r,a){var o,i,u,s=0,l=a||[],f=!1,p={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(e,t){return o=e,i=0,u=n,p.n=t,c}};function v(t,r){for(i=t,u=r,e=0;!f&&s&&!a&&e<l.length;e++){var a,o=l[e],v=p.p,d=o[2];t>3?(a=d===r)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=n):o[0]<=v&&((a=t<2&&v<o[1])?(i=0,p.v=r,p.n=o[1]):v<d&&(a=t<3||o[0]>r||r>d)&&(o[4]=t,o[5]=r,p.n=d,i=0))}if(a||t>1)return c;throw f=!0,r}return function(a,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&v(l,d),i=l,u=d;(e=i<2?n:u)||!f;){o||(i?i<3?(i>1&&(p.n=-1),v(i,u)):p.n=u:p.v=u);try{if(s=2,o){if(i||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=o.return)&&e.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=n}else if((e=(f=p.n<0)?u:t.call(r,p))!==c)break}catch(e){o=n,i=1,u=e}finally{s=1}}return{value:e,done:f}}}(t,o,i),!0),l}var c={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var p=[][o]?e(e([][o]())):(r(e={},o,function(){return this}),e),v=f.prototype=s.prototype=Object.create(p);function d(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,r(n,i,"GeneratorFunction")),n.prototype=Object.create(v),n}return l.prototype=f,r(v,"constructor",f),r(f,"constructor",l),l.displayName="GeneratorFunction",r(f,i,"GeneratorFunction"),r(v),r(v,i,"Generator"),r(v,o,function(){return this}),r(v,"toString",function(){return"[object Generator]"}),(t=function(){return{w:u,m:d}})()}function r(n,e,t,a){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}r=function(n,e,t,a){function i(e,t){r(n,e,function(n){return this._invoke(e,t,n)})}e?o?o(n,e,{value:t,enumerable:!a,configurable:!a,writable:!a}):n[e]=t:(i("next",0),i("throw",1),i("return",2))},r(n,e,t,a)}function a(n,e,t,r,a,o,i){try{var u=n[o](i),c=u.value}catch(n){return void t(n)}u.done?e(c):Promise.resolve(c).then(r,a)}function o(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var i=n.apply(e,t);function u(n){a(i,r,o,u,c,"next",n)}function c(n){a(i,r,o,u,c,"throw",n)}u(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792"],function(e,r){"use strict";var a,i,u,c,s,l,f,p,v,d,y,m,h,g,w,b,S,_,x,j,k,L,I;return{setters:[function(n){a=n.j,i=n.aH,u=n.r,c=n.q,s=n.g},function(n){l=n.u,f=n.Q,p=n.W,v=n.az,d=n.M,y=n.eG,m=n.p,h=n.af,g=n.aH,w=n.e_},function(n){b=n.ax,S=n.ay,_=n.az,x=n.aA,j=n.p,k=n.aB,L=n.l,I=n.k}],execute:function(){e("H",a("SOFTWARE-STORE",function(){var e=i(),r=l(),a=(r.forceLtd,r.aliyunEcsLtd),O=r.payment,A=u(""),P=u(!1),q=u([]),T=u(),C=u([]),E=u([]),G=u(!1),H=u(!1),F=u(0),R=u(!1),M=u([]),V=[],W=function(){var n=o(t().m(function n(){var e,r,a=arguments;return t().w(function(n){for(;;)switch(n.n){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:"",!R.value){n.n=1;break}return n.a(2);case 1:if(!v(e)||""===e){n.n=2;break}return R.value=!0,r=s(function(){if(!e)return M.value;var n=e.toLowerCase();return V.filter(function(e){return e.name.toLowerCase().includes(n)||e.ps.toLowerCase().includes(n)||e.title.toLowerCase().includes(n)})}),M.value=r.value,R.value=!1,n.a(2);case 2:z(e);case 3:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),z=c(function(){var n=o(t().m(function n(e){return t().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,f({loading:R,request:b({p:1,type:-1,tojs:"soft.get_list",query:e,force:0,row:100}),data:{"list.data":[Array,M],"list.page":p(F)},success:function(n){M.value=n["list.data"].filter(function(n){return n.index_display}).concat(n["list.data"].filter(function(n){return!n.index_display})),V=M.value}});case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),5e3),B=function(){var n=o(t().m(function n(e,r){var a,o;return t().w(function(n){for(;;)switch(n.p=n.n){case 0:if(a=V.filter(function(n){return n.index_display}).length,V.length,M.value.length,!(a>12&&e.index_display)){n.n=1;break}return e.index_display=!e.index_display,n.a(2,d.error("首页最多只能显示12个软件!"));case 1:return n.p=1,o=e.index_display?S:_,n.n=2,f({loading:"正在处理，请稍后...",request:o(e.name),message:!0,success:function(n){n.status&&(M.value=M.value.map(function(n){return n.name==n.name&&(n.index_display=n.index_display),n}),V=V.map(function(n){return n.name==n.name&&(n.index_display=n.index_display),n}),C.value=V.filter(function(n){return n.index_display})),D()}});case 2:n.n=4;break;case 3:n.p=3,n.v,e.index_display=!e.index_display;case 4:return n.a(2)}},n,null,[[1,3]])}));return function(e,t){return n.apply(this,arguments)}}(),N=function(n){var e=n?V.filter(function(e){if(e.title.toLowerCase().includes(n.trim().toLowerCase()))return{value:e.title}}):V,t=[];return e.forEach(function(n,e,r){t.push({value:n.title})}),t},$=function(){var n=o(t().m(function n(){return t().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,f({loading:G,request:x(),success:function(n){var e=n.data.filter(function(n){return n.setup});E.value=e,C.value=e,D(),U()}});case 1:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),D=function(){if(C.value.length<=12&&(q.value.length>0&&!a.value&&"ltd"!==O.value.authType?E.value=[].concat(n(C.value),n(q.value)).slice(0,12):E.value=n(C.value).slice(0,12)),E.value.length<12)for(;E.value.length<12;)E.value.push({})},K=function(){var n=o(t().m(function n(){var e,r,a,o;return t().w(function(n){for(;;)switch(n.n){case 0:if(e=Math.ceil(F.value/12),!((r=Math.ceil(M.value.length/12))>=e)){n.n=1;break}return n.a(2);case 1:return n.n=2,b({p:r+1,type:-1,tojs:"soft.get_list",force:0,row:12});case 2:a=n.v,o=a.data,M.value=M.value.concat(o.list.data);case 3:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Q=function(n){j({disablePro:!(8===n.type),sourceId:{total:41,monitor:175,btwaf:40,tamper_core:42,bt_security:43,oneav:44,security_notice:56}[n.name]||0})},U=function(){var n,e=document.querySelector(".soft-wrapper");y.create(e,{animation:500,handle:".soft-move",chosenClass:"ghost",onEnd:(n=o(t().m(function n(e){var r;return t().w(function(n){for(;;)switch(n.n){case 0:r=E.value.splice(e.oldIndex,1)[0],E.value.splice(e.newIndex,0,r),X();case 1:return n.a(2)}},n)})),function(e){return n.apply(this,arguments)})})},X=function(){var n=E.value.filter(function(n){return void 0!==n.id&&n.name}).map(function(n){return n.name}).join("|");f({request:k({ssort:n})})},Y=function(){var n=o(t().m(function n(e){return t().w(function(n){for(;;)switch(n.n){case 0:if(!(e.endtime>=0||0===e.price)){n.n=1;break}L({name:e.name,pluginInfo:e}),n.n=3;break;case 1:return n.n=2,m({title:"购买插件",content:"插件已过期，是否前往购买？"});case 2:Q(e);case 3:return n.a(2,!1)}},n)}));return function(e){return n.apply(this,arguments)}}(),J=function(){var n=o(t().m(function n(e){var r,a;return t().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,g({sName:e.name});case 1:if(r=n.v,"-1"!==(a=r.data).task){n.n=2;break}return n.a(2,d.error("当前插件正在安装，不可重复安装"));case 2:I({name:a.name,type:"i",pluginInfo:a});case 3:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),Z=function(){var n=o(t().m(function n(){return t().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,f({request:w(),success:function(n){var e;Array.isArray(n.data)&&n.data.length>0&&(q.value=(null===(e=n.data[1])||void 0===e?void 0:e.list)||[])}});case 1:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}();return{popShow:H,isGetSoft:G,pluginKeyword:A,recommendList:q,containerRef:T,mySoftList:M,tableLoading:R,softShowList:E,load:K,createSoftList:D,getHomeInstallSoftData:$,getRecommendInfo:Z,goSoft:function(){e.push({path:"/soft"})},showPopoverHandle:W,leave:function(n){var e=n.offsetX,t=n.offsetY,r=T.value.offsetWidth,a=T.value.offsetHeight;if(e<0||t<0||e>=r||t>=a){var o=document.querySelector(".soft-search-popover");o&&"none"!=(null==o?void 0:o.style.display)?H.value=!0:(H.value=!1,A.value="")}},querySearch:function(n,e){e(N(n))},searchPluginHandle:function(){""==A.value?(P.value=!1,W()):(P.value=!0,W(A.value))},renderSoftImages:function(n){return"/static/img/soft_ico".concat("/ico-",n.replace(/-+[{0-9},\.,]+$/,""),".png")},changeSwitchHandle:B,openSoftView:Y,softStatusColor:function(n){return n.status||"phpmyadmin"===n.name?"var(--el-color-primary)":"#FF4949"},softStatus:function(n){return n.status||"phpmyadmin"===n.name?"start":"stop"},openRecommendSoftView:function(n){if(n.name&&!n.install&&!h(n.isBuy))return L({name:n.name,pluginInfo:n}),!1},openSoftPreLink:function(n){window.open(n.preview,"_blank","noopener,noreferrer")},openLtdPayView:Q,openInstall:J}}))}}})}();
