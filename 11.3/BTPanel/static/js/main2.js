import{c as e,s as t,g as a,v as s,a8 as o,x as l,y as r,e as i,C as n,A as d,z as c,B as p,J as u,F as f,M as m,D as v,K as h,O as x,L as y,N as b,b6 as g,aA as j,c6 as w}from"./base-lib.js?v=1763689792";import{H as _,a as k}from"./index53.js?v=1763689792";import{_ as M}from"./utils-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./validator.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";import"./index116.js?v=1763689792";import"./index111.js?v=1763689792";import"./store.js?v=1763689792";import"./store2.js?v=1763689792";import"./config.js?v=1763689792";import"./store3.js?v=1763689792";import"./hooks.js?v=1763689792";const B={class:"module-ui relative"},L={class:"flex flex-shrink-0 w-full"},C={class:"flex flex-col justify-end flex-shrink-0 w-full home-load-status-title"},N=["title"],T={class:"text-extraLarge text-default font-alibaba-heavy 2xl:text-subtitleLarge whitespace-nowrap",style:{fontSize:"var(--bt-home-overview-font-size)"}},$={class:"text-small"},z={class:"text-small"},A={class:"flex flex-col items-center text-small font-alibaba-semibold"},D={class:"font-800 md:text-subtitleLarge lg:text-iconLarge 2xl:text-titleLarge"},H=M(e({__name:"main",props:{visible:{type:Boolean,default:!1},custom:{type:Boolean,default:!1},showDesc:{type:Boolean,default:!0},href:{default:""},info:{default:()=>({type:"",title:"",range:0})},disk:{type:Boolean,default:!1},data:{default:()=>({})},type:{default:""},alert:{type:Boolean,default:!1},mainWidth:{default:200}},emits:["update:visible","openPopover","show","hide"],setup(e,{emit:M}){const H=_(),{tagsType:F}=t(H),S=e,W=k(),{virtualRef:I,popoverContent:J}=t(W),K=a(()=>{const e=S.mainWidth||200;let t=0;return t=e<=200?Math.max(80,Math.min(100,Math.floor(.35*e)-20)):e<=300?Math.max(100,Math.min(120,Math.floor(.33*e)-20)):Math.max(120,Math.min(140,Math.floor(.3*e)-20)),t}),O=a(()=>{const{info:e,alert:t}=S,{desc:a,title:s,range:o,rangeText:l,disabled:r,type:i}=e,n=W.chartColorActive(o,t);let d=a,{color:c}=n;if("disk"===S.type&&"var(--el-color-primary)"===c){const{data:e}=S;c=Number(e.inodes[3].replace("%",""))>90?"#ef0808":Number(e.inodes[3].replace("%",""))>80?"#ff9900":"var(--el-color-primary)"}if("object"==typeof a&&("disk"===i||"mem"===i))try{d={used:a.used?a.used:"0",used_unit:a.used_unit?a.used_unit:"0",total:a.total?a.total:"0",total_unit:a.total_unit?a.total_unit:"0"}}catch(p){d="获取中"}return{type:i,title:s,color:c,range:o,disabled:!!r,desc:d||n.desc,rangeText:l||"",position:"bottom-start"}}),P=e=>{const{rangeText:t}=O.value;return t||"".concat(e,"%")};a(()=>R.value?{backgroundColor:O.value.color}:{});const R=a(()=>"load"===O.value.type&&"success"!==F.value.load);return s(()=>{W.init()}),o(()=>{W.$reset()}),(t,a)=>{const s=g,o=j,_=w;return l(),r("div",B,[i(o,{trigger:"hover","virtual-ref":c(I),width:400,offset:e.custom?1:0,placement:c(O).position,teleported:!1,"show-after":100,"auto-close":0,"popper-class":"el-popover-shadow",onShow:a[0]||(a[0]=e=>t.$emit("show")),onHide:a[1]||(a[1]=e=>t.$emit("hide"))},{reference:n(()=>{var t,o,i,b;return[d("div",{ref_key:"popoverContent",ref:J,class:"flex flex-row items-end justify-between w-full h-full"},[d("div",L,[d("div",C,[d("span",{class:"pb-[.6rem] text-base truncate block w-[50%] font-alibaba-semibold",title:c(O).title},p(c(O).title),9,N),u(d("span",T,["object"!=typeof c(O).desc||"disk"!==c(O).type&&"mem"!==c(O).type?(l(),r(f,{key:1},[v(p(c(O).desc),1)],64)):(l(),r(f,{key:0},[d("span",{style:m({color:c(O).color})},[d("span",null,p(null==(t=c(O).desc)?void 0:t.used),1),d("span",$,p(null==(o=c(O).desc)?void 0:o.used_unit),1)],4),a[2]||(a[2]=d("span",null," / ",-1)),d("span",null,p(null==(i=c(O).desc)?void 0:i.total),1),d("span",z,p(null==(b=c(O).desc)?void 0:b.total_unit),1)],64))],512),[[h,e.showDesc]])])]),u((l(),x(s,{class:y(["status-main-progress",{"mount-progress":"None"===e.data.path}]),type:"circle",width:c(K),"stroke-width":8,color:c(O).color,percentage:c(O).range||0,format:P,style:m("color:"+c(O).color)},{default:n(({percentage:e})=>[d("div",A,[d("span",{class:"percentage-value",style:m({color:c(O).color})},[d("span",D,p(Number(e).toFixed(0)),1),a[3]||(a[3]=v("% ",-1))],4)])]),_:1},8,["width","class","color","percentage","style"])),[[_,void 0,"popover"]])],512)]}),default:n(()=>[b(t.$slots,"default",{},void 0,!0)]),_:3},8,["virtual-ref","offset","placement"])])}}}),[["__scopeId","data-v-b60c832a"]]);export{H as default};
