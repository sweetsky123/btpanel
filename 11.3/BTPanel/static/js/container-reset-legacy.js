!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function i(r,o,u,a){var i=o&&o.prototype instanceof c?o:c,f=Object.create(i.prototype);return n(f,"_invoke",function(r,n,o){var u,a,i,c=0,f=o||[],s=!1,m={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(e,r){return u=e,a=0,i=t,m.n=r,l}};function y(r,n){for(a=r,i=n,e=0;!s&&c&&!o&&e<f.length;e++){var o,u=f[e],y=m.p,p=u[2];r>3?(o=p===n)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=y&&((o=r<2&&y<u[1])?(a=0,m.v=n,m.n=u[1]):y<p&&(o=r<3||u[0]>n||n>p)&&(u[4]=r,u[5]=n,m.n=p,a=0))}if(o||r>1)return l;throw s=!0,n}return function(o,f,p){if(c>1)throw TypeError("Generator is already running");for(s&&1===f&&y(f,p),a=f,i=p;(e=a<2?t:i)||!s;){u||(a?a<3?(a>1&&(m.n=-1),y(a,i)):m.n=i:m.v=i);try{if(c=2,u){if(a||(o="next"),e=u[o]){if(!(e=e.call(u,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,a<2&&(a=0)}else 1===a&&(e=u.return)&&e.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((e=(s=m.n<0)?i:r.call(n,m))!==l)break}catch(e){u=t,a=1,i=e}finally{c=1}}return{value:e,done:s}}}(r,u,a),!0),f}var l={};function c(){}function f(){}function s(){}e=Object.getPrototypeOf;var m=[][u]?e(e([][u]())):(n(e={},u,function(){return this}),e),y=s.prototype=c.prototype=Object.create(m);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,n(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t}return f.prototype=s,n(y,"constructor",s),n(s,"constructor",f),f.displayName="GeneratorFunction",n(s,a,"GeneratorFunction"),n(y),n(y,a,"Generator"),n(y,u,function(){return this}),n(y,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:p}})()}function n(t,e,r,o){var u=Object.defineProperty;try{u({},"",{})}catch(t){u=0}n=function(t,e,r,o){function a(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?u?u(t,e,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[e]=r:(a("next",0),a("throw",1),a("return",2))},n(t,e,r,o)}function o(t,e,r,n,o,u,a){try{var i=t[u](a),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise(function(n,u){var a=t.apply(e,r);function i(t){o(a,n,u,i,l,"next",t)}function l(t){o(a,n,u,i,l,"throw",t)}i(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792"],function(e,n){"use strict";var o,a,i,l,c,f,s,m,y,p,d,v,b,g,h,_,w,x,C,j,S,N;return{setters:[function(t){o=t.c,a=t.r,i=t.o,l=t.v,c=t.x,f=t.y,s=t.e,m=t.C,y=t.z,p=t.J,d=t.D,v=t.K,b=t.S,g=t.A,h=t.ad,_=t.ab,w=t.H},function(t){x=t.aQ,C=t.Q,j=t.lo,S=t.ax,N=t.k},null],execute:function(){var n={class:"pt-1.6rem"};e("default",o({__name:"container-reset",setup:function(e){var o=x(),O=o.refs.currentConDetail,R=o.getCurrentCon,M=a(),A=i({Name:"",MaximumRetryCount:0}),P=[{value:"no",label:"不重启"},{value:"unless-stopped",label:"仅非正常退出的时候重启"},{value:"always",label:"停止后马上重启"},{value:"on-failure",label:"失败后重启"}],T={MaximumRetryCount:[{required:!0,message:"请输入最大重试计数",trigger:["blur"]},{type:"number",message:"请输入正整数",min:0,trigger:["blur"]}]},k=function(){var t=u(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,M.value.validate();case 1:e={id:O.value.Id,restart_policy:{Name:A.Name}},"on-failure"==A.Name&&(e.restart_policy.MaximumRetryCount=Number(A.MaximumRetryCount)),C({loading:"正在保存策略,请稍后...",request:j({data:JSON.stringify(e)}),message:!0,success:function(){var t=u(r().m(function t(e){return r().w(function(t){for(;;)switch(t.n){case 0:e.status&&R(O.value.Id);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()});case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();return l(u(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.n){case 0:A.Name=(null===(e=O.value.HostConfig)||void 0===e?void 0:e.RestartPolicy.Name)||"",A.MaximumRetryCount=(null===(n=O.value.HostConfig)||void 0===n?void 0:n.RestartPolicy.MaximumRetryCount)||0;case 1:return t.a(2)}},t)}))),function(e,r){var o=S,u=h,a=N,i=_,l=w;return c(),f("div",n,[s(i,{ref_key:"cmdFormRef",ref:M,model:y(A),rules:T,onSubmit:r[2]||(r[2]=b(function(){},["prevent"]))},{default:m(function(){return[s(u,{prop:"type",label:"重启策略"},{default:m(function(){return[s(o,{modelValue:y(A).Name,"onUpdate:modelValue":r[0]||(r[0]=function(t){return y(A).Name=t}),options:P,class:"!w-[20rem]"},null,8,["modelValue"])]}),_:1}),p(s(u,{prop:"MaximumRetryCount",label:"最大重试计数"},{default:m(function(){return[s(a,{width:"20rem",type:"number",modelValue:y(A).MaximumRetryCount,"onUpdate:modelValue":r[1]||(r[1]=function(t){return y(A).MaximumRetryCount=t}),modelModifiers:{number:!0},placeholder:"请输入最大重试计数",min:0,textType:"次"},{append:m(function(){return t(r[4]||(r[4]=[d(" 次 ",-1)]))}),_:1},8,["modelValue"])]}),_:1},512),[[v,"on-failure"==y(A).Name]])]}),_:1},8,["model"]),s(l,{class:"ml-[10rem]",title:"保存策略",type:"primary",onClick:r[3]||(r[3]=function(t){return k()})},{default:m(function(){return t(r[5]||(r[5]=[d("保存策略",-1)]))}),_:1}),r[6]||(r[6]=g("ul",{class:"tips mt-[3.4rem] list-square ml-[10rem]"},[g("li",{class:"mt-[4px]"},"手动关闭的将不会自动启动")],-1))])}}}))}}})}();
