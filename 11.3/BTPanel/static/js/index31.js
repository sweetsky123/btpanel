import{r as e,o as t,aE as a,c as l,g as s,w as n,v as o,a8 as r,I as c,x as i,y as u,A as m,e as d,z as p,C as v,D as h,R as f,J as g,M as _,F as y,b1 as x,K as k,L as w,H as b,U as C,V as j,ay as D,aA as R,S as V,B as P,G as S,Q as I,be as q,O as T,at as E,as as M,ar as O,aT as H,bc as L,b9 as A,bd as U}from"./base-lib.js?v=1763689792";import{aQ as N,n as B,H as W,M as F,p as Q,bR as z,cs as J,Q as K,bZ as G,ct as X,u as Y,_ as Z,j as $,E as ee,aS as te,V as ae,e as le}from"./utils-lib.js?v=1763689792";import{o as se,t as ne,N as oe}from"./useMethods.js?v=1763689792";import{u as re}from"./use-socket-request.js?v=1763689792";import{_ as ce}from"./index260.js?v=1763689792";import{_ as ie}from"./index123.js?v=1763689792";import{B as ue}from"./index119.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./column.js?v=1763689792";import"./index110.js?v=1763689792";import"./ace.js?v=1763689792";const{refs:{orchestrationData:me}}=N(),de=e(null),pe=e(!1),ve=e=>{switch(e){case"running":return{text:"运行中",type:"success"};case"exited":return{text:"已停止",type:"danger"};default:return{text:"异常",type:"warning"}}},he=e(!0),fe=async e=>{B({isAsync:!0,component:()=>W(()=>import("./index266.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{wsConfirm:e},title:"添加容器编排",area:60,btn:"确定"})},ge=async({params:e,close:t})=>{try{return new Promise(async(a,l)=>{await B({isAsync:!0,title:"添加日志 - 请耐心等待不要关闭此窗口",area:60,component:()=>W(()=>import("./index267.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{init:l=>{de.value.socketRequest({params:e,onMessage:e=>{t(),l(e.msg),-1===(null==e?void 0:e.data)&&(F.request(e),me.value.refreshList="force",a(e))}})}}})})}catch(a){}},_e=async()=>{var e;null==(e=de.value)||e.socketDestroy();const{socketRequest:t,socketDestroy:a}=re("/ws_modsoc",!1);return de.value={socketRequest:t,socketDestroy:a},new Promise((e,t)=>{e(de.value)})},ye=(e,t)=>{if(!e.startsWith("0.0.0.0:"))return;const a=window.vite_public_ip,l=e.split("->")[0].split(":")[1],s="".concat(t,"://").concat(a,":").concat(l);window.open(s,"_blank")},{refs:{orchestrationData:xe}}=N(),ke=e(""),we=e([]),be=t({con:!1,log:!1}),Ce=e("容器日志"),je=e(!1),De=e("暂无日志信息"),Re=e=>{const t=[{text:"重启",command:"restart"},{text:"停止",command:"stop"},{text:"强制停止",command:"kill"}],a=[{text:"启动",command:"start"}],l=[{text:"重启",command:"restart"},{text:"强制停止",command:"kill"}];switch(e){case"running":return t;case"exited":return a;default:return l}},Ve=e=>{switch(e){case"running":return{text:"运行中",type:"success"};case"exited":return{text:"已停止",type:"danger"};default:return{text:"异常",type:"warning"}}},Pe=async(e,t=!0)=>{try{let a="";switch(e){case"stop":"stop"===e&&(a="停止");case"start":"start"===e&&(a="启动");case"restart":"restart"===e&&(a="重启");case"update":"update"===e&&(a="更新");case"rebuild":"rebuild"===e&&(a="重建");case"down":"down"===e&&(a="停止并删除所有容器"),t&&await Q({icon:"warning-filled",title:"【".concat(xe.value.currentCompose.name,"】").concat(a),width:"35rem",content:"容器编排即将".concat(a,",是否继续？")});const l={mod_name:"docker",sub_mod_name:"com",def_name:e,path:xe.value.currentCompose.path,project_name:xe.value.currentCompose.name,ws_callback:e};B({isAsync:!0,title:"编排【".concat(xe.value.currentCompose.name,"】日志"),area:60,component:()=>W(()=>import("./index267.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{init:e=>{de.value.socketRequest({params:l,onMessage:t=>{-1===t.data&&F.request(t),e(t.msg)}})}}});break;case"delete":(async e=>{try{await Q({icon:"warning-filled",title:"删除容器编排【".concat(e.name,"】"),width:"35rem",content:"将删除指定容器编排【".concat(e.name,"】,是否继续？")});const t={mod_name:"docker",sub_mod_name:"com",def_name:"delete",project_name:e.name,path:e.path,ws_callback:"delete"};return me.value.noRefresh=!0,new Promise((e,a)=>{let l=F.load("正在删除中");de.value.socketRequest({params:t,onMessage:t=>{-1===(null==t?void 0:t.data)&&(l.close(),F.request(t),me.value.noRefresh=!1,me.value.refreshList=!0,e(t))}})})}catch(t){}})(xe.value.currentCompose)}}catch(a){}},Se=async e=>{try{const t=await J({container_id:e.ID});t.status?(Ce.value="容器【".concat(e.Name,"】日志"),De.value=t.data.msg,je.value=!0):F.error(t.msg)}catch(t){}},Ie=async(e,t)=>{const a={id:t.ID,status:e};K({request:G({data:JSON.stringify(a)}),loading:"正在设置容器状态，请稍后...",message:!0})},qe=async()=>{try{if(!xe.value.currentCompose.path)return void(be.con=!1);const e={mod_name:"docker",sub_mod_name:"com",def_name:"get_project_ps",path:xe.value.currentCompose.path,ws_callback:"get_project_ps"};be.con=!0,de.value.socketRequest({params:e,onMessage:e=>{we.value=z(e.data,"array",[]),be.con=!1,we.value.map(e=>{e.port=e.Ports.split(",").filter(e=>""!==e)})}})}catch(e){}},Te=async()=>{try{if(!xe.value.currentCompose.path)return void(be.log=!1);const e={mod_name:"docker",sub_mod_name:"com",def_name:"get_logs",path:xe.value.currentCompose.path,ws_callback:"get_logs"};be.log=!0;let t=0;const a=[];de.value.socketRequest({params:e,onMessage:e=>{be.log=!1;let l=z(e.msg,"string","",null,!0);if("暂无日志信息"===l)return ke.value=l,void(t=0);t>=200&&a.shift(),a.push(l),t++,ke.value=a.join("\n")}})}catch(e){}},{refs:{orchestrationData:Ee}}=N(),Me=e(""),Oe=e({}),He=e([]),Le=e([]),Ae=t({checked:!1,showCheckPopover:!1,showSlectPopover:!1,popoverContent:"",type:""}),Ue=e(!1),Ne=[{active:!0,content:"添加容器编排",event:()=>fe(ge)}];let Be=null,We=e(!0);const Fe=e({}),Qe=e(""),ze=e=>{switch(e.run_status){case"running":return{text:"运行中",type:"success"};case"exited":return{text:"已停止",type:"danger"};default:return{text:"异常",type:"warning"}}},Je=e=>{const t=He.value.indexOf(e.name);-1===t?(He.value.push(e.name),Ae.checked=He.value.length===Le.value.length):(He.value.splice(t,1),Ae.checked=!1)},Ke=e=>{Qe.value=e.remark,Fe.value[e.name]=!0},Ge=e=>{const t={},a=e.map(e=>(t[e.name]=He.value.includes(e.name),e.name));return He.value=He.value.filter(e=>a.includes(e)),t},Xe=e=>{switch(clearTimeout(Be),Ae.showSlectPopover=!1,Ae.showCheckPopover=!1,e){case"select":Ae.showSlectPopover=!0,Be=setTimeout(()=>{Ae.showSlectPopover=!1},2e3);break;case"check":Ae.showCheckPopover=!0,Be=setTimeout(()=>{Ae.showCheckPopover=!1},2e3)}},Ye=()=>{if(0===He.value.length||""===Ae.type)switch(!0){case 0===He.value.length:Ae.popoverContent="请先选择要操作的容器编排",Xe("check");break;case""===Ae.type:Ae.popoverContent="请选择批量操作",Xe("select")}},Ze=e=>{e?(He.value=Le.value.map(e=>e.name),Oe.value=Ge(Le.value)):(He.value=[],Oe.value=Ge(Le.value))},$e=()=>et(),et=async()=>{try{await Q({icon:"warning-filled",title:"批量删除容器编排",width:"35rem",content:"将批量删除选中的".concat(He.value.length,"个容器编排,是否继续？")});const e={mod_name:"docker",sub_mod_name:"com",def_name:"batch_delete",project_list:[],ws_callback:"batch_delete"};He.value.map(t=>{const a=Le.value.find(e=>e.name===t);a&&e.project_list.push({project_name:t,path:a.path})});const t=[];Ee.value.noRefresh=!0;let l=F.load("正在删除中");de.value.socketRequest({params:e,onMessage:e=>{let s=z(e.data,"object",!1);s&&t.push({name:s.project_name,status:s.status}),-1===e.data&&(Ee.value.noRefresh=!1,l.close(),Ue.value=!1,B({title:"批量删除结果",area:42,component:()=>W(()=>import("./index125.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{resultData:t,autoTitle:"批量删除完成",resultColumn:[{label:"容器编排名称",prop:"name"},{label:"操作结果",align:"right",render:e=>a("span",{class:e.status?"text-primary":e.status?"text-danger":""},e.status?"删除成功":"删除失败")}]}}))}})}catch(e){}},tt=e=>{e.target.blur()},at=async(e,t)=>{Fe.value[t.name]=!1,Ee.value.isEdit=!1,e.target.value!==t.remark&&(await K({request:X({remark:e.target.value,name:t.name,path:t.path}),message:!0,success:a=>{a.status&&(t.remark=e.target.value)}}),lt(t))},lt=async e=>{Fe.value[e.name]||(await _e(),nt(),Ee.value.currentCompose=e,e.path===Ee.value.currentCompose.path&&(Ee.value.refreshItem=!Ee.value.refreshItem))},st=()=>{B({title:"编排模板",area:100,component:()=>W(()=>import("./index268.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})},nt=async e=>{try{const t={mod_name:"docker",sub_mod_name:"com",def_name:"get_project_list",ws_callback:"get_project_list"};Ee.value.refreshList=!1,de.value.socketRequest({params:t,onMessage:async t=>{if(Ee.value.isEdit)return;if(Le.value=t.data||[],Ee.value.loading=!1,Oe.value=Ge(Le.value),he.value=0===Le.value.length,0===Le.value.length)return void(We.value=!1);if(Ee.value.noRefresh)return;Le.value.forEach(e=>{Fe.value[e.name]||(Fe.value[e.name]=!1)});const a=Ee.value.currentCompose.name,l=Le.value.find(e=>e.name===a);!l&&a&&(await _e(),nt()),"force"===e?lt(Le.value[0]):Ee.value.currentCompose=l||Le.value[0],We.value=!1}})}catch(t){Ee.value.loading=!1,We.value=!1}},ot={class:"flex items-center flex-wrap gap-[10px] p-[1.6rem]"},rt={class:"w-full relative"},ct=["onClick"],it={class:"w-[1.6rem]"},ut={class:"flex flex-col ml-[1rem] w-[60%] truncate"},mt={class:"truncate compose-title"},dt=["onClick"],pt=["value","onBlur"],vt={class:"batch-select"},ht={class:"ml-[1rem]"},ft=Z(l({__name:"index",setup(e){const{mainHeight:t}=Y(),{refs:{orchestrationData:a}}=N(),l=s(()=>Me.value?Le.value.filter(e=>e.name.includes(Me.value)):Le.value),T=s(()=>0===He.value.length),E=s(()=>Le.value.length!==He.value.length&&He.value.length>0);return n(()=>a.value.refreshList,e=>{e&&nt(e)}),o(()=>{nt()}),r(()=>{Me.value="",He.value=[],Oe.value={},Le.value=[],Ae.checked=!1,Ae.showCheckPopover=!1,Ae.showSlectPopover=!1,Ae.popoverContent="",Ae.type="",Ue.value=!1,Fe.value={},Qe.value="",We.value=!0,clearTimeout(Be),Be=null}),(e,s)=>{const n=ce,o=b,r=C,M=j,O=q,H=D,L=R,A=c("focus"),U=c("bt-loading");return i(),u("div",{class:"left-list",style:_({height:"".concat(p(t)-90,"px")})},[m("div",ot,[d(n,{options:p(Ne)},null,8,["options"]),d(o,{onClick:p(st)},{default:v(()=>[...s[10]||(s[10]=[h("编排模板",-1)])]),_:1},8,["onClick"]),m("div",rt,[d(r,{modelValue:p(Me),"onUpdate:modelValue":s[0]||(s[0]=e=>f(Me)?Me.value=e:null),placeholder:"请输入关键字",clear:""},{prefix:v(()=>[...s[11]||(s[11]=[m("i",{class:"svgtofont-el-search"},null,-1)])]),_:1},8,["modelValue"])])]),g((i(),u("div",{class:"table-con",style:_({height:"".concat(p(t)-270,"px")})},[(i(!0),u(y,null,x(p(l),e=>(i(),u("div",{key:e.name,class:w(["list-item h-[5.4rem]",{active:e.name===p(a).currentCompose.name}]),onClick:t=>p(lt)(e)},[d(M,{modelValue:p(Oe)[e.name],"onUpdate:modelValue":t=>p(Oe)[e.name]=t,onChange:t=>p(Je)(e),onClick:s[1]||(s[1]=V(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onChange"]),g(m("div",it,null,512),[[k,!p(Ue)]]),d(O,{type:p(ze)(e).type,class:"ml-[1rem] w-[5rem] status-tag text-center !h-[1.9rem] !leading-[1.9rem] !px-[.4rem]"},{default:v(()=>[h(P(p(ze)(e).text),1)]),_:2},1032,["type"]),m("div",ut,[m("span",mt,P(e.name),1),p(Fe)[e.name]?S("",!0):(i(),u("span",{key:0,class:w(["remark-text",e.remark?"":"empty-remark"]),onClick:V(t=>p(Ke)(e),["stop"])},P(e.remark||"点击编辑备注"),11,dt)),p(Fe)[e.name]?g((i(),u("input",{key:1,type:"text",class:"remark-input",title:"点击编辑备注，回车或失焦保存",value:p(Qe),placeholder:"点击编辑备注",onClick:s[2]||(s[2]=V(()=>{},["stop"])),onFocus:s[3]||(s[3]=e=>p(a).isEdit=!0),onKeyup:s[4]||(s[4]=I((...e)=>p(tt)&&p(tt)(...e),["enter"])),onMousedown:s[5]||(s[5]=V(()=>{},["stop"])),onMouseup:s[6]||(s[6]=V(()=>{},["stop"])),onBlur:t=>p(at)(t,e)},null,40,pt)),[[A]]):S("",!0)])],10,ct))),128)),g(d(H,{description:"当前列表为空"},null,512),[[k,0===p(l).length]])],4)),[[U,p(We)],[U,"正在获取列表","title"]]),m("div",vt,[d(L,{modelValue:p(Ae).showCheckPopover,"onUpdate:modelValue":s[8]||(s[8]=e=>p(Ae).showCheckPopover=e),trigger:"manual","popper-class":"popper-danger",placement:"top-start",content:p(Ae).popoverContent},{reference:v(()=>[d(M,{modelValue:p(Ae).checked,"onUpdate:modelValue":s[7]||(s[7]=e=>p(Ae).checked=e),indeterminate:p(E),onChange:p(Ze)},null,8,["modelValue","indeterminate","onChange"])]),_:1},8,["modelValue","content"]),m("div",{class:"relative flex items-center",onClick:s[9]||(s[9]=(...e)=>p(Ye)&&p(Ye)(...e))},[m("div",{class:w(["absolute w-full h-full z-999 cursor-not-allowed",p(T)?"":"hidden"])},null,2),m("div",ht,[d(o,{type:"primary",disabled:p(T),onClick:p($e)},{default:v(()=>[...s[12]||(s[12]=[h(" 批量删除 ",-1)])]),_:1},8,["disabled","onClick"])])])])],4)}}}),[["__scopeId","data-v-79c8a524"]]),gt={class:"menu-col h-full"},_t={class:"p-[1.6rem] !pt-0 overflow-y-auto",style:{height:"calc(100% - 50px)"}},yt={class:"flex flex-col w-full"},xt={class:"flex items-center w-full"},kt=["title"],wt=["onClick"],bt={class:"flex items-center ml-[2rem]"},Ct=["title"],jt={class:"flex flex-wrap content-center gap-[1rem]",style:{"grid-template-columns":"repeat(2, auto)"}},Dt={class:"-m-[12px]"},Rt=["onClick"],Vt=["onClick"],Pt={class:"mt-[1.6rem] bg-[rgba(var(--el-color-white-rgb),var(--bt-main-content-opacity))] rounded-medium"},St=Z(l({__name:"index",setup(e){const{mainHeight:t}=Y(),{refs:{orchestrationData:a}}=N(),l=s(()=>a.value.currentCompose);return n(()=>l.value.path,()=>{qe(),Te()}),n(()=>a.value.refreshItem,e=>{qe(),Te()}),n(()=>pe.value,e=>{e&&(pe.value=!1,Pe("start",!1))}),r(()=>{ke.value="",we.value=[],be.con=!1,be.log=!1,Ce.value="容器日志",je.value=!1,De.value="暂无日志信息"}),(e,a)=>{const l=q,s=E,n=M,o=O,r=b,k=H,C=R,j=D,V=ie,I=$,L=c("bt-loading");return i(),u("div",gt,[m("div",{class:"mt-[1.6rem] bg-[rgba(var(--el-color-white-rgb),var(--bt-main-content-opacity))] rounded-medium",style:_("height: calc(100% - ".concat(p(t)>800?410:255,"px)"))},[a[3]||(a[3]=m("div",{class:"card-title"},"容器列表",-1)),g((i(),u("div",_t,[(i(!0),u(y,null,x(p(we),e=>(i(),u("div",{class:"card-item con-item w-full !rounded-0",key:e.ID},[m("div",yt,[m("div",xt,[m("div",{class:"flex items-center",style:{width:"calc(100% - 160px)"},title:e.Name},[m("span",{class:"inline-block truncate leading-normal cursor-pointer",style:{"max-width":"calc(100% - 60px)"},onClick:t=>p(se)({...e,id:e.ID,name:e.Name})},P(e.Name),9,wt),d(o,{placement:"bottom",onCommand:t=>p(Ie)(t,e)},{dropdown:v(()=>[d(n,null,{default:v(()=>[(i(!0),u(y,null,x(p(Re)(e.State),e=>(i(),T(s,{key:e.command,command:e.command},{default:v(()=>[h(P(e.text),1)]),_:2},1032,["command"]))),128))]),_:2},1024)]),default:v(()=>[d(l,{type:p(Ve)(e.State).type,class:"status-tag w-[5rem] text-center ml-[.5rem]",title:""},{default:v(()=>[h(P(p(Ve)(e.State).text),1)]),_:2},1032,["type"])]),_:2},1032,["onCommand"])],8,kt),m("div",bt,[d(k,{effect:"dark",content:"容器终端",placement:"top","open-delay":500},{default:v(()=>[d(r,{onClick:t=>p(ne)({id:e.ID,status:e.State})},{default:v(()=>[...a[1]||(a[1]=[m("div",{class:"flex items-center"},[m("span",{class:"fileTerminal-icon"}),h("终端")],-1)])]),_:1},8,["onClick"])]),_:2},1024),d(k,{effect:"dark",content:"容器日志",placement:"top","open-delay":500},{default:v(()=>[d(r,{type:"default",onClick:t=>p(Se)(e),class:"ml-[1rem]"},{default:v(()=>[...a[2]||(a[2]=[m("div",{class:"flex items-center"},[m("span",{class:"record-icon"}),h("日志")],-1)])]),_:1},8,["onClick"])]),_:2},1024)])]),m("div",{class:"text-disabled w-[40%] truncate mt-[-.4rem]",title:e.ID},P(e.ID),9,Ct)]),m("div",{class:w(["flex items-center justify-between mt-[1.2rem]",e.port.length>0?"mt-[1.6rem]":""])},[m("div",jt,[(i(!0),u(y,null,x(e.port,e=>(i(),T(C,{key:e,disabled:!e.startsWith("0.0.0.0:"),trigger:"hover",placement:"bottom",width:"12.5rem","popper-class":"!min-w-[12.5rem]"},{reference:v(()=>[d(l,{type:"info",class:w({"cursor-pointer":e.startsWith("0.0.0.0:")}),onClick:t=>p(ye)(e,"http")},{default:v(()=>[h(P(e),1)]),_:2},1032,["class","onClick"])]),default:v(()=>[m("div",Dt,[m("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-light",onClick:t=>p(ye)(e,"http")},"HTTP协议访问",8,Rt),m("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-light",onClick:t=>p(ye)(e,"https")},"HTTPS协议访问",8,Vt)])]),_:2},1032,["disabled"]))),128))])],2)]))),128)),0!==p(we).length||p(be).con?S("",!0):(i(),T(j,{key:0,style:{height:"calc(100% - 50px)"},description:"暂无容器"}))])),[[L,p(be).con],[L,"正在获取容器列表","title"]])],4),m("div",Pt,[a[4]||(a[4]=m("div",{class:"card-title"},"编排日志",-1)),g((i(),u("div",{class:"card-item !p-[.8rem] h-full",style:_({height:p(t)>800?"33rem":"18rem"})},[d(V,{title:"全屏查看-编排日志",content:p(ke),isHtml:!0,fullScreen:{title:"全屏查看-编排日志",onRefresh:p(Te)},class:"h-full font-[PingFang SC]"},null,8,["content","fullScreen"])],4)),[[L,p(be).log],[L,"正在获取编排日志","title"]])]),d(I,{title:p(Ce),area:[60,40],modelValue:p(je),"onUpdate:modelValue":a[0]||(a[0]=e=>f(je)?je.value=e:null),"append-to-body":!0},{default:v(()=>[d(V,{title:"全屏查看-日志",content:p(De),isHtml:!0,isRefreshBtn:!1,class:"h-[40rem] font-[PingFang SC]"},null,8,["content"])]),_:1},8,["title","modelValue"])])}}}),[["__scopeId","data-v-2f8270d2"]]),{refs:{orchestrationData:It}}=N(),qt=e(""),Tt=e(""),Et={config:"",env:""},Mt=e(0),Ot={mode:"ace/mode/yaml",theme:ee.value?"ace/theme/clouds_midnight":"ace/theme/chrome"},Ht=e=>{te("Path",e.path),window.location.href=window.location.origin+"/files"},Lt=async e=>{try{const t={mod_name:"docker",sub_mod_name:"com",def_name:"get_config",path:It.value.currentCompose.path,ws_callback:"get_config"},a=await de.value.socketRequest({params:t});a.status?(Et.config=z(a.data.config,"string",""),Et.env=z(a.data.env,"string",""),qt.value=Et.config,Tt.value=Et.env):F.error(a.msg),setTimeout(()=>{Mt.value=e.value.offsetWidth-20},100)}catch(t){}},At=async()=>{try{await Q({title:"保存文件",width:"35rem",icon:"warning-filled",content:"即将保存文件，保存后将重启容器编排，是否继续？"});const e={mod_name:"docker",sub_mod_name:"com",def_name:"save_config",config:qt.value,env:Tt.value,path:It.value.currentCompose.path,ws_callback:"save_config"},t=await de.value.socketRequest({params:e});t.status?(pe.value=!0,Et.config=qt.value,Et.env=Tt.value):F.request(t)}catch(e){Ut()}},Ut=()=>{qt.value=Et.config,Tt.value=Et.env},Nt={style:{height:"calc(100% - 20px)"}},Bt={class:"px-[1.6rem] pb-[1.6rem] h-full"},Wt={class:"text-base mt-[.8rem] mb-[1.2rem] !pt-0 flex items-center truncate"},Ft=["title"],Qt={style:{height:"calc(100% - 75px)"}},zt={class:"flex items-center justify-end mt-[1.6rem]"},Jt=Z(l({__name:"index",setup(t){const{mainHeight:a}=Y(),{refs:{orchestrationData:l}}=N(),o=e(null),c=e(null),g=e(null),y=s(()=>l.value.currentCompose);return n(()=>y.value.path,()=>{Lt(g)}),n(()=>l.value.refreshItem,e=>{Lt(g)}),r(()=>{qt.value="",Tt.value="",Et.config="",Et.env=""}),(e,t)=>{const l=ue,s=b;return i(),u("div",Nt,[m("div",{ref_key:"editorRef",ref:g,class:"bg-[rgba(var(--el-color-white-rgb),var(--bt-main-content-opacity))] rounded-medium mt-[1.6rem] h-full"},[t[6]||(t[6]=m("div",{class:"card-title"},"配置文件",-1)),m("div",Bt,[m("div",Wt,[t[3]||(t[3]=h(" docker-compose文件内容 ",-1)),m("span",{class:"ml-[1rem] path",title:p(y).path,onClick:t[0]||(t[0]=e=>p(Ht)({path:p(y).path}))},"跳转目录",8,Ft)]),m("div",Qt,[d(l,{ref_key:"yamlRef",ref:o,style:_(" height: calc(100% - ".concat(p(a)>800?336:244,"px)")),class:"compose-editor",modelValue:p(qt),"onUpdate:modelValue":t[1]||(t[1]=e=>f(qt)?qt.value=e:null),autoSave:!1,request:{},editorOption:p(Ot),onSave:p(At)},null,8,["style","modelValue","editorOption","onSave"]),t[5]||(t[5]=m("div",{class:"my-[1rem] text-base"},".env",-1)),d(l,{ref_key:"envRef",ref:c,style:_({height:p(a)>800?"200px":"100px"}),modelValue:p(Tt),"onUpdate:modelValue":t[2]||(t[2]=e=>f(Tt)?Tt.value=e:null),autoSave:!1,request:{},editorOption:p(Ot),onSave:p(At)},null,8,["style","modelValue","editorOption","onSave"]),m("div",zt,[d(s,{type:"primary",onClick:p(At)},{default:v(()=>[...t[4]||(t[4]=[h("保存",-1)])]),_:1},8,["onClick"])])])])],512)])}}}),[["__scopeId","data-v-b93056cb"]]),Kt={class:"relative h-full"},Gt={class:"p-[1.6rem] compose-menu !mt-[0rem] rounded-medium bg-[rgba(var(--el-color-white-rgb),var(--bt-main-content-opacity))]"},Xt={class:"flex items-center justify-between"},Yt={class:"flex items-center"},Zt={class:"text-large whitespace-nowrap"},$t={class:"flex justify-center mt-[1.6rem] gap-[1rem] items-center text-small text-tertiary"},ea={class:"whitespace-nowrap"},ta={class:"whitespace-nowrap"},aa={class:"flex items-center ml-[5rem]"},la=Z(l({__name:"index",setup(e){const{mainHeight:t,mainWidth:a}=Y(),{refs:{orchestrationData:l}}=N(),n=s(()=>l.value.currentCompose);return _e(),me.value.currentCompose.path="",me.value.currentCompose.name="",me.value.loading=!0,r(()=>{var e;me.value.currentCompose.path="",null==(e=de.value)||e.socketDestroy(),pe.value=!1,de.value=null}),(e,s)=>{const o=L,r=b,f=A,y=le,x=U,w=D,C=c("bt-loading");return i(),u("div",{class:"relative container-table-tab !bg-transparent",style:_({height:"".concat(p(t)-170,"px")})},[m("div",Kt,[d(x,{gutter:20,class:"!mx-0"},{default:v(()=>[d(o,{xs:24,sm:8,md:8,lg:5,xl:4,class:"!pl-0"},{default:v(()=>[d(ft)]),_:1}),g((i(),T(o,{xs:24,sm:16,md:16,lg:19,xl:20,class:"!pl-0 !pr-0",style:_({height:"".concat(p(t)-80,"px"),overflowY:p(a)<984?"auto":"hidden",overflowX:"hidden",borderRadius:"1.6rem"})},{default:v(()=>{var e,a,l,c;return[m("div",Gt,[m("div",Xt,[m("div",Yt,[m("span",Zt,[m("span",null,P(null==(e=p(n))?void 0:e.name),1),m("span",$t,[m("span",ea,"创建时间："+P((null==(a=p(n))?void 0:a.time)?p(ae)(null==(l=p(n))?void 0:l.time):"--"),1),m("span",ta,"容量数量："+P(null==(c=p(n))?void 0:c.container_count),1)])]),m("div",aa,[d(f,null,{default:v(()=>["danger"===p(ve)(p(n).run_status).type?(i(),T(r,{key:0,type:"default",onClick:s[0]||(s[0]=e=>p(Pe)("start"))},{default:v(()=>[...s[7]||(s[7]=[h("启动",-1)])]),_:1})):S("",!0),"danger"!==p(ve)(p(n).run_status).type?(i(),T(r,{key:1,type:"default",onClick:s[1]||(s[1]=e=>p(Pe)("stop"))},{default:v(()=>[...s[8]||(s[8]=[h("停止",-1)])]),_:1})):S("",!0),"danger"!==p(ve)(p(n).run_status).type?(i(),T(r,{key:2,type:"default",onClick:s[2]||(s[2]=e=>p(Pe)("restart"))},{default:v(()=>[...s[9]||(s[9]=[h("重启",-1)])]),_:1})):S("",!0),d(r,{type:"default",onClick:s[3]||(s[3]=e=>p(Pe)("update"))},{default:v(()=>[...s[10]||(s[10]=[h("更新镜像",-1)])]),_:1}),d(r,{type:"default",onClick:s[4]||(s[4]=e=>p(Pe)("rebuild"))},{default:v(()=>[...s[11]||(s[11]=[h("重建",-1)])]),_:1}),d(r,{class:"!hover:bg-danger !hover:text-white !hover:border-danger",type:"default",onClick:s[5]||(s[5]=e=>p(Pe)("delete"))},{default:v(()=>[...s[12]||(s[12]=[h("删除",-1)])]),_:1})]),_:1}),d(y,{class:"ml-[1.6rem]",onClick:p(oe)},{default:v(()=>[...s[13]||(s[13]=[h("需求反馈",-1)])]),_:1},8,["onClick"])])])])]),d(x,{gutter:20,style:_({height:"".concat(p(t)-178,"px")})},{default:v(()=>[d(o,{xs:24,sm:24,md:24,lg:14,xl:16,style:{height:"100%"}},{default:v(()=>[d(St)]),_:1}),d(o,{xs:24,sm:24,md:24,lg:10,xl:8,style:{height:"100%"},class:"lt-xl:pt-[1.6rem] !pl-0"},{default:v(()=>[d(Jt)]),_:1})]),_:1},8,["style"])]}),_:1},8,["style"])),[[k,!p(he)||p(l).loading],[C,p(l).loading],[C,"正在获取数据","title"]]),g(d(o,{class:"bg-[rgba(var(--el-color-white-rgb),var(--bt-main-content-opacity))] overflow-hidden rounded-extraLarge",xs:24,sm:16,md:16,lg:19,xl:20},{default:v(()=>[d(w,{style:_({height:"".concat(p(t)-120,"px"),borderRadius:"1.6rem"}),description:"当前暂无容器编排"},{default:v(()=>[m("span",{class:"cursor-pointer text-primary hover:text-primaryDark",onClick:s[6]||(s[6]=e=>p(fe)(p(ge)))},"点击添加容器编排")]),_:1},8,["style"])]),_:1},512),[[k,p(he)&&!p(l).loading]])]),_:1})])],4)}}}),[["__scopeId","data-v-ed006be9"]]);export{la as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
