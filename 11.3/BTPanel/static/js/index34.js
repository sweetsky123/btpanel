import{_ as e}from"./index109.js?v=1763689792";import{aQ as a,ap as t,Q as s,cA as i,n as r,H as l,p as o,cB as n,u as m,b3 as c,an as u,O as p,bY as d,_ as f}from"./utils-lib.js?v=1763689792";import{c as h,a as v,u as _}from"./column.js?v=1763689792";import{o as b,r as g,c as y,w as k,v as x,aG as j,a8 as w,x as C,y as R,e as B,C as O,A as L,z as T}from"./base-lib.js?v=1763689792";import{b as A,N as H,f as W}from"./useMethods.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";const{refs:{customLimit:q,isRefreshWarehouseList:E}}=a(),N=b({isRefresh:!0}),P=g([]),D=[{active:!0,label:"添加仓库",onClick:()=>{r({component:()=>l(()=>import("./index271.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),title:"添加仓库",area:54,btn:"添加"})}},{type:"link",label:"需求反馈",class:"ml-[2rem]",onClick:()=>{H()}}],I=e=>{r({component:()=>l(()=>import("./index271.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),title:"编辑仓库【".concat(e.name,"】"),area:54,btn:"编辑",compData:{row:e}})},J=async e=>{await o({title:"删除仓库【".concat(e.name,"】"),type:"calc",width:"35rem",content:"您真的要删除仓库【".concat(e.name,"】吗？")});const a={id:e.id};s({request:n({data:JSON.stringify(a)}),message:!0,loading:"正在删除...",success:()=>{E.value=!0}})},S=t([{label:"删除项目",value:"delete",event:async(e,a,t,s)=>{const{label:i,value:r}=s,l=async(e,a)=>{const{id:t}=e;if("delete"===r){const e={id:t};return await n({data:JSON.stringify(e)})}};await e({title:"批量".concat(i,"仓库"),content:"批量".concat(i,"已选的仓库，是否继续操作！"),column:[{label:"仓库名",prop:"name"},h()],onConfirm:async()=>(await a(l),E.value=!0,!1)})}}]),Q=(e,a)=>{setTimeout(()=>{q.value.storage||((e,a)=>{setTimeout(()=>{e.value>900?a.value.limit=20:a.value.limit=10},0)})(e,a)},0)},V={class:"relative"},z={class:"flex items-center"},G=f(y({__name:"index",setup(t){const{refs:{isRefreshWarehouseList:r}}=a(),{mainHeight:l}=m(),{BtOperation:o}=c({options:D});k(()=>r.value,e=>{e&&(N.isRefresh=!0,g())});const{BtTable:n,BtPage:f,BtBatch:h,BtColumn:b,refresh:g,param:y}=u({request:e=>(async e=>{if(E.value=!1,!N.isRefresh)return{data:A({limit:e.limit,list:P.value,p:e.p})||[],total:P.value.length};N.isRefresh=!1;const a=await s({request:i(),data:Array});return P.value=a,{data:A({limit:e.limit,list:P.value,p:e.p})||[],total:P.value.length}})(e),columns:[v(),{label:"URL",prop:"url",minWidth:100},{label:"用户",prop:"namespace",minWidth:100,isCustom:!0},{label:"仓库名",prop:"name",minWidth:100,isCustom:!0},W({table:"images",prop:"remark",edit:async e=>{s({request:d({data:JSON.stringify({id:e.id,remark:e.remark})}),message:!0})},noPlace:!0,noCustom:!0,width:200}),_([{onClick:I,isHide:e=>"docker.io"==e.url&&"docker官方库"==e.name&&""==e.username,title:"编辑"},{onClick:J,isHide:e=>"docker.io"==e.url&&"docker官方库"==e.name&&""==e.username,title:"删除"}])],extension:[S]});return x(async()=>{Q(l,y)}),j(()=>{p(["/btdocker/registry/registry_list"])}),w(()=>{N.isRefresh=!0,P.value=[]}),(a,t)=>{const s=e;return C(),R("div",V,[B(s,null,{"header-left":O(()=>[L("div",z,[B(T(o))])]),"header-right":O(()=>[B(T(b))]),content:O(()=>[B(T(n),{key:"wareTable","max-height":T(l)-220},null,8,["max-height"])]),"footer-left":O(()=>[B(T(h))]),"footer-right":O(()=>[B(T(f))]),popup:O(()=>[...t[0]||(t[0]=[])]),_:1})])}}}),[["__scopeId","data-v-d919c40e"]]);export{G as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
