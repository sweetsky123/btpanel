import{c as a,bQ as s,r as e,v as l,x as t,y as o,e as r,C as i,A as n,z as m,O as u,F as d,b1 as p,R as c,ag as f,ad as b,ab as v,V as y}from"./base-lib.js?v=1763689792";import{clearRedisDb as g}from"./database.js?v=1763689792";import{p as x,Q as _}from"./utils-lib.js?v=1763689792";import{g as j}from"./useStore2.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const w={class:"p-20px"},k={class:"border border-light p-16px w-[22rem] max-h-[20rem] overflow-auto"},h={key:1,class:"text-tertiary-50 text-small"},V=a({__name:"index",props:{compData:{default:()=>({keyList:[],sid:0})}},setup(a,{expose:V}){const{refs:{isRefreshTable:D}}=j(),O=a,S=s(O.compData,"keyList"),C=s(O.compData,"sid"),J=e();return V({onConfirm:async a=>{await x({icon:"warning-filled",title:"提示",content:"此操作将清空选中的数据库, 是否继续?"});const s=JSON.stringify(S.value.filter(a=>J.value.includes(a.name)).map(a=>a.id));await _({loading:"正在清空，请稍后...",request:g({data:JSON.stringify({ids:s,sid:C.value})}),message:!0,success:a=>{a.status&&(D.value=!0)}}),a()}}),l(()=>{J.value=S.value.map(a=>a.name)}),(a,s)=>{const e=y,l=f,g=b,x=v;return t(),o("div",w,[r(x,null,{default:i(()=>[r(g,{label:"选择数据库"},{default:i(()=>[n("div",k,[m(S).length?(t(),u(l,{key:0,modelValue:m(J),"onUpdate:modelValue":s[0]||(s[0]=a=>c(J)?J.value=a:null)},{default:i(()=>[(t(!0),o(d,null,p(m(S),(a,s)=>(t(),u(e,{class:"w-full !mr-0",label:a.name,key:s},null,8,["label"]))),128))]),_:1},8,["modelValue"])):(t(),o("span",h,"暂无数据"))])]),_:1})]),_:1})])}}});export{V as default};
