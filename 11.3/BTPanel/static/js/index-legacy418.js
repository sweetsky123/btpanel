!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function i(t,a,u,o){var i=a&&a.prototype instanceof c?a:c,s=Object.create(i.prototype);return r(s,"_invoke",function(t,r,a){var u,o,i,c=0,s=a||[],f=!1,v={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return u=n,o=0,i=e,v.n=t,l}};function p(t,r){for(o=t,i=r,n=0;!f&&c&&!a&&n<s.length;n++){var a,u=s[n],p=v.p,d=u[2];t>3?(a=d===r)&&(i=u[(o=u[4])?5:(o=3,3)],u[4]=u[5]=e):u[0]<=p&&((a=t<2&&p<u[1])?(o=0,v.v=r,v.n=u[1]):p<d&&(a=t<3||u[0]>r||r>d)&&(u[4]=t,u[5]=r,v.n=d,o=0))}if(a||t>1)return l;throw f=!0,r}return function(a,s,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,d),o=s,i=d;(n=o<2?e:i)||!f;){u||(o?o<3?(o>1&&(v.n=-1),p(o,i)):v.n=i:v.v=i);try{if(c=2,u){if(o||(a="next"),n=u[a]){if(!(n=n.call(u,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,o<2&&(o=0)}else 1===o&&(n=u.return)&&n.call(u),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);u=e}else if((n=(f=v.n<0)?i:t.call(r,v))!==l)break}catch(n){u=e,o=1,i=n}finally{c=1}}return{value:n,done:f}}}(t,u,o),!0),s}var l={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var v=[][u]?n(n([][u]())):(r(n={},u,function(){return this}),n),p=f.prototype=c.prototype=Object.create(v);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,r(p,"constructor",f),r(f,"constructor",s),s.displayName="GeneratorFunction",r(f,o,"GeneratorFunction"),r(p),r(p,o,"Generator"),r(p,u,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:d}})()}function r(e,n,t,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}r=function(e,n,t,a){function o(n,t){r(e,n,function(e){return this._invoke(n,t,e)})}n?u?u(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[n]=t:(o("next",0),o("throw",1),o("return",2))},r(e,n,t,a)}function a(e,n,t,r,a,u,o){try{var i=e[u](o),l=i.value}catch(e){return void t(e)}i.done?n(l):Promise.resolve(l).then(r,a)}function u(e){return function(){var n=this,t=arguments;return new Promise(function(r,u){var o=e.apply(n,t);function i(e){a(o,r,u,i,l,"next",e)}function l(e){a(o,r,u,i,l,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useStore-legacy12.js?v=1763689792","./ssl-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./useStore-legacy11.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792"],function(n,r){"use strict";var a,o,i,l,c,s,f,v,p,d,y,m,_,b,h,g,w,x,j,k,S,O,T,A,C,D,P,G,B,E,I,F;return{setters:[function(e){a=e.B,o=e.Q,i=e.L,l=e.k,c=e.bE,s=e.l,f=e.$,v=e.b},function(e){p=e.r,d=e.e,y=e.D,m=e.aT,_=e.c,b=e.s,h=e.g,g=e.H,w=e.w,x=e.v,j=e.a8,k=e.I,S=e.x,O=e.y,T=e.A,A=e.B,C=e.z,D=e.J,P=e.C},function(e){G=e.u},function(e){B=e.s,E=e.n},function(e){I=e._},function(e){F=e.u},null,null,null],execute:function(){var r=p(!1),L=p([]),U=p({verify_name:"",verify_value:"",domain:""}),V=p(null),q=p({}),H=p([{label:"URL",prop:"domain",showOverflowTooltip:!0,render:function(e){return d("span",null,[J(e)])}},{label:"验证结果",prop:"status",width:100,render:function(e){return d("span",{class:"".concat(e.status?"text-primary":"text-danger")},[e.status?"成功":"失败"])}},{label:"自动设置验证值",prop:"verify_status",width:120,isHide:function(){return 3===V.value},render:function(e){return e.verify_status?d("span",{class:"text-primary"},[y("成功")]):d(m,{placement:"top",content:e.msg,enterable:!1},{default:function(){return[d("span",{class:"text-danger"},[y("失败")])]}})}},{label:"操作",align:"right",width:160,render:function(e,n){var t=[];return 3===V.value&&t.push(d("span",{class:"cursor-pointer bt-link",onClick:function(){return a({value:J(e)})}},[y("复制")]),d(I,null,null),d("a",{class:"bt-link",href:J(e),target:"_blank"},[y("打开")]),d(I,null,null)),t.push(d("span",{class:"cursor-pointer bt-link",onClick:function(){return N(e,n)}},[y("重新验证")])),d("div",{class:"flex items-center justify-end"},[t])}}]),J=function(e){return 3!==V.value?e.domain:"http://".concat(e.domain).concat(U.value.verify_name)},N=function(){var e=u(t().m(function e(n,r){var a,u,i,l,c,s,f,v,p,d;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=U.value,u=a.verify_name,i=a.verify_value,l=X({domain:n.domain,verify_name:u,verify_value:i,dns_id:""}),c=3===V.value,e.n=1,o({loading:"正在重新验证，请稍候...",request:B({verify_type:c?"file":"dns",verify_data:JSON.stringify(l),set_verify_value:!1})});case 1:s=e.v,f=s.data,v=f.data[0].rep,p=v.local_verify,d=v.status,L.value[r].status=p,L.value[r].verify_status=d,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n,t){return e.apply(this,arguments)}}(),R=function(){var e=u(t().m(function e(){var n,a,u,i,l,c,s,f,v,p,d,y;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return r.value=!0,n=3===V.value,a=U.value,u=a.domain,i=a.verify_name,l=a.verify_value,c=q.value,s=c.set_verify,f=c.dns_id,e.p=1,p=X({domain:u,verify_name:i,verify_value:l,dns_id:f}),e.n=2,o({request:B({verify_type:n?"file":"dns",verify_data:JSON.stringify(p),set_verify_value:Boolean(s)})});case 2:d=e.v,y=d.data,L.value=null===(v=y.data)||void 0===v?void 0:v.map(function(e){return{domain:e.domain,status:e.rep.local_verify,verify_status:e.rep.status,msg:e.rep.msg}}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,r.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),X=function(e){var n=e.domain,t=e.verify_name,r=e.verify_value,a=e.dns_id;return 3===V.value?[{domain:n,file_name:t,file_value:r}]:[{domain:n,record_type:"TXT",dns_id:a||"",sub_domain:t,dns_value:r}]},$={class:"p-[5rem]"},z={class:"text-base mb-[2rem]"},M={class:"text-primary"},Q={class:"mt-[20px]"};n("default",_({__name:"index",props:{compData:{}},emits:["close"],setup:function(n,m){var _,B,I,J=m.emit,N=G(),X=N.otherPopup,K=N.isRefreshBtSSL,W=b(F()).btIsRefresh,Y=v(),Z=n;q.value=Z.compData,U.value=(null===(_=Z.compData)||void 0===_?void 0:_.cert_info)||{},V.value=null===(B=Z.compData)||void 0===B?void 0:B.product_id;var ee=null===(I=Z.compData)||void 0===I?void 0:I.id,ne=3===V.value,te=p([{content:"本次验证结果是由【本服务器验证】，实际验证将由【CA服务器】进行验证，请耐心等候"},{content:"请确保以上列表所有项都验证成功后点击【验证域名】重新提交验证"},{content:function(){return d("span",null,[y("如何添加域名解析，《"),d("a",{href:"https://cloud.tencent.com/document/product/302/3446",class:"text-primary",target:"__blink"},[y("点击查看教程")]),y("》，和咨询服务器运营商")])}}]),re=h(function(){var e=U.value,n=e.verify_name,t=e.verify_value;return null===n||null===t}),ae=function(e){a({value:e})},ue=i({data:function(){return{verify_name:U.value.verify_name||"",verify_value:U.value.verify_value||""}},options:function(e){return h(function(){return[{type:"custom",render:function(){return d(c,{label:ne?"文件名：":"主机记录："},{default:function(){return[d(l,{modelValue:e.value.verify_name,"onUpdate:modelValue":function(n){return e.value.verify_name=n},class:"!w-[36rem] mr-[1rem]",type:"text",readonly:!0},null),d(g,{type:"primary",onClick:function(){return ae(e.value.verify_name)}},{default:function(){return[y("复制")]}})]}})}},{type:"custom",render:function(){return d(c,{label:"记录值："},{default:function(){return[d("div",{class:"flex"},[d(l,{modelValue:e.value.verify_value,"onUpdate:modelValue":function(n){return e.value.verify_value=n},class:"!w-[36rem] mr-[1rem]",type:"textarea",rows:3,readonly:!0},null),d(g,{type:"primary",onClick:function(){return ae(e.value.verify_value)},class:"align-top"},{default:function(){return[y("复制")]}})])]}})}}]})}}),oe=ue.BtForm,ie=ue.param,le=function(){var e=u(t().m(function e(){var n,r,a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(ne&&te.value.splice(2,1,{content:function(){return d("span",null,[y("SSL添加文件验证方式 ->> "),d("a",{href:"https://www.bt.cn/bbs/thread-56802-1-1.html",target:"_blank",class:"text-primary"},[y("查看教程")])])}}),re.value){e.n=1;break}return R(),e.a(2);case 1:return n=Y.load("正在获取证书详情，请稍后..."),e.p=2,e.n=3,o({request:E({url:"/api/v1/ssl/cert/get_cert_detail",order_id:ee})});case 3:r=e.v,a=r.data,U.value=a.data.cert_data||{},R(),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,n.close(),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}();w(function(){return U.value},function(e){ie.value&&(ie.value.verify_name=e.verify_name||"",ie.value.verify_value=e.verify_value||"")},{deep:!0}),x(function(){le()}),j(function(){X.value=null});var ce=function(){var e=u(t().m(function e(n){var r,a,u,o;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=Y.load("正在验证域名，请稍后..."),e.p=1,e.n=2,E({url:"/api/v1/ssl/cert/submit_verify",order_id:n});case 2:a=e.v,(u=a.data).status&&(null===(o=X.value)||void 0===o||o.unmount(),K.value=!0,W.value=!0),Y[u.status?"success":"error"](u.msg),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,r.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}(),se=J;return function(n,t){var a,u=s,o=f,i=k("bt-loading");return S(),O("div",$,[T("div",z,[t[2]||(t[2]=y(" 请给以下域名【 ",-1)),T("span",M,A(null===(a=Z.compData)||void 0===a||null===(a=a.cert_info)||void 0===a?void 0:a.domain),1),t[3]||(t[3]=y(" 】 ",-1)),T("span",null,"添加“"+A(ne?"文件验证":"TXT")+"”记录解析，解析参数如下：",1)]),d(C(oe),{class:"mb-[20px]"}),D(d(u,{column:C(H),data:C(L)},null,8,["column","data"]),[[i,C(r)]]),d(o,{options:C(te),class:"ml-[20px] mt-[12px]"},null,8,["options"]),T("div",Q,[d(C(g),{type:"primary",onClick:t[0]||(t[0]=function(e){var n;return ce(null===(n=Z.compData)||void 0===n?void 0:n.id)})},{default:P(function(){return e(t[4]||(t[4]=[y("验证域名",-1)]))}),_:1}),d(C(g),{type:"default",onClick:t[1]||(t[1]=function(e){return se("close")})},{default:P(function(){return e(t[5]||(t[5]=[y("返回列表",-1)]))}),_:1})])])}}}))}}})}();
