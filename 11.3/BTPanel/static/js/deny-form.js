import{Q as e,$ as a}from"./utils-lib.js?v=1763689792";import{c as s,r,o as l,x as i,y as d,e as t,C as o,A as u,z as n,U as m,ad as p,ab as f,a9 as g}from"./base-lib.js?v=1763689792";import{setFileDeny as c}from"./site.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const _={class:"p-20px"},b={class:"w-280px"},x={class:"w-280px"},y={class:"w-280px"},w=s({__name:"deny-form",props:{compData:{}},setup(s,{expose:w}){const V=s,{isEdit:v,siteName:q,row:j,getList:h}=V.compData,U=r(null),C=l({deny_name:"",suffix:"php|jsp",dir:""}),D={deny_name:[{required:!0,message:"请填写规则名称",trigger:"blur"},{required:!0,message:"请填写规则名称",trigger:"input"},{min:3,message:"规则名称至少需要3个字符",trigger:["blur","input"]}],suffix:[{required:!0,message:"请填写不允许的后缀",trigger:"blur"},{required:!0,message:"请填写不允许的后缀",trigger:"input"}],dir:[{required:!0,message:"请填写在此目录中引用的规则",trigger:"blur"},{required:!0,message:"请填写在此目录中引用的规则",trigger:"input"}]},$=e=>({...g(C),dir:C.dir.replace(/\/$/,"")+"/",website:q,act:e});return v&&j&&(C.deny_name=j.name,C.suffix=j.suffix,C.dir=j.dir),w({onConfirm:async a=>{var s;await(null==(s=U.value)?void 0:s.validate()),e({request:c($(v?"edit":"add")),loading:v?"修改中...":"添加中...",message:!0,success:()=>{null==h||h(),a&&a()}})}}),(e,s)=>{const r=m,l=p,g=f,c=a;return i(),d("div",_,[t(g,{ref_key:"formRef",ref:U,model:n(C),rules:D},{default:o(()=>[t(l,{label:"名称",prop:"deny_name"},{default:o(()=>[u("div",b,[t(r,{modelValue:n(C).deny_name,"onUpdate:modelValue":s[0]||(s[0]=e=>n(C).deny_name=e),disabled:n(v),placeholder:"请填写规则名称"},null,8,["modelValue","disabled"])])]),_:1}),t(l,{label:"后缀",prop:"suffix"},{default:o(()=>[u("div",x,[t(r,{modelValue:n(C).suffix,"onUpdate:modelValue":s[1]||(s[1]=e=>n(C).suffix=e),placeholder:"不允许的后缀"},null,8,["modelValue"])])]),_:1}),t(l,{label:"路径",prop:"dir"},{default:o(()=>[u("div",y,[t(r,{modelValue:n(C).dir,"onUpdate:modelValue":s[2]||(s[2]=e=>n(C).dir=e),placeholder:"在此目录中引用的规则，例如：/a/"},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"]),t(c,{options:[{content:"后缀：禁止访问的文件后缀"},{content:"访问路径：如需要禁止https://www.bt.cn/api/，则填写/api即可"}],class:"mt-4px"})])}}});export{w as default};
