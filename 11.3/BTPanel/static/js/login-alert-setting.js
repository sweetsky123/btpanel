import{n as a,H as e,Q as l,M as t,l as s,$ as o,k as n,aC as r,W as i,_ as u}from"./utils-lib.js?v=1763689792";import{c as m,r as d,o as p,v as c,I as g,x as f,y as _,e as b,C as v,A as h,z as y,R as w,J as x,Q as V,D as j,ap as I,aD as C,H as D}from"./base-lib.js?v=1763689792";import{_ as P}from"./index109.js?v=1763689792";import{b8 as k,b9 as q,ba as A,bb as z,bc as E}from"./firewall.js?v=1763689792";import{u as F}from"./column.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";const H={class:"flex items-center"},T=u(m({__name:"login-alert-setting",props:{compData:{default:()=>({alertStatus:"",refreshFn:()=>""})}},setup(u){const m=u,T=d("login"),U=d(""),Q=d([]),R=d(!1),S=d("");d([]);const J=d({}),K=d(0),L=d(!1),M=d([]),O=p({p:1,p_size:8}),W=[{content:"只有root用户登录才会触发告警"}],$=async()=>{a({title:"登录告警设置",component:()=>e(()=>import("./alert-setting-dialog.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),area:50,compData:{...J.value,refreshEvent:G},showFooter:!0})},B=async(a,e)=>{a?$():(await l({loading:L,request:k({task_id:J.value.id,status:0}),message:!0}),G())},G=async()=>{var a;const e=await(null==(a=m.compData)?void 0:a.refreshFn());S.value=e.status,J.value=e},N=a=>{var e;"white"===a?Y():(S.value=null==(e=m.compData)?void 0:e.alertStatus,G(),(async()=>{await l({loading:L,request:E({...O}),data:{data:[Array,M],page:i(K)}})})())},X=async()=>{U.value?(await l({loading:"正在添加IP白名单，请稍后...",request:q({ip:U.value}),message:!0}),U.value="",Y()):t.error("请输入正确的IP地址")},Y=async(a=1)=>{await l({loading:R,request:A(),data:{msg:[Array,Q]}})},Z=[{label:"IP地址",render:a=>a},F([{onClick:a=>(async a=>{await l({loading:"正在删除IP白名单，请稍后...",request:z({ip:a}),message:!0}),Y()})(a),title:"删除"}])],aa=[{label:"详情",prop:"log"},{label:"添加时间",prop:"addtime",align:"right",width:160}];return c(async()=>{N(T.value)}),(a,e)=>{const l=I,t=s,i=P,u=o,m=C,d=n,p=D,c=r,k=g("bt-loading");return f(),_("div",null,[b(c,{class:"!h-[580px]",modelValue:y(T),"onUpdate:modelValue":e[2]||(e[2]=a=>w(T)?T.value=a:null),type:"left-bg-card",position:"left",onChange:N},{default:v(()=>[b(m,{label:"登录日志",name:"login"},{default:v(()=>[b(i,null,{"header-left":v(()=>[h("span",H,[e[3]||(e[3]=h("span",{class:"mr-[1rem]"},"登录告警",-1)),b(l,{size:"small",class:"!mb-0",modelValue:y(S),"onUpdate:modelValue":e[0]||(e[0]=a=>w(S)?S.value=a:null),onChange:B},null,8,["modelValue"]),h("span",{class:"bt-link ml-8px",onClick:$}," 告警通道设置 ")])]),content:v(()=>[x(b(t,{"max-height":"450",ref:"portTable",column:aa,data:y(M)},null,8,["data"]),[[k,y(L)],[k,"正在加载列表，请稍后...","title"]])]),"footer-right":v(()=>[...e[4]||(e[4]=[])]),_:1}),b(u,{options:W,class:"mt-[1rem] mx-[1rem]"})]),_:1}),b(m,{label:"IP白名单",name:"white"},{default:v(()=>[b(i,null,{"header-left":v(()=>[b(d,{class:"mr-4",modelValue:y(U),"onUpdate:modelValue":e[1]||(e[1]=a=>w(U)?U.value=a:null),width:"20rem",placeholder:"请输入IP",onKeyup:V(X,["enter","native"]),clearable:""},null,8,["modelValue"]),b(p,{type:"primary",onClick:X},{default:v(()=>[...e[5]||(e[5]=[j("添加",-1)])]),_:1})]),content:v(()=>[x(b(t,{"max-height":"500",ref:"portTable",column:Z,data:y(Q)},null,8,["data"]),[[k,y(R)]])]),default:v(()=>[b(u,{options:W})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-8885db45"]]);export{T as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
