!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach(function(r){u(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function u(r,t,n){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,t="function"==typeof Symbol?Symbol:{},n=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function u(t,n,o,u){var a=n&&n.prototype instanceof c?n:c,s=Object.create(a.prototype);return l(s,"_invoke",function(t,n,o){var u,a,l,c=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(r,t){return u=r,a=0,l=e,d.n=t,i}};function p(t,n){for(a=t,l=n,r=0;!f&&c&&!o&&r<s.length;r++){var o,u=s[r],p=d.p,b=u[2];t>3?(o=b===n)&&(l=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=e):u[0]<=p&&((o=t<2&&p<u[1])?(a=0,d.v=n,d.n=u[1]):p<b&&(o=t<3||u[0]>n||n>b)&&(u[4]=t,u[5]=n,d.n=b,a=0))}if(o||t>1)return i;throw f=!0,n}return function(o,s,b){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),a=s,l=b;(r=a<2?e:l)||!f;){u||(a?a<3?(a>1&&(d.n=-1),p(a,l)):d.n=l:d.v=l);try{if(c=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,l)))throw TypeError("iterator result is not an object");if(!r.done)return r;l=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=e}else if((r=(f=d.n<0)?l:t.call(n,d))!==i)break}catch(r){u=e,a=1,l=r}finally{c=1}}return{value:r,done:f}}}(t,o,u),!0),s}var i={};function c(){}function s(){}function f(){}r=Object.getPrototypeOf;var d=[][n]?r(r([][n]())):(l(r={},n,function(){return this}),r),p=f.prototype=c.prototype=Object.create(d);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,l(p,"constructor",f),l(f,"constructor",s),s.displayName="GeneratorFunction",l(f,o,"GeneratorFunction"),l(p),l(p,o,"Generator"),l(p,n,function(){return this}),l(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:u,m:b}})()}function l(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,r,t,n){function u(r,t){l(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(u("next",0),u("throw",1),u("return",2))},l(e,r,t,n)}function i(e,r,t,n,o,u,a){try{var l=e[u](a),i=l.value}catch(e){return void t(e)}l.done?r(i):Promise.resolve(i).then(n,o)}function c(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var u=e.apply(r,t);function a(e){i(u,n,o,a,l,"next",e)}function l(e){i(u,n,o,a,l,"throw",e)}a(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792","./useMethod-legacy4.js?v=1763689792","./useStore-legacy2.js?v=1763689792","./database-legacy.js?v=1763689792","./index.vue_vue_type_script_setup_true_lang-legacy9.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./validator-legacy.js?v=1763689792"],function(e,t){"use strict";var n,u,l,i,s,f,d,p,b,m,v,y,g,h,_,w,j,O,S,V,P,A,x,k,E,I,T,U,D,C,G,F,M,q;return{setters:[function(e){n=e.c,u=e.r,l=e.g,i=e.v,s=e.x,f=e.y,d=e.e,p=e.C,b=e.z,m=e.O,v=e.G,y=e.F,g=e.b1,h=e.D,_=e.S,w=e.U,j=e.bc,O=e.am,S=e.an,V=e.ad,P=e.ab},function(e){A=e.y,x=e.ci,k=e.Q,E=e.M,I=e.k,T=e.e,U=e._},function(e){D=e._},function(e){C=e.a,G=e.m},function(e){F=e.g},function(e){M=e.addDatabase},function(e){q=e._},null,null,null,null],execute:function(){var t={class:"p-[24px]"},L=n({__name:"index",props:{compData:{default:function(){return{refresh:(e=c(a().m(function e(){return a().w(function(e){for(;;)if(0===e.n)return e.a(2,[])},e)})),function(){return e.apply(this,arguments)})};var e}}},setup:function(e,n){var U=n.expose,L=e,N=F().refreshTableList,Q=u(),z=u(!1),H=u([]),R=u({name:"",db_user:"",password:A(16),dataAccess:"127.0.0.1",address:"",codeing:"utf8mb4",dtype:"MySQL",ps:"",sid:0,listen_ip:"0.0.0.0/0",host:""}),$={name:[{required:!0,message:"请输入数据库名",trigger:["blur","change"]}],db_user:[{required:!0,message:"请输入用户名",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:["blur","change"]}],address:[{validator:function(e,r,t){"ip"===R.value.dataAccess&&(""===r?t(new Error("请输入IP地址")):(r.split("\n").forEach(function(e){""===e||x(e)||t(new Error("请输入正确的IP地址"))}),t())),t()},trigger:["blur","change"]}]},B=l(function(){var e;return(null===(e=H.value.find(function(e){return e.id===R.value.sid}))||void 0===e?void 0:e.db_host)||""}),J=function(e){R.value.db_user=e,R.value.ps=e},K=function(){Q.value.clearValidate("address")},W=function(){var e=c(a().m(function e(r){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Q.value.validate();case 1:return e.n=2,X();case 2:return"ip"===R.value.dataAccess&&(R.value.address=R.value.address.replace(/\n/g,",")),e.n=3,k({request:M(o(o({},R.value),{},{sid:String(R.value.sid),address:"ip"===R.value.dataAccess?R.value.address:R.value.dataAccess})),loading:"正在添加数据库，请稍后...",message:!0});case 3:N(),r();case 4:return e.a(2)}},e)}));return function(r){return e.apply(this,arguments)}}(),X=function(){var e=c(a().m(function e(){var r,t,n,o;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=E.load("正在连接服务器，请稍后..."),e.p=1,e.n=2,G(R.value.sid);case 2:if(t=e.v,n=t.status,t.msg,o=t.err_msg,n){e.n=3;break}return E.error(o),e.a(2,!1);case 3:return e.a(2,!0);case 4:e.p=4,e.v;case 5:return e.p=5,r.close(),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}();return i(c(a().m(function e(){var r;return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,L.compData.refresh();case 1:H.value=e.v,R.value.sid=null===(r=H.value[0])||void 0===r?void 0:r.id;case 2:return e.a(2)}},e)}))),U({onConfirm:W}),function(e,n){var o=w,u=j,a=O,l=S,i=V,c=I,x=D,k=T,E=P;return s(),f("div",t,[d(E,{disabled:b(z),model:b(R),ref_key:"addFormRef",ref:Q,rules:$,onSubmit:n[8]||(n[8]=_(function(){},["prevent"]))},{default:p(function(){return[d(i,{label:"数据库名",prop:"name"},{default:p(function(){return[d(u,{span:14},{default:p(function(){return[d(o,{placeholder:"新的数据库名称",modelValue:b(R).name,"onUpdate:modelValue":n[0]||(n[0]=function(e){return b(R).name=e}),onInput:J},null,8,["modelValue"])]}),_:1}),d(u,{span:10},{default:p(function(){return[d(i,null,{default:p(function(){return[d(l,{modelValue:b(R).codeing,"onUpdate:modelValue":n[1]||(n[1]=function(e){return b(R).codeing=e}),class:"ml-8px !w-[13.2rem]"},{default:p(function(){return[d(a,{label:"utf8",value:"utf8"}),d(a,{label:"utf8mb4",value:"utf8mb4"}),d(a,{label:"gbk",value:"gbk"}),d(a,{label:"big5",value:"big5"})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1}),d(i,{label:"用户名",prop:"db_user"},{default:p(function(){return[d(c,{width:"38rem",placeholder:"数据库用户",modelValue:b(R).db_user,"onUpdate:modelValue":n[2]||(n[2]=function(e){return b(R).db_user=e})},null,8,["modelValue"])]}),_:1}),d(i,{label:"密码",prop:"password"},{default:p(function(){return[d(x,{width:"38rem",icon:"el-refresh",modelValue:b(R).password,"onUpdate:modelValue":n[3]||(n[3]=function(e){return b(R).password=e}),modelModifiers:{sync:!0},onIconClick:n[4]||(n[4]=function(){return b(R).password=b(A)(16)}),isActive:!0},null,8,["modelValue"])]}),_:1}),d(i,{label:"访问权限",prop:"dataAccess"},{default:p(function(){return[d(l,{class:"!w-[38rem]",modelValue:b(R).dataAccess,"onUpdate:modelValue":n[5]||(n[5]=function(e){return b(R).dataAccess=e}),onChange:K},{default:p(function(){return[d(a,{label:"所有人",value:"%"}),d(a,{label:"本地服务器",value:"127.0.0.1"}),d(a,{label:"指定ip",value:"ip"})]}),_:1},8,["modelValue"]),d(i,{prop:"address"},{default:p(function(){return["ip"===b(R).dataAccess?(s(),m(c,{key:0,type:"textarea",rows:4,placeholder:"如需填写多个IP，请换行填写，每行一个IP",modelValue:b(R).address,"onUpdate:modelValue":n[6]||(n[6]=function(e){return b(R).address=e}),width:"38rem",class:"mt-[8px] w-full"},null,8,["modelValue"])):v("",!0)]}),_:1})]}),_:1}),d(i,{label:"添加至",prop:"sid",class:"!mb-0"},{default:p(function(){return[d(l,{class:"!w-[24rem]",modelValue:b(R).sid,"onUpdate:modelValue":n[7]||(n[7]=function(e){return b(R).sid=e})},{default:p(function(){return[(s(!0),f(y,null,g(b(H),function(e,r){return s(),m(a,{key:r,label:e.ps+(e.db_host?"（"+e.db_host+"）":""),value:e.id},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"]),d(k,{class:"ml-[8px]",onClick:b(C)},{default:p(function(){return r(n[9]||(n[9]=[h("管理远程数据库",-1)]))}),_:1},8,["onClick"])]}),_:1}),d(i,{label:" ",class:"!mb-0"},{default:p(function(){return[d(q,{server:{sid:b(R).sid,ip:b(B)}},null,8,["server"])]}),_:1})]}),_:1},8,["disabled","model"])])}}});e("default",U(L,[["__scopeId","data-v-b34e8314"]]))}}})}();
