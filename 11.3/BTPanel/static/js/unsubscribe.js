import{c as e,o as l,r as a,x as s,y as t,A as p,e as u,C as o,B as i,z as d,F as r,b1 as n,O as c,D as f,am as m,an as b,U as x,ad as v,ab as h,H as _}from"./base-lib.js?v=1763689792";import{p as y,Q as g,kN as k,kO as w,ak as C,kP as V,_ as j}from"./utils-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const z={class:"px-20px pt-24px pb-8px"},D={class:"mb-20px"},O={class:"w-260px"},P={class:"flex justify-end gap-0 w-full px-18px py-10px border-t border-lighter rounded-b-base bg-light"},U=j(e({__name:"unsubscribe",emits:["close"],setup(e,{expose:j,emit:U}){const q=U,H=l({http:"https://",url:""}),I=a(""),A=a([{label:"http://",value:"http://"},{label:"https://",value:"https://"}]),B=e=>{const{clipboardData:l}=e;if(l){const e=l.getData("text");if(e)if(-1===e.indexOf("://"))H.url=e;else{const l=e.split("://")[0]+"://";H.http=l,H.url=e.replace(l,"")}}e.preventDefault()},F=async()=>{y({title:"恢复默认",content:"确定要恢复默认退订设置吗？",onConfirm:async()=>{g({loading:"正在恢复...",message:!0,request:k(),success:()=>{N()}})}})},N=async()=>{const{data:e}=await w();if(C(e)){if(I.value=e.panel_url,I.value){const e=I.value.split("://")[0]+"://";H.http=e}if(e.url){const l=e.url.split("://")[0]+"://";H.http=l,H.url=e.url.replace(l,"")}}},Q=()=>{q("close")},E=async()=>{g({loading:"正在设置...",message:!0,request:V({url:H.http+H.url}),success:()=>{q("close")}})};return N(),j({onConfirm:E}),(e,l)=>{const a=m,y=b,g=x,k=v,w=h,C=_;return s(),t("div",null,[p("div",z,[u(w,{model:d(H),"label-width":"auto"},{default:o(()=>[p("div",D,"链接："+i(d(I)||"--"),1),l[2]||(l[2]=p("div",{class:"mb-20px text-desc"},[p("div",{class:"mb-6px"},"注意："),p("div",{class:"leading-18px text-tertiary text-small"},"默认链接直接使用面板地址访问，用户可以根据IP端口判断出你的面板地址，建议你对原链接反向代理后填入以保证你的面板地址不被泄露。")],-1)),u(k,{label:"新链接：",prop:"url","label-position":"left","label-width":"50px"},{default:o(()=>[p("div",O,[u(g,{modelValue:d(H).url,"onUpdate:modelValue":l[1]||(l[1]=e=>d(H).url=e),class:"w-full",placeholder:"",onPaste:B},{prepend:o(()=>[u(y,{modelValue:d(H).http,"onUpdate:modelValue":l[0]||(l[0]=e=>d(H).http=e),style:{width:"90px"}},{default:o(()=>[(s(!0),t(r,null,n(d(A),e=>(s(),c(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),p("div",P,[u(C,{size:"default",onClick:F},{default:o(()=>[...l[3]||(l[3]=[f(" 恢复默认 ",-1)])]),_:1}),u(C,{type:"danger",size:"default",onClick:Q},{default:o(()=>[...l[4]||(l[4]=[f(" 取消 ",-1)])]),_:1}),u(C,{type:"primary",size:"default",onClick:E},{default:o(()=>[...l[5]||(l[5]=[f(" 确定 ",-1)])]),_:1})])])}}}),[["__scopeId","data-v-8914c0f7"]]);export{U as default};
