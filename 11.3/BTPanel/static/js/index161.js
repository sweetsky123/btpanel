import{B as e,V as l,k as a,_ as s,x as t,e as i,ax as d,aC as c}from"./utils-lib.js?v=1763689792";import{c as o,s as m,g as n,x as r,y as u,A as v,z as p,e as f,B as _,D as h,F as b,b1 as x,bb as g,C as y,J as V,K as w,ay as C,v as I,V as k,ag as j,H as U,a8 as z,I as D,R as F,aD as H}from"./base-lib.js?v=1763689792";import{bV as A}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";const B={class:"flex flex-col h-[40rem]"},L={class:"item-card"},N={class:"item"},J={class:"title"},K=["src"],M={class:"con"},O={class:"item-card"},P={class:"item"},R={class:"con"},$={class:"item"},q={class:"con overflow-ellipsis flex-1 break-all"},E={class:"item"},G={class:"con"},Q={class:"item-card"},S={class:"item"},T={class:"con"},W={class:"item"},X={class:"con"},Y={class:"item"},Z={class:"con"},ee={class:"item-card !border-b-0"},le={class:"item"},ae={class:"con"},se={class:"item"},te={class:"con"},ie=s(o({__name:"base",setup(s){const t=A(),{fileItem:i}=m(t),d=n(()=>"".concat(i.value.path,"/").concat(i.value.name).replace(/\/\//g,"/"));return(s,t)=>{const c=a;return r(),u("div",B,[v("div",L,[v("div",N,[v("div",J,[v("img",{class:"w-[5rem] h-[5rem]",src:"/static/images/file_icon/".concat(p(i).is_dir?"folder_win10":"file",".png"),alt:""},null,8,K)]),v("div",M,[f(c,{width:"38rem",modelValue:p(i).name,"onUpdate:modelValue":t[0]||(t[0]=e=>p(i).name=e),disabled:""},null,8,["modelValue"])])])]),v("div",O,[v("div",P,[t[2]||(t[2]=v("div",{class:"title"},"类型：",-1)),v("div",R,_(p(i).st_type||"未知文件"),1)]),v("div",$,[t[3]||(t[3]=v("div",{class:"title"},"文件路径:",-1)),v("div",q,[h(_(p(d))+" ",1),v("i",{class:"svgtofont-icon-copy cursor-pointer hover:text-primary text-base ml-[4px] align-middle",onClick:t[1]||(t[1]=l=>p(e)({value:"".concat(p(i).path,"/").concat(p(i).name)}))})])]),v("div",E,[t[4]||(t[4]=v("div",{class:"title"},"大小:",-1)),v("div",G,_(p(i).st_size),1)])]),v("div",Q,[v("div",S,[t[5]||(t[5]=v("div",{class:"title"},"权限:",-1)),v("div",T,_(p(i).mode),1)]),v("div",W,[t[6]||(t[6]=v("div",{class:"title"},"所属组:",-1)),v("div",X,_(p(i).group),1)]),v("div",Y,[t[7]||(t[7]=v("div",{class:"title"},"所属用户:",-1)),v("div",Z,_(p(i).user),1)])]),v("div",ee,[v("div",le,[t[8]||(t[8]=v("div",{class:"title"},"访问时间:",-1)),v("div",ae,_(p(l)(p(i).st_atime)),1)]),v("div",se,[t[9]||(t[9]=v("div",{class:"title"},"修改时间:",-1)),v("div",te,_(p(l)(p(i).st_mtime)),1)])])])}}}),[["__scopeId","data-v-8523bf39"]]),de={class:"h-[40rem] pt-[.5rem] overflow-hidden"},ce={class:"h-[36.5rem] overflow-y-auto"},oe={class:"title"},me={class:"con"},ne=s(o({__name:"detail",setup(e){const l=A(),{fileItem:a,attrList:s}=m(l);return(e,l)=>(r(),u("div",de,[l[0]||(l[0]=v("div",{class:"item th"},[v("div",{class:"title"},"属性"),v("div",{class:"con"},"值")],-1)),v("div",ce,[(r(!0),u(b,null,x(p(s),e=>(r(),u("div",{key:e.title,class:"item"},[v("div",oe,_(e.title),1),v("div",me,_(e.value),1)]))),128))])]))}}),[["__scopeId","data-v-dcad293d"]]),re={class:"h-[40rem] pt-[.5rem] overflow-hidden"},ue={class:"h-[36.5rem] overflow-y-auto"},ve={class:"w-[14rem]"},pe={class:"w-[8.5rem]"},fe={class:"con"},_e={class:"w-[9rem] text-right"},he=s(o({__name:"history",setup(e){const a=A(),{fileItem:s}=m(a),{showHistory:d,recoverHistory:c}=a;return(e,a)=>{const d=i,o=C;return r(),u("div",re,[a[1]||(a[1]=g('<div class="item th" data-v-b506af14><div class="w-[14rem]" data-v-b506af14>修改时间</div><div class="w-[8.5rem]" data-v-b506af14>文件大小</div><div class="con" data-v-b506af14>MD5</div><div class="w-[9rem] text-right" data-v-b506af14>操作</div></div>',1)),v("div",ue,[(r(!0),u(b,null,x(p(s).history,e=>(r(),u("div",{key:e.md5,class:"item"},[v("div",ve,_(p(l)(e.st_mtime)),1),v("div",pe,_("".concat(p(t)(e.st_size))),1),v("div",fe,_(e.md5),1),v("div",_e,[f(d,{onClick:l=>p(c)(e)},{default:y(()=>[...a[0]||(a[0]=[h("恢复",-1)])]),_:1},8,["onClick"])])]))),128)),V(f(o,{description:"暂无历史版本"},null,512),[[w,0===p(s).history.length]])])])}}}),[["__scopeId","data-v-b506af14"]]),be={class:"h-[40rem] overflow-hidden"},xe={class:"flex justify-around"},ge={class:"p-4px"},ye={class:"p-4px"},Ve={class:"p-4px"},we={class:"flex items-center pl-[3rem]"},Ce=s(o({__name:"auth",setup(e){const l=A(),{checkList:s}=m(l),{ownerOptions:t,checkNumber:i,changeUser:c,setFileAuths:o,reversePermission:n,getFileAuths:_}=l;return I(()=>{_()}),(e,l)=>{const m=k,_=j,b=a,x=d,g=U;return r(),u("div",be,[v("div",xe,[v("fieldset",ge,[l[9]||(l[9]=v("legend",null,"所有者",-1)),f(_,{class:"flex flex-col",style:{gap:"4px"},modelValue:p(s).owner,"onUpdate:modelValue":l[0]||(l[0]=e=>p(s).owner=e),onChange:p(n)},{default:y(()=>[f(m,{class:"ml-[1rem]",label:"r"},{default:y(()=>[...l[6]||(l[6]=[h("读取",-1)])]),_:1}),f(m,{class:"ml-[1rem]",label:"w"},{default:y(()=>[...l[7]||(l[7]=[h("写入",-1)])]),_:1}),f(m,{class:"ml-[1rem]",label:"x"},{default:y(()=>[...l[8]||(l[8]=[h("执行",-1)])]),_:1})]),_:1},8,["modelValue","onChange"])]),v("fieldset",ye,[l[13]||(l[13]=v("legend",null,"用户组",-1)),f(_,{class:"flex flex-col",style:{gap:"4px"},modelValue:p(s).group,"onUpdate:modelValue":l[1]||(l[1]=e=>p(s).group=e),onChange:p(n)},{default:y(()=>[f(m,{class:"ml-[1rem]",label:"r"},{default:y(()=>[...l[10]||(l[10]=[h("读取",-1)])]),_:1}),f(m,{class:"ml-[1rem]",label:"w"},{default:y(()=>[...l[11]||(l[11]=[h("写入",-1)])]),_:1}),f(m,{class:"ml-[1rem]",label:"x"},{default:y(()=>[...l[12]||(l[12]=[h("执行",-1)])]),_:1})]),_:1},8,["modelValue","onChange"])]),v("fieldset",Ve,[l[17]||(l[17]=v("legend",null,"公共",-1)),f(_,{class:"flex flex-col",modelValue:p(s).public,"onUpdate:modelValue":l[2]||(l[2]=e=>p(s).public=e),style:{gap:"4px"},onChange:p(n)},{default:y(()=>[f(m,{class:"ml-[1rem]",label:"r"},{default:y(()=>[...l[14]||(l[14]=[h("读取",-1)])]),_:1}),f(m,{class:"ml-[1rem]",label:"w"},{default:y(()=>[...l[15]||(l[15]=[h("写入",-1)])]),_:1}),f(m,{class:"ml-[1rem]",label:"x"},{default:y(()=>[...l[16]||(l[16]=[h("执行",-1)])]),_:1})]),_:1},8,["modelValue","onChange"])])]),v("div",we,[f(b,{width:"6rem",modelValue:p(s).auth,"onUpdate:modelValue":l[3]||(l[3]=e=>p(s).auth=e),onInput:p(i),class:"!w-6rem",type:"number",min:"0",max:"777",oninput:"if(value){value=value.replace(/[^\\d]/g,'')} if(value<=0){value=0} if(value>777){value=777}"},null,8,["modelValue","onInput"]),l[20]||(l[20]=v("div",{class:"mx-[1rem]"},"权限，所有者",-1)),f(x,{modelValue:p(s).user,"onUpdate:modelValue":l[4]||(l[4]=e=>p(s).user=e),options:p(t),class:"!w-[10rem]",onChange:p(c)},null,8,["modelValue","options","onChange"]),f(m,{class:"ml-[1rem]",modelValue:p(s).isDir,"onUpdate:modelValue":l[5]||(l[5]=e=>p(s).isDir=e)},{default:y(()=>[...l[18]||(l[18]=[h("应用到子目录",-1)])]),_:1},8,["modelValue"]),f(g,{type:"primary",class:"!ml-[2rem]",onClick:p(o)},{default:y(()=>[...l[19]||(l[19]=[h("应用",-1)])]),_:1},8,["onClick"])])])}}}),[["__scopeId","data-v-06fd9c3b"]]),Ie={class:"p-2rem"},ke=o({__name:"index",props:{compData:{default:()=>({fileItem:{},tab:"routine"})}},setup(e){const l=A(),{activeName:a,load:s}=m(l),{getFileItem:t,$reset:i}=l;return I(()=>{t()}),z(()=>{i()}),(e,l)=>{const t=H,i=c,d=D("bt-loading");return V((r(),u("div",Ie,[f(i,{modelValue:p(a),"onUpdate:modelValue":l[0]||(l[0]=e=>F(a)?a.value=e:null),type:"card"},{default:y(()=>[f(t,{label:"常规",name:"routine",lazy:""},{default:y(()=>[f(ie)]),_:1}),f(t,{label:"详细信息",name:"detail",lazy:""},{default:y(()=>[f(ne)]),_:1}),f(t,{label:"历史版本",name:"history",lazy:""},{default:y(()=>[f(he)]),_:1}),f(t,{label:"权限",name:"auth",lazy:""},{default:y(()=>[f(Ce)]),_:1})]),_:1},8,["modelValue"])])),[[d,p(s)],[d,"正在获取文件信息，请稍候...","title"]])}}});export{ke as default};
