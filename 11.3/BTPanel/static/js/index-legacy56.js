!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}var t=["search"];function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.toStringTag||"@@toStringTag";function i(n,o,a,u){var i=o&&o.prototype instanceof c?o:c,s=Object.create(i.prototype);return r(s,"_invoke",function(n,r,o){var a,u,i,c=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,u=0,i=e,p.n=n,l}};function d(n,r){for(u=n,i=r,t=0;!f&&c&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];n>3?(o=m===r)&&(i=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(u=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,u=0))}if(o||n>1)return l;throw f=!0,r}return function(o,s,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),u=s,i=m;(t=u<2?e:i)||!f;){a||(u?u<3?(u>1&&(p.n=-1),d(u,i)):p.n=i:p.v=i);try{if(c=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(f=p.n<0)?i:n.call(r,p))!==l)break}catch(t){a=e,u=1,i=t}finally{c=1}}return{value:t,done:f}}}(n,a,u),!0),s}var l={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(r(t={},a,function(){return this}),t),d=f.prototype=c.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,u,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,r(d,"constructor",f),r(f,"constructor",s),s.displayName="GeneratorFunction",r(f,u,"GeneratorFunction"),r(d),r(d,u,"Generator"),r(d,a,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:m}})()}function r(e,t,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,t,n,o){function u(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},r(e,t,n,o)}function o(e,t,n,r,o,a,u){try{var i=e[a](u),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function i(e){o(u,r,a,i,l,"next",e)}function l(e){o(u,r,a,i,l,"throw",e)}i(void 0)})}}function u(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useStore-legacy7.js?v=1763689792","./index-legacy350.js?v=1763689792","./index-legacy109.js?v=1763689792","./useController-legacy10.js?v=1763689792","./index-legacy130.js?v=1763689792","./index-legacy123.js?v=1763689792","./validator-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./firewall-legacy.js?v=1763689792"],function(e,r){"use strict";var o,i,l,s,f,p,d,m,y,v,g,b,h,w,x,S,_,O,j,V,k,C,L,P,A,D,T,W,E,M,N,R,z,F,H,I,U,G,J,q,B,Y,K,$,Q,X,Z,ee,te,ne,re,oe,ae;return{setters:[function(e){o=e.u,i=e.an,l=e.f2,s=e.ao,f=e.ag,p=e.P,d=e.Q,m=e.n,y=e.H,v=e.p,g=e.M,b=e.ax,h=e.aC,w=e._},function(e){x=e.c,S=e.x,_=e.O,O=e.C,j=e.e,V=e.D,k=e.z,C=e.H,L=e.s,P=e.I,A=e.y,D=e.A,T=e.G,W=e.J,E=e.M,M=e.ap,N=e.aT,R=e.V,z=e.ba,F=e.r,H=e.v,I=e.R,U=e.B,G=e.N},function(e){J=e.L,q=e.q},function(e){B=e.u,Y=e.A},function(e){K=e._},function(e){$=e.L,Q=e.u,X=e.d,Z=e.a},function(e){ee=e._},function(e){te=e._},function(e){ne=e.p},function(e){re=e.o},function(e){oe=e.z,ae=e.A}],execute:function(){var ue=x({__name:"index",setup:function(e,n){var r=n.expose;o();var a=$(),f=a.getOperateLog,p=a.outLogs,d=Q().isRefreshList,m=i({request:function(e){var n=e.search,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,t);return f(c(c({keywords:n},r),{},{stype:"网站管理"}))},columns:[{label:"用户",prop:"username",width:180},{label:"操作类型",prop:"type",width:100},{label:"详情",render:function(e){var t=(new DOMParser).parseFromString(e.log,"text/html");return j("span",{innerHTML:l(t.body.innerHTML)},null)}},{label:"操作时间",width:150,prop:"addtime",align:"right"}],extension:[s(d)]}),y=m.BtTable,v=m.BtPage,g=m.BtSearch,b=m.BtRefresh;return r({init:m.refresh}),function(e,t){var n=C,r=K;return S(),_(r,null,{"header-left":O(function(){return[j(n,{onClick:k(p)},{default:O(function(){return u(t[0]||(t[0]=[V("导出日志",-1)]))}),_:1},8,["onClick"])]}),"header-right":O(function(){return[j(k(g),{class:"mr-1rem !w-[24rem]",placeholder:"请输入搜索关键字"}),j(k(b))]}),content:O(function(){return[j(k(y))]}),"footer-right":O(function(){return[j(k(v))]}),_:1})}}}),ie={class:"flex flex-col"},le={class:"flex items-center justify-end mb-[12px]"},ce={class:"flex justify-between w-full flex-wrap"},se={class:"flex items-center text-small"},fe={class:"pl-[1rem] mr-[8px]"},pe={class:"flex items-center mt-4px"},de={class:"ml-1rem"},me=x({__name:"index",setup:function(e,t){var n=t.expose,r=o().mainHeight,a=$(),i=L(a),l=i.logParams,c=i.logMsg,s=i.preLoading,d=[{label:"运行日志",value:"access"},{label:"异常日志",value:"error"}];return n({init:function(){return Ye("WebLogs")}}),function(e,t){var n=C,o=M,a=N,i=R,m=f,y=z,v=p,g=ee,b=P("bt-loading");return S(),A("div",ie,[D("div",le,[D("div",ce,[D("div",se,[j(n,{type:"default",onClick:k(Ie)},{default:O(function(){return u(t[6]||(t[6]=[V(" 清理日志 ",-1)]))}),_:1},8,["onClick"]),j(n,{type:"default",class:"!mr-[8px]",onClick:k(Ue)},{default:O(function(){return u(t[7]||(t[7]=[V(" 导出日志 ",-1)]))}),_:1},8,["onClick"]),j(o,{modelValue:k(l).keywordSwitch,"onUpdate:modelValue":t[0]||(t[0]=function(e){return k(l).keywordSwitch=e}),width:36,onChange:k(qe)},null,8,["modelValue","onChange"]),D("span",fe,[j(a,{content:"点击开启日志关键词告警",placement:"top"},{default:O(function(){return u(t[8]||(t[8]=[D("span",null,[D("span",{class:"lt-xl:hidden"},"关键词"),V("告警 ")],-1)]))}),_:1}),D("span",{class:"cursor-pointer text-primary",onClick:t[1]||(t[1]=function(){return k(Je)&&k(Je).apply(void 0,arguments)})}," [配置] ")]),"access"===k(l).typeValue?(S(),_(i,{key:0,modelValue:k(l).ipArea,"onUpdate:modelValue":t[2]||(t[2]=function(e){return k(l).ipArea=e}),class:"pr-[2rem]",onChange:k(Be)},{default:O(function(){return u(t[9]||(t[9]=[D("div",{class:"flex items-center"},[D("span",{class:"text-small"},"显示IP归属地"),D("i",{class:"svgtofont-icon-ltd text-ltd !text-extraLarge"})],-1)]))}),_:1},8,["modelValue","onChange"])):T("",!0)]),D("div",pe,[j(m,{type:"button",size:"default",class:"mr-1rem",modelValue:k(l).typeValue,"onUpdate:modelValue":t[3]||(t[3]=function(e){return k(l).typeValue=e}),onChange:k(Ge),options:d},null,8,["modelValue","onChange"]),j(y,{modelValue:k(l).timeValue,"onUpdate:modelValue":t[4]||(t[4]=function(e){return k(l).timeValue=e}),format:"YYYY/MM/DD","value-format":"x",onChange:k(Ge),type:"daterange","range-separator":"-","disabled-date":k(He),"start-placeholder":"开始",class:"!lt-xl:w-[12rem] !at-lg:w-[12rem] !at-xl:w-[12rem] !w-[20rem]","end-placeholder":"结束"},null,8,["modelValue","onChange","disabled-date"]),D("div",de,[j(v,{class:"!lt-xl:w-[16rem] !w-[24rem]",modelValue:k(l).searchValue,"onUpdate:modelValue":t[5]||(t[5]=function(e){return k(l).searchValue=e}),placeholder:"请输入搜索关键字",onSearch:k(Ge)},null,8,["modelValue","onSearch"])]),j(g,{class:"ml-1rem",onRefresh:k(Ge)},null,8,["onRefresh"])])])]),W(j(te,{content:k(c),isHtml:!0,autoScroll:!0,fullScreen:{title:"全屏查看-日志",onRefresh:function(){return k(Ye)("WebLogs")}},style:E("height:"+(k(r)-292)+"px;min-height:400px;")},null,8,["content","fullScreen","style"]),[[b,k(s)]])])}}}),ye=L(J()),ve=ye.selectedWebSite,ge=(ye.webTabActive,ye.outDataForm),be=ye.configData,he=$(),we=he.clearWebLogEvent,xe=(he.outWebLogEvent,he.setKeyWordConfigEvent),Se=he.onConfirmKeyConfig,_e=he.getKeywordAlarmData,Oe=he.delLogSourceEvent,je=he.sendSourceConfirm,Ve=he.getLogSystemSite,ke=he.getSiteLogsData,Ce=he.logSystemConfirm,Le=Q(),Pe=Le.logParams,Ae=Le.isRefreshLogSystem,De=Le.isRefreshList,Te=Le.logSystemList,We=o().payment,Ee=B(),Me=Ee.isRefreshList,Ne=Ee.routeData,Re=[{label:"网站日志",name:"WebLogs",lazy:!0,render:function(){return j(me,null,null)}},{label:"操作日志",name:"OperateLog",lazy:!0,render:function(){return j(ue,null,null)}},{label:"web日志分析",name:"WebLogAnalysis",lazy:!0,render:function(){return j(Y,null,null)}}],ze=e("a",F([])),Fe=function(){var e=a(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({loading:"正在获取网站列表，请稍后...",request:q(),data:{msg:Array}});case 1:if(t=e.v,r=t.msg,!Array.isArray(r)){e.n=2;break}return ve.value=Array.isArray(r)&&r[0]||"",ze.value=r.map(function(e){return{label:e,value:e}}),e.a(2,r);case 2:return ze.value=[],e.a(2,[])}},e)}));return function(){return e.apply(this,arguments)}}(),He=function(e){return e.getTime()>Date.now()},Ie=function(){var e;m({title:"清理【"+ve.value+"】网站日志",area:44,component:function(){return y(function(){return r.import("./index-legacy348.js?v=1763689792")},void 0,r.meta.url)},compData:{tips:"清理相关日志可能会导致故障排查困难，请谨慎操作",type:"website",clearEvent:(e=a(n().m(function e(t,r){var o,a;return n().w(function(e){for(;;)switch(e.n){case 0:return o=X(t),e.n=1,we(o,r);case 1:return a=e.v,Ge(),e.a(2,a.status)}},e)})),function(t,n){return e.apply(this,arguments)})},showFooter:!0})},Ue=function(){ge.value.type=J().getType("website"),be.value={type:"website"},m({title:"导出日志",area:44,component:function(){return y(function(){return r.import("./index-legacy303.js?v=1763689792")},void 0,r.meta.url)},showFooter:!0,compData:{type:"website"}})},Ge=function(){var e=function(){var e={ip_area:Pe.value.ipArea?1:0,siteName:ve.value,search:Pe.value.searchValue};return Pe.value.timeValue&&(Pe.value.timeValue[0]=new Date(Pe.value.timeValue[0]).setHours(0,0,0,0),Pe.value.timeValue[1]=new Date(Pe.value.timeValue[1]).setHours(23,59,59,0),e.time_search=JSON.stringify([Pe.value.timeValue[0]/1e3,Pe.value.timeValue[1]/1e3])),Pe.value.searchValue||delete e.search,e}();ke(e),"error"!==Pe.value.typeValue&&_e()},Je=function(){m({title:"关键字告警配置",area:62,component:function(){return y(function(){return r.import("./keyword-config-legacy.js?v=1763689792")},void 0,r.meta.url)},showFooter:!0})},qe=function(){var e=a(n().m(function e(t){var r,o,a;return n().w(function(e){for(;;)switch(e.n){case 0:if((r=Pe.value.keywordConfig).keys.length&&r.channel&&r.cycle||!t){e.n=1;break}return Pe.value.keywordSwitch=!t,Je(),e.a(2);case 1:return o={sitename:ve.value},t&&(o.cycle=Pe.value.keywordConfig.cycle,o.keys=JSON.stringify(Pe.value.keywordConfig.keys),o.channel=Pe.value.keywordConfig.channel),e.n=2,xe(o);case 2:a=e.v,a.status&&(Pe.value.keywordSwitch=t);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Be=function(e){if("ltd"!==We.value.authType)return Pe.value.ipArea=!e,ne({sourceId:107});Ge()},Ye=(e("c",function(){var e=a(n().m(function e(t,r,o){var a,u;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,r();case 1:return a={cycle:t.value.cycle,channel:t.value.give.join(","),keys:JSON.stringify(t.value.keyword.split(","))},e.n=2,Se(a);case 2:return u=e.v,_e(),e.a(2,u.status);case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t,n,r){return e.apply(this,arguments)}}()),e("d",function(){var e=a(n().m(function e(t){var r;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,v({title:"删除【"+t.site_name+"】日志源",icon:"warning-filled",content:"是否删除【"+t.site_name+"】?"});case 1:return r={server_id:t.server.id,source_type:t.source_type,source_list:JSON.stringify([t.site_name])},e.n=2,Oe(r);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),e("s",function(){var e=a(n().m(function e(t){var r,o,a,u;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=Te.value.length>0,o={server_data:JSON.stringify({ip:t.ip,port:t.port})},r?o.server_id=null===(a=Te.value[0])||void 0===a?void 0:a.id:o.server_type="bt_log_server",e.n=1,Ce(o);case 1:return(u=e.v).status&&Ve(),e.a(2,u.status);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),e("b",function(){var e=a(n().m(function e(t){var r,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r={server_id:t.server_id,source_type:"site",source_list:JSON.stringify(t.site)},e.n=1,je(r);case 1:return o=e.v,Ae.value=!0,e.a(2,o.status);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),function(e){"WebLogs"===e?Ge():"WebLogAnalysis"===e?(Me.value=!0,Ne.value.name=ve.value):De.value=!0}),Ke={class:"flex items-center mb-[20px]"},$e={key:0},Qe={class:"flex items-center"},Xe={class:"mx-[0.4rem]"},Ze=x({__name:"index",setup:function(e){var t=L(J()),o=t.selectedWebSite,i=t.webTabActive,l=F(""),c=F(""),s=function(){m({title:"日志服务系统",area:60,component:function(){return y(function(){return r.import("./index-legacy349.js?v=1763689792")},void 0,r.meta.url)}})},f=function(){var e=a(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({request:oe(),data:{size:[String,l],log_path:[String,c]}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=a(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,v({icon:"question-filled",type:"calc",title:"清空Web日志",content:"清空Web日志后，网站访问数据将彻底删除，此操作不可逆，是否继续操作？"});case 1:return e.n=2,d({loading:"正在清空Web日志，请稍后...",request:ae(),data:[String,l]});case 2:g.success("清空Web日志成功");case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return H(a(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Fe();case 1:f(),"WebLogs"===i.value&&Ge();case 2:return e.a(2)}},e)}))),function(e,t){var n=b,r=C,a=h;return S(),A("div",null,[D("div",Ke,[t[10]||(t[10]=V(" 网站： ",-1)),j(n,{modelValue:k(o),"onUpdate:modelValue":t[0]||(t[0]=function(e){return I(o)?o.value=e:null}),options:k(ze),onChange:t[1]||(t[1]=function(e){return k(Ye)(k(i))}),placeholder:"请选择网站",class:"!w-[22rem]",filterable:""},null,8,["modelValue","options"]),"WebLogs"===k(i)?(S(),A("div",$e,[j(r,{class:"!ml-12px",onClick:s},{default:O(function(){return u(t[6]||(t[6]=[V(" 日志服务系统 ",-1)]))}),_:1})])):T("",!0),t[11]||(t[11]=D("div",{class:"bg-dark w-[1px] h-2rem mx-8"},null,-1)),D("div",Qe,[t[7]||(t[7]=D("span",null,"Web日志：",-1)),D("span",{onClick:t[2]||(t[2]=function(e){return k(re)({path:k(c)})}),class:"bt-link"},[V(U(k(c)||"--")+" ",1),G(e.$slots,"default",{},void 0,!0)]),D("span",Xe,U(k(l)),1)]),j(r,{onClick:t[3]||(t[3]=function(e){return p()})},{default:O(function(){return u(t[8]||(t[8]=[V("清空",-1)]))}),_:1}),D("div",{class:"flex items-center ml-[16px]",onClick:t[4]||(t[4]=function(e){return k(Z)()})},u(t[9]||(t[9]=[D("i",{class:"svgtofont-desired text-medium"},null,-1),D("span",{class:"bt-link"},"需求反馈",-1)])))]),j(a,{type:"card",modelValue:k(i),"onUpdate:modelValue":t[5]||(t[5]=function(e){return I(i)?i.value=e:null}),options:k(Re)},null,8,["modelValue","options"])])}}}),et=w(Ze,[["__scopeId","data-v-ce1405e8"]]),tt=Object.freeze(Object.defineProperty({__proto__:null,default:et},Symbol.toStringTag,{value:"Module"}));e("i",tt)}}})}();
