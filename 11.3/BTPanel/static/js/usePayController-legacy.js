!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function c(t,o,u,a){var c=o&&o.prototype instanceof f?o:f,s=Object.create(c.prototype);return n(s,"_invoke",function(t,n,o){var u,a,c,f=0,s=o||[],l=!1,v={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return u=t,a=0,c=e,v.n=n,i}};function p(t,n){for(a=t,c=n,r=0;!l&&f&&!o&&r<s.length;r++){var o,u=s[r],p=v.p,y=u[2];t>3?(o=y===n)&&(c=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=e):u[0]<=p&&((o=t<2&&p<u[1])?(a=0,v.v=n,v.n=u[1]):p<y&&(o=t<3||u[0]>n||n>y)&&(u[4]=t,u[5]=n,v.n=y,a=0))}if(o||t>1)return i;throw l=!0,n}return function(o,s,y){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&p(s,y),a=s,c=y;(r=a<2?e:c)||!l;){u||(a?a<3?(a>1&&(v.n=-1),p(a,c)):v.n=c:v.v=c);try{if(f=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=e}else if((r=(l=v.n<0)?c:t.call(n,v))!==i)break}catch(r){u=e,a=1,c=r}finally{f=1}}return{value:r,done:l}}}(t,u,a),!0),s}var i={};function f(){}function s(){}function l(){}r=Object.getPrototypeOf;var v=[][u]?r(r([][u]())):(n(r={},u,function(){return this}),r),p=l.prototype=f.prototype=Object.create(v);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,n(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=l,n(p,"constructor",l),n(l,"constructor",s),s.displayName="GeneratorFunction",n(l,a,"GeneratorFunction"),n(p),n(p,a,"Generator"),n(p,u,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:y}})()}function n(e,t,r,o){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}n=function(e,t,r,o){function a(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?u?u(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},n(e,t,r,o)}function r(e,t,n,r,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,u){var a=e.apply(t,n);function c(e){r(a,o,u,c,i,"next",e)}function i(e){r(a,o,u,c,i,"throw",e)}c(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./useController-legacy15.js?v=1763689792","./useStore-legacy12.js?v=1763689792"],function(n,r){"use strict";var u,a,c,i,f,s,l,v,p,y,m,d;return{setters:[function(e){u=e.p,a=e.Q,c=e.M},function(e){i=e.g,f=e.r},function(e){s=e.applyCertOrderRenw,l=e.getPayStatus},function(e){v=e.u},function(e){p=e.aq,y=e.ar},function(e){m=e.u,d=e.S}],execute:function(){v();var r=m(),b=r.isRefreshSSL,S=r.productInfo,g=r.orderInfo,w=r.pollingPopup;d();var h=i(function(){return S.value.totalPrice>5e3}),I=n("t",f(h.value?"alicode":"wxcode")),T=n("c",f(0)),j=n("b",f(!1)),P=(n("d",function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.value&&"wxcode"===e&&(e="alicode",c.error("微信支付单笔限额5000元，请使用支付宝支付")),I.value=e,sessionStorage.setItem(t?"PAY-SSL-VIEW-TIME":"PAY-VIEW-SSL-TIME","".concat((new Date).getTime()/1e3))}),function(){var e=o(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,w.value;case 1:e.v.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()),E=n("a",function(){var e=o(t().m(function e(n){var r;return t().w(function(e){for(;;)switch(e.n){case 0:if(O.value=!1,n&&sessionStorage.setItem("PAY-VIEW-SSL-TIME","".concat(n)),!(r=sessionStorage.getItem("PAY-VIEW-SSL-TIME"))){e.n=2;break}if(!(parseInt("".concat((new Date).getTime()/1e3-Number(r)),10)>600&&w.value)){e.n=1;break}return sessionStorage.removeItem("PAY-VIEW-SSL-TIME"),e.a(2,u({title:"支付超时",icon:"warning",content:"由于您长时间未操作，支付超时，请刷新网页重新购买！",onConfirm:function(){P(),window.location.reload()},onCancel:function(){P(),window.location.reload()}}));case 1:w.value||sessionStorage.removeItem("PAY-VIEW-SSL-TIME");case 2:return e.n=3,k();case 3:if(!j.value){e.n=4;break}T.value&&clearTimeout(T.value),T.value=setTimeout(function(){E()},3e3),e.n=7;break;case 4:if(!S.value.isRenew){e.n=6;break}return e.n=5,a({request:s({oid:S.value.oid}),message:!0});case 5:b.value=!0,e.n=7;break;case 6:L();case 7:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),O=n("s",f(!1)),k=n("m",o(t().m(function n(){var r;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,a({request:l({oid:g.value.oid,pid:g.value.pid})});case 1:if("object"!==e((r=t.v).data)||0!==Object.keys(r.data).length){t.n=2;break}return c.error("请求失败，请稍后再试。如有支付问题，请联系客服。"),O.value=!0,t.a(2,Promise.reject({status:!1,msg:"请求失败，请稍后再试。如有支付问题，请联系客服。"}));case 2:j.value=!r.data;case 3:return t.a(2)}},n)}))),L=function(){var e=o(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return p({productInfo:S.value,orderInfo:g.value}),b.value=!0,e.n=1,w.value;case 1:e.v.unmount(),clearTimeout(T.value);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();n("p",function(){y({productInfo:S.value,orderInfo:g.value})}),n("e",o(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k();case 1:j.value&&(T.value&&clearTimeout(T.value),T.value=setTimeout(function(){E()},3e3));case 2:return e.a(2)}},e)}))),n("f",function(){j.value=!1,O.value=!1,T.value&&clearTimeout(T.value)})}}})}();
