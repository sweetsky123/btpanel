!function(){function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function i(n,o,u,a){var i=o&&o.prototype instanceof c?o:c,f=Object.create(i.prototype);return e(f,"_invoke",function(n,e,o){var u,a,i,c=0,f=o||[],s=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(n,e){return u=n,a=0,i=t,d.n=e,l}};function p(n,e){for(a=n,i=e,r=0;!s&&c&&!o&&r<f.length;r++){var o,u=f[r],p=d.p,v=u[2];n>3?(o=v===e)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=p&&((o=n<2&&p<u[1])?(a=0,d.v=e,d.n=u[1]):p<v&&(o=n<3||u[0]>e||e>v)&&(u[4]=n,u[5]=e,d.n=v,a=0))}if(o||n>1)return l;throw s=!0,e}return function(o,f,v){if(c>1)throw TypeError("Generator is already running");for(s&&1===f&&p(f,v),a=f,i=v;(r=a<2?t:i)||!s;){u||(a?a<3?(a>1&&(d.n=-1),p(a,i)):d.n=i:d.v=i);try{if(c=2,u){if(a||(o="next"),r=u[o]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,a<2&&(a=0)}else 1===a&&(r=u.return)&&r.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((r=(s=d.n<0)?i:n.call(e,d))!==l)break}catch(r){u=t,a=1,i=r}finally{c=1}}return{value:r,done:s}}}(n,u,a),!0),f}var l={};function c(){}function f(){}function s(){}r=Object.getPrototypeOf;var d=[][u]?r(r([][u]())):(e(r={},u,function(){return this}),r),p=s.prototype=c.prototype=Object.create(d);function v(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,s):(n.__proto__=s,e(n,a,"GeneratorFunction")),n.prototype=Object.create(p),n}return f.prototype=s,e(p,"constructor",s),e(s,"constructor",f),f.displayName="GeneratorFunction",e(s,a,"GeneratorFunction"),e(p),e(p,a,"Generator"),e(p,u,function(){return this}),e(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:v}})()}function e(n,t,r,o){var u=Object.defineProperty;try{u({},"",{})}catch(n){u=0}e=function(n,t,r,o){function a(t,r){e(n,t,function(n){return this._invoke(t,r,n)})}t?u?u(n,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):n[t]=r:(a("next",0),a("throw",1),a("return",2))},e(n,t,r,o)}function t(n,e,t,r,o,u,a){try{var i=n[u](a),l=i.value}catch(n){return void t(n)}i.done?e(l):Promise.resolve(l).then(r,o)}function r(n){return function(){var e=this,r=arguments;return new Promise(function(o,u){var a=n.apply(e,r);function i(n){t(a,o,u,i,l,"next",n)}function l(n){t(a,o,u,i,l,"throw",n)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./database-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792"],function(e,t){"use strict";var o,u,a,i,l,c,f,s,d,p,v,m,y,b,h,g,_,w,j,V,O,k,x,q,S,G,P;return{setters:[function(n){o=n.Q,u=n.l,a=n.k,i=n.j},function(n){l=n.c,c=n.r,f=n.v,s=n.I,d=n.x,p=n.y,v=n.J,m=n.z,y=n.e,b=n.C,h=n.A,g=n.R,_=n.F,w=n.b1,j=n.O,V=n.D,O=n.ad,k=n.am,x=n.an,q=n.ab},function(n){S=n.getSiteInfo,G=n.getMysqlInfo,P=n.modifyMysqlLink},null],execute:function(){var t={class:"p-[20px]"};e("default",l({__name:"index",setup:function(e,l){var T=l.expose,F=c(!1),U=c(!1),C=c([]),E=c([]),I=c({sql_id:"",pid:"",database:""}),A=[{prop:"name",label:"数据库"},{label:"站点名称",render:function(n){return y("div",null,[n.rname||"--"," ",y("span",{class:"cursor-pointer bt-link",onClick:function(){return M(n)}},[V("切换")])])}}],M=function(){var e=r(n().m(function e(t){var r,o;return n().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,S();case 1:o=n.v,C.value=o.data,I.value.database=t.name,I.value.sql_id=t.id,I.value.pid=t.pid?t.pid:null===(r=C.value[0])||void 0===r?void 0:r.id,F.value=!0,n.n=3;break;case 2:n.p=2,n.v;case 3:return n.a(2)}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),z=function(){var e=r(n().m(function e(){return n().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,o({request:G(),loading:U,data:[Array,E]});case 1:return n.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=r(n().m(function e(){var t;return n().w(function(n){for(;;)switch(n.n){case 0:return t={pid:I.value.pid,sql_id:I.value.sql_id},n.n=1,o({request:P(t),loading:"正在切换中...",message:!0,success:function(){F.value=!1,z()}});case 1:return n.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return f(z),T({init:z}),function(n,e){var r=u,o=a,l=O,c=k,f=x,V=q,S=i,G=s("bt-loading");return d(),p("div",null,[v(y(r,{"max-height":"560",column:A,data:m(E)},null,8,["data"]),[[G,m(U)]]),y(S,{title:"切换网站",modelValue:m(F),"onUpdate:modelValue":e[3]||(e[3]=function(n){return g(F)?F.value=n:null}),area:42,"show-footer":"",onConfirm:D},{default:b(function(){return[h("div",t,[y(V,{modelValue:m(I),"onUpdate:modelValue":e[2]||(e[2]=function(n){return g(I)?I.value=n:null})},{default:b(function(){return[y(l,{label:"数据库"},{default:b(function(){return[y(o,{disabled:"",modelValue:m(I).database,"onUpdate:modelValue":e[0]||(e[0]=function(n){return m(I).database=n}),width:"24rem"},null,8,["modelValue"])]}),_:1}),y(l,{label:"站点名称"},{default:b(function(){return[y(f,{modelValue:m(I).pid,"onUpdate:modelValue":e[1]||(e[1]=function(n){return m(I).pid=n}),class:"!w-[24rem]"},{default:b(function(){return[(d(!0),p(_,null,w(m(C),function(n,e){return d(),j(c,{key:e,label:n.rname,value:n.id},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1})]}),_:1},8,["modelValue"])])]}),_:1},8,["modelValue"])])}}}))}}})}();
