import{L as e,k as i,ax as a,Q as t,_ as s}from"./utils-lib.js?v=1763689792";import{c as l,aB as r,g as o,e as m,x as u,y as n,z as p}from"./base-lib.js?v=1763689792";import{b as d,h as c}from"./form-item.js?v=1763689792";import{setPhpSiteCache as _}from"./site.js?v=1763689792";import{u as f}from"./useStore4.js?v=1763689792";import{u as v}from"./index473.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./index123.js?v=1763689792";import"./index107.js?v=1763689792";import"./index137.js?v=1763689792";import"./validator.js?v=1763689792";import"./column.js?v=1763689792";import"./index.vue_vue_type_style_index_0_scoped_cdc7f4d3_lang.js?v=1763689792";import"./index.vue_vue_type_script_setup_true_lang13.js?v=1763689792";import"./index.vue_vue_type_script_setup_true_lang25.js?v=1763689792";import"./index109.js?v=1763689792";import"./index480.js?v=1763689792";import"./index118.js?v=1763689792";import"./index130.js?v=1763689792";const x={class:"flex flex-col p-[1.6rem]"},j=s(l({__name:"cache-dialog",props:{compData:{default:void 0}},setup(s,{expose:l}){const j=s,g=f(),b=v(),V=r("popupClose",()=>{}),h=[{label:"秒",value:"s"},{label:"分钟",value:"m"},{label:"小时",value:"h"},{label:"天",value:"d"}],{BtForm:U,submit:y,param:D}=e({data:()=>{var e,i,a;const{timeValue:t,timeUnit:s}=(e=>{if(!e)return{timeValue:"",timeUnit:"h"};const i=e.match(/^(\d+)([dhms])$/);return i?{timeValue:i[1],timeUnit:i[2]}:{timeValue:"",timeUnit:"h"}})(null==(e=j.compData)?void 0:e.time_out);var l;return{suffix:(l=null==(a=null==(i=j.compData)?void 0:i._original)?void 0:a.suffix)&&Array.isArray(l)?l.join(","):"",timeValue:t,timeUnit:s}},options:o(()=>[d("缓存后缀","suffix",{attrs:{class:"!w-[30rem]",placeholder:"例如：jpg,css,js"},rules:[{required:!0,message:"请输入缓存后缀",trigger:"blur"}]}),c("缓存时间",()=>m("div",{class:"flex items-center"},[m(i,{modelValue:D.value.timeValue,"onUpdate:modelValue":e=>D.value.timeValue=e,type:"number",class:"!w-[15rem]",placeholder:"请输入缓存时间"},null),m(a,{modelValue:D.value.timeUnit,"onUpdate:modelValue":e=>D.value.timeUnit=e,options:h,class:"!w-[10rem] ml-[1rem]"},null)]),"timeValue",{rules:{timeValue:[{required:!0,message:"请输入缓存时间",trigger:"blur"},{validator:(e,i,a)=>{!i||i<=0?a(new Error("缓存时间必须大于0")):a()},trigger:"blur"}]}})]),submit:async(e,i)=>{var a,s;await i();const l="".concat(e.value.timeValue).concat(e.value.timeUnit),r=e.value.suffix.split(",").map(e=>e.trim()).filter(e=>e),o={site_name:g.siteInfo.value.name,suffix:r,time_out:l};(null==(s=null==(a=j.compData)?void 0:a._original)?void 0:s.suffix)&&(o.old_suffix=j.compData._original.suffix),t({loading:j.compData?"保存中...":"添加中...",message:!0,request:_(o),success:()=>{b.isRefreshCacheList=!0,V()}})}});return l({onConfirm:y}),(e,i)=>(u(),n("div",x,[m(p(U))]))}}),[["__scopeId","data-v-85abd2b4"]]);export{j as default};
