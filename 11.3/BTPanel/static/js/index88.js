import{R as e,Q as t,b as a,u as s,n as l,H as n,e as r,M as i,an as o,q as u,bm as c,aA as d,ao as p,cN as m,ap as h,f as v,j as f,_,hx as g,aC as y}from"./utils-lib.js?v=1763689792";import{c as x,s as b,o as w,r as k,g as C,w as D,x as j,y as E,A as T,B,z as R,e as N,C as S,D as I,G as O,V as M,H as A,t as V,W as L,aA as P,aE as q,ar as H,at as U,as as z,b2 as F,v as G,b as J,R as X,i as Y,aH as Q,aT as W,ap as Z,n as K,aP as $,aZ as ee}from"./base-lib.js?v=1763689792";import{g as te}from"./useStore5.js?v=1763689792";import{_ as ae}from"./index109.js?v=1763689792";import{_ as se}from"./index260.js?v=1763689792";import{e as le,f as ne,r as re,h as ie,i as oe,j as ue,k as ce,l as de,m as pe,n as me,u as he,o as ve}from"./ssl.js?v=1763689792";import{r as fe,s as _e,a as ge}from"./useMethod7.js?v=1763689792";import{u as ye}from"./useStore11.js?v=1763689792";import{d as xe,a as be,c as we,r as ke,b as Ce,h as De,C as je,o as Ee,e as Te,f as Be,g as Re,i as Ne,v as Se,u as Ie}from"./useMethod12.js?v=1763689792";import{C as Oe,b as Me,a as Ae,d as Ve,o as Le,r as Pe,g as qe}from"./useController15.js?v=1763689792";import{b as He,j as Ue,e as ze}from"./validator.js?v=1763689792";import{c as Fe,a as Ge}from"./column.js?v=1763689792";import{u as Je}from"./index147.js?v=1763689792";import{_ as Xe}from"./index110.js?v=1763689792";import"./index.vue_vue_type_style_index_0_scoped_cdc7f4d3_lang.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./site.js?v=1763689792";import"./useStore12.js?v=1763689792";import"./useStore4.js?v=1763689792";import"./useController6.js?v=1763689792";import"./useController5.js?v=1763689792";import"./useMethod5.js?v=1763689792";import"./useController4.js?v=1763689792";import"./index107.js?v=1763689792";import"./index131.js?v=1763689792";const Ye={class:"p-[2rem] w-[480px]"},Qe={class:"flex items-center"},We={class:"text-base ml-[.8rem] leading-10"},Ze={key:0,class:"flex items-center ml-[4.8rem] mt-[1.2rem]"},Ke={class:"bg-light footer-btn flex items-center justify-end p-[1.2rem] w-full"},$e=x({__name:"index",props:{compData:{},isMulti:{type:Boolean},delType:{}},emits:["cancel"],setup(s,{expose:l,emit:n}){const{activeTabs:r,sslIsRefresh:i,testIsRefresh:o,encryptIsRefresh:u,otherIsRefresh:c}=b(ye()),d=a(),p=s,m=n,h=w({addend1:Math.round(9*Math.random()+1),addend2:Math.round(9*Math.random()+1),sum:void 0,cloud:!1,local:!0}),v=k(null),f=k(!1),_=C(()=>{var e;return f.value?v.value.filter(e=>e.use_site.length>0).map(e=>e.use_site).flat():null==(e=v.value)?void 0:e.use_site}),g=async()=>{var a,s,l,n,g;let y=d.load("正在".concat(f.value?"批量":"","删除证书，请稍候..."));try{const y={ssl:()=>i.value=!0,test:()=>o.value=!0,encrypt:()=>u.value=!0,other:()=>c.value=!0};if(f.value){let t=[];if("ssl"===p.delType)for(const e of v.value)try{if(e.endDay>=0){t.push({name:e.title||(null==(a=e.domainName)?void 0:a.join(","))||"未知证书",status:!1,msg:"证书未过期，无法删除"});continue}const{data:l}=await le(e.oid);t.push({name:e.title||(null==(s=e.domainName)?void 0:s.join(","))||"未知证书",status:l.status,msg:l.msg})}catch(x){t.push({name:e.title||(null==(l=e.domainName)?void 0:l.join(","))||"未知证书",status:!1,msg:(null==x?void 0:x.message)||"删除失败"})}else{let a=[],s=[];if(v.value.forEach(e=>{void 0!==e.hash&&null!==e.hash?s.push(e.hash):void 0!==e.index&&null!==e.index?a.push(e.index):t.push({name:e.title,status:!1,msg:"不支持删除"})}),a.length||s.length){let l={ssl_hash:s.join(","),index:a.join(","),local:1,cloud:h.cloud?1:0};_.value.length&&(l.force=!0);const{data:n}=await ne(l);e(n.finish_list)&&n.finish_list.forEach(e=>{t.push({name:e.name,status:e.status,msg:e.status?"删除成功":e.msg})})}}m("cancel"),await fe({resultData:t,resultTitle:"删除"}),null==(n=y[r.value])||n.call(y)}else if("ssl"===p.delType){let e=v.value.oid;t({request:le(e),loading:"正在删除证书，请稍候...",message:!0,success:()=>{var e;m("cancel"),null==(e=y[r.value])||e.call(y)}})}else{let t={ssl_id:v.value.id,ssl_hash:v.value.hash,index:v.value.index};v.value.order_status?(delete t.ssl_id,delete t.ssl_hash):delete t.index,_.value.length&&(t.force=1);const a=await re({...t,local:1,cloud:h.cloud?1:0});e(a.data.finish_list)&&d.request(a.data.finish_list[0]),a.status&&(m("cancel"),null==(g=y[r.value])||g.call(y))}}catch(b){}finally{y&&y.close(),h.addend1=Math.round(9*Math.random()+1),h.addend2=Math.round(9*Math.random()+1),h.sum=void 0}},y=()=>{m("cancel"),h.addend1=Math.round(9*Math.random()+1),h.addend2=Math.round(9*Math.random()+1),h.sum=void 0};return D(()=>p.compData,e=>{v.value=e},{deep:!0,immediate:!0}),D(()=>p.isMulti,e=>{f.value=e},{deep:!0,immediate:!0}),l({handleCancel:y}),(e,t)=>{const a=M,l=A;return j(),E("div",null,[T("div",Ye,[T("div",Qe,[t[1]||(t[1]=T("span",{class:"!text-warning !text-titleLarge svgtofont-el-warning-filled"},null,-1)),T("span",We,B("".concat(R(f)?"批量删除":"删除该","证书，是否继续操作？")),1)]),"other"===s.delType?(j(),E("div",Ze,[N(a,{modelValue:R(h).cloud,"onUpdate:modelValue":t[0]||(t[0]=e=>R(h).cloud=e)},{default:S(()=>[I(B("".concat(R(f)?"批量":"","同步删除云端证书")),1)]),_:1},8,["modelValue"])])):O("",!0)]),T("div",Ke,[N(l,{type:"default",onClick:y},{default:S(()=>[...t[2]||(t[2]=[I("取消",-1)])]),_:1}),N(l,{type:"danger",onClick:g},{default:S(()=>[...t[3]||(t[3]=[I("删除",-1)])]),_:1})])])}}}),{refs:{tabActive:et,typeList:tt},router:at}=te(),{payment:st}=s(),{bindUser:lt}=V(st.value),nt=[{content:"申请证书",dropdownClass:"bg-white",splitButton:!0,active:!0,event:()=>{if(!lt.value)return He(),!1;ft()}}],rt=L([]),it=Je({key:"type",name:"证书分组",options:()=>[{label:"全部分组",value:"all"}],event:{get:async()=>{let e=[];return await t({request:ie(),data:Array,success:t=>{e=[{label:"全部分组",value:"all"},...t.map(e=>({label:e.name,value:String(e.group_id)}))]}}),tt.value=e,e},add:e=>oe({name:e.name,group_id:Date.now()}),delete:e=>ue({group_id:e.id})},ignore:["0"],field:"name",showEdit:!1}),ot=k(!1),ut=k(!1),ct=k(null),dt=k(null),pt=(e,t)=>{ut.value=t,ct.value=e,ot.value=!0},mt=()=>{ot.value=!1},ht=[{label:"批量分组",value:"group",event:(e,t,a,s)=>_e(a.value,"certificate")},{label:"批量设置告警",value:"alarm",event:(e,t,a,s)=>{De(a.value,je.SSL)}},{label:"批量下载",value:"download",event:async(e,t,a,s,l)=>{await vt(a.value),l&&l()}},{label:"删除",value:"delete",event:async(e,t,a,s)=>{const{label:r,value:i}=s;let o=[],u=[];a.value.forEach(e=>{void 0!==e.hash&&null!==e.hash?u.push(e.hash):void 0!==e.index&&null!==e.index&&o.push(e.index)});await l({title:"批量".concat(r,"证书"),area:46,component:()=>n(()=>import("./index125.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{resultTitle:"批量".concat(r,"证书"),resultData:a.value,resultColumn:[{label:"名称",prop:"title"},Fe()],autoTitle:"批量".concat(r,"证书")},showFooter:!0,onConfirm:async()=>{await(async()=>{if("delete"===i)return await pt(a.value,!0)})()}})}}],vt=async e=>{var t;let a=null;const s=[],l=[];try{if(a=i.load("正在批量下载证书，请稍候..."),e.forEach(e=>{(e=>{s.push(e)})(e)}),s.length>0){let n=s.filter(e=>void 0!==e.oid&&null!==e.oid&&e.download_status).map(e=>e.oid).join(","),r={oid:n};if(!n)return a.close&&a.close(),void i.error("选择的证书中没有可下载的证书！");const{data:o,status:u}=await ce(r);u&&(o.url&&window.open(o.url,"_blank","noopener,noreferrer"),(null==(t=o.finish_list)?void 0:t.length)>0&&o.finish_list.forEach(t=>{const a=JSON.parse(t.cert.info);l.push({name:e.find(e=>e.id==a.issuer).domainName.join(","),oid:a.issuer,status:t.status})}))}fe({resultData:l,resultTitle:"下载",resultColumn:[{label:"名称",prop:"name"},{label:"订单编号",prop:"oid"},{label:"结果",render:e=>{let t="",a="";return e.status?(t="下载成功",a="text-primary"):(t="下载失败",a="text-danger"),q("span",{class:a},t)}}]})}catch(n){}finally{a&&a.close()}},ft=()=>{l({isAsync:!0,title:"购买商业证书",area:[82],component:()=>n(()=>import("./index407.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})},_t=e=>{const t=(e,t)=>N("span",{class:"bt-link",onClick:t},[e]),a=t("人工服务",()=>Ue()),s=t("详情",()=>(e=>{l({title:"多年期证书详情",area:52,compData:e,component:()=>n(()=>import("./mulit-cert-detail.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})})(e)),r=t("下载",()=>xe(e)),i=t("部署",()=>be(e)),o=t("验证",()=>we(e.oid,e.cert_ssl_type,e.pid)),u=t("续签",()=>ke(e.oid)),c=t("完善资料",()=>Ce(e)),d=e.orderStatus,p=[];switch(e.years&&e.years>1&&[5,15].includes(Number(d))&&p.push(s),Number(d)){case 0:e.install&&p.push(a),p.push(c);break;case 3:case 11:e.install&&p.push(a),p.push(o);break;case 5:p.push(i),p.push(r);break;case 7:p.push(u)}const m=[];return p.map((e,t)=>{m.push(e),t<p.length-1&&m.push(N(Xe,null,null))}),m},gt={class:"flex items-center"},yt={class:"flex items-center ml-[12px]"},xt={class:"flex items-center"};const bt=_(x({__name:"index",setup(e,{expose:t}){const{refs:{tabActive:a,expiringCertificateCount:l,expiredCertificateCount:n}}=te(),{sslSearchType:i,sslIsRefresh:_}=b(ye()),{mainHeight:g}=s(),y=h(ht),{BtTable:x,BtPage:w,BtRefresh:k,BtTableCategory:C,BtRecommendSearch:D,BtColumn:B,BtBatch:O,BtErrorMask:M,refresh:V}=o({request:async e=>{let t={p:e.p,group_id:u(e.type)||"all"===e.type?"-1":e.type,search:e.search,limit:e.limit,status_id:i.value,cert_type:"1"};"-1"===t.group_id&&delete t.group_id,"-1"===t.status_id&&delete t.status_id,""===t.search&&delete t.search;const{data:a}=await de(t);rt.value=a.data;const s=c(a);return s("will_num")&&(l.value=(null==a?void 0:a.will_num)||0),s("end_num")&&(n.value=(null==a?void 0:a.end_num)||0),{data:a.data,total:d(a.page),other:{search_history:a.search_history}}},columns:[Ge(),{label:"认证域名",render:e=>{var t;return(null==(t=e.domainName)?void 0:t.join(", "))||"--"}},{label:"证书类型",prop:"title",showOverflowTooltip:!0,width:180},{label:"部署网站",isCustom:!0,showOverflowTooltip:!0,render:e=>{var t;return(null==(t=e.use_site)?void 0:t.join(", "))||"--"}},{label:"分组",prop:"group_name",width:100,showOverflowTooltip:!0,isCustom:!1},{label:"到期时间",isCustom:!0,render:e=>{var t,a;const s=(e,t)=>N("span",{class:e<=10?"text-danger":t},[e>0?"剩余".concat(e,"天"):"已过期"]),l=(n=e.endDay)<=0||n<=7?"text-danger":n<=15?"text-warning":"text-primary";var n;return"1"===e.type?e.endDate?s(e.endDay,e.endDay<=30?"text-warning":l):N("span",null,[I("--")]):"2"===e.type?(null==e?void 0:e.endDay)&&0!==(null==e?void 0:e.endDay)?s(e.endDay,e.endDay<=30?"text-warning":l):N("span",null,[I("--")]):N("span",{class:(null==(t=e.domainName)?void 0:t.length)?l:"text-default"},[(null==(a=e.domainName)?void 0:a.length)?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--"])}},{label:"订单状态",isCustom:!0,renderHeader(){const e=[{title:"全部",key:"-1"},{title:"验证中",key:"0"},{title:"未到期/订单完成",key:"1"},{title:"即将到期",key:"2"},{title:"已到期",key:"3"}];return q("div",{class:"flex items-center flex-nowrap"},["",q(H,{onCommand:e=>{i.value=e,V()}},{default:()=>q("span",{class:"text-small flex items-center"},[[N("span",{class:"status-header-text"},[I("订单状态"),"-1"===i.value?"(全部)":"(".concat(e.find(e=>e.key===i.value).title,")")])],q("i",{class:"svgtofont-el-arrow-down "})]),dropdown:()=>{let t;return N(z,null,"function"==typeof(a=t=e.map(e=>N(U,{command:e.key},{default:()=>[e.title]})))||"[object Object]"===Object.prototype.toString.call(a)&&!Y(a)?t:{default:()=>[t]});var a}})])},render:e=>{if(e.cert_ssl_type)return(e=>{const t=N(P,{placement:"bottom-end",width:"400","popper-class":"white-theme",trigger:"click"},{default:()=>N("div",{class:"bus-ssl-popover"},[N("div",{class:"ssl-popover-item"},[N("span",{class:"ssl-popover-title"},[I("自行排查")]),N("p",null,[I("以图文的形式，一步步教您验证并部署商业SSL")]),N(r,{href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},{default:()=>[I("如何验证商用证书?")]})]),N("div",{class:"ssl-popover-item"},[N("span",{class:"ssl-popover-title"},[I("购买人工")]),N("p",null,[I("不会部署?人工客服帮你全程部署，不成功可退款")]),N(A,{size:"small",type:"primary",onClick:()=>Ue()},{default:()=>[I("购买人工")]})])]),reference:()=>N("span",{class:"bt-link"},[I("排查方法?")])}),a=e.orderStatus,s=[];switch(Number(a)){case-1:s.push(N("span",{class:"text-danger"},[I("已取消")]));break;case 0:e.install||s.push(t),s.push(N("span",{class:"text-warning"},[I("待完善资料")]));break;case 1:s.push(N("span",{class:"text-warning"},[I("待审核")]));break;case 2:s.push(N("span",{class:"text-warning"},[I("正在提交CA")]));break;case 3:s.push(N("span",{class:"text-warning"},[I("待域名验证")]));break;case 4:s.push(N("span",{class:"text-warning"},[I("签发中")]));break;case 5:s.push(N("span",{class:"text-success"},[I("已签发")]));break;case 6:s.push(N("span",{class:"text-warning"},[I("取消确认")]));break;case 7:s.push(N("span",{class:"text-warning"},[I("待续费")]));break;case 8:s.push(N("span",{class:"text-warning"},[I("待吊销确认")]));break;case 9:s.push(N("span",{class:"text-warning"},[I("待重颁发")]));break;case 10:s.push(N("span",{class:"text-warning"},[I("重颁发中")]));break;case 11:s.push(N("span",{class:"text-warning"},[I("吊销中")]));break;case 12:s.push(N("span",{class:"text-danger"},[I("已吊销")]));break;default:s.push(N("span",{class:"text-warning"},[I("待完善资料")]))}const l=[];return s.map((e,t)=>{l.push(e),t<s.length-1&&l.push(N(Xe,null,null))}),l})(e);if("1"===e.type){let t=[];const a=(e,t)=>N("span",{class:e},[t]),s=(e,t)=>N(P,{trigger:"hover",placement:"left","popper-class":"popover-default",width:"300",enterable:!1,"open-delay":100,"close-delay":0},{default:()=>N("div",{class:"flex items-center p-[2px] whitespace-nowrap"},[I("1、如填写错误，联系人工可重置订单"),N("br",null,null),I("2、如验证方式选择错误，联系人工修改验证方式")]),reference:()=>N("div",{style:"color: ".concat(e,";")},[t])});let l=e.domainName&&e.domainName.length>0;if(""!=e.certId||l)if(""==e.certId&&0!==e.domainName.length)t.push(a("text-warningDark","待提交"));else if(1===e.status)switch(e.orderStatus){case"COMPLETE":t.push(a("text-primary","订单完成"));break;case"REISSUED":t.push(a("text-primary","已重签"));break;case"PENDING":t.push(s("orange","验证中"));break;case"CANCELLED":t.push(a("text-tertiary","已取消"));break;case"FAILED":t.push(a("text-[var(--el-color-error-light-8)]","申请失败"));break;case"EXPIRED":t.push(a("text-[var(--el-color-error-light-8)]","已过期"));break;default:t.push(a("text-warningDark","待验证"))}else switch(e.status){case 0:t.push(a("text-warningDark","未支付"));break;case-1:t.push(a("text-tertiary","已取消"))}else t.push(N("span",{class:"cursor-pointer bt-warn",onClick:()=>Ce(e)},[I("待完善资料")]));const n=[];return t.map((e,a)=>{n.push(e),a<t.length-1&&n.push(N(F,{direction:"vertical"},null))}),n}return[]}},{label:"操作",align:"right",fixed:"right",width:280,render:e=>{if(e.cert_ssl_type)return _t(e);const t=(e,t)=>N("span",{class:"bt-link",onClick:t},[e]),a=t("人工服务",()=>Ue()),s=t("下载",()=>xe(e)),l=t("部署",()=>be(e)),n=t("验证",()=>we(e.oid,e.cert_ssl_type,e.pid)),r=t("续签",()=>ke(e.oid)),i=t("删除",()=>pt(e,!1)),o=t("到期告警",()=>ge({...e,cancel:()=>{}}));let u=[];if(e.endDay<=0||u.push(o),e.renew&&u.push(N("span",{class:"cursor-pointer bt-link",onClick:()=>ke(e.oid)},[I("续签")])),""==e.certId)e.install&&u.push(a),u.push(t("完善资料",()=>Ce(e)));else if(1===e.status){switch(e.orderStatus){case"COMPLETE":1===e.ssl_state?u.push(N("span",null,[I("已部署")])):u.push(l),e.endDay<30&&u.push(r);break;case"PENDING":default:e.install&&u.push(a),u.push(n);break;case"CANCELLED":u.push(N("span",null,[I("无操作")]));break;case"FAILED":u.push(N("span",{class:"cursor-pointer bt-danger"},[I("申请失败")]));break;case"EXPIRED":u.push(l);case"REISSUED":}e.download_status&&u.push(s),e.endDay&&e.endDay<=0&&u.push(i)}else u.push(N("span",null,[I("无操作")]));const c=[];return u.map((e,t)=>{c.push(e),t<u.length-1&&c.push(N(F,{direction:"vertical"},null))}),u=c,u}}],extension:[it,y,p(_),m("search",{name:"ssl",key:"get_cert_list",list:[],showRecommend:!1})]});return G(()=>{a.value=J().name}),t({init:V}),(e,t)=>{const a=se,s=v,l=r,n=f,i=ae;return j(),E("div",null,[N(i,null,{"header-left":S(()=>[T("div",gt,[N(a,{options:R(nt)},null,8,["options"]),N(Oe,{placement:"right"},{default:S(()=>[T("div",yt,[N(s,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=T("span",{class:"bt-link"},"售前客服",-1))])]),_:1}),N(l,{class:"ml-[12px] flex items-center",onClick:R(Ee)},{default:S(()=>[...t[3]||(t[3]=[T("div",{class:"flex items-center"},[T("span",{class:"svgtofont-desired text-medium"}),T("span",null,"需求反馈")],-1)])]),_:1},8,["onClick"])])]),"header-right":S(()=>[T("div",xt,[N(R(C),{class:"!w-[140px] mr-[10px]"}),N(R(D),{type:"ssl-certificate",placeholder:"请输入证书名称",class:"!w-[270px] mr-[10px]"}),N(R(k),{class:"mr-[10px]"}),N(R(B))])]),content:S(()=>[N(R(x),{"min-height":R(g)},null,8,["min-height"])]),"footer-left":S(()=>[N(R(O))]),"footer-right":S(()=>[N(R(w))]),popup:S(()=>[N(n,{title:"证书删除确认",modelValue:R(ot),"onUpdate:modelValue":t[0]||(t[0]=e=>X(ot)?ot.value=e:null),area:["auto"],onCancel:t[1]||(t[1]=e=>R(dt).handleCancel())},{default:S(()=>[N($e,{ref_key:"delRef",ref:dt,delType:"ssl",isMulti:R(ut),compData:R(ct),onCancel:R(mt)},null,8,["isMulti","compData","onCancel"])]),_:1},8,["modelValue"])]),_:1})])}}}),[["__scopeId","data-v-9c320238"]]),{encryptIsRefresh:wt}=b(ye()),kt=k(!1),Ct=k(!1),Dt=k(null),jt=k(null),Et=(e,t)=>{Ct.value=t,Dt.value=e,kt.value=!0},Tt=async(a,s,r,i)=>{const{label:o,value:u}=i;let c=[],d=[];r.value.forEach(e=>{void 0!==e.hash&&null!==e.hash?d.push(e.hash):void 0!==e.index&&null!==e.index&&c.push(e.index)});const p=async()=>{switch(u){case"download":return await ce({ssl_hash:d.join(","),index:c.join(",")});case"delete":return await Et(r.value,!0)}};await l({title:"批量".concat(o,"证书"),area:46,component:()=>n(()=>import("./index125.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{resultTitle:"批量".concat(o,"证书"),resultData:r.value,resultColumn:[{label:"名称",prop:"title"},Fe()],autoTitle:"批量".concat(o,"证书")},showFooter:!0,onConfirm:async()=>{"delete"!==u?t({request:await p(),loading:"正在批量".concat(o,"证书"),success(t){var a;const{data:s,status:l}=t;if(l){let t=[],l=[];"download"===u?(s.url&&window.open(s.url,"_blank","noopener,noreferrer"),(null==(a=s.finish_list)?void 0:a.length)>0&&s.finish_list.forEach(e=>{const a=JSON.parse(e.cert.info);t.push({name:a.issuer,status:e.status})}),l=[{label:"名称",prop:"name"},{label:"结果",render:e=>{let t="",a="";return e.status?(a="text-primary",t="下载成功"):(a="text-danger",t="下载失败"),q("span",{class:a},t)}}]):e(s.finish_list)&&(s.finish_list.forEach(e=>{t.push({name:e.name,status:e.status,msg:e.status?"删除成功":e.msg})}),l=[{label:"名称",prop:"name"},{label:"结果",render:e=>{let t=e.msg,a="";return a=e.status?"text-primary":"text-danger",q("span",{class:a},t)}}],wt.value=!0),fe({resultTitle:"批量".concat(o,"证书"),resultData:t,resultColumn:l})}}}):await p()}})},Bt={class:"flex items-center"},Rt={class:"flex items-center ml-[12px]"},Nt={class:"flex items-center"};const St=x({__name:"index",setup(e,{expose:a}){const{refs:{tabActive:i,expiringCertificateCount:_,expiredCertificateCount:g,typeList:y}}=te(),{encryptIsRefresh:x,encryptSearchType:w}=b(ye()),{mainHeight:k}=s();Q();const C=[{content:"申请证书",dropdownClass:"bg-white",splitButton:!0,active:!0,event:()=>{l({isAsync:!0,title:"申请Let's Encrypt证书",area:64,component:()=>n(()=>import("./apply-lest-ssl.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})}}],D=L([]),B=()=>{kt.value=!1},O=Je({key:"type",name:"证书分组",options:()=>[{label:"全部分组",value:"all"}],event:{get:async()=>{let e=[];return await t({request:ie(),data:Array,success:t=>{e=[{label:"全部分组",value:"all"},...t.map(e=>({label:e.name,value:String(e.group_id)}))]}}),y.value=e,e},add:e=>oe({name:e.name,group_id:Date.now()}),delete:e=>ue({group_id:e.id})},ignore:["0"],field:"name",showEdit:!1}),M=h([{label:"批量分组",value:"group",event:(e,t,a,s)=>_e(a.value,"certificate")},{label:"批量设置告警",value:"alarm",event:(e,t,a,s)=>{De(a.value,je.ENCRYPT)}},{label:"下载",value:"download",event:Tt},{label:"删除",value:"delete",event:Tt}]),{BtTable:A,BtPage:V,BtRefresh:$,BtTableCategory:ee,BtRecommendSearch:le,BtColumn:ne,BtBatch:re,BtErrorMask:ce,refresh:me}=o({request:async e=>{let t={p:e.p,group_id:u(e.type)||"all"===e.type?"-1":e.type,search:e.search,limit:e.limit,status_id:w.value,cert_type:"3"};"-1"===t.group_id&&delete t.group_id,"-1"===t.status_id&&delete t.status_id,""===t.search&&delete t.search;const{data:a}=await de(t);D.value=a.data;const s=c(a);return s("will_num")&&(_.value=(null==a?void 0:a.will_num)||0),s("end_num")&&(g.value=(null==a?void 0:a.end_num)||0),{data:a.data,total:d(a.page),other:{search_history:a.search_history}}},columns:[Ge(),{label:"认证域名",render:e=>{var t;return(null==(t=e.domainName)?void 0:t.join(", "))||"--"}},{label:"部署网站",isCustom:!0,render:e=>{var t;return(null==(t=e.use_site)?void 0:t.join(", "))||"--"}},{label:"分组",prop:"group_name",width:100,showOverflowTooltip:!0,isCustom:!1},{label:"到期时间",isCustom:!0,render:e=>{var t,a;const s=(e,t)=>N("span",{class:e<=10?"text-danger":t},[e>0?"剩余".concat(e,"天"):"已过期"]),l=(n=e.endDay)<=0||n<=7?"text-danger":n<=15?"text-warning":"text-primary";var n;return"1"===e.type?e.endDate?s(e.endDay,e.endDay<=30?"text-warning":l):N("span",null,[I("--")]):"2"===e.type?(null==e?void 0:e.endDay)&&0!==(null==e?void 0:e.endDay)?s(e.endDay,e.endDay<=30?"text-warning":l):N("span",null,[I("--")]):N("span",{class:(null==(t=e.domainName)?void 0:t.length)?l:"text-default"},[(null==(a=e.domainName)?void 0:a.length)?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--"])}},{label:"验证方式",isCustom:!0,prop:"auth_type",render:(e,t)=>N("span",null,["dns"===e.auth_type?"DNS验证":"文件验证"])},{label:"订单状态",isCustom:!0,renderHeader(){const e=[{title:"全部",key:"-1"},{title:"验证中",key:"0"},{title:"未到期/订单完成",key:"1"},{title:"即将到期",key:"2"},{title:"已到期",key:"3"}];return q("div",{class:"flex items-center flex-nowrap"},["",q(H,{onCommand:e=>{w.value=e,me()}},{default:()=>q("span",{class:"text-small flex items-center"},[[N("span",{class:"status-header-text"},[I("订单状态"),"-1"===w.value?"(全部)":"(".concat(e.find(e=>e.key===w.value).title,")")])],q("i",{class:"svgtofont-el-arrow-down "})]),dropdown:()=>{let t;return N(z,null,"function"==typeof(a=t=e.map(e=>N(U,{command:e.key},{default:()=>[e.title]})))||"[object Object]"===Object.prototype.toString.call(a)&&!Y(a)?t:{default:()=>[t]});var a}})])},render:e=>{var t;if(!(null==e?void 0:e.order_status)||""===(null==e?void 0:e.order_status))return N("span",{class:"text-primary"},[I("订单完成")]);switch(e.order_status){case"pending":return(null==(t=e.domainName)?void 0:t.length)&&e.endDay>0?N("span",{class:"text-warningDark"},[I("待验证")]):N("span",null,[I("--")]);case"invalid":return N(W,{content:"验证失败，请尝试删除此订单后重新申请",placement:"top"},{default:()=>[N("span",{class:"text-warningDark"},[e.order_status_nm])]});default:return N("span",{class:"text-primary"},[I("订单完成")])}}},{label:"自动续签",renderHeader:()=>N("div",{class:"flex items-center"},[N("span",null,[I("自动续签")]),N(P,{placement:"top-start",width:"200",trigger:"hover",content:"只支持let's Encrypt证书订单续签"},{reference:()=>N("span",{class:" ml-[4px] bt-ico-ask"},[I("?")])})]),isCustom:!1,render:e=>{let a=!("3"!==e.type||!e.order_status||-1===e.crontab_id),s="3"!==e.type||"valid"!==e.order_status;return N("span",{class:"flex items-center"},[N(Z,{size:"small",modelValue:a,"onUpdate:modelValue":e=>a=e,disabled:s,onChange:t=>{t?(e.crontab_id=1,Te({...e,cancel:()=>{K(()=>{e.crontab_id=-1})}})):Be(e)}},null),e.crontab_data&&-1===Number(e.crontab_data.status)&&N("span",{class:"bt-link !text-danger ml-[4px]",onClick:()=>(async e=>{t({request:await pe(e.crontab_id),loading:"正在获取异常日志",success(t){const{msg:a}=t;l({title:"续签异常/失败日志",area:66,component:()=>n(()=>import("./exception-log.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{reason:e.crontab_data.error_msg,logContent:a||"暂无异常日志"}})}})})(e)},[I("异常")])])}},{label:"操作",align:"right",fixed:"right",width:280,render:e=>{var t;let a=[];"valid"===e.order_status&&(a.push(N("span",{class:"cursor-pointer bt-link",onClick:()=>{Re(e)}},[I("续签")])),Ne(e,je.ENCRYPT)&&a.push(N("span",{class:"cursor-pointer bt-link",onClick:()=>ge({...e,cancel:()=>{}})},[I("到期告警")]))),"pending"!==e.order_status&&"invalid"!==e.order_status?(a.push(N("span",{class:"cursor-pointer bt-link",onClick:()=>be(e)},[I("部署")])),a.push(N("span",{class:"cursor-pointer bt-link",onClick:()=>xe(e)},[I("下载")]))):(null==(t=e.domainName)?void 0:t.length)&&e.endDay>0&&e.order_status&&"invalid"!==e.order_status&&a.push(N("span",{class:"cursor-pointer bt-link",onClick:()=>Se(e)},[I("验证")])),a.push(N("span",{class:"cursor-pointer bt-link",onClick:()=>Et(e,!1)},[I("删除")]));const s=[];return a.map((e,t)=>{s.push(e),t<a.length-1&&s.push(N(F,{direction:"vertical"},null))}),a=s,a}}],extension:[O,M,p(x),m("search",{name:"ssl",key:"get_cert_list",list:[],showRecommend:!1})]});return G(()=>{i.value=J().name}),a({init:me}),(e,t)=>{const a=se,s=v,l=r,n=f,i=ae;return j(),E("div",null,[N(i,null,{"header-left":S(()=>[T("div",Bt,[N(a,{options:C}),N(Oe,{placement:"right"},{default:S(()=>[T("div",Rt,[N(s,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=T("span",{class:"bt-link"},"联系客服",-1))])]),_:1}),N(l,{class:"ml-[12px] flex items-center",onClick:R(Ee)},{default:S(()=>[...t[3]||(t[3]=[T("div",{class:"flex items-center"},[T("span",{class:"svgtofont-desired text-medium"}),T("span",null,"需求反馈")],-1)])]),_:1},8,["onClick"])])]),"header-right":S(()=>[T("div",Nt,[N(R(ee),{class:"!w-[140px] mr-[10px]"}),N(R(le),{type:"ssl-certificate",placeholder:"请输入证书名称",class:"!w-[270px] mr-[10px]"}),N(R(ne))])]),content:S(()=>[N(R(A),{"min-height":R(k)},null,8,["min-height"])]),"footer-left":S(()=>[N(R(re))]),"footer-right":S(()=>[N(R(V))]),popup:S(()=>[N(n,{title:"证书删除确认",modelValue:R(kt),"onUpdate:modelValue":t[0]||(t[0]=e=>X(kt)?kt.value=e:null),area:["auto"],onCancel:t[1]||(t[1]=e=>R(jt).handleCancel())},{default:S(()=>[N($e,{ref_key:"delRef",ref:jt,delType:"encrypt",isMulti:R(Ct),compData:R(Dt),onCancel:B},null,8,["isMulti","compData"])]),_:1},8,["modelValue"])]),_:1})])}}}),{payment:It}=s(),{bindUser:Ot}=V(It.value),{btSearchType:Mt,btCertProductId:At}=b(ye()),{refs:{expiringCertificateCount:Vt,expiredCertificateCount:Lt}}=te(),Pt=[{content:"申请证书",dropdownClass:"bg-white",splitButton:!0,active:!0,event:()=>{if(!Ot.value)return He(),!1;qt()}}],qt=()=>{l({isAsync:!0,title:"购买宝塔证书",area:[79],component:()=>n(()=>import("./index408.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})},Ht=()=>{ze({title:"宝塔证书需求反馈收集",type:28,isNoRate:!0,softName:"1",isCard:!1,id:1e3})},Ut=async e=>{const{p:t,limit:a,search:s}=e;try{const{data:e}=await me({url:"/api/v1/ssl/get_order_list",p:t,limit:a,search:s,status:Mt.value,product_id:At.value}),{data:l}=e;return Vt.value=l.count_will_expire||0,Lt.value=l.count_expired||0,l?{data:l.data,total:l.count}:{data:[],total:0,other:{}}}catch(l){return{data:[],total:0,other:{}}}},zt={class:"flex items-center"},Ft={class:"flex items-center ml-[12px]"},Gt={class:"flex items-center"};function Jt(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!Y(e)}const Xt=x({__name:"index",setup(e){const{mainHeight:t}=s(),{activeTabs:a,btIsRefresh:l,btSearchType:n,btCertProductId:i}=b(ye()),{BtTable:u,BtRefresh:c,refresh:d,BtPage:m,BtColumn:h,BtSearch:f}=o({request:Ut,columns:[{label:"域名",prop:"domain",render:e=>N("span",{class:"w-full whitespace-pre-line"},[e.cert_info?e.cert_info.domain:"--"])},{label:"证书类型",prop:"product_name",showOverflowTooltip:!0,isCustom:!0,renderHeader(){const e=[{title:"全部",key:""},{title:"单域名型",key:"1"},{title:"通配符型",key:"2"},{title:"单IP型",key:"3"}];return q("div",{class:"flex items-center flex-nowrap"},["",q(H,{onCommand:e=>{i.value=e,d()}},{default:()=>q("span",{class:"text-small flex items-center"},[[N("span",{class:"status-header-text"},[I("订单状态"),""===i.value?" (全部) ":"(".concat(e.find(e=>e.key===i.value).title,")")])],q("i",{class:"svgtofont-el-arrow-down "})]),dropdown:()=>{let t;return N(z,null,Jt(t=e.map(e=>N(U,{command:e.key},{default:()=>[e.title]})))?t:{default:()=>[t]})}})])}},{label:"到期时间",render:Pe,showOverflowTooltip:!0,isCustom:!0},{label:"状态",prop:"expire",showOverflowTooltip:!1,isCustom:!0,renderHeader(){const e=[{title:"全部",key:""},{title:"待完善资料",key:"0"},{title:"验证中",key:"1"},{title:"已签发",key:"2"},{title:"即将到期",key:"3"},{title:"已到期",key:"4"},{title:"异常",key:"-1"}];return q("div",{class:"flex items-center flex-nowrap"},["",q(H,{onCommand:e=>{n.value=e,d()}},{default:()=>q("span",{class:"text-small flex items-center"},[[N("span",{class:"status-header-text"},[I("订单状态"),""===n.value?" (全部) ":"(".concat(e.find(e=>e.key===n.value).title,")")])],q("i",{class:"svgtofont-el-arrow-down "})]),dropdown:()=>{let t;return N(z,null,Jt(t=e.map(e=>N(U,{command:e.key},{default:()=>[e.title]})))?t:{default:()=>[t]})}})])},render:e=>qe(e)},{label:"操作",prop:"ps",align:"right",render:e=>(e=>{var t;const a=(e,t)=>N("span",{class:"bt-link",onClick:t},[e]),s=[];if(0===e.status){const t=a("完善资料",()=>Me(e));s.push(t)}else{const l=null==(t=e.cert_info)?void 0:t.status;if(0===l){const t=a("验证",()=>Ae(e));s.push(t)}else if(1===l){const t=a("部署",()=>{e.title=e.product_name,e.type="bt",be(e)}),l=a("下载",()=>Ve(e)),n=a("查看",()=>Le(e));s.push(t),s.push(l),s.push(n)}}const l=[];return s.map((e,t)=>{l.push(e),t<s.length-1&&l.push(N(Xe,null,null))}),l})(e)}],extension:[g(),p(l)]});return D(()=>a.value,e=>{"bt"===e&&(l.value=!0)}),(e,a)=>{const s=se,l=v,n=r,i=$("BtTableCategory"),o=$("BtBatch"),d=ae;return j(),E("div",null,[N(d,null,{"header-left":S(()=>[T("div",zt,[N(s,{options:R(Pt)},null,8,["options"]),N(Oe,{placement:"right"},{default:S(()=>[T("div",Ft,[N(l,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),a[0]||(a[0]=T("span",{class:"bt-link"},"联系客服",-1))])]),_:1}),N(n,{class:"ml-[12px] flex items-center",onClick:R(Ht)},{default:S(()=>[...a[1]||(a[1]=[T("div",{class:"flex items-center"},[T("span",{class:"svgtofont-desired text-medium"}),T("span",null,"需求反馈")],-1)])]),_:1},8,["onClick"])])]),"header-right":S(()=>[T("div",Gt,[N(i,{class:"!w-[140px] mr-[10px]"}),N(R(f),{type:"bt-cert",placeholder:"请输入证书名称",class:"!w-[270px] mr-[10px]"}),N(R(c),{class:"mr-[10px]"}),N(R(h))])]),content:S(()=>[N(R(u),{"min-height":R(t)},null,8,["min-height"])]),"footer-left":S(()=>[N(o)]),"footer-right":S(()=>[N(R(m))]),_:1})])}}}),{otherIsRefresh:Yt}=b(ye()),Qt=k(!1),Wt=k(!1),Zt=k(null),Kt=k(null),$t=(e,t)=>{Wt.value=t,Zt.value=e,Qt.value=!0},ea=async(a,s,r,o)=>{const{label:u,value:c}=o;let d=[],p=[],m=[];r.value.forEach(e=>{void 0!==e.hash&&null!==e.hash?p.push(e.hash):void 0!==e.index&&null!==e.index?d.push(e.index):void 0!==e.oid&&null!==e.oid&&m.push(e.oid)});const h=async()=>{switch(c){case"download":return await ce({ssl_hash:p.join(","),index:d.join(","),oid:m.join(",")});case"delete":return await $t(r.value,!0)}};await l({title:"批量".concat(u,"证书"),area:46,component:()=>n(()=>import("./index125.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{resultTitle:"批量".concat(u,"证书"),resultData:r.value,resultColumn:[{label:"名称",prop:"title"},Fe()],autoTitle:"批量".concat(u,"证书")},showFooter:!0,onConfirm:async()=>{if("delete"===c)return void(await h());let a;a=i.load("正在批量".concat(u,"证书")),t({request:await h(),success(t){const{data:s,status:l}=t;if(l){let t=[],l=[];"download"===c?(s.url&&window.open(s.url,"_blank","noopener,noreferrer"),e(s.finish_list)&&s.finish_list.forEach(e=>{const a=JSON.parse(e.cert.info);t.push({name:a.issuer,status:e.status})}),l=[{label:"名称",prop:"name"},{label:"结果",render:e=>{let t="",a="";return e.status?(a="text-primary",t="下载成功"):(a="text-danger",t="下载失败"),q("span",{class:a},t)}}]):e(s.finish_list)&&(s.finish_list.forEach(e=>{t.push({name:e.name,status:e.status,msg:e.status?"删除成功":e.msg})}),l=[{label:"名称",prop:"name"},{label:"结果",render:e=>{let t=e.msg,a="";return a=e.status?"text-primary":"text-danger",q("span",{class:a},t)}}],Yt.value=!0),fe({resultTitle:"".concat(u,"证书"),resultData:t,resultColumn:l}),a&&a.close()}}})}})},ta={class:"flex items-center"},aa={class:"flex items-center ml-[12px]"},sa={class:"flex items-center"},la=x({__name:"index",setup(e,{expose:a}){const{refs:{tabActive:l,certificateParams:n,expiringCertificateCount:_,expiredCertificateCount:g,typeList:y}}=te(),{otherIsRefresh:x}=b(ye()),{mainHeight:w}=s(),k=[{content:"上传证书",dropdownClass:"bg-white",splitButton:!0,active:!0,event:()=>{Ie()}},{content:"从云端同步",dropdownClass:"bg-white",splitButton:!0,event:()=>{t({request:ve(),loading:"正在从云端同步证书，请稍后...",message:!0,success:e=>{e.status&&(Yt.value=!0)}})}}],C=L([]),D=()=>{Qt.value=!1},B=Je({key:"type",name:"证书分组",options:()=>[{label:"全部分组",value:"all"}],event:{get:async()=>{let e=[];return await t({request:ie(),data:Array,success:t=>{e=[{label:"全部分组",value:"all"},...t.map(e=>({label:e.name,value:String(e.group_id)}))]}}),y.value=e,e},add:e=>oe({name:e.name,group_id:Date.now()}),delete:e=>ue({group_id:e.id})},ignore:["0"],field:"name",showEdit:!1}),O=h([{label:"批量分组",value:"group",event:(e,t,a,s)=>_e(a.value,"certificate")},{label:"批量设置告警",value:"alarm",event:(e,t,a,s)=>{De(a.value,je.OTHER)}},{label:"下载",value:"download",event:ea},{label:"删除",value:"delete",event:ea}]),{BtTable:M,BtPage:A,BtRefresh:V,BtTableCategory:P,BtRecommendSearch:q,BtColumn:H,BtBatch:U,BtErrorMask:z,refresh:Y}=o({request:async e=>{let t={p:e.p,group_id:u(e.type)||"all"===e.type?"-1":e.type,search:e.search,limit:e.limit,status_id:n.value.status_id,cert_type:"4"};"-1"===t.group_id&&delete t.group_id,"-1"===t.status_id&&delete t.status_id,""===t.search&&delete t.search;const{data:a}=await de(t);C.value=a.data;const s=c(a);return s("will_num")&&(_.value=(null==a?void 0:a.will_num)||0),s("end_num")&&(g.value=(null==a?void 0:a.end_num)||0),{data:a.data,total:d(a.page),other:{search_history:a.search_history}}},columns:[Ge(),{label:"认证域名",render:e=>{var t;return(null==(t=e.domainName)?void 0:t.join(", "))||"--"}},{label:"证书类型",prop:"title",showOverflowTooltip:!0,width:180},{label:"部署网站",isCustom:!0,render:e=>{var t;return(null==(t=e.use_site)?void 0:t.join(", "))||"--"}},{label:"分组",prop:"group_name",width:100,showOverflowTooltip:!0,isCustom:!1},{label:"到期时间",isCustom:!0,render:e=>{var t,a;const s=(e,t)=>N("span",{class:e<=10?"text-danger":t},[e>0?"剩余".concat(e,"天"):"已过期"]),l=(n=e.endDay)<=0||n<=7?"text-danger":n<=15?"text-warning":"text-primary";var n;return"1"===e.type?e.endDate?s(e.endDay,e.endDay<=30?"text-warning":l):N("span",null,[I("--")]):"2"===e.type?(null==e?void 0:e.endDay)&&0!==(null==e?void 0:e.endDay)?s(e.endDay,e.endDay<=30?"text-warning":l):N("span",null,[I("--")]):N("span",{class:(null==(t=e.domainName)?void 0:t.length)?l:"text-default"},[(null==(a=e.domainName)?void 0:a.length)?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--"])}},{label:"操作",align:"right",fixed:"right",width:280,render:e=>{const a=(e,t)=>N("span",{class:"cursor-pointer bt-link",onClick:t},[e]),s=[];return e.endDay>0&&(s.push(a("部署",()=>be(e))),s.push(a("下载",()=>xe(e))),-1===e.cloud_id?s.push(a("上传云端",()=>(async e=>{let t;try{t=i.load("正在上传云端证书，请稍候..."),await he({ssl_id:e.id,ssl_hash:e.hash}),Yt.value=!0,t&&t.close()}catch(a){}finally{t&&t.close()}})(e))):s.push(a("从云端删除",()=>(async e=>{t({loading:"正在从云端删除证书，请稍后...",message:!0,request:await re({ssl_id:e.id,ssl_hash:e.hash,local:!1,cloud:!0}),success:e=>{e.status&&(Yt.value=!0)}})})(e))),Ne(e,je.OTHER)&&s.push(a("到期告警",()=>ge({...e,cancel:()=>{}})))),s.push(a("删除",()=>$t(e,!1))),s.map((e,t)=>N("div",null,[e,t<s.length-1&&N(F,{direction:"vertical"},null)]))}}],extension:[B,O,p(x),m("search",{name:"ssl",key:"get_cert_list",list:[],showRecommend:!1})]});return G(()=>{l.value=J().name}),a({init:Y}),(e,t)=>{const a=se,s=v,l=r,n=f,i=ae;return j(),E("div",null,[N(i,null,{"header-left":S(()=>[T("div",ta,[N(a,{options:k}),N(Oe,{placement:"right"},{default:S(()=>[T("div",aa,[N(s,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=T("span",{class:"bt-link"},"联系客服",-1))])]),_:1}),N(l,{class:"ml-[12px] flex items-center",onClick:R(Ee)},{default:S(()=>[...t[3]||(t[3]=[T("div",{class:"flex items-center"},[T("span",{class:"svgtofont-desired text-medium"}),T("span",null,"需求反馈")],-1)])]),_:1},8,["onClick"])])]),"header-right":S(()=>[T("div",sa,[N(R(P),{class:"!w-[140px] mr-[10px]"}),N(R(q),{type:"ssl-certificate",placeholder:"请输入证书名称",class:"!w-[270px] mr-[10px]"}),N(R(H))])]),content:S(()=>[N(R(M),{"min-height":R(w)},null,8,["min-height"])]),"footer-left":S(()=>[N(R(U))]),"footer-right":S(()=>[N(R(A))]),popup:S(()=>[N(n,{title:"证书删除确认",modelValue:R(Qt),"onUpdate:modelValue":t[0]||(t[0]=e=>X(Qt)?Qt.value=e:null),area:["auto"],onCancel:t[1]||(t[1]=e=>R(Kt).handleCancel())},{default:S(()=>[N($e,{ref_key:"delRef",ref:Kt,delType:"other",isMulti:R(Wt),compData:R(Zt),onCancel:D},null,8,["isMulti","compData"])]),_:1},8,["modelValue"])]),_:1})])}}}),na={class:"text-base"},ra=x({__name:"index",setup(e){const{activeTabs:t}=b(ye()),{refs:{expiringCertificateCount:a,expiredCertificateCount:s}}=te(),l=k([{label:"宝塔证书",name:"bt",render:()=>N(Xt,null,null)},{label:"商用SSL",name:"ssl",lazy:!0,render:()=>N(bt,null,null)},{label:"Let's Encrypt",name:"encrypt",lazy:!0,render:()=>N(St,null,null)},{label:"其他证书",name:"other",lazy:!0,render:()=>N(la,null,null)}]);return(e,n)=>{const r=ee,i=y;return j(),E("div",null,[N(r,{type:"warning",class:"!mb-[1.2rem] !p-[1.2rem]",closable:!1,"show-icon":""},{title:S(()=>[T("span",na,[T("span",null," 提示：即将到期证书 "+B(R(a))+" 个，已过期证书 "+B(R(s))+" 个",1)])]),_:1}),N(i,{type:"card",modelValue:R(t),"onUpdate:modelValue":n[0]||(n[0]=e=>X(t)?t.value=e:null),options:R(l)},null,8,["modelValue","options"])])}}});export{ra as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
