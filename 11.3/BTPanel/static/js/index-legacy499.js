!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function u(e,a,i,o){var u=a&&a.prototype instanceof s?a:s,l=Object.create(u.prototype);return t(l,"_invoke",function(e,t,a){var i,o,u,s=0,l=a||[],p=!1,f={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(e,t){return i=e,o=0,u=n,f.n=t,c}};function m(e,t){for(o=e,u=t,r=0;!p&&s&&!a&&r<l.length;r++){var a,i=l[r],m=f.p,v=i[2];e>3?(a=v===t)&&(u=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=n):i[0]<=m&&((a=e<2&&m<i[1])?(o=0,f.v=t,f.n=i[1]):m<v&&(a=e<3||i[0]>t||t>v)&&(i[4]=e,i[5]=t,f.n=v,o=0))}if(a||e>1)return c;throw p=!0,t}return function(a,l,v){if(s>1)throw TypeError("Generator is already running");for(p&&1===l&&m(l,v),o=l,u=v;(r=o<2?n:u)||!p;){i||(o?o<3?(o>1&&(f.n=-1),m(o,u)):f.n=u:f.v=u);try{if(s=2,i){if(o||(a="next"),r=i[a]){if(!(r=r.call(i,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,o<2&&(o=0)}else 1===o&&(r=i.return)&&r.call(i),o<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=n}else if((r=(p=f.n<0)?u:e.call(t,f))!==c)break}catch(r){i=n,o=1,u=r}finally{s=1}}return{value:r,done:p}}}(e,i,o),!0),l}var c={};function s(){}function l(){}function p(){}r=Object.getPrototypeOf;var f=[][i]?r(r([][i]())):(t(r={},i,function(){return this}),r),m=p.prototype=s.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,t(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return l.prototype=p,t(m,"constructor",p),t(p,"constructor",l),l.displayName="GeneratorFunction",t(p,o,"GeneratorFunction"),t(m),t(m,o,"Generator"),t(m,i,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:u,m:v}})()}function t(e,n,r,a){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}t=function(e,n,r,a){function o(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?i?i(e,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[n]=r:(o("next",0),o("throw",1),o("return",2))},t(e,n,r,a)}function n(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(a,i){var o=e.apply(t,r);function u(e){n(o,a,i,u,c,"next",e)}function c(e){n(o,a,i,u,c,"throw",e)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792"],function(t,n){"use strict";var a,i,o,u,c,s,l,p,f,m,v,g,y,h,d,b,_,w,k,j,x,z,L,P,G,O,q,E,B;return{setters:[function(e){a=e.Q,i=e.n,o=e.H,u=e.y,c=e.b,s=e.p,l=e.aj},function(e){p=e.r,f=e.o,m=e.c,v=e.w,g=e.x,y=e.O,h=e.z},function(e){d=e.proxyGetGlobal,b=e.proxyGlobalCompress,_=e.proxyGlobalAddLimit,w=e.proxyGlobalSetLogs,k=e.proxyGlobalSetWebsocket,j=e.proxyGlobalDelBasic,x=e.proxyGlobalEditBasic,z=e.proxyGlobalAddBasic,L=e.proxyGlobalBatchDelLimit,P=e.proxyGlobalDelLimit},function(e){G=e.a,O=e.u,q=e.c},function(e){E=e.f},function(e){B=e.u}],execute:function(){var I=c(),S=B().siteInfo,T=t("t",p("compress")),A=t("g",p({site_name:"",domain_list:[],site_port:[],port_conf:"",ssl_port_conf:"",site_path:"",ssl_info:{},err_age_404:"",err_age_502:"",ip_limit:{ip_black:[],ip_white:[]},basic_auth:[],proxy_cache:{},gzip:{},sub_filter:{},websocket:{},security:{},redirect:{},proxy_log:{},http_block:"",server_block:"",remark:"",proxy_info:[]})),C=function(){var t=r(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({site_name:S.value.name});case 1:if((n=e.v).status){e.n=2;break}return I.error(n.msg),e.a(2);case 2:A.value=n.data;case 3:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),D=(t("f",p(!1)),t("d",p(!1)));p(),f({status:!1,time:"",unit:"m"});var N,F=t("a",p()),H=t("c",f({status:!1,type:"",level:1,minLength:"",unit:"m"})),W=(t("l",[{label:"k",value:"k"},{label:"m",value:"m"}]),t("e",[{content:"用于对 HTTP 响应的内容进行压缩，以减少数据传输量，提高网站性能和加载速度"},{content:"压缩级别1-9，例如：1为压缩速度最快，但压缩率较低；9为压缩速度最慢，但压缩率最高，建议默认"},{content:"如果开启gzip后影响网站正常访问，请关闭此功能 和请求参数组成"}]),t("b",{type:[{required:!0,message:"请输入压缩类型",trigger:["blur","change"]}],minLength:[{required:!0,message:"请输入正确的压缩最小长度",trigger:"blur",validator:function(e,t,n){t?isNaN(Number(t))?n(new Error("请输入数字")):Number(t)<1?n(new Error("请输入正确数字")):n():n(new Error("压缩最小长度不能为空"))}},{}]}),t("s",function(e){H.status=e.gzip_status,H.type=e.gzip_types,H.level=e.gzip_comp_level;var t="",n="m";e.gzip_min_length&&e.gzip_min_length.length>1&&(t=e.gzip_min_length.slice(0,-1),n=e.gzip_min_length.slice(-1)),H.minLength=t,H.unit=n}),t("o",r(e().m(function t(){var n,r;return e().w(function(e){for(;;)switch(e.n){case 0:return n={site_name:S.value.name,gzip_status:H.status?1:0,gzip_min_length:"".concat(H.minLength).concat(H.unit),gzip_comp_level:H.level,gzip_types:H.type},e.n=1,F.value.validate();case 1:return e.n=2,a({loading:D,request:b(n),message:!0});case 2:return r=e.v,e.a(2,r.status)}},t)}))),t("m",f({loading:!1,type:"black",white:[],black:[]}))),M=(t("h",p()),t("i",p()),t("k",function(e){W.type="ipBlackList"===T.value?"black":"white",W.white=e.ip_white.map(function(e){return{ip:e,type:"white"}}),W.black=e.ip_black.map(function(e){return{ip:e,type:"black"}})}),function(){var t=r(e().m(function t(n){var r,i,o;return e().w(function(e){for(;;)switch(e.n){case 0:return r=!!Array.isArray(n),e.n=1,s({title:"".concat(r?"批量删除IP":"删除".concat("white"===n.type?"白名单":"黑名单","【").concat(n.ip,"】")),content:r?"批量删除选中的IP，是否继续操作？":"删除".concat("white"===n.type?"白名单":"黑名单","【").concat(n.ip,"】，是否继续操作？")});case 1:return i={site_name:S.value.name},r?(i.ip_type="ipBlackList"===T.value?"black":"white",i.ips=n.map(function(e){return e.ip}).join("\n")):(i.ip_type=n.type,i.ip=n.ip),o=r?L:P,e.n=2,a({loading:"正在删除，请稍后...",request:o(i),message:!0});case 2:e.v.status&&C();case 3:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),Q=(t("n",p([G({key:"ip"}),{label:"IP",prop:"ip",minWidth:120},O([{title:"删除",onClick:function(e){M(e)}}])])),t("T",[{label:"删除IP",value:"delete",event:(N=r(e().m(function t(n,a,i,o,u){var c;return e().w(function(t){for(;;)switch(t.n){case 0:return c=function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,P({site_name:S.value.name,ip:n.ip,ip_type:"ipBlackList"===T.value?"black":"white"});case 1:return e.a(2,e.v)}},t)}));return function(e){return t.apply(this,arguments)}}(),t.n=1,n({title:"批量删除",content:"批量删除选中的ip，是否继续操作？",column:[{prop:"ip",label:"IP"},q()],onConfirm:function(){var t=r(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a(c);case 1:return C(),e.a(2,!1)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)})),function(e,t,n,r,a){return N.apply(this,arguments)})}]),t("j",function(){Q.value.address="",i({isAsync:!0,title:"添加IP".concat("ipBlackList"===T.value?"黑":"白","名单"),area:40,btn:"确认",component:function(){return o(function(){return n.import("./add-ip-legacy2.js?v=1763689792")},void 0,n.meta.url)},compData:{listType:W.type,refreshEvent:function(){C()}}})}),t("H",p({types:W.type,address:""}))),J=(t("I",[{content:"一行一条配置，多个IP请换行"}]),t("J",p()),t("K",{address:[{validator:function(e,t,n){t.length>0?n():n(new Error("请输入IP地址"))},trigger:["blur","change"]}]}),t("G",r(e().m(function t(){var n,r,i;return e().w(function(e){for(;;)switch(e.n){case 0:return n=Q.value.address,r={site_name:S.value.name,ip_type:"ipBlackList"===T.value?"black":"white",ips:n},e.n=1,a({loading:D,request:_(r),message:!0});case 1:return(i=e.v).status&&C(),e.a(2,i.status)}},t)}))),t("q",p([]))),K=t("u",function(e){U.value=e||!1,i({isAsync:!0,title:"".concat(e?"编辑":"添加","http认证").concat(e?"【".concat(e.auth_name,"】"):""),area:48,btn:"确认",component:function(){return o(function(){return n.import("./http-auth-add-legacy2.js?v=1763689792")},void 0,n.meta.url)},compData:{refreshEvent:C,proxy_info:A.value.proxy_info,isEdit:!!e,row:e}})}),R=function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,s({title:"删除http认证【".concat(n.auth_name,"】"),content:"删除http认证【".concat(n.auth_name,"】，是否继续操作？")});case 1:return e.n=2,a({loading:"正在删除http认证，请稍候...",request:j({site_name:S.value.name,auth_path:n.auth_path,name:n.auth_name}),message:!0});case 2:e.v.status&&C();case 3:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),U=(t("r",p([{label:"名称",prop:"auth_name"},{label:"路径",prop:"auth_path"},O([{onClick:K,title:"编辑"},{onClick:R,title:"删除"}])])),t("p",function(e){J.value=e||[]}),t("O",p())),V=t("N",p({name:u(5),path:"",user:"",password:""})),X=(t("Q",[{content:"例如我设置了加密访问/test/,那我访问http://aaa.com/test/时就要输入账号密码才能访问"}]),t("R",p())),Y=(t("S",{name:[{required:!0,message:"请输入名称",trigger:["blur","change"]}],path:[{required:!0,message:"请输入路径",trigger:["blur","change"]}],user:[{required:!0,message:"请输入用户名",trigger:["blur","change"]}],password:[{required:!0,message:"请输入密码",trigger:["blur","change"]}]}),t("P",function(e,t){var n=A.value.proxy_info.map(function(e){return{value:e.proxy_path}});t(e?n.filter(function(t){return t.value.includes(e)}):n)}),t("M",r(e().m(function t(){var n,r,i,o;return e().w(function(e){for(;;)switch(e.n){case 0:return n=V.value,e.n=1,X.value.validate();case 1:return r={site_name:S.value.name,auth_path:n.path,username:n.user,password:n.password,name:n.name},i=U.value?x:z,e.n=2,a({loading:D,request:i(r)});case 2:return(o=e.v).status&&C(),e.a(2,o.status)}},t)}))),t("L",function(){Object.assign(V.value,{name:U.value?U.value.auth_name:u(5),path:U.value?U.value.auth_path:"",user:"",password:""})}),t("A",p())),Z=t("x",f({type:"default",accessLog:"",address:"",port:"514"})),$=(t("B",{accessLog:[{validator:function(e,t,n){"file"!==Z.type||t?n():n(new Error("请选择日志目录"))},trigger:["blur","change"]}],address:[{validator:function(e,t,n){"rsyslog"!==Z.type||t?n():n(new Error("请输入接收地址"))},trigger:["blur","change"]}]}),t("C",[{content:"指定目录可选择自定义的日志存储目录，请注意此目录必须www用户可写"},{content:"发送到远程服务器设置之后本地不会保存日志内容，填写前请确保日志接收端可正常访问"}]),t("y",[{label:"默认",value:"default"},{label:"不记录日志",value:"off"},{label:"指定目录",value:"file"},{label:"发送到远程服务器",value:"rsyslog"}]),t("z",function(e){E({type:"dir",path:"/www/wwwroot",change:function(e){Z.accessLog=e}})}),t("v",function(e){e?(Z.type=e.log_type,Z.accessLog=e.log_path,Z.address=e.rsyslog_host):Z.type="default"}),t("w",r(e().m(function t(){var n,r;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Y.value.validate();case 1:return n={site_name:S.value.name,log_type:Z.type,log_path:"file"==Z.type?Z.accessLog:Z.address},e.n=2,a({loading:D,request:w(n),message:!0});case 2:return r=e.v,e.a(2,r.status)}},t)}))),t("E",f({websocket:!1}))),ee=(t("F",function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:D,request:k({site_name:S.value.name,websocket_status:n?1:0}),message:!0});case 1:e.v.status||($.websocket=!n);case 2:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),t("D",function(e){$.websocket=!!e&&e.websocket_status}),m({__name:"index",setup:function(e){var t=l({type:"card",value:T,options:[{label:"内容压缩",name:"compress",lazy:!0,render:function(){return o(function(){return n.import("./content-compression-legacy.js?v=1763689792")},void 0,n.meta.url)}},{label:"IP黑名单",name:"ipBlackList",lazy:!0,render:function(){return o(function(){return n.import("./ip-list-legacy.js?v=1763689792")},void 0,n.meta.url)}},{label:"IP白名单",name:"ipWhiteList",lazy:!0,render:function(){return o(function(){return n.import("./ip-list-legacy.js?v=1763689792")},void 0,n.meta.url)}},{label:"http认证",name:"basicauth",lazy:!0,render:function(){return o(function(){return n.import("./http-auth-legacy.js?v=1763689792")},void 0,n.meta.url)}},{label:"日志",name:"siteLogs",lazy:!0,render:function(){return o(function(){return n.import("./log-legacy.js?v=1763689792")},void 0,n.meta.url)}},{label:"websocket",name:"websocket",lazy:!0,render:function(){return o(function(){return n.import("./websocket-legacy.js?v=1763689792")},void 0,n.meta.url)}}]}).BtTabs;return v(function(){return T.value},function(e){C()}),C(),function(e,n){return g(),y(h(t))}}})),te=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));t("U",te)}}})}();
