import{hC as e,k as a,p as t,n as l,h_ as s,h$ as o,b as r,i0 as n,d as c,N as i,bE as u,e as p,bM as d}from"./utils-lib.js?v=1763689792";import{_ as f}from"./version-compare.vue_vue_type_script_setup_true_lang.js?v=1763689792";import{c as m,x as v,y as _,A as x,e as C,z as y,v as k,C as w,D as b,B as P,L as I,R as g}from"./base-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const V={class:"p-[20px] flex"},S={class:"flex-1 flex flex-col mr-[15px]"},h={class:"flex-1 flex flex-col"},j=m({__name:"index",setup(t){const{certInfo:l}=e();return(e,t)=>{const s=a;return v(),_("div",V,[x("div",S,[t[2]||(t[2]=x("span",{class:"mb-[5px]"},"密钥 (KEY)",-1)),C(s,{type:"textarea",rows:16,modelValue:y(l).private_key,"onUpdate:modelValue":t[0]||(t[0]=e=>y(l).private_key=e),class:"w-full"},null,8,["modelValue"])]),x("div",h,[t[3]||(t[3]=x("span",{class:"mb-[5px]"},"证书 (CRT/PEM)",-1)),C(s,{type:"textarea",rows:16,modelValue:y(l).certificate,"onUpdate:modelValue":t[1]||(t[1]=e=>y(l).certificate=e),class:"w-full"},null,8,["modelValue"])])])}}}),{request:E,error:L}=r(),{getInfo:M,hasCert:R,serverIP:U,serverProtocol:q,serverPort:z,certInfo:A,getCertInfo:B}=e(),D=new Map([["start","启动"],["stop","停止"],["reload","重载"],["restart","重启"]]),F=e=>{const a=D.get(e)||"";t({title:"".concat(a,"服务"),content:"是否".concat(a,"虚拟主机服务，是否继续？"),onConfirm:async()=>{const a=await n(e);await E(a),M()}})},H=async()=>{R.value?l({title:"设置SSL证书",area:70,component:j,showFooter:!0,onOpen:()=>{B()},onConfirm:async()=>{const{certificate:e,private_key:a}=A.value,t=await s(e,a);await E(t)}}):L("请先上传证书")},K=async()=>{if(""===U.value)return void L("Please enter the server IP");const e=await o(U.value);await E(e)},N=()=>{window.open("".concat(q.value,"://").concat(U.value).concat(z.value,"/account/login"),"_blank","noopener,noreferrer")},O={class:""},T={class:"ml-[100px] mt-[2px]"},Y=m({__name:"index",setup(t){const{isServerRunning:l,serverIP:s,serverProtocol:o,serverPort:r,resetServerEvent:n,getServerIP:m,getCertInfo:V}=e();return k(()=>{V(),m()}),(e,t)=>{const m=c,k=i,V=u,S=a,h=p,j=d;return v(),_("div",O,[C(f),C(j,{class:"my-[16px]"},{default:w(()=>[C(V,{label:"服务状态"},{default:w(()=>[x("div",{class:I(["mr-[8px] text-secondary flex items-center",y(l).color])},[b(P(y(l).tips),1),C(m,{icon:"icon-".concat(y(l).icon),class:I(["mr-[4px]",y(l).color])},null,8,["icon","class"])],2),C(k,{onClick:t[0]||(t[0]=e=>y(F)(y(l).type))},{default:w(()=>[b(P(y(l).text),1)]),_:1}),C(k,{onClick:t[1]||(t[1]=e=>y(F)("restart"))},{default:w(()=>[...t[4]||(t[4]=[b("重启",-1)])]),_:1}),C(k,{onClick:t[2]||(t[2]=e=>y(F)("reload"))},{default:w(()=>[...t[5]||(t[5]=[b("重载",-1)])]),_:1})]),_:1}),C(V,{label:"证书SSL"},{default:w(()=>[C(k,{type:"primary",onClick:y(H)},{default:w(()=>[...t[6]||(t[6]=[b("修改",-1)])]),_:1},8,["onClick"])]),_:1}),C(V,{label:"IP地址"},{default:w(()=>[C(S,{modelValue:y(s),"onUpdate:modelValue":t[3]||(t[3]=e=>g(s)?s.value=e:null),class:"mr-[10px] w-[250px]"},null,8,["modelValue"]),C(k,{onClick:y(K),type:"primary"},{default:w(()=>[...t[7]||(t[7]=[b("修改",-1)])]),_:1},8,["onClick"]),C(k,{onClick:y(n)},{default:w(()=>[...t[8]||(t[8]=[b("重置",-1)])]),_:1},8,["onClick"])]),_:1}),x("p",T,[t[9]||(t[9]=x("span",{class:"mr-[4px]"},"访问地址:",-1)),C(h,{onClick:y(N)},{default:w(()=>[b(P("".concat(y(o),"://").concat(y(s)).concat(y(r),"/account/login")),1)]),_:1},8,["onClick"])])]),_:1})])}}});export{Y as default};
