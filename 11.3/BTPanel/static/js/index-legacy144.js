!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function l(n,r,a,l){var o=r&&r.prototype instanceof c?r:c,s=Object.create(o.prototype);return u(s,"_invoke",function(n,r,a){var l,o,u,c=0,s=a||[],f=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return l=t,o=0,u=e,p.n=n,i}};function v(n,r){for(o=n,u=r,t=0;!f&&c&&!a&&t<s.length;t++){var a,l=s[t],v=p.p,m=l[2];n>3?(a=m===r)&&(u=l[(o=l[4])?5:(o=3,3)],l[4]=l[5]=e):l[0]<=v&&((a=n<2&&v<l[1])?(o=0,p.v=r,p.n=l[1]):v<m&&(a=n<3||l[0]>r||r>m)&&(l[4]=n,l[5]=r,p.n=m,o=0))}if(a||n>1)return i;throw f=!0,r}return function(a,s,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,m),o=s,u=m;(t=o<2?e:u)||!f;){l||(o?o<3?(o>1&&(p.n=-1),v(o,u)):p.n=u:p.v=u);try{if(c=2,l){if(o||(a="next"),t=l[a]){if(!(t=t.call(l,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,o<2&&(o=0)}else 1===o&&(t=l.return)&&t.call(l),o<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),o=1);l=e}else if((t=(f=p.n<0)?u:n.call(r,p))!==i)break}catch(t){l=e,o=1,u=t}finally{c=1}}return{value:t,done:f}}}(n,a,l),!0),s}var i={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(u(t={},r,function(){return this}),t),v=f.prototype=c.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=f,u(v,"constructor",f),u(f,"constructor",s),s.displayName="GeneratorFunction",u(f,a,"GeneratorFunction"),u(v),u(v,a,"Generator"),u(v,r,function(){return this}),u(v,"toString",function(){return"[object Generator]"}),(o=function(){return{w:l,m:m}})()}function u(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,t,n,r){function l(t,n){u(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(l("next",0),l("throw",1),l("return",2))},u(e,t,n,r)}function i(e,t,n,r,a,l,o){try{var u=e[l](o),i=u.value}catch(e){return void n(e)}u.done?t(i):Promise.resolve(i).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var l=e.apply(t,n);function o(e){i(l,r,a,o,u,"next",e)}function u(e){i(l,r,a,o,u,"throw",e)}o(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./index-legacy119.js?v=1763689792","./index-legacy109.js?v=1763689792","./index-legacy118.js?v=1763689792","./index-legacy130.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./database-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./ace-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792"],function(e,n){"use strict";var r,u,i,s,f,p,v,m,d,h,y,b,g,w,_,k,x,j,O,S,q,P,C,T,D,A,E,I,F,G,V,U,z,L,H,M,B,N,R,W,J,K,Q,Y,$,X;return{setters:[function(e){r=e.E,u=e.az,i=e.n,s=e.H,f=e.b6,p=e.Q,v=e.aA,m=e.M,d=e.f,h=e.P,y=e.l,b=e.ah,g=e.p,w=e._},function(e){_=e.B},function(e){k=e._},function(e){x=e._},function(e){j=e._},function(e){O=e.c,S=e.r,q=e.v,P=e.I,C=e.x,T=e.y,D=e.A,A=e.F,E=e.b1,I=e.L,F=e.z,G=e.e,V=e.B,U=e.C,z=e.D,L=e.G,H=e.O,M=e.J,B=e.H,N=e.ay},function(e){R=e.getSqliteTableList,W=e.getSqliteKeys,J=e.getSqliteTableInfo,K=e.querySql,Q=e.deleteTableData},function(e){Y=e.a,$=e.u,X=e.c},null,null,null],execute:function(){var Z={class:"flex w-full h-full"},ee={class:"man_l"},te={class:"man_db"},ne={class:"man_db_li"},re={class:"man_db_li_left"},ae=["title"],le={class:"cursor-pointer ml-8px"},oe={class:"man_t"},ue=["onClick"],ie=["onClick"],ce={class:"flex items-center"},se={class:"inline-block max-w-[14rem] truncate"},fe={class:"man_r"},pe={key:0,class:"flex items-center justify-center h-full"},ve=["onClick"],me={class:"ul-item"},de={class:"flex-1 flex items-center"},he=["onClick"],ye={key:1,class:"nq_con"},be={class:"p-[1.5rem]"},ge={class:"mt-[1rem]"},we={key:0,class:"result_table table",border:"1"},_e={key:1,class:"text-danger"},ke=O({__name:"index",props:{compData:{default:{}}},setup:function(e){var w,O=e,ke=S(),xe=S(),je=S(!0),Oe=S(0),Se=S(""),qe=S(!1),Pe=S(!0),Ce=S({p:1,limit:10,total:0,search:"",data:[],path:"",table:"",emptyText:"暂无数据，您可以添加数据"}),Te=S({}),De=S([]),Ae=S([]),Ee={mode:"ace/mode/nginx",theme:r.value?"ace/theme/clouds_midnight":"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},Ie=function(e){i({title:"更改数据【"+e.id+"】",component:function(){return s(function(){return n.import("./insert-data-legacy.js?v=1763689792")},void 0,n.meta.url)},area:48,compData:{keys:Ae.value,row:e,path:Ce.value.path,table:Ce.value.table,refresh:Be},showFooter:!0})},Fe=function(){var e=c(o().m(function e(t){var n;return o().w(function(e){for(;;)switch(e.n){case 0:return n=Ae.value.find(function(e){return 1===e.pk}).name,e.n=1,g({title:"删除表数据 [ "+t[n]+" ]",content:"删除选中表【"+Ce.value.table+"】的数据后，该条数据将彻底消失，是否继续操作？"});case 1:return e.n=2,p({loading:"正在删除表数据，请稍后...",request:Q({path:Ce.value.path,table:Ce.value.table,where_data:t}),message:!0});case 2:Be();case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ge=S(),Ve=function(){i({title:"添加数据",component:function(){return s(function(){return n.import("./insert-data-legacy.js?v=1763689792")},void 0,n.meta.url)},area:48,compData:{keys:Ae.value,path:Ce.value.path,table:Ce.value.table,refresh:Ue},showFooter:!0})},Ue=function(){Be(),ze(O.compData.path,!0)},ze=function(){var e=c(o().m(function e(t,n){var r,u,i;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,Te.value[t]&&!n){e.n=2;break}return e.n=1,R({path:t});case 1:r=e.v,u=r.data,Te.value=a(a({},Te.value),{},l({},t,u)),!n&&u.length>0&&Le({path:t,name:u[0].name}),e.n=3;break;case 2:(null===(i=Te.value[t])||void 0===i?void 0:i.length)>0&&Le({path:t,name:Te.value[t][0].name});case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t,n){return e.apply(this,arguments)}}(),Le=function(e){var t=e.name,n=e.path;if(je.value=!1,"sql"===t){var r=f(8);return Pe.value=!1,De.value.push({name:"新建查询",path:"nq_con_"+r,sql:"",status:0,queryPath:n}),void(Se.value="nq_con_"+r)}Pe.value=!0,De.value.find(function(e){return e.path===n&&e.name===t})||De.value.push({name:t,path:n}),He(e)},He=function(e){var t=e.name,n=e.path;je.value=!1,"新建查询"===t?Se.value=n:(Pe.value=!0,Me(e))},Me=function(){var e=c(o().m(function e(t){var n,r,a,l,u;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=t.path,r=t.name,e.n=1,W({path:n,table:r});case 1:a=e.v,l=a.data,Ae.value=l,u=[],l.forEach(function(e){return u.push({label:e.name,prop:e.name,showOverflowTooltip:!0})}),Ge.value=[Y({key:u[0].prop})].concat(u,[$([{onClick:Ie,title:"更改"},{onClick:Fe,title:"删除"}])]),Ce.value.path=n,Ce.value.table=r,Be(),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=c(o().m(function e(){var t,n;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Se.value=Ce.value.table,e.n=1,p({loading:qe,request:J({path:Ce.value.path,table:Ce.value.table,p:Ce.value.p,search:Ce.value.search})});case 1:t=e.v,n=t.data,Ce.value.data=u(n.data)?[]:n.data,Ce.value.emptyText=u(n.data)?n.data:"暂无数据，您可以添加数据",Ce.value.total=v(n.page),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=c(o().m(function e(t){var n,r;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t.status=1,!t.sql){e.n=2;break}return e.n=1,K({path:t.queryPath,sql_shell:t.sql});case 1:n=e.v,r=n.data,t.result=r.status?r.list:r.msg,e.n=3;break;case 2:t.result="请输入sql语句查询";case 3:t.status=2,e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),Re=function(e){e.deltaY>0?xe.value.scrollLeft+=100:xe.value.scrollLeft-=100},We=function(){var e=c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ze(O.compData.path,!0);case 1:m.success("刷新成功");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Be();case 1:m.success("刷新成功");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ke=[{label:"删除数据",value:"delete",event:(w=c(o().m(function e(t,n,r,a){var l,u;return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t({title:"批量删除备份文件",content:"批量删除已选备份文件，是否继续操作？",column:[{prop:null===(l=Ge.value[1])||void 0===l?void 0:l.prop,label:null===(u=Ge.value[1])||void 0===u?void 0:u.label},X()],onConfirm:function(){var e=c(o().m(function e(){return o().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n(function(e){return Q({path:Ce.value.path,table:Ce.value.table,where_data:e})});case 1:return Ue(),e.a(2,!1)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,t,n,r){return w.apply(this,arguments)})}];return q(function(){var e=O.compData,t=e.list,n=e.path;Oe.value=t.findIndex(function(e){return e.path===n})||0,ze(n)}),function(n,r){var a=d,l=B,o=N,i=h,c=j,s=y,f=b,p=x,v=k,m=_,g=P("bt-loading");return C(),T("div",Z,[D("div",ee,[D("ul",te,[(C(!0),T(A,null,E(e.compData.list,function(n,o){return C(),T(A,null,[n.path===e.compData.path?(C(),T("li",{key:o,class:I(o===F(Oe)?"active":"")},[D("div",ne,[D("div",re,[G(a,{src:"/database/database-icon.png",class:"w-[1.4rem] h-[1.4rem] mr-[4px] ml-[8px]"}),D("span",{title:n.name},V(n.name),9,ae)]),D("div",le,[G(l,{size:"small",onClick:We},{default:U(function(){return t(r[3]||(r[3]=[D("i",{class:"svgtofont-el-refresh-right mr-4px"},null,-1),z(" 刷新 ",-1)]))}),_:1})])]),D("ul",oe,[D("li",{class:I(["new_query flex items-center",-1!==F(Se).indexOf("nq_con_")?"active":""]),onClick:function(e){return Le({path:n.path,name:"sql"})}},[G(a,{src:"/database/select-icon.png",class:"w-[1.4rem] mr-[4px] align-text-bottom"}),r[4]||(r[4]=D("span",null,"新建查询",-1))],10,ue),(C(!0),T(A,null,E(F(Te)[n.path],function(e,t){return C(),T("li",{class:I(["flex items-center",e.name===F(Se)?"active":""]),key:t,onClick:function(t){return Le({path:n.path,name:e.name})}},[G(a,{src:"/database/table-icon.png",class:"w-[1.4rem] mr-[4px] align-text-bottom"}),D("span",ce,[D("span",se,V(e.name),1),z(" "+V("（"+e.count+"）"),1)])],10,ie)}),128))])],2)):L("",!0)],64)}),256))])]),D("div",fe,[F(je)?(C(),T("div",pe,[G(o,{description:"请点击左侧表查看数据"})])):(C(),T(A,{key:1},[D("div",{ref_key:"scrollDiv",ref:xe,class:"ul_scroll",onWheel:Re},[D("ul",null,[(C(!0),T(A,null,E(F(De),function(e,t){return C(),T("li",{class:I(e.name===F(Se)||e.path===F(Se)?"active":""),key:t,onClick:function(t){return He(e)}},[D("div",me,[D("div",de,[G(a,{src:"新建查询"===e.name?"/database/select-icon.png":"/database/table-icon.png",class:"w-[1.4rem] h-[1.4rem] mr-[4px] align-middle text-small"},null,8,["src"]),D("span",null,V(e.name),1)]),D("i",{class:"svgtofont-el-close ml-[4px]",onClick:function(e){return function(e){De.value.splice(e,1),De.value.length?He(De.value[e]||De.value[e-1]):(je.value=!0,Pe.value=!1)}(t)}},null,8,he)])],10,ve)}),128))])],544),F(Pe)?(C(),H(v,{key:0,class:"p-[1.2rem]"},{"header-left":U(function(){return[G(l,{type:"primary",onClick:Ve},{default:U(function(){return t(r[5]||(r[5]=[z("添加数据",-1)]))}),_:1})]}),"header-right":U(function(){return[G(i,{class:"mr-4px",modelValue:F(Ce).search,"onUpdate:modelValue":r[0]||(r[0]=function(e){return F(Ce).search=e}),onSearch:Be,placeholder:"搜索所有字段"},null,8,["modelValue"]),G(c,{onRefresh:Je})]}),content:U(function(){return[M(G(s,{ref_key:"mangerTableRef",ref:ke,"max-height":480,column:F(Ge),data:F(Ce).data,description:F(Ce).emptyText},null,8,["column","data","description"]),[[g,F(qe)]])]}),"footer-left":U(function(){return[G(f,{"table-ref":F(ke),options:Ke},null,8,["table-ref"])]}),"footer-right":U(function(){return[G(p,{layout:"prev, pager, next,  total, jumper",type:"default",page:F(Ce).p,"onUpdate:page":r[1]||(r[1]=function(e){return F(Ce).p=e}),row:F(Ce).limit,"onUpdate:row":r[2]||(r[2]=function(e){return F(Ce).limit=e}),onChange:Be,total:F(Ce).total},null,8,["page","row","total"])]}),_:1})):(C(),T("div",ye,[(C(!0),T(A,null,E(F(De),function(e,t){return C(),T(A,null,["新建查询"===e.name?(C(),T("div",{key:t,class:I(e.path===F(Se)?"":"hidden")},[D("div",be,[G(m,{modelValue:e.sql,"onUpdate:modelValue":function(t){return e.sql=t},class:"!h-[21rem]","editor-option":Ee},null,8,["modelValue","onUpdate:modelValue"]),G(l,{type:"default",class:"!mt-[1rem]",onClick:function(t){return Ne(e)},disabled:1===e.status},{default:U(function(){return[z(V(1===e.status?"正在查询...":"运行"),1)]}),_:2},1032,["onClick","disabled"])]),D("div",{class:I(["run_result p-[1.5rem]",e.status?"":"hidden"])},[r[6]||(r[6]=D("span",{class:"text-base"},"查询结果：",-1)),D("div",ge,[F(u)(e.result)?(C(),T("div",_e,V(e.result),1)):(C(),T("table",we,[D("tbody",null,[(C(!0),T(A,null,E(e.result,function(e,t){return C(),T("tr",{key:t},[(C(!0),T(A,null,E(e,function(e,t){return C(),T("td",{key:t},V(e),1)}),128))])}),128))])]))])],2)],2)):L("",!0)],64)}),256))]))],64))])])}}});e("default",w(ke,[["__scopeId","data-v-0ffeebd9"]]))}}})}();
