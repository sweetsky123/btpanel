import{Q as a,aC as e,e as s,$ as l,b as t}from"./utils-lib.js?v=1763689792";import{c as n,r as o,g as u,v as r,I as i,J as m,z as d,x as c,y as p,e as v,R as f,A as y,D as g,C as b,G as j,H as x}from"./base-lib.js?v=1763689792";import{B as h}from"./index119.js?v=1763689792";import{u as _,S as C}from"./useStore4.js?v=1763689792";import{getConfigFile as w}from"./site.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./ace.js?v=1763689792";const V={class:"flex items-center justify-between my-[4px]"},k={key:0,class:"flex items-center"},S={class:"my-[12px]"},H=n({__name:"index",setup(n){const H=t(),{siteInfo:E}=_(),{getFileEvent:F,saveFileEvent:U}=C(),q=o(!1),z=o(!1),A=o(""),I=o([]),T=o(""),B=[{content:"此处为站点主配置文件,若您不了解配置规则,请勿随意修改."}],D=u(()=>I.value.find(a=>a.type===A.value)),G=async()=>{const a=await U({path:A.value,data:T.value,encoding:"utf-8"});H.msg({dangerouslyUseHTMLString:!0,message:a.msg,type:a.status?"success":"error",duration:a.status?2e3:0}),a.status&&J()},J=async(a=A.value)=>{z.value=!0;const e=await F({path:a});T.value=e.data.data,z.value=!1},L=a=>{A.value=a,J()};return r(()=>{a({loading:q,request:w({sitename:E.value.name}),success:a=>{I.value=[],Object.keys(a.data).forEach(e=>{I.value.push({label:e,lazy:!0,name:a.data[e],render:()=>v("span",null,null)})}),A.value=I.value[0].name,J()}})}),(a,t)=>{var n;const o=e,u=s,r=h,_=x,C=l,w=i("bt-loading");return m((c(),p("div",null,[v(o,{type:"card",modelValue:d(A),"onUpdate:modelValue":t[0]||(t[0]=a=>f(A)?A.value=a:null),options:d(I),onChange:L},null,8,["modelValue","options"]),y("div",V,[t[5]||(t[5]=y("span",{class:"text-secondary"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),"伪静态配置文件"===(null==(n=d(D))?void 0:n.label)?(c(),p("span",k,[t[4]||(t[4]=g("规则转换工具： ",-1)),v(u,{href:"https://www.bt.cn/Tools",target:"_blank"},{default:b(()=>[...t[3]||(t[3]=[g("Apache转Nginx ",-1),y("i",{class:"svgtofont-el-link"},null,-1)])]),_:1})])):j("",!0)]),y("div",S,[m(v(r,{class:"!h-[40rem] rounded-base",modelValue:d(T),"onUpdate:modelValue":t[1]||(t[1]=a=>f(T)?T.value=a:null),id:"configContent",request:!1,onSave:G},null,8,["modelValue"]),[[w,d(z)]])]),v(_,{type:"primary",onClick:t[2]||(t[2]=a=>G())},{default:b(()=>[...t[6]||(t[6]=[g("保存",-1)])]),_:1}),v(C,{options:B,class:"ml-2rem"})])),[[w,d(q)]])}}});export{H as default};
