!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){o(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function u(n,r,o,a){var u=r&&r.prototype instanceof l?r:l,f=Object.create(u.prototype);return i(f,"_invoke",function(n,r,o){var a,i,u,l=0,f=o||[],s=!1,p={p:0,n:0,v:e,a:y,f:y.bind(e,4),d:function(t,n){return a=t,i=0,u=e,p.n=n,c}};function y(n,r){for(i=n,u=r,t=0;!s&&l&&!o&&t<f.length;t++){var o,a=f[t],y=p.p,m=a[2];n>3?(o=m===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=e):a[0]<=y&&((o=n<2&&y<a[1])?(i=0,p.v=r,p.n=a[1]):y<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,i=0))}if(o||n>1)return c;throw s=!0,r}return function(o,f,m){if(l>1)throw TypeError("Generator is already running");for(s&&1===f&&y(f,m),i=f,u=m;(t=i<2?e:u)||!s;){a||(i?i<3?(i>1&&(p.n=-1),y(i,u)):p.n=u:p.v=u);try{if(l=2,a){if(i||(o="next"),t=a[o]){if(!(t=t.call(a,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,i<2&&(i=0)}else 1===i&&(t=a.return)&&t.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=e}else if((t=(s=p.n<0)?u:n.call(r,p))!==c)break}catch(t){a=e,i=1,u=t}finally{l=1}}return{value:t,done:s}}}(n,o,a),!0),f}var c={};function l(){}function f(){}function s(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(i(t={},r,function(){return this}),t),y=s.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e}return f.prototype=s,i(y,"constructor",s),i(s,"constructor",f),f.displayName="GeneratorFunction",i(s,o,"GeneratorFunction"),i(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),(a=function(){return{w:u,m:m}})()}function i(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}i=function(e,t,n,r){function a(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},i(e,t,n,r)}function u(e,t,n,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)})}}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,u=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./index-legacy109.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./column-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792"],function(e,n){"use strict";var o,i,u,f,s,p,y,m,v,d,h,b,g,j,w,_,O,S,P,k,x,E,q,C,A,I,T,D,G,V;return{setters:[function(e){o=e._},function(e){i=e.r,u=e.o,f=e.c,s=e.x,p=e.y,y=e.A,m=e.D,v=e.B,d=e.z,h=e.e,b=e.C,g=e.H},function(e){j=e._},function(e){w=e.n,_=e.H,O=e.b,S=e.p,P=e.Q,k=e.hy,x=e.ao,E=e.lS,q=e.B,C=e._},function(e){A=e.u},function(e){I=e.u},function(e){T=e.getPythonEnvInfo,D=e.PythonRequirementSetting,G=e.editPythonRequirement},function(e){V=e.f}],execute:function(){var M=O(),B=A().siteInfo,F=i(),H=i(!1),z=e("p",i([])),N=u({pyVersion:"",path:"",search:""}),R=function(e){return Object.entries(e).map(function(e){var t=l(e,2),n=t[0];return{label:n,key:t[1],value:n}})},U=i(!1),Q=function(){U.value=!0,H.value=!0},$=function(){var e=c(a().m(function e(t){var n,r;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,T({project_name:B.value.name,force:U.value?1:0,search:t.search});case 1:if(n=e.v,U.value=!1,!1!==n.data.status){e.n=2;break}return M.error(n.data.msg),e.a(2,{data:[],total:0});case 2:return N.pyVersion=n.data.python_version,N.path=n.data.requirement_path,z.value=R(n.data.pip_source),r=n.data.pip_list,""!==t.search&&(r=r.filter(function(e){return e.name.includes(t.search)})),e.a(2,{data:r,total:r.length});case 3:return e.p=3,e.v,e.a(2,{data:[],total:0})}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),J=function(e){F.value=e||null,w({area:75,isAsync:!0,title:"安装第三方库",btn:"安装",component:function(){return _(function(){return n.import("./install-package-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:{row:e,path:N.path,project_name:B.value.name,pipSource:z.value,refreshEvent:function(){}}})},K=function(){var e=c(a().m(function e(t){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,S({title:"卸载第三方库",icon:"warning-filled",content:"是否卸载第三方库【".concat(t.name,"】?")});case 1:return e.n=2,P({loading:"正在卸载，请稍后...",request:D({project_name:B.value.name,package_name:t.name,active:"uninstall"}),message:!0});case 2:e.v.status&&(H.value=!0);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=c(a().m(function e(t){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,P({loading:"正在修改，请稍后...",request:G({project_name:B.value.name,requirement_path:t}),message:!0});case 1:e.v.status&&(H.value=!0);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),W=function(){V({type:"file",path:N.path,change:function(e){L(e)}})},X=e("b",i()),Y=e("i",u({type:"common",name:"",version:"",file:"",pip:""})),Z=(e("r",u({name:[{validator:function(e,t,n){"common"===Y.type?t?n():n(new Error("请输入名称")):n()}}],file:[{validator:function(e,t,n){"file"===Y.type?t?n():n(new Error("请选择记录文件")):n()}}]})),e("a",function(){V({type:"file",path:Y.file,change:function(e){Y.file=e}})}),e("g",c(a().m(function e(){var t,n;return a().w(function(e){for(;;)switch(e.n){case 0:Y.name=(null===(t=F.value)||void 0===t?void 0:t.name)||"",Y.file=N.path||"",Y.pip=(null===(n=z.value[0])||void 0===n?void 0:n.label)||"";case 1:return e.a(2)}},e)}))),e("o",function(){var e=c(a().m(function e(t){var o,i,u;return a().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,X.value.validate();case 1:return o="file"===Y.type,i=r(r({},i={project_name:B.value.name,pip_source:Y.pip}),{},o?{requirement_path:Y.file}:{package_name:Y.name,package_version:Y.version,active:"install"}),w({title:"正在安装，请耐心等候...",area:52,component:function(){return _(function(){return n.import("./log-legacy2.js?v=1763689792")},void 0,n.meta.url)},compData:{type:"createPythonProject",logPath:"/www/server/python_project//vhost/logs/pip_".concat(i.project_name,".log"),endMsg:"安装结束",failMsg:"环境准备失败",successMsg:"安装结束",isClear:!0,completeEvent:function(e,t){H.value=!0,t()}}}),t(),e.n=2,D(i);case 2:u=e.v,M.request(u),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}));return function(t){return e.apply(this,arguments)}}()),{class:"grid grid-cols-1 gap-y-[1rem]"}),ee={class:"flex flex-col leading-[2rem]"},te={class:"flex items-center"},ne={class:"flex items-center"},re={class:"h-[45rem] mt-[2rem]"},oe=f({__name:"index",setup:function(e){var n=A().siteInfo,r=k({request:$,columns:[{label:"名称",prop:"name"},{label:"版本",prop:"version"},{label:"依赖记录文件中的版本",prop:"requirement"},I([{onClick:J,title:"安装",render:function(e){var t="--"===e.version;return(t=t&&!e.requirement.includes("git")&&!e.requirement.includes("file"))?h("span",{class:"text-primary cursor-pointer hover:text-primaryDark",onClick:function(){return J(e)}},[m("安装")]):""}},{onClick:K,isHide:function(e){return"--"===e.version},title:"卸载"}])],extension:[x(H),E()]}),a=r.BtTable,i=r.BtSearch;return function(e,r){var u=j,c=g,l=o;return s(),p("div",null,[y("div",Z,[y("div",null,[r[3]||(r[3]=m(" Python版本 ",-1)),y("span",null,v(d(N).pyVersion),1)]),y("div",ee,[r[5]||(r[5]=y("span",null,"命令行使用项目中的环境:",-1)),r[6]||(r[6]=y("span",null,[m("命令行可使用 "),y("code",null,"source py-project-env [项目名称]"),m(" 进入该项目虚拟环境，退出时使用"),y("code",null,"deactivate")],-1)),y("span",te,[r[4]||(r[4]=m(" 示例：",-1)),y("code",null,"source py-project-env "+v(d(n).name),1),y("i",{class:"svgtofont-el-document-copy cursor-pointer text-default text-base copy ml-[4px]",title:"复制启动命令",onClick:r[0]||(r[0]=function(){return d(q)({value:"source py-project-env ".concat(d(n).name)})})})]),r[7]||(r[7]=y("span",null,"若提示没有py-project-env文件，可尝试关闭系统加固并重启面板，然后进入Python项目页面此，时会自动设置该文件",-1))]),y("div",ne,[r[8]||(r[8]=y("span",{class:"mr-[1rem] whitespace-nowrap"},"依赖记录文件",-1)),h(u,{modelValue:d(N).path,"onUpdate:modelValue":r[1]||(r[1]=function(e){return d(N).path=e}),icon:"el-folder-opened",onIconClick:d(W),width:"40rem"},null,8,["modelValue","onIconClick"])])]),y("div",re,[h(l,null,{"header-left":b(function(){return[h(c,{type:"primary",onClick:r[2]||(r[2]=function(e){return d(J)()})},{default:b(function(){return t(r[9]||(r[9]=[m("安装",-1)]))}),_:1})]}),"header-right":b(function(){return[h(d(i),{width:"20rem",placeholder:"搜索第三方库"}),h(c,{type:"default",class:"!ml-[1rem]",onClick:d(Q)},{default:b(function(){return t(r[10]||(r[10]=[m("强制刷新",-1)]))}),_:1},8,["onClick"])]}),content:b(function(){return[h(d(a),{"max-height":480})]}),_:1})])])}}}),ae=C(oe,[["__scopeId","data-v-88785ebf"]]),ie=Object.freeze(Object.defineProperty({__proto__:null,default:ae},Symbol.toStringTag,{value:"Module"}));e("c",ie)}}})}();
