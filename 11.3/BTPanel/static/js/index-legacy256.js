!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function i(n,a,u,o){var i=a&&a.prototype instanceof c?a:c,f=Object.create(i.prototype);return r(f,"_invoke",function(n,r,a){var u,o,i,c=0,f=a||[],s=!1,v={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return u=t,o=0,i=e,v.n=n,l}};function d(n,r){for(o=n,i=r,t=0;!s&&c&&!a&&t<f.length;t++){var a,u=f[t],d=v.p,p=u[2];n>3?(a=p===r)&&(i=u[(o=u[4])?5:(o=3,3)],u[4]=u[5]=e):u[0]<=d&&((a=n<2&&d<u[1])?(o=0,v.v=r,v.n=u[1]):d<p&&(a=n<3||u[0]>r||r>p)&&(u[4]=n,u[5]=r,v.n=p,o=0))}if(a||n>1)return l;throw s=!0,r}return function(a,f,p){if(c>1)throw TypeError("Generator is already running");for(s&&1===f&&d(f,p),o=f,i=p;(t=o<2?e:i)||!s;){u||(o?o<3?(o>1&&(v.n=-1),d(o,i)):v.n=i:v.v=i);try{if(c=2,u){if(o||(a="next"),t=u[a]){if(!(t=t.call(u,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,o<2&&(o=0)}else 1===o&&(t=u.return)&&t.call(u),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);u=e}else if((t=(s=v.n<0)?i:n.call(r,v))!==l)break}catch(t){u=e,o=1,i=t}finally{c=1}}return{value:t,done:s}}}(n,u,o),!0),f}var l={};function c(){}function f(){}function s(){}t=Object.getPrototypeOf;var v=[][u]?t(t([][u]())):(r(t={},u,function(){return this}),t),d=s.prototype=c.prototype=Object.create(v);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,r(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=s,r(d,"constructor",s),r(s,"constructor",f),f.displayName="GeneratorFunction",r(s,o,"GeneratorFunction"),r(d),r(d,o,"Generator"),r(d,u,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:p}})()}function r(e,t,n,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}r=function(e,t,n,a){function o(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?u?u(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},r(e,t,n,a)}function a(e,t,n,r,a,u,o){try{var i=e[u](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,u){var o=e.apply(t,n);function i(e){a(o,r,u,i,l,"next",e)}function l(e){a(o,r,u,i,l,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy111.js?v=1763689792","./validator-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(t,r){"use strict";var a,o,i,l,c,f,s,v,d,p,y,m,_,b,w,x,h,g,k,j,S,T,D,P,A,O,V,q,z,B;return{setters:[function(e){a=e.bo,o=e.e,i=e.H},function(e){l=e._},function(e){c=e.r,f=e.k,s=e.g,v=e.w,d=e.v,p=e.n,y=e.a8,m=e.aP,_=e.x,b=e.y,w=e.A,x=e.F,h=e.b1,g=e.e,k=e.C,j=e.D,S=e.z,T=e.R,D=e.G,P=e.bM,A=e.al,O=e.aj,V=e.B},function(e){q=e._},null,function(e){z=e.getOverviewTop5,B=e.getSiteOverviewTop5},null,null,null],execute:function(){var G={class:"p-16 relative"},M={class:"flex flex-col pb-12"},U={class:"flex"},C={class:"text-secondary text-[12px]"},I={class:"flex items-center gap-2 mt-0.5"},E={class:"text-[18px] font-bold text-darkPrimary"},L={class:"text-[12px] text-secondary mt-0.5"},N={class:"text-[12px] text-tertiary mt-0.5"},F={key:0,class:"flex flex-col pb-12"},R={class:"mb-1"},H={class:"flex flex-col"},K={class:"mb-1"};t("default",{__name:"index",props:{compData:{type:Object,default:function(){return{viewType:"all",siteName:""}}},visibleMetrics:{type:Array,default:function(){return["traffic","req_count","ip_count","uv","pv"]}}},setup:function(t){var W=t,$=c(null),J=c(null),Q=c(!1),X=c(null);c("点击领取七天试用");var Y=f("siteStatisticsMetric","traffic"),Z=f("siteStatisticsCenterMetric","traffic"),ee=f("siteStatisticsSortOrder","desc"),te=c(null),ne=null,re=c(null),ae=null,ue=function(){var e=u(n().m(function e(t){var r,a;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return Q.value=!0,X.value=null,e.p=1,e.n=2,z(t);case 2:return r=e.v,e.a(2,r.data.data);case 3:return e.p=3,a=e.v,X.value=a,e.a(2,null);case 4:return e.p=4,Q.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=u(n().m(function e(t){var r,a;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return Q.value=!0,X.value=null,e.p=1,e.n=2,B(t);case 2:return r=e.v,e.a(2,r.data.data);case 3:return e.p=3,a=e.v,X.value=a,e.a(2,null);case 4:return e.p=4,Q.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}(),ie=function(e){var t,n,r,a,u,o,i,l,c,f,s,v,d,p,y;if(!e)return{today:{},yesterday:{},dayBefore:{}};var m=e.overview_three_days;return{today:{traffic:(null==m||null===(t=m.today)||void 0===t?void 0:t.traffic_bytes)||0,req_count:(null==m||null===(n=m.today)||void 0===n?void 0:n.req_count)||0,ip_count:(null==m||null===(r=m.today)||void 0===r?void 0:r.ip_count)||0,uv:(null==m||null===(a=m.today)||void 0===a?void 0:a.uv)||0,pv:(null==m||null===(u=m.today)||void 0===u?void 0:u.pv)||0},yesterday:{traffic:(null==m||null===(o=m.yesterday)||void 0===o?void 0:o.traffic_bytes)||0,req_count:(null==m||null===(i=m.yesterday)||void 0===i?void 0:i.req_count)||0,ip_count:(null==m||null===(l=m.yesterday)||void 0===l?void 0:l.ip_count)||0,uv:(null==m||null===(c=m.yesterday)||void 0===c?void 0:c.uv)||0,pv:(null==m||null===(f=m.yesterday)||void 0===f?void 0:f.pv)||0},dayBefore:{traffic:(null==m||null===(s=m.day_before)||void 0===s?void 0:s.traffic_bytes)||0,req_count:(null==m||null===(v=m.day_before)||void 0===v?void 0:v.req_count)||0,ip_count:(null==m||null===(d=m.day_before)||void 0===d?void 0:d.ip_count)||0,uv:(null==m||null===(p=m.day_before)||void 0===p?void 0:p.uv)||0,pv:(null==m||null===(y=m.day_before)||void 0===y?void 0:y.pv)||0}}},le=function(e){var t;return null!=e&&null!==(t=e.trend_7days)&&void 0!==t&&t.points?e.trend_7days.points.map(function(e){return{date:e.date,traffic:e.traffic_bytes,req_count:e.req_count,ip_count:e.ip_count,uv:e.uv,pv:e.pv}}):[]},ce=s(function(){return $.value?ie($.value):null}),fe=s(function(){return J.value?ie(J.value):null}),se=s(function(){var e,t;return"all"===W.compData.viewType?(null===(e=ce.value)||void 0===e?void 0:e.today)||{}:(null===(t=fe.value)||void 0===t?void 0:t.today)||{}}),ve=s(function(){var e,t;return"all"===W.compData.viewType?(null===(e=ce.value)||void 0===e?void 0:e.yesterday)||{}:(null===(t=fe.value)||void 0===t?void 0:t.yesterday)||{}}),de=s(function(){var e,t;return"all"===W.compData.viewType?(null===(e=ce.value)||void 0===e?void 0:e.dayBefore)||{}:(null===(t=fe.value)||void 0===t?void 0:t.dayBefore)||{}}),pe=s(function(){return"all"!==W.compData.viewType?[]:null!=(e=$.value)&&null!==(t=e.top5_sites)&&void 0!==t&&t.items?e.top5_sites.items.map(function(e){return{name:e.site,traffic:e.traffic_bytes,req_count:e.req_count,ip_count:e.ip_count,uv:e.uv,pv:e.pv}}):[];var e,t}),ye=s(function(){return"all"===W.compData.viewType?le($.value):le(J.value)}),me=function(){var e=u(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=a("正在获取网站概览数据，请稍后..."),e.p=1,"all"!==W.compData.viewType){e.n=3;break}return e.n=2,ue({metric:Y.value,order:ee.value});case 2:$.value=e.v,e.n=5;break;case 3:return e.n=4,oe({site_name:W.compData.siteName});case 4:J.value=e.v;case 5:return e.n=6,p();case 6:return e.n=7,ke();case 7:return e.n=8,je();case 8:return e.p=8,t.close(),e.f(8);case 9:return e.a(2)}},e,null,[[1,,8,9]])}));return function(){return e.apply(this,arguments)}}();v([W.compData.viewType,W.compData.siteName],u(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,me();case 1:return e.a(2)}},e)})),{immediate:!0}),v([Y,ee],u(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:if("all"!==W.compData.viewType){e.n=3;break}return e.n=1,ue({metric:Y.value,order:ee.value});case 1:return $.value=e.v,e.n=2,p();case 2:return e.n=3,ke();case 3:return e.a(2)}},e)}))),v([Z,ye],u(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,p();case 1:return e.n=2,je();case 2:return e.a(2)}},e)})));var _e=function(e){return"traffic"===Y.value?Te(e):e},be={ip_count:"IP",uv:"UV",pv:"PV",req_count:"请求数",traffic:"流量"},we=function(){if("all"!==W.compData.viewType)return{};var e=pe.value.map(function(e){return{name:e.name,value:e[Y.value]}});e.sort(function(e,t){return"desc"===ee.value?e.value-t.value:t.value-e.value});var t=e.map(function(e){return e.name}),n=e.map(function(e){return e.value});return{grid:{left:140,right:36,top:36,bottom:36},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){var t=Array.isArray(e)?e[0]:e,n=t.value,r="traffic"===Y.value?Te(n):n;return"".concat(t.name,"<br/>").concat(t.seriesName,": ").concat(r)}},xAxis:{type:"value",axisLabel:{formatter:_e,color:"#666",fontSize:11}},yAxis:{type:"category",data:t,axisLabel:{color:"#666",fontSize:12}},series:[{name:be[Y.value],type:"bar",data:n,barWidth:14,itemStyle:{color:"#18a058"},label:{show:!0,position:"right",color:"#333",fontSize:12,formatter:function(e){return"traffic"===Y.value?Te(e.value):e.value}}}]}},xe=function(){var t;if(null===(t=ye.value)||void 0===t||!t.length)return{xAxis:{data:[]},series:[]};var n=Z.value,r=be[n],a=e(ye.value).sort(function(e,t){return new Date(e.date).getTime()-new Date(t.date).getTime()});return{grid:{left:80,right:36,top:36,bottom:36},tooltip:{trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var t=Array.isArray(e)?e[0]:e,r=t.value,a="traffic"===n?Te(r):r;return"".concat(t.name,"<br/>").concat(t.seriesName,": ").concat(a)}},xAxis:{type:"category",data:a.map(function(e){return De(e.date)}),axisLabel:{color:"#666",fontSize:12}},yAxis:{type:"value",axisLabel:{formatter:function(e){return"traffic"===n?Te(e):e},color:"#666",fontSize:11}},series:[{name:r,type:"line",data:a.map(function(e){return e[n]}),smooth:!0,areaStyle:{opacity:.1},itemStyle:{color:"#18a058"},lineStyle:{color:"#18a058",width:2},label:{show:!0,position:"top",color:"#333",fontSize:10,formatter:function(e){return"traffic"===n?Te(e.value):e.value}}}]}},he=function(){var e=u(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.n){case 0:if(ne||!te.value){e.n=2;break}return e.n=1,i(function(){return r.import("./index-legacy305.js?v=1763689792")},void 0,r.meta.url);case 1:t=e.v,ne=t.init(te.value);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=u(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.n){case 0:if(ae||!re.value){e.n=2;break}return e.n=1,i(function(){return r.import("./index-legacy305.js?v=1763689792")},void 0,r.meta.url);case 1:t=e.v,ae=t.init(re.value);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=u(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.n){case 0:if("all"===W.compData.viewType){e.n=1;break}return e.a(2);case 1:return e.n=2,he();case 2:if(ne){e.n=3;break}return e.a(2);case 3:t=we(),ne.setOption(t,!0);case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),je=function(){var e=u(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ge();case 1:if(ae){e.n=2;break}return e.a(2);case 2:t=xe(),ae.setOption(t,!0);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Se=function(){ne&&ne.resize(),ae&&ae.resize()};d(u(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,p();case 1:return e.n=2,ke();case 2:return e.n=3,je();case 3:window.addEventListener("resize",Se);case 4:return e.a(2)}},e)}))),y(function(){if(window.removeEventListener("resize",Se),ne){try{ne.dispose()}catch(e){}ne=null}if(ae){try{ae.dispose()}catch(t){}ae=null}});var Te=function(e){if(0===e)return"0 B";if(e<1024)return e+" B";var t=["KB","MB","GB","TB"],n=-1;do{e/=1024,n++}while(e>=1024&&n<t.length-1);return"".concat(e.toFixed(2)," ").concat(t[n])},De=function(e){if(!e)return"";var t=new Date(e),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r)},Pe=[{key:"traffic",label:"流量",format:Te},{key:"req_count",label:"请求数"},{key:"ip_count",label:"IP"},{key:"uv",label:"UV"},{key:"pv",label:"PV"}],Ae=s(function(){return Pe.filter(function(e){return W.visibleMetrics.includes(e.key)})});return function(n,r){var a=P,u=o,i=q,c=A,f=O,s=l,v=m("n-text");return _(),b("div",G,[w("div",M,[w("div",U,[(_(!0),b(x,null,h(Ae.value,function(e){return _(),b("div",{key:e.key,class:"text-left flex flex-col pl-[1rem] flex-1 gap-[0.2rem]"},[w("div",C,[g(a,{size:6},{default:k(function(){return[r[3]||(r[3]=w("span",{class:"w-4 h-4 bg-primaryDark rounded-full inline-block"},null,-1)),w("span",null,V(e.label),1)]}),_:2},1024)]),w("div",I,[w("div",E,V(e.format?e.format(se.value[e.key]):se.value[e.key]),1)]),w("div",L,"昨日 "+V(e.format?e.format(ve.value[e.key]):ve.value[e.key]),1),w("div",N,"前日 "+V(e.format?e.format(de.value[e.key]):de.value[e.key]),1)])}),128)),w("div",{class:"text-left flex flex-col items-center cursor-pointer pr-[1rem]",onClick:me},[g(u,{href:"javascript:;",class:"flex items-center justify-center"},{default:k(function(){return e(r[4]||(r[4]=[w("i",{title:"",class:"svgtofont-icon-refresh !text-[1.8rem] flex items-center justify-center mr-[0.5rem]"},null,-1),j("刷新",-1)]))}),_:1}),g(i,{name:"tools-logo",class:"opacity-90",size:"40"})])])]),"all"===t.compData.viewType?(_(),b("div",F,[w("div",R,[g(a,{class:"w-full flex justify-between"},{default:k(function(){return[r[12]||(r[12]=w("strong",{class:"text-[1.6rem] font-bold"},"今日网站排名TOP5",-1)),g(a,null,{default:k(function(){return[g(f,{modelValue:S(ee),"onUpdate:modelValue":r[0]||(r[0]=function(e){return T(ee)?ee.value=e:null})},{default:k(function(){return[g(c,{value:"desc"},{default:k(function(){return e(r[5]||(r[5]=[j("降序",-1)]))}),_:1}),g(c,{value:"asc"},{default:k(function(){return e(r[6]||(r[6]=[j("升序",-1)]))}),_:1})]}),_:1},8,["modelValue"]),g(f,{modelValue:S(Y),"onUpdate:modelValue":r[1]||(r[1]=function(e){return T(Y)?Y.value=e:null})},{default:k(function(){return[g(c,{value:"traffic"},{default:k(function(){return e(r[7]||(r[7]=[j("流量",-1)]))}),_:1}),g(c,{value:"req_count"},{default:k(function(){return e(r[8]||(r[8]=[j("请求数",-1)]))}),_:1}),g(c,{value:"ip_count"},{default:k(function(){return e(r[9]||(r[9]=[j("IP",-1)]))}),_:1}),g(c,{value:"uv"},{default:k(function(){return e(r[10]||(r[10]=[j("UV",-1)]))}),_:1}),g(c,{value:"pv"},{default:k(function(){return e(r[11]||(r[11]=[j("PV",-1)]))}),_:1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]),w("div",{ref_key:"rankingChartRef",ref:te,class:"h-[180px]"},null,512)])):D("",!0),w("div",H,[w("div",K,[g(a,{class:"w-full flex justify-between"},{default:k(function(){return[r[18]||(r[18]=w("strong",{class:"text-[1.6rem] font-bold"},"近7天统计数据",-1)),g(a,null,{default:k(function(){return[g(f,{modelValue:S(Z),"onUpdate:modelValue":r[2]||(r[2]=function(e){return T(Z)?Z.value=e:null})},{default:k(function(){return[g(c,{value:"traffic"},{default:k(function(){return e(r[13]||(r[13]=[j("流量",-1)]))}),_:1}),g(c,{value:"req_count"},{default:k(function(){return e(r[14]||(r[14]=[j("请求数",-1)]))}),_:1}),g(c,{value:"ip_count"},{default:k(function(){return e(r[15]||(r[15]=[j("IP",-1)]))}),_:1}),g(c,{value:"uv"},{default:k(function(){return e(r[16]||(r[16]=[j("UV",-1)]))}),_:1}),g(c,{value:"pv"},{default:k(function(){return e(r[17]||(r[17]=[j("PV",-1)]))}),_:1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]),w("div",{ref_key:"statsCenterChartRef",ref:re,class:"h-[220px]"},null,512)]),g(s,{direction:"horizontal",class:"!my-6"}),g(a,null,{default:k(function(){return[g(v,{depth:"3"},{default:k(function(){return e(r[19]||(r[19]=[j(" 此为简易网站数据统计，如需更详细的数据详情，请使用网站监控报表",-1)]))}),_:1})]}),_:1})])}}})}}})}();
