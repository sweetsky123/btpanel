import{c as a,r as e,o as s,w as r,x as t,y as l,A as o,e as i,C as n,B as p,z as u,ad as d,ab as m}from"./base-lib.js?v=1763689792";import{aq as c,k as I,b as v,_ as f}from"./utils-lib.js?v=1763689792";import{_ as w}from"./index113.js?v=1763689792";import{u as _,t as b}from"./useController7.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./validator.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";const x={class:"domain-ip-edit-content"},g={class:"current-ip-section mb-4"},j={class:"text-[12px] px-0"},P={class:"new-ip-section"},y=f(a({__name:"index",props:{compData:{default:()=>({})}},setup(a,{expose:f}){const{ipSearchValue:y,isRegListRefresh:h,publicIp:V}=_(),C=v(),R=a,k=e(),q=e("获取中"),D=e(!1),z=s({newIp:"获取中"}),A=s({newIp:[{required:!0,message:"请输入新的IP地址",trigger:["blur","change"]},c({message:{value:"请输入新的IP地址",ip:"请输入正确的IP地址格式"}}),{trigger:["blur","input","change"],validator:(a,e,s)=>{e.trim()===q.value?s(new Error("新IP地址与当前IP地址相同")):s()}}]});r(()=>{var a;return null==(a=R.compData)?void 0:a.currentIp},a=>{a&&(q.value=a,z.newIp=a)},{immediate:!0});return f({onConfirm:async()=>{await k.value.validate(),D.value=!0;const a=C.load("修改中...");try{const a=await b({ip:z.newIp.trim()});return a.data.status&&(y.value=z.newIp.trim(),q.value=z.newIp.trim()),C[a.data.status?"success":"error"](a.data.msg),a.data.status}catch(e){return C.error("修改解析IP失败，请重试"),!1}finally{D.value=!1,a.close()}}}),(a,e)=>{const s=w,r=I,c=d,v=m;return t(),l("div",x,[o("div",g,[e[1]||(e[1]=o("div",{class:"mb-3"},"当前公网IP",-1)),i(s,{type:"info",closable:!1,class:"!px-10px !py-2 cursor-not-allowed"},{default:n(()=>[o("span",j,p(u(V)),1)]),_:1})]),o("div",P,[e[2]||(e[2]=o("div",{class:"mb-3"},"新的IP地址",-1)),i(v,{ref_key:"ipFormRef",ref:k,model:u(z),rules:u(A)},{default:n(()=>[i(c,{prop:"newIp"},{default:n(()=>[i(r,{modelValue:u(z).newIp,"onUpdate:modelValue":e[0]||(e[0]=a=>u(z).newIp=a),placeholder:"请输入新的IP地址",class:"!w-full"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])])}}}),[["__scopeId","data-v-b54d1488"]]);export{y as default};
