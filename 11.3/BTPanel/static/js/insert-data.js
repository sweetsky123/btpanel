import{c as a,r as e,w as t,x as s,y as o,e as r,C as m,F as l,b1 as p,O as n,z as d,G as c,S as u,ad as i,ab as f}from"./base-lib.js?v=1763689792";import{Q as _,k as b,_ as w}from"./utils-lib.js?v=1763689792";import{updateTableData as h,createTableData as D}from"./database.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const y={class:"p-[20px] max-h-[50rem] overflow-auto"},v=w(a({__name:"insert-data",props:{compData:{default:{keys:[],row:{},path:"",table:"",refresh:()=>{}}}},setup(a,{expose:w}){const v=a,k=e(),g=e({});t(()=>v.compData.keys,()=>{var a;null==(a=v.compData.keys)||a.forEach(a=>{g.value[a.name]=v.compData.row?v.compData.row[a.name]:""})},{immediate:!0});const x={path:[{required:!0,message:"请选择数据库文件",trigger:["blur","change"]}]};return w({onConfirm:async a=>{await k.value.validate();let e={path:v.compData.path,table:v.compData.table,new_data:g.value,where_data:v.compData.row};const t=v.compData.row;t||delete e.where_data,e=JSON.stringify(e),await _({loading:"正在提交，请稍后...",request:t?h({data:e}):D({data:e}),message:!0}),a(),v.compData.refresh()}}),(e,t)=>{const _=b,w=i,h=f;return s(),o("div",y,[r(h,{model:d(g),ref_key:"insertDataForm",ref:k,rules:x,onSubmit:t[0]||(t[0]=u(()=>{},["prevent"]))},{default:m(()=>[(s(!0),o(l,null,p(a.compData.keys,(a,e)=>(s(),o(l,null,[1!==a.pk?(s(),n(w,{label:a.name,prop:a.name,key:e},{default:m(()=>[r(_,{type:"text",modelValue:d(g)[a.name],"onUpdate:modelValue":e=>d(g)[a.name]=e,name:"item.name",width:"28rem"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop"])):c("",!0)],64))),256))]),_:1},8,["model"])])}}}),[["__scopeId","data-v-5cbc35c0"]]);export{v as default};
