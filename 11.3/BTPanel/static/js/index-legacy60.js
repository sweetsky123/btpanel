!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,u,l,i=[],o=!0,c=!1;try{if(u=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=u.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw a}}return i}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,u=function(){};return{s:u,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function r(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function u(n,r,a,u){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return i(s,"_invoke",function(n,r,a){var u,l,i,c=0,s=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return u=t,l=0,i=e,d.n=n,o}};function p(n,r){for(l=n,i=r,t=0;!f&&c&&!a&&t<s.length;t++){var a,u=s[t],p=d.p,v=u[2];n>3?(a=v===r)&&(i=u[(l=u[4])?5:(l=3,3)],u[4]=u[5]=e):u[0]<=p&&((a=n<2&&p<u[1])?(l=0,d.v=r,d.n=u[1]):p<v&&(a=n<3||u[0]>r||r>v)&&(u[4]=n,u[5]=r,d.n=v,l=0))}if(a||n>1)return o;throw f=!0,r}return function(a,s,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,v),l=s,i=v;(t=l<2?e:i)||!f;){u||(l?l<3?(l>1&&(d.n=-1),p(l,i)):d.n=i:d.v=i);try{if(c=2,u){if(l||(a="next"),t=u[a]){if(!(t=t.call(u,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,l<2&&(l=0)}else 1===l&&(t=u.return)&&t.call(u),l<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),l=1);u=e}else if((t=(f=d.n<0)?i:n.call(r,d))!==o)break}catch(t){u=e,l=1,i=t}finally{c=1}}return{value:t,done:f}}}(n,a,u),!0),s}var o={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(i(t={},r,function(){return this}),t),p=f.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,i(p,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,r,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:u,m:v}})()}function i(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,t,n,r){function u(t,n){i(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},i(e,t,n,r)}function o(e,t,n,r,a,u,l){try{var i=e[u](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function l(e){o(u,r,a,l,i,"next",e)}function i(e){o(u,r,a,l,i,"throw",e)}l(void 0)})}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useMethod-legacy9.js?v=1763689792","./header-nav-tools.vue_vue_type_script_setup_true_lang-legacy.js?v=1763689792","./useMethod-legacy10.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./form-item-legacy.js?v=1763689792"],function(a,u){"use strict";var i,o,s,v,m,h,y,b,g,w,_,x,k,C,j,V,E,T,D,S,O,B,R,M,A,U,H,L,P,q,$,I,z,F,N,W,G,J,K,Q,Y,Z,X,ee,te,ne,re,ae,ue,le,ie,oe,ce,se,fe,de,pe,ve,me,he,ye,be,ge,we,_e,xe,ke,Ce,je,Ve,Ee,Te,De,Se,Oe,Be,Re,Me,Ae,Ue,He,Le,Pe,qe,$e,Ie,ze,Fe,Ne,We,Ge,Je,Ke,Qe,Ye,Ze,Xe,et,tt,nt,rt,at,ut,lt,it,ot,ct,st,ft,dt,pt,vt,mt,ht,yt,bt,gt,wt,_t,xt,kt,Ct,jt,Vt,Et,Tt,Dt;return{setters:[function(e){i=e.fa,o=e.ak,s=e.V,v=e.fb,m=e.R,h=e.u,y=e._,b=e.aw,g=e.E,w=e.fc,_=e.e,x=e.fd,k=e.Q,C=e.fe,j=e.$,V=e.ff,E=e.fg,T=e.n,D=e.fh,S=e.fi,O=e.fj,B=e.M,R=e.fk,M=e.p,A=e.fl,U=e.fm,H=e.H,L=e.an,P=e.fn,q=e.aA,$=e.fo,I=e.fp,z=e.fq,F=e.fr,N=e.L,W=e.fs,G=e.ft,J=e.fu,K=e.fv,Q=e.fw,Y=e.fx,Z=e.ap,X=e.fy,ee=e.fz,te=e.fA,ne=e.B,re=e.fB,ae=e.fC,ue=e.fD,le=e.fE,ie=e.fF,oe=e.fG,ce=e.fH,se=e.fI,fe=e.aC},function(e){de=e.r,pe=e.bL,ve=e.c,me=e.Y,he=e.Z,ye=e.x,be=e.O,ge=e.C,we=e.D,_e=e.B,xe=e.y,ke=e.b1,Ce=e.z,je=e.F,Ve=e.an,Ee=e.am,Te=e.e,De=e.A,Se=e.al,Oe=e.aj,Be=e.ba,Re=e.s,Me=e.R,Ae=e.o,Ue=e.b8,He=e.v,Le=e.bc,Pe=e.bd,qe=e.w,$e=e.g,Ie=e.n,ze=e.L,Fe=e.N,Ne=e.H,We=e.U,Ge=e.ad,Je=e.ab,Ke=e.av,Qe=e.$,Ye=e.a8,Ze=e.J,Xe=e.K,et=e.M,tt=e.d,nt=e.ap,rt=e.ak,at=e.T,ut=e.j,lt=e.G,it=e.m,ot=e.aB,ct=e.a9},function(e){st=e.u,ft=e.o,dt=e.g},function(e){pt=e._},function(e){vt=e.a,mt=e.s,ht=e.e,yt=e.b,bt=e.t,gt=e.c,wt=e.d,_t=e.f,xt=e.m},function(e){kt=e.o},function(e){Ct=e._},function(e){jt=e.u,Vt=e.a,Et=e.c},function(e){Tt=e._},function(e){Dt=e.b}],execute:function(){a({A:function(e,t){var n=$n.value.findIndex(function(t){return t==e}),r=$n.value.findIndex(function(e){return e==t});-1!==n&&-1!==r&&n<r&&($n.value[n]=t,$n.value[r]=e);ar.$emit("makeDom")},B:function(e,t){var n=$n.value.findIndex(function(t){return t==e}),r=$n.value.findIndex(function(e){return e==t});-1!==n&&-1!==r&&n>r&&($n.value[n]=t,$n.value[r]=e);ar.$emit("makeDom")},C:function(e){var t,n,r,a,u,l,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=0,s=!1,f=!1,d=!0;i=Number(i)||0,o&&(s=!!o.leading,r=(f="maxWait"in o)?Math.max(Number(o.maxWait)||0,i):void 0,d="trailing"in o?!!o.trailing:d);function p(r){var u=t,l=n;return t=n=void 0,c=r,a=e.apply(l,u)}function v(e,t){return setTimeout(e,t)}function m(e){var t=e-(l||0);return void 0===l||t>=i||t<0||f&&e-c>=(r||0)}function h(){var e=Date.now();if(m(e))return y(e);u=v(h,function(e){var t=e-c,n=i-(e-(l||0));return f?Math.min(n,(r||0)-t):n}(e))}function y(e){return u=void 0,d&&t?p(e):(t=n=void 0,a)}function b(){for(var e=Date.now(),r=m(e),o=arguments.length,d=new Array(o),y=0;y<o;y++)d[y]=arguments[y];if(t=d,n=this,l=e,r){if(void 0===u)return function(e){return c=e,u=v(h,i),s?p(e):a}(l);if(f)return u=v(h,i),p(l)}return void 0===u&&(u=v(h,i)),a}return b.cancel=function(){void 0!==u&&clearTimeout(u);c=0,t=l=n=u=void 0},b.flush=function(){return void 0===u?a:y(Date.now())},b.pending=function(){return void 0!==u},b},F:kr,G:function(e){var t=[];In.value[e].children.forEach(function(e){t.push(Number(zn.value[e].width.split("%")[0]))});var n=100/(t.length+1),r=t.reduce(function(e,t){return e+t},0),a=(100-(r+n))/r;t.push(n);for(var u=0;u<t.length-1;u++)t[u]+=t[u]*a;kr(t,e),ar.$emit("makeDom")},H:function(e,t){var n=In.value[t].children.reduce(function(t,n){var r=Number(zn.value[e].width.split("%")[0]);return f(f({},t),{},d({},n,r))},{});delete n[e];var r=Object.values(n),a=r.reduce(function(e,t){return e+t},0),u=(100-a)/a,l=(r=r.map(function(e){return parseFloat((e*(1+u)).toFixed(2))})).reduce(function(e,t){return e+t},0),i=100-l;0!==i&&(r[r.length-1]+=i);xr(e,t),kr(r,t),ar.$emit("makeDom")},J:function(){$n.value=[],In.value={},zn.value={},Fn.value={},Nn.value={},Wn.value={},Gn.value={},Jn.value={}},K:function(e){if(!e)return;Cr(e),Hn(),ar.$emit("makeDom")},M:function(e,t){if("0"==e.key){var n=Vr();!function(e,t){$n.value.splice(t,0,e),ar.$emit("makeDom")}(n,t),function(e){var t=Vr();In.value[e]={type:Rn.Columns,name:"列",key:e,children:[t]},br(t),function(e){Wn.value[e]=hr(tr)}(e),ar.$emit("makeDom")}(n),wr(n,"columns")}ar.$emit("makeDom")},c:hr,f:function(e,t,n){var r=zn.value[e].children.findIndex(function(e){return e==t}),a=zn.value[e].children.findIndex(function(e){return e==n});-1!==r&&-1!==a&&r>a&&(zn.value[e].children.splice(r,1),zn.value[e].children.splice(a,0,t));ar.$emit("makeDom")},g:Vr,h:function(e,t,n){var r=zn.value[e].children.findIndex(function(e){return e==t}),a=zn.value[e].children.findIndex(function(e){return e==n});-1!==r&&-1!==a&&r<a&&(zn.value[e].children.splice(a,1),zn.value[e].children.splice(r,0,n));ar.$emit("makeDom")},i:function(e,t,n){zn.value[e].children.push(t),gr(t,n),ar.$emit("makeDom")},j:Tr,m:function(e,t){var n=zn.value[t],r=Fn.value[e],a=Gn.value[e];if(n&&r&&a){var u=hr(a),l=hr(r),i=Vr(),o=n.children.findIndex(function(t){return t===e});-1!==o&&n.children.splice(o+1,0,i),l.key=i,Fn.value[i]=l,Gn.value[i]=u}},s:_r,w:function(e,t,n,r){zn.value[e].children.splice(r,0,t),gr(t,n),ar.$emit("makeDom")},z:function(e){Ln.value="",Pn.value="",In.value[e].children.forEach(function(t){xr(t,e)}),delete In.value[e],$n.value=$n.value.filter(function(t){return t!==e}),ar.$emit("makeDom")}});var St,Ot,Bt,Rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"getInstance",value:function(){return e.instance||(e.instance=pe()),e.instance}}],(n=null)&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}(),Mt=de(!1),At=de("value"),Ut=de({type:"today",data:(St=function(e){var t=new Date(e);t.setHours(0,0,0,0);var n=new Date(e);return n.setHours(23,59,59,999),{start:t,end:n}}(new Date),Ot=St.start,Bt=St.end,[Ot.getTime(),Bt.getTime()])});function Ht(){var e=Rt.getInstance();function t(){return f(f({},"value"!==At.value?{domain:At.value}:{}),{},{start_time:Math.floor(Ut.value.data[0]/1e3),end_time:Math.floor(Ut.value.data[1]/1e3)})}function n(){return(n=c(l().m(function n(){var r,a;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,Mt.value=!0,n.n=1,i(t());case 1:r=n.v,a=r.data,o(a)&&e.trigger(a);case 2:return n.p=2,Mt.value=!1,n.f(2);case 3:return n.a(2)}},n,null,[[0,,2,3]])}))).apply(this,arguments)}return{getRate:function(e){return e>=0?"".concat(e,"%"):"--"},getChartTime:function(e,t){var n=new Date;return"hourly"===e?(n.setMinutes(0),n.setSeconds(0),n.setHours(t)):"daily"===e&&(n=new Date(1e3*t)),s(n)},getOverview:function(){return n.apply(this,arguments)},onResult:e.on}}var Lt=ve({__name:"domain-select",props:me({all:{type:Boolean,default:!0},showTag:{type:Boolean,default:!0}},{value:{},valueModifiers:{}}),emits:["update:value"],setup:function(e){var t=e,n=he(e,"value"),r=de([]),a=function(e){return t.showTag?"域名：".concat(e):e},u=function(){r.value.unshift({label:"全部",value:"value"})},i=st(),o=i.loading,s=i.setLoading,f=function(){var e=c(l().m(function e(){var a,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,s(!0),e.n=1,v();case 1:a=e.v,i=a.data.data,m(i)&&(r.value=i.map(function(e){return{label:e,value:e}}),t.all?u():n.value=i[0]||"");case 2:return e.p=2,s(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}();return f(),function(e,t){var u=Ee,l=Ve;return ye(),be(l,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.value=e}),loading:Ce(o),filterable:!0},{label:ge(function(e){var t=e.label;e.value;return[we(_e(a(t)),1)]}),default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(r),function(e){return ye(),be(u,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])}}}),Pt={class:"ml-8px"},qt=ve({__name:"date",props:{type:{},typeModifiers:{},value:{default:function(){return[]}},valueModifiers:{}},emits:["update:type","update:value"],setup:function(e){var t=he(e,"type"),n=he(e,"value");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=mt(e),n=ht(e);return[t.getTime(),n.getTime()]}var a=function(e){switch(e){case"today":n.value=r();break;case"yesterday":n.value=r(vt(new Date,-1));break;case"7day":n.value=function(){var e=new Date,t=ht(e);return[mt(vt(e,-6)).getTime(),t.getTime()]}()}},u=function(e){var t=new Date,n=vt(t,-30);return mt(n).getTime()>e||ht(t).getTime()<e},l=function(e){t.value="custom",n.value=[mt(e[0]).getTime(),ht(e[1]).getTime()]};return function(e,r){var i=Se,o=Oe,c=Be;return ye(),xe(je,null,[Te(o,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=function(e){return t.value=e}),onChange:a},{default:ge(function(){return[Te(i,{label:"今日",value:"today"}),Te(i,{label:"昨日",value:"yesterday"}),Te(i,{label:"最近7天",value:"7day"})]}),_:1},8,["modelValue"]),De("div",Pt,[Te(c,{modelValue:n.value,"onUpdate:modelValue":r[1]||(r[1]=function(e){return n.value=e}),type:"daterange","disabled-date":u,onChange:l},null,8,["modelValue"])])],64)}}}),$t={class:"flex items-center justify-between"},It={class:"flex items-center gap-16px"},zt={class:"w-240px"},Ft={class:"flex items-center"},Nt=ve({__name:"index",setup:function(e){var t=h(),n=Ht().getOverview;Re(t);var r=function(){n()},a=function(){n()};return function(e,t){return ye(),xe("div",$t,[De("div",It,[De("div",zt,[Te(Lt,{value:Ce(At),"onUpdate:value":[t[0]||(t[0]=function(e){return Me(At)?At.value=e:null}),r]},null,8,["value"])]),Te(pt)]),De("div",Ft,[Te(qt,{type:Ce(Ut).type,"onUpdate:type":t[1]||(t[1]=function(e){return Ce(Ut).type=e}),value:Ce(Ut).data,"onUpdate:value":[t[2]||(t[2]=function(e){return Ce(Ut).data=e}),a]},null,8,["type","value"])])])}}}),Wt={class:"rate-box"},Gt={class:"rate-list"},Jt={class:"rate-text"},Kt={class:"rate-list"},Qt={class:"rate-text"},Yt=y(ve({__name:"index",setup:function(e){var t=Ht(),n=t.onResult,r=t.getRate,a=Ae({delivery:0,open:0,click:0,bounce:0});return n(function(e){a.delivery=e.dashboard.delivery_rate,a.open=e.dashboard.open_rate,a.click=e.dashboard.click_rate,a.bounce=e.dashboard.bounce_rate}),function(e,t){return ye(),xe("div",Wt,[De("div",Gt,[t[0]||(t[0]=De("div",{class:"rate-title"},"送达率",-1)),De("div",Jt,_e("".concat(Ce(a).delivery,"%")),1)]),De("div",Kt,[t[1]||(t[1]=De("div",{class:"rate-title"},"退信率",-1)),De("div",Qt,_e(Ce(r)(Ce(a).bounce)),1)])])}}}),[["__scopeId","data-v-1528d793"]]),Zt={class:"total-list"},Xt={class:"total-item"},en={class:"total-value text-primary text-subtitleLarge"},tn={class:"total-item"},nn={class:"total-value text-medium"},rn={class:"total-item"},an={class:"total-value text-medium"},un={class:"w-100% h-300px"},ln=ve({__name:"index",setup:function(e){var t=Ht(),n=t.onResult,r=t.getChartTime,a=t.getOverview,u=de(null),l=de({delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0}),i=b({options:{}}),o=i.BtECharts,c=i.getEChart,s=i.setOption,f=(i.setQuickOption,Ue({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},legend:{top:0,itemGap:16,icon:"circle",itemWidth:10,itemHeight:10,data:["发件成功","发件失败"],textStyle:{lineHeight:12,padding:[0,0,-2,0],rich:{a:{verticalAlign:"middle"}}}},grid:{top:"16%",left:"2%",right:"2%",bottom:"4%",containLabel:!0},yAxis:{type:"value",boundaryGap:[0,"6%"],splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:g.value?"#999":"#ebeef5"}}},xAxis:d(),series:[{type:"bar",name:"发件成功",data:[]},{type:"bar",name:"发件失败",data:[]}],events:{click:function(e){if("bar"===e.componentSubType&&m(e.value)&&"daily"===e.value[2]){var t=new Date(e.value[0]);Ut.value.type="custom",Ut.value.data=[mt(t).getTime(),ht(t).getTime()],a()}}}}));function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HH:mm";return{type:"category",axisLabel:{formatter:function(t){return"HH:mm"===e?t.match(/\d{2}:\d{2}/)[0]:t.split(" ")[0]}}}}return He(function(){n(function(e){var t,n,a;e.send_mail_chart&&(l.value=e.send_mail_chart.dashboard,t=e.send_mail_chart,n=[],a=[],t.data.forEach(function(e){n.push([r(t.column_type,e.x),e.failed,t.column_type]),a.push([r(t.column_type,e.x),e.delivered,t.column_type])}),f.series=[{type:"bar",name:"发件失败",data:n,stack:"total",itemStyle:{color:"#1A519B"}},{type:"bar",name:"发件成功",data:a,stack:"total",itemStyle:{color:"#91CC75"}}],f.xAxis=d("hourly"===t.column_type?"HH:mm":"yyyy-MM-dd"),u.value=c(),s(f))})}),function(e,t){return ye(),xe(je,null,[t[3]||(t[3]=De("div",{class:"mb-16px font-bold text-medium text-default"},"今日发送",-1)),De("div",Zt,[De("div",Xt,[t[0]||(t[0]=De("div",{class:"total-label"},"发件成功率",-1)),De("div",en,_e(Ce(l).delivery_rate)+"%",1)]),De("div",tn,[t[1]||(t[1]=De("div",{class:"total-label"},"发件成功",-1)),De("div",nn,_e(Ce(l).delivered),1)]),De("div",rn,[t[2]||(t[2]=De("div",{class:"total-label"},"发件失败",-1)),De("div",an,_e(Ce(l).failed),1)])]),De("div",un,[Te(Ce(o),{style:{height:"300px"}})])],64)}}}),on=y(ln,[["__scopeId","data-v-ce656b9d"]]),cn={class:"flex-center !h-370px"},sn=ve({__name:"bounce",setup:function(e){var t=Ht(),n=t.onResult,r=t.getChartTime,a=Ue({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},grid:{top:"16%",left:"2%",right:"2%",bottom:"2%",containLabel:!0},yAxis:{name:"%",type:"value",splitLine:{show:!0,lineStyle:{type:"dashed",width:1,color:g.value?"#999":"#ebeef5"}},max:function(e){var t=e.max;return t>100?100:t}},xAxis:u(),series:l()});function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"HH:mm";return{type:"category",axisLabel:{formatter:function(t){return"HH:mm"===e?t.match(/\d{2}:\d{2}/)[0]:t.split(" ")[0]}}}}function l(){return[{name:"退信率",type:"line",data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],itemStyle:{color:"var(--el-color-primary)"},smooth:!1,showSymbol:!1,sampling:"average"}]}var i=b({options:{}}),o=i.BtECharts,c=(i.getEChart,i.setOption);i.setQuickOption;return n(function(e){var t=e.bounce_rate_chart;if(t){var n=t.data.map(function(e){return[r(t.column_type,e.x),e.bounce_rate]});a.series=l(n),a.xAxis=u("hourly"===t.column_type?"HH:mm":"yyyy-MM-dd"),c(a)}}),function(e,t){return ye(),xe(je,null,[t[0]||(t[0]=De("div",{class:"mb-16px font-bold text-medium text-default"},"退信率%",-1)),De("div",cn,[Te(Ce(o),{style:{height:"370px"}})])],64)}}}),fn={class:"overview-card"},dn={class:"overview-card"},pn=y(ve({__name:"index",setup:function(e){return(0,Ht().getOverview)(),function(e,t){var n=Le,r=Pe;return ye(),xe("div",null,[Te(Nt),Te(Yt),Te(r,{gutter:16},{default:ge(function(){return[Te(n,{span:12},{default:ge(function(){return[De("div",fn,[Te(on)])]}),_:1}),Te(n,{span:12},{default:ge(function(){return[De("div",dn,[Te(sn)])]}),_:1})]}),_:1})])}}}),[["__scopeId","data-v-c63fc35f"]]);var vn={class:"flex items-center"},mn={class:"w-260px"},hn={class:"ml-10px"},yn=ve({__name:"template",props:{value:{},valueModifiers:{}},emits:["update:value"],setup:function(e,t){var n=t.expose,a=he(e,"value"),u=de([]),i=st(),o=i.loading,s=i.setLoading,f=function(){yt("template")},d=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,s(!0),e.n=1,w();case 1:t=e.v,n=t.data,m(n)&&n.length>0&&(u.value=n.map(function(e){return{label:e.name,value:e.id}}),a.value||(a.value=n[0].id));case 2:return e.p=2,s(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}();return d(),n({getList:d}),function(e,t){var n=Ee,l=Ve,i=_;return ye(),xe("div",vn,[De("div",mn,[Te(l,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.value=e}),loading:Ce(o),filterable:!0},{default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(u),function(e){return ye(),be(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])]),De("div",hn,[Te(i,{onClick:f},{default:ge(function(){return r(t[1]||(t[1]=[we("创建",-1)]))}),_:1})])])}}}),bn={class:"w-170px mr-10px"},gn={class:"w-180px"},wn=ve({__name:"sender",props:{value:{},valueModifiers:{}},emits:me(["change"],["update:value"]),setup:function(e,t){var r=t.emit,a=de(null),u=he(e,"value"),i=de([]),s=de([]),f=de([]),d=function(e){var t=f.value.find(function(t){return t.username===e});t&&r("change",t.full_name)},p=de(!1),h=de(!1),y=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,p.value=!0,e.n=1,v();case 1:t=e.v,n=t.data.data,m(n)&&(i.value=n.map(function(e){return{label:e,value:e}}),a.value=n[0]||null);case 2:return e.p=2,p.value=!1,e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,h.value=!0,e.n=1,x();case 1:t=e.v,n=t.data.data,m(n)&&n.length>0&&(f.value=n);case 2:return e.p=2,h.value=!1,e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}(),g=function(){s.value=f.value.filter(function(e){return e.domain===a.value}).map(function(e){return{data:e,label:e.username,value:e.username}})},w=function(){if(s.value[0]){var e=s.value[0].data;u.value="".concat(s.value[0].value),o(e)&&r("change",e.full_name)}else u.value=null,r("change","")},_=function(){g(),w()},k=function(){var e=c(l().m(function e(){var t,r,i,o;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,Promise.all([y(),b()]);case 1:if(g(),!u.value){e.n=9;break}t=n(f.value),e.p=2,t.s();case 3:if((r=t.n()).done){e.n=5;break}if((i=r.value).username!==u.value){e.n=4;break}return a.value=i.domain,e.a(3,5);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,o=e.v,t.e(o);case 7:return e.p=7,t.f(),e.f(7);case 8:e.n=10;break;case 9:w();case 10:return e.a(2)}},e,null,[[2,6,7,8]])}));return function(){return e.apply(this,arguments)}}();return k(),function(e,t){var n=Ee,r=Ve;return ye(),xe(je,null,[De("div",bn,[Te(r,{modelValue:Ce(a),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Me(a)?a.value=e:null}),loading:Ce(p),onChange:_},{default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(i),function(e){return ye(),be(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])]),De("div",gn,[Te(r,{modelValue:u.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return u.value=e}),loading:Ce(h),onChange:d},{default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(s),function(e){return ye(),be(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])])],64)}}}),_n={class:"flex"},xn={class:"ml-40px"},kn=ve({__name:"import",props:me({path:{default:""},accept:{default:function(){return[]}}},{value:{},valueModifiers:{}}),emits:me(["change"],["update:value"]),setup:function(e,t){var n=t.emit,a=e,u=a.path,l=a.accept,i=he(e,"value");qe(i,function(e){o("change",e)});var o=n,c=function(){ft({path:u,size:5,uploadData:{accept:l.map(function(e){return".".concat(e)}).join(","),multiple:!1,limit:1},refreshEvent:function(e,t){i.value=e[0].name,t()}})};return function(e,t){var n=Ne;return ye(),xe("div",null,[De("div",_n,[Te(n,{type:"primary",onClick:c},{default:ge(function(){return r(t[0]||(t[0]=[we("导入",-1)]))}),_:1}),De("div",xn,[t[1]||(t[1]=we(" 文件名: ",-1)),De("span",{class:ze(i.value?"text-primary":"text-dangerDark")},_e(i.value||"未选择任何文件"),3)])]),Fe(e.$slots,"default")])}}}),Cn={class:"p-20px"},jn={class:"w-250px"},Vn=ve({__name:"type-create",props:{compData:{}},setup:function(e,t){var n=t.expose,a=e.compData,u=de(null),i=Ae({mail_type:"",file:""}),o={mail_type:{required:!0,message:"请输入分组名称",trigger:["blur","input"]},file:{required:!0,message:"请上传文件",trigger:["blur","change"]}},s=function(){var e=c(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(n=u.value)||void 0===n?void 0:n.validate();case 1:k({loading:"正在导入...",message:!0,request:C(f({},i)),success:function(e){var n;e.status&&(null===(n=a.refresh)||void 0===n||n.call(a),t())}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return n({onConfirm:s}),function(e,t){var n=We,a=Ge,l=Je,c=j;return ye(),xe("div",Cn,[Te(l,{ref_key:"formRef",ref:u,model:Ce(i),rules:o},{default:ge(function(){return[Te(a,{label:"分组名称",prop:"mail_type"},{default:ge(function(){return[De("div",jn,[Te(n,{modelValue:Ce(i).mail_type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Ce(i).mail_type=e}),placeholder:"请输入分组名称"},null,8,["modelValue"])])]}),_:1}),Te(a,{label:"邮箱",prop:"file"},{default:ge(function(){return[Te(kn,{value:Ce(i).file,"onUpdate:value":t[1]||(t[1]=function(e){return Ce(i).file=e}),path:"/www/server/panel/data/mail/in_bulk/recipient",accept:["txt","json"]},null,8,["value"])]}),_:1})]}),_:1},8,["model"]),Te(c,{class:"mt-4px"},{default:ge(function(){return r(t[2]||(t[2]=[De("li",null," 文件类型: txt/json 每行一个邮箱 不超过5 MB ",-1)]))}),_:1})])}}}),En={class:"flex-1"},Tn={class:"flex items-center"},Dn={class:"w-260px"},Sn={class:"ml-10px"},On={class:"mt-8px"},Bn=ve({__name:"type",props:{value:{},valueModifiers:{},name:{},nameModifiers:{}},emits:["update:value","update:name"],setup:function(e,t){var n=t.expose,a=he(e,"value"),u=he(e,"name"),i=de([]),s=de([]),f=de(0),d=st(),p=d.loading,v=d.setLoading,h=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,v(!0),e.n=1,V({});case 1:t=e.v,n=t.data,m(n)&&(s.value=n,i.value=n.map(function(e){return{label:e.mail_type,value:e.id}}),a.value&&a.value.length>0&&y(a.value));case 2:return e.p=2,v(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=c(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return u.value=s.value.filter(function(e){return t.includes(e.id)}).map(function(e){return e.mail_type}),e.n=1,E({etypes:t.join(",")});case 1:n=e.v,r=n.data,o(r)&&(f.value=r.data);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(){T({title:"创建新的分组",area:48,showFooter:!0,compData:{refresh:h},component:Vn})};return h(),n({getType:h}),function(e,t){var n=Ee,u=Ve,l=_;return ye(),xe("div",En,[De("div",Tn,[De("div",Dn,[Te(u,{class:"bt-multiple-select",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.value=e}),loading:Ce(p),multiple:"",filterable:"",placeholder:"请选择分组",onChange:y},{default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(i),function(e){return ye(),be(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])]),De("div",Sn,[Te(l,{onClick:b},{default:ge(function(){return r(t[1]||(t[1]=[we("创建",-1)]))}),_:1})])]),De("div",On,[t[2]||(t[2]=we("发送邮件 (",-1)),De("b",null,_e(Ce(f)),1),t[3]||(t[3]=we(" 个收件人)",-1))])])}}}),Rn=a("D",function(e){return e.Columns="columns",e.Button="button",e.Divider="divider",e.Header="header",e.Text="text",e.Image="image",e.Menu="menu",e.Html="html",e.commonComp="commonComp",e}(Rn||{}));a("d",["button","divider","header","text","image","menu","html","commonComp"]);function Mn(e){return"border"==e||"padding"==e||"borderRadius"==e}function An(e){if(null==e||"object"!==t(e))return e;for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var u=0,l=r;u<l.length;u++){var i=l[u];if(null!=i)for(var o in i){var c=e[o],s=i[o];void 0!==c?null===c||null===s||"object"!==t(c)||"object"!==t(s)||Array.isArray(c)||Array.isArray(s)||c instanceof Date||c instanceof RegExp||c instanceof Map||c instanceof Set||An(c,s):e[o]=hr(s)}}return e}var Un={comp_type:{button:function(){return nr}}};function Hn(){var t=Object.keys(Un.comp_type);Object.entries(Fn.value).forEach(function(n){var r=e(n,2)[1];t.includes(r.type)&&Object.entries(Gn.value).forEach(function(t){var n=e(t,2),a=n[0],u=n[1];if(a===r.key){var l=Un.comp_type[r.type]();u.style=An(u.style,l)}})})}a("o",de(!1));var Ln=a("p",de("")),Pn=a("n",de(""));a("r",de(""));de("bottom");a("v",de(""));var qn,$n=a("E",de([])),In=a("q",de({})),zn=a("a",de({})),Fn=a("l",de({})),Nn=a("t",de({})),Wn=a("x",de({})),Gn=a("k",de({})),Jn=de({}),Kn=a("y",de({backgroundColor:"#ffffff",maxWidth:"500px"})),Qn=a("e",de()),Yn=a("L",$e(function(){return{version:1.5,columns_source:$n.value,column_map:In.value,cell_map:zn.value,cell_style_map:Nn.value,column_row_style_map:Wn.value,comp_style_map:Gn.value,compOptions:Jn.value,comp_map:Fn.value,page_style:Kn.value}})),Zn=de(!0),Xn=a("I",de(c(l().m(function e(){return l().w(function(e){for(;;)if(0===e.n)return e.a(2,!1)},e)})))),er=(a("b",de([{type:"columns",name:"行",icon:"el-semi-select",key:"0",children:[]},{type:"button",icon:"el-empty",name:"按钮",key:"0"},{type:"divider",name:"分割线",icon:"icon-drag",key:"0"},{type:"header",name:"标题",icon:"el-info-filled",key:"0"},{type:"text",name:"文本",icon:"file-text",key:"0"},{type:"image",name:"图片",icon:"el-folder-opened",key:"0"},{type:"menu",name:"菜单",icon:"menu-setting",key:"0"}])),{style:{backgroundColor:"transparent",padding:{more:!1,all:"0px",top:"",right:"",bottom:"",left:""},border:{more:!1,all:"0px",top:"",right:"",bottom:"",left:""}}}),tr={style:{backgroundColor:"transparent",padding:{more:!1,all:"0px",top:"",right:"",bottom:"",left:""}}},nr={border:{more:!1,all:"",top:"",right:"",bottom:"",left:""},padding:{more:!0,all:"",top:"10px",left:"20px",right:"20px",bottom:"10px"},borderRadius:{more:!1,all:"4px",top:"",left:"",right:"",bottom:""},width:"auto",lineHeight:"120%",color:"#ffffff",display:"inline-block",backgroundColor:"#3AAEE0",FontWeight:"normal",fontSize:"14px",textAlign:"center",LetterSpacing:"0px"},rr={button:{style:nr,general:{textAlign:"center",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{href:"",target:"_blank"},content:"按钮"},divider:{style:{borderTop:"1px solid #bbbbbb",width:"100%",display:"inline-block",lineHeight:"1px",height:"0px",verticalAlign:"middle"},general:{textAlign:"center",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{}},header:{style:{position:"relative",display:"block",lineHeight:"140%",fontWeight:"normal",fontSize:"22px",letterSpacing:"0px",color:"#333333"},general:{textAlign:"left",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{},content:"标题"},text:{style:{fontSize:"14px",fontWeight:"normal",color:"#333",textAlign:"left",lineHeight:"140%",letterSpacing:"0px"},general:{padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{},content:"文本"},image:{style:{display:"inline-block",width:"100%"},general:{textAlign:"center",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{href:"",target:"_blank",src:"",alt:""}},menu:{style:{fontWeight:"normal",fontSize:"14px",letterSpacing:"0px",color:"#444444",linkColor:"#0068A5",padding:{more:!0,all:"",top:"5px",left:"15px",right:"15px",bottom:"5px"}},general:{textAlign:"center",padding:{more:!1,all:"10px",top:"",left:"",right:"",bottom:""}},info:{layout:"horizontal"},links:[{id:Vr(6),label:"菜单 1",href:""},{id:Vr(6),label:"菜单 2",href:""}]}},ar=a("u",{events:{makeDom:[(qn=null,function(){clearTimeout(qn),qn=setTimeout(function(){Qn.value=or().outerHTML,ur()},300)})]},$emit:function(e,t){this.events[e]&&this.events[e].forEach(function(e){return e(t)})}});var ur=function(){var e=null;return function(){Zn.value&&(Zn.value=!1,clearTimeout(e),e=setTimeout(c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Xn.value();case 1:Zn.value=!0;case 2:return e.a(2)}},e)})),1e3))}}();function lr(){var e=function(){var e,t={};for(var n in Fn.value){var r=document.createElement("div");cr(r,Gn.value[n]);var a=null;switch(Fn.value[n].type){case"button":sr(a=document.createElement("a"),Gn.value[n]);break;case"divider":fr(a=document.createElement("div"),Gn.value[n]);break;case"header":dr(a=document.createElement("div"),Gn.value[n]);break;case"text":pr(a=document.createElement("div"),Gn.value[n]);break;case"image":if(null!==(e=Gn.value[n].info)&&void 0!==e&&e.href){var u,l,i,o;(a=document.createElement("a")).href=null===(u=Gn.value[n].info)||void 0===u?void 0:u.href,a.target=null===(l=Gn.value[n].info)||void 0===l?void 0:l.target;var c=document.createElement("img");c.src=(null===(i=Gn.value[n].info)||void 0===i?void 0:i.src)||"",c.alt=(null===(o=Gn.value[n].info)||void 0===o?void 0:o.alt)||"",c.style.display="block",c.style.width="100%",a.appendChild(c)}else{var s,f;(a=document.createElement("img")).src=(null===(s=Gn.value[n].info)||void 0===s?void 0:s.src)||"",a.alt=(null===(f=Gn.value[n].info)||void 0===f?void 0:f.alt)||""}vr(a,Gn.value[n]);break;case"menu":mr(a=document.createElement("div"),Gn.value[n])}a&&r.appendChild(a),t[n]={dom:r,general:{},info:Gn.value[n].info}}return t}(),t={},n=function(){var n=document.createElement("td");n.style.width=zn.value[r].width,function(e,t){var n=Tr(t);for(var r in n)e.style[r]=n[r]}(n,Nn.value[r]),zn.value[r].children.forEach(function(t){if(e[t])for(var r in n.appendChild(e[t].dom),e[t].general)n.style[r]=e[t].general[r]}),t[r]={dom:n}};for(var r in zn.value)n();return t}function ir(){var e=lr(),t={},n=function(){var n=document.createElement("tr"),a=document.createElement("td"),u=document.createElement("div");!function(e,t){var n=Tr(t);for(var r in n)e.style[r]=n[r]}(u,Wn.value[r]);var l=document.createElement("table");l.style.width="100%";var i=document.createElement("tr");In.value[r].children.forEach(function(t){i.appendChild(e[t].dom)}),l.appendChild(i),u.appendChild(l),a.appendChild(u),n.appendChild(a),t[r]={dom:n}};for(var r in In.value)n();return t}function or(){var e=ir(),t=document.createElement("table");t.setAttribute("width",Kn.value.maxWidth),t.style.margin="0 auto",t.style.backgroundColor=Kn.value.backgroundColor;var r,a=n($n.value);try{for(a.s();!(r=a.n()).done;){var u=r.value;t.appendChild(e[u].dom)}}catch(l){a.e(l)}finally{a.f()}return t}function cr(t,n){var r=Tr(n,"general");r&&Object.entries(r).forEach(function(n){var r=e(n,2),a=r[0],u=r[1];t.style[a]=u})}function sr(e,t){var n=Tr(t),r=Tr(t,"general");for(var a in n)e.style[a]=n[a];e.innerText=t.content;var u=t.info;return u&&(e.href=u.href,e.target=u.target),{generalStyle:r}}function fr(e,t){var n=Tr(t),r=Tr(t,"general");for(var a in n)e.style[a]=n[a];return{generalStyle:r}}function dr(e,t){var n=Tr(t),r=Tr(t,"general");for(var a in n)e.style[a]=n[a];return e.innerText=t.content,{generalStyle:r}}function pr(e,t){var n=Tr(t),r=Tr(t,"general");for(var a in n)e.style[a]=n[a];return e.innerText=t.content,{generalStyle:r}}function vr(e,t){var n=Tr(t);for(var r in n)e.style[r]=n[r]}function mr(e,t){var n=t.links,r=t.info;n.forEach(function(n){var a=document.createElement("a");!function(e,t){var n=Tr(t);for(var r in n)e.style[r]=n[r]}(a,t),a.style.display="vertical"===(null==r?void 0:r.layout)?"block":"inline-block",a.href=n.href,a.target="_blank",a.innerText=n.label,e.appendChild(a)})}function hr(e){if(null==e||"object"!==t(e))return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e instanceof Map){var n=new Map;return e.forEach(function(e,t){n.set(hr(t),hr(e))}),n}if(e instanceof Set){var a=new Set;return e.forEach(function(e){a.add(hr(e))}),a}if(Array.isArray(e))return e.map(function(e){return hr(e)});var u=Object.create(Object.getPrototypeOf(e));return[].concat(r(Object.getOwnPropertyNames(e)),r(Object.getOwnPropertySymbols(e))).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);if(n){var r=f({},n);void 0!==n.value&&(r.value=hr(n.value)),Object.defineProperty(u,t,r)}}),u}function yr(e,t){In.value[e].children.push(t),br(t),ar.$emit("makeDom")}function br(e){zn.value[e]={width:"100%",key:e,children:[]},function(e){Nn.value[e]=hr(er)}(e),ar.$emit("makeDom")}function gr(e,t){Fn.value[e]={key:e,type:t},wr(e,t),ar.$emit("makeDom")}function wr(e,t){Gn.value[e]=hr(rr[t]),ar.$emit("makeDom")}function _r(e,t){!function(e){delete Gn.value[e],ar.$emit("makeDom")}(e),delete Fn.value[e],zn.value[t].children=zn.value[t].children.filter(function(t){return t!==e}),ar.$emit("makeDom")}function xr(e,t){zn.value[e].children.forEach(function(t){_r(t,e)}),delete zn.value[e],In.value[t].children=In.value[t].children.filter(function(t){return t!==e}),ar.$emit("makeDom")}function kr(e,t){var n=In.value[t].children;if(n.length<e.length)for(var r=e.length-n.length,a=0;a<r;a++){var u=Vr();yr(t,u)}else n.splice(e.length).forEach(function(e){xr(e,t)});n.forEach(function(t,n){zn.value[t].width=e[n]+"%"}),ar.$emit("makeDom")}function Cr(e){var t=JSON.parse(e);Jn.value=t.compOptions,Nn.value=t.cell_style_map,Wn.value=t.column_row_style_map,In.value=t.column_map,Fn.value=t.comp_map,zn.value=t.cell_map,Gn.value=t.comp_style_map,$n.value=t.columns_source,t.page_style&&(Kn.value=t.page_style)}function jr(e){if(e)return 1.5!==JSON.parse(e).version?(Cr(e),Hn(),{content:or().outerHTML,render:Yn.value}):null}function Vr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return Math.random().toString(16).slice(2,2+e)}function Er(e,t){var n="",r="",a="",u="",l="";return"border"==t&&(n="border",r="borderTop",a="borderRight",u="borderBottom",l="borderLeft"),"padding"==t&&(n="padding",r="paddingTop",a="paddingRight",u="paddingBottom",l="paddingLeft"),"borderRadius"==t&&(n="borderRadius",r="borderTopLeftRadius",a="borderTopRightRadius",u="borderBottomRightRadius",l="borderBottomLeftRadius"),e.more?d(d(d(d({},r,e.top),a,e.right),u,e.bottom),l,e.left):d({},n,e.all)}function Tr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style";if(e){var n={};for(var r in e[t])Mn(r)?Object.assign(n,Er(e[t][r],r)):n[r]=e[t][r];return n}}var Dr=["innerHTML"],Sr=ve({__name:"preview",props:{id:{}},setup:function(e){var t=Ke(e,"id"),n=de(""),r=function(){var e=c(l().m(function e(){var r,a,u;return l().w(function(e){for(;;)switch(e.n){case 0:if(t.value){e.n=1;break}return e.a(2);case 1:return e.n=2,D({id:t.value});case 2:if(r=e.v,a=r.data,!o(a)){e.n=5;break}if(!(u=jr(a.render))||1!==a.type){e.n=4;break}return n.value=u.content,e.n=3,S({id:t.value,type:a.type,temp_name:a.name,render:JSON.stringify(u.render),content:u.content},!1);case 3:e.n=5;break;case 4:n.value=a.content;case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return qe(function(){return t.value},function(){r()}),r(),function(e,t){return ye(),xe("div",{class:"flex-1 min-w-[520px] overflow-auto border-lighter border-1 border-solid rounded-base p-[12px]",innerHTML:Ce(n)},null,8,Dr)}}}),Or={class:"mb-12px font-bold text-medium text-default leading-28px"},Br={class:"flex flex-col w-550px"},Rr={class:"form-card mb-16px pt-20px"},Mr={class:"w-360px"},Ar={class:"w-360px"},Ur={class:"w-[60px] ml-[24px]"},Hr={class:"form-card flex-1 py-[10px]"},Lr={class:"w-360px"},Pr={class:"flex w-360px"},qr={class:"flex-1 mr-10px"},$r={class:"form-card flex flex-col items-center w-640px ml-16px pt-12px p-16px overflow-hidden"},Ir={class:"mb-12px"},zr={class:"min-w-260px text-small"},Fr={class:"min-w-260px text-small"},Nr={class:"min-w-260px text-small"},Wr={class:"mt-[16px]"},Gr=ve({__name:"index",props:me({row:{},isEdit:{type:Boolean,default:!1},refresh:{type:Function,default:function(){}}},{show:{type:Boolean},showModifiers:{}}),emits:["update:show"],setup:function(e){var t=e,n=t.refresh,a=he(e,"show");h();var i,o,s,d,p,v=Qe("formRef"),m=Qe("containerRef"),y=(i=m,o=de(0),s=Re(h()).mainHeight,qe(function(){return s.value},function(e){Ie(function(){if(i.value){var t=i.value.getBoundingClientRect().top;o.value=e-t-16-16-52}})},{immediate:!0}),{height:$e(function(){return 0===o.value?"auto":o.value+"px"})}).height,b=Ae({task_name:O(12),addresser:null,full_name:"",subject:"",temp_id:bt.value,is_record:0,etypes:[],unsubscribe:1,threadsType:0,threads:1,start_time:null,pause:0,remark:"",mail_to:""}),g=de([]),w={full_name:{trigger:["blur","input"],validator:function(){return""!==b.full_name||new Error("请输入显示名称")}},subject:{trigger:["blur","input"],validator:function(){return""!==b.subject||new Error("请输入邮件主题")}},etypes:{trigger:"change",validator:function(){return 0!==b.etypes.length||new Error("请选择联系人")}},temp_id:{trigger:"change",validator:function(){return null!==b.temp_id||new Error("请选择邮件模板")}},start_time:{validator:function(){return 1!==b.pause||null!==b.start_time||new Error("请选择发送时间")}}},_=function(e){b.full_name=e||""},x=Qe("startTimeRef"),C=function(){Ie(function(){var e;null===(e=x.value)||void 0===e||e.restoreValidation()})},j=function(){var e;null===(e=x.value)||void 0===e||e.validate()},V=function(){T({title:"退订设置",area:45,component:tt(function(){return H(function(){return u.import("./unsubscribe-legacy.js?v=1763689792")},void 0,u.meta.url)})})},E=Qe("subjectRef"),D=Qe("mailToRef"),S=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:if(""!==b.subject){e.n=1;break}return null===(t=E.value)||void 0===t||t.focus(),B.error("请输入邮件主题"),e.a(2);case 1:if(""!==b.mail_to){e.n=2;break}return null===(n=D.value)||void 0===n||n.focus(),B.error("请输入测试邮箱"),e.a(2);case 2:if(null!==b.temp_id){e.n=3;break}return B.error("请选择邮件模板"),e.a(2);case 3:k({loading:"正在发送...",request:R({mail_from:b.addresser||"",subject:b.subject,mail_to:b.mail_to,temp_id:b.temp_id||0}),message:!0});case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),L=function(){return{task_name:b.task_name,addresser:b.addresser||"",full_name:b.full_name,subject:b.subject,temp_id:b.temp_id||0,is_record:b.is_record,unsubscribe:b.unsubscribe,threads:0===b.threadsType?0:b.threads,etypes:b.etypes.join(","),start_time:0===b.pause?Math.floor((new Date).getTime()/1e3):Math.floor((b.start_time||0)/1e3),remark:b.remark}},P=function(){b.subject||b.etypes.length>0?M({title:"提示",content:"确定放弃当前编辑吗？",onConfirm:function(){a.value=!1}}):a.value=!1},q=function(){var e=c(l().m(function e(){var r,u,i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(r=v.value)||void 0===r?void 0:r.validate();case 1:u=L(),i=t.isEdit,o=t.row,k({loading:"正在保存...",request:i&&o?A(f(f({},u),{},{id:o.id})):U(u),message:!0,success:function(e){e.status&&(a.value=!1,null==n||n())}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return Ye(function(){bt.value=null,gt.value=!1}),d=t.row,p=t.isEdit,d&&(b.task_name=p?d.task_name:"".concat(d.task_name,"_").concat(O(4)),b.addresser=d.addresser,b.full_name=d.full_name,b.subject=d.subject,b.is_record=d.is_record,b.unsubscribe=d.unsubscribe,b.threadsType=0===d.threads?0:1,b.threads=d.threads,b.etypes=d.etypes.split(",").map(function(e){return dt(e)}),1e3*d.start_time>(new Date).getTime()&&(b.pause=1,b.start_time=1e3*d.start_time),b.temp_id=d.temp_id,b.remark=d.remark),function(t,n){var a=Ge,u=We,l=nt,i=Ne,o=rt,c=Oe,s=at,f=Be,d=Je;return ye(),be(d,{ref_key:"formRef",ref:v,model:Ce(b),rules:w,"label-width":"150px"},{default:ge(function(){return[De("div",Or,_e(e.isEdit?"编辑发送任务":"添加发送任务"),1),De("div",{ref_key:"containerRef",ref:m,class:"flex min-h-654px",style:et({height:Ce(y)})},[De("div",Br,[De("div",Rr,[Te(a,{label:"发件人",prop:"addresser"},{default:ge(function(){return[Te(wn,{value:Ce(b).addresser,"onUpdate:value":n[0]||(n[0]=function(e){return Ce(b).addresser=e}),onChange:_},null,8,["value"])]}),_:1}),Te(a,{label:"显示名称",prop:"full_name"},{default:ge(function(){return[De("div",Mr,[Te(u,{modelValue:Ce(b).full_name,"onUpdate:modelValue":n[1]||(n[1]=function(e){return Ce(b).full_name=e}),placeholder:"请输入显示名称"},null,8,["modelValue"])])]}),_:1}),Te(a,{label:"邮件主题",prop:"subject"},{default:ge(function(){return[De("div",Ar,[Te(u,{ref_key:"subjectRef",ref:E,modelValue:Ce(b).subject,"onUpdate:modelValue":n[2]||(n[2]=function(e){return Ce(b).subject=e}),placeholder:"请输入邮件主题"},null,8,["modelValue"])])]}),_:1}),Te(a,{label:"收件人",prop:"etypes"},{default:ge(function(){return[Te(Bn,{value:Ce(b).etypes,"onUpdate:value":n[3]||(n[3]=function(e){return Ce(b).etypes=e}),name:Ce(g),"onUpdate:name":n[4]||(n[4]=function(e){return Me(g)?g.value=e:null})},null,8,["value","name"])]}),_:1}),Te(a,{label:"邮件模板",prop:"temp_id"},{default:ge(function(){return[Te(yn,{value:Ce(b).temp_id,"onUpdate:value":n[5]||(n[5]=function(e){return Ce(b).temp_id=e})},null,8,["value"])]}),_:1}),Te(a,{label:"保存到发件箱"},{default:ge(function(){return[Te(l,{modelValue:Ce(b).is_record,"onUpdate:modelValue":n[6]||(n[6]=function(e){return Ce(b).is_record=e}),"active-value":1,"inactive-value":0},null,8,["modelValue"])]}),_:1}),Te(a,{label:"退订链接"},{default:ge(function(){return[Te(l,{modelValue:Ce(b).unsubscribe,"onUpdate:modelValue":n[7]||(n[7]=function(e){return Ce(b).unsubscribe=e}),"active-value":1,"inactive-value":0},null,8,["modelValue"]),Te(i,{class:"ml-16px",size:"small",onClick:V},{default:ge(function(){return r(n[14]||(n[14]=[we("设置",-1)]))}),_:1})]}),_:1}),Te(a,{label:"线程数",prop:"threads"},{default:ge(function(){return[Te(c,{modelValue:Ce(b).threadsType,"onUpdate:modelValue":n[8]||(n[8]=function(e){return Ce(b).threadsType=e})},{default:ge(function(){return[Te(o,{label:0},{default:ge(function(){return r(n[15]||(n[15]=[we("自动",-1)]))}),_:1}),Te(o,{label:1},{default:ge(function(){return r(n[16]||(n[16]=[we("自定义",-1)]))}),_:1})]}),_:1},8,["modelValue"]),Ze(De("div",Ur,[Te(s,{class:"!w-[60px]",modelValue:Ce(b).threads,"onUpdate:modelValue":n[9]||(n[9]=function(e){return Ce(b).threads=e}),min:1,max:5,controls:!1,placeholder:"输入线程数"},null,8,["modelValue"])],512),[[Xe,1===Ce(b).threadsType]])]}),_:1})]),De("div",Hr,[Te(a,{ref_key:"startTimeRef",ref:x,label:"发送时间",prop:"start_time"},{default:ge(function(){return[Te(c,{modelValue:Ce(b).pause,"onUpdate:modelValue":n[11]||(n[11]=function(e){return Ce(b).pause=e}),class:"flex items-center",onChange:C},{default:ge(function(){return[Te(o,{label:0},{default:ge(function(){return r(n[17]||(n[17]=[we("立即发送",-1)]))}),_:1}),Te(o,{label:1},{default:ge(function(){return[Te(f,{modelValue:Ce(b).start_time,"onUpdate:modelValue":n[10]||(n[10]=function(e){return Ce(b).start_time=e}),type:"datetime",disabled:0===Ce(b).pause,clearable:"",onChange:j},null,8,["modelValue","disabled"])]}),_:1})]}),_:1},8,["modelValue"])]}),_:1},512),Te(a,{label:"备注"},{default:ge(function(){return[De("div",Lr,[Te(u,{modelValue:Ce(b).remark,"onUpdate:modelValue":n[12]||(n[12]=function(e){return Ce(b).remark=e}),placeholder:"请输入备注"},null,8,["modelValue"])])]}),_:1}),Te(a,{label:"发送测试邮件"},{default:ge(function(){return[De("div",Pr,[De("div",qr,[Te(u,{ref_key:"mailToRef",ref:D,modelValue:Ce(b).mail_to,"onUpdate:modelValue":n[13]||(n[13]=function(e){return Ce(b).mail_to=e}),placeholder:"请输入邮箱"},null,8,["modelValue"])]),Te(i,{onClick:S},{default:ge(function(){return r(n[18]||(n[18]=[we("发送测试邮件",-1)]))}),_:1})])]}),_:1})])]),De("div",$r,[De("div",Ir,[Te(a,{label:"From: ","show-feedback":!1,class:"!mb-[0]","label-style":{fontWeight:"bold"}},{default:ge(function(){return[De("div",zr,_e(Ce(b).addresser),1)]}),_:1}),Te(a,{label:"To: ","show-feedback":!1,class:"!mb-[0]","label-style":{fontWeight:"bold"}},{default:ge(function(){return[De("div",Fr,_e(Ce(g).length>0?Ce(g).join(", "):"--"),1)]}),_:1}),Te(a,{label:"Subject: ","show-feedback":!1,class:"!mb-[0]","label-style":{fontWeight:"bold"}},{default:ge(function(){return[De("div",Nr,_e(Ce(b).subject||"--"),1)]}),_:1})]),Te(Sr,{id:Ce(b).temp_id},null,8,["id"])])],4),De("div",Wr,[Te(i,{onClick:P},{default:ge(function(){return r(n[19]||(n[19]=[we("取消",-1)]))}),_:1}),Te(i,{type:"primary",onClick:q},{default:ge(function(){return r(n[20]||(n[20]=[we("确定",-1)]))}),_:1})])]}),_:1},8,["model"])}}}),Jr=y(Gr,[["__scopeId","data-v-8b711757"]]),Kr=ut("MAIL_MARKET_TASK",function(){return{formModal:Ae({row:null,isEdit:!1,title:""})}}),Qr=Re(Kr()).formModal,Yr=function(e){Qr.value.row=e,Qr.value.isEdit=!1,gt.value=!0},Zr=ve({__name:"index",setup:function(e){var t,n=h().mainHeight,a=de({isEdit:!1,title:"",row:void 0}),i=L({request:(t=c(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return n={p:t.p,size:t.limit},e.n=1,P(n);case 1:return r=e.v,a=r.data,e.a(2,{data:a.data||[],total:q(a.page)||0})}},e)})),function(e){return t.apply(this,arguments)}),columns:[{prop:"created",label:"时间",width:180,render:function(e){return s(e.created)}},{prop:"subject",label:"邮件主题",showOverflowTooltip:!0},{prop:"addresser",label:"发件人",width:160,showOverflowTooltip:!0},{prop:"recipient_count",label:"收件人",width:160},{prop:"success_count",label:"成功",width:90,render:function(e){return 2===e.task_process?e.recipient_count-e.count.error_count:"--"}},{prop:"error_count",label:"失败",width:90,render:function(e){return 2===e.task_process?Te("a",{class:"bt-link !text-danger",href:"javascript:;",onClick:function(){v(e)}},[e.count.error_count]):"--"}},{prop:"task_process",label:"状态",width:90,render:function(e){return 0===e.task_process?Te("span",{class:"text-warning"},[we(" 待处理 ")]):1===e.task_process?Te("span",{class:"text-warning"},[we(" 执行中 ")]):"完成"}},{prop:"remark",label:"备注",showOverflowTooltip:!0},jt(function(e){return[{title:"编辑",onClick:function(){m(e)}},{title:"查看",onClick:function(){p(e)}},{title:e.task_process?"暂停":"发送",isHide:function(e){return 2===e.task_process},onClick:function(){b(e)}},{title:"删除",onClick:function(){y(e)}}]})]}),o=i.BtTable,f=i.BtPage,d=(i.BtRefresh,i.BtTableCategory,i.BtRecommendSearch,i.BtColumn,i.BtBatch,i.BtErrorMask,i.refresh),p=function(e){T({title:"查看【".concat(e.subject||"","】"),area:64,compData:{row:e,onAdd:Yr},component:function(){return H(function(){return u.import("./index-legacy352.js?v=1763689792").then(function(e){return e.i})},void 0,u.meta.url)}})},v=function(e){T({title:"错误日志【".concat(e.subject,"】"),area:70,compData:{row:e},component:function(){return H(function(){return u.import("./index-legacy353.js?v=1763689792")},void 0,u.meta.url)}})},m=function(e){a.value.row=e,a.value.isEdit=!0,gt.value=!0},y=function(){var e=c(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:M({title:"删除任务",content:"是否删除【".concat(t.subject,"】任务？"),onConfirm:function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:k({loading:"正在删除任务，请稍候...",message:!0,request:$({task_id:t.id}),success:function(){d()}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t;M({title:"更改任务状态【".concat(e.subject,"】"),content:e.task_process?"暂停任务后，可以继续发送任务！":"立即开始发送任务吗？",onConfirm:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:k({loading:"正在处理，请稍候...",message:!0,request:I({task_id:e.id,pause:e.task_process?1:0}),success:function(){d()}});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})};return qe(gt,function(e){e||(a.value.row=void 0,a.value.isEdit=!1,a.value.title="")}),function(e,t){var u=Ne,l=Ct;return ye(),xe("div",null,[Ze(Te(l,null,{"header-left":ge(function(){return[Te(u,{type:"primary",onClick:t[0]||(t[0]=function(e){return Ce(Yr)()})},{default:ge(function(){return r(t[2]||(t[2]=[we(" 添加发送任务 ",-1)]))}),_:1}),Te(pt,{class:"ml-16px"})]}),content:ge(function(){return[Te(Ce(o),{"min-height":Ce(n)},null,8,["min-height"])]}),"footer-right":ge(function(){return[Te(Ce(f))]}),_:1},512),[[Xe,!Ce(gt)]]),Ce(gt)?(ye(),be(Jr,{key:0,show:Ce(gt),"onUpdate:show":t[1]||(t[1]=function(e){return Me(gt)?gt.value=e:null}),"is-edit":Ce(a).isEdit,title:Ce(a).title,row:Ce(a).row,refresh:Ce(d)},null,8,["show","is-edit","title","row","refresh"])):lt("",!0)])}}}),Xr=ve({__name:"type-select",props:{value:{default:function(){return[]}},valueModifiers:{}},emits:["update:value"],setup:function(e,t){var n=t.expose,r=he(e,"value"),a=de([]),u=st(),i=u.loading,o=u.setLoading,s=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,o(!0),e.n=1,V({});case 1:t=e.v,n=t.data,m(n)&&(a.value=n.map(function(e){return{label:e.mail_type,value:e.id}}));case 2:return e.p=2,o(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}();return s(),He(function(){}),n({getType:s}),function(e,t){var n=Ee,u=Ve;return ye(),be(u,it(e.$attrs,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.value=e}),loading:Ce(i)}),{default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(a),function(e){return ye(),be(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},16,["modelValue","loading"])}}}),ea={class:"px-[20px] pt-[24px] pb-[8px]"},ta={class:"w-300px"},na={class:"w-300px"},ra=ve({__name:"index",props:{compData:{}},setup:function(e,t){var n=t.expose,r=e.compData,a=de(null),u=Ae({etypes:[]}),i={etypes:{trigger:"change",validator:function(){return!!u.etypes.length||new Error("请选择邮件类型")}}},o=function(){return{etypes:u.etypes.join(","),recipients:r.row.recipient,active:r.row.active}},s=function(){var e=c(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:k({request:z(o()),loading:"更改中...",message:!0,success:function(){r.onRefresh(),t()}});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return He(function(){Ie(function(){u.etypes=r.row.mail_type.map(function(e){return Number(Object.keys(e)[0])}).filter(function(e){return!Number.isNaN(e)})})}),n({onConfirm:s}),function(e,t){var n=We,l=Ge,o=Je;return ye(),xe("div",ea,[Te(o,{ref_key:"formRef",ref:a,model:Ce(u),rules:i},{default:ge(function(){return[Te(l,{label:"邮箱"},{default:ge(function(){return[De("div",ta,[Te(n,{value:Ce(r).row.recipient,"onUpdate:value":t[0]||(t[0]=function(e){return Ce(r).row.recipient=e}),disabled:!0},null,8,["value"])])]}),_:1}),Te(l,{label:"分组",prop:"etypes"},{default:ge(function(){return[De("div",na,[Te(Xr,{ref:"typeSelect",modelValue:Ce(u).etypes,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Ce(u).etypes=e}),multiple:"",filterable:""},null,8,["modelValue"])])]}),_:1})]}),_:1},8,["model"])])}}}),aa={class:"flex items-center"},ua={class:"ml-40px"},la=ve({__name:"import",props:me({path:{default:""},accept:{default:function(){return[]}}},{value:{},valueModifiers:{}}),emits:me(["change"],["update:value"]),setup:function(e,t){var n=t.emit,a=e,u=a.path,l=a.accept,i=he(e,"value");qe(i,function(e){o("change",e)});var o=n,c=function(){ft({path:u,size:5,uploadData:{accept:l.map(function(e){return".".concat(e)}).join(","),multiple:!1,limit:1},refreshEvent:function(e,t){i.value=e[0].name,t()}})};return function(e,t){var n=Ne;return ye(),xe("div",null,[De("div",aa,[Te(n,{type:"primary",onClick:c},{default:ge(function(){return r(t[0]||(t[0]=[we("导入",-1)]))}),_:1}),De("div",ua,[t[1]||(t[1]=we(" 文件名: ",-1)),De("span",{class:ze(i.value?"text-primary":"text-dangerDark")},_e(i.value||"未选择任何文件"),3)])]),Fe(e.$slots,"default")])}}}),ia={class:"p-20px"},oa={class:"w-260px"},ca=ve({__name:"index",props:{compData:{}},setup:function(e,t){var n=t.expose,a=ot("popupClose"),u=e.compData,i=de(null),o=Ae({etypes:-1!==u.group&&void 0!==u.group?[u.group]:[],file:""}),s={etypes:{trigger:"change",validator:function(){return!!o.etypes.length||new Error("请选择邮件类型")}},file:{required:!0,message:"请上传文件",trigger:["blur","change"]}},f=function(){return{etypes:o.etypes.join(","),file:o.file,active:u.active}},d=function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(t=i.value)||void 0===t?void 0:t.validate();case 1:k({request:F(f()),loading:"导入中...",message:!0,success:function(){u.refresh(),null==a||a()}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return n({onConfirm:d}),function(e,t){var n=Ge,a=Je,u=j;return ye(),xe("div",ia,[Te(a,{ref_key:"formRef",ref:i,model:Ce(o),rules:s},{default:ge(function(){return[Te(n,{label:"分组",prop:"etypes"},{default:ge(function(){return[De("div",oa,[Te(Xr,{ref:"typeSelect",class:"bt-multiple-select",value:Ce(o).etypes,"onUpdate:value":t[0]||(t[0]=function(e){return Ce(o).etypes=e}),multiple:"",filterable:""},null,8,["value"])])]}),_:1}),Te(n,{label:"文件",prop:"file"},{default:ge(function(){return[Te(la,{value:Ce(o).file,"onUpdate:value":t[1]||(t[1]=function(e){return Ce(o).file=e}),path:"/www/server/panel/data/mail/in_bulk/recipient",accept:["txt","json"]},null,8,["value"])]}),_:1})]}),_:1},8,["model"]),Te(u,{class:"mt-4px"},{default:ge(function(){return r(t[2]||(t[2]=[De("li",null," 文件类型: txt/json 每行一个邮箱 不超过5 MB ",-1)]))}),_:1})])}}}),sa=de([]),fa=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,V({});case 1:t=e.v,n=t.data,sa.value=m(n)?n:[];case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),da={class:"p-20px"},pa={class:"mt-12px"},va=ve({__name:"set",setup:function(e){var t,n=de(""),a=L({request:(t=c(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fa();case 1:return e.a(2,{data:sa.value||[],total:sa.value.length||0})}},e)})),function(e){return t.apply(this,arguments)}),columns:[{prop:"mail_type",label:"分组名称"},jt(function(e){return[{render:function(e){return Te("span",{class:""},[Te("span",{class:"bt-link ".concat(0===e.id?"!cursor-not-allowed !opacity-50":""),onClick:function(){0!==e.id&&s(e)}},[we("编辑")]),Te(Tt,null,null)])}},{render:function(e){return Te("span",{class:"bt-link ".concat(0===e.id?"!cursor-not-allowed !opacity-50":""),onClick:function(){0!==e.id&&f(e)}},[we("删除")])}}]})]}),u=a.BtTable,i=a.refresh,o=function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:if(""!==(t=n.value.trim())){e.n=1;break}return B.error("请输入分组名称"),e.a(2);case 1:return e.n=2,J({mail_type:t});case 2:i(),n.value="";case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),s=function(e){d.id=e.id,d.mail_type=e.mail_type;var t,n=N({data:function(){return d},options:function(e){return $e(function(){return[Dt("分组名称","mail_type",{attrs:{placeholder:"请输入分组名称"},rules:[{required:!0,message:"请输入分组名称",trigger:"blur"}]})]})},submit:(t=c(l().m(function e(t,n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n();case 1:return e.a(2,k({request:W(ct(d)),loading:"编辑中...",message:!0,success:function(){i()}}))}},e)})),function(e,n){return t.apply(this,arguments)})}),r=n.BtForm,a=n.submit;T({title:"编辑分组",component:function(){return Te(r,{class:"pt-[14px]"},null)},area:35,showFooter:!0,onConfirm:a})},f=function(e){var t;M({title:"删除分组【".concat(e.mail_type,"】"),content:"确定要删除该分组吗？",onConfirm:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:k({request:G({ids:"".concat(e.id)}),loading:"删除中...",message:!0,success:function(){i()}});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})};de(null);var d=Ae({id:-1,mail_type:""});return function(e,t){var a=We,l=Le,i=Ne,c=Pe;return ye(),xe("div",da,[Te(c,{gutter:10},{default:ge(function(){return[Te(l,{span:20},{default:ge(function(){return[Te(a,{modelValue:Ce(n),"onUpdate:modelValue":t[0]||(t[0]=function(e){return Me(n)?n.value=e:null}),placeholder:"请输入分组名称"},null,8,["modelValue"])]}),_:1}),Te(l,{span:4},{default:ge(function(){return[Te(i,{type:"primary",onClick:o},{default:ge(function(){return r(t[1]||(t[1]=[we("添加",-1)]))}),_:1})]}),_:1})]}),_:1}),De("div",pa,[Te(Ce(u),{"max-height":300})])])}}}),ma={class:"w-200px"},ha={class:"px-[12px] py-[8px]"},ya=ve({__name:"index",props:{value:{default:function(){return-1}},valueModifiers:{}},emits:["update:value"],setup:function(e){var t=he(e,"value"),n=$e(function(){var e=sa.value.map(function(e){return{label:e.mail_type,value:e.id}});return e.unshift({label:"全部",value:-1}),e}),a=function(e){return"分组: ".concat(e)},u=function(){T({title:"分组管理",area:36,component:va})},i=st(),o=i.loading,s=i.setLoading,f=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,s(!0),e.n=1,fa();case 1:return e.p=1,s(!1),e.f(1);case 2:return e.a(2)}},e,null,[[0,,1,2]])}));return function(){return e.apply(this,arguments)}}();return f(),Ye(function(){sa.value=[]}),function(e,l){var i=Ne,c=Ee,s=Ve;return ye(),xe("div",ma,[Te(s,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=function(e){return t.value=e}),loading:Ce(o)},{label:ge(function(e){var t=e.label;e.value;return[we(_e(a(t)),1)]}),footer:ge(function(){return[De("div",ha,[Te(i,{class:"!w-full",onClick:u},{default:ge(function(){return r(l[1]||(l[1]=[we("分组管理",-1)]))}),_:1})])]}),default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(n),function(e){return ye(),be(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])])}}}),ba={class:"px-20px pt-24px pb-8px"},ga={class:"w-240px"},wa=ve({__name:"batch",props:{compData:{}},setup:function(e,t){var n=t.expose,r=e.compData,a=Qe("formRef"),u=Ae({type:null}),i={type:{trigger:"change",validator:function(){return null!==u.type||new Error("请选择邮件类型")}}},o=$e(function(){return sa.value.map(function(e){return{label:e.mail_type,value:e.id}})}),s=st(),f=s.loading,d=s.setLoading,p=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,d(!0),e.n=1,fa();case 1:return e.p=1,d(!1),e.f(1);case 2:return e.a(2)}},e,null,[[0,,1,2]])}));return function(){return e.apply(this,arguments)}}();p();var v=function(){return{etypes:"".concat(u.type||0),recipients:r.rows.map(function(e){return e.recipient}).join(","),active:r.rows[0].active}},m=function(){var e=c(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(n=a.value)||void 0===n?void 0:n.validate();case 1:k({loading:"修改中...",message:!0,request:K(v()),success:function(){null==r||r.onRefresh(),t()}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return n({onConfirm:m}),function(e,t){var n=Ee,r=Ve,l=Ge,c=Je;return ye(),xe("div",ba,[Te(c,{ref_key:"formRef",ref:a,model:Ce(u),rules:i},{default:ge(function(){return[Te(l,{label:"分组",prop:"type"},{default:ge(function(){return[De("div",ga,[Te(r,{modelValue:Ce(u).type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Ce(u).type=e}),loading:Ce(f),multiple:"",filterable:""},{default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(o),function(e){return ye(),be(n,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","loading"])])]}),_:1})]}),_:1},8,["model"])])}}}),_a=["show"],xa={class:"text-center fw-bold text-large text-darkSecondary"},ka={class:"w-96% mx-auto"},Ca=ve({__name:"index",props:{active:{default:0}},setup:function(e){var t=Ke(e,"active"),n=function(){return[{data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:["1月","2月","3月","4月","5月","6月"]}]},r=function(){return[{name:"Count",type:"line",data:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0,0,0,0],itemStyle:{color:"var(--el-color-primary)"},smooth:!0,showSymbol:!1,sampling:"average",areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,global:!1,colorStops:[{offset:0,color:"rgba(var(--el-color-primar-rgb), 0.4)"},{offset:.7,color:"rgba(32, 164, 58, 0)"}]}}}]},a=Ue({tooltip:{trigger:"axis",order:"seriesDesc",axisPointer:{type:"shadow"}},grid:{top:"16%",left:"2%",right:"2%",bottom:"4%",containLabel:!0},xAxis:n(),yAxis:{type:"value"},series:r()}),u=st(),i=u.loading,o=u.setLoading,s=b({options:{}}),f=s.BtECharts,d=(s.getEChart,s.setOption),p=(s.setQuickOption,function(){var e=c(l().m(function e(){var u,i,c,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,o(!0),e.n=1,Q({active:t.value});case 1:u=e.v,i=u.data.data,m(i)&&(c=i.map(function(e){return e.month}),s=i.map(function(e){return e.count}),a.xAxis=n(c),a.series=r(s)),d(a);case 2:return e.p=2,o(!1),e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}());return p(),qe(function(){return t.value},function(){p()}),function(e,n){return ye(),xe("div",{class:"mb-16px",show:Ce(i)},[De("div",xa,_e(Ce(t)?"订阅":"取消订阅")+" 趋势 ",1),De("div",ka,[Te(Ce(f),{class:"h-[20rem]"})])],8,_a)}}}),ja=ve({__name:"index",setup:function(e){var t,n=Ae({p:1,size:10,active:1,keyword:""}),a=function(){var e=c(l().m(function e(t,n,r,a){var u,i,o;return l().w(function(e){for(;;)switch(e.n){case 0:a.label,u=a.value,i={del:"删除",subscribe:"订阅",unsubscribe:"取消订阅"},o=function(){var e=c(l().m(function e(t){var n,r,a,i;return l().w(function(e){for(;;)switch(e.n){case 0:n=new Map([["subscribe",X],["unsubscribe",X],["del",ee]]),r=n.get(u),i=u,e.n="subscribe"===i||"unsubscribe"===i?1:"del"===i?4:7;break;case 1:if(a="subscribe"===u?1:0,!r){e.n=3;break}return e.n=2,r({recipient:t.recipient,active:a});case 2:case 5:return e.a(2,e.v);case 3:case 6:return e.a(3,7);case 4:if(!r){e.n=6;break}return e.n=5,r({ids:t.id,active:t.active});case 7:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),M({title:"批量".concat(i[u]),content:"确定".concat(i[u],"选定项吗？"),onConfirm:function(){var e=c(l().m(function e(){var t,r;return l().w(function(e){for(;;)switch(e.n){case 0:return t=[],r=B.load("批量".concat(i[u],"中...")),e.n=1,n(function(){var e=c(l().m(function e(n){var a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,o(n);case 1:a=e.v,t.push({name:n.recipient,status:a.status,message:a.msg,msg:a.msg}),r.close();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:kt(t,{title:"".concat(i[u])}),m();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),u=Z([{label:"删除",value:"del",event:a},{label:"订阅",value:"subscribe",event:a},{label:"取消订阅",value:"unsubscribe",event:a},{label:"设置分组",value:"category",event:function(e,t,n,r){T({title:"设置分组",area:45,showFooter:!0,compData:{rows:n.value,onRefresh:m},component:wa})}}]),i=L({request:(t=c(l().m(function e(t){var r,a,u,i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return-1===(r={etype:wt.value,search:t.search,p:t.p,size:t.limit,active:n.active}).etype&&delete r.etype,e.n=1,Y(r);case 1:return a=e.v,u=a.data,i=u.data,o=u.total,e.a(2,{data:i,total:o})}},e)})),function(e){return t.apply(this,arguments)}),columns:[Vt(),{prop:"recipient",label:"邮箱",showOverflowTooltip:!0},{prop:"mail_type",label:"分组",render:function(e){return e.mail_type.map(function(e){return Object.values(e)[0]}).join(", ")}},{prop:"created",label:"添加时间",width:140,render:function(e){return s(e.created)}},jt(function(e){return[{title:"更改列表",onClick:(r=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:T({title:"更改列表",area:50,showFooter:!0,compData:{row:e,onRefresh:function(){m()}},component:ra});case 1:return t.a(2)}},t)})),function(){return r.apply(this,arguments)})},{title:e.active?"取消订阅":"订阅",onClick:(n=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:M({title:"".concat(e.active?"取消订阅":"订阅"," [").concat(e.recipient,"]"),content:"您确定要从此邮箱".concat(e.active?"取消订阅":"订阅","吗？"),onConfirm:function(){var t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:k({request:X({recipient:e.recipient,active:0===e.active?1:0}),loading:"更改中...",message:!0,success:function(){m()}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)})),function(){return n.apply(this,arguments)})},{title:"删除",onClick:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:M({title:"删除 [".concat(e.recipient,"]"),content:"您确定要删除此".concat(e.active?"订阅":"取消订阅","邮件吗？"),onConfirm:function(){var t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:k({request:ee({ids:e.id,active:e.active}),loading:"删除中...",message:!0,success:function(){m()}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})}];var t,n,r})],extension:[u]}),o=i.BtTable,f=i.BtPage,d=i.BtSearch,p=(i.BtRefresh,i.BtColumn,i.BtBatch),v=(i.BtTableCategory,i.BtErrorMask,i.tableRef),m=(i.classList,i.refresh),h=function(){T({title:"导入联系人",area:45,showFooter:!0,compData:{active:n.active,group:wt.value,refresh:function(){m()}},component:ca})},y=function(e){n.active=e,n.p=1,m()},b=function(){n.p=1,m()};return Ye(function(){wt.value=-1}),function(e,t){var a=Ne,u=Se,l=Oe,i=Ct;return ye(),xe("div",null,[Te(Ca,{active:Ce(n).active},null,8,["active"]),Te(i,null,{"header-left":ge(function(){return[Te(a,{type:"primary",onClick:h},{default:ge(function(){return r(t[3]||(t[3]=[we("导入",-1)]))}),_:1}),Te(pt,{class:"ml-16px"})]}),"header-right":ge(function(){return[Te(l,{modelValue:Ce(n).active,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Ce(n).active=e}),onChange:y,class:"w-[120px] mr-[12px]"},{default:ge(function(){return[Te(u,{label:"订阅",value:1}),Te(u,{label:"取消订阅",value:0})]}),_:1},8,["modelValue"]),Te(ya,{value:Ce(wt),"onUpdate:value":[t[1]||(t[1]=function(e){return Me(wt)?wt.value=e:null}),Ce(m)],class:"mr-[12px]"},null,8,["value","onUpdate:value"]),Te(Ce(d),{modelValue:Ce(n).keyword,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Ce(n).keyword=e}),class:"!w-[240px]",placeholder:"请输入邮箱",onSearch:b},null,8,["modelValue"])]}),content:ge(function(){return[Te(Ce(o),{ref_key:"tableRef",ref:v},null,512)]}),"footer-left":ge(function(){return[Te(Ce(p),{ref:"batchRef"},null,512)]}),"footer-right":ge(function(){return[Te(Ce(f),{ref:"pageRef"},null,512)]}),_:1})])}}}),Va={class:"p-[20px] pt-[24px] pb-[8px]"},Ea={class:"w-[200px]"},Ta=ve({__name:"form",props:{compData:{}},setup:function(e,t){var n=t.expose,r=ot("popupClose"),a=e.compData,u=a.row,i=a.isEdit,o=a.refresh,s=de(null),d=Ae({mail_type:""}),p={mail_type:{required:!0,trigger:"blur",message:"请输入分组名"}},v=function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(t=s.value)||void 0===t?void 0:t.validate();case 1:k({loading:"正在".concat(i?"编辑":"添加","分组"),message:!0,request:i&&u?W(f(f({},ct(d)),{},{id:u.id})):J(ct(d)),success:function(e){e.status&&(null==r||r(),null==o||o())}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return n({onConfirm:v}),function(e,t){var n=We,r=Ge,a=Je;return ye(),xe("div",Va,[Te(a,{ref_key:"formRef",ref:s,model:Ce(d),rules:p},{default:ge(function(){return[Te(r,{label:"分组名",prop:"mail_type"},{default:ge(function(){return[De("div",Ea,[Te(n,{modelValue:Ce(d).mail_type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Ce(d).mail_type=e}),placeholder:"请输入组名"},null,8,["modelValue"])])]}),_:1})]}),_:1},8,["model"])])}}}),Da=ve({__name:"index",setup:function(e,t){var n,a,u=t.expose,i=Ae({show:!1,title:"",data:{isEdit:!1,row:null,refresh:function(){h()}}}),o=function(){i.data.row=null,i.data.isEdit=!1,i.title="添加分组",T({title:"添加分组",component:Ta,compData:i.data,area:40,showFooter:!0})},f=Z([{label:"删除",value:"delete",event:(n=c(l().m(function e(t,n,r,a){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t({title:"批量删除",content:"确定删除选定项吗？",column:[{label:"群组名称",prop:"mail_type"},Et()],onConfirm:function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t=[],e.n=1,n(function(){var e=c(l().m(function e(n){var r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,re({ids:n.id});case 1:r=e.v,t.push({name:n.mail_type,status:r.status,message:r.msg,msg:r.msg});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:kt(t,{title:"删除"}),h();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,t,r,a){return n.apply(this,arguments)})}]),d=L({request:(a=c(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,te(t);case 1:return n=e.v,r=n.data,e.a(2,{data:r.data||[],total:r.total||0})}},e)})),function(e){return a.apply(this,arguments)}),columns:[Vt(),{prop:"mail_type",label:"群组名称",render:function(e){return Te("a",{class:"bt-link",href:"javascript:;",onClick:function(){_t(e.id)}},[e.mail_type])}},{prop:"subscribers",label:"订阅",align:"center"},{prop:"unsubscribers",label:"取消订阅",align:"center"},{prop:"created",label:"添加时间",render:function(e){return s(e.created)}},jt(function(e){return[{title:"复制链接",isHide:function(e){return!0},onClick:function(){ne(e.subscribe_url)}},{title:"重命名",onClick:function(){!function(e){i.data.row=e,i.data.isEdit=!0,i.title="编辑分组",T({title:"编辑分组",component:Ta,compData:i.data,area:40,showFooter:!0})}(e)}},{title:"删除",onClick:function(){var t;e.subscribers||e.unsubscribers?B.error("请先修改或删除此类型下的取消订阅或订阅者，才能继续删除\t"):M({title:"删除",content:"确定删除【".concat(e.mail_type,"】分组吗？"),onConfirm:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:k({loading:"正在删除",message:!0,request:re({ids:e.id}),success:function(){h()}});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})}}]})],extension:[f]}),p=d.BtTable,v=d.BtPage,m=(d.BtRefresh,d.BtColumn,d.BtBatch),h=d.refresh,y=d.BtSearch;return u({init:h}),function(e,t){var n=Ne,a=Ct;return ye(),xe("div",null,[Te(a,null,{"header-left":ge(function(){return[Te(n,{type:"primary",onClick:o},{default:ge(function(){return r(t[0]||(t[0]=[we("添加",-1)]))}),_:1}),Te(pt,{class:"ml-16px"})]}),"header-right":ge(function(){return[Te(Ce(y),{class:"!w-[240px]",placeholder:"请输入名称",onSearch:Ce(h)},null,8,["onSearch"])]}),content:ge(function(){return[Te(Ce(p))]}),"footer-left":ge(function(){return[Te(Ce(m))]}),"footer-right":ge(function(){return[Te(Ce(v))]}),_:1})])}}}),Sa=ve({__name:"index",setup:function(e,t){var n,a,u=t.expose,i=Ae({p:1,size:10,status:"bounced",search:""}),o=Z([{label:"删除",value:"del",event:(n=c(l().m(function e(t,n,r,a){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t({title:"批量删除",content:"您确定要删除选定项吗？",column:[{label:"邮箱",prop:"recipient"},Et()],onConfirm:function(){var e=c(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t=[],e.n=1,n(function(){var e=c(l().m(function e(n){var r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ue({ids:n.id});case 1:r=e.v,t.push({name:n.recipient,status:r.status,msg:r.msg});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());case 1:kt(t,{title:"批量删除"}),h();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,t,r,a){return n.apply(this,arguments)})}]),f=L({request:(a=c(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ae(t);case 1:return n=e.v,r=n.data,e.a(2,{data:r.data||[],total:r.total||0})}},e)})),function(e){return a.apply(this,arguments)}),columns:[Vt(),{prop:"recipient",label:"邮箱"},{prop:"task_name",label:"邮件主题"},{prop:"status",label:"类型"},{prop:"state",label:"状态",render:function(e){return e.state||e.count>=3?"无效":"观察"}},{prop:"created",label:"添加时间",render:function(e){return s(e.created)}},jt(function(e){return[{title:"删除",onClick:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:M({title:"删除",content:"您确定要删除".concat(e.recipient,"吗？"),onConfirm:function(){var t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:k({loading:"正在删除，请稍候...",message:!0,request:ue({ids:e.id}),success:function(){h()}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})}];var t})],extension:[o]}),d=f.BtTable,p=f.BtPage,v=(f.BtRefresh,f.BtColumn,f.BtBatch),h=f.refresh,y=f.BtSearch,b=de([]),g=function(){i.p=1,h()},w=function(){var e;M({title:"清空无效列表",content:"这将清除该类型下的所有数据，您确定要继续吗？",onConfirm:(e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,le({status:i.status});case 1:h();case 2:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})})},_=function(){var e=c(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ie();case 1:t=e.v,n=t.data.data,m(n)&&(b.value=n.map(function(e){return{label:e.status,value:e.status}}),b.value.length&&(i.status=b.value[0].value)),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),x=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_();case 1:h();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return x(),u({init:x}),function(e,t){var n=Ne,a=Ee,u=Ve,l=Ct;return ye(),xe("div",null,[Te(l,null,{"header-left":ge(function(){return[Te(n,{type:"primary",onClick:Ce(h)},{default:ge(function(){return r(t[1]||(t[1]=[we("刷新",-1)]))}),_:1},8,["onClick"]),Te(n,{onClick:w},{default:ge(function(){return r(t[2]||(t[2]=[we("清空",-1)]))}),_:1}),Te(pt,{class:"ml-16px"})]}),"header-right":ge(function(){return[Te(u,{class:"!w-[200px] mr-[10px]",modelValue:Ce(i).status,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Ce(i).status=e}),onUpdate:g},{default:ge(function(){return[(ye(!0),xe(je,null,ke(Ce(b),function(e){return ye(),be(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"]),Te(Ce(y),{class:"!w-[240px]",placeholder:"请输入名称",onSearch:Ce(h)},null,8,["onSearch"])]}),content:ge(function(){return[Te(Ce(d))]}),"footer-left":ge(function(){return[Te(Ce(v))]}),"footer-right":ge(function(){return[Te(Ce(p))]}),_:1})])}}}),Oa=function(e){var t;t="task",xt.value=t,bt.value=e,Ie(function(){gt.value=!0})},Ba={class:"mb-20px"},Ra={class:"w-320px"},Ma={class:"flex items-center"},Aa=ve({__name:"form",props:me({data:{default:null},refresh:{}},{show:f({type:Boolean},{default:!1}),showModifiers:{}}),emits:["update:show"],setup:function(e){var t=e,n=tt(function(){return H(function(){return u.import("./index-legacy354.js?v=1763689792")},void 0,u.meta.url)}),a=Ke(t,"data"),i=he(e,"show"),s=Qe("editorRef"),f=de(1),d=de(""),p=function(){i.value=!1},v=de(!1),m=function(){var e=c(l().m(function e(){var t,n,r,u=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=u.length>0&&void 0!==u[0]&&u[0],!a.value){e.n=3;break}return e.p=1,t||(v.value=!0),e.n=2,S({id:a.value.id,type:f.value,temp_name:d.value,render:JSON.stringify(null===(n=s.value)||void 0===n?void 0:n.getEmailData()),content:(null===(r=s.value)||void 0===r?void 0:r.getEmailHTML())||""},t);case 2:return e.p=2,t||(v.value=!1),e.f(2);case 3:return e.a(2)}},e,null,[[1,,2,3]])}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,m(!0);case 1:p(),t.refresh();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return v.value=!0,e.n=1,Ie();case 1:setTimeout(c(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a.value){e.n=1;break}return e.a(2);case 1:return e.p=1,d.value=a.value.name,e.n=2,D({id:a.value.id});case 2:t=e.v,n=t.data,o(n)&&(null===(r=s.value)||void 0===r||r.setEmailData(n.render));case 3:return e.p=3,setTimeout(function(){v.value=!1},500),e.f(3);case 4:return e.a(2)}},e,null,[[1,,3,4]])})),500);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return He(function(){y()}),function(e,t){var a=Ge,u=We,l=Je,i=Ne;return ye(),xe("div",null,[t[6]||(t[6]=De("div",{class:"mb-14px font-bold text-large text-default leading-28px"},"邮件模板编辑",-1)),Te(l,{"label-position":"left"},{default:ge(function(){return[lt("",!0),De("div",Ba,[Te(Ce(n),{ref_key:"editorRef",ref:s,save:m},null,512)]),Te(a,{label:"模板名称","label-width":"50px"},{default:ge(function(){return[De("div",Ra,[Te(u,{modelValue:Ce(d),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Me(d)?d.value=e:null})},null,8,["modelValue"])])]}),_:1})]}),_:1}),De("div",Ma,[Te(i,{onClick:p},{default:ge(function(){return r(t[4]||(t[4]=[we("返回",-1)]))}),_:1}),Te(i,{type:"primary",loading:Ce(v),disabled:Ce(v),class:"ml-12px",onClick:h},{default:ge(function(){return r(t[5]||(t[5]=[we(" 保存 ",-1)]))}),_:1},8,["loading","disabled"])])])}}}),Ua=y(Aa,[["__scopeId","data-v-a8721274"]]),Ha=["innerHTML"],La=ve({__name:"preview",props:{compData:{}},setup:function(e){var t=Ke(e.compData,"row"),n=de(""),r=function(){var e=c(l().m(function e(){var r,a,u;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,D({id:t.value.id});case 1:if(r=e.v,a=r.data,!o(a)){e.n=4;break}if(!(u=jr(a.render))||1!==a.type){e.n=3;break}return n.value=u.content,e.n=2,S({id:t.value.id,type:a.type,temp_name:a.name,render:JSON.stringify(u.render),content:u.content},!1);case 2:e.n=4;break;case 3:n.value=a.content;case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return r(),function(e,t){return ye(),xe("div",{class:"min-h-600px overflow-auto",innerHTML:Ce(n)},null,8,Ha)}}}),Pa={class:"relative"},qa=ve({__name:"index",setup:function(e){var t,n,a=de(!1),u=de(null),i=function(){var e=c(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return t="template_".concat(s(new Date,"yyyyMMddHHmmss")),e.n=1,ce({temp_name:t,type:1});case 1:n=e.v,r=n.data.data,h(),o(r)&&(u.value=r,a.value=!0);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),f=Z([{label:"删除",value:"delete",event:(t=c(l().m(function e(t,n,r,a){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t({title:"批量删除",content:"确定删除选定项吗？",column:[{label:"模板名称",prop:"name"},Et()],onConfirm:function(){var e=c(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:k({loading:"删除中...",message:!0,request:se({id:r.value.map(function(e){return e.id})}),success:function(){h()}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,n,r,a){return t.apply(this,arguments)})}]),d=L({request:(n=c(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,oe({p:t.p,size:t.limit});case 1:return n=e.v,r=n.data,e.a(2,{data:r.data||[],total:r.total||0})}},e)})),function(e){return n.apply(this,arguments)}),columns:[Vt(),{prop:"name",label:"名称"},{prop:"created",label:"创建时间",render:function(e){return s(e.created)}},jt(function(e){return[{title:"创建任务",onClick:function(){Oa(e.id)}},{title:"查看",onClick:function(){y(e)}},{title:"编辑",onClick:function(){b(e)}},{title:"删除",onClick:function(){g(e)}}]})],extension:[f]}),p=d.BtTable,v=d.BtPage,m=(d.BtRefresh,d.BtColumn,d.BtBatch),h=d.refresh,y=(d.BtSearch,function(e){T({title:"查看【".concat(e.name,"】"),area:80,compData:{row:e},component:La})}),b=function(e){u.value=e,a.value=!0},g=function(e){var t;M({title:"删除【".concat(e.name,"】"),content:"确定删除该模板吗？",onConfirm:(t=c(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:k({loading:"删除中...",message:!0,request:se({id:e.id}),success:function(){h()}});case 1:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})})};return function(e,t){var n=Ne,l=Ct;return ye(),xe("div",Pa,[Ze(Te(l,null,{"header-left":ge(function(){return[Te(n,{type:"primary",onClick:i},{default:ge(function(){return r(t[1]||(t[1]=[we("添加模板",-1)]))}),_:1}),Te(pt,{class:"ml-16px"})]}),content:ge(function(){return[Te(Ce(p))]}),"footer-left":ge(function(){return[Te(Ce(m))]}),"footer-right":ge(function(){return[Te(Ce(v))]}),_:1},512),[[Xe,!Ce(a)]]),Ce(a)?(ye(),be(Ua,{key:0,show:Ce(a),"onUpdate:show":t[0]||(t[0]=function(e){return Me(a)?a.value=e:null}),data:Ce(u),refresh:Ce(h)},null,8,["show","data","refresh"])):lt("",!0)])}}}),$a=ve({__name:"index",setup:function(e){var t=de([{label:"概览",name:"overview",lazy:!0,render:function(){return Te(pn,null,null)}},{label:"发送任务",name:"task",lazy:!0,render:function(){return Te(Zr,null,null)}},{label:"模板",name:"template",lazy:!0,render:function(){return Te(qa,null,null)}},{label:"订阅者",name:"contact",lazy:!0,render:function(){return Te(ja,null,null)}},{label:"群组",name:"mail",lazy:!0,render:function(){return Te(Da,null,null)}},{label:"无效列表",name:"invalid",lazy:!0,render:function(){return Te(Sa,null,null)}}]),n=function(e){gt.value=!1,bt.value=null};return function(e,r){var a=fe;return ye(),xe("div",null,[Te(a,{type:"card",options:Ce(t),modelValue:Ce(xt),"onUpdate:modelValue":r[0]||(r[0]=function(e){return Me(xt)?xt.value=e:null}),onChange:n},null,8,["options","modelValue"])])}}}),Ia=Object.freeze(Object.defineProperty({__proto__:null,default:$a},Symbol.toStringTag,{value:"Module"}));a("N",Ia)}}})}();
