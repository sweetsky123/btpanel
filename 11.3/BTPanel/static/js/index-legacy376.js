!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function a(t,o,u,i){var a=o&&o.prototype instanceof c?o:c,s=Object.create(a.prototype);return n(s,"_invoke",function(t,n,o){var u,i,a,c=0,s=o||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return u=t,i=0,a=e,f.n=n,l}};function d(t,n){for(i=t,a=n,r=0;!p&&c&&!o&&r<s.length;r++){var o,u=s[r],d=f.p,y=u[2];t>3?(o=y===n)&&(a=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=d&&((o=t<2&&d<u[1])?(i=0,f.v=n,f.n=u[1]):d<y&&(o=t<3||u[0]>n||n>y)&&(u[4]=t,u[5]=n,f.n=y,i=0))}if(o||t>1)return l;throw p=!0,n}return function(o,s,y){if(c>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,y),i=s,a=y;(r=i<2?e:a)||!p;){u||(i?i<3?(i>1&&(f.n=-1),d(i,a)):f.n=a:f.v=a);try{if(c=2,u){if(i||(o="next"),r=u[o]){if(!(r=r.call(u,a)))throw TypeError("iterator result is not an object");if(!r.done)return r;a=r.value,i<2&&(i=0)}else 1===i&&(r=u.return)&&r.call(u),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);u=e}else if((r=(p=f.n<0)?a:t.call(n,f))!==l)break}catch(r){u=e,i=1,a=r}finally{c=1}}return{value:r,done:p}}}(t,u,i),!0),s}var l={};function c(){}function s(){}function p(){}r=Object.getPrototypeOf;var f=[][u]?r(r([][u]())):(n(r={},u,function(){return this}),r),d=p.prototype=c.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,n(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=p,n(d,"constructor",p),n(p,"constructor",s),s.displayName="GeneratorFunction",n(p,i,"GeneratorFunction"),n(d),n(d,i,"Generator"),n(d,u,function(){return this}),n(d,"toString",function(){return"[object Generator]"}),(t=function(){return{w:a,m:y}})()}function n(e,t,r,o){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}n=function(e,t,r,o){function i(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?u?u(e,t,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},n(e,t,r,o)}function r(e,t,n,r,o,u,i){try{var a=e[u](i),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(o,u){var i=e.apply(t,n);function a(e){r(i,o,u,a,l,"next",e)}function l(e){r(i,o,u,a,l,"throw",e)}a(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy106.js?v=1763689792","./useController-legacy14.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./site-legacy.js?v=1763689792","./useController-legacy6.js?v=1763689792"],function(n,r){"use strict";var u,i,a,l,c,s,p,f,d,y,m,v,h,g,b,w,x,_,j,T,k,S,O,V,E,P,C,U,$,F;return{setters:[function(e){u=e.L,i=e.k,a=e.bE,l=e.a_,c=e.ax,s=e.N,p=e.d,f=e.aj},function(e){d=e.c,y=e.r,m=e.g,v=e.e,h=e.D,g=e.x,b=e.O,w=e.C,x=e.A,_=e.z,j=e.a1,T=e.R,k=e.ad,S=e.s,O=e.v,V=e.y},function(e){E=e.B},function(e){P=e.h,C=e.f,U=e.t,$=e.i,F=e.S},null,null,null,null,null,null,null,null],execute:function(){var r={class:"flex items-center"},G=d({__name:"add-proxy-http",setup:function(n,f){var d,S=f.expose,O=y(!1),V=y(!1),F=function(){var e=o(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:q.value.proxysite="url"===q.value.targetType?"http://":"";case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),G=function(t){if("object"!==e(t))if("unix"!==q.value.targetType){var n=t.replace(/^http[s]?:\/\//,"");n=n.replace(/(:|\?|\/|\\)(.*)$/,""),q.value.todomain=n}else q.value.todomain="$http_host"},R=u({data:{isEdit:!1,targetType:"url",sitename:"",cache:!1,advanced:!1,cachetime:1,proxysite:"http://",todomain:"$http_host",remark:"",port:80,domains:""},options:function(t){return m(function(){return[{type:"custom",render:function(){return v(a,{label:"域名",prop:"domains"},{default:function(){return[v(E,{ref:"popover",placement:"top-start","popper-class":"green-tips-popover !p-0",title:"",width:"370",visible:O.value,"onUpdate:visible":function(e){return O.value=e},"trigger-keys":[],trigger:"focus"},{default:function(){return v("div",{class:"!p-[12px] bg-primary text-white"},[h("如需填写多个域名，请换行填写，每行一个域名，默认为80端口"),v("br",null,null),h("IP地址格式：192.168.1.199"),v("br",null,null),h("如另加端口格式为 www.domain.com:88")])},reference:function(){return v(i,{modelValue:t.value.domains,"onUpdate:modelValue":function(e){return t.value.domains=e},type:"textarea",width:"42rem",rows:6,resize:"none",onInput:function(n){"object"!==e(n)&&(t.value.remark=n.split("\n")[0])},onFocus:function(){return O.value=!0},placeholder:"如需填写多个域名，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n如另加端口格式为 www.domain.com:88"},null)}})]}})},rules:{domains:[{required:!0,message:"请输入域名",trigger:"blur"},{trigger:["blur","input","change"],validator:function(e,t,n){var r=t.split("\n").filter(function(e){return e.length}),o=r.findIndex(function(e){return e.split(":")[0].length<3});r.map(function(e,t){l(e.split(":")[0])||n(new Error("当前域名格式错误，第".concat(t+1,"行，内容:").concat(e)))}),-1!==o?n(new Error("第 ".concat(o+1," 个域名长度不符合要求（必须大于3个字符）"))):n()}}]}},{type:"slots",key:"proxysite",rules:{proxysite:[{required:!0,message:"请输入目标地址",trigger:"blur"},{validator:function(e,n,r){if(n)if("unix"!==t.value.targetType){var o=n.trim();if(/^https?:\/\/$/.test(o))r(new Error("请输入目标URL域名"));else if(/^https?:\/\/.+/.test(o)){var u=n.replace(/^http[s]?:\/\//,"");u=u.replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(u)?t.value.todomain="$http_host":t.value.todomain=u,r()}else r(new Error("目标URL格式不正确，应以http://或https://开头"))}else r();else r(new Error("url"===t.value.targetType?"目标地址不能为空":"请选择sock文件"))}}]}},{type:"slots",key:"todomain",rules:{todomain:[{required:!0,message:"请输入发送域名",trigger:["blur","change"]}]}},{type:"input",label:"备注",key:"remark",attrs:{placeholder:"请输入备注，可为空",width:"42rem"}},{type:"help",options:P}]})},submit:C}),I=R.BtForm,L=R.submit,q=R.param;return S({onConfirm:(d=o(t().m(function e(n){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,L();case 1:e.v&&n("close");case 2:return e.a(2)}},e)})),function(e){return d.apply(this,arguments)})}),function(e,t){var n=k;return g(),b(_(I),{class:"p-2rem","label-width":"100px"},{proxysite:w(function(){return[v(n,{label:"目标",prop:"proxysite","label-width":"100px"},{default:w(function(){return[x("div",r,[v(n,{"label-width":"50px"},{default:w(function(){return[v(_(c),{modelValue:_(q).targetType,"onUpdate:modelValue":t[0]||(t[0]=function(e){return _(q).targetType=e}),placeholder:"请选择",options:_(U),style:{width:"16rem","margin-right":"1rem"},onChange:F},null,8,["modelValue","options"])]}),_:1}),v(_(i),{modelValue:_(q).proxysite,"onUpdate:modelValue":t[2]||(t[2]=function(e){return _(q).proxysite=e}),placeholder:"url"===_(q).targetType?"请输入目标地址":"请选择sock文件",width:"24rem",iconType:"url"!==_(q).targetType&&"folder",onInput:G},j({_:2},["url"!==_(q).targetType?{name:"append",fn:w(function(){return[v(_(s),{onClick:t[1]||(t[1]=function(e){return _($)(_(q))})},{default:w(function(){return[v(_(p),{icon:"el-folder-opened",class:"cursor-pointer"})]}),_:1})]}),key:"0"}:void 0]),1032,["modelValue","placeholder","iconType"])])]}),_:1})]}),todomain:w(function(){return[v(n,{label:"发送域名(host)",prop:"todomain","label-width":"100px"},{default:w(function(){return[v(_(E),{placement:"top-start",effect:"dark",title:"",content:"请求转发到后端服务器时的主机名，一般为$http_host，如果目标URL是域名，则需要改为域名",width:"400",visible:_(V),"onUpdate:visible":t[5]||(t[5]=function(e){return T(V)?V.value=e:null}),"trigger-keys":[],trigger:"focus"},{reference:w(function(){return[v(_(i),{onFocus:t[3]||(t[3]=function(e){return V.value=!0}),modelValue:_(q).todomain,"onUpdate:modelValue":t[4]||(t[4]=function(e){return _(q).todomain=e}),placeholder:"请输入发送域名",width:"42rem"},null,8,["modelValue"])]}),_:1},8,["visible"])]}),_:1})]}),_:1})}}});n("default",d({__name:"index",emits:["close"],setup:function(e,t){var n=t.expose,r=t.emit,o=S(F()).proxyType,u=y("http"),i=r,a=y(),l=f({type:"card",value:u,options:[{label:"HTTP",name:"http",render:function(){return v(G,null,null)}}]}),c=(l.BtTabs,l.tabs),s=l.tabsRefs;return n({onConfirm:function(){switch(c.value){case"http":a.value.onConfirm(i);break;case"tcp":s().tcp.onConfirm(i)}}}),O(function(){u.value=o.value}),function(e,t){return g(),V("div",null,[v(G,{ref_key:"addProxyHttpRef",ref:a},null,512)])}}}))}}})}();
