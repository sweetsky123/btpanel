!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",u=t.toStringTag||"@@toStringTag";function i(t,r,o,u){var i=r&&r.prototype instanceof l?r:l,s=Object.create(i.prototype);return a(s,"_invoke",function(t,r,a){var o,u,i,l=0,s=a||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(n,t){return o=n,u=0,i=e,p.n=t,c}};function d(t,r){for(u=t,i=r,n=0;!f&&l&&!a&&n<s.length;n++){var a,o=s[n],d=p.p,v=o[2];t>3?(a=v===r)&&(i=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=e):o[0]<=d&&((a=t<2&&d<o[1])?(u=0,p.v=r,p.n=o[1]):d<v&&(a=t<3||o[0]>r||r>v)&&(o[4]=t,o[5]=r,p.n=v,u=0))}if(a||t>1)return c;throw f=!0,r}return function(a,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),u=s,i=v;(n=u<2?e:i)||!f;){o||(u?u<3?(u>1&&(p.n=-1),d(u,i)):p.n=i:p.v=i);try{if(l=2,o){if(u||(a="next"),n=o[a]){if(!(n=n.call(o,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,u<2&&(u=0)}else 1===u&&(n=o.return)&&n.call(o),u<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),u=1);o=e}else if((n=(f=p.n<0)?i:t.call(r,p))!==c)break}catch(n){o=e,u=1,i=n}finally{l=1}}return{value:n,done:f}}}(t,o,u),!0),s}var c={};function l(){}function s(){}function f(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(a(n={},o,function(){return this}),n),d=f.prototype=l.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,u,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,a(d,"constructor",f),a(f,"constructor",s),s.displayName="GeneratorFunction",a(f,u,"GeneratorFunction"),a(d),a(d,u,"Generator"),a(d,o,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:v}})()}function a(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,n,t,r){function u(n,t){a(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(u("next",0),u("throw",1),u("return",2))},a(e,n,t,r)}function o(e,n,t,r,a,o,u){try{var i=e[o](u),c=i.value}catch(e){return void t(e)}i.done?n(c):Promise.resolve(c).then(r,a)}function u(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function i(e){o(u,r,a,i,c,"next",e)}function c(e){o(u,r,a,i,c,"throw",e)}i(void 0)})}}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach(function(n){l(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function l(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var a=r.call(n,t||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}System.register(["./base-lib-legacy.js?v=1763689792","./file-icon-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./form-item-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./files-path-legacy.js?v=1763689792","./useStore-legacy10.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(e,t){"use strict";var a,o,i,l,s,f,p,d,v,m,h,y,g,b,w,_,k,j,x,S,P,T,O,N,C,I,L,z,A,D,R,E,q,F,B,G,H,M,V,J,U,$,Q,W,K,X,Y,Z,ee,ne,te;return{setters:[function(e){a=e.r,o=e.q,i=e.g,l=e.e,s=e.av,f=e.c,p=e.aB,d=e.a0,v=e.w,m=e.D,h=e.x,y=e.y,g=e.A,b=e.C,w=e.F,_=e.b1,k=e.z,j=e.M,x=e.B,S=e.S,P=e.an,T=e.H,O=e.aT,N=e.O,C=e.am,I=e.$,L=e.v},null,function(e){z=e.Q,A=e.hc,D=e.p,R=e.hd,E=e.n,q=e.H,F=e.L,B=e.b,G=e.ay,H=e.he,M=e.hf,V=e.aA,J=e.hg,U=e.u,$=e.x,Q=e.an,W=e._},function(e){K=e.a,X=e.u},function(e){Y=e.b},function(e){Z=e.aC},function(e){ee=e._},function(e){ne=e.F},function(e){te=e.u},null,null,null],execute:function(){var re=B(),ae=function(e){return e.map(function(e){return c(c({},e),{},{isLocal:e.is_local,label:e.remarks,value:e.id})})},oe=function(){var e=u(r().m(function e(n){var t,a,o,u,i,l,f,p,d,v,m,h,y,g,b,w,_,k,j,x;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=n.nodeId,a=n.path,o=n.p,u=n.showRow,i=n.search,t){e.n=1;break}return e.a(2,{data:[]});case 1:return e.p=1,e.n=2,z({request:M({p:o,showRow:u,node_id:t,path:a,search:i})});case 2:for(l=e.v,f=l.data,p=f.path,d=f.dir,v=f.files,m=f.bt_sync,h=f.tamper_data,g=(y=h||{dirs:[],files:[],msg:""}).dirs,b=y.files,w=y.msg,_=new Array(d.length+v.length),k=0,j=0;j<d.length;j++)_[k++]=c(c({},Z("dir",d[j],w?"":g[j],p,m)),{},{vid:"dir".concat(k),nodeId:t,loading:s(!1)});for(x=0;x<v.length;x++)_[k++]=c(c({},Z("file",v[x],w?"":b[x],p)),{},{vid:"file".concat(k),nodeId:t});return e.a(2,{data:_,total:V(f.page),path:p});case 3:return e.p=3,e.v,e.a(2,{data:[],path:a})}},e,null,[[1,3]])}));return function(n){return e.apply(this,arguments)}}(),ue=function(){var e=u(r().m(function e(n){var t,a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!n.loading&&!n.dirSize){e.n=1;break}return e.a(2);case 1:return e.p=1,n.loading=!0,e.n=2,z({request:A({node_id:n.nodeId,path:n.path})});case 2:t=e.v,a=t.data,n.dirSize=a.size,n.loading=!1,e.n=4;break;case 3:e.p=3,e.v,n.loading=!1;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(n){return e.apply(this,arguments)}}(),ie=function(){var e=u(r().m(function e(n,t){return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,D({title:"删除文件",content:'确定要删除文件 "'.concat(n.fileName,'" 吗？')});case 1:return e.n=2,z({message:!0,loading:"删除中...",request:R({node_id:n.nodeId,path:n.path,is_dir:n.isFile?0:1})});case 2:t();case 3:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),ce=a(null),le=o(function(){re.error("不能直接上传文件到系统根目录!")},2e3),se=function(e,n,t,r){var a,o;(e.preventDefault(),"/"!==n)?null!=e&&null!==(a=e.dataTransfer)&&void 0!==a&&a.items&&Array.from(null==e||null===(o=e.dataTransfer)||void 0===o?void 0:o.items).some(function(e){return"file"===e.kind})&&(ce.value||fe(n,t,r)):le()},fe=function(e,n,r){"/"!==e?ce.value=E({title:"上传文件到【".concat(e,"】"),area:"72",component:function(){return q(function(){return t.import("./node-upload-legacy.js?v=1763689792")},void 0,t.meta.url)},compData:{path:e,nodeId:n,refresh:r},onCancel:function(){r(),ce.value=null}}):re.error("不能直接上传文件到系统根目录!")},pe=function(e,n){var t="node_file_path_".concat(e);return void 0!==n?(localStorage.setItem(t,n),n):localStorage.getItem(t)||"/"},de=function(e){return!!e.lpver},ve=null,me=function(){var e=u(r().m(function e(n){var t,a;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!de(n.sourceNode)||!de(n.targetNode)){e.n=1;break}return re.error("当前两节点均为1panel节点，无法创建文件分发任务"),n.callback(),e.a(2);case 1:if("/"!==n.targetPath){e.n=2;break}return re.error("目标节点处于根目录，无法创建文件分发任务"),n.callback(),e.a(2);case 2:return e.n=3,ye(n);case 3:return t=e.v,e.n=4,z({message:!0,loading:"创建传输任务...",request:J({source_node_id:n.sourceNode.id,target_node_id:n.targetNode.id,source_path_list:JSON.stringify(n.sourcePathList.value.map(function(e){return{path:e.path,is_dir:!e.isFile,size:e.size}})),target_path:n.targetPath,default_mode:t})});case 4:a=e.v,n.callback(),a.status&&he(n.complete),e.n=6;break;case 5:e.p=5,e.v,n.callback();case 6:return e.a(2)}},e,null,[[0,5]])}));return function(n){return e.apply(this,arguments)}}(),he=function(){var e=u(r().m(function e(n){var o,i,l,s,f,p,d=arguments;return r().w(function(e){for(;;)switch(e.n){case 0:o=d.length>1&&void 0!==d[1]&&d[1],i=a({source_path:"",target_path:"",target_node:"",source_node:"",file_count:0,file_complete:0,file_error:0,fileList:[]}),l=null,s=function(){var e,t;null===(e=ve)||void 0===e||e.close(),null===(t=ve=G({route:"/ws_modsoc",onMessage:function(e,t){var r,a=JSON.parse(t.data);if("end"===a.type)return null===(r=ve)||void 0===r||r.close(),l&&l.unmount(),void(o||(i.value=c(c({},a.task),{},{fileList:a.file_status_list}),p(),re.success("文件传输完成"),n()));"error"===a.type&&re.error(a.msg),l||(l=!0,f()),a.task&&(i.value=c(c({},a.task),{},{fileList:a.file_status_list}))},onDisconnected:function(){n()}}))||void 0===t||t.send({mod_name:"node",sub_mod_name:"file_transfer",def_name:"transfer_status",callback:"xxxxxxo",data:{}})},f=function(){var e=u(r().m(function e(){return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E({title:"文件传输日志",area:75,component:function(){return q(function(){return t.import("./index-legacy381.js?v=1763689792")},void 0,t.meta.url)},compData:i,onCancel:function(){var e;null===(e=ve)||void 0===e||e.close(),l=null},btns:!1});case 1:l=e.v;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),p=function(){var e=u(r().m(function e(){var n,o,u,c;return r().w(function(e){for(;;)switch(e.n){case 0:if(n=0,o=0,u=[],c=[],i.value.fileList){e.n=1;break}return e.a(2);case 1:i.value.fileList.forEach(function(e){"complete"===e.status?(n++,c.push(e)):(o++,u.push(e))}),E({title:"文件传输结果",area:45,component:function(){return q(function(){return t.import("./transfer-result-legacy.js?v=1763689792")},void 0,t.meta.url)},compData:{success:n,fail:o,sendList:a([].concat(u,c))}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),s();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ye=function(){var e=u(r().m(function e(n){return r().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,r){E({title:"文件传输",area:45,component:function(){return q(function(){return t.import("./transfer-confirm-legacy.js?v=1763689792")},void 0,t.meta.url)},btn:!0,compData:c(c({},n),{},{complete:function(n){e(n)}}),onCancel:function(){r(!1)}})}))},e)}));return function(n){return e.apply(this,arguments)}}(),ge=function(){var e=u(r().m(function e(n,t,a){var o,c,s,f,p;return r().w(function(e){for(;;)switch(e.n){case 0:return o=function(){var e=u(r().m(function e(o){return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,z({message:!0,loading:"创建中...",request:H({node_id:t.toString(),path:"".concat(n,"/").concat(o.value.name).replace(/\/\//g,"/")})});case 1:return e.a(2,!0);case 2:return e.p=2,e.v,e.a(2,!1);case 3:return e.p=3,a(),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(n){return e.apply(this,arguments)}}(),c=null,s=F({data:function(){return{name:""}},options:function(e){return i(function(){return[Y("名称","name",{attrs:{class:"!w-[23rem]",placeholder:"请输入文件夹名称",onkeydown:(e=u(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.n){case 0:if("Enter"!==n.key){e.n=2;break}return n.preventDefault(),n.stopPropagation(),e.n=1,p();case 1:e.v&&(null===(t=c)||void 0===t||t.unmount());case 2:return e.a(2)}},e)})),function(n){return e.apply(this,arguments)})},rules:[{required:!0,message:"请输入文件夹名称"},{validator:function(e,n,t){RegExp(/[\*\|\:\\\"\/\<\>\?]+/).test(n)?t(new Error("文件夹名称不能包含特殊字符")):t()},trigger:["blur","change"]}]})];var e})},submit:function(){var e=u(r().m(function e(n,t,a){return r().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t();case 1:return e.n=2,o(n);case 2:return e.a(2,e.v);case 3:return e.p=3,e.v,e.a(2,!1)}},e,null,[[0,3]])}));return function(n,t,r){return e.apply(this,arguments)}}()}),f=s.BtForm,p=s.submit,e.n=1,E({title:"新建文件夹【".concat(n,"】"),area:45,component:function(){return l("div",{class:"p-[2rem]"},[l(f,null,null)])},btn:!0,onConfirm:p});case 1:c=e.v;case 2:return e.a(2)}},e)}));return function(n,t,r){return e.apply(this,arguments)}}(),be={class:"flex items-center mb-[1.6rem]"},we={class:"flex flex-col !h-[5rem] pt-[1rem]"},_e={class:"mb-0 leading-[1.2rem] !vertical-middle"},ke={class:"text-tertiary text-small"},je={class:"flex items-center gap-3"},xe={class:"flex items-center gap-3"},Se={class:"text-tertiary"},Pe=f({__name:"files-list-card",props:{panelType:{type:String,required:!0}},setup:function(e,t){var o=t.expose,i=e,c=U().mainHeight,I=te().currentNodes,L=a([]),z=p("nodeList",a([])),A=p("createTask",function(e,n,t){}),D=a([]),R=a(pe(I.value[i.panelType]));d("currentPath",R);var E=a({p:1,showRow:200,path:s(R),search:""}),q=function(e){switch(i.panelType){case"source":return e===I.value.target;case"target":return e===I.value.source}},F=function(e){D.value=e?z.value.filter(function(n){return n.label.includes(e)||n.server_ip.includes(e)}):z.value};v(z,function(e){D.value=e}),v(function(){return I.value[i.panelType]},function(){G(),re.value.limit=100,ce(pe(I.value[i.panelType])),Y()});var B,G=function(){var e=I.value[i.panelType];e&&localStorage.setItem("fileTransfer_".concat(i.panelType,"_nodeId"),e)},H=[K({key:"vid"}),{label:"文件名称",prop:"name",minWidth:200,showOverflowTooltip:!0,render:function(e){return l("div",{class:"flex items-center files-list"},[l("i",{class:"icon-bg ".concat(["zip","rar","7z","gz","tar.gz","tgz","war"].includes(e.ext)?"compress":e.ext,"-icon")},null),l("span",{onClick:function(){return le(e)},class:"cursor-pointer hover:text-primary truncate ml-[4px] fileName ".concat(e.isReName?"hidden":""),title:e.fileName+e.isLink},[e.fileName+e.isLink])])}},{label:"文件大小",prop:"size",width:120,render:function(e){return"folder"===e.ext?l(me,{row:e},null):$(e.size)}},X([{title:"source"===i.panelType?"发送到右侧":"发送到左侧",width:100,onClick:function(e){return de(e)}},{title:"删除",onClick:function(e){return ie(e,Y)}}])],M=Q({request:(B=u(r().m(function e(n){var t,a,o,u;return r().w(function(e){for(;;)switch(e.n){case 0:return t=n.p,a=n.limit,o=n.search,e.n=1,oe({nodeId:I.value[i.panelType],path:E.value.path,p:t,showRow:a,search:o});case 1:return u=e.v,pe(I.value[i.panelType],u.path),ce(u.path),Z.value.clearAllSelect(),e.a(2,u)}},e)})),function(e){return B.apply(this,arguments)}),columns:H,extension:[]}),V=M.BtTable,J=M.BtSearch,W=M.BtPage,Y=(M.BtColumn,M.refresh),Z=M.ref,re=M.param,ae=function(){var e=u(r().m(function e(n){return r().w(function(e){for(;;)switch(e.n){case 0:ce(n),Y();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ce=function(e){switch(R.value=e,i.panelType){case"source":I.value.sourcePath=e;break;case"target":I.value.targetPath=e}},le=function(e){e.isFile||(R.value="".concat(e.path),Y())},de=function(){var e=u(r().m(function e(n){var t;return r().w(function(e){for(;;)switch(e.n){case 0:try{t="all"===n?L.value:[n],A(i.panelType,t,function(){Z.value.clearAllSelect()})}catch(r){Z.value.clearAllSelect()}case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ve=function(e){L.value=e},me=f({props:{row:{type:Object,required:!0}},setup:function(e){return function(){return l("a",{class:"flex items-center",title:"点击计算大小",onClick:function(){return ue(e.row)}},[e.row.loading&&l("span",{class:"svgtofont-el-loading animate-spin mr-2px"},null),e.row.loading&&l("span",{class:""},[m("计算中")]),!e.row.loading&&l("div",{class:"text-primary cursor-pointer"},[void 0===e.row.dirSize?"计算":e.row.dirSize])])}}});return o({refresh:Y}),function(e,t){var r=C,a=P,o=T,u=O;return h(),y("div",{class:"rounded-base module-ui shadow-[0 1px 3px 1px rgba(var(--el-color-black-rgb), 0.05)]",onDragenter:t[4]||(t[4]=S(function(){},["prevent"])),onDragover:t[5]||(t[5]=S(function(e){return k(se)(e,k(R),k(I)[i.panelType],k(Y))},["prevent"]))},[g("div",be,[l(a,{class:"!w-[16rem] mr-[1.6rem]",modelValue:k(I)[i.panelType],"onUpdate:modelValue":t[0]||(t[0]=function(e){return k(I)[i.panelType]=e}),filterable:"","filter-method":F,onChange:e.handleNodeChange},{default:b(function(){return[(h(!0),y(w,null,_(k(D),function(e){return h(),N(r,{class:"!h-[5rem]",key:e.value,label:e.label,value:e.value,disabled:q(e.value)},{default:b(function(){return[g("div",we,[g("span",_e,x(e.label),1),g("span",ke,x(e.server_ip),1)])]}),_:2},1032,["label","value","disabled"])}),128))]}),_:1},8,["modelValue","onChange"]),l(ne,{initialPath:k(R),onPathChange:ae,onRefresh:k(Y)},null,8,["initialPath","onRefresh"])]),l(k(ee),null,{"header-left":b(function(){return[l(o,{type:"primary",disabled:!k(E).path,onClick:t[1]||(t[1]=function(e){return k(fe)(k(R),k(I)[i.panelType],k(Y))})},{default:b(function(){return n(t[6]||(t[6]=[m(" 上传文件 ",-1)]))}),_:1},8,["disabled"]),l(o,{type:"default",disabled:!k(E).path,onClick:t[2]||(t[2]=function(e){return k(ge)(k(R),k(I)[i.panelType],k(Y))})},{default:b(function(){return n(t[7]||(t[7]=[m(" 新建文件夹 ",-1)]))}),_:1},8,["disabled"])]}),"header-right":b(function(){return[g("div",je,[l(k(J),{disabled:!k(E).path,placeholder:"请输入文件名称"},null,8,["disabled"])])]}),content:b(function(){return[l(k(V),{style:j("height:".concat(k(c)-290,"px")),onSelectionChange:ve},null,8,["style"])]}),"footer-left":b(function(){return[g("div",xe,[l(u,{content:"请先选择文件",placement:"top",disabled:k(L).length>0},{default:b(function(){return[l(o,{type:"primary",disabled:0===k(L).length,onClick:t[3]||(t[3]=function(e){return de("all")})},{default:b(function(){return[m("发送到"+x("source"===i.panelType?"右侧":"左侧"),1)]}),_:1},8,["disabled"])]}),_:1},8,["disabled"]),g("span",Se,"当前选中"+x(k(L).length)+"个文件",1)])]}),"footer-right":b(function(){return[l(k(W),{layout:"prev, pager, next"})]}),_:1})],32)}}}),Te={class:"file-transfer"},Oe={class:"transfer-container"},Ne={class:"transfer-panel left-panel"},Ce={class:"transfer-panel right-panel"},Ie=f({__name:"index",setup:function(e){var n=te(),t=n.getAllNodeList,o=n.currentNodes,i=B(),c=a([]);d("nodeList",c);var f=I("leftPanelRef"),p=I("rightPanelRef"),v=function(){var e=u(r().m(function e(){var n,a,u,i,l,s,f;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t();case 1:for(n=e.v,c.value=ae(n.data),a=Number(localStorage.getItem("fileTransfer_source_nodeId")),u=Number(localStorage.getItem("fileTransfer_target_nodeId")),i=null,l=null,s=null,f=0;f<c.value.length;f++)c.value[f].isLocal?(s=c.value[f].id,o.value.localNodeId=s):l||(l=c.value[f].id),c.value[f].id===a&&(i=c.value[f].id),c.value[f].id===u&&(l=c.value[f].id);i||(i=s),o.value.source=i,o.value.target=l;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=u(r().m(function e(n,t,a){var u,l,d,v,m;return r().w(function(e){for(;;)switch(e.n){case 0:u=o.value[n],l=o.value["source"===n?"target":"source"],d=null,v=null,m=0;case 1:if(!(m<c.value.length)){e.n=3;break}if(c.value[m].id===u&&(d=c.value[m]),c.value[m].id===l&&(v=c.value[m]),!d||!v){e.n=2;break}return e.a(3,3);case 2:m++,e.n=1;break;case 3:if(v){e.n=4;break}return i.error("请选择目标节点"),a(),e.a(2);case 4:me({sourceNode:d,targetNode:v,sourcePathList:s(t),targetPath:o.value["source"===n?"targetPath":"sourcePath"],callback:a,complete:function(){var e,t;"source"===n?null===(e=p.value)||void 0===e||e.refresh():null===(t=f.value)||void 0===t||t.refresh()}});case 5:return e.a(2)}},e)}));return function(n,t,r){return e.apply(this,arguments)}}();return d("refreshNodeList",v),d("createTask",m),L(function(){v(),he(function(){},!0)}),function(e,n){return h(),y("div",Te,[g("div",Oe,[g("div",Ne,[l(Pe,{ref_key:"leftPanelRef",ref:f,"panel-type":"source"},null,512)]),g("div",Ce,[l(Pe,{ref_key:"rightPanelRef",ref:p,"panel-type":"target"},null,512)])])])}}});e("default",W(Ie,[["__scopeId","data-v-d45560ca"]]))}}})}();
