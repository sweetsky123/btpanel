!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(e){r(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function r(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function u(n,r,o,a){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return i(s,"_invoke",function(n,r,o){var i,a,u,c=0,s=o||[],f=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,a=0,u=t,v.n=n,l}};function p(n,r){for(a=n,u=r,e=0;!f&&c&&!o&&e<s.length;e++){var o,i=s[e],p=v.p,h=i[2];n>3?(o=h===r)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,v.v=r,v.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,v.n=h,a=0))}if(o||n>1)return l;throw f=!0,r}return function(o,s,h){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,h),a=s,u=h;(e=a<2?t:u)||!f;){i||(a?a<3?(a>1&&(v.n=-1),p(a,u)):v.n=u:v.v=u);try{if(c=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=v.n<0)?u:n.call(r,v))!==l)break}catch(e){i=t,a=1,u=e}finally{c=1}}return{value:e,done:f}}}(n,o,a),!0),s}var l={};function c(){}function s(){}function f(){}e=Object.getPrototypeOf;var v=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),p=f.prototype=c.prototype=Object.create(v);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,i(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return s.prototype=f,i(p,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,r,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:u,m:h}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){function a(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},i(t,e,n,r)}function a(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function u(t){a(i,r,o,u,l,"next",t)}function l(t){a(i,r,o,u,l,"throw",t)}u(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792"],function(t,e){"use strict";var r,i,a,l,c,s,f,v,p,h,d,b,y,m,w,g,k,j,O,P,S,_,C,x,T,F,E,G,D;return{setters:[function(t){r=t.c,i=t.r,a=t.o,l=t.w,c=t.v,s=t.a8,f=t.x,v=t.y,p=t.A,h=t.L,d=t.J,b=t.bt,y=t.K,m=t.S,w=t.Q,g=t.F,k=t.b1,j=t.n,O=t.e,P=t.C,S=t.B,_=t.aT,C=t.ay,x=t.bu},function(t){T=t.aD},function(t){F=t.b6,E=t.t,G=t.b,D=t._}],execute:function(){var e=["id"],L={class:"path-input"},M={class:"fold-dir-list"},U=["onClick"],B=["onClick"],R={class:"path-name"},W=["onClick"],A={class:"fold-dir-list"},K=["onClick"],q=r({__name:"files-path",props:{initialPath:{default:"/www/wwwroot"}},emits:["pathChange","refresh"],setup:function(t,r){var D=r.expose,q=r.emit,I=t,N=q,z=G(),J=i(F(10,"letter")),Q=i(I.initialPath),V=i(),$=i(!0),H=i([]),X=i(0),Y=i(!1),Z=a({showMore:!1,showUl:!1,list:[]}),tt=function(){var t=u(o().m(function t(e){var n,r;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:if($.value=e,!e){t.n=7;break}if(Q.value!==I.initialPath){t.n=1;break}return t.a(2);case 1:if(!((n=Q.value).length>0)||n.includes("/")){t.n=2;break}return z.error("路径输入不符合规则"),Q.value=I.initialPath,t.a(2);case 2:if(0!==n.length){t.n=3;break}return Q.value=I.initialPath,t.a(2);case 3:return t.p=3,t.n=4,nt(n);case 4:r=t.v,Q.value=r||n,t.n=6;break;case 5:t.p=5,t.v,Q.value=I.initialPath;case 6:t.n=8;break;case 7:E(V.value);case 8:return t.a(2)}},t,null,[[3,5]])}));return function(e){return t.apply(this,arguments)}}(),et=function(t,e){var n;""===t&&(Q.value="/"),null===(n=V.value)||void 0===n||n.blur(),e||nt(t)},nt=function(){var t=u(o().m(function t(e){var n,r;return o().w(function(t){for(;;)switch(t.n){case 0:if(n=e.replace(/\/+$/,"")||"/",r=rt(n),"/.Recycle_bin"!==e&&"/www/.Recycle_bin"!==e){t.n=1;break}return z.error("此为回收站目录，请在右上角按【回收站】按钮打开"),t.a(2,!1);case 1:return Q.value=r,N("pathChange",r),t.a(2,r)}},t)}));return function(e){return t.apply(this,arguments)}}(),rt=function(t){var e=t;return e=(e=(e=e.replace(/(\\\/|\/\\)/g,"/")).replace(/\\\\+/g,"/")).replace(/\/+/g,"/")},ot=function(t){if(t){var e=t.split("/");"/"!==t?(H.value=e.map(function(t,n){return{name:""===t?"根目录":t,path:""===t?"/":e.slice(0,n+1).join("/"),show:!0,showFold:!1,loading:!1,list:[]}}),ut(),j(function(){Z.list=[],Z.showMore=!1;var t=document.querySelectorAll("#".concat(J.value," .path-group-item")),e=document.querySelector("#".concat(J.value," .path-list-group")),n=Array.from(t).reduce(function(t,e){return t+e.clientWidth+4},0);setTimeout(function(){if(n>((null==e?void 0:e.clientWidth)||400)){for(var r=20,o=t.length-1;o>=0;o--)(r+=t[o].clientWidth)>((null==e?void 0:e.clientWidth)||0)&&(H.value[o].show=!1,Z.showMore=!0,Z.list=H.value.slice(o+1));Z.showMore&&(H.value[0].show=!1,Z.list=H.value.slice(1))}},100)})):H.value=[{name:"根目录",path:"/",show:!0,list:[]}]}},it=function(){if(!Y.value){if(Y.value=!0,"/"===Q.value)return Y.value=!1,z.error("当前目录为根目录");var t=Q.value.split("/");t.pop();var e=t.join("/");""===e&&(e="/"),nt(e),setTimeout(function(){Y.value=!1},500)}},at=function(){var t=u(o().m(function t(e,n){var r,i;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,ut(),H.value[n].showFold=!0,H.value[n].loading=!0,t.n=1,T({path:e,p:1,showRow:2e3});case 1:r=t.v,i=r.data.dir,H.value[n].loading=!1,H.value[n].list=i.map(function(t){return{name:t.nm,path:"".concat(e,"/").concat(t.nm).replace(/\/+/g,"/")}}),X.value=n,window.addEventListener("click",ut),t.n=3;break;case 2:t.p=2,t.v,H.value[n].loading=!1;case 3:return t.a(2)}},t,null,[[0,2]])}));return function(e,n){return t.apply(this,arguments)}}(),ut=function(){Z.showUl=!1,H.value[X.value]&&(H.value=H.value.map(function(t){return n(n({},t),{},{showFold:!1})})),window.removeEventListener("click",ut)},lt=function(){var t=u(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:if(!Y.value){t.n=1;break}return t.a(2);case 1:Y.value=!0;try{N("refresh")}catch(e){z.error("刷新失败")}finally{setTimeout(function(){Y.value=!1},500)}case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();return l(function(){return Q.value},function(t){ot(t)},{immediate:!0}),l(function(){return $.value},function(){$.value||j(function(){var t;null===(t=V.value)||void 0===t||t.select()})}),l(function(){return I.initialPath},function(t){Q.value=t}),c(function(){ot(Q.value)}),s(function(){ut()}),D({dirPath:Q,refreshList:lt,goBack:it,cutDirPath:et,getPathListGroup:ot}),function(t,n){var r=_,o=C,i=x;return f(),v("div",{class:"nav-path",id:J.value},[p("div",{class:"back rounded-l-large relative",onClick:it},[p("i",{class:h(["svgtofont-el-back",{disabledBack:Y.value}])},null,2)]),p("div",L,[d(p("input",{"onUpdate:modelValue":n[0]||(n[0]=function(t){return Q.value=t}),ref_key:"pathInputRef",ref:V,type:"text",class:"h-full w-full pl-8px",onBlur:n[1]||(n[1]=function(t){return tt(!0)}),onKeydown:n[2]||(n[2]=m(function(){},["stop"])),onKeyup:n[3]||(n[3]=w(function(t){return et(Q.value,!0)},["enter"]))},null,544),[[b,Q.value],[y,!$.value]]),d(p("div",{class:"path-list-group",onClick:n[5]||(n[5]=function(t){return tt(!1)})},[d(p("div",{class:"svgtofont-el-arrow-left font-bold px-[.2rem] h-full leading-[2.9rem] cursor-pointer border-l border-r border-lighter relative hover:border-darker hover:bg-light",onClick:n[4]||(n[4]=m(function(t){return Z.showUl=!0},["stop"]))},[d(p("ul",M,[(f(!0),v(g,null,k(Z.list,function(t,e){return f(),v("li",{class:"fold-dir-item",key:e},[O(r,{effect:"dark",content:t.path,placement:"right","show-after":500},{default:P(function(){return[p("div",{class:"w-full flex items-center",onClick:m(function(e){return et(t.path)},["stop"])},[n[6]||(n[6]=p("span",{class:"dir-icon flex-shrink-0 !h-[1.6rem]"},null,-1)),p("span",null,S(t.name),1)],8,U)]}),_:2},1032,["content"])])}),128))],512),[[y,Z.showUl]])],512),[[y,Z.showMore]]),(f(!0),v(g,null,k(H.value,function(t,e){return d((f(),v("div",{key:e,class:"path-group-item",onClick:m(function(e){return et(t.path)},["stop"])},[O(r,{effect:"dark",content:t.name,placement:"bottom","show-after":500},{default:P(function(){return[p("span",R,S(t.name),1)]}),_:2},1032,["content"]),p("div",{class:"svgtofont-el-arrow-right path-name-icon",onClick:m(function(n){return at(t.path,e)},["stop"])},[d((f(),v("ul",A,[(f(!0),v(g,null,k(t.list,function(t,e){return f(),v("li",{class:"fold-dir-item",key:e},[O(r,{effect:"dark",content:t.path,placement:"right","show-after":500},{default:P(function(){return[p("div",{class:"w-full flex items-center",onClick:m(function(e){return et(t.path)},["stop"])},[n[7]||(n[7]=p("span",{class:"dir-icon flex-shrink-0 !h-[1.6rem]"},null,-1)),p("span",null,S(t.name),1)],8,K)]}),_:2},1032,["content"])])}),128)),d(O(o,{"image-size":60,description:"暂无数据"},null,512),[[y,!t.list.length]])])),[[y,t.showFold],[i,t.loading]])],8,W)],8,B)),[[y,t.show]])}),128))],512),[[y,$.value]])]),p("span",{class:"refresh rounded-r-large",onClick:lt},[p("i",{class:h({"svgtofont-el-refresh-right":!Y.value,"svgtofont-el-loading cursor-not-allowed animate-spin":Y.value})},null,2)])],8,e)}}});t("F",D(q,[["__scopeId","data-v-bad05061"]]))}}})}();
