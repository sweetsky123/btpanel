!function(){function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.toStringTag||"@@toStringTag";function i(n,a,o,u){var i=a&&a.prototype instanceof s?a:s,l=Object.create(i.prototype);return t(l,"_invoke",function(n,t,a){var o,u,i,s=0,l=a||[],f=!1,v={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return o=n,u=0,i=e,v.n=t,c}};function p(n,t){for(u=n,i=t,r=0;!f&&s&&!a&&r<l.length;r++){var a,o=l[r],p=v.p,m=o[2];n>3?(a=m===t)&&(i=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=n<2&&p<o[1])?(u=0,v.v=t,v.n=o[1]):p<m&&(a=n<3||o[0]>t||t>m)&&(o[4]=n,o[5]=t,v.n=m,u=0))}if(a||n>1)return c;throw f=!0,t}return function(a,l,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,m),u=l,i=m;(r=u<2?e:i)||!f;){o||(u?u<3?(u>1&&(v.n=-1),p(u,i)):v.n=i:v.v=i);try{if(s=2,o){if(u||(a="next"),r=o[a]){if(!(r=r.call(o,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,u<2&&(u=0)}else 1===u&&(r=o.return)&&r.call(o),u<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),u=1);o=e}else if((r=(f=v.n<0)?i:n.call(t,v))!==c)break}catch(r){o=e,u=1,i=r}finally{s=1}}return{value:r,done:f}}}(n,o,u),!0),l}var c={};function s(){}function l(){}function f(){}r=Object.getPrototypeOf;var v=[][o]?r(r([][o]())):(t(r={},o,function(){return this}),r),p=f.prototype=s.prototype=Object.create(v);function m(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,t(n,u,"GeneratorFunction")),n.prototype=Object.create(p),n}return l.prototype=f,t(p,"constructor",f),t(f,"constructor",l),l.displayName="GeneratorFunction",t(f,u,"GeneratorFunction"),t(p),t(p,u,"Generator"),t(p,o,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:m}})()}function t(n,e,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}t=function(n,e,r,a){function u(e,r){t(n,e,function(n){return this._invoke(e,r,n)})}e?o?o(n,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):n[e]=r:(u("next",0),u("throw",1),u("return",2))},t(n,e,r,a)}function e(n,t,e,r,a,o,u){try{var i=n[o](u),c=i.value}catch(n){return void e(n)}i.done?t(c):Promise.resolve(c).then(r,a)}function r(n){return function(){var t=this,r=arguments;return new Promise(function(a,o){var u=n.apply(t,r);function i(n){e(u,a,o,i,c,"next",n)}function c(n){e(u,a,o,i,c,"throw",n)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./database-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./useStore-legacy2.js?v=1763689792","./validator-legacy.js?v=1763689792"],function(t,e){"use strict";var a,o,u,i,c,s,l,f,v,p,m,d,y,g,b,h,w,j,S,k,q,D,x,O,T,_,M,P,C,F,N,E;return{setters:[function(n){a=n.n,o=n.H,u=n.aH,i=n.q,c=n.Q,s=n.aK,l=n.R,f=n.ak,v=n.az,p=n.M},function(n){m=n.checkModuleServerConnection,d=n.checkServerConnection,y=n.syncDataToServer,g=n.syncModuleDataToServer,b=n.setDbTypes,h=n.getMysqlCloudServer,w=n.getModulesCloudServer,j=n.getSoftStatus,S=n.batchBackMysqlData,k=n.backDatabase,q=n.backModuleDatabase},function(n){D=n.r,x=n.g,O=n.aE},function(n){T=n.i,_=n.c},function(n){M=n.g},function(n){P=n.l,C=n.k,F=n.h,N=n.i,E=n.c}],execute:function(){var G=M().refs,J=G.tabActive,B=G.envStatus,A=G.isRefreshTable,H=G.softData,L=(t("k",D([])),t("m",function(){var t=r(n().m(function t(e){var r,a;return n().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,i(e)&&(e=0),n.n=1,c({request:"mysql"!==J.value?m({data:JSON.stringify({sid:e})},J.value):d({sid:e}),data:{status:Boolean,msg:String,db_status:Boolean,err_msg:String}});case 1:return r=n.v,n.a(2,r);case 2:return n.p=2,a=n.v,s(a,"useCheckServerConnection"),n.a(2,{status:!1,err_msg:"error",msg:"检查出错啦！"})}},t,null,[[0,2]])}));return function(n){return t.apply(this,arguments)}}()),t("u",function(){var t=r(n().m(function t(e){var r,a,o;return n().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,j({name:e});case 1:return r=n.v,a=r.data,B.value=a,H.value.s_status=a.s_status,n.a(2,a||{setup:!1,version:"",status:!1});case 2:return n.p=2,o=n.v,s(o,"useCheckSoftStatus"),n.a(2,{setup:!1,version:"",status:!1})}},t,null,[[0,2]])}));return function(n){return t.apply(this,arguments)}}()),t("q",x(function(){return{mysql:["支持MySQL5.5、MariaDB10.1及以上版本","注意3：通过宝塔安装的数据库root默认不支持远程权限"],redis:["支持redis-4.0+版本","注意3：通过宝塔安装的redis默认不支持远程权限"],sqlserver:["","注意3：通过宝塔安装的sqlserver默认不支持远程权限"],mongodb:["支持Mongodb-4.0及以上版本","注意3：通过宝塔安装的Mongodb默认不支持远程权限"],pgsql:["支持Postgresql-9.6+版本","注意3：通过宝塔安装的Postgresql默认不支持远程权限"]}[J.value]||[]})),t("f",function(n){return[{label:"数据库名",prop:"name",width:160,sortable:!0},{label:"用户名",prop:"username",minWidth:100,sortable:!0},T({event:n})]}),t("g",function(n,t){var e="本地数据库";return{label:"数据库位置",minWidth:90,render:function(r){return null==n||n.forEach(function(n){n.id===r.sid&&(e="mysql"===t?n.db_host:n.ps,"127.0.0.1"===n.db_host&&(e="本地数据库"))}),O("span",e)}}}),t("a",function(){a({title:"远程数据库",area:86,component:function(){return o(function(){return e.import("./index-legacy219.js?v=1763689792")},void 0,e.meta.url)}})}),t("h",function(n){a({title:"数据库工具箱-【".concat(n.name,"】"),area:86,compData:n,component:function(){return o(function(){return e.import("./index-legacy220.js?v=1763689792")},void 0,e.meta.url)}})}),t("i",function(n){a({title:"设置数据库【".concat(n.name,"】密码"),area:53,showFooter:!0,compData:n,component:function(){return o(function(){return e.import("./index-legacy221.js?v=1763689792")},void 0,e.meta.url)}})}),t("t",function(n){return a({area:60,compData:n,component:function(){return o(function(){return e.import("./index-legacy222.js?v=1763689792")},void 0,e.meta.url)}})}),t("l",function(){var t=r(n().m(function t(r,u){return n().w(function(n){for(;;)switch(n.n){case 0:if("import"!==u){n.n=2;break}return n.n=1,a({title:"导入本地备份",area:84,compData:r,component:function(){return o(function(){return e.import("./import-back-legacy.js?v=1763689792")},void 0,e.meta.url)}});case 1:return n.a(2,n.v);case 2:a({title:"数据库【".concat(r.name,"】备份"),area:92,compData:{row:r,type:u},component:function(){return o(function(){return e.import("./index-legacy223.js?v=1763689792")},void 0,e.meta.url)}});case 3:return n.a(2)}},t)}));return function(n,e){return t.apply(this,arguments)}}()),t("e",function(){a({title:"修改root密码",area:40,compData:{rootPwd:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",refresh:arguments.length>1?arguments[1]:void 0},showFooter:!0,component:function(){return o(function(){return e.import("./index-legacy224.js?v=1763689792")},void 0,e.meta.url)}})}),t("j",function(n,t){var r=[];r=l(n)?n.map(function(n){return n.id}):[n.id],a({title:"删除数据库",area:76,showFooter:!0,compData:{ids:r,isMult:l(n),rows:n,config:f(t)?t:{}},confirmBtnType:"danger",component:function(){return o(function(){return e.import("./index-legacy225.js?v=1763689792")},void 0,e.meta.url)}})})),I=(t("v",function(n,t){a({title:"上传文件到",area:80,compData:{refreshEvent:n,path:v(t)?t:""},component:function(){return o(function(){return e.import("./index-legacy226.js?v=1763689792")},void 0,e.meta.url)}})}),t("x",function(n,t){a({title:"批量".concat(t.title,"结果"),area:42,component:function(){return o(function(){return e.import("./index-legacy125.js?v=1763689792")},void 0,e.meta.url)},compData:{resultData:n,resultTitle:t.title||"操作"}})})),Q=(t("c",function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",r=arguments.length>2?arguments[2]:void 0;v(t)||(t="single"),a({title:"设置数据库权限",area:42,component:function(){return o(function(){return e.import("./index-legacy227.js?v=1763689792")},void 0,e.meta.url)},compData:{config:f(r)?r:{},type:t,rowData:n},showFooter:!0})}),t("n",function(){var t=r(n().m(function t(e){var r,a,o,u,i,c;return n().w(function(n){for(;;)switch(n.p=n.n){case 0:if(n.p=0,r=[],a=0,o={ids:JSON.stringify(r)},"mysql"===J.value&&e?(r=e,a=1):"mysql"!==J.value&&e&&(r=[e.id],a=1),o=1===a?F(r,[],!1):{ids:JSON.stringify(r)},"mysql"!==J.value){n.n=2;break}return n.n=1,y(o,a);case 1:i=n.v,n.n=4;break;case 2:return n.n=3,g({data:JSON.stringify({type:a,ids:JSON.stringify(r)})},J.value);case 3:i=n.v;case 4:return u=i,n.a(2,u);case 5:n.p=5,c=n.v,s(c,"syncDatabaseEvent");case 6:return n.a(2)}},t,null,[[0,5]])}));return function(n){return t.apply(this,arguments)}}())),R=t("y",function(){var t=r(n().m(function t(e){var r,a,o,u;return n().w(function(n){for(;;)switch(n.p=n.n){case 0:if(r=p.load("正在备份，请稍后..."),n.p=1,"mysql"!==J.value){n.n=3;break}return n.n=2,k(e);case 2:o=n.v,n.n=5;break;case 3:return n.n=4,q({data:JSON.stringify(e)},J.value);case 4:o=n.v;case 5:return a=o,n.a(2,a);case 6:n.p=6,u=n.v,s(u,"backDatabaseEvent");case 7:return n.p=7,r.close(),n.f(7);case 8:return n.a(2)}},t,null,[[1,6,7,8]])}));return function(n){return t.apply(this,arguments)}}()),W=function(){var t=r(n().m(function t(e,a,o,u,i,c){var s,l,f,v,p,m,d;return n().w(function(t){for(;;)switch(t.n){case 0:return s=M(),l=s.refreshTableList,f=u.label,v=u.value,p=c.enable,m=c.exclude,d=function(){var t=r(n().m(function t(e){var r,a,u,i;return n().w(function(n){for(;;)switch(n.n){case 0:if(r=new Map([["sync",Q],["back","mysql"===J.value?S:R]]),a=r.get(v),"mysql"!==J.value||"sync"!==v){n.n=3;break}if(!(u=a)){n.n=2;break}return n.n=1,a(o.value);case 1:u=n.v;case 2:return n.a(2,u);case 3:if(!(i=a)){n.n=5;break}return n.n=4,a(e);case 4:i=n.v;case 5:return n.a(2,i);case 6:return n.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}(),t.n=1,e({title:"批量".concat(f),content:"批量".concat(f,"已选数据库，是否继续操作！"),column:[{prop:"name",label:"数据库名"},_()],onConfirm:function(){var t=r(n().m(function t(){var e,r,u,c,s;return n().w(function(n){for(;;)switch(n.n){case 0:if(e=F(o.value,m,p),"mysql"!==J.value){n.n=2;break}return n.n=1,d(e);case 1:s=n.v,n.n=4;break;case 2:return n.n=3,a(d);case 3:s=n.v;case 4:if(r=s,l(),i&&i(),"mysql"!==J.value){n.n=5;break}return u=N(r.data),c=u.data,"sync"!==v&&I(c,{title:f}),n.a(2,!0);case 5:return n.a(2,!1);case 6:return n.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)}));return function(n,e,r,a,o,u){return t.apply(this,arguments)}}();t("o",function(n,t,r){var u={mysql:function(){return o(function(){return e.import("./index-legacy228.js?v=1763689792")},void 0,e.meta.url)},redis:function(){return o(function(){return e.import("./index-legacy142.js?v=1763689792")},void 0,e.meta.url)},sqlserver:function(){return o(function(){return e.import("./index-legacy229.js?v=1763689792")},void 0,e.meta.url)},mongodb:function(){return o(function(){return e.import("./index-legacy230.js?v=1763689792")},void 0,e.meta.url)},pgsql:function(){return o(function(){return e.import("./index-legacy231.js?v=1763689792")},void 0,e.meta.url)}};a({title:"添加"+J.value+"数据库",area:"redis"===J.value?44:56,compData:{refresh:function(){return n()},sid:t,keyId:r},showFooter:!0,component:u[J.value]})}),t("d",function(n){return[{label:"同步数据库",value:"sync",event:W},{label:"备份数据库",value:"back",event:W},{label:"删除数据库",value:"delete",event:function(n,t,e,r,a,o){return L(e.value,o)}}]}),t("w",{alioss:"阿里云OSS",ftp:"FTP",sftp:"SFTP",msonedrive:"微软OneDrive",qiniu:"七牛云",txcos:"腾讯COS",upyun:"又拍云",jdcloud:"京东云",aws_s3:"亚马逊存储","Google Cloud":"谷歌云","Google Drive":"谷歌网盘",bos:"百度云",obs:"华为云"}),t("p",function(){var t=r(n().m(function t(e){var r,a;return n().w(function(n){for(;;)switch(n.n){case 0:if(e){n.n=1;break}return n.a(2);case 1:return n.n=2,u({sName:e});case 2:if(r=n.v,a=r.data,"pgsql_manager"!==e||!a.setup){n.n=3;break}return P({name:e}),n.a(2);case 3:C({name:a.name,type:"i",pluginInfo:a});case 4:return n.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}()),t("b",function(){a({title:"PHPMyAdmin",area:[74,56],component:function(){return o(function(){return e.import("./index-legacy205.js?v=1763689792")},void 0,e.meta.url)}})}),t("s",function(){var t=r(n().m(function t(e,a,o,u){return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,E({name:"数据库分类",options:o.value.filter(function(n){return Number(n.value)<0}),selectList:e.value,request:function(){var t=r(n().m(function t(r,o){var i,s,l;return n().w(function(n){for(;;)switch(n.n){case 0:return i=u.exclude,s=u.enable,l=F(e.value,i,s,{params:{id:r.id}}),n.n=1,c({loading:"正在批量设置数据库分类，请稍后...",request:b(l),message:!0});case 1:a(),A.value=!0,o();case 2:return n.a(2)}},t)}));return function(n,e){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)}));return function(n,e,r,a){return t.apply(this,arguments)}}()),t("r",r(n().m(function t(){var e;return n().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,c({loading:"正在获取数据中，请稍后...",request:"mysql"===J.value?h():w({data:JSON.stringify({type:J.value})},J.value),data:Array});case 1:return e=n.v,n.a(2,e)}},t)})))}}})}();
