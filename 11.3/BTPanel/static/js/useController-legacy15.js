!function(){function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,u=function(){};return{s:u,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw s}}}}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function i(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function u(n,r,a,u){var l=r&&r.prototype instanceof i?r:i,o=Object.create(l.prototype);return c(o,"_invoke",function(n,r,a){var u,i,l,c=0,o=a||[],p=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,n){return u=t,i=0,l=e,f.n=n,s}};function v(n,r){for(i=n,l=r,t=0;!p&&c&&!a&&t<o.length;t++){var a,u=o[t],v=f.p,d=u[2];n>3?(a=d===r)&&(l=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=v&&((a=n<2&&v<u[1])?(i=0,f.v=r,f.n=u[1]):v<d&&(a=n<3||u[0]>r||r>d)&&(u[4]=n,u[5]=r,f.n=d,i=0))}if(a||n>1)return s;throw p=!0,r}return function(a,o,d){if(c>1)throw TypeError("Generator is already running");for(p&&1===o&&v(o,d),i=o,l=d;(t=i<2?e:l)||!p;){u||(i?i<3?(i>1&&(f.n=-1),v(i,l)):f.n=l:f.v=l);try{if(c=2,u){if(i||(a="next"),t=u[a]){if(!(t=t.call(u,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,i<2&&(i=0)}else 1===i&&(t=u.return)&&t.call(u),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((t=(p=f.n<0)?l:n.call(r,f))!==s)break}catch(t){u=e,i=1,l=t}finally{c=1}}return{value:t,done:p}}}(n,a,u),!0),o}var s={};function i(){}function o(){}function p(){}t=Object.getPrototypeOf;var f=[][r]?t(t([][r]())):(c(t={},r,function(){return this}),t),v=p.prototype=i.prototype=Object.create(f);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e}return o.prototype=p,c(v,"constructor",p),c(p,"constructor",o),o.displayName="GeneratorFunction",c(p,a,"GeneratorFunction"),c(v),c(v,a,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),(l=function(){return{w:u,m:d}})()}function c(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,n,r){function u(t,n){c(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},c(e,t,n,r)}function o(e,t,n,r,a,u,s){try{var i=e[u](s),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function p(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function s(e){o(u,r,a,s,i,"next",e)}function i(e){o(u,r,a,s,i,"throw",e)}s(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./useStore-legacy12.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./useController-legacy6.js?v=1763689792","./useController-legacy5.js?v=1763689792","./useController-legacy4.js?v=1763689792","./ssl-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792"],function(r,a){"use strict";var u,c,o,f,v,d,m,h,y,g,b,w,k,_,x,S,C,A,T,L,N,E,D,I,j,P,O,H,V,R,B,q,M,U,F,z,J,G,K,X,Z,Y,Q,W,$,ee,te,ne,re,ae,ue,se,ie,le,ce,oe,pe,fe,ve,de,me,he,ye,ge,be,we,ke,_e,xe,Se,Ce,Ae,Te,Le,Ne,Ee,De,Ie,je,Pe,Oe,He,Ve,Re,Be,qe,Me,Ue,Fe,ze,Je,Ge,Ke,Xe,Ze,Ye,Qe,We,$e,et,tt,nt,rt,at,ut,st,it,lt,ct,ot,pt,ft,vt,dt,mt,ht,yt,gt,bt,wt,kt,_t,xt,St,Ct,At,Tt,Lt,Nt,Et,Dt;return{setters:[function(e){u=e.B,c=e.Q,o=e.cf,f=e.a_,v=e.am,d=e.n,m=e.H,h=e.M,y=e.ak,g=e.p,b=e.ci,w=e.e,k=e.f,_=e._,x=e.hy,S=e.hx,C=e.ao,A=e.$,T=e.R,L=e.f0,N=e.f1,E=e.ag,D=e.j,I=e.bH,j=e.r,P=e.l,O=e.u,H=e.b,V=e.an,R=e.az},function(e){B=e.editAgainVerify,q=e.checkSslMethod,M=e.applyCertOrderPay,U=e.applyBusSsl,F=e.removeCloudCert,z=e.getDockerDeploySiteDomain,J=e.getDeploySiteDomain,G=e.uploadCertToCloud,K=e.getCertList,X=e.updateSslTask,Z=e.setSslInfo,Y=e.setProxyHttps,Q=e.setDockerHttps,W=e.setSiteHttps,$=e.closeSiteHttps,ee=e.downloadCert,te=e.ignoreHttpsMode,ne=e.getDockerLetsEncryptSite,re=e.getLetsEncryptSite,ae=e.applyCertApi,ue=e.applyProxyCertArrange,se=e.getLetsEncryptList,ie=e.downloadCertToLocal,le=e.setDockerCertToSite,ce=e.setCertToSite,oe=e.delLetsEncrypt,pe=e.getOrderDetail,fe=e.authDomainApi,ve=e.renewalCert,de=e.validateDomain,me=e.getComposerLine,he=e.getDnsData,ye=e.setDomainDNS,ge=e.letCertInitApi,be=e.letRenewCert,we=e.reissueCertOrder,ke=e.closeCertArrange,_e=e.batchSetSsl,xe=e.setBatchCertToSite,Se=e.getDnsApiList,Ce=e.setDnsApiInfo},function(e){Ae=e._},function(e){Te=e.r,Le=e.e,Ne=e.D,Ee=e.aT,De=e.s,Ie=e.g,je=e.o,Pe=e.H,Oe=e.aA,He=e.c,Ve=e.x,Re=e.O,Be=e.C,qe=e.N,Me=e.A,Ue=e.m,Fe=e.z,ze=e.q,Je=e.y,Ge=e.F,Ke=e.b1,Xe=e.L,Ze=e.B,Ye=e.n,Qe=e.aE,We=e.I,$e=e.R,et=e.J,tt=e.ax,nt=e.az,rt=e.aB,at=e.v,ut=e.G,st=e.aZ,it=e.ap,lt=e.U,ct=e.am,ot=e.an,pt=e.a9,ft=e.t},function(e){vt=e._},function(e){dt=e.a,mt=e.u},function(e){ht=e.u,yt=e.S},function(e){gt=e.u},function(e){bt=e.n,wt=e.o},function(e){kt=e.u,_t=e.p},function(e){xt=e.h},function(e){St=e.s,Ct=e.t,At=e.n},function(e){Tt=e.j,Lt=e.b,Nt=e.h,Et=e.i,Dt=e.o}],execute:function(){var It=ht().certVerifyInfo,jt=yt().verifyBusCertEvent,Pt=(r("aN",function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n={oid:It.value.oid,dcvMethod:t.value.dcvMethod,pid:It.value.pid,cert_ssl_type:It.value.certType},e.n=1,c({loading:"正在更改验证方式，请稍后...",request:B(n),message:!0});case 1:return null!=(r=e.v)&&r.status&&Pt(n.oid,n.cert_ssl_type,n.pid),e.a(2,r.status);case 2:return e.p=2,e.v,e.a(2,!1)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),function(){var e=p(l().m(function e(t,n,r){var a,u;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,jt(t,n,r);case 1:a=e.v,(u=a.data)&&fi(s(s({},u),{},{cert_ssl_type:n,certType:n,pid:r}));case 2:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()),Ot=function(e){if("CNAME_CSR_HASH"===hr.value)return e.url;var t="HTTPS_CSR_HASH"===hr.value?"https://":"http://";return"".concat(t).concat(e.url,"/.well-known/pki-validation/").concat(e.content)},Ht=(r("a1",Te([{label:"URL",prop:"url",showOverflowTooltip:!0,render:function(e){return Le("span",null,[Ot(e)])}},{label:"验证结果",prop:"status",width:100,render:function(e){return Le("span",{class:"".concat(e.status?"text-primary":"text-danger")},[e.status?"成功":"失败"])}},{label:"自动设置验证值",prop:"verify_status",width:120,isHide:function(){return"CNAME_CSR_HASH"!==hr.value},render:function(e){return e.verify_status?Le("span",{class:"text-primary"},[Ne("成功")]):Le(Ee,{placement:"top",content:e.msg,enterable:!1},{default:function(){return[Le("span",{class:"text-danger"},[Ne("失败")])]}})}},{label:"操作",align:"right",width:160,render:function(e,t){var n=[];return"CNAME_CSR_HASH"===hr.value||n.push(Le("span",{class:"cursor-pointer bt-link",onClick:function(){return u({value:Ot(e)})}},[Ne("复制")]),Le(vt,null,null),Le("a",{class:"bt-link",href:Ot(e),target:"_blank"},[Ne("打开")]),Le(vt,null,null)),n.push(Le("span",{class:"cursor-pointer bt-link",onClick:function(){return fr(e,t)}},[Ne("重新验证")])),Le("div",{class:"flex items-center justify-end"},[n])}}])),function(){var e=p(l().m(function e(){var t,n,r,a,u,s,i,o,p,f,v,d,m,h;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return ln.value=!0,t=It.value.auto_verify_info,n=It.value.data,r=n.dcvList,a=n.DCVdnsValue,u=n.DCVdnsHost,s=n.DCVfileContent,i=n.DCVfileName,o=n.DCVdnsType,p="CNAME_CSR_HASH"===hr.value,f=[],e.p=1,d=function(e){if(!t)return"";if("string"==typeof t.interface)return t.interface;var n=((null==t?void 0:t.interface)||[]).find(function(t){return(null==t?void 0:t.value)===e});return(null==n?void 0:n.interface)||""},f=p?null==r?void 0:r.map(function(e){return{record_type:o,sub_domain:u,dns_value:a,dns_id:d(e.domainName),domain:e.domainName}}):null==r?void 0:r.map(function(e){return{file_name:"/.well-known/pki-validation/".concat(i),file_value:s,domain:e.domainName}}),e.n=2,c({request:St({verify_type:p?"dns":"file",verify_data:JSON.stringify(f),set_verify_value:Boolean(t)})});case 2:m=e.v,h=m.data,yr.value=null===(v=h.data)||void 0===v?void 0:v.map(function(e){return{url:e.domain,status:e.rep.local_verify,verify_status:e.rep.status,msg:e.rep.msg,content:i}}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,ln.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}()),Vt=gt(),Rt=Vt.siteInfo,Bt=Vt.siteType,qt=Vt.isRefreshList,Mt=De(kt()).isRefreshLocalList,Ut=ht(),Ft=Ut.orderInfo,zt=Ut.sslApplicationInfo,Jt=Ut.certVerifyInfo,Gt=Ut.otherPopup,Kt=Ut.isRefreshSSL,Xt=Ut.sslDnsApiInfo,Zt=yt(),Yt=Zt.buyArtificialServiceEvent,Qt=Zt.getCertAdminInfoEvent,Wt=Zt.submitCertInfoEvent,$t=Zt.setBusSslDeployEvent,en=Zt.getSslListEvent,tn=Zt.verifyBusCertEvent,nn=Zt.getCertSslListEvent,rn=Zt.getDomainListEvent,an=Zt.jumpSslTabEvent,un=r("B",Te(!1)),sn=r("A",Te([])),ln=r("al",Te(!1)),cn=r("x",Te([{key:"domain",value:"",interface:""}])),on=["企业级证书","极速申请","防劫持/防篡改","提高SEO权重","赔付保证","不成功可退款","官方推荐(宝塔官网bt.cn也在使用)"],pn=[{content:function(){return Le("span",{class:"text-danger"},[Ne("如果您的站点有使用CDN、高防IP、反向代理、301重定向等功能，可能导致验证失败")])}},{content:"证书支持购买多年，只能一年签发一次（有效期一年），需在到期前30天内续签(续签暂不需要验证域名)。"},{content:"申请www.bt.cn这种以www为二级域名的证书，需绑定并解析顶级域名(bt.cn)，否则将验证失败。"},{content:"商用证书相对于普通证书，具有更高的安全性、赔付保障和支持通配符和多域名等方式。"}],fn=function(e){var t="text-green";return e.endDate?(e.endDay<=30&&(t="text-orange"),Le("span",{class:e.endDay<=10?"text-danger":t},[e.endDay>0?"剩余".concat(e.endDay," 天"):"已过期"])):Le("span",null,[Ne("--")])},vn=function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.oid,e.p=1,e.n=2,Yt({pdata:JSON.stringify({oid:n})});case 2:r=e.v,Ft.value=r.data,d({isAsync:!0,title:"购买人工服务",area:60,component:function(){return m(function(){return a.import("./pay-ssl-service-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:r.data}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),dn=function(){var e=p(l().m(function e(t){var n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Qt();case 1:n=e.v,zt.value=s(s({},zt.value),n.data),Ft.value=t,pi({orderInfo:t});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),mn=function(){var e=p(l().m(function e(t){var n,r,a,u;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Wt({oid:t.oid});case 1:n=e.v,-1===(r=n.data).code&&r.errors?(hn(r.errors),un.value=!0):(a=r.msg||r.data.msg,u=r.status,h.request({msg:u?a||"提交成功":"资料提交错误，请检查管理员信息是否填写正确，如填写错误请联系客服重置订单",status:u}),u&&bn(t.oid,t.cert_ssl_type,t.pid)),wn(),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),hn=function(e){try{var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){t.push({field:n,error:e})})}),{data:t,total:t.length,other:{}}}catch(n){return{data:[],total:0,other:{}}}},yn=function(e){var t=e.oid;window.open("/ssl?action=download_cert&oid=".concat(t))},gn=function(){var e=p(l().m(function e(t){var n,r,a,u,s,i,c;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.oid,r=t.title,a=t.domainName,e.p=1,u=Rt.value.name,s=Bt.value,e.n=2,g({title:"部署证书",isHtml:!0,content:"是否部署该证书,是否继续？<br>\n\t\t    证书类型：".concat(r,"<br>\n\t\t    证书支持域名：").concat(a.join("、"),"<br>\n\t\t    部署站点名:").concat(u)});case 2:return i={proxy:{oid:n,site_name:u},docker:{oid:n,site_name:u},default:{oid:n,siteName:u}},e.n=3,$t(i[s]||i.default);case 3:return c=e.v,wn(),ci(),Kt.value=!0,qt.value=!0,Mt.value=!0,an("currentCertInfo"),e.a(2,c);case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),bn=function(){var e=p(l().m(function e(t,n,r){var a,u,i;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,tn(t,n,r);case 1:u=e.v,i=u.data,u.status&&fi(s(s({},i),{},{cert_ssl_type:n,certType:n,pid:r})),null===(a=Gt.value)||void 0===a||a.unmount();case 2:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),wn=function(){var e=p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,en({siteName:Rt.value.name});case 1:return t=e.v,Kt.value=!1,e.a(2,t);case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),kn=r("a8",Te(!1)),_n=r("ab",Te(0)),xn=Te({}),Sn={defalutList:[],domianNumList:[],classList:[],brandList:[],typeList:[]},Cn=r("ac",Te({addPrice:0,productName:"",price:0,totalPrice:0,originalPrice:0,deploymentPrice:0,pid:0,years:1,yearsPrice:0,number:1,extraNumber:0,extraPrice:0,install:1})),An=r("a9",Te({num:1,certClassAcitve:"OV",certClass:[{name:"OV证书",title:"推荐企业使用",value:"OV",tips:[],data:[]},{name:"DV证书",title:"推荐个人，测试使用",value:"DV",subscript:"热销",tips:[]},{name:"EV证书",title:"推荐大型政企使用，高安全性",value:"EV",tips:[]}],certBrandAcitve:"",certBrand:[{name:"宝塔证书",title:"宝塔证书",value:"宝塔证书",tips:[]},{name:"Positive",title:"Positive",value:"Positive",tips:[]},{name:"锐安信",title:"锐安信",value:"锐安信",tips:[]},{name:"CFCA",title:"CFCA",value:"CFCA",tips:[]},{name:"Digicert",title:"Digicert",value:"Digicert",tips:[]},{name:"GeoTrust",title:"GeoTrust",value:"GeoTrust",tips:[]},{name:"Sectigo",title:"Sectigo",value:"Sectigo",tips:[]},{name:"亚洲诚信",title:"亚洲诚信",value:"亚洲诚信",tips:[]}],certTypeAcitve:"single",certType:[{name:"single",title:"单域名",value:"single",tips:[]},{name:"multiple",title:"多域名",value:"multiple",tips:[]},{name:"wildcard",title:"泛域名",value:"wildcard",tips:[]},{name:"ip",title:"IP证书",value:"ip",tips:[]}],certLifeAcitve:1,certLife:[{name:"1年",title:"1年",value:1,tips:[]},{name:"2年",title:"2年",value:2,tips:[]},{name:"3年",title:"3年",value:3,tips:[]},{name:"4年",title:"4年",value:4,tips:[]},{name:"5年",title:"5年",value:5,tips:[]}],certDeployAcitve:1,certDeploy:[{name:"不需要",title:"不需要",value:0,tips:[]},{name:"部署服务",title:"部署服务",value:1,tips:[]},{name:"部署服务（国密）",title:"部署服务（国密）",value:2,tips:[]}]})),Tn={single:["仅支持绑定一个二级域名或者子域名，例如 bt.com、cloud.bt.com、dnspod.cloud.bt.com的其中之一 。","如需要绑定同级的所有子域名，例如*.bt.com，请购买泛域名证书。"],wildcard:["带通配符的域名，例如：*.bt.com、*.cloud.bt.com均为泛域名，包含同一级的全部子域名。","注意泛域名不支持跨级，例如*.bt.com 不包含 *.cloud.bt.com的支持"]},Ln={0:[],1:["宝塔提供9:00 - 24:00的人工部署证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"],2:["宝塔提供9:00 - 24:00的人工部署国密算法证书部署服务，帮助客户排查部署证书部署生效问题，快速上线"]},Nn=(r("ae",Ie(function(){var e=An.value.certClass.filter(function(e){return e.value===An.value.certClassAcitve});return e&&e.length>0?e[0].tips:[]})),r("af",Ie(function(){var e=An.value.certBrand.filter(function(e){return e.value===An.value.certBrandAcitve});return e&&e.length>0?e[0].tips:[]})),r("ag",Ie(function(){var e=An.value.certType.filter(function(e){return e.value===An.value.certTypeAcitve});return e&&e.length>0?e[0].tips:[]})),r("ah",Ie(function(){var e=An.value.certLife.filter(function(e){return e.value===parseInt(An.value.certLifeAcitve)});return e&&e.length>0?e[0].tips:[]})),r("ai",Ie(function(){var e=An.value.certDeploy.filter(function(e){return e.value===parseInt(An.value.certDeployAcitve)});return e&&e.length>0?e[0].tips:[]})),r("a7",p(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,kn.value=!0,e.n=1,nn();case 1:if(t=e.v,n=t.data,r=t.status,kn.value=!1,r){e.n=2;break}return h.request({msg:"获取证书列表失败",status:!1}),e.a(2,{status:!1,msg:"获取证书列表失败"});case 2:xn.value=n.info.recommend,En(),In(n.info),Pn(n.data),On(),e.n=4;break;case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"获取证书列表失败"});case 4:return e.a(2)}},e,null,[[0,3]])}))),r("aa",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:An.value.num,t=e;if(y(e)&&"number"!=typeof e?(e=Number(e.data),t=Number(An.value.num)||1):t=Number(An.value.num+e)||1,t&&(t<1||t>99))return An.value.num=t<1?1:99,h.error("域名数量范围为1-99");An.value.num=t,"wildcard"!==An.value.certTypeAcitve&&(An.value.certTypeAcitve=An.value.num>1?"multiple":"single"),On()}),r("ad",function(e,t,n){n||(n=An.value[t].filter(function(t){return t.value===e})),n.disable||("".concat(t,"Acitve")in An.value&&(An.value["".concat(t,"Acitve")]=e),"certClass"==t&&(An.value.certBrandAcitve=Nn()),On())}),function(){var e;return xn.value[null===(e=An.value.certClassAcitve)||void 0===e?void 0:e.toLowerCase()]}),En=function(){An.value.certClassAcitve="DV",An.value.certBrandAcitve=Nn(),An.value.certTypeAcitve="single",An.value.certLifeAcitve=1,An.value.certDeployAcitve=1},Dn=function(e,t,n){return e.map(function(e,r){var a=n?n(e,t):t[e.value];return s(s({},e),{},{tips:a})})},In=function(e){var t=e.type,n=e.brand,r=e.times;An.value.certClass=Dn(An.value.certClass,t,function(e,t){return t["".concat(e.value).toLowerCase()]}),Tn.multiple=Tn.single,An.value.certType=Dn(An.value.certType,Tn),An.value.certDeploy=Dn(An.value.certDeploy,Ln),An.value.certBrand=Dn(An.value.certBrand,n,function(e,t){return t["Positive"!==e.value?"".concat(e.value).toLowerCase():"Positive"]}),An.value.certLife=Dn(An.value.certLife,r,function(e,t){return t[e.value+"_year"]})},jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.num,n=e.classify,r=e.brand,a=e.type,u=e.life,s=e.deploy,i=An.value;return t||(t=i.num),n||(n=i.certClassAcitve),r||(r=i.certBrandAcitve),a||(a=i.certTypeAcitve),u||(u=i.certLifeAcitve),s||(s=i.certDeployAcitve),{num:t,classify:n,brand:r,type:a,life:u,deploy:s}},Pn=function(e){var t=[];e.forEach(function(e){var n,r=null===(n=e.type.match(/(OV|DV|EV)/))||void 0===n?void 0:n[0],a=-1!==e.code.indexOf("wildcard"),u=-1!==e.code.indexOf("ip"),i=e.add_price>0,l=a?"wildcard":i?"multiple":"single";"Digicert"===e.brand&&(l=a?"wildcard":"single"),t.push(s(s({},e),{type:r,certType:l,isMulti:i,isIp:u}))}),Sn.defalutList=t},On=function(){Hn(Sn.defalutList),qn(),Mn()},Hn=function(e){var t=jn().num,n=e.filter(function(e){return!(t>1)||e.isMulti});n.length>0&&(Sn.domianNumList=n,Vn(n))},Vn=function(e){var t=jn().classify,n=e.filter(function(e){return e.type===t});n.length>0&&(Sn.classList=n,Rn(n))},Rn=function(e){var t=jn().brand,n=e.filter(function(e){return e.brand===t});n.length>0&&(Sn.brandList=n,Bn(n))},Bn=function(e){var t=jn().type;1===e.length&&(An.value.certTypeAcitve=e[0].certType);var n=e.filter(function(e){var n="multiple"===An.value.certTypeAcitve&&"wildcard"!==e.certType&&e.isMulti,r="wildcard"===An.value.certTypeAcitve&&"wildcard"===e.certType&&e.isMulti,a="ip"===An.value.certTypeAcitve&&e.isIp;return e.certType===t||n||r||a});n.length>0&&(Sn.typeList=n)},qn=function(){var e=Sn.domianNumList,t=Sn.classList,n=Sn.brandList;Sn.typeList;An.value.certClass.forEach(function(t){var n=e.some(function(e){return e.type===t.value});"EV"==t.value&&"wildcard"===An.value.certTypeAcitve&&(n=!1),t.disable=!n}),An.value.certBrand.forEach(function(e){var n=!t.some(function(t){return t.brand===e.value});if(e.hidden=n,e.subscript=e.value===Nn()?"推荐":"",e.value===An.value.certBrandAcitve&&e.hidden){var r,a;if(An.value.certBrandAcitve=Nn(),e.value===An.value.certBrandAcitve&&e.hidden)An.value.certBrandAcitve=null==Sn||null===(a=Sn.classList)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.brand;var u=null==Sn||null===(r=Sn.classList)||void 0===r?void 0:r.filter(function(e){return e.brand===An.value.certBrandAcitve});u.length>0&&(Sn.brandList=u,Bn(u))}}),An.value.certType.forEach(function(e){var t=!n.some(function(t){return!(!t.isIp||"ip"!==e.value)||t.certType===e.value});"single"===e.value&&An.value.num>1&&(t=!0),"multiple"===e.value&&1===An.value.num&&(t=!0),"multiple"===e.value&&An.value.num>1&&(t=!1),"ip"===e.value&&An.value.num>1&&(t=!0),e.hidden=t}),"CFCA"!==An.value.certBrandAcitve&&2===An.value.certDeployAcitve&&(An.value.certDeployAcitve=1)},Mn=function(){var e=Sn.typeList[0]||null;if(_n.value=(null==e?void 0:e.num)||0,e){var t=jn(),n=t.num,r=t.life,a=t.deploy,u=e.price,s=e.other_price,i=e.add_price,l=e.pid,c=e.num,o=n-c<0?0:n-c,p=[0,e.install_price,e.install_price_v2][a],f=i*o,v=(f+u)*r+p,d=s+f+p;Cn.value={addPrice:i||0,productName:e.title,price:u,totalPrice:v,originalPrice:d,deploymentPrice:p,pid:l,years:r,yearsPrice:u*r,number:c,extraNumber:o,extraPrice:f,install:Number(a)}}},Un=Te({oid:0,wxcode:"",alicode:"",qq:"",orderInfo:{}}),Fn=(r("aj",function(){var e=p(l().m(function e(t){var n,r,a,u,i,o,p,f,v,d,m,y,g,b,w;return l().w(function(e){for(;;)switch(e.n){case 0:return n=Cn.value,r=n.pid,a=n.install,u=n.years,i=n.extraNumber,o={pdata:JSON.stringify({pid:r,install:a,years:u,num:i})},e.n=1,c({loading:"正在创建商业证书订单，请稍后...",request:M(o)});case 1:if(p=e.v,f=p.data,v=p.msg,f.status){e.n=2;break}return e.a(2,h.error(v));case 2:d=f.msg,m=d.oid,y=d.wxcode,g=d.alicode,b=d.qq,w=d.order_info,Un.value={oid:m,wxcode:y,alicode:g,qq:b,orderInfo:w},Ii(s(s({},Un.value),{},{productInfo:Cn.value}));case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),[{content:"通配符证书只支持DNS验证"}]),zn=[{content:"多域名只支持DNS验证"}],Jn=r("Q",Te(!1)),Gn=r("V",Te(!1)),Kn=(r("L",Te("")),r("N",Te(""))),Xn=r("O",Te([])),Zn=Te([]),Yn=r("X",Te(!1)),Qn=r("S",Te()),Wn=r("T",Te({domain:""})),$n=r("y",Te("CNAME_CSR_HASH")),er=(r("p",Te(!0)),r("z",Te("dns"))),tr=r("v",Te(!1)),nr=r("Z",Te(!1)),rr=r("w",Te(!1)),ar=r("G",Te([])),ur=[{content:"https或者http验证，必须保证网站能通过http/https访问"},{content:"域名前缀是www,提醒用户解析上级根域名，如申请www.bt.cn，请确保解析bt.cn"},{content:function(){return Le("a",{class:"text-primary",href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},[Ne("如何验证商用证书?")])}}],sr=(r("P",[{content:"申请之前，请确保域名已解析，如未解析会导致审核失败(包括根域名)"},{content:"申请www.bt.cn这种以www为二级域名的证书，需绑定并解析顶级域名(bt.cn)，否则将验证失败"},{content:"SSL证书可选名称赠送规则："},{content:"1、申请根域名(如：bt.cn),赠送下一级为www的域名(如：www.bt.cn)"},{content:"2、申请当前host为www的域名（如：www.bt.cn）,赠送上一级域名，(如: bt.cn)"},{content:"3、申请其它二级域名，(如：app.bt.cn)，赠送下一级为www的域名 (如：www.app.bt.cn)"}]),r("J",Te([{value:"CNAME_CSR_HASH",label:"DNS验证(CNAME解析)",tips:"如网站还未备案完成，可选【DNS验证】",isCheck:"",checkTips:[]},{value:"HTTP_CSR_HASH",label:"文件验证(HTTP)",tips:"如网站未开启301、302、强制HTTPS、反向代理功能，请选择HTTP",isCheck:"",checkTips:[]},{value:"HTTPS_CSR_HASH",label:"文件验证(HTTPS)",tips:"如网站开启【强制HTTPS】，请选【HTTPS验证】",isCheck:"",checkTips:[]}]))),ir=(r("Y",function(e,t,n){switch(t&&($n.value="HTTP_CSR_HASH"),n.value){case"CNAME_CSR_HASH":return!t;case"HTTP_CSR_HASH":case"HTTPS_CSR_HASH":return!e}}),[{content:"OV/EV证书申请流程条件："},{content:"1、填写网站验证信息(文件验证或DNS验证)"},{content:"2、完成邮箱认证，根据CA发送的邮件完善邮件内容(中文填写即可)"},{content:"3、企查查或者爱企查、百度地图、114best能查询到相关企业信息，且公司名和公司地址完全匹配"},{content:"4、企查查或其他平台留下的电话能保证周一到周五(7:00 - 15:00)能接听到CA的认证电话，电话号码归属地来自美国，请留意接听。"}]),lr=(r("q",Ie(function(){var e=[];return nr.value&&e.push.apply(e,Fn),tr.value&&e.push.apply(e,zn),e.push.apply(e,ur),"dv"!==Ft.value.type&&e.push.apply(e,ir),e})),r("F",Ie(function(){var e=nr.value?"*":"www";return tr.value?"请输入".concat(nr.value?"通配符":"","证书域名，例如：").concat(e,".bt.cn"):"请输入需要申请证书的域名（单域名".concat(nr.value?"通配符":"","证书），例如：").concat(e,".bt.cn")})),r("n",Te({domains:"",interface:"",dcvMethod:"",auth_to:"",Administrator:{address:"",city:"",country:"",email:"",firstName:"",lastName:"",job:"",name:"",mobile:"",organation:"",postCode:"",state:""}}))),cr=Ie(function(){return lr.value.Administrator.lastName+lr.value.Administrator.firstName}),or=(r("D",function(){or(),lr.value.Administrator=s(s({},zt.value),{},{name:""}),lr.value.Administrator.name=cr.value;var e=Ft.value,t=e.pid,n=e.oid,r=e.title,a=e.limit,u=e.install,i=e.code,l=i.indexOf("ev")>-1?"ev":i.indexOf("ov")>-1?"ov":"dv";tr.value=i.indexOf("multi")>-1,nr.value=i.indexOf("wildcard")>-1,rr.value=i.indexOf("ip")>-1,Ft.value={pid:t,oid:n,title:r,limit:a,install:u,isMulti:tr.value,isWildcard:nr.value,isIp:rr.value,type:l}}),function(){var e=p(l().m(function e(){var t,n,r,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Ct();case 1:if(n=e.v,r=n.data,ar.value=r.map(function(e){return{label:e.ps?"".concat(e.dns_name," - ").concat(e.ps):e.dns_name,value:e.id,domains:e.domains,ps:e.ps}}),a=Ft.value.limit,tr.value){e.n=2;break}return e.a(2,lr.value.interface=null===(t=ar.value)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value);case 2:cn.value=Array.from({length:a},function(e,t){var n;return{key:"domain_".concat(t+1),value:"",interface:(null===(n=ar.value)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.value)||""}}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}()),pr=(r("H",p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,rn();case 1:n=e.v,Xn.value=n.data.map(function(e){return s({label:e.name,value:e.name},e)}),Jn.value=!0,Kn.value=(null===(t=Xn.value)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.name)||"",Zn.value=Xn.value,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))),r("M",function(e){Xn.value=[],Zn.value.forEach(function(t){t.name.indexOf(e)>-1&&Xn.value.push(t)}),Xn.value.length||(Xn.value=Zn.value)}),r("R",p(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:lr.value.domains=Kn.value,Jn.value=!1,nr.value||pr();case 1:return e.a(2)}},e)}))),function(){var e=p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return Yn.value=!0,e.n=1,q(Kn.value);case 1:t=e.v,n=t.data,Yn.value=!1,sr.value.forEach(function(e){v(n[e.value])?(e.isCheck=!!n[e.value],e.checkTips=!!n[e.value]):(e.isCheck=!1,e.checkTips=n[e.value])});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()),fr=(r("U",je({domain:[o({message:"域名不能为空"}),{validator:function(e,t,n){f(t)?!nr.value&&t.indexOf("*")>-1?n(new Error("当前为单域名证书，不支持通配符申请")):n():n(new Error("域名格式错误，请重新输入"))},trigger:["change"]}]})),r("I",function(){Gn.value=!0}),r("W",p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(t=Qn.value)||void 0===t?void 0:t.validate();case 1:lr.value.domains=Wn.value.domain,Gn.value=!1,nr.value||pr();case 2:return e.a(2)}},e)}))),r("K",function(e){var t=er.value;if("dns"!==t){var n=Xt.value.find(function(e){return e.value===t});if(n){var r=!n.data;(!e||e&&r)&&mi({title:"设置".concat(n.info.title,"接口"),row:n.info})}}}),r("ak",function(){var e=p(l().m(function e(t,n){var r,a,u,i,c,o,p,f,v,d,m,g,w,k,_,x,S,C,A;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=null,t.value.domains||tr.value){e.n=1;break}return e.a(2,h.error("域名不能为空"));case 1:if(!Ft.value.isIp){e.n=2;break}if(b(t.value.domains)){e.n=2;break}return e.a(2,h.error("IP证书申请域名格式错误，请输入正确的ipv4地址"));case 2:if(t.value.Administrator.state||t.value.Administrator.city){e.n=3;break}return e.a(2,h.error("所在地区不能为空"));case 3:if(t.value.Administrator.address||"dv"===Ft.value.type){e.n=4;break}return e.a(2,h.error("公司详细地址不能为空"));case 4:if(t.value.Administrator.organation){e.n=5;break}return e.a(2,h.error("公司名称不能为空"));case 5:if(t.value.Administrator.name){e.n=6;break}return e.a(2,h.error("姓名不能为空"));case 6:if(t.value.Administrator.email){e.n=7;break}return e.a(2,h.error("邮箱不能为空"));case 7:if(t.value.Administrator.mobile){e.n=8;break}return e.a(2,h.error("手机不能为空"));case 8:return e.p=8,r=h.load("正在提交证书信息，请稍后..."),a=t.value.Administrator,u=a.job,i=a.postCode,c=a.country,a.firstName,a.lastName,o=a.name,p=a.state,f=a.city,v=a.address,d=a.organation,m=a.email,g=a.mobile,e.n=9,U(JSON.stringify({pid:Ft.value.pid,cert_ssl_type:n,oid:Ft.value.oid,domains:tr.value?cn.value.map(function(e){var t=e.value;return null==t?void 0:t.trim()}):[lr.value.domains.trim()],dcvMethod:$n.value,auth_to:er.value,Administrator:{job:u,postCode:i,country:c,lastName:o,state:p,city:f,address:v,organation:d,email:m,mobile:g}}));case 9:if(w=e.v,y(w.data.msg)&&w.data.msg.hasOwnProperty("code")?(k=w.data.errors,sn.value=[],Object.keys(k).forEach(function(e){k[e].forEach(function(t,n){sn.value.push({field:e,error:t})})}),un.value=!0):(_=w.msg||w.data.msg,x=w.data.status,h.request(w.data||{msg:x?_||"提交成功":_||"资料提交错误，请检查管理员信息是否填写正确，如填写错误请联系客服重置订单",status:x})),!w.data.status){e.n=11;break}return Kt.value=!0,e.n=10,tn(Ft.value.oid,n,Ft.value.pid);case 10:C=e.v,A=C.data,C.status,A&&(A.auto_verify_info={interface:tr.value?cn.value:lr.value.interface,set_verify_value:!0},fi(s(s({},A),{},{cert_ssl_type:n,certType:n,pid:Ft.value.pid}))),null===(S=Gt.value)||void 0===S||S.unmount();case 11:e.n=13;break;case 12:e.p=12,e.v;case 13:return e.p=13,r&&r.close(),e.f(13);case 14:return e.a(2)}},e,null,[[8,12,13,14]])}));return function(t,n){return e.apply(this,arguments)}}()),function(){var e=p(l().m(function e(t,n){var r,a,u,s,i,o,p,f,v,d,m,h,y;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return r="CNAME_CSR_HASH"===hr.value,a=Jt.value.data,u=a.DCVdnsValue,s=a.DCVdnsHost,i=a.DCVfileContent,o=a.DCVfileName,p=a.DCVdnsType,e.p=1,f=r?[{record_type:p,sub_domain:s,dns_value:u,dns_id:"",domain:t.url}]:[{file_name:"/.well-known/pki-validation/".concat(o),file_value:i,domain:t.url}],e.n=2,c({loading:"正在验证商用证书，请稍后...",request:St({verify_type:r?"dns":"file",verify_data:JSON.stringify(f),set_verify_value:!1})});case 2:v=e.v,d=v.data,m=d.data[0].rep,h=m.local_verify,y=m.status,yr.value[n].status=h,yr.value[n].verify_status=y,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t,n){return e.apply(this,arguments)}}()),vr=(r("a5",p(l().m(function e(){var t,n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,tn(Jt.value.oid,Jt.value.cert_ssl_type,Jt.value.pid);case 1:return r=e.v,(a=r.data)&&(Jt.value=a),e.n=2,dr();case 2:"PENDING"===(null===(t=Jt.value)||void 0===t?void 0:t.certStatus)&&h.success("验证中，请耐心等待！"),"COMPLETE"===(null===(n=Jt.value)||void 0===n?void 0:n.certStatus)&&h.success("验证成功！"),Gt.value.unmount(),Kt.value=!0;case 3:return e.a(2)}},e)}))),r("a4",function(e){var t=Jt.value.res&&Jt.value.res.verification&&-1==Jt.value.res.verification.indexOf("dns");mr({oid:Jt.value.oid,type:hr.value,certType:Jt.value.certType,pid:Jt.value.pid,isIp:t})}),r("a3",Te([{content:"本次验证结果是由【本服务器验证】，实际验证将由【CA服务器】进行验证，请耐心等候"},{content:"请确保以上列表所有项都验证成功后点击【验证域名】重新提交验证"},{content:"如长时间验证不通过，请通过【修改验证方式】更改为【DNS验证】"},{content:function(){return Le("span",null,[Ne("如何添加域名解析，《"),Le("a",{href:"https://cloud.tencent.com/document/product/302/3446",class:"text-primary",target:"__blink"},[Ne("点击查看教程")]),Ne("》，和咨询服务器运营商")])}}]))),dr=r("_",p(l().m(function e(){var t,n,r,a,u,s,i,c,o,p;return l().w(function(e){for(;;)switch(e.n){case 0:if(null===(t=Jt.value)||void 0===t||!t.data){e.n=1;break}return n=Jt.value,r=n.data,a=r.dcvList,u=r.DCVdnsHost,s=r.DCVdnsType,i=r.DCVdnsValue,c=r.DCVfileName,o=r.DCVfileContent,n.paths,n.auto_verify_info,gr.value=null==a?void 0:a.map(function(e){return e.domainName}).join(","),hr.value=a[0].dcvMethod,p={dnsHost:u,dnsType:s,dnsValue:i,fileName:c,fileContent:o,filePath:"/.well-known/pki-validation/"},Ht(),"CNAME_CSR_HASH"!==hr.value&&vr.value.splice(3,1,{content:function(){return Le("span",null,[Ne("SSL添加文件验证方式 ->> "),Le("a",{href:"https://www.bt.cn/bbs/thread-56802-1-1.html",target:"_blank",class:"text-primary"},[Ne("查看教程")])])}}),e.a(2,p);case 1:return h.error("获取数据失败"),e.a(2,{});case 2:return e.a(2)}},e)}))),mr=function(e){return d({title:"验证域名-"+(e.type.indexOf("CNAME_")>-1?"DNS验证":"文件验证"),area:52,showFooter:!0,btn:["更改","取消"],component:function(){return m(function(){return a.import("./modify-verify-way-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:e})},hr=r("$",Te("")),yr=r("a2",Te([])),gr=r("a0",Te()),br=function(e){var t=function(e,t){return Le("span",{class:"bt-link",onClick:t},[e])},n=t("人工服务",function(){return Tt()}),r=t("详情",function(){return function(e){d({title:"多年期证书详情",area:52,compData:e,component:function(){return m(function(){return a.import("./mulit-cert-detail-legacy.js?v=1763689792")},void 0,a.meta.url)}})}(e)}),u=t("下载",function(){return yn(e)}),s=t("部署",function(){return gn(e)}),i=t("验证",function(){return bn(e.oid,e.cert_ssl_type,e.pid)}),l=t("续签",function(){return Di(e.oid)}),c=t("完善资料",function(){return dn(e)}),o=e.orderStatus,p=[];switch(e.years&&e.years>1&&[5,15].includes(Number(o))&&p.push(r),Number(o)){case 0:e.install&&p.push(n),p.push(c);break;case 3:case 11:e.install&&p.push(n),p.push(i);break;case 5:p.push(s),p.push(u);break;case 7:p.push(l)}var f=[];return p.map(function(e,t){f.push(e),t<p.length-1&&f.push(Le(vt,null,null))}),f},wr={id:"wechat-customer",class:"wechat-customer"},kr={class:"w-full h-[46px] flex flex-row items-center justify-center"},_r={class:"qrcode-wechat w-[128px] h-[128px] m-[8px_0_4px_0]"},xr={id:"wechatCustomerQrcode"},Sr=He({__name:"customer-popover",props:{trigger:{default:"click"},showArrow:{type:Boolean,default:!0},placement:{default:"left"}},setup:function(e,t){var r=t.expose,a=e,u=Te(null),s=Ie(function(){return a.trigger}),i=Ie(function(){return a.showArrow}),l=Ie(function(){return a.placement});return r({BtCustomerPopover:function(){return u}}),function(e,t){var r=w,a=k,c=Oe;return Ve(),Re(c,Ue({ref_key:"BtCustomerPopover",ref:u},e.$attrs,{trigger:Fe(s),placement:Fe(l),effect:"light","popper-class":"BtCustomerPopover","show-arrow":Fe(i),"popper-style":{padding:"0",border:"0",background:"0"}}),{reference:Be(function(){return[qe(e.$slots,"default",{},void 0,!0)]}),default:Be(function(){return[Me("div",wr,[Me("div",kr,[Le(r,{target:"_blank",href:"https://www.bt.cn/new/wechat_customer",class:"text-[16px] flex flex-row flex-nowrap items-center"},{default:Be(function(){return n(t[0]||(t[0]=[Me("div",{class:"flex items-center border-b border-solid border-[var(--el-color-primary-light-9)] pb-4px"},[Ne(" 点击咨询客服 "),Me("i",{class:"svgtofont-el-d-arrow-right ml-4px w-[15px]"})],-1)]))}),_:1})]),Me("div",_r,[Me("div",xr,[Le(a,{src:"/customer/customer-qrcode.png"})])]),t[1]||(t[1]=Me("div",{class:"wechat-title"},[Me("img",{class:"icon",style:{width:"17px",height:"17px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAATlJREFUSEvtVrFOw0AMfed8AxJsZWGAgQHBXP4DCQa+Ioou7g18BRIg9T/KDGJggIGFbiDxDXGQowSBuGvrFISEmtF+7/nis312RVEMiWgIoMT375aIjpj5KeJrTMy8JSJjAPsRzEhErl1Zlhd1XZ8kRKZEdMjM0xlBBiIyATCIYZxzl857X6uTiHaY+TElZrUz87aIPCjvI0gIwVmF5uG7H1gFmZepxv85XTdqCCEcLMQ0gLz3jbbTOm/rPdkLBt0v0E77xysq2it9T2nhuTzPN4ho10KyYEXkXvvkBcC6hWjEvmqQMwCnANZa8p1RJAbfa41vAM7/0cUzczOiZ43zvunrtPVOntuO3+wrluJ12qspvFBm/+bR+u03nhPrkKZk2ZVINUZO964sy44Ta9FSK5GuQ1VVXb0DLf+sHQ9tLL0AAAAASUVORK5CYII="}),Me("div",{class:"scan-title",style:{"font-size":"16px"}},"扫一扫")],-1)),t[2]||(t[2]=Me("span",{class:"layui-layer-setwin wechat-close",style:{display:"block"}},[Me("a",{href:"javascript:;",class:"layui-layer-ico layui-layer-close layui-layer-close2"})],-1))])]}),_:3},16,["trigger","placement","show-arrow"])}}}),Cr=r("C",_(Sr,[["__scopeId","data-v-9064b685"]])),Ar={class:"h-full"},Tr={class:"recommendList"},Lr={class:"text-small ml-[8px] text-stroke-primary"},Nr={class:"flex flex-col w-full pt-[16px]"},Er={class:"flex items-center"},Dr={class:"flex items-center"},Ir=He({__name:"index",setup:function(e,t){var r=t.expose,a=ht(),u=a.sslAlertState,s=a.isRefreshSSL,i=x({request:wn,columns:[{label:"域名",prop:"domainName",width:120,render:function(e,t){return Le("span",{class:"w-full whitespace-pre-line"},[e.domainName?e.domainName.join("、"):"--"])}},{label:"证书类型",prop:"title",showOverflowTooltip:!0},{label:"到期时间",width:100,render:fn,showOverflowTooltip:!0},{label:"状态",prop:"expire",width:160,showOverflowTooltip:!1,render:function(e,t){var n=[],r=function(e,t){return Le("span",{style:"color: ".concat(e,";")},[t])},a=Le(Oe,{placement:"bottom-end",width:"400","popper-class":"white-theme",trigger:"click"},{default:function(){return Le("div",{class:"bus-ssl-popover"},[Le("div",{class:"ssl-popover-item"},[Le("span",{class:"ssl-popover-title"},[Ne("自行排查")]),Le("p",null,[Ne("以图文的形式，一步步教您验证并部署商业SSL")]),Le("a",{class:"bt-link",href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},[Ne("如何验证商用证书?")])]),Le("div",{class:"ssl-popover-item"},[Le("span",{class:"ssl-popover-title"},[Ne("购买人工")]),Le("p",null,[Ne("不会部署?人工客服帮你全程部署，不成功可退款")]),Le(Pe,{size:"small",type:"primary",onClick:function(){return vn(e)}},{default:function(){return[Ne("购买人工")]}})])])},reference:function(){return Le("span",{class:"bt-link"},[Ne("排查方法?")])}});if(e.cert_ssl_type)return function(e){var t=Le(Oe,{placement:"bottom-end",width:"400","popper-class":"white-theme",trigger:"click"},{default:function(){return Le("div",{class:"bus-ssl-popover"},[Le("div",{class:"ssl-popover-item"},[Le("span",{class:"ssl-popover-title"},[Ne("自行排查")]),Le("p",null,[Ne("以图文的形式，一步步教您验证并部署商业SSL")]),Le("a",{class:"bt-link",href:"https://www.bt.cn/bbs/thread-85379-1-1.html",target:"_blank"},[Ne("如何验证商用证书?")])]),Le("div",{class:"ssl-popover-item"},[Le("span",{class:"ssl-popover-title"},[Ne("购买人工")]),Le("p",null,[Ne("不会部署?人工客服帮你全程部署，不成功可退款")]),Le(Pe,{size:"small",type:"primary",onClick:function(){return vn(e)}},{default:function(){return[Ne("购买人工")]}})])])},reference:function(){return Le("span",{class:"bt-link"},[Ne("排查方法?")])}}),n=e.orderStatus,r=[];switch(Number(n)){case-1:r.push(Le("span",{class:"text-danger"},[Ne("已取消")]));break;case 0:r.push(Le("span",{class:"text-warning"},[Ne("待完善资料")])),e.install||r.push(t);break;case 1:r.push(Le("span",{class:"text-warning"},[Ne("待审核")]));break;case 2:r.push(Le("span",{class:"text-warning"},[Ne("正在提交CA")]));break;case 3:r.push(Le("span",{class:"text-warning"},[Ne("待域名验证")]));break;case 4:r.push(Le("span",{class:"text-warning"},[Ne("签发中")]));break;case 5:r.push(Le("span",{class:"text-success"},[Ne("已签发")]));break;case 6:r.push(Le("span",{class:"text-warning"},[Ne("取消确认")]));break;case 7:r.push(Le("span",{class:"text-warning"},[Ne("待续费")]));break;case 8:r.push(Le("span",{class:"text-warning"},[Ne("待吊销确认")]));break;case 9:r.push(Le("span",{class:"text-warning"},[Ne("待重颁发")]));break;case 10:r.push(Le("span",{class:"text-warning"},[Ne("重颁发中")]));break;case 11:r.push(Le("span",{class:"text-warning"},[Ne("吊销中")]));break;case 12:r.push(Le("span",{class:"text-danger"},[Ne("已吊销")]));break;default:r.push(Le("span",{class:"text-warning"},[Ne("待完善资料")]))}var a=[];return r.map(function(e,t){a.push(e),t<r.length-1&&a.push(Le(vt,null,null))}),a}(e);var u,s,i=e.domainName&&e.domainName.length>0;if(""!=e.certId||i)if(""==e.certId&&0!==e.domainName.length)n.push(Le("span",{class:"bt-warn"},[Ne("待提交")]));else if(1===e.status)switch(e.orderStatus){case"COMPLETE":n.push(r("primary","订单完成"));break;case"PENDING":n.push((u="orange",s="验证中",Le(Oe,{trigger:"hover",placement:"left","popper-class":"popover-default",width:"300",enterable:!1,"open-delay":100,"close-delay":0},{default:function(){return Le("div",{class:"flex items-center p-[2px] whitespace-nowrap"},[Ne("1、如填写错误，联系人工可重置订单"),Le("br",null,null),Ne("2、如验证方式选择错误，联系人工修改验证方式")])},reference:function(){return Le("div",{style:"color: ".concat(u,";")},[s])}})));break;case"CANCELLED":n.push(r("medium","已取消"));break;case"REISSUED":n.push(r("primary","已重签"));break;case"FAILED":n.push(r("danger","申请失败"));break;case"EXPIRED":n.push(r("medium","已过期"));break;default:n.push(r("orange","待验证"))}else switch(e.status){case 0:n.push(r("orange","未支付"));break;case-1:n.push(r("medium","已取消"))}else n.push(Le("span",{class:"bt-warn",onClick:function(){return dn(e)}},[Ne("待完善资料")])),n.push(a);var l=[];return n.map(function(e,t){l.push(e),t<n.length-1&&l.push(Le(vt,null,null))}),l}},{label:"操作",prop:"ps",width:170,align:"right",render:function(e,t){if(e.cert_ssl_type)return br(e);var n=function(e,t){return Le("span",{class:"bt-link",onClick:t},[e])},r=n("人工服务",function(){return Tt()}),a=n("下载",function(){return yn(e)}),u=n("部署",function(){return gn(e)}),s=n("验证",function(){return bn(e.oid,e.cert_ssl_type,e.pid)}),i=n("续签",function(){return Di(e.oid)}),l=[],c=e.domainName&&e.domainName.length>0;if(""!=e.certId||c)if(""==e.certId&&0!==e.domainName.length)l.push(n("提交",function(){return mn(e)}));else if(1===e.status)switch(e.orderStatus){case"COMPLETE":1===e.ssl_state?l.push(Le("span",null,[Ne("已部署")])):l.push(u),e.endDay<30&&l.push(i),l.push(a);break;case"PENDING":default:e.install&&l.push(r),l.push(s);break;case"CANCELLED":l.push(Le("span",null,[Ne("无操作")]));break;case"FAILED":l.push(Le("span",{class:"bt-danger cursor-default"},[Ne("申请失败")]));break;case"EXPIRED":l.push(u),l.push(a);case"REISSUED":}else l.push(Le("span",null,[Ne("无操作")]));else e.install&&l.push(r),l.push(n("完善资料",function(){return dn(e)}));var o=[];return l.map(function(e,t){o.push(e),t<l.length-1&&o.push(Le(vt,null,null))}),o}}],extension:[S(),C(s)]}),l=i.BtTable,c=i.BtRefresh,o=i.refresh,p=ze(function(){var e=document.querySelector("#pane-busSslList");e&&e.click()},1e3);return r({init:o}),function(e,t){var r=Pe,a=k,s=Ae,i=A;return Ve(),Je("div",Ar,[Me("div",Tr,[(Ve(!0),Je(Ge,null,Ke(Fe(on),function(e,n){return Ve(),Je("div",{key:n,class:Xe("".concat(6===n?"w-[22rem]":"w-[14rem]"," recomItem"))},[t[0]||(t[0]=Me("i",{class:"svgtofont-el-check font-bold text-[#ff8d00] text-medium"},null,-1)),Me("span",Lr,Ze(e),1)],2)}),128))]),Me("div",Nr,[Le(s,null,{"header-left":Be(function(){return[Me("div",Er,[Le(r,{type:"primary",onClick:Fe(si),class:"mr-4"},{default:Be(function(){return n(t[1]||(t[1]=[Ne(" 申请证书 ",-1)]))}),_:1},8,["onClick"]),Le(Cr,{placement:"right"},{default:Be(function(){return[Me("div",Dr,[Le(a,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=Me("span",{class:"bt-link"},"售前客服",-1))])]}),_:1})])]}),"header-right":Be(function(){return[Le(Fe(c))]}),content:Be(function(){return[Le(Fe(l),{"max-height":Fe(u)?320:380,onWheel:Fe(p)},null,8,["max-height","onWheel"])]}),_:1})]),Le(i,{options:Fe(pn),listStyle:"disc"},null,8,["options"])])}}}),jr=_(Ir,[["__scopeId","data-v-4fa3e526"]]),Pr=gt(),Or=Pr.siteType,Hr=Pr.siteInfo,Vr=ht().isRefreshSSL,Rr=[{label:"所有",value:0},{label:"未过期",value:1},{label:"即将过期",value:2},{label:"已过期",value:3}],Br=Te(!1),qr=Te(),Mr=Te({}),Ur=Te(!1),Fr=je({typeValue:"全部",btnText:"部署证书",search:"",data:{all:[],site:[]},siteList:[]}),zr=function(){var e=p(l().m(function e(){var t,n,r,a,u=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:Or.value,0!==Fr.siteList.length){e.n=1;break}return h.error("请选择站点"),e.a(2);case 1:return n=Mr.value,r=n.hash,a=n.subject,e.n=2,vi({hash:r,subject:a,list:Fr.siteList,type:t});case 2:Ur.value=!1;case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Jr=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,g({title:"删除证书",content:"删除后该证书将不会显示在证书夹，是否继续操作？",icon:"warning-filled"});case 1:return e.n=2,c({loading:"正在删除证书...",request:F({local:t.cloud_id>0?0:1,ssl_hash:t.hash}),message:!0});case 2:Yr.value=!0;case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();Te([dt(),{label:"站点名称",prop:"name",render:function(e){return e.current?e.name+"(当前站点)":e.name}}]);var Gr=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return n={},r=!0,void 0!==t&&(n={cert_list:JSON.stringify(t.dns)},r=!1,Mr.value=t),e.n=1,c({request:"docker"===Or.value?z(n):J(n),data:{all:Array,site:Array}});case 1:a=e.v,Fr.data={all:a.all.map(function(e){return{name:e}}),site:a.site.map(function(e){return{name:e}})},r||(Ur.value=!0,Ye(function(){var e;Fr.data.all.forEach(function(e,t){e.name===Hr.value.name&&(e.current=!0,Fr.data.all.unshift(Fr.data.all.splice(t,1)[0]))}),null===(e=qr.value)||void 0===e||e.toggleRowSelection(Fr.data.all.find(function(e){return e.name===Hr.value.name}),!0)}));case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Kr=function(e){Fr.siteList=e,e.length<=0?Fr.btnText="部署证书":Fr.btnText="部署证书[已选择".concat(e.length,"项]")},Xr=function(e){Fr.typeValue=e},Zr=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g({title:"上传云端证书",content:"将会上传证书信息至云端进行替换，是否继续操作？",icon:"warning-filled",type:"calc"});case 1:return e.n=2,c({loading:"正在上传证书至云端...",request:G({ssl_hash:t.hash}),message:!0});case 2:e.v,Vr.value=!0,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),Yr=Te(!1),Qr=function(){var e=p(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:Yr.value=!0,Vr.value=!0,h.success("获取成功");case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Wr=function(){var e=p(l().m(function e(t){var n,r,a,u,s=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:Yr.value,e.p=1,r={search_limit:t.search_limit,search_name:t.search,force_refresh:Number(n)},Yr.value=!1,e.n=2,c({loading:Br,request:K(r)});case 2:return a=e.v,u=a.data,T(u)||h.request(u),n&&h.success("获取成功"),e.a(2,{data:u,total:0,other:{}});case 3:return e.p=3,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),$r={class:"relative h-[45rem]"},ea={class:"p-[20px]"},ta={class:"flex flex-col p-[12px] bg-light"},na={class:"mb-[4px]"},ra={class:"mb-[4px]"},aa={class:"mb-[4px]"},ua={class:"flex justify-between mb-[1rem]"},sa={class:"absolute bottom-0 w-full bg-light flex items-center justify-end p-[12px]"},ia=He({__name:"index",setup:function(e,t){var r=t.expose;ht();var a,u=N({key:"search_limit",options:Rr,other:{class:"!w-[10rem] mr-1rem",filterable:!0}}),s=L({request:Wr,columns:[{label:"域名",prop:"subject",render:function(e){var t;return Qe("div",{class:"whitespace-pre-wrap"},(null===(t=e.dns)||void 0===t?void 0:t.join("\n"))||e.subject)}},{label:"到期时间",prop:"not_after"},{label:"品牌",prop:"info.issuer",showOverflowTooltip:!0},{label:"位置",render:function(e){return e.cloud_id>0?"云端":"本地"}},mt([{onClick:(a=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Zr(t);case 1:f();case 2:return e.a(2)}},e)})),function(e){return a.apply(this,arguments)}),width:60,title:"上传云端",isHide:function(e){return e.cloud_id>0}},{onClick:Gr,title:"部署"},{onClick:Jr,title:"删除"}])],extension:[u,C(Yr)]}),i=s.BtTable,c=s.BtSearch,o=s.BtTableSelect,f=s.refresh;return r({init:f}),function(e,t){var r=Pe,a=E,u=tt,s=nt,l=D,p=Ae,f=We("bt-loading");return Ve(),Je("div",null,[Le(p,null,{"header-left":Be(function(){return[Le(r,{type:"default",onClick:Fe(Qr)},{default:Be(function(){return n(t[4]||(t[4]=[Ne(" 从云端同步 ",-1)]))}),_:1},8,["onClick"])]}),"header-right":Be(function(){return[Me("div",null,[Le(Fe(o))]),Le(Fe(c),{class:"w-[30rem]",placeholder:"请输入域名搜索"})]}),content:Be(function(){return[Le(Fe(i),{"max-height":500})]}),popup:Be(function(){return[Le(l,{title:"部署当前证书",modelValue:Fe(Ur),"onUpdate:modelValue":t[3]||(t[3]=function(e){return $e(Ur)?Ur.value=e:null}),area:52},{default:Be(function(){var e;return[Me("div",$r,[Me("div",ea,[Me("div",ta,[Me("span",na,"认证域名："+Ze(Fe(Mr).subject),1),Me("span",ra,"证书类型："+Ze(null===(e=Fe(Mr).info)||void 0===e?void 0:e.issuer),1),Me("span",aa,"到期时间："+Ze(Fe(Mr).not_after),1)]),t[5]||(t[5]=Me("span",{class:"!mt-[24px] !mb-[4px] inline-block"},"如下是需要批量部署证书的站点：",-1)),Me("div",ua,[Le(a,{type:"button",modelValue:Fe(Fr).typeValue,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Fe(Fr).typeValue=e}),size:"default",options:[{label:"全部",value:"全部"},{label:"匹配站点",value:"匹配站点"}],onChange:Fe(Xr)},null,8,["modelValue","onChange"])]),et((Ve(),Re(s,{ref_key:"deploySiteTableRef",ref:qr,onSelectionChange:Fe(Kr),data:Fe(Fr).data["全部"===Fe(Fr).typeValue?"all":"site"],"max-height":180},{default:Be(function(){return[Le(u,{type:"selection",width:"55"}),Le(u,{label:"站点名称",prop:"name"},{default:Be(function(e){return[Ne(Ze(String(e.row.name)+(e.row.current?"(当前站点)":"")),1)]}),_:1})]}),_:1},8,["onSelectionChange","data"])),[[f,"正在加载中，请稍后...","title"],[f,Fe(Br)]])]),Me("div",sa,[Le(r,{type:"info",onClick:t[1]||(t[1]=function(e){return Ur.value=!1})},{default:Be(function(){return n(t[6]||(t[6]=[Ne("取消",-1)]))}),_:1}),Le(r,{type:"primary",onClick:t[2]||(t[2]=function(e){return Fe(zr)()})},{default:Be(function(){return[Ne(Ze(Fe(Fr).btnText),1)]}),_:1})])])]}),_:1},8,["modelValue"])]}),_:1})])}}}),la=ht(),ca=la.sslInfo,oa=la.sslTabActive,pa=gt(),fa=pa.siteInfo,va=pa.siteType,da=pa.isRefreshList,ma=De(kt()),ha=ma.isRefreshLocalList,ya=[{content:function(){return Le("span",null,[Ne("粘贴您的*.key以及*.pem内容，然后保存即可"),Le("a",{href:"http://www.bt.cn/bbs/thread-704-1-1.html",class:"text-primary",target:"_blank"},[Ne("[帮助]")]),Ne("。")])}},{content:"如果浏览器提示证书链不完整,请检查是否正确拼接PEM证书"},{content:"PEM格式证书 = 域名证书.crt + 根证书(root_bundle).crt"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"}],ga=function(e){switch(e){case 3:oa.value="busSslList";break;case 2:oa.value="trustAsiaList";break;case 1:oa.value="letsEncryptList";break;case 0:oa.value="currentCertInfo";break;default:oa.value="certFolderList"}},ba=Te(!1),wa=Te(!1),ka=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:t?bt({onCancel:function(){ca.value.pushAlarm=!t}}):(wa.value="all"===ca.value.push.task_data.project,ba.value=!0);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),_a=function(){var e=ca.value.push,t=e.id,n=e.task_data,r=e.sender;return{template_id:1,task_id:t,status:0,task_data:JSON.stringify({task_data:{status:!1,type:"site_ssl",project:wa.value?"all":fa.value.name,cycle:parseInt(n.cycle),title:"网站SSL到期提醒",interval:600,tid:1},sender:r,time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:0,total:3}})}},xa=function(){ca.value.pushAlarm=!0},Sa=function(){var e=p(l().m(function e(){var t,n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return ba.value=!1,e.p=1,t=h.load("正在关闭证书到期提醒，请稍后..."),n=_a(),e.n=2,X(n);case 2:r=e.v,h.request(r),r.status&&ci(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,t&&t.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),Ca=function(){var e=p(l().m(function e(){var t,n,r,a,u,s,i;return l().w(function(e){for(;;)switch(e.n){case 0:if(t=!1,n=ca.value,r=n.key,a=n.csr,u=n.type,s=fa.value.name,Ta.value||La.value){e.n=1;break}return e.a(2,h.error("请填写完整的证书内容"));case 1:if(Ta.value===r&&La.value===a){e.n=2;break}return t=!0,e.n=2,g({title:"证书保存提示",content:"当前证书内容发生改变，证书信息将同步更新，继续操作？"});case 2:return i={proxy:{site_name:s,key:Ta.value,csr:La.value},docker:{site_name:s,key:Ta.value,csr:La.value},default:{type:t?0:u,siteName:s,key:Ta.value,csr:La.value}},e.n=3,c({loading:"正在保存证书信息，请稍后...",request:Z(i[va.value]||i.default,va.value),message:!0,success:function(e){e.status&&(da.value=!0,ha.value=!0,ci())}});case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Aa=function(){var e=p(l().m(function e(t){var n,r,a,u,s,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t){e.n=1;break}return e.n=1,g({title:"关闭强制HTTPS",content:"关闭强制HTTPS后需要清空浏览器缓存才能生效,是否继续操作?",icon:"warning-filled"});case 1:return n=fa.value.name,r=va.value,u=(a={proxy:{site_name:n,force_https:t?"1":"0"},docker:{site_name:n,force_https:t?"1":"0"},default:{siteName:n}})[r]||a.default,i=(s={proxy:Y,docker:Q,default:t?W:$})[r]||s.default,e.n=2,c({loading:"正在".concat(t?"开启":"关闭","强制HTTPS，请稍后..."),request:i(u),message:!0});case 2:return e.n=3,ci();case 3:e.n=5;break;case 4:e.p=4,e.v,ca.value.https=!t;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),Ta=Ie({get:function(){return ca.value.key},set:function(e){ca.value.key=e}}),La=Ie({get:function(){return ca.value.csr},set:function(e){ca.value.csr=e}}),Na=function(){var e=p(l().m(function e(){var t,n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return t={siteName:fa.value.name,pem:La.value,key:Ta.value},e.n=1,c({loading:"正在下载证书，请稍后...",request:ee(t),data:{status:Boolean,msg:String}});case 1:n=e.v,r=n.status,a=n.msg,r&&window.open("/download?filename="+encodeURIComponent(a));case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ea=!0,Da=function(){try{Ea?Ea=!1:ii()}catch(e){}},Ia=(r("i",function(){try{var e,n={},r=ca.value.push;if(r&&t(r.status)){var a=ca.value.push,u=a.sender,s=(a.module,a.status,a.id);n={cycle:r.task_data.cycle||30,push:Array.isArray(u)?u:u?u.split(","):[],dueAlarm:r.status,id:s||(new Date).getTime(),domainName:fa.value.name}}return"all"===(null==r||null===(e=r.task_data)||void 0===e?void 0:e.project)&&r.status&&(n.allSsl=!0),{data:n,status:!0}}catch(i){return{status:!1,msg:"获取证书到期提醒配置失败"}}}),function(e){e.id;var t=e.allSsl,n=e.push,r=e.cycle,a=e.dueAlarm;return{template_id:1,task_id:ca.value.push.id,status:a?1:0,task_data:JSON.stringify({task_data:{status:a,type:"site_ssl",project:t?"all":fa.value.name,cycle:parseInt(r),title:"网站SSL到期提醒",interval:600,tid:1},sender:n,time_rule:{send_interval:0,time_range:[0,86399]},number_rule:{day_num:0,total:3}})}}),ja=(r("e",function(){var e=p(l().m(function e(t,n){var r,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n();case 1:return r=Ia(t.value),e.n=2,c({loading:"正在设置到期提醒，请稍后...",request:X(r),message:!0});case 2:return a=e.v,ci(),e.a(2,a.status);case 3:return e.p=3,e.v,e.a(2,!1)}},e,null,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}()),function(){var t=p(l().m(function t(n,r){var a,u,s,i,c,o,p,f,v;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!r){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,navigator.clipboard.readText();case 2:a=t.v,u=[/-----BEGIN PRIVATE KEY-----[\s\S]*?-----END PRIVATE KEY-----/,/-----BEGIN RSA PRIVATE KEY-----[\s\S]*?-----END RSA PRIVATE KEY-----/,/-----BEGIN EC PRIVATE KEY-----[\s\S]*?-----END EC PRIVATE KEY-----/],s=[/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/,/-----BEGIN CERTIFICATE REQUEST-----[\s\S]*?-----END CERTIFICATE REQUEST-----/],i=e("key"===n?u:s),t.p=3,i.s();case 4:if((c=i.n()).done){t.n=8;break}if(o=c.value,!(p=a.match(o))||!p[0]){t.n=7;break}h.success("已从粘贴板检测到".concat("key"===n?"密钥":"证书")),f=n,t.n="key"===f?5:"cert"===f?6:7;break;case 5:return Ta.value=p[0],t.a(3,7);case 6:return La.value=p[0],t.a(3,7);case 7:t.n=4;break;case 8:t.n=10;break;case 9:t.p=9,v=t.v,i.e(v);case 10:return t.p=10,i.f(),t.f(10);case 11:t.n=13;break;case 12:t.p=12,t.v;case 13:return t.a(2)}},t,null,[[3,9,10,11],[1,12]])}));return function(e,n){return t.apply(this,arguments)}}()),Pa=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:try{t(),"docker"===va.value?xt("httpsOfficersSite"):_t("httpsOfficersSite")}catch(n){}case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Oa=function(){var e=p(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c({request:te({siteName:fa.value.name})});case 1:return e.n=2,ci();case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),Ha={class:"flex flex-col w-full overflow-y-hidden"},Va={class:"flex items-center justify-between w-full"},Ra={class:"flex"},Ba={class:"mr-[32px] text-small"},qa={key:1,class:"ssl-status-info"},Ma={class:"left flex-1"},Ua=["title"],Fa={class:"!mb-0"},za={class:"right flex-1"},Ja=["title"],Ga={key:0},Ka={key:1,class:"text-danger"},Xa={class:"!mb-0"},Za={class:"flex items-center"},Ya={class:"flex flex-1 justify-start"},Qa={class:"flex-1 mr-[20px]"},Wa={class:"flex-1"},$a={class:"my-[16px]"},eu={class:"p-2rem"},tu={class:"flex"},nu={class:"ml-4"},ru={class:"mt-8px flex items-center"},au=He({__name:"index",setup:function(e,t){var r=t.expose,a=ht().sslInfo,u=["宝塔证书","Let's Encrypt","宝塔SSL","商业证书"],s=Ie(function(){return-1!==a.value.type?u[a.value.type]:u[0]}),i=rt("popupClose",function(){});return at(Da),r({init:Da}),function(e,t){var r,u,l,c,o,p,f,v=st,d=w,m=it,h=lt,y=Pe,g=A,b=ct,k=ot,_=D;return Ve(),Je("div",Ha,[null===(r=Fe(a))||void 0===r||!r.isCertInfo||null!==(u=Fe(a))&&void 0!==u&&u.httpsMode||null===(l=Fe(a))||void 0===l||!l.isStart?ut("",!0):(Ve(),Re(v,{key:0,type:"error",class:"!mb-[16px]",onClose:Fe(Oa)},{title:Be(function(){return[Me("div",Va,[Me("div",Ra,[Me("div",Ba,[t[13]||(t[13]=Ne("网站安全：未开启HTTPS防窜站，站点访问可能存在风险。",-1)),Me("span",{class:"ml-[1rem] bt-link",onClick:t[0]||(t[0]=function(e){return Fe(Pa)(Fe(i))})},">>前往开启")])])])]}),_:1},8,["onClose"])),null!==(c=Fe(a))&&void 0!==c&&c.isCertInfo?(Ve(),Je("div",qa,[Me("div",Ma,[Me("div",null,[t[14]||(t[14]=Me("span",null,"证书分类：",-1)),Me("span",null,[Le(d,{onClick:t[1]||(t[1]=function(e){return Fe(ga)(Fe(a).type)})},{default:Be(function(){return[Ne(Ze(Fe(s)),1)]}),_:1})])]),Me("div",null,[t[15]||(t[15]=Me("span",null,"认证域名：",-1)),Me("span",{class:"truncate max-w-24rem",title:Fe(a).dns.join("、")},Ze(Fe(a).dns.join("、")),9,Ua)]),Me("div",Fa,[t[16]||(t[16]=Me("span",null,"强制HTTPS：",-1)),Me("span",null,[Le(m,{size:"small",class:"!mb-0",modelValue:Fe(a).https,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Fe(a).https=e}),onChange:Fe(Aa)},null,8,["modelValue","onChange"])])])]),Me("div",za,[Me("div",null,[t[17]||(t[17]=Me("span",null,"证书品牌：",-1)),Me("span",{class:"truncate max-w-24rem",title:Fe(a).issuer},Ze(Fe(a).issuer),9,Ja)]),Me("div",null,[t[18]||(t[18]=Me("span",null,"到期时间：",-1)),Me("span",null,[Number(Fe(a).endtime)>0?(Ve(),Je("span",Ga,Ze(Fe(a).notAfter),1)):(Ve(),Je("span",Ka,"证书已过期"))])]),Me("div",Xa,[t[20]||(t[20]=Me("span",null,"到期提醒：",-1)),Me("span",Za,[Le(m,{size:"small",class:"!mb-0",modelValue:Fe(a).pushAlarm,"onUpdate:modelValue":t[3]||(t[3]=function(e){return Fe(a).pushAlarm=e}),onChange:Fe(ka)},null,8,["modelValue","onChange"]),Le(d,{class:"ml-[8px]",onClick:t[4]||(t[4]=function(e){return Fe(bt)()})},{default:Be(function(){return n(t[19]||(t[19]=[Ne(" 到期设置提醒 ",-1)]))}),_:1})])])])])):ut("",!0),Me("div",Ya,[Me("div",Qa,[t[21]||(t[21]=Me("div",{class:"mb-[4px]"},"密钥(KEY)",-1)),Le(h,{type:"textarea",rows:12,modelValue:Fe(Ta),"onUpdate:modelValue":t[5]||(t[5]=function(e){return $e(Ta)?Ta.value=e:null}),onFocus:t[6]||(t[6]=function(e){return Fe(ja)("key",Fe(Ta))})},null,8,["modelValue"])]),Me("div",Wa,[t[22]||(t[22]=Me("div",{class:"mb-[4px]"},"证书(PEM格式)",-1)),Le(h,{type:"textarea",rows:12,modelValue:Fe(La),"onUpdate:modelValue":t[7]||(t[7]=function(e){return $e(La)?La.value=e:null}),onFocus:t[8]||(t[8]=function(e){return Fe(ja)("cert",Fe(La))})},null,8,["modelValue"])])]),Me("div",$a,[Le(y,{type:"primary",class:"mr-[4px]",onClick:Fe(Ca)},{default:Be(function(){var e;return[Ne(Ze(null!==(e=Fe(a))&&void 0!==e&&e.isStart?"保存":"保存并启用证书"),1)]}),_:1},8,["onClick"]),null!==(o=Fe(a))&&void 0!==o&&o.isSupportRenewal||1===(null===(p=Fe(a))||void 0===p?void 0:p.type)?(Ve(),Re(y,{key:0,type:"primary",class:"mr-[4px]",onClick:t[9]||(t[9]=function(e){return Fe(Ti)()})},{default:Be(function(){return n(t[23]||(t[23]=[Ne(" 续签证书 ",-1)]))}),_:1})):ut("",!0),Fe(a).csr?(Ve(),Re(y,{key:1,type:"default",class:"mr-[4px]",onClick:t[10]||(t[10]=function(e){return Fe(Na)()})},{default:Be(function(){return n(t[24]||(t[24]=[Ne(" 下载证书 ",-1)]))}),_:1})):ut("",!0),null!==(f=Fe(a))&&void 0!==f&&f.isStart?(Ve(),Re(y,{key:2,type:"default",onClick:Fe(ji)},{default:Be(function(){return n(t[25]||(t[25]=[Ne(" 关闭SSL ",-1)]))}),_:1},8,["onClick"])):ut("",!0)]),Le(g,{options:Fe(ya),"list-style":"disc",class:"ml-[20px]"},null,8,["options"]),Le(_,{title:"关闭证书到期提醒",showFooter:"",modelValue:Fe(ba),"onUpdate:modelValue":t[12]||(t[12]=function(e){return $e(ba)?ba.value=e:null}),onConfirm:Fe(Sa),onCancel:Fe(xa),area:["auto"]},{default:Be(function(){return[Me("div",eu,[Me("div",tu,[t[28]||(t[28]=Me("i",{class:"svgtofont-el-warning-filled !text-[4rem] text-warning"},null,-1)),Me("div",nu,[t[27]||(t[27]=Me("div",{class:"py-[.3rem] leading-[2.4rem] text-base"},"关闭证书到期提醒后将不在提醒和证书到期，是否继续操作？",-1)),Me("div",ru,[t[26]||(t[26]=Me("div",null,"应用配置",-1)),Le(k,{modelValue:Fe(wa),"onUpdate:modelValue":t[11]||(t[11]=function(e){return $e(wa)?wa.value=e:null}),class:"!w-[20rem] ml-2rem"},{default:Be(function(){return[Le(b,{label:"应用到当前站点",value:!1}),Le(b,{label:"应用到所有未设置过的站点",value:!0})]}),_:1},8,["modelValue"])])])]),Le(g,{options:[{content:"任务优先级：单个站点的任务优先于所有站点的任务。"}],"list-style":"disc",class:"ml-4rem mt-2rem"})])]}),_:1},8,["modelValue","onConfirm","onCancel"])])}}}),uu=_(au,[["__scopeId","data-v-9a7cd20a"]]),su=gt(),iu=su.siteInfo,lu=su.siteType,cu=ht(),ou=cu.isRefreshLetSSL,pu=cu.sslDnsApiInfo,fu=cu.otherPopup,vu=yt().jumpSslTabEvent,du=Te(!1),mu=je({}),hu=Te([]),yu=Te([]),gu=Te(!1),bu=Te(""),wu=r("aB",Te(!1)),ku=function(e){var t,n,r=(null===(t=e.domains)||void 0===t?void 0:t.length)>0,a=r?(n=e.endDay)<=0||n<=7?"text-danger":n<=15?"text-orange":"text-primary":"text-default",u=r?e.endDay>0?"剩余".concat(e.endDay,"天"):"已过期":"--";return Le("span",{class:a},[u])},_u=function(e){var t="";if("pending"===e.status){if(e.expires<(new Date).getTime()/1e3)return t=Le("span",null,[Ne("--")]);t=Le("span",{class:"text-[#e6a23c]"},[Ne("待验证")])}else t=Le("span",{class:"text-primary"},[Ne("订单完成")]);return t},xu=[{content:function(){return Le("span",{class:"text-danger"},[Ne("注意：请勿将SSL证书用于非法网站")])}},{content:function(){return Le("span",null,[Ne("Let's Encrypt 证书申请和续签限制"),Le("a",{class:"bt-link",href:"https://letsencrypt.org/zh-cn/docs/rate-limits/",target:"_blank"},[Ne("点击查看")])])}},{content:function(){return Le(Ge,null,[Ne("Let's Encrypt因更换根证书，部分老旧设备访问时可能提示不可信，考虑购买")," ",Le("span",{class:"bt-link",onClick:function(){return vu("busSslList")}},[Ne("[商业证书]")])])}},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败"},{content:"Let's Encrypt免费证书，有效期3个月，支持多域名。默认会自动续签"},{content:"若您的站点使用了CDN或301重定向会导致续签失败"},{content:"在未指定SSL默认站点时未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"},{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"}],Su=Te([{label:"解析域名",prop:"domain"},{label:"记录值",showOverflowTooltip:!0,prop:"auth_value",render:function(e,t){var n="dns"===mu.auth_type?e.auth_value:e.file_path;return Le("div",{class:"flex items-center"},[Le("div",{class:"truncate w-[15rem]"},[n]),Le("span",{class:"svgtofont-icon-copy ml-[4px] text-secondary text-medium w-[1.6rem] cursor-pointer",onClick:function(){return u({value:n})}},null)])}},{label:"类型",prop:"type",render:function(e,t){return"dns"===mu.auth_type?Le("span",null,[e.type]):Le("div",{class:"flex items-center"},[Le("div",{class:"truncate w-[15rem]"},[e.content]),Le("span",{class:"svgtofont-icon-copy ml-[4px] text-secondary text-medium w-[1.6rem] cursor-pointer",onClick:function(){return u({value:e.content})}},null)])}},{label:"必需",prop:"must",width:100}]),Cu=Te(!1),Au=function(){var e=p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c({loading:Cu,request:se({siteName:iu.value.name}),data:Array});case 1:return t=e.v,e.a(2,{data:t,total:t.length,other:{}});case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Tu=function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.index,e.p=1,e.n=2,c({loading:"正在获取证书信息，请稍后...",request:ie({index:n}),message:!1,data:{status:Boolean,msg:String}});case 2:return(r=e.v).status?window.open(r.msg):h.request(r),e.a(2,{status:r.status,msg:r.msg});case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"下载失败"})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),Lu=function(){var e=p(l().m(function e(t){var n,r,a,u,s,i=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.index,r=i.length>1&&void 0!==i[1]&&i[1],a=i.length>2&&void 0!==i[2]?i[2]:iu.value.name,e.p=1,u={index:n,siteName:a},e.n=2,c({loading:"正在部署证书，请稍候...",request:"docker"===lu.value?le(u):ce(u),message:!1,data:{status:Boolean,msg:String}});case 2:return s=e.v,di(s,r),s.status&&vu("currentCertInfo"),e.a(2,{status:s.status,msg:s.msg});case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"部署失败"})}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),Nu=function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.index,e.p=1,e.n=2,g({title:"删除证书订单",content:"确定删除证书订单吗？"});case 2:return e.n=3,c({loading:"正在删除证书，请稍候...",request:oe({index:n}),message:!0});case 3:return r=e.v,ou.value=!0,e.a(2,{status:r.status,msg:r.msg});case 4:return e.p=4,e.v,e.a(2,{status:!1,msg:"删除失败"})}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),Eu=function(){var e=p(l().m(function e(t){var n,r,a,u,s;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,c({loading:"正在验证证书申请状态，请稍后...",request:pe({index:t.index}),message:!1});case 1:n=e.v,(r=n.data).hasOwnProperty("status")&&r.hasOwnProperty("msg")?h.request(r):(yu.value=r.auths,r.hasOwnProperty("error")?(gu.value=r.error,bu.value=r.error_msg):(gu.value=!1,bu.value=""),Object.assign(mu,t),hu.value=[],null===(a=r.auths)||void 0===a||a.forEach(function(e){hu.value.push(e.data)}),s="dns"===t.auth_type,Su.value[1].label=s?"记录值":"文件路径",Su.value[1].prop=s?"auth_value":"file_path",Su.value[2].label=s?"类型":"文件内容",Su.value[2].prop=s?"type":"content",Ou.value[1].content="可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(null===(u=hu.value[0])||void 0===u||null===(u=u.domain)||void 0===u?void 0:u.replace("*.","")),d({title:"手动".concat("dns"===mu.auth_type?"解析TXT记录":"创建验证文件"),area:70,component:function(){return Le("div",{class:"p-[1.5rem]"},[Ne("请按以下列表做TXT解析:"),Le("span",{class:"ml-[.4rem] text-danger"},{errorMsg:bu}),Le(Ae,null,i({content:function(){return Le("div",{class:"max-h-[38rem] overflow-auto"},[yu.value.map(function(e,t){return e.data.length>0&&Le("div",{key:t},[Le("span",null,[Ne("验证域名："),e.domain]),Le(P,{class:"my-[1rem]",column:Su.value,data:e.data},null),gu.value&&Le("div",{class:"flex justify-end"},[Le(Pe,{type:"default",onClick:function(){return Du(e)}},{default:function(){return[Ne("验证")]}})])])})])}},"footer-right",function(){return!gu.value&&Le(Pe,{type:"default",onClick:ju},{default:function(){return[Ne("验证")]}})})),Le(A,{options:Ou.value,listStyle:"disc",class:"ml-[20px]"},null)])}}),ou.value=!0);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Du=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,bi();case 1:return n=e.v,e.n=2,fe({index:mu.index,domain:t.domain});case 2:r=e.v,a=r.data,n._props.onCancel(),"valid"===a.status?h.success("验证成功"):!0===a.status?(du.value=!1,Lu(a,!0)):gi(a,t.data,mu);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Iu=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return n=t.index,e.n=1,bi();case 1:return r=e.v,e.n=2,c({request:ve({index:n}),message:!1,data:{status:Boolean,msg:String}});case 2:a=e.v,r._props.onCancel(),h.msg({dangerouslyUseHTMLString:!0,message:a.msg,type:a.status?"success":"error",duration:a.status?2e3:0,showClose:!a.status}),a.status&&Au();case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ju=function(){var e=p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,bi();case 1:return t=e.v,e.n=2,c({request:de({index:mu.index}),message:!1});case 2:n=e.v,t._props.onCancel(),!0===n.status?(du.value=!1,Lu(n,!0)):gi({msg:n.data},hu.value,mu);case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Pu=function(){wu.value=!1,Pi({})},Ou=Te([{content:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{content:""},{content:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}]),Hu=r("aH",Te([])),Vu=r("at",Te("dns")),Ru=r("aE",Te(!1)),Bu=r("aC",p(l().m(function e(){var t,n,r=arguments;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{id:iu.value.id},e.p=1,e.n=2,c({request:"docker"==lu.value?ne(t):re(t),data:{domains:Array}});case 2:return n=e.v,Mu.domain=n.domains.map(function(e){return e.name}),Hu.value=n.domains,wu.value&&(Mu.checkAll=!0,qu(!0)),e.a(2,{data:n.domains,status:!0,msg:"获取站点数据成功"});case 3:return e.p=3,e.v,e.a(2,{status:!1,msg:"获取站点数据失败"})}},e,null,[[1,3]])}))),qu=(r("aA",function(){var e=p(l().m(function e(t){var n,r,a,u,i,c,o,p;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t=pt(t.value),n=lu.value,r=iu.value.name,0!==t.checkList.length){e.n=1;break}return h.error("请选择一个域名"),e.a(2,!1);case 1:if(a=Hu.value.filter(function(e){return t.checkList.includes(e.name)}),"1"!==t.resource||!Ju(a)||Mu.auth_to){e.n=2;break}return h.error("选中的域名存在未设置DNS接口配置"),e.a(2,!1);case 2:if("1"!==t.resource||!t.autoWildcard||!t.checkList.some(function(e){return-1!==e.indexOf("*")})){e.n=3;break}return h.error("开启自动组合泛域名时不能选择泛域名"),e.a(2,!1);case 3:return u={domains:JSON.stringify(t.checkList),auth_type:"1"==t.resource?"dns":"http",auth_to:"1"===t.resource&&t.auth_to?"dns":JSON.stringify(t.checkList),auto_wildcard:t.autoWildcard?"1":"0",id:iu.value.id},e.n=4,bi();case 4:return i=e.v,c={proxy:s(s({},u),{},{site_name:r}),docker:s(s({},u),{},{site_name:r}),default:u},e.n=5,ae(c[n]||c.default,n);case 5:return o=e.v,i._props.onCancel(),e.n=6,fu.value;case 6:return p=e.v,o.status&&(null==p||p.unmount()),_i(o.data,t),ou.value=!0,e.a(2,o.status);case 7:return e.p=7,e.v,h.error("程序发生错误！"),e.a(2,!1)}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),r("aJ",function(e){d({isAsync:!0,title:"配置DNS接口",area:50,component:function(){return m(function(){return a.import("./set-domain-dns-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:{row:e,refresh:Bu},showFooter:!0})}),r("au",function(e){var t=Vu.value;if("dns"!==t&&"http"!==t){var n,r=null===(n=pu.value)||void 0===n?void 0:n.find(function(e){return e.value===t});if(r){var a=!r.data;(!e||e&&a)&&mi({title:"设置".concat(r.info.title,"接口"),row:r.info})}}}),r("aF",function(e){var t=Hu.value.filter(function(e){return 1===e.apply_ssl});Mu.checkList=e?t.map(function(e){return e.name}):[],Ru.value=!1})),Mu=(r("aG",function(e){var t=e.length;Mu.checkAll=t===Mu.domain.length,Ru.value=t>0&&t<Mu.domain.length}),r("ay",je({resource:"0",auth_to:!1,autoWildcard:!1,checkAll:!1,domain:[],checkList:[]}))),Uu=Te([{content:"如开启后无法使用HTTPS访问，请检查安全组是否正确放行443端口"},{content:function(){return Le("span",null,[Ne("在DNS验证中，我们提供了多种自动化DNS-API，并提供了手动模式-"),Le("span",{class:"bt-link",onClick:function(){I(),j.push({name:"domain"})}},[Ne("点击添加DNS接口")])])}},{content:"使用DNS接口申请证书可自动续期，手动模式下证书到期后需重新申请"}]),Fu=[{content:function(){return Le("span",{class:"text-danger"},[Ne("注意：请勿将SSL证书用于非法网站")])}},{content:"使用【DnsPod/阿里云DNS】等接口前您需要先在弹出的窗口中设置对应接口的API"}],zu=Te([{content:function(){return Le("span",null,[" ",Ne("Let's Encrypt 证书申请和续签限制")," ",Le("a",{class:"bt-link",target:"_blank",href:"https://letsencrypt.org/zh-cn/docs/rate-limits/"},[Ne("点击查看")])])}},{content:"申请之前，请确保域名已解析，如未解析会导致审核失败"},{content:"Let's Encrypt免费证书，有效期3个月，支持多域名。默认会自动续签"},{content:"若您的站点使用了CDN或301重定向会导致续签失败"},{content:"在未指定SSL默认站点时,未开启SSL的站点使用HTTPS会直接访问到已开启SSL的站点"}]),Ju=(r("az",Ie(function(){var e="0"===Mu.resource?zu.value:Uu.value,t=Fu.concat([]);return t.splice.apply(t,[1,0].concat(n(e))),t})),r("aI",function(e){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(e)}),r("aD",function(){Object.assign(Mu,{resource:"0",auth_to:!1,autoWildcard:!1,checkAll:!1,domain:[],checkList:[]})}),function(e){return e.some(function(e){return 0===e.dns_status})}),Gu=r("ap",Te("正在申请证书...")),Ku=r("ao",Te()),Xu=(r("an",p(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:Ku.value=setInterval(p(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c({request:me({filename:"/www/server/panel/logs/letsencrypt.log",num:10}),data:{msg:[String,Gu]}});case 1:e.n=3;break;case 2:e.p=2,e.v,clearInterval(Ku.value);case 3:return e.a(2)}},e,null,[[0,2]])})),2e3);case 1:return e.a(2)}},e)}))),r("ax",Te())),Zu=r("av",Te([{title:"文件验证 - HTTP",name:"http",data:!1,config:!1}])),Yu=(r("aw",function(){var e=p(l().m(function e(t){var n,r,a,u,i,c,o,p,f,v;return l().w(function(e){for(;;)switch(e.n){case 0:if(n=t.dns,r=t.id,a={domains:JSON.stringify(n),auth_type:"http",auth_to:r||"dns",auto_wildcard:"0"},"http"!==Vu.value){e.n=2;break}if(-1===(null==(u=JSON.stringify(n))?void 0:u.indexOf("*."))){e.n=1;break}return e.a(2,h.error("包含通配符的域名不能使用文件验证(HTTP)!"));case 1:e.n=5;break;case 2:if("dns"===Vu.value){e.n=4;break}if(i=pu.value.find(function(e){return e.value===Vu.value}),c=i.data,o=i.info.data,!c){e.n=3;break}a.auth_to="".concat(Vu.value,"|").concat(o[0].value,"|").concat(o[1].value),e.n=4;break;case 3:return h.error("指定dns接口没有设置密钥信息"),e.a(2);case 4:a.auth_type="dns";case 5:return a.id=iu.value.id,a.siteName=iu.value.name,e.n=6,fu.value;case 6:return e.v.unmount(),e.n=7,bi();case 7:if(p=e.v,"proxy"!=iu.value.project_type&&"nginx"!=iu.value.project_type&&"docker"!=iu.value.project_type){e.n=9;break}return e.n=8,ue(s(s({},a),{},{site_name:iu.value.name}),"docker"==iu.value.project_type?"docker":"proxy");case 8:v=e.v,e.n=11;break;case 9:return e.n=10,ae(a,lu.value);case 10:v=e.v;case 11:f=v.data,null==p||p.unmount(),_i(f,a);case 12:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),r("as",p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.n){case 0:return Vu.value="http",e.n=1,hi();case 1:t=e.v,n=t.data,Zu.value=[{title:"文件验证 - HTTP",name:"http",data:!1,config:!1}],n&&Array.isArray(n)&&(Zu.value=Zu.value.concat(n));case 2:return e.a(2)}},e)}))),r("aM",Te([]))),Qu=(r("aL",p(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c({request:he(),data:{data:[Array,Yu]}});case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2,{data:[],total:0,other:{}});case 3:return e.a(2)}},e,null,[[0,2]])}))),r("aK",function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,t.dns_id){e.n=1;break}return h.error("请选择验证类型"),e.a(2);case 1:return n={dns_id:t.dns_id,ids:JSON.stringify(t.ids)},e.n=2,c({loading:"正在配置DNS接口，请稍候...",request:ye(n),message:!0});case 2:return(r=e.v).status&&(t.dns_id="",t.ids=[],Bu()),e.a(2,r.status);case 3:return e.p=3,e.v,e.a(2,!1)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}()),He({__name:"index",setup:function(e,t){var r=t.expose,a=ht(),u=a.isRefreshLetSSL,s=a.sslAlertState,i=x({request:Au,columns:[{label:"域名",prop:"domains",render:function(e,t){return Le("span",{class:"w-full whitespace-pre-line"},[e.domains?e.domains.join("\n"):"--"])}},{label:"到期时间",prop:"expires",width:110,render:ku},{label:"订单状态",prop:"status",width:80,render:_u},{label:"验证方式",prop:"auth_type",width:80,render:function(e,t){return Le("span",null,["dns"===e.auth_type?"DNS验证":"文件验证"])}},{label:"操作",prop:"ps",width:190,showOverflowTooltip:!1,align:"right",render:function(e,t){var n=[];return"invalid"!==e.status&&("pending"!==e.status?n=[Le("span",{class:"cursor-pointer bt-link",onClick:function(){return Lu(e,!1)}},[Ne("部署")]),Le(vt,null,null),Le("span",{class:"cursor-pointer bt-link",onClick:function(){return Tu(e)}},[Ne("下载")]),Le(vt,null,null),Le("span",{class:"cursor-pointer bt-link",onClick:function(){return Iu(e)}},[Ne("续签")]),Le(vt,null,null)]:e.expires>=(new Date).getTime()/1e3&&(n=[Le("span",{class:"cursor-pointer bt-link",onClick:function(){return Eu(e)}},[Ne("验证")]),Le(vt,null,null)])),n.push(Le("span",{class:"cursor-pointer bt-link",onClick:function(){return Nu(e)}},[Ne("删除")])),n}}],extension:[S(),C(u)]}),l=i.BtTable,c=i.BtRefresh;return r({init:i.refresh}),function(e,t){var r=Pe,a=Ae,u=A;return Ve(),Je("div",null,[Le(a,null,{"header-left":Be(function(){return[Le(r,{type:"primary",onClick:Fe(Pu)},{default:Be(function(){return n(t[0]||(t[0]=[Ne("申请证书",-1)]))}),_:1},8,["onClick"])]}),"header-right":Be(function(){return[Le(Fe(c))]}),content:Be(function(){return[Le(Fe(l),{"default-sort":{prop:"date",order:"descending"},maxHeight:Fe(s)?280:320},null,8,["maxHeight"])]}),_:1}),Le(u,{options:Fe(xu),"list-style":"disc",class:"pl-1rem"},null,8,["options"])])}}})),Wu=gt(),$u=Wu.siteInfo,es=Wu.siteType,ts=Wu.isRefreshList,ns=De(kt()).isRefreshLocalList,rs=O().payment,as=ft(rs.value).bindUser,us=ht(),ss=us.isRefreshSSL,is=us.sslTabActive,ls=us.otherPopup,cs=us.isRefreshBtSSL,os=yt().jumpSslTabEvent,ps=H(),fs=["企业级证书","极速申请","防劫持/防篡改","提高SEO权重","赔付保证","不成功可退款","官方推荐"],vs=[{content:function(){return Le("span",{class:"text-danger"},[Ne("如果您的站点有使用CDN、高防IP、反向代理、301重定向等功能，可能导致验证失败")])}},{content:function(){return Le("span",{class:"text-danger"},[Ne("原测试证书已经停止服务，如需查看证书列表请前往官网后台。点击"),Le("a",{class:"bt-link",href:"https://www.bt.cn/admin/safe"},[" ",Ne("官网后台")," "]),Ne("跳转")])}},{content:"申请www.bt.cn这种以www为二级域名的证书，需绑定并解析顶级域名(bt.cn)，否则将验证失败。"},{content:"商用证书相对于普通证书，具有更高的安全性、赔付保障和支持通配符和多域名等方式。"}],ds=function(){var e=p(l().m(function e(t){var n,r,a,u,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.p,r=t.limit,e.p=1,e.n=2,At({url:"/api/v1/ssl/get_order_list",p:n,limit:r});case 2:if(a=e.v,u=a.data,s=u.data){e.n=3;break}return e.a(2,{data:[],total:0,other:{}});case 3:return e.a(2,{data:s.data,total:s.count});case 4:return e.p=4,e.v,e.a(2,{data:[],total:0,other:{}})}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),ms=r("r",function(e){var t,n=null==e||null===(t=e.cert_info)||void 0===t?void 0:t.not_after;if(!n)return Le("span",null,[Ne("--")]);var r=0;if("string"==typeof n){var a=new Date(n).getTime();r=Number.isNaN(a)?0:a}if(!r)return Le("span",null,[Ne("--")]);var u=Math.ceil((r-Date.now())/864e5);if(u>30)return Le("span",null,[new Date(r).toLocaleDateString()]);var s=u<=7?"text-danger":"text-warning",i=u>0?"剩余".concat(u," 天"):"已过期";return Le("span",{class:s},[i])}),hs=function(){if(!as.value)return Lt(),!1;is.value="btSslList",d({isAsync:!0,title:"购买宝塔证书",area:[79],component:function(){return m(function(){return a.import("./index-legacy408.js?v=1763689792")},void 0,a.meta.url)}})},ys=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,a=Le("div","string"==typeof e?{class:"flex items-center p-[2px] whitespace-pre-line"}:{class:"flex items-center p-[2px] whitespace-nowrap"},[e]);return Le(Oe,{trigger:"hover",placement:"left","popper-class":"popover-default",width:r,enterable:!1,"open-delay":100,"close-delay":0},{default:function(){return a},reference:function(){return Le("span",{class:n},[t])}})},gs=r("g",function(e){var t,n=[];if(0===e.status)return[Le("span",{class:"text-warning"},[Ne("待完善资料")])];var r=null===(t=e.cert_info)||void 0===t?void 0:t.status;switch(Number(r)){case 0:n.push(ys("如填写错误，联系人工可重置订单","验证中","text-orange",240));break;case 1:n.push(Le("span",{class:"text-primary"},[Ne("已签发")]));break;case-1:n.push(ys("该订单存在异常，请联系人工重置订单","异常","text-danger",240));break;default:n.push(Le("span",null,[Ne("--")]))}return n}),bs=r("b",function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,d({title:"完善宝塔证书资料",area:68,component:function(){return m(function(){return a.import("./index-legacy417.js?v=1763689792")},void 0,a.meta.url)},compData:t});case 1:ls.value=e.v,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}()),ws=r("a",function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({title:"验证域名-"+(3===t.product_id?"文件验证":"DNS验证"),area:64,compData:t,component:function(){return m(function(){return a.import("./index-legacy418.js?v=1763689792")},void 0,a.meta.url)}});case 1:ls.value=e.v;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),ks=function(){var e=p(l().m(function e(t){var n,r,a,u,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=t.cert_info.certificate+"\n"+t.cert_info.ca_certificate,r=t.cert_info.private_key,e.p=1,a=$u.value.name,u=es.value,s={default:{type:u,siteName:a,key:r,csr:n}},e.n=2,g({title:"部署证书",isHtml:!0,content:"是否部署该证书,是否继续？<br>\n              证书类型：".concat(t.product_name,"<br>\n              证书支持域名：").concat(t.cert_info.domain,"<br>\n              部署站点名:").concat(a)});case 2:return e.n=3,c({loading:"正在部署证书，请稍后...",request:Z(s[es.value]||s.default,es.value),message:!0,success:function(e){ci(),ts.value=!0,ss.value=!0,cs.value=!0,ns.value=!0,os("currentCertInfo")}});case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t){return e.apply(this,arguments)}}(),_s=r("o",function(e){d({title:"证书详情",area:64,component:function(){return m(function(){return a.import("./index-legacy419.js?v=1763689792")},void 0,a.meta.url)},compData:e})}),xs=r("d",function(){var e=p(l().m(function e(t){var n,r,a,u,s,i,c;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=ps.load("正在下载证书，请稍后..."),e.p=1,e.n=2,At({url:"/api/v1/ssl/cert/download_cert",order_id:t.id});case 2:if(a=e.v,u=a.data,null!==(r=u.data)&&void 0!==r&&r.base64){e.n=3;break}return ps.error("获取证书文件失败"),e.a(2);case 3:s=Ss(u.data.base64,"application/zip"),i=URL.createObjectURL(s),(c=document.createElement("a")).href=i,c.download=u.data.file_name,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(i),ps.success("证书下载成功"),e.n=5;break;case 4:e.p=4,e.v,ps.error("下载证书失败，请稍后重试");case 5:return e.p=5,n&&n.close(),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(t){return e.apply(this,arguments)}}()),Ss=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/octet-stream",n=e.replace(/^data:[^;]*;base64,/,""),r=atob(n),a=new Array(r.length),u=0;u<r.length;u++)a[u]=r.charCodeAt(u);var s=new Uint8Array(a);return new Blob([s],{type:t})},Cs={class:"h-full"},As={class:"flex flex-col w-full"},Ts={class:"recommendList"},Ls={class:"text-small ml-[8px] text-stroke-primary"},Ns={class:"flex flex-col w-full pt-[16px]"},Es={class:"flex items-center"},Ds={class:"flex items-center"},Is=He({__name:"index",setup:function(e,t){var r=t.expose,a=ht(),u=(a.sslAlertState,a.isRefreshBtSSL),s=V({request:ds,columns:[{label:"域名",prop:"domain",width:120,render:function(e){return Le("span",{class:"w-full whitespace-pre-line"},[e.cert_info?e.cert_info.domain:"--"])}},{label:"证书类型",prop:"product_name",showOverflowTooltip:!0},{label:"到期时间",width:100,render:ms,showOverflowTooltip:!0},{label:"状态",prop:"expire",width:160,showOverflowTooltip:!1,render:function(e){return gs(e)}},{label:"操作",prop:"ps",width:170,align:"right",render:function(e){return function(e){var t=function(e,t){return Le("span",{class:"bt-link",onClick:t},[e])},n=[];if(0===e.status){var r=t("完善资料",function(){return bs(e)});n.push(r)}else{var a,u=null===(a=e.cert_info)||void 0===a?void 0:a.status;if(0===u){var s=t("验证",function(){return ws(e)});n.push(s)}else if(1===u){var i=t("部署",function(){return ks(e)}),l=t("下载",function(){return xs(e)}),c=t("查看",function(){return _s(e)});n.push(i),n.push(l),n.push(c)}}var o=[];return n.map(function(e,t){o.push(e),t<n.length-1&&o.push(Le(vt,null,null))}),o}(e)}}],extension:[S(),C(u)]}),i=s.BtTable,l=s.BtRefresh,c=s.refresh,o=s.BtPage,p=ze(function(){var e=document.querySelector("#pane-busSslList");e&&e.click()},1e3);return r({init:c}),function(e,t){var r=Pe,a=k,u=Ae,s=A;return Ve(),Je("div",Cs,[Me("div",As,[Me("div",Ts,[(Ve(!0),Je(Ge,null,Ke(Fe(fs),function(e,n){return Ve(),Je("div",{key:n,class:Xe("".concat(6===n?"w-[22rem]":"w-[14rem]"," recomItem"))},[t[0]||(t[0]=Me("i",{class:"svgtofont-el-check font-bold text-[#ff8d00] text-medium"},null,-1)),Me("span",Ls,Ze(e),1)],2)}),128))]),Me("div",Ns,[Le(u,null,{"header-left":Be(function(){return[Me("div",Es,[Le(r,{type:"primary",onClick:Fe(hs),class:"mr-4"},{default:Be(function(){return n(t[1]||(t[1]=[Ne(" 申请证书 ",-1)]))}),_:1},8,["onClick"]),Le(Cr,{placement:"right"},{default:Be(function(){return[Me("div",Ds,[Le(a,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-2rem h-2rem",all:!0}),t[2]||(t[2]=Me("span",{class:"bt-link"},"售前客服",-1))])]}),_:1})])]}),"header-right":Be(function(){return[Le(Fe(l))]}),content:Be(function(){return[Le(Fe(i),{"max-height":300,onWheel:Fe(p)},null,8,["onWheel"])]}),"footer-right":Be(function(){return[Le(Fe(o),{size:"small"})]}),_:1})])]),Le(s,{class:"mt-2",options:Fe(vs),listStyle:"disc"},null,8,["options"])])}}}),js=_(Is,[["__scopeId","data-v-9438a8f6"]]),Ps=O().payment,Os=ft(Ps.value).bindUser,Hs=ht(),Vs=Hs.sslInfo,Rs=Hs.certVerifyInfo,Bs=Hs.sslTabActive,qs=Hs.letApplyInfo,Ms=Hs.isRefreshSSL,Us=Hs.pollingPopup,Fs=Hs.sslDnsApiInfo,zs=Hs.productInfo,Js=Hs.orderInfo,Gs=Hs.otherPopup,Ks=gt(),Xs=Ks.siteInfo,Zs=Ks.siteType,Ys=Ks.isBindExtranet,Qs=Ks.isRefreshList,Ws=Ks.batchConfig,$s=Ks.activeType,ei=Ks.isSiteMult,ti=De(kt()).isRefreshLocalList,ni=yt(),ri=ni.getSSLInfoEvent,ai=ni.jumpSslTabEvent,ui=Ie(function(){var e,t;return'当前证书 -<span class="'.concat(null!==(e=Vs.value)&&void 0!==e&&e.isStart?"text-primary":"text-danger",'">[').concat(null!==(t=Vs.value)&&void 0!==t&&t.isStart?"已部署SSL":"未部署SSL","]</span>")}),si=(r("t",[{label:function(){return Le("span",{innerHTML:ui.value},null)},name:"currentCertInfo",lazy:!0,render:function(){return Le(uu,null,null)}},{label:"商用SSL证书",name:"busSslList",lazy:!0,render:function(){return Le(jr,null,null)}},{label:"宝塔证书",name:"btSslList",lazy:!0,render:function(){return Le(js,null,null)}},{label:"Let's Encrypt",name:"letsEncryptList",lazy:!0,render:function(){return Le(Qu,null,null)}},{label:"证书夹",name:"certFolderList",lazy:!0,render:function(){return Le(ia,null,null)}}]),r("h",function(){if(!Os.value)return Lt(),!1;Bs.value="busSslList",d({isAsync:!0,title:"购买商业证书",area:[82],component:function(){return m(function(){return a.import("./apply-bus-ssl-legacy.js?v=1763689792")},void 0,a.meta.url)}})})),ii=r("m",function(){var e,t,n=null===(e=Xs.value.project_type)||void 0===e?void 0:e.toLowerCase();Zs.value=n,Ys.value=!(null===(t=Xs.value.project_config)||void 0===t||!t.bind_extranet);["php","html","phpasync","proxy","docker"].includes(n)&&(Ys.value=!0),Ys.value&&li()}),li=function(){var e=p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t=h.load("正在获取站点证书部署信息，请稍候..."),e.n=1,ci();case 1:t.close();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ci=r("aO",p(l().m(function e(){var t,n;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ri({siteName:Xs.value.name});case 1:return t=e.v,n=t.data,oi(n),e.a(2,{data:n,status:!0,msg:"获取证书信息成功"});case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}))),oi=function(e){var n=e.type,r=e.httpTohttps,a=e.https_mode,u=e.index,i=e.auth_type,l=e.key,c=e.csr,o=e.cert_data,p=void 0===o?{}:o,f=p.dns,v=void 0===f?[]:f,d=p.subject,m=void 0===d?"":d,h=p.issuer,y=void 0===h?"":h,g=p.endtime,b=void 0===g?"":g,w=p.notAfter,k=void 0===w?"":w,_=e.push,x=e.status,S=e.oid;Vs.value=s(s({},Vs.value),{},{isCertInfo:!!m,https:r,httpsMode:a,type:n,key:l||"",csr:c||"",index:u||"",authType:i||"",oid:S,dns:v||[],subject:m,issuer:y,endtime:b,notAfter:k,push:_,pushAlarm:!!("object"===t(_)?_.status:_),isSupportRenewal:function(){var e=!1;return b<=30&&(e=!0),2===n&&b<0&&(e=!0),0!==n&&-1!==n||(e=!1),e}(),isStart:x})},pi=r("ar",function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return Js.value=t.orderInfo,e.n=1,d({title:"完善商业证书资料",area:64,component:function(){return m(function(){return a.import("./bus-cert-verify-info-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:t});case 1:Gs.value=e.v;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),fi=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return Rs.value=t,e.n=1,d({title:"验证域名-"+(t.isCNAME?"DNS验证":"文件验证"),area:64,component:function(){return m(function(){return a.import("./bus-cert-verify-way-legacy.js?v=1763689792")},void 0,a.meta.url)}});case 1:Gs.value=e.v;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),vi=r("s",function(){var e=p(l().m(function e(t){var r,a,u,i,o,f,v,d,m,h,y,b,w;return l().w(function(e){for(;;)switch(e.n){case 0:return r=t.hash,a=t.subject,u=t.list,i=t.type,e.n=1,g({title:"部署证书",content:"批量部署证书后，原有证书将被覆盖，是否继续？",icon:"warning-filled"});case 1:if(!ei.value){e.n=3;break}return o=Ws.value,f=o.enable,v=o.exclude,d=Nt(u,v,f,{params:{certName:a,project_type:$s.value.toUpperCase(),ssl_hash:r}}),e.n=2,c({loading:"正在部署证书，请稍候...",request:_e(d),success:function(){var e=p(l().m(function e(t){var n,r;return l().w(function(e){for(;;)switch(e.n){case 0:n=Et(t.data),r=(r=n.data).map(function(e){return s(s({},e),{},{name:e.siteName})}),Dt(r,{title:"部署证书"});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()});case 2:ei.value=!1,Qs.value=!0,ti.value=!0,e.n=5;break;case 3:return h=u.map(function(e){return{ssl_hash:r,siteName:e.name,certName:a}}),y={proxy:{BatchInfo:JSON.stringify(h),site_name:Xs.value.name},docker:{BatchInfo:JSON.stringify(h),site_name:Xs.value.name},default:{BatchInfo:JSON.stringify(h)}},b=y[i]||y.default,e.n=4,c({loading:"正在部署证书，请稍候...",request:xe(b,i),data:{faildList:Array,successList:Array}});case 4:return w=e.v,null!==(m=Xs.value)&&void 0!==m&&m.name&&ci(),Qs.value=!0,ti.value=!0,e.n=5,wt({title:"批量部署结果",resultTitle:"部署证书操作",resultData:[].concat(n(w.faildList.map(function(e){return{name:e.siteName,status:!1,msg:e.msg||e.error_msg}})),n(w.successList.map(function(e){return{name:e.siteName,status:!0}})))});case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),di=r("u",function(e,t){if(e.status)h.request(e),ci(),Qs.value=!0,Ms.value=!0,ti.value=!0;else{var n=t?"当前证书已成功申请！自动部署失败，请尝试手动部署证书！\n":"";h.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:n+e.msg,type:e.status?"success":"error",showClose:!e.status})}}),mi=r("a6",function(e){return d({isAsync:!0,title:e.title,area:50,component:function(){return m(function(){return a.import("./dns-verify-info-legacy.js?v=1763689792")},void 0,a.meta.url)},showFooter:!0,compData:e.row})}),hi=r("E",p(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c({request:Se(),data:Array});case 1:return t=e.v,T(t)&&yi(t),e.a(2,{data:t,status:!0});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"获取DNS接口信息失败"})}},e,null,[[0,2]])}))),yi=function(e){Fs.value=e.filter(function(e){return"CloudxnsDns"!==e.name}).map(function(e){return{label:e.title,value:e.name,config:!!e.data,data:!!e.data&&""!=e.data[0].value,info:e}})},gi=(r("am",function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n={},t.forEach(function(e){n[e.key]=e.value}),r={pdata:JSON.stringify(n)},e.n=1,c({loading:"正在配置DNS接口，请稍候...",request:Ce(r),message:!0});case 1:return a=e.v,e.n=2,hi();case 2:if(!a.status){e.n=3;break}return e.a(2,a.status);case 3:e.n=5;break;case 4:return e.p=4,e.v,e.a(2,{status:!1,msg:"验证失败"});case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}()),r("f",function(t,n,r){var a;if(t.msg&&R(t.msg))h.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:t.msg,type:"error",showClose:!0,duration:0});else{var u,s,i="",l=t.msg[0];if(void 0===(null===(a=t.msg[1])||void 0===a?void 0:a.challenges))i+="\n\t\t\t<p><span>响应状态：</span>".concat(t.msg[1].status,"</p>\n\t\t\t<p><span>错误类型：</span>").concat(t.msg[1].type,"</p>\n\t\t\t<p><span>错误来源：</span><a href='https://letsencrypt.org/' style='color:#20a53a'>Let's Encrypt官网</a></p>\n\t\t\t<div class=\"flex flex-col\">\n\t\t\t\t错误代码：\n\t\t\t\t<pre class=\"!text-white !bg-[#333] !inline-block !ml-[4px]\">\n\t\t\t\t\t").concat(t.msg[1].detail,"\n\t\t\t\t</pre>\n\t\t\t</div>");else if(null!==(u=t.msg[1])&&void 0!==u&&u.challenges[1]||null===(s=t.msg[1])||void 0===s||!s.challenges[0]||(t.msg[1].challenges[1]=t.msg[1].challenges[0]),"invalid"===t.msg[1].status){var c,o,p,f="",v=e(n);try{for(v.s();!(p=v.n()).done;){var d=p.value,m=d.outerText||d.auth_value;if(null!=m&&m.includes(t.msg[1].identifier.value)){var y=m.split("\t");if((null==y?void 0:y.length)>1){f=y[1];break}}}}catch(A){v.e(A)}finally{v.f()}var g=null===(c=t.msg[1])||void 0===c?void 0:c.identifier.value,b=null===(o=t.msg[1])||void 0===o?void 0:o.challenges[1],w=null==b?void 0:b.error.detail;if(i+="\n\t\t\t\t<p><span>验证域名：</span>".concat(g,"</p>\n\t\t\t"),"dns"===(null==r?void 0:r.type)||"dns"===(null==r?void 0:r.auth_type)){var k="_acme-challenge.".concat(g);i+="\n\t\t\t\t\t<p><span>验证解析：</span>".concat(k,"</p>\n\t\t\t\t\t<p><span>验证内容：</span>").concat(f||b.token,'</p>\n\t\t\t\t\t<div class="flex flex-col">\n\t\t\t\t\t\t错误代码：\n\t\t\t\t\t\t<pre class="!text-white !bg-[#222] !inline-block !ml-[4px]">\n\t\t\t\t\t\t\t').concat(w,"\n\t\t\t\t\t\t</pre>\n\t\t\t\t\t</div>\n\t\t\t\t")}else{var _,x,S,C="http://".concat(g,"/.well-known/acme-challenge/").concat(null===(_=t.msg[1])||void 0===_?void 0:_.challenges[0].token);i+='\n\t\t\t\t\t<p><span>验证URL：</span><a class="text-primary" href=\''.concat(C,"' target='_blank'>点击查看</a></p>\n\t\t\t\t\t<p><span>验证内容：</span>").concat(null===(x=t.msg[1])||void 0===x?void 0:x.challenges[0].token,'</p>\n\t\t\t\t\t<div class="flex flex-col">\n\t\t\t\t\t\t错误代码：\n\t\t\t\t\t\t<pre class="!text-white !bg-[#222] !inline-block !ml-[4px]">\n\t\t\t\t\t\t\t').concat(null===(S=t.msg[1])||void 0===S?void 0:S.challenges[0].error.detail,"\n\t\t\t\t\t\t</pre>\n\t\t\t\t\t</div>\n\t\t\t\t")}i+="<p><span>验证结果：</span> <a class='text-danger'>验证失败</a></p>"}h.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,icon:"x",message:'\n\t\t\t<div class="flex items-center justify-center mt-[.8rem] mb-2rem">\n\t\t\t\t<i class="svgtofont-el-circle-close-filled mr-[.8rem] text-danger !text-[3rem]"></i>\n\t\t\t\t<a style="color: red; font-size:16px">\n\t\t\t\t\t'.concat(l,'\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class="p-[2rem] border border-1 border-color-dark !rounded-base !mb-[12px] !leading-[26px] bg-light">\n\t\t\t\t').concat(i,"\n\t\t\t</div>\n\t\t"),showClose:!0,duration:0})}})),bi=r("l",function(){return d({area:[50,25],showFooter:!1,component:function(){return m(function(){return a.import("./lets-encrypt-progress-legacy.js?v=1763689792")},void 0,a.meta.url)}})}),wi=Te([{label:"解析域名",prop:"name"},{label:"记录值",prop:"txt",render:function(e,t){return Le("div",{class:"flex items-center"},[Le("div",{class:"truncate w-[15rem]"},[e.txt]),Le("span",{class:"svgtofont-icon-copy ml-[4px] text-secondary text-medium w-[1.6rem] cursor-pointer",onClick:function(){return u({value:e.txt})}},null)])}},{label:"类型",prop:"type"},{label:"必需",prop:"force",width:100}]),ki=Te(),_i=function(e,t){if(!1===e.status&&e.hasOwnProperty("msg")&&R(e.msg))h.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:e.msg,type:"error",showClose:!0,duration:0});else if(!0!==e.status&&"pending"!==e.status&&void 0===(null==e?void 0:e.save_path))gi(e,qs.value.dnsTable,qs.value.info);else{if("pending"===e.status&&"dns"===e.auth_type){Ci(e,t);var n=[];e.auths.forEach(function(e){var t=[],r=e.domain.replace("*.","");t.push({name:"_acme-challenge.".concat(r),type:"TXT",txt:e.auth_value,force:"是"}),t.push({name:r,type:"CAA",txt:'0 issue "letsencrypt.org"',force:"否"}),n.push({domain:e.domain,data:t})});var r=[{content:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{content:"可通过CMD命令来手动验证域名解析是否生效: nslookup -q=txt _acme-challenge.".concat(e.auths[0].domain.replace("*.",""))},{content:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}],a=!!e.hasOwnProperty("error")&&e.error;return Object.assign(mu,e),void(ki.value=d({title:"手动解析TXT记录",area:70,component:function(){return Le("div",{class:"p-[1.5rem]"},[Ne("请按以下列表做TXT解析:"),Le(Ae,null,i({content:function(){return Le("div",{class:"max-h-[38rem] overflow-auto"},[n.map(function(t,n){return Le("div",{key:n},[t.data.length>0&&Le(Ge,null,[Le("span",null,[Ne("验证域名："),t.domain]),Le(P,{class:"my-[1rem]",column:wi.value,data:t.data},null),a.value&&Le("div",{class:"flex justify-end"},[Le(Pe,{type:"default",onClick:function(){return xi({index:e.index,domain:t.domain})}},{default:function(){return[Ne("验证")]}})])])])})])}},"footer-right",function(){return!a.value&&Le(Pe,{type:"default",onClick:ju},{default:function(){return[Ne("验证")]}})})),Le(A,{options:r,listStyle:"disc",class:"ml-20x"},null)])}}))}Ai(e)}},xi=function(){var e=p(l().m(function e(t){var n,r,a,u;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,bi();case 1:return n=e.v,e.n=2,fe(t);case 2:if(r=e.v,a=r.data,null==n||n.unmount(),"valid"!==a.status){e.n=3;break}h.success("验证成功"),e.n=6;break;case 3:if(!0!==a.status){e.n=5;break}return e.n=4,ki.value;case 4:(u=e.v)&&u.unmount(),Si(a,!0),e.n=6;break;case 5:gi(a,qs.value.dnsTable,qs.value.info);case 6:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Si=function(){var e=p(l().m(function e(t){var n,r,a,u,s=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:return n=t.index,r=s.length>1&&void 0!==s[1]&&s[1],a=s.length>2&&void 0!==s[2]?s[2]:Xs.value.name,e.n=1,c({loading:"正在部署证书，请稍候...",request:ce({index:n,siteName:a}),message:!1,data:{status:Boolean,msg:String}});case 1:u=e.v,di(u,r);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ci=function(e,t){qs.value.dnsTable=e.auths,qs.value.info.index=e.index,qs.value.info.type=t.auth_type},Ai=function(){var e=p(l().m(function e(t,n){var r,a,u,s,i;return l().w(function(e){for(;;)switch(e.n){case 0:if(t.private_key&&t.cert&&t.root){e.n=1;break}return h.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:"部署失败，请关闭SSL后重新尝试部署！",type:"error",showClose:!0,duration:0}),e.a(2);case 1:return r=t.private_key,a=t.cert,u=t.root,s=Xs.value.project_type,i={proxy:{site_name:Xs.value.name,key:r,csr:a+u},default:{type:1,siteName:Xs.value.name,key:r,csr:a+u}},e.n=2,c({loading:"正在保存证书信息，请稍后...",request:Z(i[s]||i.default,s),message:!0,success:function(e){if(!0===e.status)ci(),ai("currentCertInfo");else{var t=e.msg;t="当前证书申请并验证成功，自动部署失败，请尝试手动部署证书！\n"+t,h.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:t,type:"error",showClose:!0,duration:0})}}});case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Ti=(r("aq",function(e){d({title:"支付成功",area:[60,60],component:function(){return m(function(){return a.import("./pay-bus-success-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:e})}),r("j",p(l().m(function e(){var t,n,r,a,u,s,i,o,p,f=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:Vs.value,n=t.type,r=t.oid,a=t.index,u=t.authType,s=f.length>1&&void 0!==f[1]?f[1]:Xs.value,i=s.name,3!==n){e.n=1;break}Ei(r,n),e.n=4;break;case 1:if(32!==(null==a?void 0:a.length)||-1!==a.indexOf("/")||"dns"===u){e.n=2;break}Ni(a),e.n=4;break;case 2:return e.n=3,c({request:ge({siteName:i,pem_file:a})});case 3:o=e.v,p=o.data,Li(p);case 4:return e.a(2)}},e)}))),function(){var e=p(l().m(function e(){var t,n,r,a,u,s,i=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:t=i.length>0&&void 0!==i[0]?i[0]:Vs.value,n=t.type,r=t.oid,a=t.index,u=t.authType,s=i.length>1&&void 0!==i[1]?i[1]:Xs.value,s.name,3===n?Ei(r,n):32===(null==a?void 0:a.length)&&-1===a.indexOf("/")&&"dns"!==u?Ni(a):Pi(null,!0);case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()),Li=function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:Xu.value=t,Gs.value=d({title:"续签Let's Encrypt证书",area:50,component:function(){return m(function(){return a.import("./lets-encrypt-renew-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:t});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ni=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,bi();case 1:return n=e.v,e.n=2,c({request:be({index:t})});case 2:r=e.v,a=r.data,n._props.onCancel(),_i(a,{auth_type:a.auth_type});case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ei=function(e,t){if(3===t)Di(e)},Di=function(){var e=p(l().m(function e(t){var n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,g({title:"商业证书续签",content:"当前证书订单需要重新生成新订单，需要手动续签，和重新部署证书，是否继续操作？"});case 1:return n={pdata:JSON.stringify({oid:t})},e.n=2,c({loading:"正在续签商业证书，可能等待时间较长，请稍后...",request:we(n),data:Object});case 2:r=e.v,y(r)&&r.hasOwnProperty("order_info")?(a=r.order_info,Ii({oid:r.oid,wxcode:r.wxcode,alicode:r.alicode,orderInfo:a,productInfo:s(s({},a),{},{productName:a.title,totalPrice:r.data.price,isRenew:!0})})):h.request(r),ci();case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ii=r("c",function(){var e=p(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:zs.value=t.productInfo,Js.value=t.orderInfo,Us.value=d({title:"支付商业证书订单",area:[60],component:function(){return m(function(){return a.import("./pay-bus-ssl-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:t});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),ji=function(){var e=p(l().m(function e(){var t,n,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:return t=Zs.value,n=Xs.value.name,a=(r={proxy:{site_name:n},default:{updateOf:1,siteName:n}})[t]||r.default,e.n=1,c({loading:"正在关闭证书，请稍后...",request:ke(a,t),message:!0,success:function(){Qs.value=!0,ti.value=!0}});case 1:ci();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Pi=function(){var e=p(l().m(function e(t,n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d({isAsync:!0,title:n?"续签Let's Encrypt证书":"申请Let's Encrypt证书",area:64,component:function(){return m(function(){return a.import("./applay-lest-ssl-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:s(s({},t),{},{isRenew:n})});case 1:Gs.value=e.v;case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}();r("k",function(){d({component:function(){return m(function(){return a.import("./index-legacy196.js?v=1763689792")},void 0,a.meta.url)},area:52,compData:{title:"SSL证书需求反馈收集",type:28,isNoRate:!0,softName:"1",isCard:!1,id:993}})})}}})}();
