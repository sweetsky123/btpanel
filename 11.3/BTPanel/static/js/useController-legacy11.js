!function(){function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=r(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,i=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return c=t.done,t},e:function(t){i=!0,u=t},f:function(){try{c||null==e.return||e.return()}finally{if(i)throw u}}}}function e(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){if(t){if("string"==typeof t)return a(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,n):void 0}}function a(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function o(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function u(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?o(Object(e),!0).forEach(function(n){c(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):o(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function c(n,e,r){return(e=function(n){var e=function(n,e){if("object"!=t(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var a=r.call(n,e||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==t(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",a=e.toStringTag||"@@toStringTag";function o(e,r,a,o){var i=r&&r.prototype instanceof c?r:c,f=Object.create(i.prototype);return s(f,"_invoke",function(e,r,a){var o,c,i,s=0,f=a||[],l=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(n,e){return o=n,c=0,i=t,p.n=e,u}};function v(e,r){for(c=e,i=r,n=0;!l&&s&&!a&&n<f.length;n++){var a,o=f[n],v=p.p,d=o[2];e>3?(a=d===r)&&(i=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=v&&((a=e<2&&v<o[1])?(c=0,p.v=r,p.n=o[1]):v<d&&(a=e<3||o[0]>r||r>d)&&(o[4]=e,o[5]=r,p.n=d,c=0))}if(a||e>1)return u;throw l=!0,r}return function(a,f,d){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&v(f,d),c=f,i=d;(n=c<2?t:i)||!l;){o||(c?c<3?(c>1&&(p.n=-1),v(c,i)):p.n=i:p.v=i);try{if(s=2,o){if(c||(a="next"),n=o[a]){if(!(n=n.call(o,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,c<2&&(c=0)}else 1===c&&(n=o.return)&&n.call(o),c<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=t}else if((n=(l=p.n<0)?i:e.call(r,p))!==u)break}catch(n){o=t,c=1,i=n}finally{s=1}}return{value:n,done:l}}}(e,a,o),!0),f}var u={};function c(){}function f(){}function l(){}n=Object.getPrototypeOf;var p=[][r]?n(n([][r]())):(s(n={},r,function(){return this}),n),v=l.prototype=c.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t}return f.prototype=l,s(v,"constructor",l),s(l,"constructor",f),f.displayName="GeneratorFunction",s(l,a,"GeneratorFunction"),s(v),s(v,a,"Generator"),s(v,r,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:d}})()}function s(t,n,e,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}s=function(t,n,e,r){function o(n,e){s(t,n,function(t){return this._invoke(n,e,t)})}n?a?a(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(o("next",0),o("throw",1),o("return",2))},s(t,n,e,r)}function f(t,n,e,r,a,o,u){try{var c=t[o](u),i=c.value}catch(t){return void e(t)}c.done?n(i):Promise.resolve(i).then(r,a)}function l(t){return function(){var n=this,e=arguments;return new Promise(function(r,a){var o=t.apply(n,e);function u(t){f(o,r,a,u,c,"next",t)}function c(t){f(o,r,a,u,c,"throw",t)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./useStore-legacy10.js?v=1763689792"],function(t,r){"use strict";var a,o,c,s,f,p,v,d,y,m,b,g,h,w,O,j,S,_,k,P,T,A,q;return{setters:[function(t){a=t.gG,o=t.aA,c=t.O,s=t.Q,f=t.gH,p=t.gI,v=t.gJ,d=t.p,y=t.gK,m=t.gL,b=t.gM,g=t.gN,h=t.b,w=t.gO,O=t.gP,j=t.gQ},function(t){S=t.r,_=t.e},function(t){k=t.c,P=t.h,T=t.i},function(t){A=t.c},function(t){q=t.u}],execute:function(){S(!1);t("i",function(){var t=l(i().m(function t(n,e,r){var a;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,s({loading:"正在".concat(e?"修改":"添加","节点，请稍后..."),request:e?f(n):p(n),data:{status:Boolean},message:!0,success:function(t){x.value=[],N.value=!0,r&&r(t)}});case 1:return a=t.v,t.a(2,a.status);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}));return function(n,e,r){return t.apply(this,arguments)}}());var r=q(),N=r.isRefreshNodeList,E=(r.rowData,r.nodeCategory),x=r.nodeStatus,G=r.forcedFlushes,C=(t("a",function(t){return{label:"状态",isCustom:!0,render:function(t){return _("span",{class:"node_state state_"+t.data.status},[["在线","","离线","异常","重启中..."][t.data.status]])}}}),{}),D=(t("g",function(){var t=l(i().m(function t(n){var e,r,c,s,f,l,p,v;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return n.category_id||0===n.category_id||delete n.category_id,e=JSON.stringify(n),r=Date.now(),t.p=1,t.n=2,a(u({},n));case 2:return c=t.v,s=c.data,f=s.data,l=s.page,p=s.error,v=s.show_mode,C[e]={data:{data:f,total:o(l),other:{error:p},show_mode:v},timestamp:r},t.a(2,C[e].data);case 3:if(t.p=3,!("canceled"===t.v.message&&C[e]&&r-C[e].timestamp<100)){t.n=4;break}return t.a(2,C[e].data);case 4:return t.a(2,{data:[],total:0,show_mode:""});case 5:return t.p=5,delete n.refresh,G.value=0,t.f(5);case 6:return t.a(2)}},t,null,[[1,3,5,6]])}));return function(n){return t.apply(this,arguments)}}()),t("c",function(){var t=l(i().m(function t(n){return i().w(function(t){for(;;)switch(t.n){case 0:s({request:v({node_id:n.id}),loading:"正在前往访问节点，请稍后...",success:function(t){t.data.status&&window.open("".concat(t.data.data.target_panel_url),"_blank")}});case 1:return t.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}()),t("d",function(){var t=l(i().m(function t(n){return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,d({icon:"warning-filled",title:"删除节点【".concat(n.address,"】"),content:"删除节点后，将失去该节点的访问权限，是否继续操作？"});case 1:return t.n=2,s({loading:"正在删除节点，请稍后...",request:y({ids:n.id}),message:!0,success:function(t){x.value=[],N.value=!0}});case 2:t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[0,3]])}));return function(n){return t.apply(this,arguments)}}()),t("e",l(i().m(function t(){var n;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n=[],t.n=1,s({request:m(),data:{msg:Array},success:function(t){var r=t.msg;n=[{label:"全部分类",value:"all"},{label:"默认分类",value:"0"}].concat(e(r.map(function(t){return{label:t.name,value:String(t.id)}}))),E.value=n}});case 1:return t.a(2,n||[]);case 2:return t.p=2,t.v,t.a(2,[])}},t,null,[[0,2]])}))),t("s",function(){var t=l(i().m(function t(n,e,r,a){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,k({name:"节点分类",options:r.value.filter(function(t){return"all"!==t.value}),selectList:n.value,request:function(){var t=l(i().m(function t(r,o){var u,c,f,l;return i().w(function(t){for(;;)switch(t.n){case 0:return u=n.value.map(function(t){return t.id}),c=a.enable,f=a.exclude,l=P(n.value,f,c,{params:{category_id:Number(r.id),ids:JSON.stringify(u)}}),t.n=1,s({loading:"正在批量设置节点分类，请稍后...",request:w(l),message:!0});case 1:e(),x.value=[],N.value=!0,o();case 2:return t.a(2)}},t)}));return function(n,e){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)}));return function(n,e,r,a){return t.apply(this,arguments)}}()),t("f",function(){var t=l(i().m(function t(e,r,a,o,u,c){var s,f,p,v,d,y,m,g,w,O,S;return i().w(function(t){for(;;)switch(t.p=t.n){case 0:if(s=o.label,f=o.value,p=c.enable,v=c.exclude,d=new Map([["delete","批量删除已选的节点，删除后将失去该节点的访问和操作权限"],["panel","批量重启已选的节点面板"],["server","批量重启已选的节点服务器"]]),y=function(){var t=l(i().m(function t(){var n,e,r,o,u,c;return i().w(function(t){for(;;)switch(t.n){case 0:n=new Map([["delete",j]]),e=n.get(f),c=f,t.n="start"===c||"stop"===c?1:"delete"===c?4:7;break;case 1:if(r="start"===f?1:0,o=P(a.value,v,p,{params:{status:r}}),!e){t.n=3;break}return t.n=2,e(o);case 2:case 5:return t.a(2,t.v);case 3:case 6:return t.a(3,7);case 4:if(u=P(a.value,v,p,{params:{ids:JSON.stringify(a.value.map(function(t){return t.id}))}}),!e){t.n=6;break}return t.n=5,e(u);case 7:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),m=function(){var t=l(i().m(function t(n,e){var r;return i().w(function(t){for(;;)switch(t.n){case 0:return r=n.id,t.n=1,b(r,e);case 1:return t.a(2,t.v)}},t)}));return function(n,e){return t.apply(this,arguments)}}(),"panel"!==f&&"server"!==f){t.n=7;break}g=n(a.value),t.p=1,g.s();case 2:if((w=g.n()).done){t.n=4;break}if("local"!==(O=w.value).api_key||"local"!==O.app_key){t.n=3;break}return h().error("本机节点无法操作"),t.a(2);case 3:t.n=2;break;case 4:t.n=6;break;case 5:t.p=5,S=t.v,g.e(S);case 6:return t.p=6,g.f(),t.f(6);case 7:return t.n=8,e({title:"批量".concat(s),content:"".concat(d.get(f),"，是否继续操作！"),column:[{label:"地址",prop:"address"},A()],onConfirm:function(){var t=l(i().m(function t(){var n,e,a,o;return i().w(function(t){for(;;)switch(t.n){case 0:if("panel"!==f&&"server"!==f){t.n=2;break}return t.n=1,r(function(t){return m(t,f)});case 1:return N.value=!0,t.a(2);case 2:return t.n=3,y();case 3:e=t.v,x.value=[],N.value=!0,a=T(e.data),a.data,o=a.msg,u&&u(),null!=e&&e.status||null!=e&&null!==(n=e.data)&&void 0!==n&&n.status?h().success(o||"操作成功！"):h().error(o||"操作失败，请重试");case 4:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 8:return t.a(2)}},t,null,[[1,5,6,7]])}));return function(n,e,r,a,o,u){return t.apply(this,arguments)}}()),t("b",function(){return{isCustom:!0,label:"CPU/内存",render:function(t){var n,e;return 4==(null==t||null===(n=t.data)||void 0===n?void 0:n.status)?"--":2==(null==t||null===(e=t.data)||void 0===e?void 0:e.status)?"-- / --":"".concat(t.data.cpu_usage,"核 (").concat(t.data.cpu,"%) / ").concat(t.data.memNewTotal," (").concat(t.data.memory,"%)")}}}),t("u",function(){C={},c(["/mod/node/node/get_category_list","/panel/public/get_soft_status","/mod/node/node/get_node_list"])}),t("r",function(){var t=l(i().m(function t(n,e){return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,d({icon:"warning-filled",title:"重启".concat("panel"===e?"面板":"服务器"),content:"即将重启节点【".concat(n.remarks,"】").concat("panel"===e?"面板":"服务器","，是否继续操作？")});case 1:return t.n=2,s({request:b(n.id,e),loading:"正在重启".concat("panel"===e?"面板":"服务器","，请稍后..."),message:!0,success:function(){N.value=!0}});case 2:return t.a(2)}},t)}));return function(n,e){return t.apply(this,arguments)}}()),null),I=(t("h",function(){var t=l(i().m(function t(n,e){var r,a,o,u;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,s({request:g(n)});case 1:if(!(r=t.v).data.status){t.n=2;break}return a=!1,o=function(){a=!0,D&&(clearTimeout(D),D=null)},u=function(){var t=l(i().m(function t(){return i().w(function(t){for(;;)switch(t.n){case 0:if(!a){t.n=1;break}return t.a(2);case 1:return t.n=2,I(n,function(t){t&&t.status?(o(),e&&e(t)):a||(D=setTimeout(u,2e3))});case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),a=!1,u(),t.a(2,o);case 2:return h().error(r.data.msg),t.a(2,!1);case 3:return t.a(2)}},t)}));return function(n,e){return t.apply(this,arguments)}}()),function(){var t=l(i().m(function t(n,e){var r;return i().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,s({request:O(n)});case 1:r=t.v,e&&e(r.data);case 2:return t.a(2)}},t)}));return function(n,e){return t.apply(this,arguments)}}())}}})}();
