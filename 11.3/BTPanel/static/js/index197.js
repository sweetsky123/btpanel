import{c as a,o as e,r as t,v as s,x as l,y as o,A as r,D as n,B as i,z as d,e as m,C as u,F as p,b1 as c,O as v,U as _,ad as f,ab as b,H as x}from"./base-lib.js?v=1763689792";import{aD as y,bz as g,b as h,_ as w}from"./utils-lib.js?v=1763689792";import{aw as j}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";const D={class:"nps_survey_box"},V={"data-v-30672cd2":"",class:"text-extraLarge font-bold text-center text-black mt-[2rem]"},z={class:"p-[2rem] flex flex-col items-center"},k={class:"w-[100%]"},q=w(a({__name:"index",emits:["close"],setup(a,{emit:w}){const q=e({mustData:"",data:[]}),U=t(),S=t([]),A=t([]),C={mustData:[{required:!0,message:"请输入内容",trigger:"blur"}]},{load:E}=h(),F=w,H=async()=>{if(await U.value.validate()){const e=E("正在提交问卷，请稍后..."),t={};for(let a=0;a<S.value.length;a++)t[S.value[a].id]=0===a?q.mustData:q.data[a];try{await g({questions:JSON.stringify(t),product_type:19,software_name:"Enterprise-Edition-Survey",rate:0}),e.close(),localStorage.setItem("ltd_nps","1"),j(),F("close")}catch(a){}finally{e.close()}}};return s(async()=>{const{data:a}=await y({product_type:19,version:-1});S.value=a.msg;for(let e=0;e<a.msg.length;e++)q.data.push("");A.value=a.msg.slice(1)}),(a,e)=>{var t;const s=_,y=f,g=b,h=x;return l(),o("div",D,[e[2]||(e[2]=r("div",{class:"nps_survey_banner"},[r("span",null,[r("i"),n(),r("span",{style:{"vertical-align":"4px"}},"企业版用户专属调研")])],-1)),r("div",V,i(null==(t=d(S)[0])?void 0:t.hint),1),r("div",z,[r("div",k,[m(g,{ref_key:"formLabelAlignFrom",ref:U,"label-position":"top","label-width":"80px",model:d(q),rules:C},{default:u(()=>{var a;return[m(y,{label:null==(a=d(S)[0])?void 0:a.question,prop:"mustData"},{default:u(()=>[m(s,{modelValue:d(q).mustData,"onUpdate:modelValue":e[0]||(e[0]=a=>d(q).mustData=a),type:"textarea",rows:3,maxlength:500,resize:"none",placeholder:"请留下您的建议"},null,8,["modelValue"])]),_:1},8,["label"]),(l(!0),o(p,null,c(d(A),(a,e)=>(l(),v(y,{key:e,label:a.question},{default:u(()=>[m(s,{modelValue:d(q).data[e+1],"onUpdate:modelValue":a=>d(q).data[e+1]=a,type:"textarea",rows:3,maxlength:500,resize:"none",placeholder:"请留下您的建议"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128))]}),_:1},8,["model"])]),m(h,{class:"w-[12.5rem] !mt-[2rem]",type:"primary",size:"large",onClick:H},{default:u(()=>[...e[1]||(e[1]=[n("提交",-1)])]),_:1})])])}}}),[["__scopeId","data-v-235d5ee3"]]);export{q as default};
