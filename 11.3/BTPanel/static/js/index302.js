import{g as s}from"./useStore6.js?v=1763689792";import{c as e,aH as r,s as a,r as t,W as l,w as c,v as o,x as d,y as i,z as n,e as u,bw as y,A as m,B as v,M as p,n as x}from"./base-lib.js?v=1763689792";import{a as _,h as f}from"./useController8.js?v=1763689792";import{f as g}from"./firewall.js?v=1763689792";import{Q as b,_ as w}from"./utils-lib.js?v=1763689792";import{L as h}from"./useStore8.js?v=1763689792";const N={class:"ssh-login-stats"},j={key:0,class:"skeleton-container"},S={key:1,class:"stats-content"},k={class:"stats-panels flex gap-12px"},A={class:"font-600 text-large text-primary mb-3"},C={class:"font-600 text-large text-danger mb-3"},H={class:"flex flex-1 flex-col justify-around"},L={class:"progress-item flex items-center"},T={class:"flex-1 flex items-center ml-4"},B={class:"progress-bar !h-[8px]"},M={class:"progress-numbers !text-base w-[6rem] flex ml-12px"},R={class:"success mr-4"},q={class:"error"},z={class:"progress-item flex items-center"},F={class:"flex-1 flex items-center ml-4"},I={class:"progress-bar"},Q={class:"progress-numbers w-[6rem] flex ml-12px"},W={class:"success mr-4"},D={class:"error"},E={class:"progress-item flex items-center"},G={class:"flex-1 flex items-center ml-4"},J={class:"progress-bar"},K={class:"progress-numbers w-[6rem] flex ml-12px"},O={class:"success mr-4"},P={class:"error"},U=w(e({__name:"index",props:{hideTitle:{type:Boolean}},emits:["loaded"],setup(e,{emit:w}){const{refs:{sshTabActive:U,sshLoginType:V}}=s(),X=r(),Y=h(),{isRefreshList:Z}=a(Y),$=w,ss=t(!1),es=t(!1),rs=l({success:0,today_success:0,error:0,today_error:0,yesterday_success:0,yesterday_error:0,sevenday_success:0,sevenday_error:0}),as=(s,e)=>{if(0===e)return 0;const r=Math.round(s/e*100);return s>0&&0===r?1:r},ts=s=>{_.value=s,f.value="7",U.value="login","/firewall/ssh-manger"!==X.currentRoute.value.path?X.push("/firewall/ssh-manger"):(Z.value=!1,x(()=>{Z.value=!0}))};return c(()=>ss.value,s=>{s||es.value||(es.value=!0,$("loaded"))}),o(async()=>{const s=await b({loading:ss,request:g(),data:{success:Number,today_success:Number,error:Number,today_error:Number,yesterday_success:Number,yesterday_error:Number,sevenday_success:Number,sevenday_error:Number}});s&&(rs.value=s)}),(s,e)=>(d(),i("div",N,[n(ss)?(d(),i("div",j,[u(n(y),{rows:1,animated:""})])):(d(),i("div",S,[m("div",k,[m("div",{class:"panels success flex flex-col items-center cursor-pointer",onClick:e[0]||(e[0]=s=>ts("Accepted"))},[m("div",A,v(n(rs).success),1),e[2]||(e[2]=m("span",{class:"text-secondary text-small"},"SSH成功登录",-1))]),m("div",{class:"panels error flex flex-col items-center cursor-pointer",onClick:e[1]||(e[1]=s=>ts("Failed"))},[m("div",C,v(n(rs).error),1),e[3]||(e[3]=m("span",{class:"text-secondary text-small"},"SSH失败尝试",-1))])]),m("div",H,[m("div",L,[e[4]||(e[4]=m("div",{class:"text-secondary text-base font-600 w-[3rem]"},"今日",-1)),m("div",T,[m("div",B,[m("div",{class:"progress-success",style:p({width:as(n(rs).today_success,n(rs).today_success+n(rs).today_error)+"%"})},null,4),m("div",{class:"progress-error",style:p({width:as(n(rs).today_error,n(rs).today_success+n(rs).today_error)+"%"})},null,4)]),m("div",M,[m("span",R,v(n(rs).today_success),1),m("span",q,v(n(rs).today_error),1)])])]),m("div",z,[e[5]||(e[5]=m("div",{class:"text-secondary text-small w-[3rem]"},"昨日",-1)),m("div",F,[m("div",I,[m("div",{class:"progress-success",style:p({width:as(n(rs).yesterday_success||0,(n(rs).yesterday_success||0)+(n(rs).yesterday_error||0))+"%"})},null,4),m("div",{class:"progress-error",style:p({width:as(n(rs).yesterday_error||0,(n(rs).yesterday_success||0)+(n(rs).yesterday_error||0))+"%"})},null,4)]),m("div",Q,[m("span",W,v(n(rs).yesterday_success||0),1),m("span",D,v(n(rs).yesterday_error||0),1)])])]),m("div",E,[e[6]||(e[6]=m("div",{class:"text-secondary text-small w-[3rem]"},"7天",-1)),m("div",G,[m("div",J,[m("div",{class:"progress-success",style:p({width:as(n(rs).sevenday_success||0,(n(rs).sevenday_success||0)+(n(rs).sevenday_error||0))+"%"})},null,4),m("div",{class:"progress-error",style:p({width:as(n(rs).sevenday_error||0,(n(rs).sevenday_success||0)+(n(rs).sevenday_error||0))+"%"})},null,4)]),m("div",K,[m("span",O,v(n(rs).sevenday_success||0),1),m("span",P,v(n(rs).sevenday_error||0),1)])])])])]))]))}}),[["__scopeId","data-v-7edfe3d1"]]);export{U as S};
