!function(){function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function e(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach(function(n){r(t,n,o[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(o,n))})}return t}function r(n,e,r){return(e=function(n){var e=function(n,e){if("object"!=t(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,e||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==t(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",a=e.toStringTag||"@@toStringTag";function i(e,r,o,a){var i=r&&r.prototype instanceof s?r:s,l=Object.create(i.prototype);return u(l,"_invoke",function(e,r,o){var u,a,i,s=0,l=o||[],f=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(n,e){return u=n,a=0,i=t,v.n=e,c}};function p(e,r){for(a=e,i=r,n=0;!f&&s&&!o&&n<l.length;n++){var o,u=l[n],p=v.p,d=u[2];e>3?(o=d===r)&&(i=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=p&&((o=e<2&&p<u[1])?(a=0,v.v=r,v.n=u[1]):p<d&&(o=e<3||u[0]>r||r>d)&&(u[4]=e,u[5]=r,v.n=d,a=0))}if(o||e>1)return c;throw f=!0,r}return function(o,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),a=l,i=d;(n=a<2?t:i)||!f;){u||(a?a<3?(a>1&&(v.n=-1),p(a,i)):v.n=i:v.v=i);try{if(s=2,u){if(a||(o="next"),n=u[o]){if(!(n=n.call(u,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,a<2&&(a=0)}else 1===a&&(n=u.return)&&n.call(u),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((n=(f=v.n<0)?i:e.call(r,v))!==c)break}catch(n){u=t,a=1,i=n}finally{s=1}}return{value:n,done:f}}}(e,o,a),!0),l}var c={};function s(){}function l(){}function f(){}n=Object.getPrototypeOf;var v=[][r]?n(n([][r]())):(u(n={},r,function(){return this}),n),p=f.prototype=s.prototype=Object.create(v);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,u(t,a,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,u(p,"constructor",f),u(f,"constructor",l),l.displayName="GeneratorFunction",u(f,a,"GeneratorFunction"),u(p),u(p,a,"Generator"),u(p,r,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(o=function(){return{w:i,m:d}})()}function u(t,n,e,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}u=function(t,n,e,r){function a(n,e){u(t,n,function(t){return this._invoke(n,e,t)})}n?o?o(t,n,{value:e,enumerable:!r,configurable:!r,writable:!r}):t[n]=e:(a("next",0),a("throw",1),a("return",2))},u(t,n,e,r)}function a(t,n,e,r,o,u,a){try{var i=t[u](a),c=i.value}catch(t){return void e(t)}i.done?n(c):Promise.resolve(c).then(r,o)}function i(t){return function(){var n=this,e=arguments;return new Promise(function(r,o){var u=t.apply(n,e);function i(t){a(u,r,o,i,c,"next",t)}function c(t){a(u,r,o,i,c,"throw",t)}i(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./utils-lib-legacy.js?v=1763689792"],function(t,n){"use strict";var r,u,a,c,s,l,f,v,p,d,y,m,b,g,h,O,w,j,_,S,P,E,k,T,x;return{setters:[function(t){r=t.j,u=t.r,a=t.o,c=t.c,s=t.s,l=t.I,f=t.J,v=t.z,p=t.x,d=t.y,y=t.e,m=t.A,b=t.D,g=t.R,h=t.ap},function(t){O=t._},function(t){w=t.cf,j=t.n,_=t.H,S=t.Q,P=t.eD,E=t.T,k=t.iP,T=t.eE,x=t.M}],execute:function(){var C=t("S",r("SOFT-STATUS-STOP-ALERT",function(){var t=u({}),r=u(!1),c=u(!1),s=u(),l=u(""),f=function(t){if(s.value){var e=s.value,r=e.number_rule,o=e.task_data,u=e.sender,a=e.status;Object.assign(m,{count:o.count||1,interval:o.interval||600,day_num:r.day_num,sender:u,status:a})}t.hasOwnProperty("onStatus")&&(m.status=t.onStatus),j({title:"状态停止告警设置",area:50,component:function(){return _(function(){return n.import("./config-legacy4.js?v=1763689792")},void 0,n.meta.url)},btn:!0,onCancel:function(){t.onCancel&&t.onCancel()},onConfirm:h})},v=function(){var t=i(o().m(function t(n){var e;return o().w(function(t){for(;;)switch(t.n){case 0:if(!n){t.n=1;break}f({onCancel:function(){c.value=!n},onStatus:n}),t.n=2;break;case 1:return t.n=2,S({loading:"正在设置状态，请稍后...",request:P({status:0,task_id:null===(e=s.value)||void 0===e?void 0:e.id}),message:!0,success:function(){var t=i(o().m(function t(e){return o().w(function(t){for(;;)switch(t.n){case 0:e.status||(c.value=!n),e.status&&(s.value.status=Boolean(c),m.status=Boolean(c));case 1:return t.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}()});case 2:return t.a(2)}},t)}));return function(n){return t.apply(this,arguments)}}(),p=function(){var t=i(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,S({loading:r,request:E(),data:{data:Array,status:Boolean,msg:String},success:function(t){var n;t.status&&(s.value=t.data.find(function(t){return t.keyword===l.value}),c.value=(null===(n=s.value)||void 0===n?void 0:n.status)||!1)}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),d=u(),y=u(),m=a({status:!0,count:1,interval:100,day_num:3,sender:[]}),b=a({interval:[w({message:"请输入间隔时间"}),{validator:function(t,n,e){n<60&&!Number.isInteger(parseFloat(n))?e(new Error("间隔时间范围应为大于60的正整数")):e()},trigger:["blur","change"]}],day_num:[w({message:"请输入发送次数"}),{validator:function(t,n,e){n<0&&!Number.isInteger(parseFloat(n))?e(new Error("发送次数范围应为大于等于0的正整数")):e()},trigger:["blur","change"]}],sender:[w({message:"请选择告警方式"})]}),g=function(){var t,n,e,r=m.status,o=m.count,u=m.interval,a=m.sender,i=m.day_num,c={task_data:{type:"services",project:l.value,status:r,tid:"5",cycle:0,count:Number(o),interval:Number(u),title:"服务停止告警"},sender:a,number_rule:{day_num:Number(i),total:0},time_rule:{time_range:[0,86399],send_interval:0}};return{template_id:null===(t=s.value)||void 0===t?void 0:t.template_id,status:r?1:0,task_data:JSON.stringify(c),task_id:(null===(n=s.value)||void 0===n?void 0:n.id)||void 0,title:null===(e=s.value)||void 0===e?void 0:e.title}},h=function(){var n=i(o().m(function n(r){var u,a;return o().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,d.value.validate();case 1:return a=g(),n.n=2,S({loading:"正在设置状态，请稍后...",request:null!==(u=s.value)&&void 0!==u&&u.template_id?k(a):T(e(e({},a),{},{template_id:"5"})),message:!0,success:function(n){n.status&&(C(t.value),r.unmount())}});case 2:return n.a(2)}},n)}));return function(t){return n.apply(this,arguments)}}(),O=function(){var t=i(o().m(function t(){var n;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,null===(n=y.value)||void 0===n?void 0:n.refresh();case 1:x.success("刷新成功");case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),C=function(n){n&&(t.value=n),l.value=t.value.name,"mysqld"===t.value.name&&(l.value="mysql"),p()};return{isLoading:r,status:c,currentInfo:s,openPopupEvent:f,changeStatusEvent:v,alertFormRef:d,alarmRef:y,alertForm:m,rules:b,countOptions:[{label:"自动尝试重启项目",value:1},{label:"不做重启尝试",value:2}],alarmRefreshEvent:O,getPushData:p,init:C}})),D={class:"flex items-center"};t("_",c({__name:"index",setup:function(t){var n=C(),e=s(n),r=e.isLoading,o=e.status,u=(e.currentInfo,n.openPopupEvent),a=n.changeStatusEvent;n.getPushData;return function(t,n){var e=O,i=h,c=l("bt-loading");return f((p(),d("div",null,[y(e,{direction:"horizontal"}),m("span",D,[n[2]||(n[2]=b("状态停止时提醒我： ",-1)),y(i,{modelValue:v(o),"onUpdate:modelValue":n[0]||(n[0]=function(t){return g(o)?o.value=t:null}),class:"mx-8px",onChange:v(a)},null,8,["modelValue","onChange"]),m("span",{class:"bt-link",onClick:n[1]||(n[1]=function(){return v(u)&&v(u).apply(void 0,arguments)})},"告警设置")])])),[[c,v(r)]])}}}))}}})}();
