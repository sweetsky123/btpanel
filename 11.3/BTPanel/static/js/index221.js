import{c as e,r as a,o as s,v as r,x as o,O as l,C as t,e as d,z as m,ad as n,ab as p}from"./base-lib.js?v=1763689792";import{_ as i}from"./index107.js?v=1763689792";import{t as u,y as f,Q as w,k as c}from"./utils-lib.js?v=1763689792";import{setPassword as b,setsModulesPassword as _}from"./database.js?v=1763689792";import{g as j}from"./useStore2.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const x=e({__name:"index",props:{compData:{default:()=>({username:"",password:"",id:0,name:""})}},setup(e,{expose:x}){const{refs:{tabActive:g},refreshTableList:v}=j(),y=e,{username:V,password:h,id:D}=y.compData,k=a(),q=s({id:D,password:h,username:V}),C={password:[{trigger:["blur"],required:!0,message:"请输入密码"}]};return r(()=>{u(k.value.$el,"password")}),x({onConfirm:async e=>{await k.value.validate();const{id:a,username:s,password:r}=q,o={id:a,name:s,password:r};await w({loading:"正在提交中，请稍后...",request:"mysql"===g.value?b({...o,data_name:y.compData.name}):_({data:JSON.stringify(o)},g.value),message:!0}),e(),v()}}),(e,a)=>{const s=c,r=n,u=i,w=p;return o(),l(w,{ref_key:"setDatabasePwdRef",ref:k,rules:C,model:m(q),class:"p-[2rem] flex flex-col justify-center","label-width":"auto"},{default:t(()=>[d(r,{label:"用户名",prop:"name"},{default:t(()=>[d(s,{width:"32rem",disabled:"",modelValue:m(q).username,"onUpdate:modelValue":a[0]||(a[0]=e=>m(q).username=e),textType:!1},null,8,["modelValue"])]),_:1}),d(r,{label:"密码",prop:"password"},{default:t(()=>[d(u,{icon:"el-refresh",modelValue:m(q).password,"onUpdate:modelValue":a[1]||(a[1]=e=>m(q).password=e),onIconClick:a[2]||(a[2]=()=>m(q).password=m(f)(16)),width:"32rem",name:"password"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])}}});export{x as default};
