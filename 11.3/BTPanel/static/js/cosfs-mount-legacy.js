!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.toStringTag||"@@toStringTag";function i(n,o,a,u){var i=o&&o.prototype instanceof l?o:l,s=Object.create(i.prototype);return r(s,"_invoke",function(n,r,o){var a,u,i,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return a=t,u=0,i=e,p.n=n,c}};function d(n,r){for(u=n,i=r,t=0;!f&&l&&!o&&t<s.length;t++){var o,a=s[t],d=p.p,m=a[2];n>3?(o=m===r)&&(i=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=d&&((o=n<2&&d<a[1])?(u=0,p.v=r,p.n=a[1]):d<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,u=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),u=s,i=m;(t=u<2?e:i)||!f;){a||(u?u<3?(u>1&&(p.n=-1),d(u,i)):p.n=i:p.v=i);try{if(l=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(f=p.n<0)?i:n.call(r,p))!==c)break}catch(t){a=e,u=1,i=t}finally{l=1}}return{value:t,done:f}}}(n,a,u),!0),s}var c={};function l(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][a]?t(t([][a]())):(r(t={},a,function(){return this}),t),d=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,u,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,r(d,"constructor",f),r(f,"constructor",s),s.displayName="GeneratorFunction",r(f,u,"GeneratorFunction"),r(d),r(d,u,"Generator"),r(d,a,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:m}})()}function r(e,t,n,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}r=function(e,t,n,o){function u(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},r(e,t,n,o)}function o(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function i(e){o(u,r,a,i,c,"next",e)}function c(e){o(u,r,a,i,c,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./api-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792"],function(t,r){"use strict";var o,u,i,c,l,s,f,p,d,m,v,y,h,b,g,w,_,k,j,x,S,O,A,I,E;return{setters:[function(e){o=e.H},function(e){u=e.m,i=e.n,c=e.g,l=e.s,s=e.o},function(e){f=e.c,p=e.z,d=e.r,m=e.o,v=e.v,y=e.I,h=e.x,b=e.y,g=e.e,w=e.C,_=e.J,k=e.O,j=e.F,x=e.b1,S=e.G,O=e.D,A=e.A,I=e.R,E=e.B},null],execute:function(){var D={key:0,class:"mr-1rem"},F={class:"inline-block w-full flex items-center justify-between"},C=["title"],G={class:"truncate max-w-[12rem]"},P={key:0,class:"h-4rem flex items-center justify-center text-tertiaryer"},T={key:1,class:"h-4rem flex items-center justify-center text-tertiaryer text-small"};t("default",f({__name:"cosfs-mount",props:{dependencies:{default:function(){return{}}}},setup:function(t){var f=t,V=p(f.dependencies.components),B=V.BtDialog,N=V.BtInputIcon,M=V.BtSvgIcon,U=V.ElDropdown,q=V.ElDropdownItem,z=V.ElDropdownMenu,H=V.ElForm,L=V.ElButton,R=V.ElFormItem,$=p(f.dependencies.hooks),J=$.useAxios,K=$.useMessage,Q=$.useDialog,W=p(f.dependencies.dialog).fileSelectionDialog,X=p(f.dependencies.custom).getDiskList,Y=K(),Z=d(!1),ee=d(!1),te=d([]),ne=d(!1),re=d(!1),oe=d(),ae=m({region:"",bucket_name:"",path:""}),ue=m({path:[{required:!0,message:"请选择文件目录",trigger:"blur"}]}),ie=function(){W({type:"dir",change:function(e){ae.path=e}})},ce=function(){Q({isAsync:!0,component:function(){return o(function(){return r.import("./config-legacy5.js?v=1763689792")},void 0,r.meta.url)},title:!1,area:[48],compData:{dependencies:f.dependencies}})},le=function(e){var t=te.value[e],n=t.Name,r=t.Location;ae.region=r,ae.bucket_name=n,ae.path="/www/cosfs/".concat(n.replace(/([-][^-]+)$/,"")),re.value=!0},se=function(){var e=a(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,oe.value.validate();case 1:return t=Y.load("正在挂载，请稍后..."),e.n=2,u(ae);case 2:r=e.v,Y.request(r),r.status&&(re.value=!1,fe(),X()),t.close(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=a(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,ee.value=!0,e.n=1,i();case 1:(t=e.v).status&&(te.value=t.data.list),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,ee.value=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=a(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,s({sName:"cosfs"});case 1:(t=e.v).data.setup&&fe(),Z.value=t.data.setup,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),de=function(){var e=a(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,c();case 1:t=e.v,!1===(null==(r=t.data)?void 0:r.status)&&null!=r&&r.msg&&(ne.value=!0),r&&pe(),Z.value=!!r,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return v(function(){l(J),de()}),function(t,n){var r=y("bt-loading"),o=y("trim");return p(Z)?(h(),b("div",D,[g(p(U),{placement:"bottom-start",onCommand:le},{dropdown:w(function(){return[_((h(),k(p(z),{class:"w-20rem"},{default:w(function(){return[p(ne)?(h(),b("div",T,[n[4]||(n[4]=O("未关联腾讯云API密钥",-1)),A("a",{class:"bt-link cursor-pointer ml-4px",onClick:ce},">>关联密钥")])):(h(),b(j,{key:0},[(h(!0),b(j,null,x(p(te),function(e,t){return h(),k(p(q),{key:t,command:t},{default:w(function(){return[A("div",F,[A("div",{class:"flex items-center",title:e.Name.split("-")[0]},[g(p(M),{name:"file-hdd",size:"1.4",class:"mr-4px"}),A("div",G,E(e.Name.split("-")[0]),1)],8,C),n[3]||(n[3]=A("div",{class:"text-primary"},"挂载",-1))])]}),_:2},1032,["command"])}),128)),p(te).length?S("",!0):(h(),b("div",P,"暂无未挂载存储桶"))],64))]}),_:1})),[[r,p(ee)]])]}),default:w(function(){return[g(p(L),null,{default:w(function(){return e(n[2]||(n[2]=[O("腾讯云COSFS挂载工具",-1),A("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)]))}),_:1})]}),_:1}),g(p(B),{title:"【".concat(p(ae).bucket_name,"】本地挂载"),modelValue:p(re),"onUpdate:modelValue":n[1]||(n[1]=function(e){return I(re)?re.value=e:null}),"show-footer":!0,area:[50],"confirm-text":"挂载",onConfirm:se},{default:w(function(){return[g(p(H),{ref_key:"mountFromRef",ref:oe,class:"p-2rem",model:p(ae),rules:p(ue)},{default:w(function(){return[g(p(R),{label:"挂载地址",prop:"path"},{default:w(function(){return[_(g(p(N),{modelValue:p(ae).path,"onUpdate:modelValue":n[0]||(n[0]=function(e){return p(ae).path=e}),name:"path",icon:"el-folder-opened",width:"32rem",placeholder:"请选择文件目录",onIconClick:ie},null,8,["modelValue"]),[[o]])]}),_:1})]}),_:1},8,["model","rules"])]}),_:1},8,["title","modelValue"])])):S("",!0)}}}))}}})}();
