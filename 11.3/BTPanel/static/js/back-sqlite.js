import{_ as a}from"./index109.js?v=1763689792";import{V as t,x as e,Q as s,l as r}from"./utils-lib.js?v=1763689792";import{c as o,r as i,aE as l,v as n,I as p,x as m,y as c,e as d,C as f,D as u,J as h,z as y,H as b}from"./base-lib.js?v=1763689792";import{backupSqlite as g,delSqliteBackup as _,getSqliteBackup as j}from"./database.js?v=1763689792";import{u as w}from"./column.js?v=1763689792";import{g as x}from"./useStore2.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";const k={class:"p-[20px] h-full"},q=o({__name:"back-sqlite",props:{compData:{default:()=>({})}},setup(o){const{refreshTableList:q}=x(),C=o,D=i(!1),J=i([]),O=async()=>{try{await s({loading:"正在备份数据库，请稍后...",message:!0,request:g({data:JSON.stringify({path:C.compData.path})})}),v(),q()}catch(a){}},S=[{label:"名称",prop:"name",showOverflowTooltip:!0},{label:"时间",width:160,render:a=>l("span",t(a.mtime))},{label:"大小",render:a=>e(a.size)},w([{onClick:a=>{window.open("/download?filename="+a.filepath,"_blank","noopener,noreferrer")},title:"下载"},{onClick:async a=>{try{await s({loading:"正在删除数据库备份文件...",message:!0,request:_({data:JSON.stringify({file:a.filepath})})}),v(),q()}catch(t){}},title:"删除"}])],v=async()=>{await s({loading:D,request:j({data:JSON.stringify({path:C.compData.path})}),data:[Array,J]})};return n(()=>{v()}),(t,e)=>{const s=b,o=r,i=a,l=p("bt-loading");return m(),c("div",k,[d(i,null,{"header-left":f(()=>[d(s,{type:"primary",onClick:O},{default:f(()=>[...e[0]||(e[0]=[u("备份",-1)])]),_:1})]),content:f(()=>[h(d(o,{ref:"routeBackup",data:y(J),"max-height":400,column:S},null,8,["data"]),[[l,y(D)],[l,"正在加载中，请稍后...","title"]])]),_:1})])}}});export{q as default};
