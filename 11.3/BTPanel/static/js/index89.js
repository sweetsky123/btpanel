import{_ as e}from"./index109.js?v=1763689792";import{e as s,N as t,_ as a,V as l,n as r,H as n,Q as o,p as i,aA as c,u as p,an as m,f as d,ao as u,cN as _,ap as x}from"./utils-lib.js?v=1763689792";import{_ as f}from"./index260.js?v=1763689792";import{c as h,r as b,v as y,x as w,y as v,A as g,e as k,C,z as j,D as L,F as T,b1 as S,aF as D,O as E,f as R,aD as O,j as P,s as B,b2 as A,aP as F,t as I,aZ as M}from"./base-lib.js?v=1763689792";import{_ as q}from"./we-com.js?v=1763689792";import{e as z,p as N}from"./validator.js?v=1763689792";import{C as V}from"./useController15.js?v=1763689792";import{o as H}from"./useMethod12.js?v=1763689792";import{v as Q,w as Y,x as Z,y as G}from"./ssl.js?v=1763689792";import{a as J,c as K}from"./column.js?v=1763689792";import{r as U}from"./useMethod7.js?v=1763689792";const W={class:"p-16px"},X={class:"py-52px flex justify-center flex-col items-center"},$={class:"flex mb-16px justify-center"},ee={class:"mb-16px"},se={class:"w-76% rounded-base overflow-hidden"},te={class:"rounded-base overflow-hidden text-0"},ae=a(h({__name:"index",setup(e){const a=b([["自动部署概览","deploy-overview.png"]]),l=e=>"https://www.bt.cn/Public/new/plugin/ssl-deploy/".concat(e);return y(async()=>{}),(e,r)=>{const n=s,o=t,i=R,c=O,p=D;return w(),v("div",W,[g("div",X,[r[7]||(r[7]=g("div",{class:"mb-12px text-center text-subtitleLarge font-bold"},"宝塔SSL自动部署",-1)),g("div",$,[r[5]||(r[5]=g("div",{class:"text-center text-base mr-[10px] color-desc text-tertiary"},"自动部署SSL证书到服务器",-1)),k(n,{href:"https://www.bt.cn/new/wechat_customer",class:"!text-base mr-[10px]"},{default:C(()=>[...r[2]||(r[2]=[g("img",{src:q,class:"w-[16px] h-[16px]"},null,-1),g("span",null,"联系客服",-1)])]),_:1}),g("div",{class:"flex items-center mr-[10px]",onClick:r[0]||(r[0]=e=>j(z)({name:"SSL证书需求反馈收集",type:28,id:993,isNoRate:!0,softName:"1",isCard:!1}))},[...r[3]||(r[3]=[g("i",{class:"svgtofont-desired !text-medium mr-[4px]"},null,-1),g("span",{class:"bt-link !text-base"},"需求反馈",-1)])]),k(n,{href:"https://www.bt.cn/bbs/thread-141273-1-1.html",class:"!text-base mr-[4px]"},{default:C(()=>[...r[4]||(r[4]=[L(">> 使用文档",-1)])]),_:1})]),r[8]||(r[8]=g("div",{class:"mb-16px"},[g("ul",{class:"ul-style"},[g("li",null,"自动部署SSL证书到服务器"),g("li",null,"支持宝塔、Let's Encrypt、商用证书"),g("li",null,"支持单域名、多域名、通配符域名")])],-1)),g("div",ee,[k(o,{type:"primary",size:"large",class:"!text-medium w-[140px]",onClick:r[1]||(r[1]=e=>j(N)({sourceId:351,disablePro:!1}))},{default:C(()=>[...r[6]||(r[6]=[L("立即购买",-1)])]),_:1})]),g("div",se,[k(p,{"tab-position":"left",class:"carousel"},{default:C(()=>[(w(!0),v(T,null,S(j(a),(e,s)=>(w(),E(c,{label:e[0],lazy:"",key:s},{default:C(()=>[g("div",te,[k(i,{src:l(e[1]),class:"max-h-[100%] object-scale-down","preview-src-list":[l(e[1])]},null,8,["src","preview-src-list"])])]),_:2},1032,["label"]))),128))]),_:1})])])])}}}),[["__scopeId","data-v-1e2a2b81"]]),le=P("SSL-DEPLOY-STORE",()=>{const e=b(!1);return{deployFormData:b({}),siteList:b([]),certificateDeployTaskList:b([]),isRefreshDeployTaskList:e}}),{isRefreshDeployTaskList:re}=B(le()),ne=(e,s)=>{r({title:"".concat(e?s.task_name+" - 编辑":"创建","部署任务"),area:48,component:()=>n(()=>import("./index420.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),showFooter:!0,confirmText:"".concat(e?"保存":"创建"),compData:{isEdit:e,row:s||{}}})},oe=[{content:"创建",dropdownClass:"bg-white",splitButton:!0,active:!0,event:()=>{ne(!1,{})}}],ie=async e=>{try{const{data:s}=await Z(e);return{data:s.data,total:c(s.page),other:{search_history:[]}}}catch(s){return{data:[],total:0,other:{search_history:[]}}}},ce=[J(),{label:"名称",prop:"task_name"},{label:"云端任务名",isCustom:!1,render:e=>2===e.access_state?e.synchron_info.synchron_name:"--"},{label:"证书域名",isCustom:!0,render:e=>2===e.access_state?e.synchron_info.host:"--"},{label:"证书品牌",isCustom:!1,render:e=>2===e.access_state?e.synchron_info.host_brand:"--"},{label:"到期时间",isCustom:!0,width:180,prop:"cert_expire_time",render:e=>2===e.access_state?l(e.synchron_info.endtime):"--"},{label:"网站",isCustom:!0,prop:"sites",width:280,showOverflowTooltip:!0},{label:"最近部署时间",isCustom:!0,width:180,prop:"deploy_time",render:e=>e.deploy_time?l(e.deploy_time):"--"},{label:"最近部署状态",isCustom:!0,prop:"deploy_status",render:e=>{const s={1:k("span",{class:"text-primary"},[L("成功")]),0:k("span",null,[L("--")]),"-1":k("span",{class:"text-danger cursor-pointer",onClick:()=>(async e=>{o({loading:"正在获取部署任务详情",request:Q({task_id:e.id}),success:({data:s})=>{const{msg:t}=s;r({title:"".concat(e.task_name," 部署状态详情"),area:48,component:()=>n(()=>import("./index421.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{...t}})}})})(e)},[L("失败")])};return s[e.deploy_status]||s[0]}},{label:"接入状态",isCustom:!0,prop:"access_state",render:e=>{const s=new Map([[1,"等待接入"],[2,"成功"],[-1,"失败"]]);return k("span",{class:new Map([[1,"text-warning"],[2,"text-primary"],[-1,"text-danger"]]).get(e.access_state)},[s.get(e.access_state)])}},{label:"操作",fixed:"right",width:120,render:e=>{const s=(e,s)=>k("span",{class:"bt-link",onClick:s},[e]),t=s("编辑",()=>{ne(!0,e)}),a=s("删除",()=>(e=>{i({title:"删除部署任务",content:"确定要删除 ".concat(e.task_name," 部署任务吗？"),confirmText:"删除",cancelText:"取消",onConfirm:()=>{o({loading:"正在删除部署任务",message:!0,request:Y({task_id:e.id}),success:e=>{e.status&&(re.value=!0)}})}})})(e)),l=[];return l.push(t),l.push(k(A,{direction:"vertical"},null)),l.push(a),l}}],pe=[{label:"删除",value:"delete",event:async(e,s,t,a)=>{const{label:l,value:i}=a;let c=t.value.map(e=>e.id).join(",");await r({title:"批量".concat(l,"部署任务"),area:46,component:()=>n(()=>import("./index125.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:{resultTitle:"批量".concat(l,"部署任务"),resultData:t.value,resultColumn:[{label:"名称",prop:"task_name"},K()],autoTitle:"批量".concat(l,"部署任务")},showFooter:!0,onConfirm:async()=>{await(async e=>{if("delete"===e)return o({loading:"正在删除部署任务",request:G({task_ids:c}),success:e=>{const{data:s}=e;let t={resultData:[...s.faildList,...s.successList],resultTitle:"".concat(l,"部署任务"),resultColumn:[{label:"名称",prop:"task_name"},{label:"操作结果",render:e=>k("div",{class:e.status?"text-primary":"text-danger"},[k(F("spam"),null,{default:()=>[e.error_msg]})])}]};U(t)}})})(i),re.value=!0}})}}],me=()=>{window.open("https://www.bt.cn/bbs/thread-141973-1-1.html","_blank","noopener,noreferrer")},de={key:0},ue={class:"flex items-center"},_e={class:"flex ml-[12px] items-center"},xe={class:"flex items-center"},fe={key:1},he=h({__name:"index",setup(t){const{mainHeight:a,payment:l}=p(),{authType:r}=I(l.value),{isRefreshDeployTaskList:n}=B(le()),o=x(pe),{BtTable:i,BtPage:c,BtRecommendSearch:h,BtColumn:b,BtBatch:y,BtSearch:L}=m({request:ie,columns:ce,extension:[u(n),o,_("search",{name:"ssl",key:"get_deploy_list",list:[],showRecommend:!1})]});return(t,l)=>{const n=M,o=f,p=d,m=s,u=e;return"free"!==j(r)?(w(),v("div",de,[k(n,{type:"warning",class:"!mb-[1.2rem] !p-[1.2rem]",closable:!1,"show-icon":""},{title:C(()=>[...l[0]||(l[0]=[g("span",{class:"text-base"},[g("span",null,"提示：请先在宝塔官网->SSL模块->自动同步中创建同步任务，请不要泄露同步任务的密钥")],-1)])]),_:1}),k(u,null,{"header-left":C(()=>[g("div",ue,[k(o,{options:j(oe)},null,8,["options"]),k(V,{placement:"right"},{default:C(()=>[g("div",_e,[k(p,{src:"/static/icons/we-com.svg",class:"mx-[4px] w-[1.5rem] h-[1.5rem]",all:!0}),l[1]||(l[1]=g("span",{class:"bt-link"},"售前客服",-1))])]),_:1}),k(m,{class:"ml-[12px]",onClick:j(H)},{default:C(()=>[...l[2]||(l[2]=[g("div",{class:"flex items-center"},[g("span",{class:"svgtofont-desired text-medium"}),g("span",null,"需求反馈")],-1)])]),_:1},8,["onClick"]),k(m,{class:"ml-[12px]",onClick:j(me)},{default:C(()=>[...l[3]||(l[3]=[g("div",{class:"flex items-center"},[g("span",{class:"text-small"},">>"),g("span",null,"使用说明")],-1)])]),_:1},8,["onClick"])])]),"header-right":C(()=>[g("div",xe,[k(j(L),{type:"ssl-deploy",placeholder:"请输入名称/域名",class:"!w-[270px] mr-[10px]"}),k(j(b))])]),content:C(()=>[k(j(i),{"min-height":j(a)},null,8,["min-height"])]),"footer-left":C(()=>[k(j(y))]),"footer-right":C(()=>[k(j(c))]),_:1})])):(w(),v("div",fe,[k(ae)]))}}}),be=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));export{be as i,me as o,le as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
