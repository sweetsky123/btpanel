import{J as e,K as p}from"./utils-lib.js?v=1763689792";import{c as s,r as a,s as l,i as o,o as t,a1 as r,k as c,l as i,e as u,x as d,I as n,aY as b,p as m,J as _,K as h,m as f,v as x,z as k,P as w,aj as g,d as y,a7 as v,a4 as S}from"./base-lib.js?v=1763689792";import{u as C,c as A,s as K}from"./useMethod9.js?v=1763689792";import{an as j,ao as q,ap as P,aq as V,ar as I,as as B}from"./config.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./validator.js?v=1763689792";import"./index106.js?v=1763689792";import"./column.js?v=1763689792";const D={class:"p-[16px]"},O={key:0,class:"text-[12px] text-gray-500 ml-[1rem]"},E=s({__name:"storage-option",props:{compData:{}},emits:["close"],setup(s,{expose:E,emit:T}){const W=a(),{ftpConfig:F,aliossConfig:H,txcosConfig:J,qiniuConfig:R,txcosStorageType:U,webdavConfig:z}=l(C()),{resetTxcosConfig:L,resetQiniuConfig:M,resetFtpConfig:Q,resetAliossConfig:Y,resetWebdavConfig:G}=C(),N=s,{item:X,isEdit:Z}=N.compData,$=T,ee={ftp:[{label:"使用SFTP",prop:"use_sftp",component:"el-switch",tip:"是否使用SFTP进行数据传输"},{label:"Host",prop:"ftp_host",placeholder:"请输入服务器IP地址",tip:"* 域名或IP地址",props:{class:"!w-[230px]"}},{label:"用户名",prop:"ftp_user",placeholder:"请输入用户名",tip:"* 指定用户名",props:{class:"!w-[230px]"}},{label:"密码",prop:"ftp_pass",placeholder:"请输入密码",tip:"* 登录密码",props:{class:"!w-[230px]"}},{label:"存储位置",prop:"backup_path",placeholder:"请输入存储位置",tip:"* 相对于根目录的路径，默认是/bt_backup",props:{class:"!w-[230px]"}}],alioss:[{label:"AccessKeyId",prop:"access_key",placeholder:"请输入AccessKeyId",tip:"* 阿里云的AccessKeyId ",props:{class:"!w-[230px]"}},{label:"AccessKeySecret",prop:"secret_key",placeholder:"请输入AccessKeySecret",tip:"* 阿里云的AccessKeySecret",props:{class:"!w-[230px]"}},{label:"Bucket",prop:"bucket_name",placeholder:"请输入Bucket名称",tip:"* 阿里云OSS中您创建的Bucket名称",props:{class:"!w-[230px]"}},{label:"EndPoint",prop:"bucket_domain",placeholder:"请输入EndPoint域名",tip:"* 阿里云OSS地域域名，不包括Bucket名",props:{class:"!w-[230px]"}},{label:"保存路径",prop:"backup_path",placeholder:"请输入保存路径",tip:"* 备份文件保存路径, 默认是/bt_backup",props:{class:"!w-[230px]"}}],txcos:[{label:"secret_id",prop:"secret_id",placeholder:"请输入secret_id",tip:"* 腾讯云COS secret_id",props:{class:"!w-[230px]",disabled:Z}},{label:"secret_key",prop:"secret_key",placeholder:"请输入secret_key",tip:"* 腾讯云COS secret_key",props:{class:"!w-[230px]",disabled:Z}},{label:"region",prop:"region",placeholder:"请输入region名称",tip:"* 腾讯云COS region",props:{class:"!w-[230px]",disabled:Z}},{label:"Bucket",prop:"bucket_name",placeholder:"请输入Bucket域名",tip:"* 腾讯云COS Bucket",props:{class:"!w-[230px]",disabled:Z}},{label:"保存路径",prop:"backup_path",placeholder:"请输入保存路径",tip:"* 备份文件保存路径, 默认是/bt_backup",props:{class:"!w-[230px]"}},{label:"存储方式",prop:"pattern",component:"bt-select",placeholder:"请选择存储方式",props:{class:"!w-[230px]",options:U.value}}],qiniu:[{label:"AccessKey",prop:"access_key_id",placeholder:"请输入AccessKey",tip:"* 七牛秘钥中的AK",props:{class:"!w-[230px]"}},{label:"SecretKey",prop:"access_key_secret",placeholder:"请输入SecretKey",tip:"* 七牛秘钥中的SK",props:{class:"!w-[230px]"}},{label:"存储空间",prop:"bucket_name",placeholder:"请输入对象存储空间名称",tip:"* 七牛对象存储空间名称",props:{class:"!w-[230px]"}},{label:"加速域名",prop:"bucket_domain",placeholder:"请输入绑定域名或测试域名",tip:"* 绑定的加速域名或测试域名",props:{class:"!w-[230px]"}},{label:"保存路径",prop:"backup_path",placeholder:"请输入保存路径",tip:"* 备份文件保存路径, 默认是/bt_backup",props:{class:"!w-[230px]"}}],webdav:[{label:"Host",prop:"hostname",placeholder:"请输入WebDAV服务器地址",tip:"* 域名或IP地址",props:{class:"!w-[230px]"}},{label:"用户名",prop:"username",placeholder:"请输入WebDAV用户名",tip:"* 指定用户名",props:{class:"!w-[230px]"}},{label:"密码",prop:"password",placeholder:"请输入WebDAV密码",tip:"* 用户密码",props:{class:"!w-[230px]"}},{label:"保存路径",prop:"backup_path",placeholder:"请输入WebDAV存储位置",tip:"* 相对于根目录的路径，默认是/bt_backup",props:{class:"!w-[230px]"}}]},pe=o((()=>({ftp:F.value,alioss:H.value,txcos:J.value,qiniu:R.value,webdav:z.value}[X.type]))),se=o((()=>ee[X.type])),ae=o((()=>{const e={};return se.value.forEach((p=>{"useSFTP"!==p.prop&&(e[p.prop]=[{required:!0,message:"请输入".concat(p.label),trigger:"blur"}])})),e})),le={"el-input":w,"el-switch":g,"bt-select":y((()=>p((()=>import("./utils-lib.js?v=1763689792").then((e=>e.gC))),__vite__mapDeps([]),import.meta.url)))};return t((()=>{Z&&A(X)})),r((()=>{L(),M(),Q(),Y(),G()})),E({onConfirm:async()=>{if(!W.value)return!1;try{await W.value.validate(),"txcos"===X.type?e({loading:Z?"正在修改...":"正在保存...",request:Z?j({pattern:pe.value.pattern,backup_path:pe.value.backup_path}):q(pe.value),message:!0,success:e=>{if(!e.status)return!1;K(),$("close")}}):"ftp"===X.type?e({loading:Z?"正在修改...":"正在保存...",request:P(pe.value),message:!0,success:e=>{if(!e.status)return!1;K(),$("close")}}):"alioss"===X.type?e({loading:Z?"正在修改...":"正在保存...",request:V(pe.value),message:!0,success:e=>{if(!e.status)return!1;K(),$("close")}}):"qiniu"===X.type?e({loading:Z?"正在修改...":"正在保存...",request:I(pe.value),message:!0,success:e=>{if(!e.status)return!1;K(),$("close")}}):"webdav"===X.type&&e({loading:Z?"正在修改...":"正在保存...",request:B(pe.value),message:!0,success:e=>{if(!e.status)return!1;K(),$("close")}})}catch(p){}}}),(e,p)=>{const s=v,a=S;return c(),i("div",D,[u(a,{ref_key:"formRef",ref:W,model:m(pe),rules:m(ae),"label-width":"110px"},{default:d((()=>[(c(!0),i(n,null,b(m(se),(e=>(c(),_(s,{key:e.prop,label:e.label,prop:e.prop},{default:d((()=>[(c(),_(h(le[e.component||"el-input"]),f({modelValue:m(pe)[e.prop],"onUpdate:modelValue":p=>m(pe)[e.prop]=p,ref_for:!0},e.props||{},{placeholder:e.placeholder}),null,16,["modelValue","onUpdate:modelValue","placeholder"])),e.tip?(c(),i("span",O,x(e.tip),1)):k("",!0)])),_:2},1032,["label","prop"])))),128))])),_:1},8,["model","rules"])])}}});export{E as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
