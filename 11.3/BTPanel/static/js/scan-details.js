import{_ as a}from"./index123.js?v=1763689792";import{bv as s}from"./firewall.js?v=1763689792";import{by as e,M as t,p as l,Q as o}from"./utils-lib.js?v=1763689792";import{c as n,aB as i,r as u,w as r,v as c,aG as m,x as p,y as f,e as v,z as d}from"./base-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const w={class:"flex-wrap h-full"},_=n({__name:"scan-details",props:{compData:{default:()=>({})}},setup(n,{expose:_}){const x=i("popupSetFooter"),g=n,j=u("获取中..."),b=u(!0),h=u(),{path_info:y}=g.compData,D=async()=>{var a,s;try{j.value="获取中...";const l=await e({num:20,filename:y});if(j.value=l.msg||"扫描中...",-1!==(null==(a=l.msg)?void 0:a.indexOf("扫描结束")))return b.value=!1,t.success("扫描已结束"),x(!1),void q();-1===(null==(s=l.msg)?void 0:s.indexOf("扫描结束"))&&b.value&&(h.value=setTimeout(function(){D()},1500)),l.status||(t.request(l),b.value=!1)}catch(l){q()}},q=()=>{h.value&&clearTimeout(h.value)};return r(()=>g.compData,a=>{b.value=!0,D()}),c(()=>D()),m(()=>q()),_({onConfirm:async a=>{await l({icon:"warning-filled",title:"停止检测网站",width:"40rem",content:"当前正在进行检测网站，确定停止检测网站吗？"}),await o({loading:"正在停止检测，请稍后...",request:s({id:g.compData.id}),message:!0}),b.value=!1,q(),a()},onCancel:q}),(s,e)=>{const t=a;return p(),f("div",w,[v(t,{class:"h-full",title:"全屏查看",content:d(j)},null,8,["content"])])}}});export{_ as default};
