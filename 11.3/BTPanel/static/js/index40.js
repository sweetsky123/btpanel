import{_ as e,f as l,af as t,M as a,V as n,p as s,Q as i,b8 as o,cO as c,ay as r,n as u,H as d,aH as m,aK as f,u as p,x as v,q as h,b as k,bf as g,bh as x,e as y,aG as w,P as C}from"./utils-lib.js?v=1763689792";import{c as b,s as _,r as L,v as I,aG as R,x as T,O as S,C as N,z as E,y as z,e as V,D as A,G as F,F as M,n as B,w as D,A as j,b1 as O,J as P,K as U,L as K,aT as H,S as q,B as W,g as $,bb as Y,H as G,at as J,as as X,ar as Q,b9 as Z,j as ee,o as le,W as te,b2 as ae,av as ne,aA as se,aJ as ie,a8 as oe,I as ce,R as re,M as ue,Q as de,br as me,V as fe,U as pe,ay as ve,bs as he,aQ as ke,bt as ge,bu as xe}from"./base-lib.js?v=1763689792";import{F as ye,q as we,r as Ce,t as be,u as _e,v as Le,M as Ie,C as Re,w as Te,S as Se,x as Ne,y as Ee,z as ze,A as Ve,B as Ae,D as Fe,E as Me,G as Be,H as De,I as je,J as Oe,K as Pe,L as Ue,N as Ke,p as He,O as qe,P as We,k as $e,Q as Ye,R as Ge,T as Je,U as Xe,V as Qe,W as Ze,X as el,Y as ll,Z as tl,$ as al,a0 as nl,a1 as sl,a2 as il,a3 as ol,a4 as cl,a5 as rl,a6 as ul,a7 as dl,a8 as ml,a9 as fl,aa as pl,ab as vl,ac as hl,l as kl,ad as gl,ae as xl,e as yl,af as wl,ag as Cl}from"./validator.js?v=1763689792";import{C as bl,a as _l,b as Ll}from"./default.js?v=1763689792";import{_ as Il}from"./index110.js?v=1763689792";import{_ as Rl}from"./index118.js?v=1763689792";import{s as Tl}from"./vue-virtual-scroller.esm.js?v=1763689792";import"./vue-virtual-scroller.js?v=1763689792";import"./file-icon.js?v=1763689792";import{c as Sl,a as Nl,u as El}from"./column.js?v=1763689792";const zl=e(b({__name:"menu",setup(e,{expose:l}){const t=ye(),{fileTabList:a,closeTabs:n}=_(t),{closeOther:s,closeRight:i}=t,o=L(),c=()=>{o.value.visible=!1},r=e=>{o.value&&o.value.visible&&c()};return I(()=>{document.addEventListener("click",r)}),R(()=>{document.removeEventListener("click",r)}),l({show:e=>{o.value.visible=!0,B(()=>{we(e,o.value.contextmenuRef)})},hide:c}),(e,l)=>(T(),S(E(_l),{ref_key:"contextmenu",ref:o},{default:N(()=>[E(a).length>1?(T(),z(M,{key:0},[V(E(bl),{onClick:E(s)},{default:N(()=>[...l[0]||(l[0]=[A("关闭其它",-1)])]),_:1},8,["onClick"]),E(n).index<E(a).length-1?(T(),S(E(bl),{key:0,onClick:E(i)},{default:N(()=>[...l[1]||(l[1]=[A("关闭右侧",-1)])]),_:1},8,["onClick"])):F("",!0)],64)):F("",!0)]),_:1},512))}}),[["__scopeId","data-v-7a550c88"]]),Vl={class:"tabs-wrapper"},Al={class:"tabs"},Fl=["onContextmenu","onClick"],Ml={class:"flex items-center",style:{"margin-right":"20px"}},Bl={class:"file-name"},Dl=["onClick"],jl={class:"tabs-icon__scroll"},Ol={class:"tabs-icon__scroll"},Pl=e(b({__name:"index",setup(e,{expose:t}){const a=ye(),{fileTabActive:n,fileTabList:s,isAddTabs:i,disabledCutTab:o,scrollWidth:c,showLeftArrow:r,showRightArrow:u,contextRef:d}=_(a),{handleRightClick:m,watchWindowResize:f,watchScrollWidth:p,watchTabsWidth:v,cutTab:h,scrollLeft:k,scrollRight:g,closeTab:x}=a;return D(()=>c.value,e=>{p(e)}),D(()=>s.value.length,()=>{v()},{immediate:!0}),I(()=>{f(),B(()=>{c.value=0})}),t({watchWindowResize:f}),(e,t)=>{const a=l,c=H;return T(),z("div",Vl,[j("div",Al,[(T(!0),z(M,null,O(E(s),(e,l)=>(T(),S(c,{enterable:!1,"show-after":2e3,transition:"",key:e.id,content:e.param.path,placement:"bottom"},{default:N(()=>[j("div",{class:K(["tab-item",{on:E(n)===l,disabledTab:E(o)&&E(n)!==l}]),style:{position:"relative"},onContextmenu:q(t=>E(m)(t,e,l),["prevent"]),onClick:e=>E(h)(l)},[j("div",Ml,[V(a,{src:"/file/file-dir.svg",class:"w-[1.8rem]"}),j("div",Bl,W(e.label),1)]),j("div",{class:"close",slot:"reference",onClick:q(l=>E(x)(e,e.id),["stop"])},[...t[3]||(t[3]=[j("i",{class:"svgtofont-el-close"},null,-1)])],8,Dl)],42,Fl)]),_:2},1032,["content"]))),128)),V(c,{content:"点击添加新窗口",placement:"bottom","show-after":500},{default:N(()=>[P(j("i",{class:K(["tab-add-item svgtofont-el-plus !cursor-pointer",{disabledTab:E(o)}]),onClick:t[0]||(t[0]=e=>E(Ce)({path:"/www"}))},null,2),[[U,E(i)]])]),_:1}),V(zl,{ref_key:"contextRef",ref:d},null,512)]),j("div",null,[P(j("div",jl,[j("i",{class:"svgtofont-el-caret-left",onClick:t[1]||(t[1]=e=>E(k)())})],512),[[U,E(r)]]),P(j("div",Ol,[j("i",{class:"svgtofont-el-caret-right",onClick:t[2]||(t[2]=e=>E(g)())})],512),[[U,E(u)]])])])}}}),[["__scopeId","data-v-fb0bb262"]]),Ul={class:"nav nav-btn"},Kl={class:"left flex items-center flex-wrap"},Hl={class:"inline-flex items-center"},ql={class:"items-center inline-flex"},Wl=["title"],$l={class:"max-w-[16rem] text-space"},Yl={class:"text-tertiary"},Gl={class:"flex items-center"},Jl={class:"flex items-center truncate"},Xl=["title"],Ql={class:"!max-w-[12rem] truncate inline-block"},Zl={class:"right flex items-center"},et={key:0,class:"flex items-center text-warning mr-8px"},lt={class:"right flex items-center"},tt={class:"flex items-center"},at=e(b({__name:"index",setup(e){const a=ye(),{mainWidth:n,copyFilesData:s,fileTabActiveData:i,diskList:o,favoriteList:c,fileBatchNum:r}=_(a),{cloudList:u,actionsBtn:d,fileBatchEvent:m,handleChangeMenu:f,handleCommand:p,openPlugin:v,collectCommand:h,createCommand:k,initNavBtn:g}=a,x=$(()=>n.value>1530);return I(()=>{g(),B(()=>{const e=setInterval(async()=>{if(window.$extension){const l=await window.$extension();t(l.extensionElement)&&!l.extensionElement&&clearTimeout(e),l.extensionElement&&(l.extensionElement({custom:{getDiskList:be}}),clearTimeout(e))}},1e3)})}),(e,t)=>{var a;const g=G,y=J,w=l,C=X,b=Q,_=Z,L=Il;return T(),z("div",Ul,[j("div",Kl,[V(b,{class:"",onCommand:E(p),"show-timeout":250},{dropdown:N(()=>[V(C,null,{default:N(()=>[V(y,{command:"upload",class:"upload-btn"},{default:N(()=>[...t[8]||(t[8]=[j("span",{class:"upload-icon !mr-[.6rem]"},null,-1),A("上传文件/文件夹",-1)])]),_:1}),V(y,{command:"openUrlLinkDown",divided:""},{default:N(()=>[j("div",Hl,[V(w,{src:"/file/url-down.svg",class:"w-[1.6rem] align-middle mr-4px"}),t[9]||(t[9]=A(" URL链接下载 ",-1))])]),_:1}),(T(!0),z(M,null,O(E(u),e=>(T(),S(y,{key:e.command,command:e.command},{default:N(()=>[j("div",ql,[V(w,{src:"/file/".concat(e.icon,".svg"),class:"mr-4px w-[1.6rem] align-middle"},null,8,["src"]),A(" "+W(e.name)+" ",1),t[10]||(t[10]=j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"},null,-1))])]),_:2},1032,["command"]))),128))]),_:1})]),default:N(()=>[V(g,{class:"upload-btn",onClick:E(_e)},{default:N(()=>[...t[7]||(t[7]=[j("span",{class:"upload-icon"},null,-1),A("上传/下载",-1),j("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["onCommand"]),V(b,{onCommand:E(k),"show-timeout":250},{dropdown:N(()=>[V(C,null,{default:N(()=>[V(y,{command:"file"},{default:N(()=>[V(w,{src:"/file_icon/file_text2.png",class:"mr-4px mt-4px w-[1.6rem] align-text-bottom"}),t[13]||(t[13]=A("新建空白文本",-1))]),_:1}),V(y,{command:"dir"},{default:N(()=>[V(w,{src:"/file_icon/folder_win10.png",class:"mr-4px mt-4px w-[1.6rem] align-text-bottom"}),t[14]||(t[14]=A("新建文件夹 ",-1))]),_:1}),V(y,{command:"link"},{default:N(()=>[V(w,{class:"mr-4px w-[1.6rem] align-text-bottom",src:"/file/url-down.svg"}),t[15]||(t[15]=A("新建软链接文件",-1))]),_:1})]),_:1})]),default:N(()=>[V(g,null,{default:N(()=>[V(w,{class:"mr-4px w-[1.4rem] align-bottom",src:"/file_icon/folder_create.png"}),t[11]||(t[11]=A(" 新建",-1)),t[12]||(t[12]=j("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1))]),_:1})]),_:1},8,["onCommand"]),V(g,{class:"search-btn",onClick:E(Le)},{default:N(()=>[...t[16]||(t[16]=[j("span",{class:"flex items-center"},"文件内容搜索",-1)])]),_:1},8,["onClick"]),V(b,{onCommand:E(h),"show-timeout":250},{dropdown:N(()=>[V(C,{class:"max-h-[23rem] overflow-auto"},{default:N(()=>[E(c).length?F("",!0):(T(),S(y,{key:0,disabled:""},{default:N(()=>[...t[18]||(t[18]=[j("span",null,"暂无收藏",-1)])]),_:1})),(T(!0),z(M,null,O(E(c),e=>(T(),S(y,{key:e.path,command:e},{default:N(()=>[j("div",{class:"h-[2.7rem]",title:e.path},[V(w,{src:"".concat("file"===e.type?"/file_icon/file_text2.png":"/file_icon/folder_win10.png"),class:"mr-4px mt-4px w-[1.6rem] align-top"},null,8,["src"]),j("span",$l,[A(W(e.name),1),j("span",Yl," ("+W(e.path)+")",1)])],8,Wl)]),_:2},1032,["command"]))),128))]),_:1})]),default:N(()=>[V(g,{onClick:E(Ie)},{default:N(()=>[...t[17]||(t[17]=[j("span",{class:"file-menu-icon favorites-file-icon mr-4px"},null,-1),A("收藏夹",-1),j("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)])]),_:1},8,["onClick"])]),_:1},8,["onCommand"]),V(g,{class:"terminal-btn !ml-0",onClick:E(Re)},{default:N(()=>[...t[19]||(t[19]=[j("div",{class:"flex items-center"},[j("span",{class:"fileTerminal-icon"}),A("终端")],-1)])]),_:1},8,["onClick"]),t[29]||(t[29]=j("div",{id:"extension-cosfs"},null,-1)),j("div",Gl,[1===(null==(a=E(o))?void 0:a.length)?(T(),S(g,{key:0,class:"search-btn !mr-0",onClick:t[0]||(t[0]=e=>E(Te)("/"))},{default:N(()=>{var e;return[j("span",Jl,[t[20]||(t[20]=j("i",{class:"svgtofont-file-hdd text-large mr-4px svg-icon"},null,-1)),A(" "+W("/(根目录)".concat((null==(e=E(o)[0])?void 0:e.size[2])||"")),1)])]}),_:1})):(T(),S(b,{key:1,onCommand:E(Te)},{dropdown:N(()=>[V(C,null,{default:N(()=>[(T(!0),z(M,null,O(E(o),(e,l)=>(T(),S(y,{command:e.path,key:l},{default:N(()=>[j("div",{class:"inline-block w-full flex items-center",title:"".concat(e.path,"（").concat(e.size[2]||"","）")},[j("div",Ql,W(l?e.path:"/(根目录)")+"("+W(e.size[2]||"")+")",1)],8,Xl)]),_:2},1032,["command"]))),128))]),_:1})]),default:N(()=>[V(g,{class:"!mr-0",onClick:t[1]||(t[1]=e=>E(Te)("/"))},{default:N(()=>{var e;return[t[21]||(t[21]=j("i",{class:"svgtofont-file-hdd text-large mr-4px svg-icon"},null,-1)),A(" "+W("/(根目录)".concat((null==(e=E(o)[0])?void 0:e.size[2])||"")),1),t[22]||(t[22]=j("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1))]}),_:1})]),_:1},8,["onCommand"]))]),V(b,{"show-timeout":250,class:"nav-btn-more-btn"},{dropdown:N(()=>[V(C,null,{default:N(()=>[V(y,{onClick:E(Se)},{default:N(()=>[...t[24]||(t[24]=[A("分享列表",-1)])]),_:1},8,["onClick"]),V(y,{onClick:E(Ne)},{default:N(()=>[...t[25]||(t[25]=[A("文件操作记录",-1)])]),_:1},8,["onClick"]),V(y,{onClick:E(Ee)},{default:N(()=>[...t[26]||(t[26]=[A("文件足迹",-1)])]),_:1},8,["onClick"]),V(y,{class:"flex items-center",onClick:t[2]||(t[2]=e=>E(v)("tamper_core",75))},{default:N(()=>[...t[27]||(t[27]=[j("i",{class:"svgtofont-icon-ltd !text-medium !mr-0 text-ltd"},null,-1),A("企业级防篡改",-1)])]),_:1}),V(y,{class:"flex items-center",onClick:t[3]||(t[3]=e=>E(v)("rsync",70))},{default:N(()=>[...t[28]||(t[28]=[j("i",{class:"svgtofont-icon-ltd !text-medium !mr-0 text-ltd"},null,-1),A("文件同步",-1)])]),_:1})]),_:1})]),default:N(()=>[V(g,null,{default:N(()=>[...t[23]||(t[23]=[A("更多功能",-1),j("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)])]),_:1})]),_:1})]),j("div",Zl,[E(r).length?F("",!0):P((T(),z("div",et,[...t[30]||(t[30]=[j("i",{class:"svgtofont-el-info-filled text-warning mt-2px mr-4px text-base"},null,-1),A(" 文件操作可使用右键 ",-1)])],512)),[[U,E(x)]]),P(j("div",lt,[V(_,{class:"flex-nowrap !inline-flex"},{default:N(()=>[(T(!0),z(M,null,O(E(d),e=>P((T(),S(g,{key:e.type,class:"!mr-[-1px]",onClick:l=>e.handler()},{default:N(()=>[j("span",{class:K([e.icon,"file-menu-icon mr-4px"])},null,2),A(W(e.label),1)]),_:2},1032,["onClick"])),[[U,E(n)>(e.hide||0)&&E(n)>=1720]])),128)),E(n)<1720?(T(),S(b,{key:0,onCommand:E(m)},{dropdown:N(()=>[V(C,{class:"batch-btn-list"},{default:N(()=>[V(y,{command:"copy"},{default:N(()=>[...t[32]||(t[32]=[j("span",{class:"file-menu-icon copy-file-icon"},null,-1),A("复制",-1)])]),_:1}),V(y,{command:"cut"},{default:N(()=>[...t[33]||(t[33]=[j("span",{class:"file-menu-icon cut-file-icon"},null,-1),A("剪切",-1)])]),_:1}),V(y,{command:"compress"},{default:N(()=>[...t[34]||(t[34]=[j("span",{class:"file-menu-icon compress-file-icon"},null,-1),A("压缩",-1)])]),_:1}),V(y,{command:"auth"},{default:N(()=>[...t[35]||(t[35]=[j("span",{class:"file-menu-icon authority-file-icon"},null,-1),A("权限",-1)])]),_:1}),V(y,{command:"del"},{default:N(()=>[...t[36]||(t[36]=[j("span",{class:"file-menu-icon delete-file-icon"},null,-1),A("删除",-1)])]),_:1})]),_:1})]),default:N(()=>[V(g,{class:"!m-0 border",style:{"border-left":"1px solid var(--el-color-border-dark)"}},{default:N(()=>[...t[31]||(t[31]=[A("更多",-1),j("i",{class:"svgtofont-el-arrow-down el-icon--right"},null,-1)])]),_:1})]),_:1},8,["onCommand"])):F("",!0)]),_:1})],512),[[U,E(r).length>1]]),P(V(L,null,null,512),[[U,E(r).length>1]]),P(V(g,{onClick:E(ze)},{default:N(()=>[...t[37]||(t[37]=[A("粘贴",-1)])]),_:1},8,["onClick"]),[[U,E(s).files.length>0]]),V(g,{onClick:t[4]||(t[4]=e=>E(Ve)())},{default:N(()=>[...t[38]||(t[38]=[j("i",{class:"svgtofont-el-delete mr-4px"},null,-1),A("回收站 ",-1)])]),_:1}),j("div",tt,[j("span",{onClick:t[5]||(t[5]=e=>E(f)("list")),class:K(["list"===E(i).type?"active":"","menu-type menu-left list-view"])},[...t[39]||(t[39]=[Y('<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="menu-icon" data-v-57bd2958><rect x="1" y="1.5" width="2" height="2" rx="0.2" data-v-57bd2958></rect><rect x="4.5" y="1.5" width="8.5" height="2" rx="0.2" data-v-57bd2958></rect><rect x="1" y="6" width="2" height="2" rx="0.2" data-v-57bd2958></rect><rect x="4.5" y="6" width="8.5" height="2" rx="0.2" data-v-57bd2958></rect><rect x="1" y="10.5" width="2" height="2" rx="0.2" data-v-57bd2958></rect><rect x="4.5" y="10.5" width="8.5" height="2" rx="0.2" data-v-57bd2958></rect></svg>',1)])],2),j("span",{onClick:t[6]||(t[6]=e=>E(f)("icon")),class:K(["list"!==E(i).type?"active":"","menu-type menu-right icon-view"])},[...t[40]||(t[40]=[Y('<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="menu-icon" data-v-57bd2958><rect x="1" y="1" width="5" height="5" rx="1" data-v-57bd2958></rect><rect x="8" y="1" width="5" height="5" rx="1" data-v-57bd2958></rect><rect x="1" y="8" width="5" height="5" rx="1" data-v-57bd2958></rect><rect x="8" y="8" width="5" height="5" rx="1" data-v-57bd2958></rect></svg>',1)])],2)])])])}}}),[["__scopeId","data-v-57bd2958"]]),nt=""+new URL("../images/file/share-list-active.svg",import.meta.url).href,st=""+new URL("../images/file/favorite-list-star.svg",import.meta.url).href,it=""+new URL("../icons/icon-top.svg",import.meta.url).href,ot=""+new URL("../images/file_icon/icon-new-file-lock.svg",import.meta.url).href,ct=""+new URL("../images/file_icon/icon-new-file-unlock.svg",import.meta.url).href,rt=ee("FILES-LOG-ANALYZE-STORE",()=>{const e=L({});let l=null;const t=le({limit:200,auto:!1,time:5,search:"",data:"",last:"",file:""}),s=L(!1),i=async()=>{const e={file:t.file,limit:t.limit,search:t.search};t.last=n((new Date).getTime());try{s.value=!0;const l=await Ae({data:JSON.stringify(e)});t.data=l.data.data}catch(l){}finally{s.value=!1}};return{compData:e,loading:s,quickForm:t,limitOptions:[{label:"200/行",value:200},{label:"500/行",value:500},{label:"1000/行",value:1e3},{label:"2000/行",value:2e3},{label:"5000/行",value:5e3}],changeLimit:e=>{t.limit=e},getLog:i,setAutoRefresh:()=>{t.auto?l=setInterval(()=>{i()},1e3*t.time):clearInterval(l)},checkTime:e=>{const l=Number(e.replace(/[^\d]/g,""));t.time=l<2?2:l,a.warn("最小刷新时间为2秒")},init:()=>{Object.assign(t,{limit:200,auto:!1,time:5,search:"",data:"",last:"",file:Fe(e.value.fileItem.fileName)}),i()},$reset:()=>{s.value=!1,l&&clearInterval(l)}}}),ut=ee("FILES-VIRUS-SCAN-STORE",()=>{const e=L(""),l=L("loading"),t=L(!1),n=L("");let u=null;const d=L(),m=le({scanInfo:"",scanCount:0,scanningCount:0,scanningText:"进行中",shellCount:0}),f=L([]),p=L(""),v=(e,t)=>{if("token error"===t.data)return a.error("token error"),void(null==u||u.close());const n=JSON.parse(t.data);m.scanInfo=n.info,n.is_count&&(m.scanCount=n.count,m.scanningCount=n.is_count),n.path&&f.value.push({path:n.path,name:n.path.substring(n.path.lastIndexOf("/")+1)}),n.result&&(l.value="success",m.scanningText="已完成",m.scanInfo="扫描已完成",m.scanningCount=m.scanCount,m.shellCount=n.result.length,n.result.length>0&&(l.value="danger"),a.success("扫描完成！"),null==u||u.close())},h=async e=>{await s({title:"提示",content:"确定删除文件【"+e.path+"】，删除后文件将移至回收站，是否继续操作？",icon:"warning",type:"calc"}),i({loading:"正在删除文件，请稍后...",request:Me({path:e.path,type:"File"}),message:!0,success:l=>{l.status&&(f.value=f.value.filter(l=>l.path!==e.path))}})},k=async e=>{await s({title:"提示",content:"是否确定提交误报反馈",type:"calc"}),i({loading:"正在提交误报反馈，请稍后...",request:c({filename:e.path}),message:!0,success:l=>{l.stauts&&(f.value=f.value.filter(l=>l.path!==e.path))}})},g=async e=>{p.value=e.path,await i({loading:"正在获取文件内容，请稍后...",request:Be({path:e.path}),success:e=>{n.value=e.data.data,t.value=!0}})},x=te([Nl(),{label:"文件名",prop:"name",width:160},{label:"文件路径",prop:"path"},El([{onClick:k,title:"误报"},{onClick:g,title:"打开文件",width:70},{onClick:h,title:"删除"}])]),y=[{label:"删除",value:"delete",event:async(e,l,t,a,n)=>{const s=async e=>await Me({path:e.path,type:"File"});await e({title:"批量删除",content:"批量删除选中文件，删除后文件将移至回收站，是否继续操作？",column:[{prop:"path",label:"文件路径"},Sl()],onConfirm:async()=>(await l(s),f.value=f.value.filter(e=>!t.value.some(l=>l.path===e.path)),!1)})}}];return{path:e,scanLoad:l,scanningData:m,tableColumns:x,tableData:f,scanTableRef:d,batchOptions:y,editorPopup:t,editorValue:n,saveFile:async()=>{await i({loading:"正在保存文件，请稍后...",request:o({path:p.value,data:n.value,encoding:"utf-8"}),message:!0})},cancelScan:async()=>{await s({title:"提示",content:"查杀正在进行中，确定要停止扫描吗？"}),m.scanningText="已取消",l.value="success",null==u||u.close()},scanData:async()=>{f.value=[],u=r({route:"/ws_panel",onMessage:v}),l.value="loading",m.scanningText="进行中",m.scanInfo="正在扫描中...",null==u||u.send({"x-http-token":window.vite_public_request_token}),null==u||u.send({def_name:"ws_webshell_check",mod_name:"files",path:e.value,ws_callback:"1"})},$reset:()=>{f.value=[],l.value="loading",t.value=!1,n.value="",p.value="",Object.assign(m,{scanInfo:"",scanCount:0,scanningCount:0,scanningText:"进行中",shellCount:0})}}}),dt=ee("FILES-RIGHT-MENU-STORE",()=>{const e=ye(),{authType:l,copyFilesData:t,createListType:n}=_(e),{refreshFilesList:i,watchCreateListType:o}=e,c=De(),{contextRow:r,isBatch:p}=_(c),v=L(null),h=L(!0),k=()=>{r.value&&(r.value.isFav=!r.value.isFav,x())},g=()=>{v.value.visible=!1},x=()=>{r.value&&(h.value=!0)};return{authType:l,refreshFilesList:i,contextmenu:v,showOpen:h,contextRow:r,isBatch:p,copyFilesData:t,watchCurrentRow:x,openCloud:async(e,t="down")=>{if("ltd"!==l.value)He({sourceId:73});else try{const{data:l}=await m({sName:e});if(!l.setup)return void $e({name:l.name,type:"i",pluginInfo:l});const a={type:t,zName:l.title,pname:e};a.rowData=r.value,Ye(a)}catch(a){f(a)}},openEvent:(e,t,n)=>{t.includes("压缩预览")?"ltd"!==l.value?He({disablePro:!0,sourceId:171}):n?qe(e):a.error("暂不支持该类型文件预览"):We(e)},handleReName:e=>{e.oldName=e.fileName,e.isReName=!0},show:e=>{v.value.visible=!0,B(()=>{we(e,v.value.contextmenuRef)})},hide:g,handleClickOutside:e=>{v.value&&v.value.visible&&g()},create:e=>{n.value=e,o(e)},toping:async()=>{var e;Array.isArray(r.value)||((null==(e=r.value)?void 0:e.isTop)&&await s({title:"取消置顶文件",content:"您是否要取消置顶【".concat(r.value.fileName,"】？")}),r.value&&Ke(r.value,r.value.isTop?"unset":"set"))},share:async()=>{var e;r.value&&!Array.isArray(r.value)&&((null==(e=r.value)?void 0:e.isShare)?Ue(r.value):Pe(r.value))},collection:async()=>{r.value&&!Array.isArray(r.value)&&(r.value.isFav?(await s({title:"收藏文件",icon:"warning",content:"您是否要取消【".concat(r.value.fileName,"】的收藏？")}),Oe(r.value,k)):je(r.value,k))},openLogAnalyze:e=>{const{compData:l}=_(rt());l.value={fileItem:e},u({title:"【".concat(e.fileName,"】日志写入分析"),area:85,component:()=>d(()=>import("./index292.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})},openTrojanScan:e=>{const l=ut(),{path:t}=_(l);t.value=e.path,u({title:"木马扫描【".concat(e.fileName,"】"),area:85,component:()=>d(()=>import("./index293.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})}}}),mt={key:0},ft={key:3,class:"right-menu-divider"},pt={key:1},vt={key:2},ht=e(b({__name:"index",setup(e,{expose:l}){const{enterpriseRec:t}=p(),a=dt(),{contextRow:n,isBatch:s,authType:i,contextmenu:o,showOpen:c,copyFilesData:r}=_(a),{refreshFilesList:u,openEvent:d,handleReName:m,show:f,hide:v,handleClickOutside:h,openCloud:k,create:g,toping:x,share:y,collection:w,openLogAnalyze:C,openTrojanScan:b,watchCurrentRow:L}=a,M=$(()=>{var e;let l="";if("dir"===(null==(e=n.value)?void 0:e.type))l="打开";else{if(!n.value)return l;switch(Ge(n.value.ext)){case"images":l="预览";break;case"video":l="播放";break;case"compress":q?l=n.value.ext.toUpperCase()+"压缩预览":c.value=!1;break;default:l="编辑"}}return l}),B=$(()=>{let e=!1;return n.value?("images"!==Ge(n.value.ext)&&"video"!==Ge(n.value.ext)||(e=!0),e):e}),D=$(()=>{var e;let l="";return l=0==(null==(e=n.value)?void 0:e.isShare)?"外链分享":"取消分享",l}),O=$(()=>{var e;let l="";return l=(null==(e=n.value)?void 0:e.isTop)?"取消置顶":"置顶",l}),K=$(()=>{var e;let l="";return l=(null==(e=n.value)?void 0:e.isFav)?"取消收藏":"添加到收藏夹",l}),H=$(()=>{var e;let l=!0;return"dir"!==(null==(e=n.value)?void 0:e.type)&&(l=!1),n.value&&null!=Je.get(n.value.path)&&(l=!1),l}),q=$(()=>{var e;return["zip","rar","gz","tar","war","tgz","bz2","7z","tar.gz"].includes((null==(e=n.value)?void 0:e.ext)||"")});return $(()=>{var e;let l=!1;return(null==(e=n.value)?void 0:e.isSearch)&&(l=!0),l}),I(()=>{L(),document.addEventListener("click",h)}),R(()=>{document.removeEventListener("click",h)}),l({show:f,hide:v}),(e,l)=>{const a=ae;return T(),S(E(_l),{ref_key:"contextmenu",ref:o},{default:N(()=>{var e,o;return[Array.isArray(E(n))||!(null==(e=E(n))?void 0:e.fileName)||E(s)?F("",!0):(T(),z("div",mt,[E(c)||E(q)?(T(),S(E(bl),{key:0,onClick:l[0]||(l[0]=e=>E(d)(E(n),E(M),E(q)))},{default:N(()=>[l[36]||(l[36]=j("span",{class:"file-menu-icon open-file-icon"},null,-1)),A(" "+W(E(M)),1)]),_:1})):F("",!0),"dir"===E(n).type?(T(),S(E(bl),{key:1,onClick:l[1]||(l[1]=e=>E(Ce)(E(n)))},{default:N(()=>[...l[37]||(l[37]=[j("span",{class:"file-menu-icon open-tab-icon"},null,-1),A("在新窗口打开",-1)])]),_:1})):F("",!0),"sql"===E(n).ext?(T(),S(E(bl),{key:2,onClick:l[2]||(l[2]=e=>E(Xe)(E(n)))},{default:N(()=>[...l[38]||(l[38]=[j("span",{class:"file-menu-icon"},null,-1),A("导入数据库",-1)])]),_:1})):F("",!0),E(c)||E(q)?(T(),z("div",ft)):F("",!0),"dir"!==E(n).type?(T(),S(E(bl),{key:4,onClick:l[3]||(l[3]=e=>E(Qe)(E(n)))},{default:N(()=>[...l[39]||(l[39]=[j("span",{class:"file-menu-icon download-file-icon"},null,-1),A("下载",-1)])]),_:1})):F("",!0),"dir"!==E(n).type&&"bt_split"!==E(n).ext&&"bt_split_json"!==E(n).ext?(T(),S(E(bl),{key:5,onClick:l[4]||(l[4]=e=>E(Ze)(E(n)))},{default:N(()=>[...l[40]||(l[40]=[j("span",{class:"file-menu-icon"},null,-1),A("文件拆分",-1)])]),_:1})):F("",!0),"dir"!==E(n).type&&"bt_split_json"===E(n).ext?(T(),S(E(bl),{key:6,onClick:l[5]||(l[5]=e=>E(el)(E(n)))},{default:N(()=>[...l[41]||(l[41]=[j("span",{class:"file-menu-icon"},null,-1),A("文件合并",-1)])]),_:1})):F("",!0),V(E(bl),{onClick:E(w)},{default:N(()=>[l[42]||(l[42]=j("span",{class:"file-menu-icon favorites-file-icon"},null,-1)),A(W(E(K)),1)]),_:1},8,["onClick"]),V(E(bl),{onClick:E(y)},{default:N(()=>[l[43]||(l[43]=j("span",{class:"file-menu-icon not-elf-icon svgtofont-el-share text-successDark font-bold !text-medium"},null,-1)),A(W(E(D)),1)]),_:1},8,["onClick"]),"ltd"===E(i)?(T(),S(E(bl),{key:7,onClick:E(x)},{default:N(()=>[l[44]||(l[44]=j("span",{class:"file-menu-icon toping-icon"},null,-1)),A(W(E(O)),1)]),_:1},8,["onClick"])):F("",!0),E(H)?(T(),S(E(bl),{key:8,onClick:l[6]||(l[6]=e=>E(ll)(E(n)))},{default:N(()=>[...l[45]||(l[45]=[j("span",{class:"file-menu-icon rsync-icon"},null,-1),A("文件同步",-1)])]),_:1})):F("",!0),"log"===E(n).ext?(T(),S(E(bl),{key:9,onClick:l[7]||(l[7]=e=>E(C)(E(n)))},{default:N(()=>[...l[46]||(l[46]=[j("span",{class:"file-menu-icon"},null,-1),A("监听日志",-1)])]),_:1})):F("",!0),l[65]||(l[65]=j("div",{class:"right-menu-divider"},null,-1)),"dir"===E(n).type?(T(),S(E(bl),{key:10,onClick:l[8]||(l[8]=e=>E(b)(E(n)))},{default:N(()=>[...l[47]||(l[47]=[j("i",{class:"file-menu-icon svgtofont-icon-bug-scan not-elf-icon svgtofont-el-orange text-warning !text-medium"},null,-1),A("木马扫描",-1)])]),_:1})):F("",!0),"dir"!==E(n).type&&E(t)?(T(),S(E(Ll),{key:11},{title:N(()=>[...l[48]||(l[48]=[j("span",null,[j("span",{class:"file-menu-icon upload-file-icon"}),j("span",{class:"align-text-top"},"上传到云存储")],-1)])]),default:N(()=>[V(E(bl),{onClick:l[9]||(l[9]=e=>E(k)("bos","upload"))},{default:N(()=>[...l[49]||(l[49]=[j("div",{class:"flex items-center w-full"},[j("div",{class:"flex items-center"},[j("span",{class:"file-menu-icon baidu-icon"}),A("百度云存储")]),j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"})],-1)])]),_:1}),V(E(bl),{onClick:l[10]||(l[10]=e=>E(k)("alioss","upload"))},{default:N(()=>[...l[50]||(l[50]=[j("div",{class:"flex items-center w-full"},[j("div",{class:"flex items-center"},[j("span",{class:"file-menu-icon ali-icon"}),A("阿里云存储")]),j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"})],-1)])]),_:1}),V(E(bl),{onClick:l[11]||(l[11]=e=>E(k)("txcos","upload"))},{default:N(()=>[...l[51]||(l[51]=[j("div",{class:"flex items-center w-full"},[j("div",{class:"flex items-center"},[j("span",{class:"file-menu-icon txcos-icon"}),A("腾讯云存储")]),j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"})],-1)])]),_:1}),V(E(bl),{onClick:l[12]||(l[12]=e=>E(k)("obs","upload"))},{default:N(()=>[...l[52]||(l[52]=[j("div",{class:"flex items-center w-full"},[j("div",{class:"flex items-center"},[j("span",{class:"file-menu-icon huawei-icon"}),A("华为云存储")]),j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"})],-1)])]),_:1})]),_:1})):F("",!0),V(E(bl),{onClick:l[13]||(l[13]=e=>E(tl)(E(n),"auth"))},{default:N(()=>[...l[53]||(l[53]=[j("span",{class:"file-menu-icon authority-icon"},null,-1),A("权限",-1)])]),_:1}),l[66]||(l[66]=j("div",{class:"right-menu-divider"},null,-1)),V(E(bl),{onClick:l[14]||(l[14]=e=>E(al)(E(n),"copy"))},{default:N(()=>[...l[54]||(l[54]=[j("span",{class:"file-menu-icon copy-file-icon"},null,-1),A("复制",-1)])]),_:1}),V(E(bl),{onClick:l[15]||(l[15]=e=>E(al)(E(n),"cut"))},{default:N(()=>[...l[55]||(l[55]=[j("span",{class:"file-menu-icon cut-file-icon"},null,-1),A("剪切",-1)])]),_:1}),P(V(E(bl),{onClick:E(ze)},{default:N(()=>[...l[56]||(l[56]=[j("span",{class:"file-menu-icon paste-icon"},null,-1),A("粘贴",-1)])]),_:1},8,["onClick"]),[[U,0!==E(r).files.length]]),V(E(bl),{onClick:l[16]||(l[16]=e=>E(m)(E(n)))},{default:N(()=>[...l[57]||(l[57]=[j("span",{class:"file-menu-icon rename-file-icon"},null,-1),A("重命名",-1)])]),_:1}),V(E(bl),{onClick:l[17]||(l[17]=e=>E(nl)(E(n)))},{default:N(()=>[...l[58]||(l[58]=[j("span",{class:"file-menu-icon delete-file-icon"},null,-1),A("删除",-1)])]),_:1}),l[67]||(l[67]=j("div",{class:"right-menu-divider"},null,-1)),V(E(bl),{onClick:l[18]||(l[18]=e=>E(sl)(E(n)))},{default:N(()=>[...l[59]||(l[59]=[j("span",{class:"file-menu-icon compress-file-icon"},null,-1),A("创建压缩",-1)])]),_:1}),"dir"!==E(n).type&&E(B)?(T(),S(E(bl),{key:12,onClick:l[19]||(l[19]=e=>E(il)(E(n)))},{default:N(()=>[...l[60]||(l[60]=[j("span",{class:"file-menu-icon format-file-icon"},null,-1),A("格式转换",-1)])]),_:1})):F("",!0),E(q)?(T(),S(E(bl),{key:13,onClick:l[20]||(l[20]=e=>E(ol)(E(n)))},{default:N(()=>[...l[61]||(l[61]=[j("span",{class:"file-menu-icon decompress-file-icon"},null,-1),A("解压",-1)])]),_:1})):F("",!0),"ltd"===E(i)?(T(),S(E(bl),{key:14,onClick:l[21]||(l[21]=e=>E(cl)(E(n)))},{default:N(()=>[...l[62]||(l[62]=[j("span",{class:"file-menu-icon create-copy-icon"},null,-1),A("创建副本",-1)])]),_:1})):F("",!0),l[68]||(l[68]=j("div",{class:"right-menu-divider"},null,-1)),"ltd"===E(i)&&"dir"!==E(n).type?(T(),S(E(bl),{key:15,onClick:l[22]||(l[22]=e=>E(rl)(E(n)))},{default:N(()=>[...l[63]||(l[63]=[j("span",{class:"file-menu-icon email-icon"},null,-1),A("发送到邮箱",-1)])]),_:1})):F("",!0),V(E(bl),{onClick:l[23]||(l[23]=e=>E(tl)(E(n)))},{default:N(()=>[...l[64]||(l[64]=[j("span",{class:"file-menu-icon status-icon"},null,-1),A("属性",-1)])]),_:1})])),E(s)&&Array.isArray(E(n))?(T(),z("div",pt,[V(E(bl),{onClick:l[24]||(l[24]=e=>E(ul)(E(n),"copy"))},{default:N(()=>[...l[69]||(l[69]=[j("span",{class:"file-menu-icon copy-file-icon"},null,-1),A("复制",-1)])]),_:1}),V(E(bl),{onClick:l[25]||(l[25]=e=>E(ul)(E(n),"cut"))},{default:N(()=>[...l[70]||(l[70]=[j("span",{class:"file-menu-icon cut-file-icon"},null,-1),A("剪切",-1)])]),_:1}),V(E(bl),{onClick:l[26]||(l[26]=e=>E(dl)(E(n)))},{default:N(()=>[...l[71]||(l[71]=[j("span",{class:"file-menu-icon authority-icon"},null,-1),A("权限",-1)])]),_:1}),V(E(bl),{onClick:l[27]||(l[27]=e=>E(sl)(E(n)))},{default:N(()=>[...l[72]||(l[72]=[j("span",{class:"file-menu-icon compress-file-icon"},null,-1),A("创建压缩",-1)])]),_:1}),V(E(bl),{onClick:l[28]||(l[28]=e=>E(il)(E(n)))},{default:N(()=>[...l[73]||(l[73]=[j("span",{class:"file-menu-icon format-file-icon"},null,-1),A("格式转换",-1)])]),_:1}),V(E(bl),{onClick:l[29]||(l[29]=e=>E(ml)(E(n)))},{default:N(()=>[...l[74]||(l[74]=[j("span",{class:"file-menu-icon delete-file-icon"},null,-1),A("删除",-1)])]),_:1})])):F("",!0),(null==(o=E(n))?void 0:o.fileName)||E(s)?F("",!0):(T(),z("div",vt,[V(E(bl),{onClick:E(u)},{default:N(()=>[...l[75]||(l[75]=[j("span",{class:"file-menu-icon refresh-icon"},null,-1),A("刷新",-1)])]),_:1},8,["onClick"]),l[88]||(l[88]=j("div",{class:"right-menu-divider"},null,-1)),V(E(bl),{onClick:E(fl)},{default:N(()=>[...l[76]||(l[76]=[j("span",{class:"file-menu-icon upload-icon"},null,-1),A("上传",-1)])]),_:1},8,["onClick"]),V(E(Ll),null,{title:N(()=>[...l[77]||(l[77]=[j("span",null,[j("span",{class:"file-menu-icon folder_create"}),j("span",{class:"align-text-top"},"新建文件夹/文件 ")],-1)])]),default:N(()=>[V(E(bl),{onClick:l[30]||(l[30]=e=>E(g)("dir"))},{default:N(()=>[...l[78]||(l[78]=[j("span",{class:"file-menu-icon dirF-icon"},null,-1),A("新建文件夹",-1)])]),_:1}),V(E(bl),{onClick:l[31]||(l[31]=e=>E(g)("file"))},{default:N(()=>[...l[79]||(l[79]=[j("span",{class:"file-menu-icon file-icon"},null,-1),A("新建文件",-1)])]),_:1}),V(E(bl),{onClick:E(pl)},{default:N(()=>[...l[80]||(l[80]=[j("span",{class:"file-menu-icon dirLink-icon"},null,-1),A("软链接文件",-1)])]),_:1},8,["onClick"])]),_:1}),V(E(Ll),null,{title:N(()=>[...l[81]||(l[81]=[j("span",null,[j("span",{class:"file-menu-icon download-file-icon"}),j("span",{class:"align-text-top"},"从云存储下载")],-1)])]),default:N(()=>[V(E(bl),{onClick:l[32]||(l[32]=e=>E(k)("bos"))},{default:N(()=>[...l[82]||(l[82]=[j("div",{class:"flex items-center w-full"},[j("div",{class:"flex items-center"},[j("span",{class:"file-menu-icon baidu-icon"}),A("百度云存储")]),j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"})],-1)])]),_:1}),V(E(bl),{onClick:l[33]||(l[33]=e=>E(k)("alioss"))},{default:N(()=>[...l[83]||(l[83]=[j("div",{class:"flex items-center w-full"},[j("div",{class:"flex items-center"},[j("span",{class:"file-menu-icon ali-icon"}),A("阿里云存储")]),j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"})],-1)])]),_:1}),V(E(bl),{onClick:l[34]||(l[34]=e=>E(k)("txcos"))},{default:N(()=>[...l[84]||(l[84]=[j("div",{class:"flex items-center w-full"},[j("div",{class:"flex items-center"},[j("span",{class:"file-menu-icon txcos-icon"}),A("腾讯云存储")]),j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"})],-1)])]),_:1}),V(E(bl),{onClick:l[35]||(l[35]=e=>E(k)("obs"))},{default:N(()=>[...l[85]||(l[85]=[j("div",{class:"flex items-center w-full"},[j("div",{class:"flex items-center"},[j("span",{class:"file-menu-icon huawei-icon"}),A("华为云存储")]),j("i",{class:"svgtofont-icon-ltd ml-4px text-ltd !text-large"})],-1)])]),_:1})]),_:1}),V(E(bl),{onClick:E(Re)},{default:N(()=>[...l[86]||(l[86]=[j("span",{class:"file-menu-icon terminals-icon"},null,-1),A("终端",-1)])]),_:1},8,["onClick"]),0!==E(r).files.length?(T(),S(a,{key:0,class:"!mt-0 !mb-0"})):F("",!0),P(V(E(bl),{onClick:E(ze)},{default:N(()=>[...l[87]||(l[87]=[j("span",{class:"file-menu-icon paste-icon"},null,-1),A("粘贴",-1)])]),_:1},8,["onClick"]),[[U,0!==E(r).files.length]])]))]}),_:1},512)}}}),[["__scopeId","data-v-38dd5e1f"]]),kt={key:0,class:"svgtofont-el-loading animate-spin mr-2px"},gt={class:"text-primary cursor-pointer"},xt={key:0},yt={key:1},wt={class:"p-12px w-[28rem]"},Ct={key:0,class:"bg-light text-tertiary !mb-12px !py-[.5rem] !pr-0 !pl-[1rem] rounded-base"},bt={class:"text-small"},_t={class:"item"},Lt={class:"truncate w-[16rem] inline-block ml-1rem"},It={class:"item"},Rt={class:"con"},Tt={class:"item"},St={class:"con"},Nt={class:"item"},Et={class:"con"},zt={class:"item"},Vt={class:"con"},At={class:"item"},Ft={class:"con"},Mt={class:"item"},Bt={class:"con"},Dt={class:"item"},jt={class:"con"},Ot=e(b({__name:"index",props:{row:{},status:{type:Boolean,default:!1}},setup(e){const l=k(),a=e,s=De(),{authType:o,diskAnalysis:c}=_(s),{buyPlugin:r}=s,u=L(!1),d=L("defalut"),m=ne(a,"row"),f=ne(a,"status"),p=L("计算");D(()=>f.value,e=>{var l;u.value=e,d.value="",t(e)&&!e&&(null==(l=m.value)?void 0:l.diskInfo)&&(p.value=v(m.value.diskInfo.total_asize))},{immediate:!0});return(e,t)=>{const a=H,s=ae,f=se;return T(),z("a",{class:"flex items-center",title:"点击计算大小",onClick:t[2]||(t[2]=e=>(async e=>{if(c.value.reqEnd&&c.value.isSetup&&"ltd"===o.value){const t=await i({loading:u,request:vl({path_list:JSON.stringify([e.path]),is_refresh:!1})});t.status?(m.value.diskInfo=Object.values(t.data)[0]?Object.values(t.data)[0]:e,p.value=v(m.value.diskInfo.total_asize)):l.error(t.msg)}else{u.value=!0;const l=await hl({path:e.path});u.value=!1,m.value.diskInfo={...e,size:l.data},p.value=l.data}d.value=""})(E(m)))},[E(u)?(T(),z("span",kt)):F("",!0),j("div",gt,[E(h)(E(m).diskInfo)?(T(),z("span",xt,"计算")):(T(),z("span",yt,[V(f,{placement:"right","popper-class":"myPopover",trigger:"hover",width:"304"},{reference:N(()=>[j("span",null,W(E(p)),1)]),default:N(()=>[j("div",wt,[E(c).isSetup?F("",!0):(T(),z("div",Ct,[j("span",bt,W(E(c).isBuy||"ltd"===E(o)?"安装":"购买")+"硬盘分析工具畅享更多信息， ",1),j("a",{class:"text-small btlink",onClick:t[0]||(t[0]=(...e)=>E(r)&&E(r)(...e))},"立即"+W(E(c).isBuy||"ltd"===E(o)?"安装":"购买"),1)])),t[14]||(t[14]=j("div",{class:"item"},[j("div",{class:"title !text-default"},"目录详情"),j("div",{class:"con"})],-1)),j("div",_t,[t[3]||(t[3]=j("div",{class:"title"},"目录路径:",-1)),V(a,{effect:"light",content:E(m).diskInfo.full_path||E(m).diskInfo.path,placement:"top"},{default:N(()=>[j("div",Lt,W(E(m).diskInfo.full_path||E(m).diskInfo.path),1)]),_:1},8,["content"])]),j("div",It,[t[4]||(t[4]=j("div",{class:"title"},"目录大小:",-1)),j("div",Rt,W(E(m).diskInfo.size||E(p)),1)]),j("div",Tt,[t[5]||(t[5]=j("span",{class:"ltd-icon"},null,-1)),t[6]||(t[6]=j("div",{class:"title"},"文件夹数量:",-1)),j("div",St,W(E(m).diskInfo.full_path?E(m).diskInfo.dir_num:"----------"),1)]),j("div",Nt,[t[7]||(t[7]=j("span",{class:"ltd-icon"},null,-1)),t[8]||(t[8]=j("div",{class:"title"},"文件数量:",-1)),j("div",Et,W(E(m).diskInfo.full_path?E(m).diskInfo.file_num:"----------"),1)]),j("div",zt,[t[9]||(t[9]=j("div",{class:"title"},"权限:",-1)),j("div",Vt,[A(W(E(m).diskInfo.accept||E(m).diskInfo.rootLevel)+" ",1),j("a",{class:"ml-[2rem] bt-link",onClick:t[1]||(t[1]=e=>E(tl)(E(m),"auth"))},"修改权限")])]),j("div",At,[t[10]||(t[10]=j("div",{class:"title"},"所属用户:",-1)),j("div",Ft,W(E(m).diskInfo.user),1)]),V(s,{class:"!my-[1rem]"}),j("div",Mt,[t[11]||(t[11]=j("div",{class:"title"},"最后修改时间:",-1)),j("div",Bt,W(E(m).time),1)]),j("div",Dt,[t[12]||(t[12]=j("span",{class:"ltd-icon"},null,-1)),t[13]||(t[13]=j("div",{class:"title"},"权限变更时间:",-1)),j("div",jt,W(E(m).diskInfo.full_path?E(n)(E(m).diskInfo.ctime):"-----------"),1)])])]),_:1})]))])])}}}),[["__scopeId","data-v-5bb7fe13"]]),Pt={class:"table-head flex h-[3.6rem] overflow-hidden"},Ut={class:"flex flex-shrink-0 w-[30px] px-[10px]"},Kt={class:"custom-td"},Ht=["onClick"],qt={key:0,class:"flex flex-col ml-8px justify-center"},Wt=["onClick","onTouchend","onContextmenu"],$t={class:"custom-td w-[30px]"},Yt=["onClick"],Gt=["id"],Jt={class:"custom-td w-[420px] flex justify-between items-center"},Xt={class:"flex items-center w-[50%] flex-1"},Qt=["src"],Zt=["onClick","title"],ea={class:"flex items-center cursor-pointer item-option"},la=["onClick"],ta=["onClick"],aa=["onClick"],na=["onClick"],sa={class:"custom-td w-[120px]"},ia=["onClick"],oa={class:"custom-td w-[150px]"},ca=["title"],ra={class:"custom-td w-[100px]"},ua={class:"custom-td w-[160px]"},da=["onMouseenter","onMouseleave"],ma=["title"],fa=["onClick"],pa=["onClick"],va=["onClick"],ha=["onClick"],ka=["onClick"],ga=["onClick"],xa=["onClick"],ya=["onClick"],wa=["onClick"],Ca=["onClick"],ba=["onClick"],_a=e(b({__name:"index",setup(e,{expose:l}){const{mainWidth:t}=p(),{isHaveScoller:a}=_(ye()),n=De(),{mainHeight:s,headData:i,dataList:o,selectList:c,checkedAll:r,dataList:u,imgIndex:d,showViewer:m,imgList:f,scrollHeight:h,scrollHeightBottom:k,isShowShadow:g,context:x,scrollRef:y,navBtnHeight:w,fileTabActiveData:C}=_(n),{bindMouseDown:b,clickName:R,handleBlurCheck:B,handleEvent:H,handleRightClick:Y,handleCheckFile:G,handleCheckAll:J,handleFileLock:X,handleEnPsView:Q,handleLvPsView:Z,handleSetPs:ee,handleReName:le,openImgView:te,opearationIconClick:ae,onReNameKeyup:ne,sortTable:se,closeImgPreView:he,init:ke,$reset:ge}=n,xe=$(()=>c.value.length>0&&c.value.length!=o.value.length),we=$(()=>new Set(c.value)),Ce=L(Math.random());D(()=>o.value,()=>{Ce.value=Math.random(),b()}),ie(()=>{var e,l,a;(null==(e=y.value)?void 0:e.$el)&&t.value<1140&&(null==(a=null==(l=y.value)?void 0:l.$el)||a.addEventListener("scroll",()=>{var e,l,t,a;if(document.querySelector(".table-head")){document.querySelector(".table-head").scrollLeft=null==(e=y.value)?void 0:e.$el.scrollLeft;const n=null==(l=y.value)?void 0:l.$el.scrollWidth,s=null==(t=y.value)?void 0:t.$el.clientWidth;(null==(a=y.value)?void 0:a.$el.scrollLeft)===n-s?document.querySelectorAll(".custom-operate").forEach(e=>{e.classList.remove("shaow")}):document.querySelectorAll(".custom-operate").forEach(e=>{e.classList.add("shaow")})}}))}),D(()=>t.value,e=>{const l=document.querySelector(".custom-tbody");if(l){const e=36*u.value.length>l.clientHeight;a.value=!!e}},{immediate:!0});const be=$(()=>a.value?10.8:10);return I(ke),oe(ge),l({handleCheckAll:J,selectList:c}),(e,l)=>{const a=fe,n=pe,u=ve,p=ce("input-select"),b=ce("blur-check"),_=ce("bt-loading");return T(),z("div",{class:"h-full files-list relative",onContextmenu:l[4]||(l[4]=q(e=>E(Y)(e,null),["prevent"]))},[j("div",Pt,[j("div",Ut,[j("div",Kt,[V(a,{indeterminate:E(xe),modelValue:E(r),"onUpdate:modelValue":l[0]||(l[0]=e=>re(r)?r.value=e:null),onChange:E(J)},null,8,["indeterminate","modelValue","onChange"])])]),(T(!0),z(M,null,O(E(i),(e,l)=>(T(),z("div",{class:K("files-head-item  ".concat(e.class||""," !w-[").concat(e.width,"rem]  ").concat(E(t)<=1140&&"operation"===e.type?"shaow":"")),style:ue({...e.style,minWidth:"operation"===e.type?E(be)+"rem":"auto"}),key:l,onClick:l=>E(se)(e)},[j("span",null,W(e.label),1),e.sortable?(T(),z("div",qt,[j("i",{class:K("svgtofont-el-caret-top text-medium leading-[.6rem] hover:text-[var(--el-color-primary-light-3)] text-disabled ".concat("asc"===e.sort?"!text-primary":""))},null,2),j("i",{class:K("svgtofont-el-caret-bottom text-medium leading-[.8rem] hover:text-[var(--el-color-primary-light-3)] text-disabled ".concat("desc"===e.sort?"!text-primary":""))},null,2)])):F("",!0)],14,Ht))),128))]),P((T(),S(E(Tl),{key:E(Ce),class:K(["custom-tbody scrollTable relative",{"shadow-top":E(h)===E(k)&&E(g),"shadow-bottom":0===E(h)&&E(g),"shadow-bottom-top":E(h)>0&&E(h)<E(k)&&E(g)}]),style:ue("height:".concat(E(s)-(E(w)||64)-230,"px")),items:E(o),"item-size":36,buffer:500,"emit-update":!0,"key-field":"vid",ref_key:"scrollRef",ref:y},{default:N(({item:e})=>[j("div",{class:K("custom-tr flex ".concat(E(we).has(e.path)?"row-checked":"")),onClick:l=>E(H)(l,e),onTouchend:l=>E(H)(l,e),onContextmenu:q(l=>E(Y)(l,e),["prevent"])},[j("div",$t,[j("div",{class:"custom-checkbox",onClick:l=>E(G)(e)},[j("i",{id:"vid-"+e.vid,class:"checkbox--icon"},null,8,Gt)],8,Yt)]),j("div",Jt,[j("div",Xt,[e.isSmallImage?(T(),z("img",{key:0,src:e.isSmallImage,class:"w-[2.4rem] h-[2.4rem]"},null,8,Qt)):(T(),z("i",{key:1,class:K("icon-bg ".concat(["zip","rar","7z","gz","tar.gz","tgz","war"].includes(e.ext)?"compress":e.ext,"-icon"))},null,2)),j("span",{class:K("cursor-pointer hover:text-primary truncate max-w-[84%] ml-[4px] fileName ".concat(e.isReName?"hidden":"")),onClick:l=>E(R)(e),title:e.fileName+e.isLink},W(e.fileName+e.isLink),11,Zt),e.isReName?P((T(),S(n,{key:2,modelValue:e.fileName,"onUpdate:modelValue":l=>e.fileName=l,class:"ml-8px",onKeydown:l[1]||(l[1]=de(q(()=>{},["stop"]),["native"])),onKeyup:de(l=>E(ne)(e),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])),[[p],[b,E(B)]]):F("",!0)]),P(j("div",ea,[e.isSync?(T(),z("span",{key:0,class:"btlink",onClick:l[2]||(l[2]=e=>E(kl)({name:"rsync"}))},W("modules"===e.isSync?"文件同步接收端":"文件同步发送端"),1)):F("",!0),"bt_split_json"===e.ext?(T(),z("span",{key:1,class:"btlink ml-8px",onClick:l=>E(el)(e)},"[文件合并]",8,la)):F("",!0),e.isShare?(T(),z("img",{key:2,src:nt,class:"foot-btn field-share-icon",onClick:l=>E(ae)(e,"share")},null,8,ta)):F("",!0),e.isFav?(T(),z("img",{key:3,src:st,class:"foot-btn field-favorite-icon",onClick:l=>E(ae)(e,"favorite")},null,8,aa)):F("",!0),e.isTop?(T(),z("img",{key:4,src:it,class:"foot-btn field-top-icon",onClick:l=>E(ae)(e,"top")},null,8,na)):F("",!0)],512),[[U,!e.isReName]])]),j("div",sa,[j("div",{class:"tamper-icon-item cursor-pointer",onClick:l=>E(X)(e)},[e.isLock?(T(),z(M,{key:0},[l[5]||(l[5]=j("span",{class:"btlink"},"受保护",-1)),l[6]||(l[6]=j("img",{src:ot,class:"tamper-file-lock"},null,-1))],64)):(T(),z(M,{key:1},[l[7]||(l[7]=j("span",null,"未保护",-1)),l[8]||(l[8]=j("img",{src:ct,class:"tamper-file-unlock"},null,-1))],64))],8,ia)]),j("div",oa,[j("span",{class:"truncate inline-block w-full",title:e.rootLevel+"/"+e.user},W(e.rootLevel+"/"+e.user),9,ca)]),j("div",ra,["dir"===e.type?(T(),S(Ot,{key:0,row:e,status:e.isDirComputed,class:"size-link"},null,8,["row","status"])):(T(),z(M,{key:1},[A(W(E(v)(e.size)),1)],64))]),j("div",ua,[j("span",null,W(e.time),1)]),j("div",{class:"custom-td min-w-[20rem]",onMouseenter:l=>E(Q)(e),onMouseleave:l=>E(Z)(l,e)},[j("span",{class:K({hidden:e.isPsEdit,"ml-[.1rem] w-[18rem] truncate inline-block":!0}),title:e.ps},W(e.ps),11,ma),e.isPsEdit?(T(),S(n,{key:0,modelValue:e.ps,"onUpdate:modelValue":l=>e.ps=l,onBlur:l=>E(ee)(e),onKeyup:l[3]||(l[3]=de(e=>e.target.blur(),["enter"]))},null,8,["modelValue","onUpdate:modelValue","onBlur"])):F("",!0)],40,da),j("div",{class:K("custom-operate custom-td flex-1 justify-end min-w-[30.4rem] file-action sticky -right-2px bg-inherit  ".concat(E(t)<=1140?"shaow":""))},[j("div",{class:K(" ".concat(E(t)<=1140?"":"hidden"," "))},["text"===e.icon&&e.isFile?(T(),z("a",{key:0,class:"btlink",onClick:l=>E(We)(e)},"编辑",8,fa)):F("",!0),"images"===e.icon&&e.isFile?(T(),z("a",{key:1,class:"btlink",onClick:l=>E(te)(e)},"预览",8,pa)):F("",!0),"video"===e.icon&&e.isFile?(T(),z("a",{key:2,class:"btlink",onClick:l=>E(gl)(e)},"播放",8,va)):F("",!0),j("a",{class:"btlink",onClick:l=>E(al)(e,"copy")},"复制",8,ha),j("a",{class:"btlink",onClick:l=>E(al)(e,"cut")},"剪切",8,ka),j("a",{class:"btlink",onClick:l=>E(le)(e)},"重命名",8,ga),j("a",{class:"btlink",onClick:l=>E(tl)(e,"auth")},"权限",8,xa),j("a",{class:"btlink",onClick:l=>E(sl)(e)},"压缩",8,ya),"compress"===e.icon?(T(),z("a",{key:3,class:"btlink",onClick:l=>E(ol)(e)},"解压",8,wa)):F("",!0),j("a",{class:"btlink",onClick:l=>E(nl)(e,()=>{c.value=[]})},"删除",8,Ca),j("a",{class:"btlink",onClick:l=>E(Y)(l,e)},[...l[9]||(l[9]=[A(" 更多 ",-1),j("span",{class:"svgtofont-el-arrow-down !text-small align-bottom"},null,-1)])],8,ba)],2)],2)],42,Wt)]),_:1},8,["style","items","class"])),[[_,E(C).loading],[_,"正在加载文件列表，请稍后...","title"]]),0===E(o).length?(T(),z("div",{key:0,class:"flex justify-center items-center absolute left-[45%] top-0",style:ue("height:".concat(E(s)-(E(w)||64)-220-36,"px"))},[V(u,{description:"暂无数据"})],4)):F("",!0),V(ht,{ref_key:"context",ref:x},null,512),E(m)?(T(),S(E(me),{key:1,"z-index":1e4,onClose:E(he),initialIndex:E(d),"url-list":E(f)},null,8,["onClose","initialIndex","url-list"])):F("",!0)],32)}}}),[["__scopeId","data-v-41620a74"]]),La=De(),{mainWidth:Ia,mainHeight:Ra}=p(),{dataList:Ta,selectList:Sa,navBtnHeight:Na}=_(La),{handleEvent:Ea,watchSelectListLength:za}=La,Va=L([]),Aa=L(!1),Fa=L(null),Ma=L(!1),Ba=L({x:0,y:0}),Da=L(null),ja=L(null),Oa=L(0),Pa=L(!1),Ua=L(null),Ka=L(!1),Ha=L(0),qa=L(0),Wa=L(null),$a=$(()=>{const e=Ia.value-32,l=Math.floor((Ia.value-32)/100);return(e-100*l)/(l/2)+2}),Ya=$(()=>{const e=Ra.value-(Na.value||64)-193,l=Math.floor((Ia.value-32)/100);return Math.floor(e/100)*(l-1)}),Ga=()=>{if(!Pa.value&&Va.value.length!==Ta.value.length){if(Pa.value=!0,Va.value.length<Ta.value.length)for(let e=0;e<Ya.value;e++)Oa.value<Ta.value.length&&(Va.value.push(Ta.value[Oa.value]),Oa.value++);Pa.value=!1}},Ja=(e,l)=>{if(Ma.value)return;e.stopPropagation(),e.preventDefault();const t=e,a=t.ctrlKey||t.metaKey,n=t.shiftKey;if(a){const e=Sa.value.indexOf(l.path);Sa.value=-1===e?[...Sa.value,l.path]:Sa.value.filter(e=>e!==l.path),Ua.value=l}else if(n&&Ua.value){const e=Ta.value.findIndex(e=>e.path===l.path),t=Ta.value.findIndex(e=>e.path===Ua.value.path),a=Math.min(e,t),n=Math.max(e,t);Sa.value=Ta.value.slice(a,n+1).map(e=>e.path)}else Sa.value=[l.path],Ua.value=l;Ea(e,l),za()},Xa=e=>{if(0!==e.button)return;const l=Wa.value;if(!l)return;const t=l.getBoundingClientRect();if(!(e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom)){if(Ma.value=!0,Ha.value=l.scrollTop,qa.value=l.scrollTop,Ba.value={x:e.clientX-t.left,y:e.clientY-t.top+l.scrollTop},Da.value){const l=Da.value.style;l.display="block",l.left="".concat(e.clientX-t.left,"px"),l.top="".concat(e.clientY-t.top,"px"),l.width="0",l.height="0"}if(!e.ctrlKey&&!e.metaKey){e.target.closest(".icon-file-item")||(Sa.value=[],Ua.value=null)}document.addEventListener("mousemove",Qa),document.addEventListener("mouseup",en)}},Qa=e=>{if(!Ma.value||!Da.value||!Wa.value)return;const l=Wa.value,t=l.getBoundingClientRect();if(e.clientY-t.top<80){const a=Math.ceil((80-(e.clientY-t.top))/4);l.scrollTop-=Math.min(a,20)}else if(t.bottom-e.clientY<80){const a=Math.ceil((80-(t.bottom-e.clientY))/4);l.scrollTop+=Math.min(a,20)}qa.value=l.scrollTop;const a=e.clientX-t.left,n=e.clientY-t.top+qa.value,s=Math.min(Ba.value.x,a),i=Math.min(Ba.value.y,n),o=Math.abs(a-Ba.value.x),c=Math.abs(n-Ba.value.y),r=Da.value.style;r.left="".concat(s,"px"),r.top="".concat(i-qa.value,"px"),r.width="".concat(o,"px"),r.height="".concat(c,"px"),Ka.value||(Ka.value=!0,requestAnimationFrame(()=>{ln(s,i,o,c,e),Ka.value=!1}))},Za=()=>{const e=Wa.value;e&&Ma.value&&Da.value&&(qa.value=e.scrollTop)},en=e=>{if(Ma.value=!1,Da.value&&(Da.value.style.display="none",Da.value.style.width="0",Da.value.style.height="0"),Sa.value.length>0){const e=Sa.value[Sa.value.length-1];Ua.value=Ta.value.find(l=>l.path===e)}document.removeEventListener("mousemove",Qa),document.removeEventListener("mouseup",en),za()},ln=(e,l,t,a,n)=>{if(!Wa.value)return;const s=Wa.value,i=s.getBoundingClientRect(),o=e,c=l,r=e+t,u=l+a,d=new Set,m=s.getElementsByClassName("icon-file-item");for(let f=0;f<m.length;f++){const e=m[f],l=e.getBoundingClientRect(),t={left:l.left-i.left,top:l.top-i.top+s.scrollTop,right:l.right-i.left,bottom:l.bottom-i.top+s.scrollTop};if(!(r<t.left||o>t.right||u<t.top||c>t.bottom)){const l=e.getAttribute("data-filename"),t=Ta.value.find(e=>e.fileName===l);t&&d.add(t.path)}}if(n.ctrlKey||n.metaKey){const e=new Set(Sa.value);d.forEach(l=>e.add(l)),Sa.value=Array.from(e)}else Sa.value=Array.from(d);za()},tn=e=>{(e.ctrlKey||e.metaKey)&&"a"===e.key.toLowerCase()?(e.preventDefault(),Sa.value=Ta.value.map(e=>e.path)):"Escape"===e.key&&(Sa.value=[],Ua.value=null),za()},an=()=>{window.addEventListener("keydown",tn)},nn=()=>{document.removeEventListener("mousemove",Qa),document.removeEventListener("mouseup",en),window.removeEventListener("keydown",tn)},sn={class:"flex flex-col"},on={class:"flex items-center"},cn={class:"max-w-[40rem] inline-block truncate"},rn={key:0},un={key:1},dn={key:2},mn=["data-filename","onTouchend","onClick","onContextmenu"],fn=["src"],pn=["onClick","title"],vn={class:"flex flex-col items-center cursor-pointer icon-option"},hn=["onClick"],kn=["onClick"],gn=["onClick"],xn=["onClick"],yn={key:0,src:ot,class:"tamper-file-lock"},wn=b({__name:"index",setup(e){const l=De(),{mainHeight:t,dataList:a,selectList:n,imgIndex:s,showViewer:i,imgList:o,context:c,navBtnHeight:r}=_(l),{clickName:u,handleBlurCheck:d,handleEvent:m,handleRightClick:f,handleFileLock:p,onReNameKeyup:h,closeImgPreView:k,opearationIconClick:g}=l;return D(()=>a.value,()=>(Va.value=[],Oa.value=0,void Ga()),{immediate:!0}),he(Wa,async()=>Ga(),{distance:15}),I(an),oe(nn),(e,l)=>{const x=pe,y=H,w=ve,C=ce("input-select"),b=ce("blur-check");return T(),z("div",{ref_key:"containerRef",ref:ja,class:"files-icon-wrapper h-full",onMousedown:l[3]||(l[3]=(...e)=>E(Xa)&&E(Xa)(...e)),onContextmenu:l[4]||(l[4]=q(e=>E(f)(e,null),["prevent"]))},[j("div",{class:"files-icon-scroll",ref_key:"scrollContainerRef",ref:Wa,onScrollPassive:l[1]||(l[1]=(...e)=>E(Za)&&E(Za)(...e)),onMousedown:l[2]||(l[2]=(...e)=>E(Xa)&&E(Xa)(...e))},[j("div",{class:"flex items-start files-icon flex-wrap content-start",style:ue("column-gap:".concat(E($a),"px;row-gap:10px"))},[(T(!0),z(M,null,O(E(Va),(e,t)=>(T(),S(y,{effect:"dark","show-after":1e3,placement:"right",key:t,disabled:e.isReName},{content:N(()=>[j("div",sn,[j("p",on,[l[5]||(l[5]=A(" 名称：",-1)),j("span",cn,W(e.fileName),1)]),j("p",null,"权限："+W(e.rootLevel+"/"+e.user),1),"dir"!==e.type?(T(),z("p",rn,"大小："+W(E(v)(e.size)),1)):F("",!0),j("p",null,"修改时间："+W(e.time),1),e.ps?(T(),z("p",un,[l[6]||(l[6]=A(" 备注：",-1)),j("span",{class:K({hidden:e.isPsEdit,"ml-[.1rem] w-[18rem] truncate inline-block":!0})},W(e.ps),3)])):F("",!0),j("p",null,[l[7]||(l[7]=A(" 企业级防篡改：",-1)),j("span",null,W(e.isLock?"受保护":"未保护"),1)]),e.isSync?(T(),z("p",dn,W("modules"===e.isSync?"文件同步：接收端":"文件同步：发送端"),1)):F("",!0)])]),default:N(()=>{var t;return[j("div",{class:K(["icon-file-item cursor-pointer",{"icon-file-active":E(n).includes(e.path),dragging:E(Aa)&&(null==(t=E(Fa))?void 0:t.path)===e.path}]),"data-filename":e.fileName,onTouchend:l=>E(m)(l,e),onClick:l=>E(Ja)(l,e),onContextmenu:q(l=>E(f)(l,e),["prevent"])},[e.isSmallImage?(T(),z("img",{key:0,src:e.isSmallImage,class:"w-[4.4rem] h-[4.4rem] cursor-pointer"},null,8,fn)):(T(),z("i",{key:1,class:K("icon-file icon-bg ".concat(["zip","rar","7z","gz","tar.gz","tgz","war"].includes(e.ext)?"compress":e.ext,"-icon "))},null,2)),j("span",{onClick:l=>E(u)(e),class:K("fileName  ".concat(e.isReName?"!hidden":"")),title:e.fileName+e.isLink},W(e.fileName+e.isLink),11,pn),e.isReName?P((T(),S(x,{key:2,modelValue:e.fileName,"onUpdate:modelValue":l=>e.fileName=l,class:"mt-[4px]",onKeydown:l[0]||(l[0]=de(q(()=>{},["stop"]),["native"])),onKeyup:de(l=>E(h)(e),["enter","native"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])),[[C],[b,E(d)]]):F("",!0),P(j("div",vn,[e.isShare?(T(),z("img",{key:0,src:nt,title:"外链分享",class:"field-icon w-[16px] h-[16px]",onClick:l=>E(g)(e,"share")},null,8,hn)):F("",!0),e.isFav?(T(),z("img",{key:1,src:st,title:"收藏文件",class:"field-icon field-favorite-icon",onClick:l=>E(g)(e,"favorite")},null,8,kn)):F("",!0),e.isTop?(T(),z("img",{key:2,src:it,title:"置顶",class:"field-icon !w-[18px] !h-[18px]",onClick:l=>E(g)(e,"top")},null,8,gn)):F("",!0)],512),[[U,!e.isReName]]),e.isReName?F("",!0):(T(),z("div",{key:3,class:"absolute bottom-3px right-[2px] cursor-pointer p-2px rounded-base hover:bg-[rgba(var(--el-color-primary-rgb),0.2)]",onClick:l=>E(p)(e)},[e.isLock?(T(),z("img",yn)):F("",!0)],8,xn))],42,mn)]}),_:2},1032,["disabled"]))),128)),0===E(a).length?(T(),z("div",{key:0,class:"flex justify-center items-center absolute left-[45%] top-0",style:ue("height:".concat(E(t)-(E(r)||64)-220-36,"px"))},[V(w,{description:"暂无数据"})],4)):F("",!0)],4)],544),P(j("div",{ref_key:"selectionBoxRef",ref:Da,class:"selection-box"},null,512),[[U,E(Ma)]]),V(ht,{ref_key:"context",ref:c},null,512),E(i)?(T(),S(E(me),{key:0,onClose:E(k),initialIndex:E(s),"url-list":E(o)},null,8,["onClose","initialIndex","url-list"])):F("",!0)],544)}}}),Cn={class:"flex px-12px pt-12px justify-between"},bn={class:"flex items-center"},_n={class:"mr-[1rem]"},Ln={key:1,class:"svgtofont-el-loading animate-spin"},In={key:2,class:"cursor-pointer",style:{color:"green"}},Rn={class:""},Tn=e(b({__name:"index",setup(e){const l=ye(),{mainHeight:t,fileTabActiveData:a,dirLength:n,fileLength:s,navBtnHeight:i,listView:o,btnPopover:c,size:r,sizeShow:u,sizeLoad:d,dataList:m}=_(l),{refreshFilesList:f,unbindKeydown:p,sizeComputed:v,checkRoot:h,initMain:w}=l,C=k(),b=L();return ie(()=>{b.value&&b.value.addEventListener("scroll",()=>{})}),I(async()=>{var e;w();const l=g("dirCalcPath");if(l){x("dirCalcPath");try{const t=await xl({path:l});!1!==t.status&&"done"===(null==(e=t.data)?void 0:e.status)||setTimeout(()=>{C.error("有未完成的目录大小计算任务，请稍后再试！")},200)}catch(t){}}}),oe(()=>{p()}),(e,l)=>{const m=y,p=se,k=Rl,g=ce("bt-loading");return T(),z("div",{class:"file-main-view overflow-auto overflow-y-hidden",ref_key:"boxScroll",ref:b},[V(ke,{name:"fade",mode:"out-in"},{default:N(()=>[P((T(),z("div",{class:"relative w-full",style:ue({height:"".concat(E(t)-(E(i)||64)-193,"px")})},["list"==E(a).type?(T(),S(_a,{key:0,ref_key:"listView",ref:o,class:"w-full"},null,512)):F("",!0),"icon"==E(a).type?(T(),S(wn,{key:1,ref:"iconView",class:"w-full"},null,512)):F("",!0)],4)),[[g,E(a).loading],[g,"正在加载中，请稍后...","title"]])]),_:1}),j("div",Cn,[j("div",bn,[j("span",_n,"共"+W(E(n))+"个目录，"+W(E(s))+"个文件，文件大小",1),V(p,{trigger:"hover",placement:"top-start",width:"260","popper-class":E(c)?"popper-danger whitespace-pre-wrap !transition-none":"whitespace-pre-wrap",content:E(c)?"当前目录为系统根目录（/）,执行获取文件大小将占用大量磁盘IO,将导致服务器运行缓慢。":"安装《堡塔硬盘分析工具》可以一键扫描所有目录大小 "},{reference:N(()=>[j("div",{onClick:l[0]||(l[0]=(...e)=>E(v)&&E(v)(...e)),onMouseover:l[1]||(l[1]=(...e)=>E(h)&&E(h)(...e))},[E(u)||E(d)?F("",!0):(T(),S(m,{key:0},{default:N(()=>[...l[5]||(l[5]=[A("计算",-1)])]),_:1})),E(d)?(T(),z("span",Ln)):F("",!0),E(u)&&!E(d)?(T(),z("span",In,W(E(r)),1)):F("",!0)],32)]),_:1},8,["popper-class","content"])]),j("div",Rn,[V(k,{page:E(a).param.p,"onUpdate:page":l[2]||(l[2]=e=>E(a).param.p=e),row:E(a).param.showRow,"onUpdate:row":l[3]||(l[3]=e=>E(a).param.showRow=e),rowList:[100,500,1e3,1500,2e3],total:E(a).total,onChange:l[4]||(l[4]=e=>E(f)())},null,8,["page","row","total"])])])],512)}}}),[["__scopeId","data-v-a959a089"]]),Sn={class:"file-manager"},Nn={class:"module-ui file-operation-area relative"},En={class:"nav"},zn={class:"nav-path"},Vn={class:"path-input"},An={class:"fold-dir-list"},Fn=["onClick"],Mn=["onClick"],Bn={class:"path-name"},Dn=["onClick"],jn={class:"fold-dir-list"},On=["onClick"],Pn={class:"navSearch"},Un={class:"absolute right-[5.4rem] top-0 flex items-center"},Kn=e(b({__name:"index",setup(e){const l=ye(),{mainHeight:t,mainWidth:a,navBtnHeight:n,disabledCutTab:s,dirPath:i,pathInputRef:o,pathInputMode:c,pathListGroup:r,more:u,searchVal:m,searchHistory:f,searchRef:p,isChildren:v}=_(l),{$reset:h,refreshFilesList:k,searchEvent:x,handleDragOff:y,refreshList:b,cutPathInputMode:R,cutDirPath:S,getCurrentFoldDirList:A,goBack:F,init:$}=l,Y=L(),G=L(g("Path"));return D(()=>G.value,e=>{B(()=>{e?Cl(e):k()})},{immediate:!0}),D(()=>a.value,e=>{B(()=>{var e;const l=document.querySelector(".nav-btn"),t=(null==l?void 0:l.offsetHeight)||0;n.value=t,null==(e=Y.value)||e.watchWindowResize()})}),D(()=>c.value,()=>{c.value||B(()=>{var e;null==(e=o.value)||e.select()})}),I(()=>{$(),B(()=>{d(()=>import("./index122.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})}),oe(h),(e,l)=>{const t=H,n=ve,d=w,h=C,g=fe,_=xe;return T(),z("div",Sn,[j("div",Nn,[j("div",{class:"h-full w-full flex flex-col relative",onDragenter:l[11]||(l[11]=q(()=>{},["prevent"])),onDragover:l[12]||(l[12]=q(e=>E(y)(e),["prevent"]))},[V(Pl,{ref_key:"filesTabs",ref:Y},null,512),j("div",En,[j("div",zn,[j("div",{class:"back rounded-l-large relative",onClick:l[0]||(l[0]=(...e)=>E(F)&&E(F)(...e))},[j("i",{class:K(["svgtofont-el-back",{disabledBack:E(s)}])},null,2)]),j("div",Vn,[P(j("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>re(i)?i.value=e:null),ref_key:"pathInputRef",ref:o,type:"text",class:"h-full w-full pl-8px",onBlur:l[2]||(l[2]=e=>E(R)(!0)),onKeydown:l[3]||(l[3]=q(()=>{},["stop"])),onKeyup:l[4]||(l[4]=de(e=>E(S)(E(i),!0),["enter"]))},null,544),[[ge,E(i)],[U,!E(c)]]),P(j("div",{class:"path-list-group",onClick:l[6]||(l[6]=e=>E(R)(!1))},[P(j("div",{class:"svgtofont-el-arrow-left font-bold px-[.2rem] h-full leading-[2.9rem] cursor-pointer border-l border-r border-lighter relative hover:border-darker hover:bg-light",onClick:l[5]||(l[5]=q(e=>E(u).showUl=!0,["stop"]))},[P(j("ul",An,[(T(!0),z(M,null,O(E(u).list,(e,a)=>(T(),z("li",{class:"fold-dir-item",key:a},[V(t,{effect:"dark",content:e.path,placement:"right","show-after":500},{default:N(()=>[j("div",{class:"w-full flex items-center",onClick:q(l=>E(S)(e.path),["stop"])},[l[13]||(l[13]=j("span",{class:"dir-icon flex-shrink-0 !h-[1.6rem]"},null,-1)),j("span",null,W(e.name),1)],8,Fn)]),_:2},1032,["content"])]))),128))],512),[[U,E(u).showUl]])],512),[[U,E(u).showMore]]),(T(!0),z(M,null,O(E(r),(e,a)=>P((T(),z("div",{key:a,class:"path-group-item",onClick:q(l=>E(S)(e.path),["stop"])},[V(t,{effect:"dark",content:e.name,placement:"bottom","show-after":500},{default:N(()=>[j("span",Bn,W(e.name),1)]),_:2},1032,["content"]),j("div",{class:"svgtofont-el-arrow-right path-name-icon",onClick:q(l=>E(A)(e.path,a),["stop"])},[P((T(),z("ul",jn,[(T(!0),z(M,null,O(e.list,(e,a)=>(T(),z("li",{class:"fold-dir-item",key:a},[V(t,{effect:"dark",content:e.path,placement:"right","show-after":500},{default:N(()=>[j("div",{class:"w-full flex items-center",onClick:q(l=>E(S)(e.path),["stop"])},[l[14]||(l[14]=j("span",{class:"dir-icon flex-shrink-0 !h-[1.6rem]"},null,-1)),j("span",null,W(e.name),1)],8,On)]),_:2},1032,["content"])]))),128)),P(V(n,{"image-size":60,description:"暂无数据"},null,512),[[U,!e.list.length]])])),[[U,e.showFold],[_,e.loading]])],8,Dn)],8,Mn)),[[U,e.show]])),128))],512),[[U,E(c)]])]),j("span",{class:"refresh rounded-r-large",onClick:l[7]||(l[7]=(...e)=>E(b)&&E(b)(...e))},[j("i",{class:K({"svgtofont-el-refresh-right":!E(s),"svgtofont-el-loading cursor-not-allowed animate-spin":E(s)})},null,2)]),P(j("div",{class:"flex items-center ml-8px w-[10rem]",onClick:l[8]||(l[8]=e=>E(yl)({name:"文件管理",type:21,isCard:!0}))},[...l[15]||(l[15]=[j("i",{class:"svgtofont-desired text-medium"},null,-1),j("span",{class:"bt-link"},"需求反馈",-1)])],512),[[U,E(a)>1280]])]),j("div",Pn,[V(h,{disabledPopover:!1,class:"!w-[30rem]",ref_key:"searchRef",ref:p,modelValue:E(m),"onUpdate:modelValue":l[9]||(l[9]=e=>re(m)?m.value=e:null),onSearch:E(x),placeholder:"搜索文件/目录",clearable:!1},{default:N(()=>[V(d,{list:{historyList:E(f),recommendList:E(wl)},name:"files",keys:"get_list",onUpdate:E(k),onSearch:E(x)},null,8,["list","onUpdate","onSearch"])]),_:1},8,["modelValue","onSearch"]),j("div",Un,[V(g,{modelValue:E(v),"onUpdate:modelValue":l[10]||(l[10]=e=>re(v)?v.value=e:null),class:""},{default:N(()=>[...l[16]||(l[16]=[j("span",{class:"text-tertiary"},"包含子目录",-1)])]),_:1},8,["modelValue"])])])]),V(at),V(Tn)],32)])])}}}),[["__scopeId","data-v-b3e274f0"]]),Hn=Object.freeze(Object.defineProperty({__proto__:null,default:Kn},Symbol.toStringTag,{value:"Module"}));export{rt as F,ut as a,Hn as i};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
