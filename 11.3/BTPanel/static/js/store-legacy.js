!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function o(e,a,u,i){var o=a&&a.prototype instanceof c?a:c,l=Object.create(o.prototype);return n(l,"_invoke",function(e,n,a){var u,i,o,c=0,l=a||[],f=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return u=e,i=0,o=t,v.n=n,s}};function p(e,n){for(i=e,o=n,r=0;!f&&c&&!a&&r<l.length;r++){var a,u=l[r],p=v.p,d=u[2];e>3?(a=d===n)&&(o=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=t):u[0]<=p&&((a=e<2&&p<u[1])?(i=0,v.v=n,v.n=u[1]):p<d&&(a=e<3||u[0]>n||n>d)&&(u[4]=e,u[5]=n,v.n=d,i=0))}if(a||e>1)return s;throw f=!0,n}return function(a,l,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),i=l,o=d;(r=i<2?t:o)||!f;){u||(i?i<3?(i>1&&(v.n=-1),p(i,o)):v.n=o:v.v=o);try{if(c=2,u){if(i||(a="next"),r=u[a]){if(!(r=r.call(u,o)))throw TypeError("iterator result is not an object");if(!r.done)return r;o=r.value,i<2&&(i=0)}else 1===i&&(r=u.return)&&r.call(u),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=t}else if((r=(f=v.n<0)?o:e.call(n,v))!==s)break}catch(r){u=t,i=1,o=r}finally{c=1}}return{value:r,done:f}}}(e,u,i),!0),l}var s={};function c(){}function l(){}function f(){}r=Object.getPrototypeOf;var v=[][u]?r(r([][u]())):(n(r={},u,function(){return this}),r),p=f.prototype=c.prototype=Object.create(v);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=f,n(p,"constructor",f),n(f,"constructor",l),l.displayName="GeneratorFunction",n(f,i,"GeneratorFunction"),n(p),n(p,i,"Generator"),n(p,u,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:o,m:d}})()}function n(e,t,r,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}n=function(e,t,r,a){function i(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?u?u(e,t,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},n(e,t,r,a)}function t(e,n,t,r,a,u,i){try{var o=e[u](i),s=o.value}catch(e){return void t(e)}o.done?n(s):Promise.resolve(s).then(r,a)}function r(e){return function(){var n=this,r=arguments;return new Promise(function(a,u){var i=e.apply(n,r);function o(e){t(i,a,u,o,s,"next",e)}function s(e){t(i,a,u,o,s,"throw",e)}o(void 0)})}}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return u(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?u(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./store-legacy2.js?v=1763689792","./validator-legacy.js?v=1763689792"],function(n,t){"use strict";var u,i,o,s,c,l,f,v,p,d,m,g,h,y,w,b,k,S,_,T,x,j,P,I,O,U,q,R,E,L,A,H,C,V,D,M,G,F,B,N,$;return{setters:[function(e){u=e.u,i=e.Q,o=e.eQ,s=e.p,c=e.V,l=e.F,f=e.n,v=e.H,p=e.M,d=e.r,m=e.eD,g=e.eL,h=e.eR,y=e.eS,w=e.eT,b=e.bz,k=e.eJ,S=e.eK,_=e.aK,T=e.af,x=e.az,j=e.eE,P=e.U,I=e.bW,O=e.eU,U=e.eV,q=e.eW,R=e.eX,E=e.eY,L=e.eZ},function(e){A=e.j,H=e.t,C=e.s,V=e.g,D=e.r,M=e.aB,G=e.o},function(e){F=e.H},function(e){B=e.av,N=e.p,$=e.aw}],execute:function(){n("H",A("HOME-HEADER-STORE",function(){var n,A=u(),J=A.panelVersion,z=A.payment,K=A.updatePush,Q=A.panel,W=A.push,X=A.plugin,Y=A.getUpdatePushInfo,Z=A.getOldSenderAlarmListInfo,ee=A.ltdRemarks,ne=(A.proRemarks,H(z.value)),te=ne.bindUser,re=ne.authType,ae=ne.authExpirationTime,ue=F(),ie=C(ue),oe=ie.panelInfo,se=ie.systemInfo,ce=H(oe.value),le=ce.upgrade,fe=ce.currentInfo,ve=V(function(){var e=a(ee.value);return e.length=5,[].concat(a(e),[["other","更多特权>>"]])}),pe=function(){var n=r(e().m(function n(){return e().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,B();case 1:if(!n.v){n.n=2;break}return n.a(2,null);case 2:return n.n=3,i({loading:"正在获取数据，请稍后...",request:o(),success:function(){var n=r(e().m(function n(r){var a;return e().w(function(e){for(;;)switch(e.n){case 0:if(1!==(a=r.data).upgrade){e.n=2;break}return e.n=1,s({title:"修复面板",content:'<div class="flex items-center">\n              <div class="mr-1rem w-[4rem]"><img width="40" src="/static/icons/icon-upgrade.svg"></img></div>\n              <div class="flex-1">\n                <div class="text-medium leading-2.4rem">发现新版本，继续修复面板能修复使用中遇到的各种异常问题</div>\n              </div>\n            </div>\n            <div class="pl-5rem mt-[4px]">\n              <div>最新版本：'.concat(a.cloud.version,"</div>\n              <div>更新时间：").concat(c(1e3*a.cloud.update_time),"</div>\n            </div>"),icon:!1,width:"40rem",isHtml:!0,confirmText:"继续修复"});case 1:i({loading:"正在修复面板，请稍后...",request:o({force:1}),message:!0,success:function(e){l(),e.status&&setTimeout(function(){f({title:"正在".concat("repair"===a.type?"修复":"更新","面板，请耐心等候..."),area:70,compData:{type:"repair"},component:function(){return v(function(){return t.import("./index-legacy23.js?v=1763689792")},void 0,t.meta.url)}})},1500)}}),e.n=3;break;case 2:p.msg({message:'<div style="line-height:22px;">\n              <div>当前已是最新版本</div>\n              <div>当前版本：'.concat(a.local.version,"</div>\n              <div>更新时间：").concat(c(1e3*a.local.update_time),"</div>\n            </div>"),type:"success",dangerouslyUseHTMLString:!0});case 3:return e.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()});case 3:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),de=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)if(0===e.n)return e.a(2,f({title:"历史版本",area:[60,52],component:function(){return v(function(){return t.import("./index-legacy346.js?v=1763689792")},void 0,t.meta.url)}}))},n)}));return function(){return n.apply(this,arguments)}}(),me=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,B();case 1:if(!e.v){e.n=2;break}return e.a(2,null);case 2:return e.a(2,f({title:"重启服务器或者面板",area:[33,11],component:function(){return v(function(){return t.import("./index-legacy192.js?v=1763689792")},void 0,t.meta.url)}}))}},n)}));return function(){return n.apply(this,arguments)}}(),ge=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,B();case 1:if(!e.v){e.n=2;break}return e.a(2,null);case 2:return e.a(2,f({area:50,component:function(){return v(function(){return t.import("./index-legacy347.js?v=1763689792")},void 0,t.meta.url)}}))}},n)}));return function(){return n.apply(this,arguments)}}(),he=Q.value.isDebug,ye=H(oe.value),we=ye.isBeta,be=ye.cloudBeta,ke=ye.isUpgrade,Se=ye.grayscale,_e=D(!1),Te=D(!1),xe=D(""),je=D(!1),Pe=D(null),Ie=D({}),Oe=D({}),Ue=D({phone:"",status:!1}),qe=D({phone:[{validator:function(e,n,t){Ue.value.status?/^1[3456789]\d{9}$/.test(n)||/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(n)?t():t(new Error("请输入正确的手机号码或邮箱")):t()}}],give:[{required:!0,validator:function(e,n,t){0===n.length?t(new Error("请选择至少一种告警方式")):t()},trigger:["blur","change"]}]}),Re=M("popupClose",function(){}),Ee=function(e){return/^1[3456789]\d{9}$/.test(e)?"phone":/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e)?"email":"unknown"},Le=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:K.value.updatePush?De(!K.value.updatePush):i({loading:"正在设置更新提醒，请稍后...",request:m({task_id:K.value.updateTaskId,status:0}),message:!0});case 1:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Ae=function(){var n=r(e().m(function n(t){var r,a,u,i,o;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=t?"升级Linux测试版":"切换到正式版",u=t?"请仔细阅读内测升级须知，是否升级Linux测试版？":"是否从测试版切换到正式版？",e.n=1,s({type:"calc",title:a,content:u});case 1:if(r=p.load("正在".concat(a,"，请稍候...")),l(),!he){e.n=3;break}return e.n=2,y();case 2:Te.value=!0;case 3:if(!t){e.n=5;break}return e.n=4,E();case 4:o=e.v,e.n=7;break;case 5:return e.n=6,L();case 6:o=e.v;case 7:if((i=o).status){e.n=8;break}return e.a(2,p.request(i));case 8:e.n=10;break;case 9:return e.p=9,e.v,e.a(2,!1);case 10:return e.p=10,Re(),l(),e.f(10);case 11:return e.a(2,r)}},n,null,[[0,9,10,11]])}));return function(e){return n.apply(this,arguments)}}(),He=function(){var n=r(e().m(function n(r){var a,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"boolean"!=typeof r){e.n=4;break}return e.n=1,s({title:"升级面板",content:"温馨提示：升级面板，有助于面板的BUG修复和功能加强，但不会影响用户的数据，即使面板发生故障，用户数据也不会受到影响。请您放心进行升级。"});case 1:return e.n=2,Ae(r);case 2:if(a=e.v){e.n=3;break}return e.a(2);case 3:e.n=7;break;case 4:if(0===le.value){e.n=6;break}return e.n=5,s({title:"升级面板",content:'<div class="flex items-center">\n            <div class="mr-1rem w-[4rem]"><img width="40" src="/static/icons/icon-upgrade.svg"></img></div>\n              <div class="flex-1">\n                <div class="text-medium leading-2.4rem">升级面板可以修复大部分已知BUG，同时安装最新的功能，用户数据也不会受到影响</div>\n              </div>\n            </div>\n            <div class="pl-5rem mt-[4px]">\n              <div>即将更新到：'.concat(fe.value.version,"</div>\n              <div>更新时间：").concat(c(1e3*fe.value.update_time),"</div>\n            </div>"),icon:!1,width:"40rem",isHtml:!0,confirmText:"继续升级"});case 5:return i({loading:"正在升级面板，请稍后...",request:g({force:!0,version:fe.value.version}),message:!0,success:function(e){l(),e.status&&setTimeout(function(){f({title:"正在更新面板，请耐心等候...",area:70,compData:{type:"upgrade"},component:function(){return v(function(){return t.import("./index-legacy23.js?v=1763689792")},void 0,t.meta.url)}})},1500)}}),e.a(2);case 6:return p.msg({message:'<div style="line-height:22px;">\n              <div>当前已是最新版本</div>\n              <div>当前版本：'.concat(fe.value.version,"</div>\n              <div>更新时间：").concat(c(1e3*fe.value.update_time),"</div>\n            </div>"),type:"success",dangerouslyUseHTMLString:!0}),e.a(2);case 7:return e.n=8,Ve({check:!0});case 8:return e.n=9,h({toUpdate:"yes"});case 9:if(u=e.v,!Te.value){e.n=11;break}return e.n=10,y();case 10:Te.value=!1;case 11:u.status?(p.success({msg:u.msg,onClose:function(){return window.location.reload()}}),setTimeout(function(){window.location.reload()},2e3)):p.error(u.msg),e.n=13;break;case 12:e.p=12,e.v,a&&a.close();case 13:return e.p=13,a&&a.close(),Re(),l(),e.f(13);case 14:return e.a(2)}},n,null,[[0,12,13,14]])}));return function(e){return n.apply(this,arguments)}}(),Ce=function(){var n=r(e().m(function n(t){return e().w(function(n){for(;;)switch(n.n){case 0:if(""!==xe.value){n.n=1;break}throw p.error("还有必填项没有填写哦~"),new Error("还有必填项没有填写哦~");case 1:Pe.value.validate(function(){var n=r(e().m(function n(r){var a,u;return e().w(function(e){for(;;)switch(e.n){case 0:r&&(a=Ee(Ue.value.phone),u={questions:JSON.stringify({22:xe.value}),product_type:18,software_name:1,rate:0},Ue.value.status&&(u.feedback=JSON.stringify("phone"===a?{phone:Ue.value.phone}:{email:Ue.value.phone})),i({loading:"正在提交问卷，请稍后...",request:b(u),success:function(e){e.status&&($(),t())}}));case 1:return e.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}());case 2:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),Ve=function(){var n=r(e().m(function n(){var t,r,a,u,i,o,s,c,l,f,v,p,d,m,g,h=arguments;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.p=1,e.n=2,k(t);case 2:return r=e.v,a=r.data,u=window.vite_public_version,i=null==u?void 0:u.split(".").pop(),o=Number.parseInt(i).toString()===i&&2===i.length,s=a.msg,c=s.is_beta,l=s.version,f=s.beta,v=s.downUrl,p=s.updateMsg,d=s.uptime,m=s.grayscale_test,be.value=c,we.value=o,Ie.value=f,Oe.value={downUrl:v,updateMsg:p,version:l,uptime:d},Se.value=m,a.status&&(ke.value=S(J.value,we.value?f.version:l)),e.a(2,a);case 3:return e.p=3,g=e.v,_(g),e.a(2,!1)}},n,null,[[1,3]])}));return function(){return n.apply(this,arguments)}}(),De=function(){var n=r(e().m(function n(r){return e().w(function(e){for(;;)switch(e.n){case 0:Ge.value=r||!1,$e.value.switch=!0,f({title:"更新提示",area:50,btn:!0,component:function(){return v(function(){return t.import("./alarm-legacy.js?v=1763689792")},void 0,t.meta.url)}});case 1:return e.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),Me=function(){var n=r(e().m(function n(){var t,r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,_e.value=!0,e.n=1,Ve({check:!0});case 1:if(t=e.v,!T(t)){e.n=2;break}return e.a(2);case 2:!t.status&&x(t.msg)&&(Re(),p.error(t.msg)),e.n=4;break;case 3:e.p=3,r=e.v,_(r);case 4:return e.p=4,_e.value=!1,e.f(4);case 5:return e.a(2)}},n,null,[[0,3,4,5]])}));return function(){return n.apply(this,arguments)}}(),Ge=D(!1),Fe=D(),Be=D(),Ne=D(!1),$e=D({switch:K.value.updatePush,give:[""],option:{}}),Je=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return Ne.value=!0,e.n=1,Z();case 1:Ne.value=!1,$e.value.give=K.value.modulePush,$e.value.option=W.value.config;case 2:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),ze=D(!0),Ke=D(!1),Qe=D(),We=D([]),Xe=G({webServe:!1,mysqlServe:!1,restartServe:!1,serveStart:!1}),Ye=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,s({icon:"warning-filled",title:"重启面板",content:"即将重启面板服务，继续吗？"});case 1:i({loading:"正在重启面板，请稍候...",request:P(),message:!0,success:function(e){e.status&&setTimeout(function(){l(),window.location.reload()},1e3)}});case 2:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Ze=function(){var n=r(e().m(function n(){var t,r,a,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,oe.value.isRestart=!0,We.value.splice(0,We.value.length),ze.value=!1,(r=null===(t=Qe.value)||void 0===t?void 0:t.closest(".el-dialog"))&&(a=r.querySelector(".el-dialog__footer"),r.querySelector(".el-dialog__body").style.height="49rem",a&&(a.style.display="none")),Xe.webServe=!0,e.n=1,I({name:X.value.webserver,type:"stop"});case 1:return Xe.mysqlServe=!0,e.n=2,I({name:"mysqld",type:"stop"});case 2:return Xe.restartServe=!0,e.n=3,O();case 3:Xe.serveStart=!0,en(),e.n=5;break;case 4:e.p=4,u=e.v,_(u);case 5:return e.a(2)}},n,null,[[0,4]])}));return function(){return n.apply(this,arguments)}}(),en=function(){n=setInterval(r(e().m(function t(){var r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,U();case 1:(r=e.v)&&(r.hasOwnProperty("status")||void 0!==r.code)&&(p.success("服务器重启成功!"),setTimeout(function(){l(),window.location.reload()},2e3),clearInterval(n)),e.n=3;break;case 2:e.p=2,a=e.v,_(a);case 3:return e.a(2)}},t,null,[[0,2]])})),3e3)},nn=D(""),tn=function(){var t=r(e().m(function t(){var r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n&&clearTimeout(n),e.n=1,q();case 1:r=e.v,(a=r.data).status||x(a.data)?(nn.value=x(a.data)?a.data:a.msg||"暂无日志",x(a.data)?(p.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:a.msg+"".concat(a.status?"<br>请按 Ctrl+F5 刷新缓存，或等待5s自动刷新！":""),type:a.status?"success":"error",showClose:!a.status,duration:a.status?5e3:0}),a.status&&setTimeout(function(){l(),window.location.reload()},5e3)):n=setTimeout(function(){l(),tn()},2e3)):p.error(a.msg),e.n=3;break;case 2:e.p=2,e.v,n&&clearTimeout(n),n=setTimeout(function(){tn()},2e3);case 3:return e.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),rn=D(!1),an=D([]),un=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i({loading:rn,request:R(),data:[Array,an]});case 1:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}();return{bindUser:te,authType:re,authExpirationTime:ae,systemInfo:se,panelInfo:oe,panelVersion:J,formPhone:Pe,jumpRouter:function(e){d.push({path:"/config/".concat(e)})},histVersionInfoDialog:de,onRepair:pe,restartSeverDialog:me,updateVersionDialog:ge,advantageList:ve,productPayment:function(){N({disablePro:!0,sourceId:300})},loading:_e,isUpgrade:ke,grayscale:Se,isBeta:we,betaInfo:Ie,officialInfo:Oe,update:K,isNPSShow:je,questions:xe,form:Ue,rules:qe,onOpen:Me,submit:Ce,ignoreUpdatEVersion:function(e,n){i({loading:"正在忽略本次更新，请稍后...",request:w({version:e}),message:!0,success:function(e){e.status&&n()}})},getUpdatePushInfo:Y,openUpdateReminder:Le,updateReminderDialog:De,updateVersion:He,alarmRef:Fe,pushMsgRef:Be,msgForm:$e,checkedLoad:Ne,renderPushConfig:Je,refreshAlarmEvent:function(){var e;null===(e=Fe.value)||void 0===e||e.refresh(),p.success("刷新成功")},onCancel:function(){K.value.updatePush=Ge.value},onConfirm:function(n){Be.value.validate(function(){var t=r(e().m(function t(r){var a;return e().w(function(e){for(;;)switch(e.n){case 0:r&&(a={task_data:JSON.stringify({task_data:{tid:"10",type:"panel_update",title:"面板更新提醒",status:$e.value.switch,count:0,interval:600,project:""},status:$e.value.switch,sender:$e.value.give,number_rule:{day_num:0,total:2},time_rule:{send_interval:0,time_range:[0,86399]}}),template_id:"10"},i({loading:"正在提交更新提示，请稍后...",request:j(a),message:!0,success:function(e){n(),Y()}}));case 1:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},showFooter:ze,showServer:Ke,serverRestartRef:Qe,tipsList:We,courseList:Xe,clearRestart:function(){n&&clearInterval(n)},onRestartServer:Ze,onRestartPanel:Ye,logContent:nn,getLog:tn,hisLoading:rn,histVersion:an,getHistoryVersion:un,$reset:function(){je.value=!1,xe.value="",Ue.value={phone:"",status:!1}}}}))}}})}();
