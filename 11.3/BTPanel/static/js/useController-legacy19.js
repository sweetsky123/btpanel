!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function c(t,a,u,o){var c=a&&a.prototype instanceof s?a:s,l=Object.create(c.prototype);return n(l,"_invoke",function(t,n,a){var u,o,c,s=0,l=a||[],f=!1,v={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return u=t,o=0,c=e,v.n=n,i}};function p(t,n){for(o=t,c=n,r=0;!f&&s&&!a&&r<l.length;r++){var a,u=l[r],p=v.p,h=u[2];t>3?(a=h===n)&&(c=u[(o=u[4])?5:(o=3,3)],u[4]=u[5]=e):u[0]<=p&&((a=t<2&&p<u[1])?(o=0,v.v=n,v.n=u[1]):p<h&&(a=t<3||u[0]>n||n>h)&&(u[4]=t,u[5]=n,v.n=h,o=0))}if(a||t>1)return i;throw f=!0,n}return function(a,l,h){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),o=l,c=h;(r=o<2?e:c)||!f;){u||(o?o<3?(o>1&&(v.n=-1),p(o,c)):v.n=c:v.v=c);try{if(s=2,u){if(o||(a="next"),r=u[a]){if(!(r=r.call(u,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,o<2&&(o=0)}else 1===o&&(r=u.return)&&r.call(u),o<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),o=1);u=e}else if((r=(f=v.n<0)?c:t.call(n,v))!==i)break}catch(r){u=e,o=1,c=r}finally{s=1}}return{value:r,done:f}}}(t,u,o),!0),l}var i={};function s(){}function l(){}function f(){}r=Object.getPrototypeOf;var v=[][u]?r(r([][u]())):(n(r={},u,function(){return this}),r),p=f.prototype=s.prototype=Object.create(v);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,n(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,n(p,"constructor",f),n(f,"constructor",l),l.displayName="GeneratorFunction",n(f,o,"GeneratorFunction"),n(p),n(p,o,"Generator"),n(p,u,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:c,m:h}})()}function n(t,e,r,a){var u=Object.defineProperty;try{u({},"",{})}catch(t){u=0}n=function(t,e,r,a){function o(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?u?u(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r:(o("next",0),o("throw",1),o("return",2))},n(t,e,r,a)}function e(t,n,e,r,a,u,o){try{var c=t[u](o),i=c.value}catch(t){return void e(t)}c.done?n(i):Promise.resolve(i).then(r,a)}function r(t){return function(){var n=this,r=arguments;return new Promise(function(a,u){var o=t.apply(n,r);function c(t){e(o,a,u,c,i,"next",t)}function i(t){e(o,a,u,c,i,"throw",t)}c(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./useStore-legacy14.js?v=1763689792"],function(n,e){"use strict";var a,u,o,c,i,s,l,f,v,p;return{setters:[function(t){a=t.u,u=t.R,o=t.p,c=t.V,i=t.M},function(t){s=t.r,l=t.g},function(t){f=t.u,v=t.S},function(t){p=t.S}],execute:function(){var e=f(),h=e.activeType,y=e.siteInfo,g=e.isBindExtranet,m=(e.siteType,v()),d=m.getFileEvent,b=m.saveFileEvent,w=p(),j=w.viewFileHistoryEvent,O=w.recoverFileEvent,S=w.getComposerPathEvent,_=a().plugin,x=n("d",s("config")),E=(n("t",s([{label:"配置文件",name:"config",render:function(){}},{label:"Composer配置文件",name:"composer",render:function(){}}])),n("e",s(""))),T=n("h",s()),F=n("f",s("")),P=l(function(){var t="nodejs"===h.value?"node":h.value,n="php"!==h.value&&"proxy"!==h.value&&"proxy"!==h.value?"".concat(t,"_"):"",e="/www/server/panel/vhost/".concat(_.value.webserver,"/").concat(n).concat(y.value.name,".conf");return"config"===x.value?e.replace(/\/+/g,"/"):k.value}),k=n("c",s(""));s(!1);var G=n("b",s(!1)),C=n("g",function(){var n=r(t().m(function n(e){var r,a;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,G.value=!0,t.n=1,d(e);case 1:r=t.v,a=r.data,E.value=a.data,u(a.historys)&&(T.value=a.historys),G.value=!1,t.n=3;break;case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"获取配置文件失败"});case 3:return t.a(2)}},n,null,[[0,2]])}));return function(t){return n.apply(this,arguments)}}()),q=(n("a",function(t,n){x.value=n,C({path:P.value})}),n("s",r(t().m(function n(){var e,r=arguments;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{data:E.value,encoding:"utf-8",path:P.value},t.p=1,t.n=2,b(e);case 2:t.v.status&&C({path:e.path}),t.n=4;break;case 3:return t.p=3,t.v,t.a(2,{status:!1,msg:"保存文件失败"});case 4:return t.a(2)}},n,null,[[1,3]])}))),n("v",function(){var n=r(t().m(function n(e){var r;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,j({row:e,path:P.value});case 1:return r=t.v,F.value=r.status?r.data:"文件不存在",t.a(2,r);case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"获取文件历史失败"})}},n,null,[[0,2]])}));return function(t){return n.apply(this,arguments)}}()),n("r",function(){var n=r(t().m(function n(e){var r;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,o({title:"恢复历史文件",content:"是否恢复历史文件 ".concat(c(e))});case 1:return t.n=2,O({row:e,path:P.value});case 2:return r=t.v,i.request({status:r.status,msg:r.status?"恢复成功":"恢复失败"}),r.status&&C({path:P.value}),t.a(2,r.status);case 3:t.p=3,t.v;case 4:return t.a(2)}},n,null,[[0,3]])}));return function(t){return n.apply(this,arguments)}}()),n("j",function(){var t=y.value,n=t.project_type,e=t.project_config;t.name;g.value=!(null==e||!e.bind_extranet),["php","html","proxy"].includes(n)&&(g.value=!0),"php"===n&&B()})),B=function(){var n=r(t().m(function n(){var e;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,S(y.value.path);case 1:return(e=t.v).status&&(k.value=e.data),t.a(2,e);case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"获取composer路径失败"})}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}();n("i",r(t().m(function n(){return t().w(function(t){for(;;)switch(t.n){case 0:if(q(),!g.value){t.n=1;break}return t.n=1,C({path:P.value});case 1:return t.a(2)}},n)})))}}})}();
