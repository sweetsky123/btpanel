import{c as a,r as e,x as l,y as s,e as u,C as t,z as n,S as o,A as d,D as r,R as c,U as m,ad as i,H as p,ab as _,aD as f,aF as b}from"./base-lib.js?v=1763689792";import{bK as g}from"./firewall.js?v=1763689792";import{Q as y,b as v,_ as V}from"./utils-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const j={class:"flex flex-col p-[1.6rem]"},q=V(a({__name:"advanced",props:{compData:{default:()=>({config:{minutes:"",scan_count:"",cleanup_days:""}})}},emits:["update:config"],setup(a,{emit:V}){const q=a,w=V,U=e("1"),x=e(),D=e(q.compData.config),k={minutes:[{required:!0,message:"请输入扫描时间",trigger:"blur"}],scan_count:[{required:!0,message:"请输入访问次数",trigger:"blur"}],cleanup_days:[{required:!0,message:"请输入最大天数",trigger:"blur"}]},C=async()=>{await x.value.validate();let a={};"1"===U.value?(a.minutes=D.value.minutes,a.scan_count=D.value.scan_count):a.cleanup_days=D.value.cleanup_days,await y({loading:"正在保存规则，请稍后...",request:g(a),success:e=>{v().request(e),e.status&&w("update:config",a)}})};return(a,e)=>{const g=m,y=i,v=p,V=_,q=f,w=b;return l(),s("div",j,[u(w,{type:"card",modelValue:n(U),"onUpdate:modelValue":e[5]||(e[5]=a=>c(U)?U.value=a:null)},{default:t(()=>[u(q,{label:"拦截规则",name:"1"},{default:t(()=>[u(V,{model:n(D),rules:k,ref_key:"formRef",ref:x,class:"relative w-full","label-position":"right",onSubmit:e[2]||(e[2]=o(()=>{},["prevent"]))},{default:t(()=>[u(y,{prop:"minutes",label:"扫描时间"},{default:t(()=>[u(g,{modelValue:n(D).minutes,"onUpdate:modelValue":e[0]||(e[0]=a=>n(D).minutes=a),class:"form-input"},null,8,["modelValue"]),e[6]||(e[6]=d("span",{class:"ad-unit"},"分钟",-1))]),_:1}),u(y,{prop:"scan_count",label:"访问次数"},{default:t(()=>[u(g,{modelValue:n(D).scan_count,"onUpdate:modelValue":e[1]||(e[1]=a=>n(D).scan_count=a),class:"form-input"},null,8,["modelValue"]),e[7]||(e[7]=d("span",{class:"ad-unit"},"次",-1))]),_:1}),u(y,{label:"",class:"ml-40"},{default:t(()=>[u(v,{type:"primary",onClick:C},{default:t(()=>[...e[8]||(e[8]=[r("保存",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),u(q,{label:"数据清理",name:"2"},{default:t(()=>[u(V,{model:n(D),rules:k,class:"relative w-full","label-position":"right",onSubmit:e[4]||(e[4]=o(()=>{},["prevent"]))},{default:t(()=>[u(y,{prop:"cleanup_days",label:"扫描数据超过"},{default:t(()=>[u(g,{modelValue:n(D).cleanup_days,"onUpdate:modelValue":e[3]||(e[3]=a=>n(D).cleanup_days=a),class:"form-input"},null,8,["modelValue"]),e[9]||(e[9]=d("span",{class:"ad-unit"},"天，将自动清理",-1))]),_:1}),u(y,{class:"ml-40"},{default:t(()=>[u(v,{type:"primary",onClick:C},{default:t(()=>[...e[10]||(e[10]=[r("保存",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-ecb2336d"]]);export{q as default};
