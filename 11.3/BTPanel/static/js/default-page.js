import{c as e,r as a,v as l,I as t,x as s,y as o,e as u,C as n,z as r,R as i,A as d,D as m,G as p,F as c,b1 as v,O as f,J as _,aD as y,aA as j,V as x,am as b,an as g,H as h}from"./base-lib.js?v=1763689792";import{B as V}from"./index119.js?v=1763689792";import{lt as C,Q as w,lu as B,lv as k,aC as q,b as z}from"./utils-lib.js?v=1763689792";import{p as G}from"./useController4.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./ace.js?v=1763689792";import"./validator.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";import"./useController5.js?v=1763689792";import"./site.js?v=1763689792";import"./useStore4.js?v=1763689792";import"./useController6.js?v=1763689792";import"./useMethod5.js?v=1763689792";const U={class:"flex flex-col"},H={class:"flex items-center justify-between mb-[8px]"},O={key:0},A={class:"h-[44rem] w-full"},D=e({__name:"default-page",setup(e,{expose:D}){const E=z(),F=a("index"),I=a(""),R=a(),S=a("utf-8"),J=a(["utf-8","GBK","GB2312","BIG5"]),K=a(!1),M=a(!1),Q=async()=>{try{M.value=!0;const{data:e}=await C({default_type:F.value});I.value=e.data[F.value].data,S.value=e.data[F.value].encoding||"utf-8","404"===F.value&&(K.value=Boolean(e.data.auto_create_404)),M.value=!1}catch(e){}},L=async e=>{M.value=!0,F.value=e,await Q(),M.value=!1},N=e=>{w({loading:"正在设置，请稍后...",request:B({auto_create:e?"1":"0"}),message:!0})},P=async()=>{const e=await k({default_type:F.value,default_body:I.value,encoding:S.value});E.request(e)};return l(()=>{Q()}),D({onRefresh:()=>{F.value="index",Q()}}),(e,a)=>{const l=y,C=q,w=j,B=x,k=b,z=g,D=V,E=h,Q=t("bt-loading");return s(),o("div",U,[u(C,{type:"card",modelValue:r(F),"onUpdate:modelValue":a[0]||(a[0]=e=>i(F)?F.value=e:null),onChange:L},{default:n(()=>[u(l,{label:"新建网站默认页面",name:"index"}),u(l,{label:"404错误页",name:"404",lazy:!0}),u(l,{label:"网站不存在页",name:"not_found",lazy:!0}),u(l,{label:"网站停用后的提示页",name:"stop",lazy:!0})]),_:1},8,["modelValue"]),u(w,{placement:"top",width:"320","popper-class":"white-popover",trigger:"hover",content:"创建网站时会使用页面模板，不会影响已经存在的网站"},{reference:n(()=>[...a[4]||(a[4]=[d("i",{class:"absolute right-[2rem] top-[2.4rem] svgtofont-el-question-filled text-warning !text-medium"},null,-1)])]),_:1}),d("div",H,["404"===r(F)?(s(),o("div",O,[u(B,{modelValue:r(K),"onUpdate:modelValue":a[1]||(a[1]=e=>i(K)?K.value=e:null),onChange:N},{default:n(()=>[...a[5]||(a[5]=[m("创建网站时自动创建404.html页面",-1)])]),_:1},8,["modelValue"])])):p("",!0),a[6]||(a[6]=m(" 提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换 ",-1)),u(z,{class:"!w-[16rem]",modelValue:r(S),"onUpdate:modelValue":a[2]||(a[2]=e=>i(S)?S.value=e:null),onChange:P},{default:n(()=>[(s(!0),o(c,null,v(r(J),e=>(s(),f(k,{key:e,value:e,label:e},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_((s(),o("div",A,[u(D,{ref_key:"aceEditor",ref:R,"is-request":!1,modelValue:r(I),"onUpdate:modelValue":a[3]||(a[3]=e=>i(I)?I.value=e:null),editorOption:r(G)(),saveEvent:P,class:"h-[40rem] w-full"},null,8,["modelValue","editorOption"]),u(E,{class:"flex !mt-[12px]",type:"primary",onClick:P},{default:n(()=>[...a[7]||(a[7]=[m("保存",-1)])]),_:1})])),[[Q,r(M)]])])}}});export{D as default};
