!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",u=n.toStringTag||"@@toStringTag";function i(n,r,a,u){var i=r&&r.prototype instanceof l?r:l,s=Object.create(i.prototype);return o(s,"_invoke",function(n,r,o){var a,u,i,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return a=e,u=0,i=t,p.n=n,c}};function m(n,r){for(u=n,i=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],m=p.p,d=a[2];n>3?(o=d===r)&&(i=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=m&&((o=n<2&&m<a[1])?(u=0,p.v=r,p.n=a[1]):m<d&&(o=n<3||a[0]>r||r>d)&&(a[4]=n,a[5]=r,p.n=d,u=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,d){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,d),u=s,i=d;(e=u<2?t:i)||!f;){a||(u?u<3?(u>1&&(p.n=-1),m(u,i)):p.n=i:p.v=i);try{if(l=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(f=p.n<0)?i:n.call(r,p))!==c)break}catch(e){a=t,u=1,i=e}finally{l=1}}return{value:e,done:f}}}(n,a,u),!0),s}var c={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][a]?e(e([][a]())):(o(e={},a,function(){return this}),e),m=f.prototype=l.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=f,o(m,"constructor",f),o(f,"constructor",s),s.displayName="GeneratorFunction",o(f,u,"GeneratorFunction"),o(m),o(m,u,"Generator"),o(m,a,function(){return this}),o(m,"toString",function(){return"[object Generator]"}),(r=function(){return{w:i,m:d}})()}function o(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}o=function(t,e,n,r){function u(e,n){o(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(u("next",0),u("throw",1),u("return",2))},o(t,e,n,r)}function a(t,e,n,r,o,a,u){try{var i=t[a](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var u=t.apply(e,n);function i(t){a(u,r,o,i,c,"next",t)}function c(t){a(u,r,o,i,c,"throw",t)}i(void 0)})}}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){l(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}System.register(["./utils-lib-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./column-legacy.js?v=1763689792"],function(t,n){"use strict";var o,a,i,l,s,f,p,m,d,v,y,b,g,h,_,w,j,k,O,D,P,S,x,T,E,C,G,A,I,q,F,J,N,V,z,H,L;return{setters:[function(t){o=t.n,a=t.H,i=t.p,l=t.b,s=t.l,f=t.j,p=t.eG,m=t._},function(t){d=t._},function(t){v=t.r,y=t.c,b=t.e,g=t.o,h=t.v,_=t.a8,w=t.I,j=t.x,k=t.y,O=t.C,D=t.D,P=t.B,S=t.z,x=t.J,T=t.K,E=t.A,C=t.O,G=t.G,A=t.R,I=t.n,q=t.H},function(t){F=t.delGroupProject,J=t.getJavaGroupDetail,N=t.groupProjectOperation,V=t.editGroupProject,z=t.groupProjectType,H=t.getGroupLog},function(t){L=t.u}],execute:function(){var M=t("j",v({})),U={class:"p-[2rem]"},B={class:"flex items-center"},K={key:2,class:"ml-[1rem]"},R={class:"p-[2rem]"},$=y({__name:"group-detail",props:{compData:{}},setup:function(t){var m,y=t,$=l(),Q=0,W=null,X=v([{name:"test",status:"test",pid:"test",listen:[]}]),Y=v([]),Z=v("simultaneous"),tt=v(!1),et=v(!0),nt=[{prop:"name",label:"项目名称"},{prop:"pid",label:"PID"},{prop:"status",label:"项目状态",render:function(t){var e="--",n="var(--el-color-primary)";switch(t.project_status){case"succeeded":e="运行中";break;case"failed":e="未运行或运行异常",n="#ef0808";break;case"not_run":e="未运行",n="#ef0808";break;default:e="--",n="#555"}return b("span",{style:"color: ".concat(n,";")},[e])}},{prop:"listen",label:"端口",render:function(t){var e;return b("span",null,[(null===(e=t.listen)||void 0===e?void 0:e.join(","))||"--"])}},L([{onClick:function(t){o({isAsync:!0,title:"项目【".concat(y.compData.group_name,"】检查策略"),area:50,btn:"确定",component:function(){return a(function(){return n.import("./project-check-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:c(c({},t),{},{group_id:y.compData.group_id,refreshEvent:mt})})},title:"检测策略"},{onClick:(m=u(r().m(function t(e,n){var o;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,i({title:"移除项目【".concat(e.name,"】"),width:"35rem",icon:"warning",content:"您真的要将项目【".concat(e.name,"】从本项目组移除吗？")});case 1:return t.n=2,F({group_id:y.compData.group_id,project_id:e.id});case 2:o=t.v,$.request(o),o.status&&(mt(),y.compData.refreshEvent&&y.compData.refreshEvent()),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[0,3]])})),function(t,e){return m.apply(this,arguments)}),title:"从项目组中移除",width:140}])],rt=[{label:"",width:50,render:function(t){return b("i",{class:"svgtofont-icon-drag cursor-move mover iconfont align-middle",title:"拖拽排序"},null)}},{prop:"name",label:"项目名称"},{prop:"pid",label:"PID"},{prop:"port",label:"端口"}],ot=g({start:!1,stop:!1,termination:!1,statusText:""}),at=function(){var t=u(r().m(function t(){return r().w(function(t){for(;;)switch(t.n){case 0:o({title:"【".concat(y.compData.group_name,"】添加项目"),area:50,showFooter:!0,component:function(){return a(function(){return n.import("./group-add-projects-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:{group_id:y.compData.group_id,refreshEvent:function(){mt(),y.compData.refreshEvent&&y.compData.refreshEvent()},projectList:X.value}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),ut=function(t,e){return(e||y.compData).operation_info.includes(t)},it=function(){var t=u(r().m(function t(e){var n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,N({group_id:y.compData.group_id},e);case 1:n=t.v,$.request(n),mt(),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),ct=function(){var t=u(r().m(function t(){return r().w(function(t){for(;;)switch(t.n){case 0:if(X.value.length){t.n=1;break}return $.error("暂无项目数据"),t.a(2);case 1:Y.value=[],Y.value=X.value.map(function(t){return{id:t.id,name:t.name,check_info:t.check_info,level:t.level}}),tt.value=!0,tt.value&&I(function(){var t,e;e=document.querySelector(".level-table .el-table__body-wrapper tbody"),p.create(e,{animation:500,onEnd:(t=u(r().m(function t(e){var n;return r().w(function(t){for(;;)switch(t.n){case 0:n=Y.value.splice(e.oldIndex,1)[0],Y.value.splice(e.newIndex,0,n);case 1:return t.a(2)}},t)})),function(e){return t.apply(this,arguments)})})});case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),lt=function(){var t=u(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,Y.value.forEach(function(t,e){t.level=e+1}),t.n=1,V({group_id:y.compData.group_id,project_datas:JSON.stringify(Y.value)});case 1:e=t.v,$.request(e),e.status&&(tt.value=!1,mt()),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),st=function(){var t=u(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,z({group_id:y.compData.group_id,sort_type:"simultaneous"===Z.value?"sequence":"simultaneous"});case 1:e=t.v,$.request(e),e.status&&(Z.value="simultaneous"===Z.value?"sequence":"simultaneous"),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),ft=function(){var t=u(r().m(function t(){return r().w(function(t){for(;;)switch(t.n){case 0:o({isAsync:!0,title:"项目组【".concat(y.compData.group_name,"】日志"),area:84,component:function(){return a(function(){return n.import("./group-logs-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:y.compData,cancel:function(){mt()}});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),pt=function(){var t=u(r().m(function t(){var e,n;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,H({group_id:y.compData.group_id,last_write_time:Q});case 1:if(!(e=t.v).status){t.n=5;break}if(M.value=e.data,e.data.running){t.n=2;break}return W&&clearTimeout(W),W=null,Q=0,mt(),t.a(2);case 2:if(e.data.last_write_time==Q){t.n=4;break}return t.n=3,J({group_id:y.compData.group_id});case 3:(n=t.v).status&&dt(n.data);case 4:W=setTimeout(function(){pt()},2e3),Q=e.data.last_write_time,t.n=6;break;case 5:W&&clearTimeout(W),W=null,Q=0,mt();case 6:t.n=8;break;case 7:t.p=7,t.v;case 8:return t.a(2)}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),mt=function(){var t=u(r().m(function t(){var e;return r().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,et.value=!0,t.n=1,J({group_id:y.compData.group_id});case 1:(e=t.v).status?(dt(e.data),""!==e.data.now_operation&&e.data.now_operation&&!W?pt():(W&&clearTimeout(W),W=null,Q=0)):$.error(e.msg),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.p=3,et.value=!1,t.f(3);case 4:return t.a(2)}},t,null,[[0,2,3,4]])}));return function(){return t.apply(this,arguments)}}(),dt=function(t){X.value=t.projects,Z.value=t.sort_type,ot.start=ut("start",t),ot.stop=ut("stop",t),ot.termination=ut("termination",t),ot.statusText="start"===t.now_operation?"状态：启动运行中":"状态：停止运行中"};return h(u(r().m(function t(){return r().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,mt();case 1:return t.a(2)}},t)}))),_(function(){W&&clearTimeout(W),W=null,M.value={},y.compData.refreshEvent&&y.compData.refreshEvent()}),function(t,n){var r=q,o=s,a=d,u=f,i=w("bt-loading");return j(),k("div",U,[b(a,null,{"header-left":O(function(){return[b(r,{type:"primary",onClick:at},{default:O(function(){return e(n[4]||(n[4]=[D("添加新项目",-1)]))}),_:1}),b(r,{type:"default",class:"ml-1rem",onClick:st},{default:O(function(){return[D("启动方式："+P("simultaneous"==S(Z)?"同时启动":"依次启动"),1)]}),_:1}),x(b(r,{type:"default",class:"ml-[1rem]",onClick:ct},{default:O(function(){return e(n[5]||(n[5]=[D("修改项目启动顺序",-1)]))}),_:1},512),[[T,"sequence"==S(Z)]])]}),"header-right":O(function(){return[E("div",B,[S(ot).start?(j(),C(r,{key:0,type:"default",class:"ml-[1rem]",onClick:n[0]||(n[0]=function(t){return it("start")})},{default:O(function(){return e(n[6]||(n[6]=[D("启动",-1)]))}),_:1})):G("",!0),S(ot).stop?(j(),C(r,{key:1,type:"default",class:"ml-[1rem]",onClick:n[1]||(n[1]=function(t){return it("stop")})},{default:O(function(){return e(n[7]||(n[7]=[D("停止",-1)]))}),_:1})):G("",!0),S(ot).termination?(j(),k("span",K,P(S(ot).statusText),1)):G("",!0),S(ot).termination?(j(),C(r,{key:3,type:"default",class:"ml-[1rem]",onClick:n[2]||(n[2]=function(t){return it("termination")})},{default:O(function(){return e(n[8]||(n[8]=[D("终止",-1)]))}),_:1})):G("",!0),S(ot).termination?(j(),k("span",{key:4,class:"ml-[1rem] text-primary cursor-pointer",onClick:ft},"日志")):G("",!0)])]}),content:O(function(){return[x(b(o,{"max-height":300,column:nt,data:S(X)},null,8,["data"]),[[i,S(et)]])]}),"footer-left":O(function(){return e(n[9]||(n[9]=[]))}),popup:O(function(){return[b(u,{title:"启动优先级排序",class:"overflow-hidden",modelValue:S(tt),"onUpdate:modelValue":n[3]||(n[3]=function(t){return A(tt)?tt.value=t:null}),area:65,"show-footer":!0,onConfirm:lt},{default:O(function(){return[E("div",R,[b(a,null,{content:O(function(){return[x(b(o,{"max-height":300,class:"level-table","row-key":"name",column:rt,data:S(Y)},null,8,["data"]),[[i,S(et)]])]}),_:1}),n[10]||(n[10]=E("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[2rem]"},[E("li",null,"拖拽排序，项目启动顺序将按照从上到下依次进行启动")],-1))])]}),_:1},8,["modelValue"])]}),_:1}),n[11]||(n[11]=E("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[2rem]"},[E("li",null,"启动顺序为依次启动时,项目将按照从上到下依次进行启动")],-1))])}}}),Q=m($,[["__scopeId","data-v-ea7daa07"]]),W=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));t("g",W)}}})}();
