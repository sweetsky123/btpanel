!function(){function e(e){return u(e)||s(e)||c(e)||i()}function t(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(o(e)+" is not iterable")}function n(e){var t=Object(e),n=[];for(var a in t)n.unshift(a);return function e(){for(;n.length;)if((a=n.pop())in t)return e.value=a,e.done=!1,e;return e.done=!0,e}}function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,g(a.key),a)}}function r(e,t){return u(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i,u,o=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(a=i.call(n)).done)&&(o.push(a.value),o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(c)throw r}}return o}}(e,t)||c(e,t)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){if(Array.isArray(e))return e}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||s(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function p(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function i(n,a,r,i){var l=a&&a.prototype instanceof o?a:o,c=Object.create(l.prototype);return d(c,"_invoke",function(n,a,r){var i,o,l,c=0,s=r||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return i=t,o=0,l=e,p.n=n,u}};function d(n,a){for(o=n,l=a,t=0;!f&&c&&!r&&t<s.length;t++){var r,i=s[t],d=p.p,v=i[2];n>3?(r=v===a)&&(l=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=d&&((r=n<2&&d<i[1])?(o=0,p.v=a,p.n=i[1]):d<v&&(r=n<3||i[0]>a||a>v)&&(i[4]=n,i[5]=a,p.n=v,o=0))}if(r||n>1)return u;throw f=!0,a}return function(r,s,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),o=s,l=v;(t=o<2?e:l)||!f;){i||(o?o<3?(o>1&&(p.n=-1),d(o,l)):p.n=l:p.v=l);try{if(c=2,i){if(o||(r="next"),t=i[r]){if(!(t=t.call(i,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=i.return)&&t.call(i),o<2&&(l=TypeError("The iterator does not provide a '"+r+"' method"),o=1);i=e}else if((t=(f=p.n<0)?l:n.call(a,p))!==u)break}catch(t){i=e,o=1,l=t}finally{c=1}}return{value:t,done:f}}}(n,r,i),!0),c}var u={};function o(){}function l(){}function c(){}t=Object.getPrototypeOf;var s=[][a]?t(t([][a]())):(d(t={},a,function(){return this}),t),f=c.prototype=o.prototype=Object.create(s);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,d(e,r,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=c,d(f,"constructor",c),d(c,"constructor",l),l.displayName="GeneratorFunction",d(c,r,"GeneratorFunction"),d(f),d(f,r,"Generator"),d(f,a,function(){return this}),d(f,"toString",function(){return"[object Generator]"}),(p=function(){return{w:i,m:v}})()}function d(e,t,n,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}d=function(e,t,n,a){function i(t,n){d(e,t,function(e){return this._invoke(t,n,e)})}t?r?r(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},d(e,t,n,a)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach(function(t){h(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function h(e,t,n){return(t=g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function y(e,t,n,a,r,i,u){try{var o=e[i](u),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(a,r)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var i=e.apply(t,n);function u(e){y(i,a,r,u,o,"next",e)}function o(e){y(i,a,r,u,o,"throw",e)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(i,u){"use strict";var c,s,d,v,g,y,w,k,_,S,x,T,L,C,E,D,F,N,I,j,P,R,O,A,z,M,V,q,H,B,U,G,J,W,$,Y,K,Q,X,Z,ee,te,ne,ae,re,ie,ue,oe,le,ce,se,fe,pe,de,ve,me,he,ge,ye,be,we,ke,_e,Se,xe,Te,Le,Ce,Ee,De,Fe,Ne,Ie,je,Pe,Re,Oe,Ae,ze,Me,Ve,qe,He,Be,Ue,Ge,Je,We,$e,Ye,Ke,Qe,Xe,Ze,et,tt,nt,at,rt,it,ut,ot,lt,ct,st,ft,pt,dt,vt,mt,ht,gt,yt,bt,wt,kt,_t,St,xt,Tt,Lt,Ct,Et,Dt,Ft,Nt,It,jt,Pt,Rt,Ot,At,zt,Mt,Vt,qt,Ht,Bt,Ut,Gt,Jt,Wt,$t,Yt,Kt,Qt,Xt,Zt;return{setters:[function(e){c=e.o,s=e.u,d=e.f,v=e.b4,g=e.V,y=e.p,w=e.M,k=e.b5,_=e.W,S=e.aK,x=e.b,T=e.Q,L=e.k,C=e.H,E=e.n,D=e.b6,F=e.b7,N=e.b8,I=e.x,j=e.R,P=e.b9,R=e.ba,O=e.bb,A=e.B,z=e.bc,M=e.y,V=e.$,q=e.j,H=e._,B=e.aH,U=e.q,G=e.bd,J=e.N,W=e.be,$=e.am,Y=e.az,K=e.m,Q=e.a,X=e.bf,Z=e.bg,ee=e.t,te=e.aS,ne=e.aA,ae=e.bh,re=e.O,ie=e.l,ue=e.bi,oe=e.al,le=e.bj,ce=e.bk,se=e.bl,fe=e.r,pe=e.bm,de=e.bn,ve=e.bo,me=e.bp,he=e.bq,ge=e.S,ye=e.br,be=e.bs,we=e.E,ke=e.bt,_e=e.bu,Se=e.bv,xe=e.bw,Te=e.bx,Le=e.by,Ce=e.af,Ee=e.G,De=e.bz,Fe=e.bA,Ne=e.ax,Ie=e.bB,je=e.bC,Pe=e.ak,Re=e.bD,Oe=e.bE,Ae=e.bF,ze=e.bG},function(e){Me=e.e,Ve=e.D,qe=e.aA,He=e.ap,Be=e.aH,Ue=e.r,Ge=e.n,Je=e.c,We=e.w,$e=e.aJ,Ye=e.I,Ke=e.J,Qe=e.K,Xe=e.x,Ze=e.y,et=e.Q,tt=e.S,nt=e.A,at=e.j,rt=e.d,it=e.t,ut=e.o,ot=e.W,lt=e.b8,ct=e.aC,st=e.s,ft=e.aE,pt=e.an,dt=e.am,vt=e.i,mt=e.C,ht=e.z,gt=e.O,yt=e.G,bt=e.ad,wt=e.ab,kt=e.B,_t=e.R,St=e.bd,xt=e.bc,Tt=e.V,Lt=e.H,Ct=e.aB,Et=e.g,Dt=e.a0,Ft=e.av,Nt=e.v,It=e.L,jt=e.M,Pt=e.P,Rt=e.aQ,Ot=e.a3,At=e.a6,zt=e.E,Mt=e.q,Vt=e.p,qt=e.F,Ht=e.b,Bt=e.bf,Ut=e.Y,Gt=e.Z,Jt=e.m},function(e){Wt=e._},function(e){$t=e.o,Yt=e.a,Kt=e.u,Qt=e.c},function(e){Xt=e.g},function(e){Zt=e._}],execute:function(){var en=function(e){return c.post("plugin/get_soft_list",{data:e,customType:"default"})},tn=function(){return c.post("plugin/push_plugin",{customType:"default",check:"array"})},nn=function(){return c.post("plugin/get_usually_plugin",{customType:"default",check:"array"})},an=function(e){return c.post("plugin/uninstall_plugin",{data:e,loading:"正在卸载，请稍候...",customType:"default",check:"msg"})},rn=function(e){return c.post("plugin/save_plugin_settings",{data:e,customType:"default",check:"msg"})},un=function(e){return c.post("plugin/add_index",{data:e,customType:"default",check:"msg"})},on=function(e){return c.post("plugin/remove_index",{data:e,customType:"default",check:"msg"})},ln=function(e){return c.post("deployment/GetList",{data:e,customType:"default",check:"object"})},cn=function(e){return c.post("deployment/DelPackage",{data:e,customType:"default",check:"msg"})},sn=function(e){return c.post("plugin/get_score",{data:e,customType:"default",check:"array"})},fn=function(e){return c.post("plugin/set_score",{data:e,customType:"default",check:"msg"})},pn=(i("bD",function(){return c.post("site/GetPHPVersion",{customType:"default",check:"array"})}),i("bH",function(e){return c.post("site/AddSite",{data:e,customType:"default",check:"object"})}),i("bE",function(e){return c.post("deployment/SetupPackage",{data:e,customType:"default",check:"msg"})}),function(e){return c.post("auth/create_plugin_other_order",{data:e,loading:"正在获取支付信息，请稍候...",customType:"default",check:"object"})}),dn=(i("a$",function(e){return c.post("files/GetFileBody",{data:e})}),i("a_",function(e){return c.post("plugin/install_plugin",{data:e,check:"object"})})),vn=(i("b0",function(e){return c.post("ajax/GetOpeLogs",{data:e,check:"msg"})}),i("aL",function(e){return c.post("ftp/set_ftp_logs",{data:e,check:"msg"})}),i("b2",function(){return c.post("ajax/GetMemcachedStatus",{})}),i("b1",function(e){return c.post("ajax/SetMemcachedCache",{data:e,check:"msg"})}),i("b5",function(){return c.post("ajax/GetNginxStatus",{check:"object"})}),i("b4",function(){return c.post("config/GetNginxValue",{check:"array"})}),i("b3",function(e){return c.post("config/SetNginxValue",{data:e,check:"msg"})}),i("b6",function(){return c.post("config/get_ols_value",{})}),i("b7",function(e){return c.post("config/set_ols_value",{data:e,check:"msg"})}),i("aY",function(){return c.post("database/GetRunStatus",{check:"object"})}),i("aQ",function(e){return c.post("database/GetErrorLog",{data:e,check:"string"})}),i("aP",function(e){return c.post("database/GetErrorLog",{data:e,check:"msg"})}),i("aR",function(e){return c.post("database/GetSlowLogs",{data:e,check:"msg"})}),i("aT",function(){return c.post("database/GetMySQLBinlogs",{check:"msg"})}),i("aS",function(e){return c.post("database/BinLog",{data:e,check:"msg"})}),i("aM",function(e){return c.post("database/ClearMysqlBinLog",{data:e,check:"msg"})}),i("aN",function(){return c.post("database/GetMySQLInfo",{check:"object"})}),i("aX",function(e){return c.post("database/SetDataDir",{data:e,check:"msg"})}),i("aW",function(e){return c.post("database/SetMySQLPort",{data:e,check:"msg"})}),i("aV",function(e){return c.post("database/mysql_oom_adj",{data:e,check:"msg"})}),i("aZ",function(){return c.post("database/GetDbStatus",{check:"object"})}),i("aO",function(e){return c.post("database/SetDbConf",{data:e,check:"msg"})}),i("bc",function(e){return c.post("ajax/GetPHPConfig",{data:e,check:"object"})}),i("ba",function(e){return c.post("files/UninstallSoft",{data:e,check:"msg"})}),i("bb",function(e){return c.post("files/InstallSoft",{data:e,check:"msg"})}),i("be",function(e){return c.post("config/GetPHPConf",{data:e})}),i("bd",function(e){return c.post("config/SetPHPConf",{data:e,check:"msg"})}),i("bs",function(e){return c.post("config/setPHPDisable",{data:e,check:"msg"})}),i("bt",function(e){return c.post("config/getFpmConfig",{data:e,check:"object"})}),i("bf",function(e){return c.post("config/setFpmConfig",{data:e,check:"msg"})}),i("br",function(e){return c.post("ajax/GetPHPStatus",{data:e,check:"object"})}),i("b8",function(e){return c.post("ajax/GetFpmSlowLogs",{data:e,check:"object"})}),i("b9",function(e){return c.post("ajax/GetFpmLogs",{data:e,check:"msg"})}),i("bu",function(e){return c.post("config/GetSessionConf",{data:e,check:"object"})}),i("bi",function(e){return c.post("config/GetSessionCount",{data:e,check:"object"})}),i("bg",function(e){return c.post("config/SetSessionConf",{data:e,check:"msg"})}),i("bh",function(){return c.post("config/DelOldSession",{check:"msg"})}),i("bj",function(e){return c.post("ajax/GetPHPInfo",{data:e,check:"string"})}),i("bv",function(e){return c.post("ajax/php_info",{data:e,check:"object"})}),i("bo",function(e){return c.post("config/get_php_config",{data:e,check:"object"})}),i("bq",function(e){return c.post("config/setPHPMaxSize",{data:e,check:"msg"})}),i("bp",function(e){return c.post("config/setPHPMaxTime",{data:e,check:"msg"})}),i("bB",function(){return c.post("ajax/GetApacheStatus",{check:"object"})}),i("bx",function(e){return c.post("site/set_restart_task",{data:e,check:"msg"})}),i("bz",function(){return c.post("site/get_restart_task",{check:"msg"})}),i("bA",function(){return c.post("config/GetApacheValue",{check:"array"})}),i("by",function(e){return c.post("config/SetApacheValue",{data:e,check:"msg"})}),function(e){return c.post("auth/get_order_stat",{data:e,check:"number"})}),mn=(i("aU",function(e){return c.post("files/DeleteFile",{data:e,check:"msg"})}),i("bK",function(){return c.post("deployment/check_project_env",{check:"object"})}),i("bG",function(e){return c.post("deployment/GetJarPath",{data:e,check:"object"})}),i("bJ",function(e){return c.post("/mod/java/project/create_project",{data:e,check:"object",customType:"model"})}),i("bI",function(e){return c.post("/mod/php/php_async/create_project",{data:e,customType:"model",check:"object"})}),i("bC",function(){return c.post("/mod/java/project/get_system_info",{check:"msg",customType:"model"})}),i("bF",function(){return c.post("deployment/GetInLog",{check:"msg"})}),i("d6",function(){return c.post("database/GetmvDataDirSpeed",{check:"object"})}),i("bk",function(){return c.post("plugin/RegetCloudPHPExt",{check:"object"})}),i("bw",function(e){return c.post("config/phpPeclUninstall",{data:e,check:"msg"})}),i("bl",function(e){return c.post("config/phpPeclInstall",{data:e,check:"msg"})}),i("bm",function(e){return c.post("config/GetPeclInstallList",{data:e,check:"array"})}),i("bn",function(e){return c.post("config/GetPhpPeclLog",{data:e,check:"msg"})}),function(e){return c.post("plugin?action=update_zip",{data:e,customType:"model",check:"object"})}),hn=s(),gn=hn.setAuthState,yn=hn.enterpriseRec,bn=hn.payment,wn=function(e){var t=e.type;return{label:"app"===t?"软件名称":"名称",prop:"title",width:250,sortable:e.sortable,showOverflowTooltip:!1,render:function(n){var a,r="soft_ico/ico-"+((null===(a=n.name)||void 0===a?void 0:a.indexOf("php-"))>-1?"php":n.name)+".png",i="/dep_ico/".concat(n.name,".png"),u=n.title.indexOf("PHP-")>-1?"PHP":n.title;return Me("div",{class:"whitespace-normal inline-flex items-center p-[2px] ".concat(n.setup?"cursor-pointer":""),title:n.setup?"打开插件":"".concat(u," ").concat(n.version),onClick:function(){return e.onClick(n)}},[Me(d,{src:"app"===t?r:i,class:"".concat(10===n.type?"!h-[20px] !w-[22px]":""," soft-ico-img"),type:"img"},{error:function(){return Me("img",{src:"/static/images/soft_ico/icon_plug.svg",alt:""},null)}}),Me("span",null,["".concat(n.setup?u:n.title," ").concat(n.version||"")]),Me("span",{class:"text-warning ".concat(n.is_beta?"":"hidden")},[Ve("[测试版]")])])}}},kn=function(){return{label:"开发商",width:80,render:function(e){return Me("span",{class:"truncate inline-block w-[8rem]"},[Ve(" "),e.author||"官方"])}}},_n=function(e){return{label:"app"===e?"说明":"介绍",showOverflowTooltip:!1,render:function(e){return Me("div",{class:"leading-[16px]",innerHTML:e.ps},null)}}},Sn=function(e){var t=e.onClick;return{label:"评分",prop:"score",width:80,sortable:e.sortable,render:function(e){return e.hasOwnProperty("score")?Me("span",{class:"bt-link inline-block w-[4rem]",onClick:function(){return t(e)}},[e.score?e.score:"无评分"]):Me("span",null,[Ve("--")])}}},xn=function(){return{label:"价格/天",width:70,render:function(e){return e.price>0?Me("span",{class:"text-warning"},["≈".concat((e.price/("btiplibrary"===e.name?365:30)).toFixed(2),"元"),Ve(" ")]):Me("span",{class:"text-secondary"},[Ve("免费")])}}},Tn=function(e){return{label:"到期时间",width:130,showOverflowTooltip:!1,render:function(t){var n=t.endtime?g(t.endtime,"yyyy-MM-dd"):"--",a=Me("span",{class:"bt-link",onClick:function(){return e.onClick(t)}},[Ve("(续费)")]);return t.price>0&&0===t.endtime&&!bn.value.bindUser?Me("span",null,[Ve("--")]):(t.price>0?[0,-1].includes(t.endtime)?(a=Me("i",null,null),n=0===t.endtime?"永久":"未开通"):[1,-2].includes(t.endtime)&&(n=t.endtime>1?n:"已到期"):(n="--",a=Me("i",null,null)),Me("span",null,[n,a]))}}},Ln=function(){return{label:"位置",width:50,render:function(e){return e.setup?Me("span",{class:"flex"},[Me("i",{title:"打开插件文件目录",class:"text-[var(--el-color-warning-light-3)] cursor-pointer svgtofont-folder-open !text-large",onClick:function(){return $t({path:e.install_checks})}},null)]):Me("span",null,[Ve("--")])}}},Cn=function(e){return{label:"首页显示",prop:"labels",width:80,render:function(t){return t.setup?Me(He,{size:"small",modelValue:t.index_display,"onUpdate:modelValue":function(e){return t.index_display=e},onChange:function(n){return e.onChange(t,Boolean(n))}},null):Me("span",null,[Ve("--")])}}},En=function(e){return{label:"操作",align:"right",width:175,showOverflowTooltip:!1,render:function(t,n){var a,r="soft_ico/ico-".concat(null!=t&&null!==(a=t.name)&&void 0!==a&&a.includes("php-")?"php":t.name,".png"),i=e,u="/dep_ico/".concat(t.name,".png");v(e)&&(i=e(t));var o=![5,6,13,7,8,12,10,11].includes(t.type);return Me(qe,{popperClass:"el-popover-shadow el-light-popover !py-[6px]",trigger:"hover",placement:"top-start",enterable:!1,"show-after":200,"hide-after":0,width:"auto"},{default:function(){return[Me("div",{class:"flex items-center p-[2px] whitespace-nowrap"},[Me(d,{src:o?u:r,class:"".concat(o?"":"!h-[20px] !w-[22px]"," soft-ico-img"),type:"img"},{error:function(){return Me("img",{src:"/static/images/soft_ico/icon_plug.svg",alt:""},null)}}),Me("span",null,["".concat(t.title," ").concat(t.version)]),Me("span",{class:"text-warning ".concat(t.is_beta?"":"hidden")},[Ve("[测试版]")])])]},reference:function(){return Me("div",{class:"text-right w-full"},[i.map(function(e,n){if(!(e.isHide&&e.isHide(t)||"更新"===e.title&&"tomcat"===t.name))return Me("span",{class:"soft-link"},[Me("span",{class:"bt-link",title:e.title,onClick:function(n){return"pay"==e.type&&10===t.type?(0,cc().buyThirdPluginView)(t):(e.onClick(t,e.type,e.sourceId),!1)}},[e.title]),n!==i.length-1?Me(Wt,null,null):""])})])}})}}},Dn=function(){var e=b(p().m(function e(t,n){var a,r,i,u,o,l,c,s;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,us();case 1:if(!e.v){e.n=2;break}return e.a(2);case 2:a="i",s=n,e.n="install"===s?3:"update"===s?4:"repair"===s?5:6;break;case 3:return a="i",e.a(3,6);case 4:return a="u",e.a(3,6);case 5:return a="r",e.a(3,6);case 6:if(10===t.type){e.n=8;break}return r=m(m({},t),{},{callback:function(){(0,pc().refreshRouteData)("1")}}),e.n=7,$c({name:t.name,type:a,pluginInfo:r});case 7:e.n=14;break;case 8:return e.n=9,y({title:"安装第三方插件",content:"您真的要安装[".concat(t.title,"]插件吗？"),icon:"question-filled"});case 9:return i=w.load("正在获取插件信息，请稍后..."),e.n=10,Pn(t);case 10:if((u=e.v).status){e.n=11;break}return e.a(2,w.error(u.msg));case 11:return e.n=12,dn({sName:t.name,version:t.versions[0].m_version,min_version:t.versions[0].version});case 12:if(o=e.v,l=o.data,i.close(),!l.hasOwnProperty("status")||l.status){e.n=13;break}return e.a(2,w.error(l.msg));case 13:c=cc(),(0,c.installOtherEvent)(l);case 14:e.n=16;break;case 15:e.p=15,e.v;case 16:return e.a(2)}},e,null,[[0,15]])}));return function(t,n){return e.apply(this,arguments)}}(),Fn=function(){var e=b(p().m(function e(t,n){var a,r;return p().w(function(e){for(;;)switch(e.n){case 0:if(!n){e.n=2;break}return e.n=1,un({sName:t.name});case 1:r=e.v,e.n=4;break;case 2:return e.n=3,on({sName:t.name});case 3:r=e.v;case 4:return a=r,w.request(a),e.a(2,a)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Nn=(i("aH",function(e){window.open(e,"_blank","noopener,noreferrer")}),function(){var e=b(p().m(function e(t){var n,a,r,i,u,o,c,s,f,d;return p().w(function(e){for(;;)if(0===e.n)return n=new k(t,{"list.data":[Array,"softList"],"list.page":_(),ltd:Number,pro:Number,search_history:[Array,"historyList"],m_list:Array,type:[Array,"typeList"],is_force:[Number,function(e){return{isForce:Boolean(e)}}]}).exportData(),a=n.softList,r=n.total,i=n.historyList,u=n.ltd,o=n.pro,c=n.m_list,s=n.typeList,f=n.isForce,gn([0,o,u]),d=[].concat(l(a),l(l(c).map(function(e){return m(m({},e),{},{is_docker:1})}))),e.a(2,{softList:d,total:r,historyList:i,typeList:s,isForce:f})},e)}));return function(t){return e.apply(this,arguments)}}()),In=function(e){var t="";t=e?"软件列表更新成功":e||yn.value?"云端连接失败，无法获取最新软件列表，请检查网络或稍后重试":"未绑定宝塔官网账号，无法获取最新软件列表",w.msg({dangerouslyUseHTMLString:!e,message:t,type:e?"success":"warning",duration:2e3})},jn=function(e){window.open(e.preview_url,"_blank","noopener,noreferrer")},Pn=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pn({pid:t.pid,cycle:"1",type:0});case 1:return n=e.v,a=n.data,n.msg,n.status,e.a(2,a);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),Rn=function(){var e=b(p().m(function e(t,n,a){var r,i,u,o;return p().w(function(e){for(;;)switch(e.n){case 0:return r=s(),i=r.authExpirationTime,r.forceLtd,u=r.aliyunEcsLtd,o={disablePro:8!==t.type,compulsionLtd:8!==t.type,sourceId:a,plugin:!0,pluginInfo:t},-2===Number(i.value)&&(a=32),u.value&&(o={disablePro:!0,compulsionLtd:!0,sourceId:a,plugin:!0,pluginInfo:t}),e.n=1,Wc(o);case 1:return e.a(2)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),On=function(e){Be().push({path:e.route})},An=function(){var e=b(p().m(function e(t){var n,a,r,i,u;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,us();case 1:if(n=e.v,t.setup&&!n){e.n=2;break}return e.a(2);case 2:if(!([8,12].includes(t.type)&&t.endtime<0)){e.n=3;break}return e.a(2,w.error("加载失败：该插件未购买或已到期"));case 3:if(a=["mysql","pureftpd","nginx","apache","tomcat","memcached","openlitespeed","phpmyadmin"].includes(t.name),r=-1!==t.name.indexOf("php-"),!a&&!r){e.n=4;break}return e.a(2,Kc({pluginInfo:t}));case 4:return e.n=5,ks(t.name);case 5:if(e.v){e.n=6;break}return e.a(2,!1);case 6:sessionStorage.setItem("pluginViewInfo",JSON.stringify(m(m({},t),{},{built:t.built?"1":"0"}))),i=s(),(u=i.pluginInfo).value.visible=!0,u.value.id=t.name,u.value.name=t.title,u.value.callback=(null==t?void 0:t.callback)||null;case 7:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),zn=i("G",function(e){return c.post("files/GetFileBody",{data:e,check:"object"})}),Mn=i("aD",function(e){return c.post("files/GetDirNew",{data:e,check:"ignore"})}),Vn=function(e){return c.post("/files?action=GetDirNew&tojs=GetFiles",{customType:"model",data:e})},qn=function(e){return c.post("files/MvFile",{data:e,check:"msg"})},Hn=function(e){return c.post("files/".concat("dir"===e.type?"CreateDir":"CreateFile"),{data:{path:e.path},check:"msg"})},Bn=i("E",function(e){return c.post("files/".concat("dir"===e.type?"DeleteDir":"DeleteFile"),{data:{path:e.path},check:"msg"})}),Un=function(e){return c.post("files/add_files_store",{data:{path:e.path},check:"msg"})},Gn=function(e){return c.post("files/del_files_store",{data:{path:e.path},check:"msg"})},Jn=function(e){return c.post("/files/logs/set_topping_status",{customType:"model",data:{sfile:e.path,status:"set"===e.type?1:0},check:"msg"})},Wn=function(e){var t=e.name?{dfile:e.path,filename:e.name}:{dfile:e.path};return c.post("files/CheckExistsFiles",{loading:"正在粘贴文件，请稍候...",data:t,check:"array"})},$n=function(e){return c.post("files/CopyFile",{data:{sfile:e.sfile,dfile:e.dfile},check:"msg"})},Yn=function(e){return c.post("files/MvFile",{data:e,check:"msg"})},Kn=function(e){return c.post("/files/logs/copy_file_to",{customType:"model",data:{sfile:e.path},check:"msg"})},Qn=function(){return c.post("system/GetDiskInfo",{check:"array"})},Xn=function(){return c.post("files/get_files_store",{check:"array"})},Zn=function(e){return c.post("files/get_download_url_list",{data:m({p:1},e),check:"object"})},ea=i("cc",function(e){return c.post("files/Get_Recycle_bin",{data:e,check:"object"})}),ta=function(e){return c.post("files/Recycle_bin",{data:e,check:"msg"})},na=function(e){return c.post("files/Close_Recycle_bin_new",{data:e,check:"msg"})},aa=function(e){return c.post("files/Re_Recycle_bin",{data:e,check:"msg"})},ra=function(e){return c.post("files/Del_Recycle_bin_new",{data:e,check:"msg"})},ia=function(e){return c.post("files/Batch_Del_Recycle_bin",{data:e,check:"msg"})},ua=function(e){return c.post("files/download_file",{data:e,check:"object"})},oa=function(e){return c.post("/files/zip/get_zip_files",{data:e,check:"object",customType:"model"})},la=function(e){return c.post("/files/gz/get_zip_files",{data:e,check:"object",customType:"model"})},ca=function(e){return c.post("files/SplitFile",{data:e,check:"object"})},sa=function(e){return c.post("files/JoinConfigFile",{data:e,check:"msg"})},fa=function(e){return c.post("files/JoinFile",{data:e,check:"msg"})},pa=function(e){return c.post("files/create_download_url",{data:e,check:"msg"})},da=function(e){return c.post("files/get_download_url_find",{data:e})},va=function(e){return c.post("files/remove_download_url",{data:e,check:"msg"})},ma=(i("B",function(e){return c.post("/files/logs/get_logs_info",{data:e,check:"object",customType:"model"})}),function(e){return c.post("files/Zip",{data:e,check:"msg"})}),ha=function(e){return c.post("files/ZipAndDownload",{data:e,check:"msg"})},ga=function(e){return c.post("files/UnZip",{data:e,check:"msg"})},ya=function(){return c.post("/files/upload/check_email_config",{check:"object",customType:"model"})},ba=function(e){return c.post("/files/upload/send_to_email",{data:e,check:"object",customType:"model"})},wa=function(e){return c.post("files/get_file_attribute",{data:e,check:"object"})},ka=i("cw",function(e){return c.post("files/re_history",{data:e,check:"object"})}),_a=function(e){return c.post("files/GetFileAccess",{data:e,check:"object"})},Sa=function(e){return c.post("files/SetFileAccess",{data:e,check:"msg"})},xa=function(e){return c.post("database/InputSql",{data:e,check:"msg"})},Ta=function(e){return c.post("/files/zip/add_zip_file",{data:e,check:"msg",customType:"model"})},La=function(e){return c.post("/files/gz/add_zip_file",{data:e,check:"msg",customType:"model"})},Ca=function(e){return c.post("/files/zip/get_fileinfo_by",{data:e,check:"object",customType:"model"})},Ea=function(e){return c.post("/files/gz/get_fileinfo_by",{data:e,check:"object",customType:"model"})},Da=function(e){return c.post("/files/zip/write_zip_file",{data:e,check:"msg",customType:"model"})},Fa=function(e){return c.post("/files/gz/write_zip_file",{data:e,check:"msg",customType:"model"})},Na=function(e){return c.post("/files/zip/extract_byfiles",{data:e,check:"msg",customType:"model"})},Ia=function(e){return c.post("/files/gz/extract_byfiles",{data:e,check:"msg",customType:"model"})},ja=function(e){return c.post("/files/zip/delete_zip_file",{data:e,check:"msg",customType:"model"})},Pa=function(e){return c.post("/files/gz/delete_zip_file",{data:e,check:"msg",customType:"model"})},Ra=function(){return c.post("/files/conversion/get_convert_liet",{check:"msg",customType:"model"})},Oa=function(e){return c.post("/files/conversion/run",{data:e,check:"msg",customType:"model"})},Aa=function(e){return c.post("files/DownloadFile",{data:e,check:"msg"})},za=(i("ab",function(e){return c.post("/files/size/get_batch_path_size",{data:e,check:"msg",customType:"model"})}),function(e){return c.post("files/set_file_ps",{data:e,check:"msg"})}),Ma=function(e){return c.post("/plugin?action=a&name=rsync&s=add_module",{data:e,check:"msg",customType:"model"})},Va=function(e){return c.post("files/add_files_rsync",{data:e,check:"msg"})},qa=function(e){return c.post("/plugin?action=a&name=rsync&s=add_ormodify_send",{data:e,check:"msg",customType:"model"})},Ha=(i("cy",function(){return c.post("files/file_history_list",{check:"array"})}),i("bU",function(e){return c.post("files/GetFileHistory",{data:e,check:"msg"})}),i("cx",function(e){return c.post("files/del_file_history",{data:e,check:"object"})}),function(e){return c.post("files/SetBatchData",{data:e,check:"msg"})}),Ba=function(e){return c.post("files/BatchPaste",{data:e,check:"msg"})},Ua=function(e){return c.post("/tamper_core/get_effective_path.json",{data:e,customType:"model"})},Ga=function(e){return c.post("files/upload_files_exists",{data:e,check:"array"})},Ja=function(e){return c.post("/tamper_core/batch_setting.json",{data:e,check:"object",customType:"model"})},Wa=function(e){return c.post("/tamper_core/create_path.json",{data:e,check:"object",customType:"model"})},$a=function(e){return c.post("files/get_images_resize",{data:e,check:"object"})},Ya=function(e){return c.post("files/get_videos",{data:e,check:"array"})},Ka=i("ac",function(e){return c.post("files/GetDirSize",{data:e,check:"string"})}),Qa=(i("ae",function(e){return c.post("files/CheckTaskStatus",{data:e,check:"string"})}),function(e){return c.post("files/CreateLink",{data:e,check:"msg"})}),Xa=function(e){return c.post("/files/conversion/get_log",{data:e,check:"object",customType:"model"})},Za=function(e){return c.post("files/test_path",{data:e})},er=function(e){return c.post("files/file_history",{data:e})},tr=function(e){return c.post("/files/size/get_dir_path_size",{data:{path:e,is_refresh:!0},check:"msg",customType:"model"})},nr=(i("cN",function(e){return c.post("files/read_history",{data:e,check:"object"})}),i("cR",function(e){return c.post("files/del_history",{data:e,check:"msg"})}),function(){return c.post("/files/upload/get_oss_objects",{customType:"model"})}),ar=function(e){return c.post("/plugin?action=a&s=get_list&name=".concat(e.pname),{data:{path:e.path},check:"object",customType:"model"})},rr=function(e,t){return c.post("/files/".concat("upload"===t?"upload/upload_file":"down/download_file"),{data:{data:JSON.stringify(e)},check:"msg",customType:"model"})},ir={exports:{}};function ur(e){return e&&"object"===o(e)&&!Array.isArray(e)&&null!==e}!function(e){var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,n,a,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var i=r;if(null==e||null==n)throw new Error("Null input. (diff_main)");if(e==n)return e?[new t.Diff(0,e)]:[];void 0===a&&(a=!0);var u=a,o=this.diff_commonPrefix(e,n),l=e.substring(0,o);e=e.substring(o),n=n.substring(o),o=this.diff_commonSuffix(e,n);var c=e.substring(e.length-o);e=e.substring(0,e.length-o),n=n.substring(0,n.length-o);var s=this.diff_compute_(e,n,u,i);return l&&s.unshift(new t.Diff(0,l)),c&&s.push(new t.Diff(0,c)),this.diff_cleanupMerge(s),s},t.prototype.diff_compute_=function(e,a,r,i){var u;if(!e)return[new t.Diff(1,a)];if(!a)return[new t.Diff(n,e)];var o=e.length>a.length?e:a,l=e.length>a.length?a:e,c=o.indexOf(l);if(-1!=c)return u=[new t.Diff(1,o.substring(0,c)),new t.Diff(0,l),new t.Diff(1,o.substring(c+l.length))],e.length>a.length&&(u[0][0]=u[2][0]=n),u;if(1==l.length)return[new t.Diff(n,e),new t.Diff(1,a)];var s=this.diff_halfMatch_(e,a);if(s){var f=s[0],p=s[1],d=s[2],v=s[3],m=s[4],h=this.diff_main(f,d,r,i),g=this.diff_main(p,v,r,i);return h.concat([new t.Diff(0,m)],g)}return r&&e.length>100&&a.length>100?this.diff_lineMode_(e,a,i):this.diff_bisect_(e,a,i)},t.prototype.diff_lineMode_=function(e,a,r){var i=this.diff_linesToChars_(e,a);e=i.chars1,a=i.chars2;var u=i.lineArray,o=this.diff_main(e,a,!1,r);this.diff_charsToLines_(o,u),this.diff_cleanupSemantic(o),o.push(new t.Diff(0,""));for(var l=0,c=0,s=0,f="",p="";l<o.length;){switch(o[l][0]){case 1:s++,p+=o[l][1];break;case n:c++,f+=o[l][1];break;case 0:if(c>=1&&s>=1){o.splice(l-c-s,c+s),l=l-c-s;for(var d=this.diff_main(f,p,!1,r),v=d.length-1;v>=0;v--)o.splice(l,0,d[v]);l+=d.length}s=0,c=0,f="",p=""}l++}return o.pop(),o},t.prototype.diff_bisect_=function(e,a,r){for(var i=e.length,u=a.length,o=Math.ceil((i+u)/2),l=o,c=2*o,s=new Array(c),f=new Array(c),p=0;p<c;p++)s[p]=-1,f[p]=-1;s[l+1]=0,f[l+1]=0;for(var d=i-u,v=d%2!=0,m=0,h=0,g=0,y=0,b=0;b<o&&!((new Date).getTime()>r);b++){for(var w=-b+m;w<=b-h;w+=2){for(var k=l+w,_=(C=w==-b||w!=b&&s[k-1]<s[k+1]?s[k+1]:s[k-1]+1)-w;C<i&&_<u&&e.charAt(C)==a.charAt(_);)C++,_++;if(s[k]=C,C>i)h+=2;else if(_>u)m+=2;else if(v){if((T=l+d-w)>=0&&T<c&&-1!=f[T])if(C>=(x=i-f[T]))return this.diff_bisectSplit_(e,a,C,_,r)}}for(var S=-b+g;S<=b-y;S+=2){for(var x,T=l+S,L=(x=S==-b||S!=b&&f[T-1]<f[T+1]?f[T+1]:f[T-1]+1)-S;x<i&&L<u&&e.charAt(i-x-1)==a.charAt(u-L-1);)x++,L++;if(f[T]=x,x>i)y+=2;else if(L>u)g+=2;else if(!v){if((k=l+d-S)>=0&&k<c&&-1!=s[k]){var C;_=l+(C=s[k])-k;if(C>=(x=i-x))return this.diff_bisectSplit_(e,a,C,_,r)}}}}return[new t.Diff(n,e),new t.Diff(1,a)]},t.prototype.diff_bisectSplit_=function(e,t,n,a,r){var i=e.substring(0,n),u=t.substring(0,a),o=e.substring(n),l=t.substring(a),c=this.diff_main(i,u,!1,r),s=this.diff_main(o,l,!1,r);return c.concat(s)},t.prototype.diff_linesToChars_=function(e,t){var n=[],a={};function r(e){for(var t="",r=0,u=-1,o=n.length;u<e.length-1;){-1==(u=e.indexOf("\n",r))&&(u=e.length-1);var l=e.substring(r,u+1);(a.hasOwnProperty?a.hasOwnProperty(l):void 0!==a[l])?t+=String.fromCharCode(a[l]):(o==i&&(l=e.substring(r),u=e.length),t+=String.fromCharCode(o),a[l]=o,n[o++]=l),r=u+1}return t}n[0]="";var i=4e4,u=r(e);return i=65535,{chars1:u,chars2:r(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var a=e[n][1],r=[],i=0;i<a.length;i++)r[i]=t[a.charCodeAt(i)];e[n][1]=r.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,a=Math.min(e.length,t.length),r=a,i=0;n<r;)e.substring(i,r)==t.substring(i,r)?i=n=r:a=r,r=Math.floor((a-n)/2+n);return r},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,a=Math.min(e.length,t.length),r=a,i=0;n<r;)e.substring(e.length-r,e.length-i)==t.substring(t.length-r,t.length-i)?i=n=r:a=r,r=Math.floor((a-n)/2+n);return r},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,a=t.length;if(0==n||0==a)return 0;n>a?e=e.substring(n-a):n<a&&(t=t.substring(0,n));var r=Math.min(n,a);if(e==t)return r;for(var i=0,u=1;;){var o=e.substring(r-u),l=t.indexOf(o);if(-1==l)return i;u+=l,0!=l&&e.substring(r-u)!=t.substring(0,u)||(i=u,u++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,a=e.length>t.length?t:e;if(n.length<4||2*a.length<n.length)return null;var r=this;function i(e,t,n){for(var a,i,u,o,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,s="";-1!=(c=t.indexOf(l,c+1));){var f=r.diff_commonPrefix(e.substring(n),t.substring(c)),p=r.diff_commonSuffix(e.substring(0,n),t.substring(0,c));s.length<p+f&&(s=t.substring(c-p,c)+t.substring(c,c+f),a=e.substring(0,n-p),i=e.substring(n+f),u=t.substring(0,c-p),o=t.substring(c+f))}return 2*s.length>=e.length?[a,i,u,o,s]:null}var u,o,l,c,s,f=i(n,a,Math.ceil(n.length/4)),p=i(n,a,Math.ceil(n.length/2));return f||p?(u=p?f&&f[4].length>p[4].length?f:p:f,e.length>t.length?(o=u[0],l=u[1],c=u[2],s=u[3]):(c=u[0],s=u[1],o=u[2],l=u[3]),[o,l,c,s,u[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var a=!1,r=[],i=0,u=null,o=0,l=0,c=0,s=0,f=0;o<e.length;)0==e[o][0]?(r[i++]=o,l=s,c=f,s=0,f=0,u=e[o][1]):(1==e[o][0]?s+=e[o][1].length:f+=e[o][1].length,u&&u.length<=Math.max(l,c)&&u.length<=Math.max(s,f)&&(e.splice(r[i-1],0,new t.Diff(n,u)),e[r[i-1]+1][0]=1,i--,o=--i>0?r[i-1]:-1,l=0,c=0,s=0,f=0,u=null,a=!0)),o++;for(a&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),o=1;o<e.length;){if(e[o-1][0]==n&&1==e[o][0]){var p=e[o-1][1],d=e[o][1],v=this.diff_commonOverlap_(p,d),m=this.diff_commonOverlap_(d,p);v>=m?(v>=p.length/2||v>=d.length/2)&&(e.splice(o,0,new t.Diff(0,d.substring(0,v))),e[o-1][1]=p.substring(0,p.length-v),e[o+1][1]=d.substring(v),o++):(m>=p.length/2||m>=d.length/2)&&(e.splice(o,0,new t.Diff(0,p.substring(0,m))),e[o-1][0]=1,e[o-1][1]=d.substring(0,d.length-m),e[o+1][0]=n,e[o+1][1]=p.substring(m),o++),o++}o++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var a=e.charAt(e.length-1),r=n.charAt(0),i=a.match(t.nonAlphaNumericRegex_),u=r.match(t.nonAlphaNumericRegex_),o=i&&a.match(t.whitespaceRegex_),l=u&&r.match(t.whitespaceRegex_),c=o&&a.match(t.linebreakRegex_),s=l&&r.match(t.linebreakRegex_),f=c&&e.match(t.blanklineEndRegex_),p=s&&n.match(t.blanklineStartRegex_);return f||p?5:c||s?4:i&&!o&&l?3:o||l?2:i||u?1:0}for(var a=1;a<e.length-1;){if(0==e[a-1][0]&&0==e[a+1][0]){var r=e[a-1][1],i=e[a][1],u=e[a+1][1],o=this.diff_commonSuffix(r,i);if(o){var l=i.substring(i.length-o);r=r.substring(0,r.length-o),i=l+i.substring(0,i.length-o),u=l+u}for(var c=r,s=i,f=u,p=n(r,i)+n(i,u);i.charAt(0)===u.charAt(0);){r+=i.charAt(0),i=i.substring(1)+u.charAt(0),u=u.substring(1);var d=n(r,i)+n(i,u);d>=p&&(p=d,c=r,s=i,f=u)}e[a-1][1]!=c&&(c?e[a-1][1]=c:(e.splice(a-1,1),a--),e[a][1]=s,f?e[a+1][1]=f:(e.splice(a+1,1),a--))}a++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var a=!1,r=[],i=0,u=null,o=0,l=!1,c=!1,s=!1,f=!1;o<e.length;)0==e[o][0]?(e[o][1].length<this.Diff_EditCost&&(s||f)?(r[i++]=o,l=s,c=f,u=e[o][1]):(i=0,u=null),s=f=!1):(e[o][0]==n?f=!0:s=!0,u&&(l&&c&&s&&f||u.length<this.Diff_EditCost/2&&l+c+s+f==3)&&(e.splice(r[i-1],0,new t.Diff(n,u)),e[r[i-1]+1][0]=1,i--,u=null,l&&c?(s=f=!0,i=0):(o=--i>0?r[i-1]:-1,s=f=!1),a=!0)),o++;a&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var a,r=0,i=0,u=0,o="",l="";r<e.length;)switch(e[r][0]){case 1:u++,l+=e[r][1],r++;break;case n:i++,o+=e[r][1],r++;break;case 0:i+u>1?(0!==i&&0!==u&&(0!==(a=this.diff_commonPrefix(l,o))&&(r-i-u>0&&0==e[r-i-u-1][0]?e[r-i-u-1][1]+=l.substring(0,a):(e.splice(0,0,new t.Diff(0,l.substring(0,a))),r++),l=l.substring(a),o=o.substring(a)),0!==(a=this.diff_commonSuffix(l,o))&&(e[r][1]=l.substring(l.length-a)+e[r][1],l=l.substring(0,l.length-a),o=o.substring(0,o.length-a))),r-=i+u,e.splice(r,i+u),o.length&&(e.splice(r,0,new t.Diff(n,o)),r++),l.length&&(e.splice(r,0,new t.Diff(1,l)),r++),r++):0!==r&&0==e[r-1][0]?(e[r-1][1]+=e[r][1],e.splice(r,1)):r++,u=0,i=0,o="",l=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(r=1;r<e.length-1;)0==e[r-1][0]&&0==e[r+1][0]&&(e[r][1].substring(e[r][1].length-e[r-1][1].length)==e[r-1][1]?(e[r][1]=e[r-1][1]+e[r][1].substring(0,e[r][1].length-e[r-1][1].length),e[r+1][1]=e[r-1][1]+e[r+1][1],e.splice(r-1,1),c=!0):e[r][1].substring(0,e[r+1][1].length)==e[r+1][1]&&(e[r-1][1]+=e[r+1][1],e[r][1]=e[r][1].substring(e[r+1][1].length)+e[r+1][1],e.splice(r+1,1),c=!0)),r++;c&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var a,r=0,i=0,u=0,o=0;for(a=0;a<e.length&&(1!==e[a][0]&&(r+=e[a][1].length),e[a][0]!==n&&(i+=e[a][1].length),!(r>t));a++)u=r,o=i;return e.length!=a&&e[a][0]===n?o:o+(t-u)},t.prototype.diff_prettyHtml=function(e){for(var t=[],a=/&/g,r=/</g,i=/>/g,u=/\n/g,o=0;o<e.length;o++){var l=e[o][0],c=e[o][1].replace(a,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(u,"&para;<br>");switch(l){case 1:t[o]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case n:t[o]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[o]="<span>"+c+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],a=0;a<e.length;a++)e[a][0]!==n&&(t[a]=e[a][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,a=0,r=0,i=0;i<e.length;i++){var u=e[i][0],o=e[i][1];switch(u){case 1:a+=o.length;break;case n:r+=o.length;break;case 0:t+=Math.max(a,r),a=0,r=0}}return t+=Math.max(a,r)},t.prototype.diff_toDelta=function(e){for(var t=[],a=0;a<e.length;a++)switch(e[a][0]){case 1:t[a]="+"+encodeURI(e[a][1]);break;case n:t[a]="-"+e[a][1].length;break;case 0:t[a]="="+e[a][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,a){for(var r=[],i=0,u=0,o=a.split(/\t/g),l=0;l<o.length;l++){var c=o[l].substring(1);switch(o[l].charAt(0)){case"+":try{r[i++]=new t.Diff(1,decodeURI(c))}catch(p){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var s=parseInt(c,10);if(isNaN(s)||s<0)throw new Error("Invalid number in diff_fromDelta: "+c);var f=e.substring(u,u+=s);"="==o[l].charAt(0)?r[i++]=new t.Diff(0,f):r[i++]=new t.Diff(n,f);break;default:if(o[l])throw new Error("Invalid diff operation in diff_fromDelta: "+o[l])}}if(u!=e.length)throw new Error("Delta length ("+u+") does not equal source text length ("+e.length+").");return r},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var a=this.match_alphabet_(t),r=this;function i(e,a){var i=e/t.length,u=Math.abs(n-a);return r.Match_Distance?i+u/r.Match_Distance:u?1:i}var u=this.Match_Threshold,o=e.indexOf(t,n);-1!=o&&(u=Math.min(i(0,o),u),-1!=(o=e.lastIndexOf(t,n+t.length))&&(u=Math.min(i(0,o),u)));var l,c,s=1<<t.length-1;o=-1;for(var f,p=t.length+e.length,d=0;d<t.length;d++){for(l=0,c=p;l<c;)i(d,n+c)<=u?l=c:p=c,c=Math.floor((p-l)/2+l);p=c;var v=Math.max(1,n-c+1),m=Math.min(n+c,e.length)+t.length,h=Array(m+2);h[m+1]=(1<<d)-1;for(var g=m;g>=v;g--){var y=a[e.charAt(g-1)];if(h[g]=0===d?(h[g+1]<<1|1)&y:(h[g+1]<<1|1)&y|(f[g+1]|f[g])<<1|1|f[g+1],h[g]&s){var b=i(d,g-1);if(b<=u){if(u=b,!((o=g-1)>n))break;v=Math.max(1,2*n-o)}}}if(i(d+1,n)>u)break;f=h}return o},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,n){if(0!=n.length){if(null===e.start2)throw Error("patch not initialized");for(var a=n.substring(e.start2,e.start2+e.length1),r=0;n.indexOf(a)!=n.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)r+=this.Patch_Margin,a=n.substring(e.start2-r,e.start2+e.length1+r);r+=this.Patch_Margin;var i=n.substring(e.start2-r,e.start2);i&&e.diffs.unshift(new t.Diff(0,i));var u=n.substring(e.start2+e.length1,e.start2+e.length1+r);u&&e.diffs.push(new t.Diff(0,u)),e.start1-=i.length,e.start2-=i.length,e.length1+=i.length+u.length,e.length2+=i.length+u.length}},t.prototype.patch_make=function(e,a,r){var i,u;if("string"==typeof e&&"string"==typeof a&&void 0===r)i=e,(u=this.diff_main(i,a,!0)).length>2&&(this.diff_cleanupSemantic(u),this.diff_cleanupEfficiency(u));else if(e&&"object"==o(e)&&void 0===a&&void 0===r)u=e,i=this.diff_text1(u);else if("string"==typeof e&&a&&"object"==o(a)&&void 0===r)i=e,u=a;else{if("string"!=typeof e||"string"!=typeof a||!r||"object"!=o(r))throw new Error("Unknown call format to patch_make.");i=e,u=r}if(0===u.length)return[];for(var l=[],c=new t.patch_obj,s=0,f=0,p=0,d=i,v=i,m=0;m<u.length;m++){var h=u[m][0],g=u[m][1];switch(s||0===h||(c.start1=f,c.start2=p),h){case 1:c.diffs[s++]=u[m],c.length2+=g.length,v=v.substring(0,p)+g+v.substring(p);break;case n:c.length1+=g.length,c.diffs[s++]=u[m],v=v.substring(0,p)+v.substring(p+g.length);break;case 0:g.length<=2*this.Patch_Margin&&s&&u.length!=m+1?(c.diffs[s++]=u[m],c.length1+=g.length,c.length2+=g.length):g.length>=2*this.Patch_Margin&&s&&(this.patch_addContext_(c,d),l.push(c),c=new t.patch_obj,s=0,d=v,f=p)}1!==h&&(f+=g.length),h!==n&&(p+=g.length)}return s&&(this.patch_addContext_(c,d),l.push(c)),l},t.prototype.patch_deepCopy=function(e){for(var n=[],a=0;a<e.length;a++){var r=e[a],i=new t.patch_obj;i.diffs=[];for(var u=0;u<r.diffs.length;u++)i.diffs[u]=new t.Diff(r.diffs[u][0],r.diffs[u][1]);i.start1=r.start1,i.start2=r.start2,i.length1=r.length1,i.length2=r.length2,n[a]=i}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var a=this.patch_addPadding(e);t=a+t+a,this.patch_splitMax(e);for(var r=0,i=[],u=0;u<e.length;u++){var o,l,c=e[u].start2+r,s=this.diff_text1(e[u].diffs),f=-1;if(s.length>this.Match_MaxBits?-1!=(o=this.match_main(t,s.substring(0,this.Match_MaxBits),c))&&(-1==(f=this.match_main(t,s.substring(s.length-this.Match_MaxBits),c+s.length-this.Match_MaxBits))||o>=f)&&(o=-1):o=this.match_main(t,s,c),-1==o)i[u]=!1,r-=e[u].length2-e[u].length1;else if(i[u]=!0,r=o-c,s==(l=-1==f?t.substring(o,o+s.length):t.substring(o,f+this.Match_MaxBits)))t=t.substring(0,o)+this.diff_text2(e[u].diffs)+t.substring(o+s.length);else{var p=this.diff_main(s,l,!1);if(s.length>this.Match_MaxBits&&this.diff_levenshtein(p)/s.length>this.Patch_DeleteThreshold)i[u]=!1;else{this.diff_cleanupSemanticLossless(p);for(var d,v=0,m=0;m<e[u].diffs.length;m++){var h=e[u].diffs[m];0!==h[0]&&(d=this.diff_xIndex(p,v)),1===h[0]?t=t.substring(0,o+d)+h[1]+t.substring(o+d):h[0]===n&&(t=t.substring(0,o+d)+t.substring(o+this.diff_xIndex(p,v+h[1].length))),h[0]!==n&&(v+=h[1].length)}}}}return[t=t.substring(a.length,t.length-a.length),i]},t.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,a="",r=1;r<=n;r++)a+=String.fromCharCode(r);for(r=0;r<e.length;r++)e[r].start1+=n,e[r].start2+=n;var i=e[0],u=i.diffs;if(0==u.length||0!=u[0][0])u.unshift(new t.Diff(0,a)),i.start1-=n,i.start2-=n,i.length1+=n,i.length2+=n;else if(n>u[0][1].length){var o=n-u[0][1].length;u[0][1]=a.substring(u[0][1].length)+u[0][1],i.start1-=o,i.start2-=o,i.length1+=o,i.length2+=o}if(0==(u=(i=e[e.length-1]).diffs).length||0!=u[u.length-1][0])u.push(new t.Diff(0,a)),i.length1+=n,i.length2+=n;else if(n>u[u.length-1][1].length){o=n-u[u.length-1][1].length;u[u.length-1][1]+=a.substring(0,o),i.length1+=o,i.length2+=o}return a},t.prototype.patch_splitMax=function(e){for(var a=this.Match_MaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=a)){var i=e[r];e.splice(r--,1);for(var u=i.start1,o=i.start2,l="";0!==i.diffs.length;){var c=new t.patch_obj,s=!0;for(c.start1=u-l.length,c.start2=o-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new t.Diff(0,l)));0!==i.diffs.length&&c.length1<a-this.Patch_Margin;){var f=i.diffs[0][0],p=i.diffs[0][1];1===f?(c.length2+=p.length,o+=p.length,c.diffs.push(i.diffs.shift()),s=!1):f===n&&1==c.diffs.length&&0==c.diffs[0][0]&&p.length>2*a?(c.length1+=p.length,u+=p.length,s=!1,c.diffs.push(new t.Diff(f,p)),i.diffs.shift()):(p=p.substring(0,a-c.length1-this.Patch_Margin),c.length1+=p.length,u+=p.length,0===f?(c.length2+=p.length,o+=p.length):s=!1,c.diffs.push(new t.Diff(f,p)),p==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(p.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var d=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==d&&(c.length1+=d.length,c.length2+=d.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=d:c.diffs.push(new t.Diff(0,d))),s||e.splice(++r,0,c)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var a=[];if(!e)return a;for(var r=e.split("\n"),i=0,u=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var o=r[i].match(u);if(!o)throw new Error("Invalid patch string: "+r[i]);var l=new t.patch_obj;for(a.push(l),l.start1=parseInt(o[1],10),""===o[2]?(l.start1--,l.length1=1):"0"==o[2]?l.length1=0:(l.start1--,l.length1=parseInt(o[2],10)),l.start2=parseInt(o[3],10),""===o[4]?(l.start2--,l.length2=1):"0"==o[4]?l.length2=0:(l.start2--,l.length2=parseInt(o[4],10)),i++;i<r.length;){var c=r[i].charAt(0);try{var s=decodeURI(r[i].substring(1))}catch(f){throw new Error("Illegal escape in patch_fromText: "+s)}if("-"==c)l.diffs.push(new t.Diff(n,s));else if("+"==c)l.diffs.push(new t.Diff(1,s));else if(" "==c)l.diffs.push(new t.Diff(0,s));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+s)}i++}}return a},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],a=0;a<this.diffs.length;a++){switch(this.diffs[a][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[a+1]=e+encodeURI(this.diffs[a][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0}(ir);var or={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1,EDITOR_RIGHT:"right",EDITOR_LEFT:"left",RTL:"rtl",LTR:"ltr",SVG_NS:"http://www.w3.org/2000/svg",DIFF_GRANULARITY_SPECIFIC:"specific",DIFF_GRANULARITY_BROAD:"broad"},lr=or,cr=or;var sr,fr=ir.exports,pr=function e(t,n){return ur(t)&&ur(n)&&Object.keys(n).forEach(function(a){ur(n[a])?(t[a]&&ur(t[a])||(t[a]=n[a]),e(t[a],n[a])):Object.assign(t,h({},a,n[a]))}),t},dr=function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=null,i=!0;return function(){for(var u=arguments.length,o=new Array(u),l=0;l<u;l++)o[l]=arguments[l];var c=function(){e.apply(n,o),r=null};a&&i&&(i=!1,c()),r||(r=setTimeout(c,t))}},vr=function(e,t){var n,a=this;return function(){for(var r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];var o=a;clearTimeout(n),n=setTimeout(function(){return e.apply(o,i)},t)}},mr=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\r\n/g,"\n")},hr=function(e,t,n,a){var r=e+(n-e)/2;return"M ".concat(e," ").concat(t," C ").concat(r,",").concat(t," ").concat(r,",").concat(a," ").concat(n,",").concat(a)},gr=function(e,t){var n=e.options.mode;return t===lr.EDITOR_LEFT&&null!==e.options.left.mode&&(n=e.options.left.mode),t===lr.EDITOR_RIGHT&&null!==e.options.right.mode&&(n=e.options.right.mode),n},yr=function(e,t){var n=e.options.theme;return t===cr.EDITOR_LEFT&&null!==e.options.left.theme&&(n=e.options.left.theme),t===cr.EDITOR_RIGHT&&null!==e.options.right.theme&&(n=e.options.right.theme),n},br=function(e,t){return e.ace.getSession().doc.getLine(t)},wr=function(e){return document.getElementById(e.options.left.id).offsetHeight},kr=function(e){var t=document.createElement("div"),n={class:e.className,style:"top:".concat(e.topOffset,"px"),title:e.tooltip,"data-diff-index":e.diffIndex};for(var a in n)t.setAttribute(a,n[a]);return t.innerHTML=e.arrowContent,t},_r=function(e,t){var n=Math.random().toString(36).substr(2,5),a="js-".concat(t,"-").concat(n),r=e.querySelector(".".concat(t));if(r)return r.id=r.id||a,r.id;var i=document.createElement("div");return e.appendChild(i),i.className=t,i.id=a,i.id},Sr={on:function(e,t,n,a){var r="document"===e?document:document.querySelector(e);r.addEventListener(t,function(e){for(var t=r.querySelectorAll(n),i=e.target,u=0,o=t.length;u<o;u+=1)for(var l=i,c=t[u];l&&l!==r;)l===c&&a.call(c,e),l=l.parentNode})}},xr=or;function Tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof Tr))return new Tr(e);var t=this;t.options=pr({ace:window?window.ace:void 0,mode:null,theme:null,element:null,diffGranularity:xr.DIFF_GRANULARITY_BROAD,lockScrolling:!1,showDiffs:!0,showConnectors:!0,maxDiffs:5e3,left:{id:null,content:null,mode:null,theme:null,editable:!0,copyLinkEnabled:!0},right:{id:null,content:null,mode:null,theme:null,editable:!0,copyLinkEnabled:!0},classes:{gutterID:"acediff__gutter",diff:"acediff__diffLine",connector:"acediff__connector",newCodeConnectorLink:"acediff__newCodeConnector",newCodeConnectorLinkContent:"&#8594;",deletedCodeConnectorLink:"acediff__deletedCodeConnector",deletedCodeConnectorLinkContent:"&#8592;",copyRightContainer:"acediff__copy--right",copyLeftContainer:"acediff__copy--left"},connectorYOffset:0},e);var n=t.options.ace;if(!n){return new Error("No ace editor found nor supplied - `options.ace` or `window.ace` is missing")}if(sr=function(e){if(e.Range)return e.Range;var t=e.acequire||e.require;return!!t&&t("ace/range")}(n),!sr){return new Error("Could not require Range module for Ace. Depends on your bundling strategy, but it usually comes with Ace itself. See https://ace.c9.io/api/range.html, open an issue on GitHub ace-diff/ace-diff")}if(null===t.options.element){return new Error("You need to specify an element for Ace-diff - `options.element` is missing")}if(t.options.element instanceof HTMLElement?t.el=t.options.element:t.el=document.body.querySelector(t.options.element),!t.el){var a="Can't find the specified element ".concat(t.options.element);return new Error(a)}t.options.left.id=_r(t.el,"acediff__left"),t.options.classes.gutterID=_r(t.el,"acediff__gutter"),t.options.right.id=_r(t.el,"acediff__right"),t.el.innerHTML='<div class="acediff__wrap">'.concat(t.el.innerHTML,"</div>"),t.editors={left:{ace:n.edit(t.options.left.id),markers:[],lineLengths:[]},right:{ace:n.edit(t.options.right.id),markers:[],lineLengths:[]},editorHeight:null},t.editors.left.ace.getSession().setMode(gr(t,xr.EDITOR_LEFT)),t.editors.right.ace.getSession().setMode(gr(t,xr.EDITOR_RIGHT)),t.editors.left.ace.setReadOnly(!t.options.left.editable),t.editors.right.ace.setReadOnly(!t.options.right.editable),t.editors.left.ace.setTheme(yr(t,xr.EDITOR_LEFT)),t.editors.right.ace.setTheme(yr(t,xr.EDITOR_RIGHT)),t.editors.left.ace.setValue(mr(t.options.left.content),-1),t.editors.right.ace.setValue(mr(t.options.right.content),-1),t.editors.editorHeight=wr(t),setTimeout(function(){t.lineHeight=t.editors.left.ace.renderer.lineHeight,function(e){e.editors.left.ace.getSession().on("changeScrollTop",dr(function(){Fr(e)},16)),e.editors.right.ace.getSession().on("changeScrollTop",dr(function(){Fr(e)},16));var t=e.diff.bind(e);e.editors.left.ace.on("change",t),e.editors.right.ace.on("change",t),e.options.left.copyLinkEnabled&&Sr.on("#".concat(e.options.classes.gutterID),"click",".".concat(e.options.classes.newCodeConnectorLink),function(t){Cr(e,t,xr.LTR)});e.options.right.copyLinkEnabled&&Sr.on("#".concat(e.options.classes.gutterID),"click",".".concat(e.options.classes.deletedCodeConnectorLink),function(t){Cr(e,t,xr.RTL)});var n=vr(function(){e.editors.availableHeight=document.getElementById(e.options.left.id).offsetHeight,e.diff()},250);window.addEventListener("resize",n),Lr=function(){window.removeEventListener("resize",n)}}(t),function(e){e.copyRightContainer=document.createElement("div"),e.copyRightContainer.setAttribute("class",e.options.classes.copyRightContainer),e.copyLeftContainer=document.createElement("div"),e.copyLeftContainer.setAttribute("class",e.options.classes.copyLeftContainer),document.getElementById(e.options.classes.gutterID).appendChild(e.copyRightContainer),document.getElementById(e.options.classes.gutterID).appendChild(e.copyLeftContainer)}(t),Ar(t),t.diff()},1)}Tr.prototype={setOptions:function(e){pr(this.options,e),this.diff()},getNumDiffs:function(){return this.diffs.length},getEditors:function(){return{left:this.editors.left.ace,right:this.editors.right.ace}},diff:function(){var e=this,t=new fr,n=this.editors.left.ace.getSession().getValue(),a=this.editors.right.ace.getSession().getValue(),r=t.diff_main(a,n);t.diff_cleanupSemantic(r),this.editors.left.lineLengths=Er(this.editors.left),this.editors.right.lineLengths=Er(this.editors.right);var i=[],u={left:0,right:0};r.forEach(function(t,n,a){var o=t[0],l=t[1];a[n+1]&&l.endsWith("\n")&&a[n+1][1].startsWith("\n")&&(l+="\n",r[n][1]=l,r[n+1][1]=r[n+1][1].replace(/^\n/,"")),0!==l.length&&(o===xr.DIFF_EQUAL?(u.left+=l.length,u.right+=l.length):o===xr.DIFF_DELETE?(i.push(Ir(e,xr.DIFF_DELETE,u.left,u.right,l)),u.right+=l.length):o===xr.DIFF_INSERT&&(i.push(Ir(e,xr.DIFF_INSERT,u.left,u.right,l)),u.left+=l.length))},this),this.diffs=function(e,t){var n=[];function a(t){return e.options.diffGranularity===xr.DIFF_GRANULARITY_SPECIFIC?t<1:t<=1}t.forEach(function(e,t){if(0!==t){for(var r=!1,i=0;i<n.length;i+=1)if(a(Math.abs(e.leftStartLine-n[i].leftEndLine))&&a(Math.abs(e.rightStartLine-n[i].rightEndLine))){n[i].leftStartLine=Math.min(e.leftStartLine,n[i].leftStartLine),n[i].rightStartLine=Math.min(e.rightStartLine,n[i].rightStartLine),n[i].leftEndLine=Math.max(e.leftEndLine,n[i].leftEndLine),n[i].rightEndLine=Math.max(e.rightEndLine,n[i].rightEndLine),r=!0;break}r||n.push(e)}else n.push(e)});var r=[];return n.forEach(function(e){e.leftStartLine===e.leftEndLine&&e.rightStartLine===e.rightEndLine||r.push(e)}),r}(this,i),this.diffs.length>this.options.maxDiffs||(Nr(this),Mr(this))},destroy:function(){var e=this.editors.left.ace.getValue();this.editors.left.ace.destroy();var t=this.editors.left.ace.container,n=t.cloneNode(!1);n.textContent=e,t.parentNode.replaceChild(n,t);var a=this.editors.right.ace.getValue();this.editors.right.ace.destroy(),(n=(t=this.editors.right.ace.container).cloneNode(!1)).textContent=a,t.parentNode.replaceChild(n,t),document.getElementById(this.options.classes.gutterID).innerHTML="",Lr()}};var Lr=function(){};function Cr(e,t,n){var a,r,i,u,o,l,c=parseInt(t.target.getAttribute("data-diff-index"),10),s=e.diffs[c];n===xr.LTR?(a=e.editors.left,r=e.editors.right,i=s.leftStartLine,u=s.leftEndLine,o=s.rightStartLine,l=s.rightEndLine):(a=e.editors.right,r=e.editors.left,i=s.rightStartLine,u=s.rightEndLine,o=s.leftStartLine,l=s.leftEndLine);for(var f="",p=i;p<u;p+=1)f+="".concat(br(a,p),"\n");var d=r.ace.getSession().getScrollTop();r.ace.getSession().replace(new sr(o,0,l,0),f),r.ace.getSession().setScrollTop(parseInt(d,10)),e.diff()}function Er(e){var t=e.ace.getSession().doc.getAllLines(),n=[];return t.forEach(function(e){n.push(e.length+1)}),n}function Dr(e,t,n,a,r){var i=e.editors[t];a<n&&(a=n);var u="".concat(r," ").concat(a>n?"lines":"targetOnly");i.markers.push(i.ace.session.addMarker(new sr(n,0,a-1,1),u,"fullLine"))}function Fr(e){Nr(e),Mr(e),function(e){var t=e.editors.left.ace.getSession().getScrollTop(),n=e.editors.right.ace.getSession().getScrollTop();e.copyRightContainer.style.cssText="top: ".concat(-t,"px"),e.copyLeftContainer.style.cssText="top: ".concat(-n,"px")}(e)}function Nr(e){e.editors.left.markers.forEach(function(t){e.editors.left.ace.getSession().removeMarker(t)},e),e.editors.right.markers.forEach(function(t){e.editors.right.ace.getSession().removeMarker(t)},e)}function Ir(e,t,n,a,r){var i={},u=/^\n/.test(r);if(t===xr.DIFF_INSERT){var o=jr(e.editors.left,n,r),l=Rr(e.editors.right,a),c=Pr(e.editors.right,l),s=Pr(e.editors.left,o.startLine),f=l;0===Pr(e.editors.left,o.startLine)&&u&&(u=!1),0===o.startChar&&Or(e.editors.right,a,u)&&(f=l+1);var p=o.startLine===o.endLine,d=0;(o.startChar>0||p&&r.length<s)&&c>0&&o.startChar<s&&d++,i={leftStartLine:o.startLine,leftEndLine:o.endLine+1,rightStartLine:f,rightEndLine:f+d}}else{o=jr(e.editors.right,a,r),l=Rr(e.editors.left,n),c=Pr(e.editors.left,l);var v=Pr(e.editors.right,o.startLine),m=l;0===Pr(e.editors.right,o.startLine)&&u&&(u=!1),0===o.startChar&&Or(e.editors.left,n,u)&&(m=l+1);p=o.startLine===o.endLine,d=0;(o.startChar>0||p&&r.length<v)&&c>0&&o.startChar<v&&d++,i={leftStartLine:m,leftEndLine:m+d,rightStartLine:o.startLine,rightEndLine:o.endLine+1}}return i}function jr(e,t,n){var a={startLine:0,startChar:0,endLine:0,endChar:0},r=t+n.length,i=0,u=!1,o=!1;e.lineLengths.forEach(function(e,n){i+=e,!u&&t<i&&(a.startLine=n,a.startChar=t-i+e,u=!0),!o&&r<=i&&(a.endLine=n,a.endChar=r-i+e,o=!0)}),a.startChar>0&&Pr(e,a.startLine)===a.startChar&&(a.startLine++,a.startChar=0),0===a.endChar&&a.endLine--;var l=/\n$/.test(n);return a.startChar>0&&l&&a.endLine++,a}function Pr(e,t){return br(e,t).length}function Rr(e,t){for(var n=e.ace.getSession().doc.getAllLines(),a=0,r=0,i=0;i<n.length;i+=1)if(t<=(r+=n[i].length+1)){a=i;break}return a}function Or(e,t,n){for(var a=e.ace.getSession().doc.getAllLines(),r=0,i=0;i<a.length;i+=1){var u=r+=a[i].length+1;if(n&&(u-=1),t===u)break}return Or}function Ar(e){e.gutterHeight=document.getElementById(e.options.classes.gutterID).clientHeight,e.gutterWidth=document.getElementById(e.options.classes.gutterID).clientWidth;var t=zr(e,xr.EDITOR_LEFT),n=zr(e,xr.EDITOR_RIGHT),a=Math.max(t,n,e.gutterHeight);e.gutterSVG=document.createElementNS(xr.SVG_NS,"svg"),e.gutterSVG.setAttribute("width",e.gutterWidth),e.gutterSVG.setAttribute("height",a),document.getElementById(e.options.classes.gutterID).appendChild(e.gutterSVG)}function zr(e,t){return(t===xr.EDITOR_LEFT?e.editors.left:e.editors.right).ace.getSession().getLength()*e.lineHeight}function Mr(e){!function(e){document.getElementById(e.options.classes.gutterID).removeChild(e.gutterSVG),Ar(e)}(e),function(e){e.copyLeftContainer.innerHTML="",e.copyRightContainer.innerHTML=""}(e),e.diffs.forEach(function(t,n){e.options.showDiffs&&(Dr(e,xr.EDITOR_LEFT,t.leftStartLine,t.leftEndLine,e.options.classes.diff),Dr(e,xr.EDITOR_RIGHT,t.rightStartLine,t.rightEndLine,e.options.classes.diff),e.options.showConnectors&&function(e,t,n,a,r){var i=e.editors.left.ace.getSession().getScrollTop(),u=e.editors.right.ace.getSession().getScrollTop();e.connectorYOffset=1;var o=t*e.lineHeight-i+.5,l=e.gutterWidth+1,c=a*e.lineHeight-u+.5,s=n*e.lineHeight-i+e.connectorYOffset+.5,f=e.gutterWidth+1,p=r*e.lineHeight-u+e.connectorYOffset+.5,d=hr(-1,o,l,c),v=hr(f,p,-1,s),m="L".concat(l,",").concat(c," ").concat(f,",").concat(p),h="L".concat(-1,",").concat(s," ").concat(-1,",").concat(o),g="".concat(d," ").concat(m," ").concat(v," ").concat(h),y=document.createElementNS(xr.SVG_NS,"path");y.setAttribute("d",g),y.setAttribute("class",e.options.classes.connector),e.gutterSVG.appendChild(y)}(e,t.leftStartLine,t.leftEndLine,t.rightStartLine,t.rightEndLine),function(e,t,n){if(t.leftEndLine>t.leftStartLine&&e.options.left.copyLinkEnabled){var a=kr({className:e.options.classes.newCodeConnectorLink,topOffset:t.leftStartLine*e.lineHeight,tooltip:"Copy to right",diffIndex:n,arrowContent:e.options.classes.newCodeConnectorLinkContent});e.copyRightContainer.appendChild(a)}if(t.rightEndLine>t.rightStartLine&&e.options.right.copyLinkEnabled){var r=kr({className:e.options.classes.deletedCodeConnectorLink,topOffset:t.rightStartLine*e.lineHeight,tooltip:"Copy to left",diffIndex:n,arrowContent:e.options.classes.deletedCodeConnectorLinkContent});e.copyLeftContainer.appendChild(r)}}(e,t,n))},e)}var Vr=Xt(Tr),qr=x(),Hr=i("c3",Ue("")),Br=i("ch",Ue([])),Ur=Ue(null),Gr=i("ca",Ue(null)),Jr=i("ce",Ue([])),Wr=i("c6",Ue(!1)),$r=i("cj",Ue(!0)),Yr=i("c8",Ue(null)),Kr=i("cl",Ue(null)),Qr=Ue(null),Xr=function(){Ur.value=null,Gr.value=null,Wr.value=!1},Zr=i("cg",function(){var e=b(p().m(function e(t,n,a){var r,i,u,o,l;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return r={p:1,showRow:500,sort:"name",reverse:"False",path:t,search:n||""},a&&(r.all=a),e.p=1,e.n=2,Vn(r);case 2:return i=e.v,u=i.data,o=[],l=[],u.dir.forEach(function(e){o.push($l("dir",e,void 0,u.path))}),u.files.forEach(function(e){l.push($l("file",e,void 0,u.path))}),e.a(2,[].concat(o,l));case 3:return e.p=3,e.v,e.a(2,[])}},e,null,[[1,3]])}));return function(t,n,a){return e.apply(this,arguments)}}()),ei=function(){var e=b(p().m(function e(t,n,a){var r,i,u,o,l;return p().w(function(e){for(;;)switch(e.n){case 0:if(!t.data.isNew){e.n=1;break}return e.a(2,n([]));case 1:if(r=Bi(mi.id||""),Jr.value=Jr.value.filter(function(e){return".Recycle_bin"!==e}),".Recycle_bin"!==t.data.fileName){e.n=2;break}return qr.error("此为回收站目录，请在右上角按【回收站】按钮打开"),n([]),e.a(2);case 2:if(0!==t.level){e.n=4;break}return i=(null==r?void 0:r.path)||a.path,(u=i.split("/")).pop(),e.n=3,Zr(u.join("/")||"/www");case 3:return o=e.v,Br.value=o,e.a(2,n(o));case 4:if(!(t.level>0)){e.n=6;break}return e.n=5,Zr(t.data.path);case 5:return l=e.v,e.a(2,n(l));case 6:if(!t.upper){e.n=7;break}return e.a(2,n(t.upper));case 7:return e.a(2)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),ti=(i("c4",b(p().m(function e(){var t,n,a,r;return p().w(function(e){for(;;)switch(e.n){case 0:if(Jr.value.length=0,"/"!==(t=Hr.value)){e.n=1;break}return qr.error("已经是根目录了"),e.a(2);case 1:return(n=t.split("/")).pop(),(a=n.join("/"))||(a="/"),Hr.value=a,e.n=2,Zr(a);case 2:r=e.v,Br.value=r,Xr();case 3:return e.a(2)}},e)}))),i("ci",function(){var e=b(p().m(function e(t,n,a){var r,i;return p().w(function(e){for(;;)switch(e.n){case 0:if(Gr.value||(Ur.value=n),t.isFile){e.n=1;break}return e.a(2);case 1:if(null==t||null===(r=t.path)||void 0===r||!r.includes("/dev/pts")){e.n=2;break}return qr.error("系统目录文件不支持编辑"),e.a(2);case 2:if("text"===kl(null===(i=t.fileName)||void 0===i?void 0:i.split(".").pop())){e.n=3;break}return qr.error("暂不支持该类型文件编辑"),e.a(2);case 3:Tl(t);case 4:return e.a(2)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()),function(e,t,n){e.preventDefault(),e.stopPropagation(),Gr.value=t||null,n.value.show(e),Wr.value=!1}),ni=i("ck",function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Zr(Hr.value,null!=t?t:"");case 1:n=e.v,Br.value=n,Xr();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),ai=i("c9",function(e,t,n){var a=n.value.getNode(t);if(a)if(a.childNodes&&a.childNodes.length>0){var r=a.childNodes[0];n.value.insertBefore(e,r.data)}else n.value.append(e,a.data);else n.value.data.unshift(e),n.value.updateKeyChildren(null,n.value.data);Ge(function(){setTimeout(function(){var e,t,n;null===(e=Qr.value)||void 0===e||null===(e=e.$el)||void 0===e||e.focus(),t=Qr,n=Kr,Ge(function(){var e,a=null===(e=t.value)||void 0===e?void 0:e.$el,r=n.value;if(a&&r){var i=a.getBoundingClientRect(),u=r.getBoundingClientRect();(i.top<u.top||i.bottom>u.bottom)&&(r.scrollTop+=i.top-u.top-(r.clientHeight/2-i.height/2))}})},100)}),Xr()}),ri=(i("c5",b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Jr.value.length=0,Xr(),e.n=1,ni();case 1:qr.success("刷新成功"),e.n=3;break;case 2:e.p=2,t=e.v,S(t);case 3:return e.a(2)}},e,null,[[0,2]])}))),function(e){var t=e.data,n=t.path;return t.isFile?n.replace(/\/[^\/]*$/,""):n}),ii=i("c7",function(e){var t=Ur.value,n=Gr.value?Gr.value.path:t?ri(t):Hr.value,a=t?function(e){return e.data.isFile?ri(e):e.data.path}(t):null,r={icon:"icon-".concat(e),ext:"",fileName:"",time:"",ps:"",size:0,type:e,user:"root",rootLevel:"0",isLink:"",isShare:!1,isTop:!1,isFav:!1,isOsPs:!1,isSearch:!1,isReName:!0,isNew:!0,isSync:"",isLock:!1,path:"".concat(n,"/"),tamperProofId:0,isFile:"dir"!==e};return Wr.value=!0,{newFile:r,dataPathFileName:a}}),ui=function(){Jr.value.length=0},oi=Je({__name:"index",props:{rowData:{type:Object,default:function(){return{}}},refreshData:{type:Function,default:function(){}},value:{type:Object,default:function(){return{}}}},emits:["update:value"],setup:function(e,t){var n=t.expose,a=t.emit,r=x(),i=e,u=a,o=Ue(i.rowData),l="",c=function(e,t){var n=e.match(/^(.*\/)/),a=n?n[1]:"";return"".concat(a).concat(t)},s=function(e){e.stopPropagation(),e.preventDefault(),o.value.fileName=e.target.value,v({row:o.value})},f=function(){v({row:o.value})},d=function(){if(o.value.isReName=!1,o.value.isNew){var e,t=Yr.value.getNode(null===(e=o.value)||void 0===e?void 0:e.path);Yr.value.remove(t.data)}Wr.value=!1},v=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.n){case 0:if(""!==(n=t.row).fileName){e.n=1;break}return r.error("文件名不能为空"),e.a(2);case 1:if(!nl(n.fileName)){e.n=2;break}return r.error('文件名不能包含以下字符：\\ / : * ? " < > |'),e.a(2);case 2:if(!n.isNew){e.n=4;break}return a="".concat(n.path,"/").concat(n.fileName),e.n=3,T({loading:"正在新建文件，请稍候...",request:Hn({path:a.replace(/\/\//g,"/"),type:n.type}),message:!0,success:function(e){e.status&&(n.isReName=!1,Wr.value=!1,i.refreshData())}});case 3:e.n=6;break;case 4:if(n.fileName!==l){e.n=5;break}return r.error("文件名没有变化"),e.a(2);case 5:return e.n=6,T({loading:"正在重命名，请稍候...",request:qn({sfile:c(n.path,l),dfile:c(n.path,n.fileName),rename:!0}),message:!0,success:function(e){e.status&&(n.isReName=!1,Wr.value=!1,i.refreshData())}});case 6:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return We(function(){return i.rowData},function(){i.rowData&&(o.value=i.rowData,u("update:value",o.value))},{immediate:!0}),$e(function(){o.value.isReName&&Ge(function(){l=o.value.fileName}),Wr.value=o.value.isReName}),n({reNameInputRef:Qr}),function(e,t){var n=L,a=Ye("focus");return Ke((Xe(),Ze("div",{class:"flex items-center !w-[100%] pr-[.5rem]",onClick:t[2]||(t[2]=tt(function(){},["stop"]))},[Ke(Me(n,{ref_key:"reNameInputRef",ref:Qr,class:"rename-input h-[20px] ml-2px",width:"auto",modelValue:o.value.fileName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.value.fileName=e}),onKeydown:t[1]||(t[1]=et(tt(function(){},["stop"]),["native"])),onKeyup:et(s,["enter","native"])},null,8,["modelValue"]),[[a]]),nt("span",{class:"svgtofont-el-select ml-[.5rem] !text-extraLarge font-800",style:{color:"#20a53a"},onClick:tt(f,["stop"])}),nt("span",{class:"svgtofont-el-close-bold ml-[.5rem] !text-extraLarge font-800",style:{color:"#f34a4a"},onClick:tt(d,["stop"])})],512)),[[Qe,o.value.isReName]])}}}),li=i("c2",at("FILES-ACE-STORE",function(){var e,t=s(),n=t.routerActive,a=t.mainHeight,r=tc().bindKeydown,i=Ue(),o=Ue(),c=Ue(!0),f=Ue(!0),d=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return ui(),Ei(),e.n=1,o.value;case 1:null==(t=e.v)||t.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,pu();case 1:if(!e.v){e.n=2;break}return document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black")&&(null===(t=document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black"))||void 0===t||t.click()),Zo(d),e.a(2,!1);case 2:localStorage.removeItem("aceEditor"),iu(),d();case 3:return e.a(2,!1)}},e)}));return function(){return e.apply(this,arguments)}}(),m=Ue([{title:"保存",icon:"svgtofont-el-select",click:function(){h()&&lu(mi)}},{title:"全部保存",icon:"svgtofont-icon-minmax-black",click:function(){h()&&fu()}},{title:"刷新",icon:"svgtofont-el-refresh-right",click:(e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:h()&&Zi(mi,!0);case 1:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})},{title:"搜索",icon:"svgtofont-el-search",click:function(){h()&&di.value.execCommand("find")}},{title:"替换",icon:"svgtofont-icon-log",click:function(){h()&&di.value.execCommand("replace")}},{title:"跳转行",icon:"svgtofont-icon-login-address",click:function(){h()&&B("jump")}},{title:"字体大小",icon:"svgtofont-left-xterm",click:function(){h()&&B("font")}},{title:"主题",icon:"svgtofont-icon-drag",click:function(){h()&&B("theme")}},{title:"设置",icon:"svgtofont-left-config",click:function(){h()&&B("set")}},{title:"快捷键",icon:"svgtofont-el-question-filled",click:function(){var e=yi.value.find(function(e){return"快捷键"===e.title});if(e)return nu(e.id),void B("shortcutKey");Xi({type:"custom",title:"快捷键",component:rt(function(){return C(function(){return u.import("./index-legacy150.js?v=1763689792")},void 0,u.meta.url)})})}}]),h=function(){return!(!Gi()||"custom"===mi.type)||(w.error("当前页面不支持该操作"),!1)},g=Ue(0),y=Ue(!1),k=Ue(null),_=Ue(""),S=function(){var e=b(p().m(function e(){var t,n,a,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,y.value=!1,Hr.value===_.value){e.n=2;break}return _.value=Hr.value,e.n=1,T({request:Vn({p:1,showRow:500,sort:"name",reverse:"False",path:Hr.value})});case 1:t=e.v,n=t.data,a=n.dir.map(function(e){return $l("dir",e,void 0,n.path)}),r=n.files.map(function(e){return $l("file",e,void 0,n.path)}),Br.value=[].concat(l(a),l(r)),Hr.value=n.path;case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),x=Ue("btn"),L=Ue(!1),D=Ue(""),F=Ue([]),N=Ue(""),I=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Zr(Hr.value,D.value,L.value?"True":void 0);case 1:if(t=e.v,$r.value=!1,t){e.n=2;break}return e.a(2);case 2:Br.value=t,Xr();case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),j=Ue(null),P=Ue(null),R=Ue(),O=function(){var e=b(p().m(function e(t,n){return p().w(function(e){for(;;)switch(e.n){case 0:ei(t,n,i.value);case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),A=function(e){var t=Yr.value.getNode(e);t&&e.isNew&&Yr.value.remove(t),t&&e.isReName&&(e.isReName=!1),Wr.value=!1},z=function(e,t){A(R.value),ti(e,t,P)},M=function(e){return yi.value.some(function(t){return t.path===e.path})?"text-[#cca700]":""},V=Ue(),q=Ue(),H=Ue(!1),B=function(e){hi.value=e,H.value=""!==e,e&&window.addEventListener("click",U)},U=function(){hi.value="",window.removeEventListener("click",U)},G=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Fi();case 1:return e.n=2,ji(t);case 2:di.value=e.v,ce(fi.aceEditor);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:Pi(t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,G(V.value);case 1:if(!i.value){e.n=2;break}return e.n=2,Xi({title:i.value.fileName,type:i.value.type||"editor",path:i.value.path,size:i.value.size});case 2:return J(q.value),e.n=3,er({name:i.value.fileName,path:i.value.path});case 3:return e.n=4,Ci();case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),$=Ue(null),Y=Ue(null),K=Ue({}),Q=function(e,t){if(nu(e),t){var n=t.currentTarget||t.currentTarget,a=$.value,r=a.offsetWidth,i=n.offsetLeft-r/2+n.offsetWidth/2;a.scroll({left:i,behavior:"smooth"})}},X=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:eu(t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Z=function(e){e.preventDefault();var t=e.deltaY;$.value.scrollLeft+=t},ee=it(fi.aceEditor),te=ee.fontSize,ne=ee.tabSize,ae=ee.editorTheme,re=ee.useSoftTabs,ie=Ue(mi.encoding),ue=Ue(0),oe=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return mi.state=1,mi.encoding=t,e.n=1,Ni();case 1:return e.n=2,lu(mi);case 2:ie.value=t;case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),le=ut({line:123,column:321,historys:[],tabsData:{type:"nbsp",number:4},encoding:"utf-8",only_read:!1,mode:"text"}),ce=function(e){e&&(le.tabsData.number=e.tabSize,le.tabsData.type=e.useSoftTabs?"tab":"nbsp")},se=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,xi(ki.value);case 1:return e.n=2,Zi(ki.value,!0);case 2:ki.value={};case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fu();case 1:localStorage.removeItem("aceEditor"),iu(),t&&t();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),pe=Ue(),de=function(e){yi.value=yi.value.filter(function(t){return t.id===e}),pi.value=pi.value.filter(function(t){return t.id===e}),Qi(e);var t=Mi(e);di.value.setSession(t),Yi(di.value),Wi(pe.value.item.isReadOnly),$i()},ve=function(){yi.value.forEach(function(e){var t=Mi(e.id);t&&t.destroy()}),yi.value=[],pi.value=[],di.value.setSession(null)},me=function(){var e=b(p().m(function e(){var t,n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,a=pe.value.type,e.n="close"===a?1:"other"===a?3:"all"===a?5:7;break;case 1:return e.n=2,lu(pe.value.item);case 2:return eu(pe.value.item),e.a(3,7);case 3:if(t=pe.value.item.id,!((n=yi.value.filter(function(e){return e.id!==t&&1===e.state})).length>0)){e.n=4;break}return e.n=4,Promise.all(n.map(function(e){return lu(e)}));case 4:return de(t),e.a(3,7);case 5:return e.n=6,fu();case 6:return ve(),e.a(3,7);case 7:e.n=9;break;case 8:e.p=8,e.v;case 9:return e.a(2,!0)}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}();return{instance:o,fileItem:i,routerActive:n,btnShow:c,catalogueShow:f,onLeave:function(){c.value=!1,setTimeout(function(){c.value=!0},500)},close:d,onCancel:v,column:m,openPopup:function(e){Gi?e.click():w.error("当前页面不支持该操作")},mainHeight:a,operSize:g,changeOpertion:function(e){g.value="search"===e?76:0},isShow:y,inputRef:k,inputFocus:function(){y.value=!0,Ge(function(){var e;null===(e=k.value)||void 0===e||e.focus()})},originalPath:_,changeCurrentPath:S,type:x,isCheck:L,searchValue:D,changeValue:function(e){Jr.value.length=0,D.value="","search"===e?(F.value=Br.value,N.value=Hr.value,Br.value=[],$r.value=!0):(Br.value=F.value,""===Hr.value&&(_.value=N.value),Hr.value=N.value)},searchFile:I,handleCommand:function(e){var t,n,a=ii(e),r=a.newFile,i=a.dataPathFileName||(null!==(t=Gr.value)&&void 0!==t&&t.isFile||null===(n=Gr.value)||void 0===n?void 0:n.path);if(i){var u=Yr.value.getNode(i);u&&(u.expanded=!0)}ai(r,i,Yr)},closeSearch:function(){x.value="btn",Xr()},contextRef:P,treeProps:{label:"fileName",key:"path",isLeaf:"isFile"},initSidebarList:function(){Ge(function(){var e=(i.value.path||"/www").split("/");e.pop(),""===Hr.value&&(_.value=e.join("/")),Hr.value=e.join("/")})},loadNode:O,renderTree:function(e,t){t.node;var n=t.data,a=(t.store,Hi(n.fileName).mode);return Me("span",{class:"flex flex-1 items-center w-full ".concat(n.isReName?"newFiles":"defaultFiles"),onContextmenu:function(e){e.preventDefault(),z(e,n)}},[Me("span",{class:"icon-editor-left ".concat(n.isFile?"ace-".concat(a,"-icon ace-text-icon"):"ace-folder-icon")},null),n.isReName?Me(oi,{class:"el-tree-node__label",title:n.fileName,rowData:n,refreshData:ni,modelValue:R,"onUpdate:modelValue":function(e){return R=e},ref:j},null):Me("span",{class:"el-tree-node__label ".concat(M(n)),title:n.fileName},[n.fileName])])},handleExpandChange:function(e){null!=e&&e.path&&!Jr.value.includes(e.path)&&Jr.value.push(e.path)},handleCollapseChange:function(e){var t=Jr.value.indexOf(null==e?void 0:e.path);-1!==t&&Jr.value.splice(t,1),A(R.value)},editorRef:V,editorDiffRef:q,showToolbar:H,watchEditorCustomToolbar:B,closeToolbar:U,initContent:W,resizeEditor:function(){di.value&&Ge(function(){di.value.resize()})},tabsElement:$,contextmenu:Y,headerRightRow:K,changeTab:Q,getDataChangeTab:function(){Ge(function(){var e,t=yi.value[yi.value.length-1],n=null===(e=$.value)||void 0===e?void 0:e.children[yi.value.length-1];Q(t.id,{currentTarget:n})})},closeTab:X,openContextMenu:function(e){Y.value.show(e),K.value=mi},initContentHeader:function(){Ge(function(){$.value.addEventListener("wheel",Z)})},$resetContentHeader:function(){$.value&&$.value.removeEventListener("wheel",Z)},fontSize:te,tabSize:ne,editorTheme:ae,useSoftTabs:re,encodingData:ie,line:ue,tool:[{title:"跳转到指定行",type:"jump"},{title:"设置编辑器字体大小",type:"font"},{title:"设置编辑器主题",type:"theme"},{title:"编辑器设置",type:"set"},{title:"设置文件保存编码格式",type:"encode"},{title:"设置文件保存空格设置",type:"encode"},{title:"设置文件保存行结束符",type:"lineBreak"}],set:[{title:"自动换行",type:"wrap"},{title:"代码自动完成",type:"enableLiveAutocompletion"},{title:"启用代码段",type:"enableSnippets"},{title:"显示隐藏字符",type:"showInvisibles"},{title:"显示行号",type:"showLineNumbers"}],tabData:[{title:"使用空格缩进",type:"nbsp"},{title:"使用制表符缩进",type:"tab"}],unTitleArr:["shortcutKey","","tab"],saveFont:function(){fi.aceEditor.fontSize>45||fi.aceEditor.fontSize<12?w.error("字体设置范围超过12-45"):(di.value.setFontSize(fi.aceEditor.fontSize),Ni())},jumpLine:function(){ue.value%1==0?di.value.gotoLine(ue.value):w.error("请输入整数")},setCode:oe,setTabType:function(e){"string"==typeof e?(re.value="tab"===e,fi.aceEditor.useSoftTabs="tab"===e):(ne.value=e,fi.aceEditor.tabSize=e),Ni()},setTheme:function(e){ae.value=e,di.value.setTheme("ace/theme/"+e),fi.aceEditor.editorTheme=e,Ni()},seting:function(e){fi.aceEditor[e]=!fi.aceEditor[e],di.value.setOption(e,fi.aceEditor[e]),Ni(),ce(fi.aceEditor)},fileInfo:le,openHistory:function(){E({title:"文件历史版本",area:55,component:function(){return C(function(){return u.import("./index-legacy151.js?v=1763689792")},void 0,u.meta.url)},compData:{editorTabsActive:mi,callback:function(){Zi(mi,!0)}}})},watchAceEditor:ce,diffReHistory:se,onConfirmCheckFile:fe,onCancelCheckFile:function(e){localStorage.removeItem("aceEditor"),iu(),e&&e.onUnmount&&e.onUnmount()},compDataClose:pe,onConfirmClose:me,onCancelClose:function(e){switch(pe.value.type){case"close":pe.value.item.state=0,eu(pe.value.item);break;case"other":de(pe.value.item.id);break;case"all":ve()}e&&e.onUnmount&&e.onUnmount()},init:function(){window.addEventListener("keydown",Si)},$reset:function(){window.removeEventListener("keydown",Si),r()}}})),ci=x(),si="/www/server/panel/BTPanel/static/editor/ace.editor.config.json",fi=i("cr",ut({supportedModes:{},nameOverrides:{},encodingList:[],themeList:[],aceEditor:{fontFamily:"Monaco, Menlo, 'Courier New', monospace",editorTheme:"monokai",fontSize:14,softLabel:!0,useSoftTabs:!0,tabSize:4,wrap:!0,enableSnippets:!0,enableLiveAutocompletion:!0,highlightActiveLine:!0,highlightSelectedWord:!0,animatedScroll:!0,showInvisibles:!1,showFoldWidgets:!0,showLineNumbers:!0,showGutter:!0,displayIndentGuides:!0}})),pi=ot([]),di=ot(null),vi=ot(null),mi=i("cf",lt({id:"",type:"editor",title:"",path:"",mode:"",modeText:"",isReadOnly:!1,stTime:0,state:0,encoding:"UTF-8",historys:[],lineBreak:"LF"})),hi=i("cp",ot("")),gi=i("cq",lt({row:1,column:0,count:1})),yi=i("cb",Ue([])),bi=function(){return window.ace},wi=function(){return Vr},ki=i("ct",Ue()),_i=Ue(null),Si=function(e){if("F5"===e.key||"r"===e.key&&(e.metaKey||e.ctrlKey))return e.preventDefault(),void ci.msg({customClass:"no-icon",message:"编辑器模式下无法刷新网页，请关闭后重试",type:"info",duration:3e3})},xi=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,y({title:"恢复历史文件",width:"35rem",content:"是否恢复历史文件 ".concat(g(Number(t.st_mtime)),"?恢复历史文件后，当前文件内容将会被替换！")});case 1:return e.n=2,F({filename:t.path,history:t.st_mtime});case 2:(n=e.v).status?(ci.success("恢复成功"),a=Ui(mi.id),yi.value.splice(a,1),Zi(t)):ci.request(n),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),Ti=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:if(!document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black")){e.n=1;break}return null===(n=document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black"))||void 0===n||n.click(),t&&Xi(t),e.a(2);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Li=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ci.load("正在获取文件内容，请稍候...");case 1:_i.value=e.v;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ci=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:_i.value&&_i.value.close();case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ei=i("cH",function(){yi.value.some(function(e){return 1===e.state})||(window.onbeforeunload=null)}),Di=function(){var e=b(p().m(function e(t,n){var a,r,i;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return a=ci.load("正在加载，请稍候..."),e.p=1,e.n=2,uu(t,"reverse",n);case 2:return r=e.v,i=r.data,e.a(2,i);case 3:e.p=3,e.v;case 4:return e.p=4,a&&a.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t,n){return e.apply(this,arguments)}}(),Fi=function(){var e=b(p().m(function e(){var t,n,a,r;return p().w(function(e){for(;;)switch(e.n){case 0:return t=sessionStorage.getItem("aceConfig"),n={},t&&(n=JSON.parse(t)),e.n=1,uu(si);case 1:a=e.v,null!=(r=a.data)&&r.data&&(n=JSON.parse(r.data),sessionStorage.setItem("aceConfig",JSON.stringify(n))),fi.supportedModes=n.supportedModes||{Apache_Conf:["^htaccess|^htgroups|^htpasswd|^conf|htaccess|htgroups|htpasswd"],CSS:["css"],HTML:["html|htm|xhtml|vue|we|wpy"],Java:["java"],JavaScript:["js|jsm|jsx"],JSON:["json"],JSP:["jsp"],Makefile:["^Makefile|^GNUmakefile|^makefile|^OCamlMakefile|make"],Markdown:["md|markdown"],MySQL:["mysql"],Nginx:["nginx|conf"],PHP:["php|inc|phtml|shtml|php3|php4|php5|phps|phpt|aw|ctp|module"],Powershell:["ps1"],Python:["py"],SQL:["sql"],SQLServer:["sqlserver"],Text:["txt"],XML:["xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl|xaml"],YAML:["yaml|yml"],images:["icon|jpg|jpeg|png|bmp|gif|tif|emf"]},fi.nameOverrides=n.nameOverrides||{PHP_Laravel_blade:"PHP (Blade Template)"},fi.encodingList=n.encodingList||["ASCII","UTF-8","GBK","GB2312","BIG5"],fi.themeList=n.themeList||["chrome","monokai","tomorrow_night_bright"],fi.aceEditor=n.aceEditor||{editorTheme:"monokai",fontSize:14,softLabel:!1,useSoftTabs:!0,tabSize:4,wrap:!0,enableSnippets:!0,enableLiveAutocompletion:!0,highlightActiveLine:!0,highlightSelectedWord:!0,animatedScroll:!1,showInvisibles:!0,showFoldWidgets:!0,showLineNumbers:!0,showGutter:!0,displayIndentGuides:!1},fi.aceEditor.fontFamily="12px/normal 'Consolas', 'Menlo', 'Monaco', 'Ubuntu Mono', 'source-code-pro', 'Courier New', monospace";case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ni=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return t=JSON.stringify(fi),e.n=1,ou({data:t,path:si,force:1});case 1:return e.a(2,e.v)}},e)}));return function(){return e.apply(this,arguments)}}(),Ii=function(){return fi.aceEditor},ji=function(){var e=b(p().m(function e(t){var n,a,r,i,u,o,l,c,s,f,d,v,m;return p().w(function(e){for(;;)if(0===e.n)return n=bi(),a=Ii(),r=a.editorTheme,i=a.fontSize,u=a.fontFamily,o=a.showInvisibles,l=a.useSoftTabs,c=a.tabSize,s=a.keyboardHandler,f=a.enableLiveAutocompletion,d=a.enableSnippets,v=a.enableBasicAutocompletion,n.config.set("basePath","/static/editor"),n.require("/ace/ext/language_tools"),m=n.edit(t,{theme:"ace/theme/".concat(r),fontSize:i,fontFamily:u,showInvisibles:o,useSoftTabs:l,tabSize:c,showPrintMargin:!1,keyboardHandler:s,enableLiveAutocompletion:f,enableSnippets:d,enableBasicAutocompletion:v}),ru(m),e.a(2,m)},e)}));return function(t){return e.apply(this,arguments)}}(),Pi=function(e){vi.value=e},Ri=i("cQ",function(){var e=b(p().m(function e(t){var n,a,r,i,u,o,l,c,s,f,d;return p().w(function(e){for(;;)if(0===e.n)return n=Ii(),a=n.editorTheme,r=t.theme,i=void 0===r?"ace/theme/".concat(a):r,u=t.mode,o=void 0===u?"":u,l=t.left,c=void 0===l?{}:l,s=t.right,f=void 0===s?{}:s,d={element:vi.value,theme:i,mode:o,left:m({content:"",editable:!1,copyLinkEnabled:!1},c),right:m({content:"",editable:!1,copyLinkEnabled:!1},f)},Oi(d),e.a(2,d)},e)}));return function(t){return e.apply(this,arguments)}}()),Oi=function(e){return new(wi())(e)},Ai=function(e,t){var n=bi(),a=Ii().wrap,r=n.createEditSession(t,"ace/mode/".concat(e));return r.setOptions({wrap:a,readOnly:!1}),au(r),r},zi=function(e){di.value.setSession(e)},Mi=i("cO",function(e){var t;return e?null===(t=pi.value.find(function(t){return t.id===e}))||void 0===t?void 0:t.session:di.value.getSession()}),Vi=function(e){return e?pi.value.find(function(t){return t.id===e}):di.value.getSession()},qi=function(e){return e?pi.value.findIndex(function(t){return t.id===e}):-1},Hi=function(e){var t=e.match(/\.([0-9A-z]*)$/);for(var n in t=Array.isArray(t)?t[1]:"text",fi.supportedModes)for(var a=fi.supportedModes[n][0].split("|"),r=n.toLowerCase(),i=0;i<a.length;i++)if(t.toLowerCase()==a[i].toLowerCase())return{name:n,mode:r};return{name:"Text",mode:"text"}},Bi=function(e){return yi.value.find(function(t){return t.id===e})},Ui=function(e){return yi.value.findIndex(function(t){return t.id===e})},Gi=i("cv",function(){return yi.value.length>0}),Ji=function(e,t){var n=li().getDataChangeTab;delete e.session;var a=m(m({},{id:"",type:"editor",title:"",path:"",mode:"",modeText:"",isReadOnly:!1,stTime:0,state:0}),e);return yi.value.push(a),n(),"editor"===e.type&&t&&pi.value.push({id:a.id,session:t}),a},Wi=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];di.value.setReadOnly(e)},$i=function(){di.value.focus()},Yi=function(e){gi.count=e.session.getLength()},Ki=function(e){return yi.value.filter(function(t){return t.path===e})},Qi=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:(n=Bi(t))&&(mi.id=t,mi.type=n.type,mi.title=n.title,"editor"===n.type?(mi.path=n.path,mi.mode=n.mode,mi.modeText=n.modeText,mi.isReadOnly=n.isReadOnly,mi.stTime=n.stTime,mi.state=n.state,mi.encoding=n.encoding,mi.historys=n.historys,mi.next=n.next,mi.pagination=n.pagination,mi.lineBreak=n.lineBreak):mi.component=n.component);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Xi=i("cP",function(){var e=b(p().m(function e(t){var n,a,r,i,u,o,l,c,s,f,d,v,h,g,y;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n={},"editor"!==t.type){e.n=3;break}if(!(a=Ki(t.path)).length){e.n=1;break}return e.a(2,nu(a[0].id));case 1:return e.n=2,uu(t.path);case 2:r=e.v,i=r.data,u=r.status,o=r.msg,l=i,u?(o&&"success"!==o&&ci.warn(o),t.size>3145728&&ci.warn("抱歉！文件大小超过3M，暂不支持在线编辑！"),s=t.filename||(null===(c=t.path)||void 0===c?void 0:c.split("/").pop()),f="",d=Hi(s),v=d.mode,h=d.name,f=v,t.mode&&(f=t.mode),g=mu(l.data),y=Ai(f,l.data),n=Ji({id:D(10),path:t.path,type:"editor",title:s,mode:f,modeText:h,state:0,encoding:l.encoding,stTime:Number(l.st_mtime),isReadOnly:l.only_read,historys:l.historys||[],next:(null==l?void 0:l.next)||!1,pagination:1,lineBreak:g},y),zi(y),Wi(l.only_read)):ci.error(o),e.n=4;break;case 3:n=Ji(m(m({},t),{},{id:D(10),state:0}));case 4:Qi(n.id),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()),Zi=function(){var e=b(p().m(function e(t){var n,a,r,i,u,o=arguments;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],"editor"===t.type){e.n=1;break}return e.a(2);case 1:return a=ci.load("获取文件内容中，请稍候..."),e.p=2,r=Bi(t.id||""),e.n=3,uu(t.path);case 3:i=e.v,u=i.data,n&&di.value.session.setValue(u.data),r.stTime=Number(u.st_mtime),r.encoding=u.encoding,r.state=0,mi.state=0,r.isReadOnly=u.only_read,r.historys=u.historys||[],ci.msg({message:"文件内容已更新！",type:"success"}),Qi(r.id),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,a&&a.close(),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(t){return e.apply(this,arguments)}}(),eu=i("cm",function(e){var t=e.id,n=Ui(t),a=yi.value[n]||null,r=Mi(t),i=qi(t);if(e.state)return tu(e);if(a&&"editor"===a.type&&(null==r||r.destroy()),yi.value.length>1){var u=yi.value[n+1]?n+1:n-1,o=yi.value[u].id;nu(o,!0)}yi.value.splice(n,1),"editor"===a.type&&r&&(pi.value[i].session.destroy(),pi.value.splice(i,1))}),tu=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:try{el("close",t)}catch(n){}case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),nu=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ui(mi.id||""),a=Ui(e),r=yi.value[a],i=Vi(e);if("editor"===r.type){var u;if(mi.id===e&&t)null!==(u=pi.value[n])&&void 0!==u&&u.session&&(pi.value[n].session=Mi());i&&(zi(i.session),Yi(i)),Wi(r.isReadOnly),$i()}Qi(e)},au=function(e){gi.count=e.getLength(),e.on("change",function(){var e=Bi(mi.id||"");0===e.state&&(e.state=1,mi.state=1,window.onbeforeunload=function(){return"您有未保存的更改，确定要离开吗？"})}),e.selection.on("changeCursor",function(){var t=di.value.getCursorPosition();gi.count=e.getLength(),gi.row=t.row+1,gi.column=t.column}),e.on("changeScrollTop",ct(function(){var t=b(p().m(function t(n){var a,r,i,u,o,l,c,s;return p().w(function(t){for(;;)switch(t.n){case 0:if(a=e.selection.session,r=a.getScrollTop(),i=a.getScreenLength()*di.value.renderer.lineHeight,u=di.value.renderer.$size.scrollerHeight,!(r+u>=i-100)){t.n=2;break}if(!(o=Bi(mi.id)).next){t.n=2;break}return t.n=1,Di(o.path,o.pagination);case 1:l=t.v,o.next=l.next,null!=l&&l.next&&(o.pagination&&o.pagination++,s=null===(c=Mi(o.id))||void 0===c?void 0:c.getValue(),di.value.session.setValue(s+l.data));case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),500)},ru=function(e){var t=li().watchEditorCustomToolbar;e.commands.addCommand({name:"saveFile",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(){var e=Bi(mi.id||"");lu(e)}}),e.commands.addCommand({name:"saveAllFile",bindKey:{win:"Ctrl-Shift-S",mac:"Command-Shift-S"},exec:function(){fu()}}),e.commands.addCommand({name:"closeFile",bindKey:{win:"Ctrl-W",mac:"Command-W"},exec:function(){eu(mi.id)}}),e.commands.addCommand({name:"closeAllFile",bindKey:{win:"Ctrl-Shift-W",mac:"Command-Shift-W"},exec:function(){yi.value.forEach(function(e){eu(e.id)})}}),e.commands.addCommand({name:"goToLine",bindKey:{win:"Ctrl-I",mac:"Command-I"},exec:function(){Gi()&&"custom"!==mi.type?t("jump"):ci.error("当前页面不支持该操作")},readonly:!1}),e.commands.addCommand({name:"undo",bindKey:{win:"Ctrl-Z",mac:"Command-Z"},exec:function(){e.undo()}})},iu=function(){di.value=null,mi.id="",mi.title="",mi.path="",mi.mode="",mi.modeText="",mi.isReadOnly=!1,mi.stTime=0,mi.state=0,mi.encoding="UTF-8",mi.historys=[],yi.value=[],pi.value=[]},uu=i("cS",function(){var e=b(p().m(function e(t,n,a){var r;return p().w(function(e){for(;;)switch(e.n){case 0:return r={path:t,mode:n,p:a},n||delete r.mode,a||delete r.p,e.n=1,zn(r);case 1:return e.a(2,e.v)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()),ou=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return n={path:t.path,data:t.data,encoding:t.encoding||"UTF-8",st_mtime:t.st_mtime,force:t.force||0,skip_conf_check:t.skip_conf_check||!1},t.skip_conf_check||delete n.skip_conf_check,e.n=1,N(n);case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}(),lu=function(){var e=b(p().m(function e(t){var n,a,r,i,u,o,l,c,s,f,d=arguments;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=d.length>1&&void 0!==d[1]?d[1]:0,a=d.length>2&&void 0!==d[2]&&d[2],0!==t.state){e.n=1;break}return e.a(2,ci.msg({customClass:"no-icon",message:"文件未修改,无需保存！",type:"info"}));case 1:return r=ci.load("保存中，请稍候..."),Wi(!0),e.p=2,i=Mi(t.id),u=i.getValue(),o=t.path,l=t.encoding,c=t.stTime,s={path:o,data:u,st_mtime:c,encoding:l,force:n},a&&(s.skip_conf_check=!0),t.state=3,e.n=3,ou(s);case 3:if((f=e.v).status){e.n=6;break}if(null==f||!f.conf_check){e.n=4;break}return e.a(2,su(t,f.msg));case 4:return e.a(2,cu(t,f.msg));case 5:e.n=7;break;case 6:ci.request(f);case 7:return Ei(),e.n=8,Zi(t,!1);case 8:e.n=10;break;case 9:e.p=9,e.v;case 10:return e.p=10,r&&r.close(),Wi(!1),e.f(10);case 11:return e.a(2)}},e,null,[[2,9,10,11]])}));return function(t){return e.apply(this,arguments)}}(),cu=function(){var e=b(p().m(function e(t,n){var a;return p().w(function(e){for(;;)switch(e.n){case 0:return a=n.substr(0,n.length-1)+"，或选择强制保存。",t.state=1,e.n=1,y({title:"提示",width:"35rem",icon:"warning",content:a});case 1:return e.n=2,y({title:"是否强制保存",width:"35rem",icon:"warning",isHtml:!0,content:'<span style="color:#333">检测到文件已被修改，强制保存将会<span style="color:red">覆盖文件内容</span>，请谨慎操作!</span>'});case 2:return e.n=3,lu(t,1);case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),su=function(){var e=b(p().m(function e(t,n){var a;return p().w(function(e){for(;;)switch(e.n){case 0:return a=n.substr(0,n.length-1)+"，或选择强制保存。",t.state=1,e.n=1,y({title:"提示",width:60,isHtml:!0,content:'<div class="custom-message-error-html">\n\t\t\t\t\t'.concat(a,'\n\t\t\t\t\t<div class="leading-[1.6rem] mt-1rem">请确认您要保存的配置文件内容无误与提示信息无关，注本次保存不会重载nginx/apache配置</div>\n\t\t\t\t</div>'),confirmText:"继续保存"});case 1:return e.n=2,lu(t,0,!0);case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),fu=function(){var e=b(p().m(function e(){var t,n,a,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:for(t=ci.load("保存中，请稍候..."),e.p=1,n=[],a=0;a<yi.value.length;a++)1===(r=yi.value[a]).state&&n.push(lu(r,0));return e.n=2,Promise.all(n);case 2:Ei(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,t&&t.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),pu=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)if(0===e.n)return t=!1,yi.value.length>0&&(t=yi.value.some(function(e){return 1===e.state})),e.a(2,t)},e)}));return function(){return e.apply(this,arguments)}}(),du=i("cn",function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.n){case 0:n=t.id,yi.value.filter(function(e){return e.id!==n&&1===e.state}).length>0?el("other",t):(yi.value=yi.value.filter(function(e){return e.id===n}),pi.value=pi.value.filter(function(e){return e.id===n}),Qi(n),a=Mi(n),di.value.setSession(a),Yi(di.value),Wi(t.isReadOnly),$i());case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),vu=i("co",b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,pu();case 1:if(e.v)try{el("all")}catch(t){}else yi.value.forEach(function(e){var t=Mi(e.id);t&&t.destroy()}),yi.value=[],pi.value=[],di.value.setSession(null);case 2:return e.a(2)}},e)}))),mu=function(e){return e&&-1!==(e.length>2e4?e.substring(0,2e4):e).indexOf("\r\n")?"CRLF":"LF"},hu=i("cs",function(e,t){var n=Bi(e);if(n&&n.lineBreak!==t){var a,r="CRLF"===t?"CRLF":"LF",i="CRLF"===n.lineBreak?"CRLF":"LF";y({title:"更改行结束符",isHtml:!0,content:'<div class="custom-message-error-html">\n\t\t\t\t\t确定要将文件 "'.concat(n.title,'" 的行结束符从 ').concat(i,' 更改为<span style="color:red">').concat(r,'</span> 吗？\n\t\t\t\t\t<div class="leading-[1.6rem]">\n\t\t\t\t\t\t此操作将修改文件中所有的行结束符，并在<span style="color:red">保存</span>后生效。\n\t\t\t\t\t</div>\n\t\t\t\t</div>'),confirmText:"保存",cancelText:"取消",onConfirm:(a=b(p().m(function e(){var a,i;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,a=Mi(n.id)){e.n=1;break}return e.a(2,!0);case 1:return i=a.getValue(),"CRLF"===t&&"LF"===n.lineBreak?i=i.replace(/\n/g,"\r\n"):"LF"===t&&"CRLF"===n.lineBreak&&(i=i.replace(/\r\n/g,"\n")),a.setValue(i),n.lineBreak=t,0===n.state&&(n.state=1),e.n=2,lu(n);case 2:return ci.success("已将行结束符更改为 ".concat(r)),e.a(2,!0);case 3:return e.p=3,e.v,ci.error("更改行结束符失败"),e.a(2,!1)}},e,null,[[0,3]])})),function(){return a.apply(this,arguments)})}).catch(function(){})}}),gu=i("cu",function(){pi.value.forEach(function(e){return e.destroy()}),pi.value=[]}),yu=Object.freeze(Object.defineProperty({__proto__:null,editorCustomToolbar:hi,editorDiffExample:vi,editorExample:di,editorOption:fi,editorRowColumnCount:gi,editorSeesion:pi,editorTabs:yi,editorTabsActive:mi,enableRefresh:Ei,handleKeyDown:Si,handleScroll:Di,minimizeEvent:Ti,reHistoryRow:ki,recoverEvent:xi,useAce:bi,useCheckFileChange:pu,useCheckFileCompatibility:function(e){var t=Hi(e).mode;return fi.supportedModes[t]},useCheckTabsEmpty:Gi,useCloseAllTabs:vu,useCloseOtherTabs:du,useCreateAceEditorExample:ji,useCreateAceEditorSession:Ai,useCreateDiffEditorExample:Pi,useCreateDiffEditorView:Oi,useCreateEditorTabs:Xi,useCreateTabsItem:Ji,useCutEditorTabs:nu,useDestroyAllEditorSession:gu,useDestroyEditorData:iu,useDetectLineBreakType:mu,useDiffAce:wi,useEditorLoading:Li,useEditorPathFilter:Ki,useEditorUnLoading:Ci,useEventMount:ru,useFindIndexTabs:Ui,useFindTabsData:Bi,useGetAceEditorSession:Mi,useGetAceEditorSessionData:Vi,useGetAceEditorSessionIndex:qi,useGetAceOptions:Ii,useGetEditorOptions:Fi,useGetEditorTabsLineCount:Yi,useGetFileBody:uu,useGetFileMode:Hi,useInsertAceEditorSession:zi,useMonitorMount:au,useRandomId:function(){return D(10)},useRefreshFileContent:Zi,useRemoveEditorCheckTabs:tu,useRemoveEditorTabs:eu,useSaveAllFiles:fu,useSaveEditorOptions:Ni,useSaveFileBody:ou,useSaveFiles:lu,useSetDiffEditorOptions:Ri,useSetEditorTabsActive:Qi,useSetEditorTabsFocus:$i,useSetEditorTabsReadOnly:Wi,useSetLineBreak:hu,useforcedSaveConfig:su},Symbol.toStringTag,{value:"Module"})),bu=i("cG",at("FILES-BATCH-SET-AUTH-STORE",function(){var e=tc(),t=st(e).fileTabActiveData,n=e.refreshFilesList,a=Ue([]),r=ut({owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),i=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({request:_a({filename:"".concat(t.value.param.path)}),success:function(e){if(e.status){var t=e.data;r.auth=t.chmod,r.user=t.chown,u(Number(t.chmod))}else w.error(e.msg)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(e){256&(e=parseInt(e.toString(),8))?r.owner.push("r"):r.owner=r.owner.filter(function(e){return"r"!==e}),128&e?r.owner.push("w"):r.owner=r.owner.filter(function(e){return"w"!==e}),64&e?r.owner.push("x"):r.owner=r.owner.filter(function(e){return"x"!==e}),32&e?r.group.push("r"):r.group=r.group.filter(function(e){return"r"!==e}),16&e?r.group.push("w"):r.group=r.group.filter(function(e){return"w"!==e}),8&e?r.group.push("x"):r.group=r.group.filter(function(e){return"x"!==e}),4&e?r.public.push("r"):r.public=r.public.filter(function(e){return"r"!==e}),2&e?r.public.push("w"):r.public=r.public.filter(function(e){return"w"!==e}),1&e?r.public.push("x"):r.public=r.public.filter(function(e){return"x"!==e}),r.owner=Array.from(new Set(r.owner)),r.group=Array.from(new Set(r.group)),r.public=Array.from(new Set(r.public))},o=function(){var e=b(p().m(function e(i){var u;return p().w(function(e){for(;;)switch(e.n){case 0:if(!((u=r.auth.toString()).length>3)){e.n=1;break}return w.error("请输入正确权限"),e.a(2);case 1:if(!r.checkNumber.match(/\D/g)){e.n=2;break}return w.error("请输入正确权限"),e.a(2);case 2:if(!u.match(/\D/g)){e.n=3;break}return w.error("请输入正确权限"),e.a(2);case 3:for(;u.length<3;)u="0"+u;return e.n=4,T({loading:"正在设置文件权限，请稍后...",request:Ha({user:r.user,access:u,all:r.isDir?"True":"False",type:"3",path:t.value.param.path,data:JSON.stringify(a.value)}),message:!0,success:function(e){e.status&&(n(),i&&i())}});case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return{checkList:r,fileList:a,ownerOptions:[{label:"root",value:"root"},{label:"www",value:"www"},{label:"mysql",value:"mysql"}],reversePermission:function(){var e=0,t=function(t,n,a,r){t.includes("r")&&(e|=n),t.includes("w")&&(e|=a),t.includes("x")&&(e|=r)};for(t(r.owner,256,128,64),t(r.group,32,16,8),t(r.public,4,2,1),r.auth=e.toString(8);r.auth.length<3;)r.auth="0"+r.auth},checkNumber:function(e){r.checkNumber=e;var t=String(e).replace(/[^\d]/g,"").slice(0,3);r.auth=t,u(Number(r.auth))},changeUser:function(e){r.user=e},setFileAuths:o,getFileAuths:i,$reset:function(){Object.assign(r,{owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),a.value=[]}}})),wu=i("cF",at("FILES-CLOUD-STORAGE-STORE",function(){var e=tc(),t=st(e).fileTabActiveData,n=e.refreshFilesList,a=e.getRealTask,r=Ue(),i=Ue(),u=Ue(),o=Ue(!1),l=Ue([]),c=Ue(!0),s=Ue(""),f=Ue([]),d=Ue(""),v=Ue([]),m=Ue([]),h=Ue([Yt({key:"name"}),{label:"文件名",prop:"name",width:"300",render:function(e){return Me("span",{class:[null===e.type?"bt-open-dir folder-open-icon":"bt-open-dir file-text-icon"]},[Me("i",{class:"icon"},null),Me("span",{onClick:function(t){null===e.type&&y((""===d.value?"":d.value+"/")+e.name)}},[e.name])])}},{label:"大小",prop:"size",render:function(e){var t=null!==e.size?I(Number(e.size)):"-";return null===e.type&&(t="-"),ft("span",t)}},{label:"更新时间",prop:"time",render:function(e){return""===e.type?"<span>"+g(e.time)+"</span>":"-"}}]),y=function(e){d.value!==e&&(d.value=e,k())},k=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,o.value=!0,e.n=1,ar({path:d.value,pname:r.value.pname});case 1:if(n=e.v,o.value=!1,n.status){e.n=2;break}return L(),w.msg({message:"请先配置云存储",type:"warning"}),ws({name:r.value.pname}),e.a(2);case 2:l.value=(null===(t=n.data)||void 0===t||null===(t=t.list)||void 0===t?void 0:t.sort(function(e,t){return null===e.type?-1:null===t.type?1:0}))||[],x(l.value),n.data.hasOwnProperty("path")&&_(n.data.path),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),_=function(e){var t="";d.value=e,v.value=[{title:"根目录",path:"",type:"dir"}],""!==e?(e&&"/"===e[e.length-1]&&(e=e.slice(0,-1)),e.split("/").forEach(function(e,n){t+="/".concat(e).replace(/\/\//g,"/"),v.value.push({title:""===e&&0==n?"根目录":e,path:t,type:"dir"})}),f.value=v.value):f.value=v.value};Ue(!1);var S=function(){var e=b(p().m(function e(){var i,u,o,l,c;return p().w(function(e){for(;;)switch(e.n){case 0:if(i=r.value,u=i.pname,o=i.type,l={},"down"!=o){e.n=2;break}if(0!==m.value.length){e.n=1;break}return w.error("请选择勾选需要下载的文件"),e.a(2);case 1:l={name:u,url:m.value[0].download,path:t.value.param.path,filename:m.value[0].name},e.n=3;break;case 2:l={name:u,filename:r.value.rowData.path,object_name:d.value};case 3:return e.n=4,T({loading:"正在执行中，请稍后...",request:rr(l,o),message:!0,success:function(e){e.status&&(a(),n())}});case 4:return c=e.v,e.a(2,c.status)}},e)}));return function(){return e.apply(this,arguments)}}(),x=function(e){Ge(function(){var t=document.querySelectorAll(".oss-table .el-table__body-wrapper .el-checkbox");"down"===r.value.type?t.forEach(function(t,n){null===e[n].type?t.style.display="none":t.style.display="block"}):t.forEach(function(e,t){e.style.display="none"})})},L=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i.value;case 1:null==(t=e.v)||t.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{compData:r,instance:i,ossTable:u,isTagMode:c,temporaryPath:s,showPathList:f,tableColumns:h,tableData:l,loading:o,handleSelectionChange:function(e){e.length>1?(u.value.getTable().clearSelection(),u.value.getTable().toggleRowSelection(e.pop())):m.value=e},temporaryBlur:function(){c.value=!0,s.value=""},temporaryFocus:function(){c.value=!1,s.value=d.value},temporaryEnter:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.value;"/"!==(n=n.replace(/\/+/g,"/"))&&(n=n.replace(/\/+$/g,"")),n!==s.value&&(d.value=n,k()),e.target.blur()},goBack:function(){var e;1!==v.value.length&&(d.value=(null===(e=v.value[v.value.length-2])||void 0===e?void 0:e.path)||"/",k())},watchTableData:x,getDirList:k,filePathJump:y,onConfirm:S,$reset:function(){c.value=!0,s.value="",d.value="",l.value=[],f.value=[],v.value=[],m.value=[]}}})),ku=i("c0",at("FILES-COMPRESS-PREVIEW-STORE",function(){var e,t,n,a=tc(),i=st(a).fileTabActiveData,u=a.refreshFilesList,c=Ue(""),s=Ue(),f=Ue(),d=ut({file:{data:{},path:"当前压缩包"},isDblclick:!1,addList:[]}),v=Ue(!1),m=Ue(!0),h=ut({visible:!1,form:{filename:"",path:"/"}}),g=Ue(!1),k=Ue(!1),_=ut({tableBatchData:[{label:"批量解压",value:"decompress",isRefBatch:!0,event:function(){}},{label:"批量删除",value:"delete",isRefBatch:!0,event:function(){}}],batchConfig:{isRecurrence:!1,describe:{title:"",th:"",message:"",propsValue:"name"},tableDisplayConfig:{label:"状态",prop:"status",render:function(e){return ft("span",{})}}},decompressTableColumn:[{label:"文件名",prop:"filename"},{label:"大小",prop:"file_size",width:70,render:function(e){return ft("span",{},e.file_size?I(e.file_size):"--")}}],selectList:[]}),S=Ue(),x=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:Gc({type:"file",path:h.form.path,change:function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.n){case 0:return n=d.file.path.split("/").slice(1).join("/").replace("当前压缩包",""),v.value=!0,d.addList=[t],a="zip"===s.value.ext?Ta:La,e.n=1,T({loading:"正在添加文件，请稍后...",request:a({data:JSON.stringify({sfile:s.value.path,r_path:n?"/".concat(n):"",f_list:d.addList})}),message:!0,success:A});case 1:v.value=!1;case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),L=function(e){d.isDblclick=!0,e.date_time||(d.file.path="".concat(d.file.path,"/").concat(e.filename),setTimeout(function(){d.isDblclick=!1},200))},C=function(){var e=b(p().m(function e(t,n,a){return p().w(function(e){for(;;)switch(e.n){case 0:a.stopPropagation(),a.preventDefault(),Object.assign(h,{visible:!0,form:{filename:t.filename,path:i.value.param.path||"/"}});case 1:return e.a(2)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),E=function(e){return e.shift(),e.join("/")},D=function(e){if(0===_.selectList.length){var t=e.findIndex(function(e){return e.filename===h.form.filename});return[e[t].uploadName]}return _.selectList.map(function(e){return e.uploadName})},F=function(){var t=b(p().m(function t(n,a){var r,i,o,l;return p().w(function(t){for(;;)switch(t.n){case 0:return r=JSON.parse(JSON.stringify(a)),i={data:JSON.stringify({zip_path:E(r),sfile:s.value.path,extract_path:h.form.path+"/",filenames:D(n)})},o="zip"===s.value.ext?Na:Ia,t.n=1,T({loading:"正在解压文件，请稍后...",request:o(i)});case 1:if(!(l=t.v).status){t.n=3;break}if(!l.type){t.n=2;break}return Ko(l.data,i,"zip"===s.value.ext?Na:Ia),h.visible=!1,t.a(2);case 2:w.success("解压成功"),u(),t.n=4;break;case 3:w.request(l);case 4:e&&e(),h.visible=!1;case 5:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),N=function(){var e=b(p().m(function e(t,n,a){var r,i,u,o,l;return p().w(function(e){for(;;)switch(e.n){case 0:if(a.stopPropagation(),a.preventDefault(),"text"===kl(null===(r=t.fileName)||void 0===r?void 0:r.split(".").pop())){e.n=1;break}return w.error("暂不支持该类型文件编辑"),e.a(2);case 1:return i=d.file.path.split("/").filter(function(e){return""!==e}),u={data:JSON.stringify({sfile:s.value.path,filename:(i.length>1?i.join("/").replace("当前压缩包/","")+"/":"")+t.filename})},o="zip"===s.value.ext?Ca:Ea,e.n=2,T({loading:"正在获取文件，请稍后...",request:o(u)});case 2:(l=e.v).status?Jo(l.data,s.value,t.filename,i.length>1?i.join("/").replace("当前压缩包",""):""):w.request(l);case 3:return e.a(2)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),j=function(e){var t=[];return Object.entries(e).forEach(function(e){var n=r(e,2),a=(n[0],n[1]);if("object"===o(a))if(a.is_dir)t.push("".concat(a.filename,"/"));else if(a.hasOwnProperty("fullpath"))t.push("".concat(a.fullpath));else{var i=j(a);t=t.concat(i)}}),t},P=function(e){var t=[];return _.selectList.forEach(function(e){if(e.uploadName.includes("/dddir")){var n=j(e);t=t.concat(n)}else e.is_dir?t.push("".concat(e.filename,"/")):t.push("".concat(e.fullpath))}),t},R=function(){var t=b(p().m(function t(n,a){var r,i,u,o,c,f,v;return p().w(function(t){for(;;)switch(t.n){case 0:if((r=d.file.path.split("/").filter(function(e){return""!==e})).join("/").replace("当前压缩包/","").replace("当前压缩包",""),i=r.length>1?r.join("/").replace("当前压缩包/","")+"/":"",!(0===_.selectList.length)){t.n=1;break}return t.n=1,y({title:"删除文件【".concat(n.filename,"】"),content:"您真的要删除文件【".concat(n.filename,"】吗？")});case 1:return u=[],o=[],0!==n.is_dir&&0===_.selectList.length&&(u=j(n)),o=_.selectList.length>0?P():[].concat(l(u),["".concat(i).concat(n.filename).concat(0!==n.is_dir?"/":"")]),c={data:JSON.stringify({sfile:s.value.path,filenames:o})},f="zip"===s.value.ext?ja:Pa,g.value=!0,t.n=2,T({loading:"正在删除文件，请稍后...",request:f(c),message:!0,success:function(e){_.selectList=[],e.status&&(A(),k.value=!1)}});case 2:return v=t.v,e&&e(),g.value=!1,t.a(2,v.status)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),O=Ue([Yt({key:"filename"}),{label:"名称",prop:"filename",render:function(e){return Me("div",{class:"flex items-center cursor-pointer",onClick:function(t){e.date_time||(t.stopPropagation(),L(e))}},[Me("img",{class:"mr-[.5rem] w-[2.5rem] h-[2.5rem]",src:"/static/images/file_icon/".concat(e.date_time?"file":"folder_win10",".png")},null),Me("span",{class:"hover:text-primary"},[e.filename])])}},{label:"大小",prop:"file_size",width:100,render:function(e){return ft("span",{class:"cursor-pointer"},e.file_size?I(e.file_size):"--")}},{label:"修改时间",prop:"date_time",width:270,render:function(e){return ft("span",{class:"cursor-pointer"},e.date_time?e.date_time:"--")}},Kt([{onClick:N,isHide:function(e){var t=e.filename.split(".").pop()||"file";return"text"!==kl(t)||0!==e.is_dir},title:"编辑"},{onClick:C,title:"解压"},{onClick:R,title:"删除"}])]),A=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return t="zip"===s.value.ext?oa:la,e.n=1,T({loading:v,request:t({data:JSON.stringify({sfile:s.value.path})}),success:function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:if(t.status){e.n=2;break}return w.request(t),e.n=1,f.value;case 1:null==(n=e.v)||n.unmount();case 2:d.file.data=t.data,m.value&&(Ge(function(){S.value.getTable().toggleAllSelection()}),m.value=!1);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),z=[{label:"解压",value:"decompress",event:(n=b(p().m(function t(n,a,r,i,u){return p().w(function(t){for(;;)switch(t.n){case 0:_.selectList=r.value,Object.assign(h,{visible:!0,form:{filename:"",path:"/"}}),e=u;case 1:return t.a(2)}},t)})),function(e,t,a,r,i){return n.apply(this,arguments)})},{label:"删除",value:"delete",event:(t=b(p().m(function t(n,a,r,i,u){return p().w(function(t){for(;;)switch(t.n){case 0:_.selectList=r.value,k.value=!0,e=u;case 1:return t.a(2)}},t)})),function(e,n,a,r,i){return t.apply(this,arguments)})}];return{instance:f,compressData:d,deCompressPopupData:h,fileItem:s,tableColumn:O,loading:v,fileTableRef:S,batch:_,batchOptions:z,batchDeletePopup:k,delEvent:R,confirmDeCompress:F,openPathDialog:function(){Gc({type:"dir",path:h.form.path,change:function(e){h.form.path=e}})},cellDblclick:L,goPath:function(e){for(var t=d.file.path.split("/").filter(function(e){return""!==e}),n="",a=0;a<=e;a++)n+="/".concat(t[a]);d.file.path=n,"/当前压缩包"===n&&S.value.getTable().toggleAllSelection()},addFile:x,init:function(){c.value=s.value.path||"",A(),h.form.path=i.value.param.path||"/"},$reset:function(){m.value=!0,g.value=!1,k.value=!1,Object.assign(d,{file:{data:{},path:"当前压缩包"},isDblclick:!1,addList:[]})}}})),_u=i("bO",at("FILES-CREATE-SYMBOLIC-LINK-STORE",function(){var e=tc().refreshFilesList,t=ut({path:"",filename:"",disable:!1}),n=Ue(),a=ut({path:[{validator:function(e,t,n){""===t?n(new Error("请选择正确的文件地址!")):n()},trigger:["blur","change"]}],filename:[{validator:function(e,t,n){""===t?n(new Error("请输入新文件名!")):nl(t)?n(new Error('文件名不能包含 /\\:*?"<>|符号!')):n()},trigger:["blur"]}]}),r=function(){var a=b(p().m(function a(r){var i;return p().w(function(a){for(;;)switch(a.p=a.n){case 0:return a.p=0,i={sfile:t.path,dfile:al(t.filename)},a.n=1,n.value.validate();case 1:return t.disable=!0,a.n=2,T({loading:"正在创建软链接...",request:Qa(i),message:!0,success:function(t){t.status&&(e(),r())}});case 2:a.n=4;break;case 3:a.p=3,a.v;case 4:return a.p=4,t.disable=!1,a.f(4);case 5:return a.a(2)}},a,null,[[0,3,4,5]])}));return function(e){return a.apply(this,arguments)}}();return{quickFormRef:n,quickForm:t,quickRules:a,openFile:function(){Gc({type:"all",change:function(e){t.path=e}})},onConfirm:r,$reset:function(){Object.assign(t,{path:"",filename:"",disable:!1})}}})),Su=i("bP",at("FILES-FAVORITES-MANAGE-STORE",function(){var e=tc(),t=st(e).favoriteList,n=e.refreshFilesList,a=Ue(),r=Ue(t.value),i=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y({title:"删除收藏",content:"即将删除收藏路径【".concat(t.name,"】")});case 1:T({loading:"正在删除收藏路径，请稍后...",request:Gn({path:t.path}),message:!0,success:function(e){e.status&&Ul()}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),u=ut({loading:!1,data:[]}),o=function(){var e=b(p().m(function e(t){var n,r;return p().w(function(e){for(;;)switch(e.n){case 0:return"dir"===t.type?il(t.path):(n=m(m({},t),{},{fileName:t.name,ext:t.ext||t.name.split(".").pop()}),El(n)),e.n=1,a.value;case 1:null==(r=e.v)||r.unmount();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),l=Ue([{label:"路径",prop:"path"},Kt([{onClick:o,title:"打开"},{onClick:i,title:"删除"}])]);return{instance:a,tableColumn:l,favoriteList:t,favTableData:u,onCancel:function(){r.value.length!==t.value.length&&n()},$reset:function(){Object.assign(u,{loading:!1,data:[]})}}}));function xu(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!vt(e)}var Tu=i("b$",at("FILES-FORMAT-CONVERSION-STORE",function(){var e=tc(),t=st(e).fileTabActiveData,n=e.refreshFilesList,a=Ue(),r=Ue(),i=Ue("conver"),u=Ue("执行转换"),o=Ue(!1),l=ut({fileList:[],selectList:[],path:"",del:!1,allKey:""}),c=Ue(!1),s=ut({all:[],audio:[],image:[],video:[]}),f=Ue([Yt({key:"fileName"}),{label:"文件名",prop:"fileName"},{label:"格式类型",prop:"ext",width:80},{label:"转换为",prop:"status",width:190,renderHeader:function(){var e,t;return Me("div",{class:"items-center inline-flex !w-[190px]"},[Me("span",null,[Ve("转换为")]),Me(pt,{class:"!w-[8rem] ml-4px",modelValue:l.allKey||(null===(e=s.all[0])||void 0===e?void 0:e.value),onChange:function(e){l.allKey=e,l.fileList=l.fileList.map(function(t){return m(m({},t),{},{format:e})})}},xu(t=s.all.map(function(e){return Me(dt,{key:e.value,label:e.label,value:e.value},null)}))?t:{default:function(){return[t]}})])},render:function(e,t){var n=null;return["audio","image","video"].forEach(function(t){var a,r,i;s[t].map(function(e){return e.value}).includes(e.ext)&&(e.format=e.format||(null===(a=s[t].at(0))||void 0===a?void 0:a.value),n=Me("div",null,[Me(pt,{class:"!w-[12rem]",style:{display:e.isCustom?"none":"block"},modelValue:e.format||(null===(r=s[t].at(0))||void 0===r?void 0:r.value),onChange:function(t){e.format=t}},xu(i=s[t].map(function(e){return Me(dt,{key:e.value,label:e.label,value:e.value},null)}))?i:{default:function(){return[i]}})]))}),n||(n=ft("span",{class:"text-[red]"},"不支持转换")),n}},{label:"执行状态",prop:"status",width:90,render:function(e,t){var n=null;return s.all.map(function(e){return e.value}).includes(e.ext)&&(n=ft("span",{},["待转换","转换中","转换成功","转换失败"][e.status])),n||(n=ft("span",{class:"text-[red]"},"无法转换")),n}},Kt([{onClick:function(e){l.fileList=l.fileList.filter(function(t){return t.path!==e.path})},title:"取消"}])]),d=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:if(t=[],l.selectList.forEach(function(e){if(0===e.status){var n=e.name.split(".");n.pop(),t.push({input_file:e.path,output_file:"".concat(l.path,"/").concat(n,".").concat(e.format)})}}),t.length){e.n=1;break}return e.a(2,w.error("没有需要转换的文件"));case 1:return u.value="转换中",o.value=!0,e.n=2,T({loading:"正在转换中，请稍后...",request:Oa({is_save:l.del?1:0,pdata:JSON.stringify(t)}),success:function(e){j(e.data)?(e.data.forEach(function(e){e.msg=e.msg||(e.status?"转换成功":"转换失败")}),n(),_(),Ql({title:"转换结果",resultData:e.data})):(u.value="执行转换",o.value=!1,w.error(e.msg))}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({loading:c,request:Ra(),data:{all:[Array,function(e){return e.map(function(e){return{key:e,label:e}})}],audio:[Array,function(e){return e.map(function(e){return{key:e,label:e}})}],image:[Array,function(e){return e.map(function(e){return{key:e,label:e}})}],video:[Array,function(e){return e.map(function(e){return{key:e,label:e}})}]},success:function(e){Object.keys(e).forEach(function(t){e[t]=e[t].map(function(e){return{value:e.key,label:e.label}})}),s.all=e.all,s.audio=e.audio,s.image=e.image,s.video=e.video}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),h=ut({fileList:[],p:1,limit:10}),y=Ue([{label:"操作时间",prop:"time",width:160,render:function(e){return ft("span",{},g(e.time))}},{label:"操作类型",prop:"type",width:80},{label:"操作日志",prop:"operation"},{label:"操作结果",prop:"status",width:160}]),k=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({request:Xa({p:h.p,limit:h.limit}),success:function(e){if(e.status){var t=e.data.msg.data;h.fileList="string"==typeof t?[]:t}else w.error(e.msg)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.value;case 1:null==(t=e.v)||t.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{instance:r,fileItem:a,activeName:i,tableColumn:f,loading:c,formatData:l,subLoad:o,btnText:u,addFile:function(){var e;Gc({type:"file",change:(e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,wa({filename:t});case 1:(n=e.v).status?l.fileList.push(m(m({status:0,ext:n.data.st_type},n.data),{},{path:t,fileName:n.data.name})):w.error(n.msg);case 2:return e.a(2)}},e)})),function(t){return e.apply(this,arguments)})})},openFile:function(e){Gc({type:"dir",change:function(e){l.path=e}})},goConversion:d,handleSelectionChange:function(e){l.selectList=e},logTableColumn:y,tableData:h,getData:k,handleTabEvent:function(e){"conver"===e?v():k()},init:function(){var e,n;v(),l.fileList=Array.isArray(a.value)?null===(e=a.value)||void 0===e?void 0:e.map(function(e){return m(m({status:0},e),{},{name:e.fileName})}):[m(m({status:0},a.value),{},{name:null===(n=a.value)||void 0===n?void 0:n.fileName})],l.path=t.value.param.path},$reset:function(){o.value=!1,c.value=!1,Object.assign(l,{fileList:[],selectList:[],path:"",del:!1,allKey:""}),Object.assign(h,{fileList:[],p:1,limit:10}),Object.assign(s,{all:[],audio:[],image:[],video:[]}),u.value="执行转换"}}})),Lu=i("cL",at("FILES-OVERLAY-TIPS-STORE",function(){var e=s().getGlobalInfo,t=tc(),n=st(t),a=n.fileTabActiveData,r=n.copyFilesData,i=t.refreshFilesList,u=t.getRealTask,o=Ue(),l=Ue(""),c=Ue(),f=Ue([Yt({key:"filename"}),{prop:"filename",label:"文件名"},{prop:"size",label:"大小",render:function(e){return Me("span",null,[e.is_dir?"--":I(e.size)])}},{prop:"mtime",width:136,label:"最后修改时间",render:function(e){return g(Number(e.mtime))}}]),d=ut({addend1:0,addend2:0,sum:0}),v=Ue(!1),m=Ue(),h=Ue([]),k=Ue([]),_=function(e){if(e.endsWith(".tar.gz")){var t=e.substring(0,e.length-7);return"".concat(t,"-副本.tar.gz")}var n=e.lastIndexOf(".");if(-1===n)return"".concat(e,"-副本");var a=e.substring(0,n),r=e.substring(n);return"".concat(a,"-副本").concat(r)},S=ut({type:"",size:0,filename:"",mtime:0,is_dir:!1}),x=ut({name:[{validator:function(e,t,n){"rename"===S.type&&t===o.value.fileData[0].filename&&n(new Error("名称重复，请输入新文件名!")),""===t?n(new Error("请输入新文件名!")):n()},trigger:["blur"]}]}),L=function(){S.type="rename",S.size=o.value.fileData[0].size,S.filename=_(o.value.fileData[0].filename),S.mtime=o.value.fileData[0].mtime,S.is_dir=o.value.fileData[0].is_dir},C=function(){var e=b(p().m(function e(t){var n,l,c,s,f;return p().w(function(e){for(;;)switch(e.n){case 0:if("single"!==o.value.type){e.n=4;break}return n={path:a.value.param.path,name:S.filename},e.n=1,Wn(n);case 1:if(l=e.v,!(l.data.length>0)){e.n=2;break}return e.n=2,y({title:"覆盖文件",content:"检测到同名文件，您确定要覆盖当前【".concat(S.filename,"】文件？")});case 2:return c={sfile:r.value.files[0].path,dfile:a.value.param.path+"/"+S.filename},"rename"===S.type&&(c.rename=!0),s="copy"===r.value.type?$n:Yn,e.n=3,T({loading:"正在处理文件，请稍后...",request:s(c),success:function(e){e.status&&(e.msg="文件覆盖成功!",i(),gl()),w.request(e),u(),t()}});case 3:case 7:return e.a(2);case 4:if(d.sum!==d.addend1+d.addend2){e.n=6;break}return f=h.value.map(function(e){return e.filename}),e.n=5,T({loading:"正在处理文件，请稍后...",request:Ba({type:"copy"===r.value.type?1:2,path:a.value.param.path,skip_files:JSON.stringify(f)}),message:!0,success:function(e){e.status&&(i(),gl()),u(),t()}});case 5:e.n=7;break;case 6:return w.error("请输入正确的计算结果"),e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var t=b(p().m(function t(){var n;return p().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e();case 1:n=t.v,l.value=(null==n?void 0:n.sites_path)||"";case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),D=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return k.value="batch"==o.value.type?o.value.fileData:[],e.n=1,E();case 1:d.sum=void 0,d.addend1=Math.round(9*Math.random()+1),d.addend2=Math.round(9*Math.random()+1),"batch"==o.value.type?(k.value=o.value.fileData,c.value=t.value,c.value.handleAllChange(!0)):L();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return{compData:o,fileTabActiveData:a,sitesPath:l,overlayFormRef:m,overlayForm:S,tableLoading:v,quickRules:x,calcData:d,tableColumns:f,tableData:k,handleSelectionChange:function(e){h.value=e},watchType:function(e){"single"===o.value.type&&(S.filename="over"===e?o.value.fileData[0].filename:_(o.value.fileData[0].filename))},fileFormat:_,onConfirm:C,init:D,$reset:function(){k.value=[],h.value=[]}}})),Cu=i("cC",at("FILES-TAMPER-STORE",function(){var e=tc().refreshFilesList,t=Ue(),n=Ue("关闭"),a=Ue("文件"),r=Ue(""),i=ut({fileName:!0,ext:!1}),u=function(){var n=b(p().m(function n(a){var r,u,o,l,c;return p().w(function(n){for(;;)switch(n.n){case 0:return r=t.value.data.path,u=[],t.value.data.isFile&&(-1!==(o=r.lastIndexOf("/"))&&(r=r.substring(0,o)),i.fileName&&(l=t.value.data.path.split("/"),c=l.length>=2?l[l.length-2]:"",u.push("".concat(c,"/").concat(t.value.data.fileName))),i.ext&&u.push("."+t.value.data.fileName.split(".").pop())),n.n=1,T({loading:"正在创建目录保护，请稍后...",request:Wa({path:r,exts:JSON.stringify(u)}),message:!0,success:function(t){t.status&&(e(),a&&a())}});case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),o=function(){var n=b(p().m(function n(){var a,o,l,c,s,f;return p().w(function(n){for(;;)switch(n.n){case 0:if(i.ext||i.fileName){n.n=1;break}return w.error("请至少选择一项"),n.a(2);case 1:if(a={pid:t.value.data.tamperProofId,settings:[]},o=t.value.data.path,"create"!==r.value||0!=t.value.data.tamperProofId){n.n=2;break}return u(close),n.a(2);case 2:return t.value.data.isFile?null!==(l=t.value.data)&&void 0!==l&&l.isLock?(i.fileName&&(a.settings.push({key:"remove_bf",values:[o]}),a.settings.push({key:"add_wf",values:[o]})),i.ext&&a.settings.push({key:"remove_bf",values:["."+t.value.data.fileName.split(".").pop()]})):(i.fileName&&(a.settings.push({key:"add_bf",values:[o]}),a.settings.push({key:"remove_wf",values:[o]})),i.ext&&a.settings.push({key:"add_bf",values:["."+t.value.data.fileName.split(".").pop()]})):null!==(c=t.value.data)&&void 0!==c&&c.isLock?(s=r.value,-1!=t.value.data.path.indexOf("/www/server/panel/class")&&(s="add_wd"),a.settings.push({key:s,values:[t.value.data.path]})):a.settings.push({key:r.value,values:[o]}),a.settings=JSON.stringify(a.settings),n.n=3,T({loading:"正在执行中，请稍后...",request:Ja(a),message:!0,success:function(t){t.status&&e()}});case 3:return f=n.v,n.a(2,f.status)}},n)}));return function(){return n.apply(this,arguments)}}(),l=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({request:Ua({path:t.value.data.path}),success:function(e){r.value=e.data.data.action[0]}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{isStart:n,isFile:a,compData:t,checkList:i,onConfirm:o,init:function(){var e;n.value=null!==(e=t.value.data)&&void 0!==e&&e.isLock?"关闭":"开启",a.value="file"===t.value.data.type?"文件":"目录",l()},$reset:function(){r.value="",Object.assign(i,{fileName:!0,ext:!1})}}})),Eu=i("bM",at("FILES-TASK-STORE",function(){var e=tc().refreshFilesList,t=Ue(),n=null,a=Ue([]),r=function(){var t=b(p().m(function t(){var i,o;return p().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,P({status:-3});case 1:if(0!==(i=t.v).data.length){t.n=2;break}return clearInterval(n),e(),u(),t.a(2);case 2:a.value=i.data,n=setTimeout(r,2e3),t.n=4;break;case 3:t.p=3,o=t.v,S(o);case 4:return t.a(2)}},t,null,[[0,3]])}));return function(){return t.apply(this,arguments)}}(),i=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y({title:"删除任务",content:"您真的要删除当前任务【".concat(t.name,":").concat(t.shell,"】吗？")});case 1:T({loading:"正在删除，请稍后...",request:R({id:t.id}),message:!0,success:r});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=b(p().m(function e(){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.value;case 1:null==(n=e.v)||n.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{instance:t,taskData:a,getLog:r,cancel:i,$reset:function(){a.value=[],clearInterval(n)}}})),Du=i("cA",at("FILES-IMAGE-PREVIEW-STORE",function(){var e=st(tc()),t=e.fileTabActiveData,n=e.imageList,a=Ue(),r=window.location.protocol+"//"+window.location.host+"/download?filename=",i=Ue(""),u=Ue([]),o=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:u.value=n.value.map(function(e){return"".concat(r).concat(t.value.param.path,"/").concat(e[0])});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{fileItem:a,image:i,imagesArr:u,init:function(){i.value="".concat(r).concat(a.value.path),o()},$reset:function(){u.value=[]}}})),Fu=i("cz",at("FILES-IMPORT-DATABASE-STORE",function(){var e=Ue(),t=ut({name:""}),n=Ue(!1),a=Ue(),r=ut({name:[{validator:function(e,t,n){""===t?n(new Error("请选择压缩路径")):n()},trigger:["blur"]}]}),i=Ue([]),u=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({request:O({table:"databases"}),success:function(e){e.status&&(i.value=e.data.data.map(function(e){return{label:e.name,value:e.id}}),i.value.length>0&&(t.name=i.value[0].value))}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),o=function(){var n=b(p().m(function n(){var r,u;return p().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,y({title:"导入数据库",content:"是否将【".concat(e.value.fileName,"】文件，导入【").concat(i.value.find(function(e){return e.value==t.name}).label,"】数据库中，是否继续？")});case 1:return r={name:i.value.find(function(e){return e.value==t.name}).label,file:e.value.path},n.n=2,a.value.validate();case 2:return n.n=3,T({loading:"正在导入数据库，请稍后...",request:xa(r),message:!0});case 3:return u=n.v,n.a(2,u.status)}},n)}));return function(){return n.apply(this,arguments)}}();return{fileItem:e,quickFormRef:a,quickForm:t,quickRules:r,disable:n,databaseOptions:i,onConfirm:o,toggleName:function(e){t.name=e},getOptions:u,$reset:function(){Object.assign(t,{name:""}),n.value=!1,i.value=[]}}})),Nu=i("cD",at("FILES-VIDEO-STORE",function(){var e=st(tc()).fileTabActiveData,t=Ue(""),n=Ue([]),a=e.value.param.path,r=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({request:Ya({path:a}),data:[Array,n]});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{currentPath:a,videoList:n,videoUrl:t,playVideo:function(e){t.value=a+"/"+e},getList:r,$reset:function(){t.value="",n.value=[]}}})),Iu=i("bR",at("FILES-SHARE-LIST-STORE",function(){var e=Ue({}),t=tc().refreshFilesList,n=Ue(!1),a=Ue([]),r=ut({total:0,p:1,limit:12,file_name:""}),i=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:T({loading:n,request:Zn({p:r.p,filename:r.file_name||""}),data:{data:[Array,a],page:_(r)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=b(p().m(function e(n){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y({title:"取消分享",content:"是否取消分享该文件【".concat(n.ps,"】，是否继续？")});case 1:T({loading:"正在取消文件分享，请稍后...",request:va({id:n.id}),message:!0,success:function(e){e.status&&(i(),t())}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),o=Ue([{label:"分享名称",prop:"ps"},{label:"文件地址",prop:"filename"},{label:"过期时间",prop:"expire"},Kt([{onClick:function(e){Fo(e,!0)},title:"详情"},{onClick:u,title:"关闭"}])]);return{compData:e,isLoading:n,tableData:a,shareTableData:r,tableColumn:o,getShareData:i,searchSubmit:function(e){r.file_name=e,i()},$reset:function(){n.value=!1,a.value=[],Object.assign(r,{total:0,p:1,limit:12,file_name:""})}}})),ju=i("bS",at("FILES-SHARE-STORE",function(){var e=tc().refreshFilesList,t=Ue(),n=ut({ps:"",expire:24,password:""}),a=Ue(!1),r=Ue(),i=ut({ps:[{validator:function(e,t,n){""===t?n(new Error("请输入分享名称")):n()},trigger:["blur"]}]}),u=function(){var i=b(p().m(function i(u){var o;return p().w(function(i){for(;;)switch(i.n){case 0:return o={filename:al(t.value.fileName),ps:n.ps,password:n.password,expire:n.expire},i.n=1,r.value.validate();case 1:return i.n=2,T({loading:a,request:pa(o),success:function(t){return t.status?(w.success("分享成功"),u.unmount()):w.error(t.message),e(),Fo(t.data)}});case 2:return i.a(2)}},i)}));return function(e){return i.apply(this,arguments)}}(),o=Ue(),l=ut({name:"",link:"",code:"",time:""}),c=Ue({}),s=Ue(!1),f=Ue(!1),d=Ue(),v=ut({}),m=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:if(!o.value.isShareList){e.n=1;break}return c.value=o.value,l.name=o.value.ps,l.link=location.origin+"/down/"+o.value.token,l.code=o.value.password||"",l.time=o.value.expire,l.qrcode=location.origin+"/down/"+o.value.token+"?fname="+o.value.ps+"&down=true",e.a(2);case 1:return e.n=2,T({loading:"正在获取分享详情，请稍后...",request:da({id:Number(o.value.isShare|o.value.id)}),success:function(e){c.value=e.data,l.name=e.data.ps,l.link=location.origin+"/down/"+e.data.token,l.code=e.data.password||"",l.time=e.data.expire,l.qrcode=location.origin+"/down/"+e.data.token+"?fname="+e.data.ps+"&down=true"}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),h=function(){var t=b(p().m(function t(){var n,a;return p().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,d.value.validate();case 1:return t.n=2,y({title:"取消分享【".concat(c.value.ps,"】"),content:"您真的要取消分享【".concat(c.value.ps,"】吗？")});case 2:return n={id:c.value.id},t.n=3,T({loading:"正在取消文件分享，请稍后...",request:va(n),message:!0,success:function(t){t.status&&((0,Iu().getShareData)(),e())}});case 3:return a=t.v,t.a(2,a.status);case 4:t.p=4,t.v;case 5:return t.a(2)}},t,null,[[0,4]])}));return function(){return t.apply(this,arguments)}}();return{fileItem:t,quickFormRef:r,quickForm:n,quickRules:i,disable:a,help:[{isHtml:!0,content:'<span class="text-[#ef0808]">注意：生成的外链分享链接具有一定的风险，请仅与可信任的人分享链接，避免敏感信息泄露</span>'}],compData:o,detail:c,detailFormRef:d,detailForm:l,detailRules:v,isDisabled:f,helpList:[{content:'<span class="text-[#ef0808]">注意：生成的外链分享链接具有一定的风险，请仅与可信任的人分享链接，避免敏感信息泄露</span>',isHtml:!0}],showQrcode:s,copyAll:function(e){A({value:"链接：".concat(l.link," 提取码：").concat(l.code)})},copyLink:function(e){A({value:l.link})},onConfirm:u,onConfirmDetail:h,initDetail:function(){s.value=!1,Object.assign(l,{name:"",link:location.origin+"/down/"+o.value.token,code:"",time:o.value.expire}),m()},init:function(){a.value=!1,Object.assign(n,{ps:t.value.fileName,expire:24,password:""})}}})),Pu=i("b_",at("FILES-SEND-EMAIL-STORE",function(){var e=Ue(),t=ut({email:"",msg:""}),n=Ue(!1),a=Ue(),r=ut({email:[{validator:function(e,t,n){if(""===t)n(new Error("请输入接受者邮箱"));else{var a=t.trim().split(",").filter(function(e){return""!==e}),r=!1;a.forEach(function(e){z(e)||(r=!0)}),r?n(new Error("请输入正确的邮箱")):n()}},trigger:["blur"]}],fileName:[{validator:function(t,n,a){e.value.size>52428800?a(new Error("请选择小于50M的附件")):a()}}]}),i=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ya();case 1:t=e.v,n=t.data,o(n)&&Yc(m(m({},{title:"发送者配置",type:"mail"}),{},{callback:function(){}}));case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),o=function(e){return 0===Object.keys(e).length},l=function(){var r=b(p().m(function r(){var i,l;return p().w(function(r){for(;;)switch(r.n){case 0:return i={to_email:t.email,msg:t.msg,flist:[al(e.value.fileName)]},r.n=1,a.value.validate();case 1:return r.n=2,T({loading:n,request:ba({data:JSON.stringify(i)}),success:function(e){var t=e.data;if(t.msg&&""!=t.msg)return w.error(t.msg),null;var n=[];Object.keys(t.list).forEach(function(e){var a=o(t.list[e].error),r=[];a||Object.keys(t.list[e].error).forEach(function(n){r.push(n+"："+t.list[e].error[n])}),n.push({name:e,msg:a?"发送成功":r.join("<br>"),status:!!a})}),E({title:"发送至邮箱-结果",area:50,component:function(){return C(function(){return u.import("./index-legacy125.js?v=1763689792")},void 0,u.meta.url)},compData:{resultData:n,resultTitle:"发送至邮箱",resultColumn:[{label:"邮箱",prop:"name"},{label:"结果",width:80,render:function(e){return ft("span",{class:e.status?"text-primary":"text-danger"},e.status?"操作成功":"操作失败")}},{label:"信息",render:function(e){return ft("span",{class:e.status?"":"text-danger"},e.msg)}}]}})}});case 2:return l=r.v,r.a(2,l.data.status)}},r)}));return function(){return r.apply(this,arguments)}}();return{fileItem:e,quickFormRef:a,quickForm:t,quickRules:r,disable:n,getDetail:i,onConfirm:l,$reset:function(){n.value=!1,Object.assign(t,{email:"",msg:""})}}})),Ru=i("bY",at("FILES-SPLIT-STORE",function(){var e,t=tc(),n=st(t).fileTabActiveData,a=t.refreshFilesList,r=Ue(),i=ut({type:"size",size:1024,num:5,path:(null===(e=n.value)||void 0===e?void 0:e.param.path)||""}),u=Ue(!1),o=Ue(),l=ut({size:[{validator:function(e,t,n){"size"===i.type?""===t?n(new Error("请输入拆分大小")):1024*Number(t)*1024>=r.value.size/2?n(new Error("拆分大小不能大于文件大小一半")):n():n()},trigger:["blur"]}],num:[{validator:function(e,t,n){"num"===i.type&&(""===t||Number(t)<2)?n(new Error("拆分数量不能小于2个")):n()},trigger:["blur"]}],path:[{validator:function(e,t,n){""===t?n(new Error("请选择存放目录")):n()},trigger:["blur"]}]}),c=function(){var e=b(p().m(function e(t){var n,u;return p().w(function(e){for(;;)switch(e.n){case 0:return n={file_path:al(r.value.fileName),save_path:i.path},"size"===i.type?n.split_size=Number(i.size):n.split_num=Number(i.num),e.n=1,o.value.validate();case 1:return e.n=2,T({loading:"正在拆分文件，请稍后...",request:ca(n),message:!0,success:function(e){w.request({status:e.status,msg:e.status?"拆分成功":"拆分失败"}),a()}});case 2:return u=e.v,e.a(2,u.status)}},e)}));return function(t){return e.apply(this,arguments)}}();return{fileItem:r,quickFormRef:o,quickForm:i,quickRules:l,disable:u,help:[{content:"拆分后会在存放目录(默认当前目录)下创建一个xxx_split文件夹,存放配置文件以及拆分文件"}],openFile:function(){Gc({type:"dir",change:function(e){i.path=e}})},onConfirm:c,init:function(){var e;u.value=!1,Object.assign(i,{type:"size",size:1024,num:5,path:(null===(e=n.value)||void 0===e?void 0:e.param.path)||""})}}})),Ou=i("cE",at("FILES-TERMINAL-STORE",function(){var e=st(tc()).fileTabActiveData,t=Ue(),n=Ue(),a=function(){return n.value},r=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=a(),n=null==t?void 0:t.socketInfo(),e.p=1,e.n=2,y({title:"确定要关闭SSH会话吗？",content:"关闭SSH会话后，当前命令行会话正在执行的命令可能被中止，确定关闭吗？"});case 2:i(),n.close(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),i=function(){var e=b(p().m(function e(){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.value;case 1:null==(n=e.v)||n.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{instance:t,filesTerminalRef:n,init:function(){Ge(function(){var t=a(),n=null==t?void 0:t.socketInfo(),r=null==t?void 0:t.terminal;n.send("\r\nclear\r"),n.send("cd ".concat(e.value.param.path,"\r")),null==r||r.focus()})},onCancel:function(){return r(),!1}}})),Au=i("bZ",at("FILES-MERGE-STORE",function(){var e,t=tc(),n=st(t).fileTabActiveData,a=t.refreshFilesList,r=Ue(),i=ut({path:(null===(e=n.value)||void 0===e?void 0:e.param.path)||"",disable:!1,file:{}}),u=Ue(!1),o=Ue(),l=ut({path:[{validator:function(e,t,n){""===t?n(new Error("请选择存放目录")):n()},trigger:["blur"]}]}),c=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({loading:u,request:sa({file_path:r.value.path}),success:function(e){var t;Object.assign(i,{path:(null===(t=n.value)||void 0===t?void 0:t.param.path)||"",disable:!1,file:e.data})}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),s=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return n={file_path:al(r.value.fileName),save_path:i.path},e.n=1,o.value.validate();case 1:return e.n=2,T({loading:u,request:fa(n),message:!0,success:function(e){a(),e.status&&t&&t()}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return{fileItem:r,loading:u,quickFormRef:o,quickForm:i,quickRules:l,openFile:function(){Gc({type:"dir",change:function(e){i.path=e}})},getFile:c,onConfirm:s}})),zu=i("cB",at("FILES-EDIT-STORE",function(){var e=Ue(),t=Ue(!1),n=ut({data:""}),a=function(){var t=b(p().m(function t(a){var r,i;return p().w(function(t){for(;;)switch(t.n){case 0:return r={sfile:e.value.fileItem.path,filename:(""!=e.value.path?e.value.path+"/":"")+e.value.name,data:n.data},i="zip"===e.value.fileItem.ext?Da:Fa,t.n=1,T({loading:"正在保存，请稍后...",request:i({data:JSON.stringify(r)}),message:!0,success:function(e){e.status&&a&&a()}});case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}();return{compData:e,config:{mode:"ace/mode/nginx"},load:t,cmdForm:n,onConfirm:a,init:function(){n.data=e.value.data.data}}})),Mu=i("bX",at("FILES-DECOMPRESSION-STORE",function(){var e=tc(),t=st(e).fileTabActiveData,n=e.refreshFilesList,a=e.getRealTask,r=ku(),i=st(r).instance,u=Ue(),o=ut({fileName:"",path:t.value.param.path||"",coding:"UTF-8",password:"",auth:"755"}),l=Ue(!1),c=Ue(),s=ut({path:[{validator:function(e,t,n){""===t?n(new Error("请选择解压路径")):n()},trigger:["blur"]}],auth:[{validator:function(e,t,n){""===t||isNaN(Number(t))||t.length>3?n(new Error("请输入正确的权限")):n()},trigger:["blur"]}]}),f=function(){var e=b(p().m(function e(){var t,r;return p().w(function(e){for(;;)switch(e.n){case 0:return t={sfile:u.value.path,dfile:o.path,type:"tar.gz"===u.value.ext?"tar":"zip",coding:o.coding,password:o.password,power:o.auth},e.n=1,c.value.validate();case 1:return l.value=!0,e.n=2,T({loading:"正在解压文件，请稍后...",request:ga(t),message:!0,success:function(){var e=b(p().m(function e(t){var r;return p().w(function(e){for(;;)switch(e.n){case 0:return n(),a(),e.n=1,i.value;case 1:null==(r=e.v)||r.unmount();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()});case 2:return r=e.v,l.value=!1,e.a(2,r.status)}},e)}));return function(){return e.apply(this,arguments)}}();return{fileItem:u,quickFormRef:c,quickForm:o,quickRules:s,codeOptions:[{label:"UTF-8",value:"UTF-8"},{label:"GBK",value:"GBK"}],disable:l,openFile:function(){Gc({type:"dir",change:function(e){o.path=e}})},toggleCode:function(e){o.coding=e},init:function(){Object.assign(o,{fileName:u.value.fileName,path:t.value.param.path||"",coding:"UTF-8",password:"",auth:"755"})},onConfirm:f}})),Vu=i("bW",at("FILES-COMPRESS-STORE",function(){var e=tc(),t=st(e).fileTabActiveData,n=e.refreshFilesList,a=e.getRealTask,r=Ue(),i=ut({type:"tar.gz",path:"",download:!1}),u=Ue(!1),o=Ue(),l=ut({path:[{validator:function(e,t,n){""===t?n(new Error("请选择压缩路径")):n()},trigger:["blur"]}]}),c=function(){var e=b(p().m(function e(){var u,l,c;return p().w(function(e){for(;;)switch(e.n){case 0:return u=Array.isArray(r.value),l={sfile:u?r.value.map(function(e){return e.fileName}):r.value.fileName,dfile:i.path,z_type:i.type,path:t.value.param.path+"/"},e.n=1,o.value.validate();case 1:return c=i.download?ha:ma,e.n=2,T({loading:"正在压缩文件，请稍后...",request:c(l),success:function(e){e.status?(i.download?e.data.task_id?setTimeout(function(){w.error("无法下载，".concat(e.data.msg))},1e3):window.open(e.data.msg):w.success("压缩成功"),a(),setTimeout(function(){n()},1e3)):w.error(e.msg)}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),s=Ue(),f=Ue(),d=Ue([]),v=Ue(null),h=function(){var e=b(p().m(function e(t){var a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=f.value.params,e.n=1,ga(m(m({},a),t));case 1:e.v.status&&v.value.tableSelectList.forEach(function(e){d.value.forEach(function(t,n){if(e.zip_file_path===t.zip_file_path){var a=m(m({},t),{},{status:"执行成功"});d.value.splice(n,1,a)}})}),d.value.find(function(e){return void 0===e.status})||(k(),w.success("解压成功"),n()),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=b(p().m(function e(t){var a,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,a=f.value.params,e.n=1,f.value.callback(m(m({},a),t));case 1:e.v.status&&v.value.tableSelectList.forEach(function(e){d.value.forEach(function(t,n){if(e.zip_file_path===t.zip_file_path){var a=m(m({},t),{},{status:"执行成功"});d.value.splice(n,1,a)}})}),d.value.find(function(e){return void 0===e.status})||(k(),w.success("解压成功"),n()),e.n=3;break;case 2:e.p=2,r=e.v,S(r);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),y=ot([Yt({key:"file_path"}),{label:"文件名",prop:"name",minWidth:150},{label:"大小",prop:"size",width:150,render:function(e){return e.file_size===e.zip_file_size?Me("span",{class:"text-primary"},[Ve("无变化")]):Me("div",null,[Me("div",{class:"text-blue-500"},[Ve("解压文件： "),Me("span",{class:"text-danger"},[I(e.zip_file_size)])]),Me("div",{class:"text-blue-500"},[Ve("目标文件： "),Me("span",{class:"text-danger"},[I(e.file_size)])])])}},{label:"修改时间",prop:"time",width:200,render:function(e){return e.file_mtime===e.zip_file_mtime?Me("span",{class:"text-primary"},[Ve("无变化")]):Me("div",null,[Me("div",{class:"text-blue-500"},[Ve("解压文件： "),Me("span",{class:"text-danger"},[e.zip_file_mtime])]),Me("div",{class:"text-blue-500"},[Ve("目标文件： "),Me("span",{class:"text-danger"},[e.file_mtime])])])}},{label:"执行结果",prop:"action",fixed:"right",render:function(e){return e.status?Me("span",{class:"text-primary"},[e.status]):Me("span",{class:"text-blue-500"},[Ve("-")])}}]),k=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,s.value;case 1:null==(t=e.v)||t.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{fileItem:r,quickFormRef:o,quickForm:i,quickRules:l,disable:u,compressOptions:[{label:"tar.gz (推荐)",value:"tar.gz"},{label:"zip (通用格式)",value:"zip"},{label:"rar (WinRAR对中文兼容较好)",value:"rar"},{label:"7z (压缩率极高的压缩格式)",value:"7z"}],openFile:function(){Gc({type:"dir",change:function(e){i.path=e+"/"+r.value.fileName+"_"+M(5)+"."+i.type}})},toggleType:function(e){i.type=e,i.path=t.value.param.path+"/"+(Array.isArray(r.value)?t.value.label:r.value.fileName)+"_"+M(5)+"."+i.type},onConfirm:c,init:function(){Object.assign(i,{type:"tar.gz",path:("/"==t.value.param.path?"":t.value.param.path)+"/"+(Array.isArray(r.value)?t.value.label:r.value.fileName)+"_"+M(5)+".tar.gz"||"",download:!1})},instance:s,compData:f,tableColumn:y,tableList:d,jump:function(){if(0!==v.value.tableSelectList.length){var e=v.value.tableSelectList.map(function(e){return{zip_file_path:e.zip_file_path,file_path:e.file_path}});if(f.value.callback){var t=f.value.params,n=JSON.parse(t.data).extract_path.split("/");return n.pop(),void g({data:JSON.stringify(m(m({},JSON.parse(t.data)),{},{extract_path:n.join("/"),filenames:e,type:0}))})}h({filenames:JSON.stringify(e),type1:0})}else w.error("请选择文件")},cover:function(){if(0!==v.value.tableSelectList.length){var e=v.value.tableSelectList.map(function(e){return{zip_file_path:e.zip_file_path,file_path:e.file_path}});if(f.value.callback){var t=f.value.params,n=JSON.parse(t.data).extract_path.split("/");return n.pop(),void g({data:JSON.stringify(m(m({},JSON.parse(t.data)),{},{extract_path:n.join("/"),filenames:e,type:1}))})}h({filenames:JSON.stringify(e),type1:1})}else w.error("请选择文件")},rename:function(){if(0!==v.value.tableSelectList.length){var e=v.value.tableSelectList.map(function(e){return{zip_file_path:e.zip_file_path,file_path:e.file_path}});if(f.value.callback){var t=f.value.params,n=JSON.parse(t.data).extract_path.split("/");return n.pop(),void g({data:JSON.stringify(m(m({},JSON.parse(t.data)),{},{extract_path:n.join("/"),filenames:e,type:2}))})}h({filenames:JSON.stringify(e),type1:2})}else w.error("请选择文件")},initCover:function(){d.value=f.value.data.data},$reset:function(){d.value=[]},TableRef:v}})),qu={class:"p-20px"},Hu=Je({__name:"receive",setup:function(e){var t=Xu(),n=st(t),a=n.formDisabled,r=n.rules,i=n.isSuccess,u=n.receiveForm,o=n.receiveFormRef;return function(e,t){var n=L,l=bt,c=Zt,s=wt,f=V;return Xe(),Ze("div",qu,[Me(s,{ref_key:"receiveFormRef",ref:o,disabled:ht(a),rules:ht(r),model:ht(u)},{default:mt(function(){return[Me(l,{label:"用户名",prop:"mName"},{default:mt(function(){return[Me(n,{class:"!w-[24rem]",modelValue:ht(u).mName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return ht(u).mName=e}),disabled:ht(i),placeholder:"请填写用户名，不能有中文或特殊符号"},null,8,["modelValue","disabled"])]}),_:1}),Me(l,{label:"密码",prop:"password"},{default:mt(function(){return[ht(i)?(Xe(),gt(n,{key:1,class:"!w-[24rem]",modelValue:ht(u).password,"onUpdate:modelValue":t[3]||(t[3]=function(e){return ht(u).password=e}),disabled:""},null,8,["modelValue"])):(Xe(),gt(c,{key:0,class:"!w-[24rem]",icon:"el-refresh",modelValue:ht(u).password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return ht(u).password=e}),isActive:!0,onIconClick:t[2]||(t[2]=function(){return ht(u).password=ht(D)(16)})},null,8,["modelValue"]))]}),_:1}),ht(i)?yt("",!0):(Xe(),gt(l,{key:0,label:"同步到",prop:"path"},{default:mt(function(){return[Me(n,{class:"!w-[24rem]",modelValue:ht(u).path,"onUpdate:modelValue":t[4]||(t[4]=function(e){return ht(u).path=e}),disabled:""},null,8,["modelValue"])]}),_:1}))]}),_:1},8,["disabled","rules","model"]),ht(i)?(Xe(),gt(f,{key:0,class:"pl-2rem",options:[{content:"使用上面的用户信息，前往发送数据的服务器创建发送端"}]})):yt("",!0)])}}}),Bu={class:"p-20px"},Uu={class:"flex items-center time-unit"},Gu={key:1,class:"mt-20px"},Ju={class:"pt-2rem flex flex-col"},Wu={class:"text-danger p-2rem text-base leading-10 ml-36px"},$u={class:"flex items-center mt-12px ml-4px px-2rem"},Yu={class:"bg-[#f6f8f8] footer-btn flex items-center justify-end mt-2rem p-12px w-full"},Ku=Je({__name:"send",setup:function(e){var t=Xu(),n=st(t),a=n.formDisabled,r=n.sendFormRef,i=n.rulesSend,u=n.sendForm,o=n.alertRsync,c=n.checkOffRsync,s=t.helpList,f=t.handleChangeDelete,p=t.handleConfirm;return function(e,t){var n=L,d=bt,v=dt,m=pt,h=St,g=xt,y=wt,b=V,w=Tt,k=Lt,_=q;return Xe(),Ze("div",Bu,[Me(y,{ref_key:"sendFormRef",ref:r,disabled:ht(a),rules:ht(i),model:ht(u)},{default:mt(function(){return[Me(d,{label:"服务器IP",prop:"ip"},{default:mt(function(){return[Me(n,{modelValue:ht(u).ip,"onUpdate:modelValue":t[0]||(t[0]=function(e){return ht(u).ip=e}),placeholder:"请输入接收服务器IP",width:"34.8rem"},null,8,["modelValue"])]}),_:1}),Me(d,{label:"同步目录",prop:"path"},{default:mt(function(){return[Me(n,{modelValue:ht(u).path,"onUpdate:modelValue":t[1]||(t[1]=function(e){return ht(u).path=e}),disabled:"",width:"34.8rem"},null,8,["modelValue"])]}),_:1}),Me(d,{label:"同步方式",class:"form-row"},{default:mt(function(){return[Me(h,null,{default:mt(function(){return[Me(m,{modelValue:ht(u).delete,"onUpdate:modelValue":t[2]||(t[2]=function(e){return ht(u).delete=e}),class:"!w-[12rem]",onChange:ht(f)},{default:mt(function(){return[Me(v,{label:"增量",value:!1}),Me(v,{label:"完全",value:!0})]}),_:1},8,["modelValue","onChange"]),Me(d,{label:"同步周期"},{default:mt(function(){return[Me(m,{modelValue:ht(u).realtime,"onUpdate:modelValue":t[3]||(t[3]=function(e){return ht(u).realtime=e}),class:"!w-[12rem]"},{default:mt(function(){return[Me(v,{label:"实时同步",value:!0}),Me(v,{label:"定时同步",value:!1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1}),ht(u).realtime?yt("",!0):(Xe(),gt(d,{key:0,label:"定时周期",prop:"cron"},{default:mt(function(){return[Me(h,null,{default:mt(function(){return[Me(m,{modelValue:ht(u).cron.type,"onUpdate:modelValue":t[4]||(t[4]=function(e){return ht(u).cron.type=e}),class:"!w-[10rem] mr-8px"},{default:mt(function(){return[Me(v,{label:"每天",value:"day"}),Me(v,{label:"N分钟",value:"minute-n"})]}),_:1},8,["modelValue"]),nt("div",Uu,["minute-n"!==ht(u).cron.type?(Xe(),gt(n,{key:0,modelValue:ht(u).cron.hour,"onUpdate:modelValue":t[5]||(t[5]=function(e){return ht(u).cron.hour=e}),type:"number",class:"!w-[11.6rem] mr-8px"},{append:mt(function(){return l(t[21]||(t[21]=[Ve(" 小时 ",-1)]))}),_:1},8,["modelValue"])):yt("",!0),Me(n,{modelValue:ht(u).cron.minute,"onUpdate:modelValue":t[6]||(t[6]=function(e){return ht(u).cron.minute=e}),type:"number",class:"w-[12rem]"},{append:mt(function(){return l(t[22]||(t[22]=[Ve(" 分钟 ",-1)]))}),_:1},8,["modelValue"])])]}),_:1})]}),_:1})),Me(d,{label:"限速",class:"form-row"},{default:mt(function(){return[Me(h,null,{default:mt(function(){return[Me(g,{span:8},{default:mt(function(){return[Me(n,{modelValue:ht(u).bwlimit,"onUpdate:modelValue":t[7]||(t[7]=function(e){return ht(u).bwlimit=e}),type:"number",class:"!w-[12rem]"},{append:mt(function(){return l(t[23]||(t[23]=[Ve("KB",-1)]))}),_:1},8,["modelValue"])]}),_:1}),Me(g,{span:14},{default:mt(function(){return[Me(d,{label:"延迟"},{default:mt(function(){return[Me(n,{modelValue:ht(u).delay,"onUpdate:modelValue":t[8]||(t[8]=function(e){return ht(u).delay=e}),type:"number",class:"!w-[12rem]"},{append:mt(function(){return l(t[24]||(t[24]=[Ve("秒",-1)]))}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})]}),_:1}),Me(d,{label:"链接方式",class:"form-row"},{default:mt(function(){return[Me(h,null,{default:mt(function(){return[Me(m,{modelValue:ht(u).rsync,"onUpdate:modelValue":t[9]||(t[9]=function(e){return ht(u).rsync=e}),class:"!w-[12rem]"},{default:mt(function(){return[Me(v,{label:"密钥",value:"key"}),Me(v,{label:"账号",value:"user"})]}),_:1},8,["modelValue"]),Me(d,{label:"压缩传输"},{default:mt(function(){return[Me(m,{modelValue:ht(u).compress,"onUpdate:modelValue":t[10]||(t[10]=function(e){return ht(u).compress=e}),class:"!w-[12rem]"},{default:mt(function(){return[Me(v,{label:"开启",value:!0}),Me(v,{label:"关闭",value:!1})]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1}),"user"===ht(u).rsync?(Xe(),Ze("div",Gu,[Me(d,{label:"用户名",prop:"sname"},{default:mt(function(){return[Me(n,{modelValue:ht(u).sname,"onUpdate:modelValue":t[11]||(t[11]=function(e){return ht(u).sname=e}),width:"34.8rem",placeholder:"请输入用户名"},null,8,["modelValue"])]}),_:1}),Me(d,{label:"密码",prop:"password"},{default:mt(function(){return[Me(n,{modelValue:ht(u).password,"onUpdate:modelValue":t[12]||(t[12]=function(e){return ht(u).password=e}),width:"34.8rem",placeholder:"请输入密码"},null,8,["modelValue"])]}),_:1}),Me(d,{label:"端口",prop:"port"},{default:mt(function(){return[Me(n,{modelValue:ht(u).port,"onUpdate:modelValue":t[13]||(t[13]=function(e){return ht(u).port=e}),width:"34.8rem",type:"number"},null,8,["modelValue"])]}),_:1})])):yt("",!0),"key"===ht(u).rsync?(Xe(),gt(d,{key:2,label:"密钥",prop:"secret_key"},{default:mt(function(){return[Me(n,{modelValue:ht(u).secret_key,"onUpdate:modelValue":t[14]||(t[14]=function(e){return ht(u).secret_key=e}),width:"34.8rem",type:"textarea",placeholder:"请输入密钥"},null,8,["modelValue"])]}),_:1})):yt("",!0)]}),_:1},8,["disabled","rules","model"]),Me(b,{class:"pl-2rem",options:ht(s),"list-style":"disc"},null,8,["options"]),Me(_,{title:"数据安全风险警告",area:[40,"auto"],modelValue:ht(o),"onUpdate:modelValue":t[18]||(t[18]=function(e){return _t(o)?o.value=e:null}),onClose:t[19]||(t[19]=function(e){return ht(p)(!1)}),onCancel:t[20]||(t[20]=function(e){return ht(p)(!1)})},{default:mt(function(){return[nt("div",Ju,[t[28]||(t[28]=nt("div",{class:"flex items-center px-2rem"},[nt("i",{class:"el-icon-warning text-[#e6a23c] text-[3rem] pr-4"}),nt("span",{class:"text-base leading-10 text-danger"},"警告：您选择了完全同步，将会使本机同步与目标机器指定目录的文件保持一致， 请确认目录设置是否有误，一但设置错误，可能导致目标机器的目录文件被删除!")],-1)),nt("span",Wu,"注意： 同步程序将本机目录：【"+kt(ht(u).path)+"】的所有数据同步到目标服务器，若目标服务器的同步目录存在其它文件将被删除!",1),nt("div",$u,[Me(w,{modelValue:ht(c),"onUpdate:modelValue":t[15]||(t[15]=function(e){return _t(c)?c.value=e:null}),class:"!mr-4px"},null,8,["modelValue"]),t[25]||(t[25]=Ve(" 我已了解风险，确认关闭 ",-1))]),nt("div",Yu,[Me(k,{type:"warning",onClick:t[16]||(t[16]=function(e){return ht(p)(!1)})},{default:mt(function(){return l(t[26]||(t[26]=[Ve("取消",-1)]))}),_:1}),Me(k,{type:"danger",onClick:t[17]||(t[17]=function(e){return ht(p)(!0)}),disabled:!ht(c)},{default:mt(function(){return l(t[27]||(t[27]=[Ve("确认选择",-1)]))}),_:1},8,["disabled"])])])]}),_:1},8,["modelValue"])])}}}),Qu=H(Ku,[["__scopeId","data-v-7f4396bf"]]),Xu=i("bT",at("FILES-RSYNC-STORE",function(){var e=Ue(),t=function(t,n,i){r.path=e.value.row.path,s.path=e.value.row.path,n&&(a.value=!1,o.value=!1,Object.assign(r,{mName:"",password:"",path:e.value.row.path,comment:""}),d.value=!1,v.value=!1,Object.assign(s,{ip:"",rsync:"user",sname:"",password:"",path:e.value.row.path,port:873,secret_key:"",delete:!1,realtime:!0,bwlimit:1024,delay:3,compress:!0,cron:{type:"day",where1:"",hour:0,minute:1,id:"",port:""}})),E("receive"===t?{title:"创建接收端",area:42,btn:["确认","取消"],showFooter:!o.value,component:Hu,onConfirm:c}:{title:"创建发送端",area:58,btn:["确认","取消"],component:Qu,onConfirm:y}),i&&i()},n=function(){var t=b(p().m(function t(){var n,a,r,i;return p().w(function(t){for(;;)switch(t.n){case 0:if("site"!==(null===(n=e.value.row)||void 0===n?void 0:n.type)){t.n=1;break}e.value.row.refreshEvent(),t.n=3;break;case 1:return t.n=2,C(function(){return Promise.resolve().then(function(){return nc})},void 0,u.meta.url);case 2:a=t.v,r=a.default,i=r(),(0,i.refreshFilesList)();case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();Ct("popupSetFooter",function(e){});var a=Ue(!1),r=ut({mName:"",password:"",path:"",comment:""}),i=Ue(),o=Ue(!1),l=ut({mName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"},{validator:function(e,t,n){/^[a-zA-Z0-9_]{3,20}$/.test(t)?n():n(new Error("用户名不能有中文或特殊符号"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]}),c=function(){var u=b(p().m(function u(l){return p().w(function(u){for(;;)switch(u.n){case 0:return u.n=1,i.value.validate();case 1:return u.n=2,T({loading:a,request:Ma(m(m({},r),{},{comment:r.mName})),message:!0,success:function(){var a=b(p().m(function a(r){return p().w(function(a){for(;;)switch(a.n){case 0:if(o.value=r.status,!r.status){a.n=2;break}return a.n=1,Va({path:e.value.row.path,s_type:"recv"});case 1:l.unmount(),n(),t("receive");case 2:return a.a(2)}},a)}));return function(e){return a.apply(this,arguments)}}()});case 2:return u.a(2)}},u)}));return function(e){return u.apply(this,arguments)}}(),s=ut({ip:"",rsync:"user",sname:"",password:"",path:"",port:873,secret_key:"",delete:!1,realtime:!0,bwlimit:1024,delay:3,compress:!0,cron:{type:"day",where1:"",hour:0,minute:1,id:"",port:""}}),f=Ue(),d=Ue(!1),v=Ue(!1),h=ut({ip:[{required:!0,message:"请输入ip",trigger:"blur"},{validator:function(e,t,n){/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/.test(t)?n():n(new Error("请输入正确的ip"))}}],sname:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],secret_key:[{required:!0,message:"请输入密钥",trigger:"blur"}]}),g=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:t?(d.value=!0,s.delete=!t):d.value=!1;case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var t=b(p().m(function t(r){var i,u;return p().w(function(t){for(;;)switch(t.n){case 0:return i=m(m({},s),{},{cron:JSON.stringify(m(m({},s.cron),{},{port:String(s.port),hour:String(s.cron.hour),minute:String(s.cron.minute)}))}),"minute-n"===s.cron.type&&(i.cron=JSON.stringify(m(m({},s.cron),{},{hour:String(s.cron.hour),where1:String(s.cron.minute),minute:"",port:String(s.port)}))),"key"===s.rsync?(i.sname="",i.password=""):i.secret_key="",delete i.rsync,t.n=1,f.value.validate();case 1:return t.n=2,T({loading:a,request:qa(i),message:!0,success:function(){var t=b(p().m(function t(a){return p().w(function(t){for(;;)switch(t.n){case 0:if(!a.status){t.n=2;break}return t.n=1,T({request:Va({path:e.value.row.path,s_type:"send"})});case 1:n();case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()});case 2:return u=t.v,t.a(2,u.status)}},t)}));return function(e){return t.apply(this,arguments)}}();return{compData:e,handleClick:t,formDisabled:a,rules:l,isSuccess:o,receiveForm:r,receiveFormRef:i,sendFormRef:f,rulesSend:h,sendForm:s,alertRsync:d,checkOffRsync:v,helpList:[{content:"【同步目录】：若不以/结尾，则表示将数据同步到二级目录，一般情况下目录路径请以/结尾"},{content:"【同步方式】增量： 数据更改/增加时同步，且只追加和替换文件"},{content:"【同步方式】完全： 保持两端的数据与目录结构的一致性，会同步删除、追加和替换文件和目录"},{content:"【限速】：限制数据同步任务的速度，防止因同步数据导致带宽跑高"},{content:"【延迟】：在延迟时间周期内仅记录不同步，到达周期后一次性同步数据，以节省开销"},{content:"【压缩传输】：开启后可减少带宽开销，但会增加CPU开销，如带宽充足，建议关闭此选项"}],handleChangeDelete:g,handleConfirm:function(e){s.delete=e,d.value=!1,v.value=!1}}})),Zu=Object.freeze(Object.defineProperty({__proto__:null,default:Xu},Symbol.toStringTag,{value:"Module"}));i("dj",Zu);var eo=i("bV",at("FILES-DETAIL-STORE",function(){var e=tc(),t=st(e).fileTabActiveData,n=e.refreshFilesList,a=Ue(),r=Ue("routine"),i=Ue(!1),u=function(){var e=b(p().m(function e(){var n,r;return p().w(function(e){for(;;)switch(e.n){case 0:return i.value=!0,e.n=1,wa({filename:a.value.path});case 1:return(n=e.v).status?(a.value=m(m({},a.value),n.data),i.value=!1):w.error(n.msg),e.n=2,Ka({path:t.value.param.path+"/"+a.value.fileName});case 2:r=e.v,a.value.st_size=r.data,l();case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),o=Ue([]),l=function(){o.value=[{title:"文件名",value:a.value.name},{title:"类型",value:a.value.st_type||"未知文件"},{title:"文件路径",value:"".concat(a.value.path,"/").concat(a.value.name)},{title:"文件大小",value:"".concat(a.value.st_size)},{title:"访问时间",value:g(a.value.st_atime)},{title:"修改时间",value:g(a.value.st_mtime)},{title:"元数据修改时间",value:g(a.value.st_ctime)},{title:"文件MD5",value:a.value.md5},{title:"文件sha1",value:a.value.sha1},{title:"所属用户",value:a.value.user},{title:"所属组",value:a.value.group},{title:"文件权限",value:a.value.mode},{title:"特殊权限",value:a.value.lsattr||"无"},{title:"用户id",value:a.value.st_uid},{title:"用户组id",value:a.value.st_gid},{title:"inode的链接数",value:a.value.st_nlink},{title:"inode的节点号",value:a.value.st_ino},{title:"inode保护模式",value:a.value.st_mode},{title:"inode驻留设备",value:a.value.st_dev}]},c=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y({title:"恢复历史文件",content:"是否恢复历史文件 ".concat(g(a.value.st_mtime),"?恢复历史文件后，当前文件内容将会被替换！")});case 1:T({loading:"正在恢复历史文件，请稍后...",request:ka({filename:"".concat(a.value.path,"/").concat(a.value.name),history:t.st_mtime}),success:function(e){e.data.status?(w.success("恢复成功"),n()):w.error("恢复失败")}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),s=ut({owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""}),f=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_a({filename:"".concat(a.value.path+"/"+a.value.fileName)});case 1:(t=e.v).status?(n=t.data,s.auth=n.chmod,s.user=n.chown,d(Number(n.chmod))):w.error(t.msg);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),d=function(e){256&(e=parseInt(e.toString(),8))?s.owner.push("r"):s.owner=s.owner.filter(function(e){return"r"!==e}),128&e?s.owner.push("w"):s.owner=s.owner.filter(function(e){return"w"!==e}),64&e?s.owner.push("x"):s.owner=s.owner.filter(function(e){return"x"!==e}),32&e?s.group.push("r"):s.group=s.group.filter(function(e){return"r"!==e}),16&e?s.group.push("w"):s.group=s.group.filter(function(e){return"w"!==e}),8&e?s.group.push("x"):s.group=s.group.filter(function(e){return"x"!==e}),4&e?s.public.push("r"):s.public=s.public.filter(function(e){return"r"!==e}),2&e?s.public.push("w"):s.public=s.public.filter(function(e){return"w"!==e}),1&e?s.public.push("x"):s.public=s.public.filter(function(e){return"x"!==e}),s.owner=Array.from(new Set(s.owner)),s.group=Array.from(new Set(s.group)),s.public=Array.from(new Set(s.public))},v=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:if(!((t=s.auth.toString()).length>3)){e.n=1;break}return w.error("请输入正确权限"),e.a(2);case 1:if(!s.checkNumber.match(/\D/g)){e.n=2;break}return w.error("请输入正确权限"),e.a(2);case 2:if(!t.match(/\D/g)){e.n=3;break}return w.error("请输入正确权限"),e.a(2);case 3:for(;t.length<3;)t="0"+t;return e.n=4,T({loading:"正在设置文件权限，请稍后...",request:Sa({filename:"".concat(a.value.path,"/").concat(a.value.name),user:s.user,access:t,all:s.isDir?"True":"False"}),message:!0,success:n});case 4:e.v.status||setTimeout(function(){f()},500);case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{activeName:r,fileItem:a,load:i,getFileItem:u,$reset:function(){o.value=[],Object.assign(s,{owner:[],group:[],public:[],auth:0,user:"root",isDir:!0,checkNumber:""})},attrList:o,watchFileItem:l,showHistory:function(e){},recoverHistory:c,checkList:s,ownerOptions:[{label:"root",value:"root"},{label:"www",value:"www"},{label:"mysql",value:"mysql"}],checkNumber:function(e){s.checkNumber=e;var t=String(e).replace(/[^\d]/g,"").slice(0,3);s.auth=t,d(Number(s.auth))},changeUser:function(e){s.user=e},setFileAuths:v,reversePermission:function(){var e=0,t=function(t,n,a,r){t.includes("r")&&(e|=n),t.includes("w")&&(e|=a),t.includes("x")&&(e|=r)};for(t(s.owner,256,128,64),t(s.group,32,16,8),t(s.public,4,2,1),s.auth=e.toString(8);s.auth.length<3;)s.auth="0"+s.auth},getFileAuths:f}})),to=i("cM",at("FILES-RECYCLE-BIN-STORE",function(){var e,t,n=tc(),a=st(n).recyclingBinStatus,r=n.getRealTask,i=Ue("all"),o=Ue(!1),l=Ue(null),c=Ue(null),s=ut({data:{},status:!1,statusDB:!1,type:"all",p:1,limit:10,search:"",time:[]}),f=Ue(),d=Ue(!1),v=function(){var e=b(p().m(function e(t,n){return p().w(function(e){for(;;)switch(e.n){case 0:if(i.value=t,z.p=1,S.value=[],L.value="",s.type=i.value,s.time=[],s.search="","db"!==t){e.n=2;break}return $.value="all",e.n=1,V({type:"db"});case 1:e.n=3;break;case 2:return $.value=t,e.n=3,V({type:t});case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e,t,n,a,r,u="db"===i.value;f.value={list:(null===(e=s.data)||void 0===e?void 0:e.list)||[],type:u||"db"!==s.type?s.type||"db":$.value,num:void 0===(null===(t=s.data)||void 0===t?void 0:t.search_num)?null===(n=s.data)||void 0===n?void 0:n[u?i.value:$.value]:null===(a=s.data)||void 0===a?void 0:a.search_num,size:(null===(r=s.data)||void 0===r?void 0:r.all_size)||0},_.value=u?s.statusDB:s.status},k=function(){var e=b(p().m(function e(t){var n,r,i,u=arguments;return p().w(function(e){for(;;)switch(e.n){case 0:return n=!(u.length>1&&void 0!==u[1])||u[1],t&&t.time_search&&(s.time=t.time_search),t&&t.search?s.search=t.search:t&&""===t.search&&(s.search=""),t&&t.type&&(s.type=t.type),r=m({type:s.type,p:s.p,limit:s.limit,search:s.search,time_search:s.time},t),n&&(o.value=!0),e.n=1,ea(r);case 1:i=e.v,o.value=!1,s.data=i.data,s.status=i.data.status,a.value=i.data.status,s.statusDB=i.data.status_db,h();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),_=Ue(!1),S=Ue([]),x=Ue(""),L=Ue(""),D=Ue(!1),F=ut({resultData:[],resultColumn:[{label:"数据库",prop:"file"}],resultTitle:""}),N=Ue(),j=ut({disabledDate:function(e){var t=new Date;t.setHours(23,59,59,999);var n=t.getTime();return e.getTime()>n}}),P=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.n){case 0:return n={},t&&(n.db=1),e.n=1,ta(n);case 1:a=e.v,w.request(a.data),k();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=b(p().m(function e(){var t,n,a,u;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=null,e.p=1,e.n=2,y({title:"清空回收站",type:"input",input:{content:"清空回收站"},isHtml:!0,content:'<span class="text-[red]">清空回收站后，回收站'.concat("db"===i.value?"【所有数据库】":"【所有暂存文件】","将彻底消失，无法恢复，是否继续操作？</span>")});case 2:return t=w.load("正在清空回收站，请稍候..."),e.n=3,na({type:"db"===i.value?"db":"files"});case 3:n=e.v,(a=n.fail_list)&&(null==a?void 0:a.length)>0&&"db"===i.value?(u=a.map(function(e){return{file:e}}),F.resultData=u,F.resultTitle=n.msg,d.value=!0,D.value=!0):w.request(n),r(V),V(),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,t&&t.close(),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,na({type:"db",force:1});case 1:t=e.v,w.request(t),r(),k(),D.value=!1;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),A=Ue(),z=ut({loading:!1,p:1,limit:10}),M=function(){var e=b(p().m(function e(t,n){var a;return p().w(function(e){for(;;)switch(e.n){case 0:return a="db"===f.value.type?"数据库":"文件",e.n=1,y({title:"删除".concat(a),type:"input",input:{content:"删除".concat(a)},isHtml:!0,content:"风险操作，删除后，".concat(a,"将彻底消失，无法恢复，是否继续操作？")});case 1:return e.n=2,T({loading:"正在批量删除，请稍后...",request:ia({path_list:t.map(function(e){return e.rname})}),success:function(e){var t=[];e.success.forEach(function(e){t.push({name:e,msg:"删除成功",status:!0})}),Object.keys(e.error).forEach(function(n){t.push({name:n,msg:e.error[n],status:!1})}),Ql({resultData:t,resultTitle:"删除"}),n(),V()}});case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=b(p().m(function e(t){var n,a,r=arguments;return p().w(function(e){for(;;)switch(e.n){case 0:return n=!(r.length>1&&void 0!==r[1])||r[1],a="","db"===i.value?($.value="all",a="db"):a=$.value,e.n=1,k(m({p:z.p,limit:z.limit,type:a},t),n);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:if("db"!==f.value.type){e.n=3;break}return e.n=1,y({title:"恢复数据库".concat(t.name),content:"您确定要恢复数据库【".concat(t.name,"】，是否继续？")});case 1:return e.n=2,T({loading:"正在恢复数据库，请稍后...",request:aa({path:t.rname}),message:!0,success:function(e){e.status&&V()}});case 2:e.n=4;break;case 3:Y.value=t,E({title:"恢复文件".concat(t.name),area:41,btn:"确定",component:function(){return C(function(){return u.import("./index-legacy152.js?v=1763689792")},void 0,u.meta.url)},onConfirm:ee});case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return n="db"===f.value.type?"数据库":"文件",e.n=1,y({title:"删除".concat(n).concat(t.name),type:"input",input:{content:"删除".concat(n)},content:"风险操作，删除后，".concat(n,"将彻底消失，无法恢复，是否继续操作？")});case 1:return e.n=2,T({loading:"正在删除，请稍后...",request:ra({path:t.rname}),success:function(e){1===e.tag?(F.resultData=[{file:t.rname}],F.resultTitle=e.msg,d.value=!1,D.value=!0):(w.request(e),V())}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:if(!d.value){e.n=1;break}return O(),e.a(2);case 1:return e.n=2,ra({path:F.resultData[0].file,force:1});case 2:t=e.v,w.request(t),D.value=!1,V();case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ua({name:t.name,rname:t.rname});case 1:n=e.v,(a=n.data).status?window.open("/download?filename=".concat(a.msg.path)):w.error(a.msg);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=b(p().m(function e(t){var n,a,r,i;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ua({name:t.name,rname:t.rname});case 1:if(n=e.v,"string"!=typeof(a=n.data).msg||!a.msg.includes("找不到文件")){e.n=2;break}return w.error("当前文件不可预览"),e.a(2);case 2:r=a.msg.file.nm.split(".").pop(),"images"===kl(r)?(i={path:a.msg.path},Go(i)):Cl(a.msg);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),J=Ue([Yt({key:"rname"}),{label:"文件名",prop:"fileName",minWidth:150,render:function(e){return Me("span",{class:"flex items-center"},[Me("span",{class:["icon-bg",e.is_dir?"folder-icon":Object.keys(_o).includes(wl(e.name,"file"))?_o[wl(e.name,"file")]+"-icon":"file-icon"]},null),Me("span",{class:"truncate w-[26rem]"},[e.name])])}},{label:"原位置",prop:"dname",showOverflowTooltip:!0,render:function(e){return Me("span",{class:"truncate"},[e.dname])}},{label:"大小",width:90,render:function(e){return I(e.size)}},{label:"删除时间",width:145,render:function(e){return g(e.time)}},Kt([{title:"下载",isHide:function(e){return e.is_dir},onClick:U},{title:"查看",isHide:function(e){return e.is_dir},onClick:G},{title:"恢复",onClick:q},{title:"删除",onClick:H}])]),W=[{label:"恢复",value:"recover",event:(t=b(p().m(function e(t,n,a,r,i){var u;return p().w(function(e){for(;;)switch(e.n){case 0:return u=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,aa({path:t.rname});case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}(),e.n=1,t({title:"批量恢复",content:"批量恢复选中后，被删除将会恢复，是否继续操作？",column:[{prop:"rname",label:"名称"},Qt()],onConfirm:function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n(u);case 1:return V(),e.a(2,!1)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(e,n,a,r,i){return t.apply(this,arguments)})},{label:"删除",value:"delete",event:(e=b(p().m(function e(t,n,a,r,i){return p().w(function(e){for(;;)switch(e.n){case 0:M(a.value,i);case 1:return e.a(2)}},e)})),function(t,n,a,r,i){return e.apply(this,arguments)})}],$=Ue("all"),Y=Ue(),K=ut({type:"before",path:""}),Q=Ue(!1),X=Ue(),Z=ut({path:[{validator:function(e,t,n){""===t&&"path"===K.type?n(new Error("请选择恢复目录")):n()},trigger:["blur"]}]}),ee=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,X.value.validate();case 1:return e.n=2,T({loading:Q,request:aa({path:Y.value.rname,rpath:"path"===K.type?"".concat(K.path,"/").concat(Y.value.name):Y.value.dname}),message:!0,success:function(e){e.status&&V()}});case 2:return t=e.v,e.a(2,t.status)}},e)}));return function(){return e.apply(this,arguments)}}();return{activeName:i,loading:o,binData:s,compData:f,watchBinData:h,handleTabChange:v,statusSwitch:_,time:S,popupData:F,showPopup:D,searchName:L,pickerOptions:j,formatDate:x,onCancel:function(){D.value=!1},showPlayer:function(){N.value.focus()},cleanBin:R,clearTime:function(){S.value=[]},setStatus:P,goSearch:function(){k({search:L.value})},changeClearCheck:O,watchTime:function(){var e,t={time_search:[]};2===(null===(e=S.value)||void 0===e?void 0:e.length)?(S.value[0]=new Date(S.value[0]).setHours(0,0,0,0),S.value[1]=new Date(S.value[1]).setHours(23,59,59,0),t.time_search=JSON.stringify([S.value[0]/1e3,S.value[1]/1e3])):(x.value="",t.time_search=JSON.stringify([])),k(t,!1)},dbTableRef:l,tableRef:A,fileTableRef:c,tableData:z,tableColumn:J,tableBatchOptions:W,deleteClearCheck:B,refresh:V,tabActive:$,config:[{type:"all",label:"全部",icon:"svgtofont-left-soft"},{type:"dir",label:"文件夹",icon:"svgtofont-left-files"},{type:"file",label:"文件",icon:"svgtofont-file-text"},{type:"image",label:"图片",icon:"svgtofont-icon-term"},{type:"ont_text",label:"文档",icon:"svgtofont-el-document"}],toggleType:function(e){z.p=1,$.value=e,V({type:e},!1)},rowData:Y,isCmdLoading:Q,cmdForm:K,cmdFormRef:X,cmdRules:Z,openFile:function(){Gc({type:"dir",change:function(e){K.path=e}})},clearSpace:function(e){K.path=K.path.replace(/\s+/g,"")},init:function(){s.type=i.value,v(i.value)},$reset:function(){i.value="all",o.value=!1,Object.assign(s,{data:{},status:!1,statusDB:!1,type:"all",p:1,limit:10,search:"",time:[]}),_.value=!1,S.value=[],x.value="",L.value="",D.value=!1,Object.assign(F,{resultData:[],resultColumn:[{label:"数据库",prop:"file"}],resultTitle:""}),Object.assign(z,{loading:!1,p:1,limit:10}),$.value="all"},$resetCmdForm:function(){Q.value=!1,Object.assign(K,{type:"before",path:""})}}})),no=i("H",at("FILES-LIST-VIEW-STORE",function(){var e=tc(),t=st(e),n=t.mainHeight,a=t.authType,r=t.fileTabActiveData,i=t.navBtnHeight,u=t.imageList,o=t.imgPathItem,c=t.isNoCreteItem,s=t.createListType,f=t.globalTamperStatus,d=t.dataList,v=t.fileBatchNum,m=t.diskAnalysis,h=e.refreshFilesList,g=e.watchCreateListType,k=e.watchDeleteFileData,_=window.location.protocol+"//"+window.location.host+"/download?filename=",S=Ue([{label:"文件名称",id:"fileName",width:"42",sort:"",sortable:!0,class:"cursor-pointer"},{label:"企业级防篡改",width:"12"},{label:"权限/所有者",width:"15"},{label:"大小",width:"10",id:"size",sort:"",sortable:!0,class:"cursor-pointer"},{width:"16",label:"修改时间",id:"time",sort:"",sortable:!0,class:"cursor-pointer"},{label:"备注",width:"20"},{label:"操作",type:"operation",width:"30.4",class:"custom-operate custom-operate-head",style:{"justify-content":"flex-end","padding-right":" 2.8rem",display:"flex",position:"sticky",right:0,background:"var(--el-fill-color-light)",flex:1}}]),x=Ue(null),T=Ue(!1),L=Ue(null);ot([]);var C=Ue([]),E=Ue(!1),D=Ue([]),F=Ue(0),N=Ue(!0),I=Ue(null),j=Ue(0),P=Ue(0),R=function(){var e=b(p().m(function e(t){var n,a,r;return p().w(function(e){for(;;)switch(e.n){case 0:if(!nl(t.fileName)){e.n=1;break}return w.error('文件名不能包含以下字符：\\ / : * ? " < > |'),t.isReName=!0,c.value=!0,e.a(2);case 1:if(c.value=!1,!t.isNew){e.n=6;break}if(s.value="",g(""),""!==t.fileName){e.n=2;break}return k(t),e.a(2);case 2:return e.n=3,Hn({path:al(t.fileName),type:t.type});case 3:if(!(n=e.v).status){e.n=5;break}return e.n=4,h();case 4:t.isReName=!1,"file"===t.type&&setTimeout(function(){var e=d.value.find(function(e){return e.fileName===t.fileName});e&&El(e)},100);case 5:k(t),w.request(n),e.n=9;break;case 6:if(t.fileName!==t.oldName){e.n=7;break}return t.isReName=!1,e.a(2);case 7:return a=w.load("正在重命名，请稍候..."),e.n=8,qn({sfile:al(t.oldName),dfile:al(t.fileName),rename:!0});case 8:r=e.v,a.close(),r.status?(t.isReName=!1,w.success(r.msg)):w.error(r.msg),h();case 9:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(e){R(e)},A=function(){var e=b(p().m(function e(t,n){return p().w(function(e){for(;;)switch(e.n){case 0:if(!n.isOsPs){e.n=1;break}return e.a(2);case 1:t.target.children[1].contains(document.activeElement)||(n.isPsEdit=!1);case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),z=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.n){case 0:if(t.ps===t.oldPs){e.n=2;break}return n=w.load("正在设置备注，请稍候..."),e.n=1,za({filename:t.path,ps_type:0,ps_body:t.ps});case 1:(a=e.v).status?(t.isPsEdit=!1,w.success(a.msg)):w.error(a.msg),n.close(),e.n=3;break;case 2:t.isPsEdit=!1;case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),M=null,V=function(e){var t=Array.from(e.target.classList);return!(t.includes("checkbox--icon")||t.includes("size-link")||t.includes("svgtofont-el-loading")||t.includes("el-input__inner"))},q=function(){var e=b(p().m(function e(t,n){var a,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a={top:"置顶",favorite:"收藏",share:"分享"},e.p=1,!("share"!=n)){e.n=2;break}return e.n=2,y({title:"提示",isHtml:!0,content:"取消【".concat(t.fileName,"】的").concat(a[n],"，是否继续？")});case 2:r=n,e.n="top"===r?3:"favorite"===r?4:"share"===r?5:6;break;case 3:return ml(t,t.isTop?"unset":"set"),e.a(3,6);case 4:return vl(t,function(){return t.isFav=!1}),e.a(3,6);case 5:return Fo(t),e.a(3,6);case 6:e.n=8;break;case 7:e.p=7,e.v;case 8:return e.a(2)}},e,null,[[1,7]])}));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=b(p().m(function e(t){var n,r;return p().w(function(e){for(;;)switch(e.n){case 0:if("ltd"!==a.value){e.n=6;break}if(!f.value.status){e.n=1;break}Wo(t),e.n=5;break;case 1:return e.n=2,B({sName:"tamper_core"});case 2:if(n=e.v,(r=n.data).setup){e.n=4;break}return e.n=3,$c({name:r.name,type:"i",pluginInfo:r});case 3:e.n=5;break;case 4:U(f.value.tip)?w.error("企业级防篡改未安装或版本较低，请检查插件状态。"):w.error("“".concat(f.value.tip,"”请前往【企业级防篡改】启动服务。"));case 5:e.n=7;break;case 6:Wc({sourceId:71});case 7:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),J=null,W={top:0,left:0},$={top:0,left:0},Y=0,K=function(e){if(2!==e.button&&!e.target.closest(".el-input__inner")){var t=document.getElementById("drugBox");if(t&&t.remove(),J){var n=J.getBoundingClientRect().top,a=J.getBoundingClientRect().left;W={top:e.clientY-n,left:e.clientX-a}}document.addEventListener("mousemove",Q),document.addEventListener("mouseup",X)}},Q=function(e){var t=document.getElementById("drugBox");if(t&&t.remove(),J){var n,a=J.getBoundingClientRect().top,r=J.getBoundingClientRect().left;$={top:e.clientY-a>0&&e.clientY-a<J.offsetHeight?e.clientY-a:e.clientY-(a+J.offsetHeight)>1?J.offsetHeight:0,left:e.clientX-r>0&&e.clientX-r<J.offsetWidth?e.clientX-r:e.clientX-(r+J.offsetWidth)>1?J.offsetWidth:0};var i=(null===(n=J)||void 0===n?void 0:n.scrollTop)||0,u={top:$.top>W.top?W.top+i:$.top+i,left:$.left>W.left?W.left:$.left},o=Math.min(Math.abs($.left-W.left),r+J.offsetWidth-u.left),c=Math.min(Math.abs($.top-W.top),a+J.offsetHeight-u.top+i);if(e.clientY-a<0){var s=Math.abs(e.clientY-a);J.scrollTop-=s,0!=J.scrollTop&&(Y+=s),c+=Y}if(e.clientY-(a+J.offsetHeight)>1){var f=e.clientY-(a+J.offsetHeight);J.scrollTop+=f,J.scrollHeight-J.scrollTop!=J.clientHeight&&(Y+=f),c+=Y,u.top-=Y}if(W.top==$.top||W.left==$.left)return!0;var p=document.createElement("div");p.classList.add("absolute","border","top-0","border-[var(--el-base-supplement-dark)]","bg-[var(--el-base-supplement-light-7)]","opacity-[0.15]","overflow-hidden"),p.id="drugBox",J.appendChild(p),p.style.left=u.left+"px",p.style.top=u.top+"px",p.style.width=o+"px",p.style.height=c+"px";var v=document.getElementById("drugBox");if(J&&v){var m=v.offsetTop,h=v.offsetTop+v.offsetHeight,g=[];ee.value.forEach(function(e,t){var n=e.offsetTop,a=e.offsetTop+e.offsetHeight,r=d.value[t];a>=m&&n<=h&&g.push(r.path)});var y=new Set(g),b=new Set(C.value);y.size===b.size&&l(y).every(function(e){return b.has(e)})||(C.value=l(y),ce()),C.value.length>0&&C.value.length===d.value.length?ae.value=!0:ae.value=!1}}},X=function(e){e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",X);var t=document.getElementById("drugBox");t&&t.remove()},Z=function(e){C.value=e.map(function(e){return e.path}),ce()},ee=Ue([]),te=function(){ee.value=[];for(var e=0;e<d.value.length;e++)ee.value.push({offsetTop:36*e,offsetHeight:36});ee.value.length&&(P.value=ee.value[ee.value.length-1].offsetTop,P.value<=n.value-(i.value||64)-266?N.value=!1:N.value=!0)},ne=function(){Ge(function(){for(var e=function(){var e=u.value[t];d.value.forEach(function(t){t.fileName===e[0]&&e[1]&&(t.isSmallImage=e[1])})},t=0;t<u.value.length;t++)e();D.value=d.value.filter(function(e){return void 0!==e.isSmallImage}).map(function(e){return"".concat(_).concat(e.path)})})},ae=Ue(!1),re=function(e){var t;(2===e.button&&"INPUT"===e.target.tagName&&e.preventDefault(),e.target.closest(".scrollTable")||e.target.closest(".v-contextmenu"))||(null===(t=x.value)||void 0===t||t.hide())},ie=Ue(0),ue=Ue(null),oe=Ue(null),le=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,B({sName:"disk_analysis"});case 1:((t=e.v).data.status||"ltd"===a.value)&&$c({name:t.data.name,type:"i",pluginInfo:t.data,softData:t.data}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=d.value.filter(function(e){return C.value.includes(e.path)});v.value=e},se=function(){Ge(function(){var e;null===(e=J=document.querySelector(".scrollTable"))||void 0===e||e.addEventListener("mousedown",K)})};return{mainHeight:n,authType:a,diskAnalysis:m,headData:S,dataList:d,selectList:C,fileBatchNum:v,checkedAll:ae,imgPathItem:o,imgIndex:F,showViewer:E,imgList:D,scrollHeight:j,scrollHeightBottom:P,isShowShadow:N,context:x,contextRow:L,isBatch:T,scrollRef:I,imageList:u,navBtnHeight:i,fileTabActiveData:r,bindMouseDown:se,buyPlugin:function(){m.value.isBuy||"ltd"===a.value?le():Wc({sourceId:140,disablePro:!0})},clickName:function(e){if("dir"===e.type)il(e.path);else{var t={"查看图片":["jpg","png","gif","jpeg"],"播放视频":["mp4","avi","mov","rmvb","rm","flv","3gp","wmv","mkv","mpeg","mpg","ts","webm","vob","swf"],"解压文件":["zip","rar","gz","war","tgz","7z","tar.gz","tar"],"播放音频":["mp3","wav","wma","ogg","ape","flac","aac","m4a"]},n=e.ext,a="查看文档";for(var r in t)if(t[r].includes(n)){a=r;break}M&&M.close(),M=w.msg({customClass:"no-icon !z-10",message:"双击".concat(a),type:"info"})}},handleBlurCheck:function(){var e=d.value.find(function(e){return e.isReName});O(e)},handleEvent:function(e,t){var n;if(null===(n=x.value)||void 0===n||n.hide(),!(G()&&e instanceof MouseEvent)){var a,r,i=(new Date).getTime(),u=i-ie.value;u<300&&u>0&&oe.value===t?(null!==ue.value&&clearTimeout(ue.value),a=e,r=t,M&&M.close(),V(a)&&(r.isPs||r.isReName||El(r))):(oe.value=t,ue.value=window.setTimeout(function(){!function(e,t){var n=Array.from(e.target.classList);V(e)&&(n.includes("fileName")||(C.value=[t.path],ce()))}(e,t)},300)),ie.value=i}},handleRightClick:function(e,t){var n;e.preventDefault(),e.stopPropagation();var a,r=t?t.path:null;if((t&&(a=r,!C.value.find(function(e){return e===a}))||0===e.button)&&(C.value=[],C.value.push(r),ce()),C.value.length>1&&t&&2===e.button){var i;T.value=!0;var u=[];return d.value.forEach(function(e){C.value.includes(e.path)&&u.push(e)}),L.value=u,void(null===(i=x.value)||void 0===i||i.show(e))}T.value=!1,L.value=t||null,t||(C.value=[],ce()),null===(n=x.value)||void 0===n||n.show(e)},handleCheckFile:function(e){new Set(C.value).has(e.path)?C.value=C.value.filter(function(t){return t!==e.path}):C.value.push(e.path),ae.value=C.value.length===d.value.length,ce()},handleCheckAll:function(e){Z(e?d.value:[]),ae.value=e},handleFileLock:H,handleEnPsView:function(e){e.isOsPs||(e.oldPs=e.ps,e.isPsEdit=!0)},handleLvPsView:A,handleSetPs:z,handleReName:function(e){e.oldName=e.fileName,e.isReName=!0},openImgView:function(e){F.value=D.value.findIndex(function(t){return t==="".concat(_).concat(e.path)}),E.value=!0},opearationIconClick:q,onReNameKeyup:O,sortTable:function(e){e.sortable&&(S.value.forEach(function(t){t.id!==e.id&&(t.sort="")}),"asc"===e.sort?e.sort="desc":"desc"===e.sort?e.sort="":e.sort="asc",r.value.param.sort=""!=e.sort?e.id:"",r.value.param.reverse="asc"==e.sort?"False":"True",h())},calcFileListHeightFn:te,setSmallImage:ne,closeImgPreView:function(){E.value=!1},findCurrentImgIndex:function(e){F.value=D.value.findIndex(function(t){return t===e}),E.value=!0},watchDataList:function(e){C.value=[],ae.value=!1,e.length&&(te(),ne()),ce(),Ge(function(){var e;null===(e=I.value)||void 0===e||e.scrollToPosition(0)})},init:function(){var e;te(),se(),I.value.$el.addEventListener("scroll",function(){j.value=I.value.$el.scrollTop+(n.value-(i.value||64)-266),0===I.value.$el.scrollTop&&(j.value=0)}),(e=S.value.find(function(e){return e.id===r.value.param.sort}))&&(e.sort="False"==r.value.param.reverse?"asc":"desc"),document.addEventListener("mousedown",re)},$reset:function(){var e;null===(e=J)||void 0===e||e.removeEventListener("mousemove",Q),document.removeEventListener("mousedown",re)},calcFileListHeight:ee,watchSelectListLength:ce}})),ao=at("FILES-ACE-MOBILE-STORE",function(){var e,t,n=s().mainHeight,a=Ue(),r=Ue(),i=Ue(null),u=function(e,t){if(nu(e),t){var n=t.currentTarget||t.currentTarget,a=i.value,r=a.offsetWidth,u=n.offsetLeft-r/2+n.offsetWidth/2;a.scroll({left:u,behavior:"smooth"})}},o=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:eu(t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),l=function(e){e.preventDefault();var t=e.deltaY;i.value.scrollLeft+=t},c=Ue(),f=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Fi();case 1:return e.n=2,ji(t);case 2:di.value=e.v;case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,f(c.value);case 1:if(!a){e.n=2;break}return e.n=2,Xi({title:a.value.fileName,type:"editor",path:a.value.path,size:a.value.size});case 2:return e.n=3,er({name:a.value.fileName,path:a.value.path});case 3:return e.n=4,Ci();case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),v=Ue(!1),m=Ue(null),h=Ue(!1),g=Ue(null),y=Ue([{title:"保存",icon:"svgtofont-el-select",click:function(){S()&&lu(mi)}},{title:"全部保存",icon:"svgtofont-icon-minmax-black",click:function(){S()&&fu()}},{title:"刷新",icon:"svgtofont-el-refresh-right",click:(t=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:S()&&Zi(mi,!0);case 1:return e.a(2)}},e)})),function(){return t.apply(this,arguments)})},{title:"搜索",icon:"svgtofont-el-search",click:function(){S()&&di.value.execCommand("find")}},{title:"替换",icon:"svgtofont-icon-log",click:function(){S()&&di.value.execCommand("replace")}},{title:"文件足迹",icon:"svgtofont-left-crontab",click:function(){Bo()}},{title:"退出",icon:"svgtofont-el-close",click:function(){_()}}]),k=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:ui(),Ei(),A();case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,pu();case 1:return e.v?Zo(k):(localStorage.removeItem("aceEditor"),iu(),k()),e.a(2,!1)}},e)}));return function(){return e.apply(this,arguments)}}(),S=function(){return!(!Gi()||"custom"===mi.type)||(w.error("当前页面不支持该操作"),!1)},x=Ue(null),T=Ue({}),L=function(){var e=b(p().m(function e(t,n){return p().w(function(e){for(;;)switch(e.n){case 0:ei(t,n,a.value);case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),C=function(e){var t=Yr.value.getNode(e);t&&e.isNew&&Yr.value.remove(t),t&&e.isReName&&(e.isReName=!1),Wr.value=!1},E=function(e,t){C(T.value),ti(e,t,x)},D=function(e){return yi.value.some(function(t){return t.path===e.path})?"text-[#cca700]":""},F=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:Ge(function(){var e=(a.value.path||"/www").split("/");e.pop(),Hr.value=e.join("/")});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),N=Ue("btn"),I=Ue(!1),j=Ue(""),P=Ue([]),R=Ue(""),O=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Zr(Hr.value,j.value,I.value?"True":void 0);case 1:if(t=e.v,$r.value=!1,t){e.n=2;break}return e.a(2);case 2:Br.value=t,Xr();case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.value;case 1:null==(t=e.v)||t.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return{fileItem:a,instance:r,tabsElement:i,changeTab:u,getDataChangeTab:function(){Ge(function(){var e=yi.value[yi.value.length-1],t=i.value.children[yi.value.length-1];u(e.id,{currentTarget:t})})},closeTab:o,initHeader:function(){Ge(function(){i.value.addEventListener("wheel",l)})},$resetHeader:function(){i.value&&i.value.removeEventListener("wheel",l)},editorRef:c,mainHeight:n,createEditorView:f,initContent:d,isShow:v,dropdownMenu:m,handleClickOutside:function(e){m.value&&!m.value.contains(e.target)&&(v.value=!1)},isShowTool:h,dropdownMenuRef:g,column:y,checkOperationAvailable:S,handleClickOutsideEvent:function(e){g.value&&!g.value.contains(e.target)&&(h.value=!1)},openPopup:function(e){Gi?(h.value=!1,e.click()):w.error("当前页面不支持该操作")},treeProps:{label:"fileName",key:"path",isLeaf:"isFile"},loadNode:L,renderTree:function(e,t){t.node;var n=t.data,a=(t.store,Hi(n.fileName).mode),r=[e("span",{class:(n.isFile?"ace-".concat(a,"-icon ace-text-icon"):"ace-folder-icon")+" icon-editor-left",style:{"font-size":"4rem"}}),n.isReName?e():e("span",{class:"el-tree-node__label "+D(n),attrs:{title:n.fileName}},n.fileName)];return e("span",{class:"flex items-center ".concat(n.isReName?"newFiles":"defaultFiles"),on:{contextmenu:function(e){e.preventDefault(),E(e,n)}}},r)},handleExpandChange:function(e){null!=e&&e.path&&!Jr.value.includes(e.path)&&Jr.value.push(e.path)},handleCollapseChange:function(e){var t=Jr.value.indexOf(null==e?void 0:e.path);-1!==t&&Jr.value.splice(t,1),C(T.value)},initList:F,type:N,isCheck:I,searchValue:j,changeValue:function(e){Jr.value.length=0,j.value="","search"===e?(P.value=Br.value,R.value=Hr.value,Br.value=[],$r.value=!0):(Br.value=P.value,Hr.value=R.value)},searchFile:O,closeSearch:function(){N.value="btn",Xr()},close:A,init:function(){Ge(function(){e=setInterval(function(){var e=document.querySelector(".el-overlay-dialog"),t=null==e?void 0:e.querySelector(".el-dialog__body");t&&(e&&(e.style.alignItems="flex-start",e.style.paddingTop="1vh",e.style.paddingBottom="1vh"),t.style.maxHeight="90vh",t.style.height="auto",t.style.overflowY="auto",t.style.WebkitOverflowScrolling="touch")},1e3)})},$reset:function(){clearInterval(e)}}}),ro={class:"dialog-btn-group"},io=["title","data-state"],uo={class:"bt-dialog-content"},oo={key:1,class:"bt-dialog-footer"},lo=Je({__name:"index",props:{title:{type:[String,Boolean],default:!1},area:{default:function(){return["40%","40%"]}},modal:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1},component:{default:""},compData:{default:function(){return{}}},fullscreen:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},footer:{type:Boolean,default:!1},zIndex:{default:999},customClass:{default:""},closeBtn:{default:"one"},onClose:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}},onConfirm:{type:Function,default:function(){}},cancelText:{default:"取消"},confirmText:{default:"确定"}},setup:function(e){var t=e,n=Ue(),a=Ue(!1),i=Ue(!1),u=Ue(t.fullscreen),o=Ue({x:0,y:0}),c=Ue({x:!1,y:!1}),s=Ue([0,0]),f=Ue({x:0,y:0}),p=Ue(!1),d=Ue(!1),v=Ue([0,0]),m=Et(function(){var e=r(t.area,2),n=e[0],a=e[1];return p.value?["100%","100%"]:d.value?["300px","44px"]:[n,a].map(function(e){return"number"==typeof e?"".concat(e,"rem"):e})}),h=Et(function(){return p.value?{x:0,y:0}:d.value?a.value?c.value:{x:"190px",y:"90%"}:c.value}),g=Et(function(){return u.value||i.value?"two":t.closeBtn}),y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.value,a=t.clientWidth,r=t.clientHeight,i=(window.innerWidth-a)/2,u=(window.innerHeight-r)/2;c.value={x:"".concat(i,"px"),y:"".concat(u,"px")},e&&(s.value=[a,r],v.value=[s.value[0],s.value[1]])},b=function(e){if(!p.value){var t=e.clientX,r=e.clientY,i=n.value.getBoundingClientRect();if(!a.value&&d.value){var u=i.left,l=i.top;f.value={x:u,y:l},c.value={x:"".concat(u,"px"),y:"".concat(l,"px")}}a.value||(a.value=!0);var s=t-i.left,v=r-i.top,m=function(e){var t=e.clientX-s,n=e.clientY-v,a=window.innerWidth-i.width,r=window.innerHeight-i.height;t<0&&(t=0),n<0&&(n=0),t>a&&(t=a),n>r&&(n=r);var u=t-o.value.x,l=n-o.value.y;f.value={x:u,y:l},c.value={x:"".concat(u,"px"),y:"".concat(l,"px")}},h=function(){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",h)}},w=function(e){d.value=!0,a.value=!1},k=function(e){p.value=!0},_=function(e){p.value=!1,d.value=!1,Ge(function(){y()})};return Dt("fullData",Ft(p)),Nt(function(){var e;y(!0),e=ct(function(e){if(!p.value){var t=e[0].contentRect,n=t.height,r=t.width;if(i.value=n<=s.value[1],a.value){var u=r-(f.value.x+s.value[0]/2),o=n-(f.value.y+s.value[1]/2);u<0&&(f.value.x+=Number(u.toFixed(0)),c.value.x="".concat(f.value.x,"px")),o<0&&(f.value.y+=Number(o.toFixed(0)),c.value.y="".concat(f.value.y,"px"))}else y()}},100),Ot(document.body,e)}),function(a,r){var i=J;return Xe(),gt(Rt,{name:"dialog-fade"},{default:mt(function(){return[nt("div",{ref_key:"dialog",ref:n,class:It("bt-dialog-v2 ".concat(e.customClass)),style:jt({zIndex:e.zIndex,width:ht(m)[0],height:ht(m)[1],left:ht(h).x,top:ht(h).y})},[e.title?(Xe(),Ze("header",{key:0,class:"bt-dialog-header",onMousedown:b},[nt("span",null,kt(e.title),1),nt("div",ro,[ht(d)||ht(p)?yt("",!0):(Xe(),Ze("span",{key:0,class:"icon",title:"最小化",onClick:tt(w,["stop","prevent"])},l(r[2]||(r[2]=[nt("i",{class:"svgtofont-el-semi-select"},null,-1)])))),ht(p)||ht(d)?yt("",!0):(Xe(),Ze("span",{key:1,class:"icon",title:"全屏",onClick:tt(k,["stop","prevent"])},l(r[3]||(r[3]=[nt("i",{class:"svgtofont-icon-max-black"},null,-1)])))),ht(p)||ht(d)?(Xe(),Ze("span",{key:2,class:"icon",title:ht(p)?"退出全屏":"恢复视图大小","data-state":ht(p)?"fullscreen":"minimize",onClick:tt(_,["stop","prevent"])},l(r[4]||(r[4]=[nt("i",{class:"svgtofont-icon-minmax-black"},null,-1)])),8,io)):yt("",!0),"one"===ht(g)?(Xe(),Ze("span",{key:3,class:"ico-close-one",title:"关闭视图",onClick:r[0]||(r[0]=tt(function(){return e.onClose&&e.onClose.apply(e,arguments)},["stop","prevent"]))},l(r[5]||(r[5]=[nt("i",{class:"absolute w-3rem h-3rem top-0 left-0 origin-center close-popup-btn"},null,-1)])))):yt("",!0),"two"===ht(g)?(Xe(),Ze("span",{key:4,class:"icon",title:"关闭视图",onClick:r[1]||(r[1]=tt(function(){return e.onClose&&e.onClose.apply(e,arguments)},["stop","prevent"]))},l(r[6]||(r[6]=[nt("i",{class:"!text-subtitleLarge svgtofont-el-close icon-group"},null,-1)])))):yt("",!0)])],32)):yt("",!0),Ke(nt("article",uo,[(Xe(),gt(Pt(t.component)))],512),[[Qe,!ht(d)]]),e.footer?Ke((Xe(),Ze("footer",oo,[Me(i,{onClick:e.onCancel},{default:mt(function(){return[Ve(kt(e.cancelText),1)]}),_:1},8,["onClick"]),Me(i,{type:"primary",onClick:e.onConfirm},{default:mt(function(){return[Ve(kt(e.confirmText),1)]}),_:1},8,["onClick"])],512)),[[Qe,!ht(d)]]):yt("",!0)],6)]}),_:1})}}}),co=H(lo,[["__scopeId","data-v-ab605725"]]),so=function(e){return j(e)?e.map(function(e){return $(e)&&(e="".concat(e,"rem")),Y(e)&&e.match(/[A-z\%]+/)?e:"".concat(e,"rem")}):$(e)?["".concat(e,"rem")]:Y(e)&&(e.includes("rem")||e.includes("px")||e.includes("vw"))?[e]:["".concat(e,"rem")]},fo=function(e){var t=e.confirmText,n=e.cancelText;return(null!=e&&e.footer||null!=e&&e.confirm)&&(t=t||"确认",n=n||"取消"),{footer:(null==e?void 0:e.footer)||!1,confirmText:t,cancelText:n}},po=function(e,t){e.unmount(),t&&document.body.removeChild(t)},vo=function(e,t){K(e),Q(e),document.body.appendChild(t),e.mount(t),e.directive("loading",zt.directive)},mo=function(e){if(e.modal){var t=document.createElement("div");t.classList.add("dialog-mask"),t.style.zIndex="999",document.body.appendChild(t)}},ho=function(){var e=b(p().m(function e(t){var n,a,r,i,u,o,l,c;return p().w(function(e){for(;;)switch(e.n){case 0:if(n=document.createElement("div"),a=so(t.area),r=fo(t),i=r.footer,u=r.cancelText,o=r.confirmText,"function"!=typeof t.component){e.n=3;break}if(l=null==t?void 0:t.component(),!W(l)){e.n=2;break}return e.n=1,t.component();case 1:t.component=e.v.default,e.n=3;break;case 2:l.default?t.component=l.default:t.component=l;case 3:return c=At(co,m(m({},t),{},{area:a,footer:i,cancelText:u,confirmText:o,modelValue:!0,onConfirm:function(){var e=b(p().m(function e(){var a;return p().w(function(e){for(;;)switch(e.n){case 0:if(null==t||!t.onConfirm){e.n=2;break}return e.n=1,null==t?void 0:t.onConfirm(c);case 1:return(a=e.v)&&po(c,n),e.a(2,a);case 2:return po(c,n),e.a(2,!0)}},e)}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){t.onCancel&&t.onCancel(c),t.onClose&&t.onClose(c),t.onCancel||t.onClose||po(c,n)},onClose:function(){t.onCancel&&t.onCancel(c),t.onClose&&t.onClose(c),t.onCancel||t.onClose||po(c,n)}})),mo(t),vo(c,n),e.a(2,c)}},e)}));return function(t){return e.apply(this,arguments)}}(),go=x(),yo=i("T",new Map([["/etc","PS: 系统主要配置文件目录"],["/home","PS: 用户主目录"],["/tmp","PS: 公共的临时文件存储点"],["/root","PS: 系统管理员的主目录"],["/home","PS: 用户主目录"],["/usr","PS: 系统应用程序目录"],["/boot","PS: 系统启动核心目录"],["/lib","PS: 系统资源文件类库目录"],["/mnt","PS: 存放临时的映射文件系统"],["/www","PS: 宝塔面板程序目录"],["/bin","PS: 存放二进制可执行文件目录"],["/dev","PS: 存放设备文件目录"],["/www/wwwlogs","PS: 默认网站日志目录"],["/www/server","PS: 宝塔软件安装目录"],["/www/wwwlogs","PS: 网站日志目录"],["/www/Recycle_bin","PS: 回收站目录,勿动"],["/www/server/panel","PS: 宝塔主程序目录，勿动"],["/www/server/panel/plugin","PS: 宝塔插件安装目录"],["/www/server/panel/BTPanel","PS: 宝塔面板前端文件"],["/www/server/panel/BTPanel/static","PS: 宝塔面板前端静态文件"],["/www/server/panel/BTPanel/templates","PS: 宝塔面板前端模板文件"],[X("backup_path"),"PS: 默认备份目录"],[X("sites_path"),"PS: 默认建站目录"]])),bo=i("af",Ue([{name:"收藏夹",ename:"favorite",callback:function(){return wo("favorite")}},{name:"文件分享",ename:"fileShare",callback:function(){return wo("fileShare")}},{name:"文件同步",ename:"fileSync",callback:function(){return wo("fileSync")}},{name:"企业级防篡改",ename:"tamperProof",callback:function(){return wo("tamperProof")}},{name:"文件内容搜索",ename:"fileSearch",callback:function(){return wo("fileSearch")}}])),wo=function(e){var t=tc().openPlugin;switch(e){case"favorite":Co();break;case"fileShare":Eo();break;case"fileSync":t("rsync",70);break;case"tamperProof":t("tamper_core",75);break;case"fileSearch":To()}},ko=["folder","folder-unempty","sql","c","cpp","cs","flv","css","js","htm","html","java","log","mht","php","url","xml","ai","bmp","cdr","gif","ico","jpeg","jpg","JPG","png","psd","webp","ape","avi","mkv","mov","mp3","mp4","mpeg","mpg","rm","rmvb","swf","wav","webm","wma","wmv","rtf","docx","fdf","potm","pptx","txt","xlsb","xlsx","7z","cab","iso","rar","zip","gz","war","bt","tgz","file","apk","bookfolder","folder-empty","fromchromefolder","documentfolder","fromphonefolder","mix","musicfolder","picturefolder","videofolder","sefolder","access","mdb","accdb","fla","doc","docm","dotx","dotm","dot","pdf","ppt","pptm","pot","xls","csv","xlsm","py","sh","json","lua","bt_split","bt_split_json"],_o={sql:"sql",css:"css",js:"js",html:"html",java:"java",php:"php",xml:"xml",bmp:"bmp",cdr:"cdr",gif:"gif",ico:"ico",jpeg:"jpeg",jpg:"jpg",JPG:"jpg",png:"png",webp:"webp",avi:"avi",mkv:"mkv",mov:"mov",mp3:"mp4",mp4:"mp4",mpeg:"mpeg",mpg:"mpg",rm:"rm",rmvb:"rmvb",swf:"swf",webm:"webm",wma:"wma",wmv:"wmv","7z":"compress",rar:"compress",zip:"compress",gz:"compress",war:"compress",tgz:"compress","tar.gz":"compress",iso:"iso",apk:"apk",access:"access",doc:"doc",pdf:"pdf",ppt:"ppt",xls:"xls",bt_split:"split",bt_split_json:"join",javascript:"js",json:"json",log:"log",lua:"lua",py:"py",python:"py",recycle:"recycle",flac:"flac",sh:"sh"},So={images:["jpg","jpeg","png","bmp","gif","tiff","ico","JPG","webp"],compress:["zip","rar","gz","war","tgz","7z","tar.gz","tar"],video:["mp4","mp3","mpeg","mpg","mov","avi","webm","mkv","mkv","mp3","rmvb","wma","wmv","flac","mov"],ont_text:["iso","xlsx","xls","doc","docx","tiff","exe","so","bz","dmg","apk","pptx","ppt","xlsb","pdf"]},xo=function(e){var t=st(Eu()).instance;return t.value=E({title:"实时任务队列",area:51,component:function(){return C(function(){return u.import("./index-legacy153.js?v=1763689792")},void 0,u.meta.url)},compData:{callback:v(e)?e:void 0},modal:!1}),t.value},To=i("v",function(){return E({title:"文件内容搜索",area:105,component:function(){return C(function(){return u.import("./index-legacy154.js?v=1763689792")},void 0,u.meta.url)}})}),Lo=i("aa",function(){var e=_u().onConfirm;return E({title:"创建软链接",area:50,btn:["确认","关闭"],component:function(){return C(function(){return u.import("./index-legacy155.js?v=1763689792")},void 0,u.meta.url)},onConfirm:e})}),Co=i("M",function(){var e=Su(),t=st(e).instance;return t.value=E({title:"管理收藏夹",area:85,component:function(){return C(function(){return u.import("./index-legacy156.js?v=1763689792")},void 0,u.meta.url)}}),t.value}),Eo=i("S",function(){return E({title:"分享列表",area:85,component:function(){return C(function(){return u.import("./index-legacy157.js?v=1763689792")},void 0,u.meta.url)}})}),Do=function(e){var t=ju(),n=st(t).fileItem,a=t.onConfirm;return n.value=e,E({title:"设置分享文件[ ".concat(e.fileName," ]"),area:45,btn:"生成外链",component:function(){return C(function(){return u.import("./index-legacy158.js?v=1763689792")},void 0,u.meta.url)},onConfirm:a})},Fo=function(e,t){var n=ju(),a=st(n).compData,r=n.onConfirmDetail;return a.value=m(m({},e),{},{isShareList:t}),E({title:"外链分享-[".concat(e.path?e.path:e.filename,"]"),btn:"关闭分享外链",confirmBtnType:"danger",area:55,component:function(){return C(function(){return u.import("./detail-legacy.js?v=1763689792")},void 0,u.meta.url)},onConfirm:r})},No=function(e){var t=Xu();return st(t).compData.value={row:e},E({title:"【".concat(e.path,"】设置数据同步"),area:56,component:function(){return C(function(){return u.import("./index-legacy159.js?v=1763689792")},void 0,u.meta.url)},compData:{row:e}})},Io=i("x",function(){return E({title:"文件操作记录",area:80,component:function(){return C(function(){return u.import("./index-legacy160.js?v=1763689792")},void 0,u.meta.url)},compData:{}})}),jo=function(e,t){var n=st(eo()),a=n.activeName,r=n.fileItem;return a.value=t,r.value=e,E({title:"[ ".concat(e.fileName," ] - 文件属性"),area:58,component:function(){return C(function(){return u.import("./index-legacy161.js?v=1763689792")},void 0,u.meta.url)}})},Po=function(e){var t=Vu(),n=st(t).fileItem,a=t.onConfirm;return n.value=e,E({title:"压缩文件",area:48,btn:"压缩",component:function(){return C(function(){return u.import("./index-legacy162.js?v=1763689792")},void 0,u.meta.url)},onConfirm:a})},Ro=i("c1",function(e){var t=Mu(),n=st(t).fileItem,a=t.onConfirm;return n.value=e,E({title:"解压文件[ ".concat(e.fileName," ]"),area:48,btn:"解压",component:function(){return C(function(){return u.import("./index-legacy163.js?v=1763689792")},void 0,u.meta.url)},onConfirm:a})}),Oo=function(e){var t=Ru(),n=st(t).fileItem,a=t.onConfirm;return n.value=e,E({title:"【".concat(e.fileName,"】文件拆分"),area:55,btn:"确定",component:function(){return C(function(){return u.import("./index-legacy164.js?v=1763689792")},void 0,u.meta.url)},onConfirm:a})},Ao=function(e){var t=Au(),n=st(t).fileItem,a=t.onConfirm;return n.value=e,E({title:"合并【".concat(e.fileName,"】文件"),area:44,btn:"确定",component:function(){return C(function(){return u.import("./index-legacy165.js?v=1763689792")},void 0,u.meta.url)},onConfirm:a})},zo=function(e){var t=Pu(),n=st(t).fileItem,a=t.onConfirm;return n.value=e,E({title:"发送至邮箱",area:50,btn:"发送",component:function(){return C(function(){return u.import("./index-legacy166.js?v=1763689792")},void 0,u.meta.url)},onConfirm:a})},Mo=function(e){var t=Tu(),n=st(t).instance;return n.value=E({title:"文件格式转换",area:78,component:function(){return C(function(){return u.import("./index-legacy167.js?v=1763689792")},void 0,u.meta.url)}}),n.value},Vo=i("O",function(e){var t=ku(),n=st(t),a=n.fileItem,r=n.instance;a.value=e,r.value=E({title:"压缩预览 --【".concat(e.fileName,"】"),area:74,component:function(){return C(function(){return u.import("./index-legacy168.js?v=1763689792")},void 0,u.meta.url)}})}),qo=function(){var e=document.getElementById("layout-footer"),t=null==e?void 0:e.getBoundingClientRect(),n=(null==t?void 0:t.width)||0,a=document.getElementById("layout-main"),r=null==a?void 0:a.getBoundingClientRect(),i=(null==r?void 0:r.width)||0;return(n||i)-32},Ho=function(){var e=b(p().m(function e(t,n){var a,r,i,o,l,c,s,f,d,v,m,h,g;return p().w(function(e){for(;;)switch(e.n){case 0:a=st(li()),r=a.fileItem,i=a.instance,o=li(),l=o.onCancel,c=st(ao()),s=c.fileItem,f=c.instance,d=qo(),r.value=t,s.value=t,v=document.querySelectorAll(".el-overlay"),m=v[v.length-1],h=m?window.getComputedStyle(m).zIndex:null,g=ho({title:"在线文本编辑器",area:d<1280?"100vw":143,customClass:"dialog-editor",zIndex:h?parseInt(h)+1:2012,component:function(){return C(function(){return u.import("./index-legacy169.js?v=1763689792")},void 0,u.meta.url)},fullscreen:!0,compData:{data:t,callback:n},onCancel:l}),i.value=g,f.value=g;case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Bo=i("y",function(){return E({title:"文件历史版本",area:75,component:function(){return C(function(){return u.import("./index-legacy170.js?v=1763689792")},void 0,u.meta.url)}})}),Uo=i("U",function(e){var t=Fu(),n=st(t).fileItem,a=t.onConfirm;return n.value=e,E({title:"导入数据库",area:40,btn:"确定",component:function(){return C(function(){return u.import("./index-legacy171.js?v=1763689792")},void 0,u.meta.url)},onConfirm:a})}),Go=function(e){return st(Du()).fileItem.value=e,E({area:75,component:function(){return C(function(){return u.import("./index-legacy172.js?v=1763689792")},void 0,u.meta.url)}})},Jo=function(e,t,n,a){var r=zu(),i=st(r).compData,o=r.onConfirm;return i.value={data:e,fileItem:t,name:n,path:a},E({title:"在线编辑",area:65,btn:"保存",component:function(){return C(function(){return u.import("./index-legacy173.js?v=1763689792")},void 0,u.meta.url)},onConfirm:o})},Wo=function(e,t){var n=Cu(),a=st(n).compData,r=n.onConfirm;return a.value={data:e,temp_data:t},E({title:"【".concat(e.path,"】配置"),area:40,btn:!0,component:function(){return C(function(){return u.import("./index-legacy174.js?v=1763689792")},void 0,u.meta.url)},onConfirm:r})},$o=i("ad",function(e){return st(Nu()).videoUrl.value=e.path,E({title:"视频播放",area:89,component:function(){return C(function(){return u.import("./index-legacy175.js?v=1763689792")},void 0,u.meta.url)}})}),Yo=i("C",function(){var e=st(Ou()).instance;return e.value=E({title:"宝塔终端",area:[80,50],component:function(){return C(function(){return u.import("./index-legacy176.js?v=1763689792")},void 0,u.meta.url)}}),e.value}),Ko=function(e,t,n){var a=Vu(),r=st(a),i=r.compData,o=r.instance;return i.value={data:e,params:t,callback:n},o.value=E({title:!1,area:70,component:function(){return C(function(){return u.import("./index-legacy177.js?v=1763689792")},void 0,u.meta.url)}}),o.value},Qo=i("Q",function(e){var t=wu(),n=st(t),a=n.compData,r=n.instance,i=t.onConfirm;return a.value=e,r.value=E({title:"".concat("upload"===e.type?"上传到"+e.zName:"从"+e.zName+"下载【勾选需要下载的文件】"),area:70,btn:["upload"===e.type?"上传":"下载","取消"],component:function(){return C(function(){return u.import("./index-legacy178.js?v=1763689792")},void 0,u.meta.url)},onConfirm:i}),r.value}),Xo=i("a7",function(e){var t=bu(),n=st(t).fileList,a=t.setFileAuths;return n.value=e.map(function(e){return e.fileName}),E({title:"设置权限【批量】",area:45,component:function(){return C(function(){return u.import("./index-legacy179.js?v=1763689792")},void 0,u.meta.url)},btn:!0,onConfirm:a})}),Zo=function(e){var t=li(),n=t.onConfirmCheckFile,a=t.onCancelCheckFile;return E({title:"温馨提示",area:[35,9],btn:["保存","不保存"],component:function(){return C(function(){return u.import("./index-legacy180.js?v=1763689792")},void 0,u.meta.url)},separationCancelClose:!0,onConfirm:function(t){n(),e()},onCancel:function(t){a(t),e()}})},el=function(e,t){var n=li(),a=st(n).compDataClose,r=n.onConfirmClose,i=n.onCancelClose;return a.value={type:e,item:t},E({title:"温馨提示",area:[35,9],btn:["保存","不保存"],component:function(){return C(function(){return u.import("./index-legacy181.js?v=1763689792")},void 0,u.meta.url)},separationCancelClose:!0,onConfirm:r,onCancel:i})},tl=i("r",function(e,t){var n=e.path,a=e.name,r=tc(),i=st(r),u=i.fileTabList,o=i.fileTabActive,l=i.disabledCutTab,c=i.fileTabActiveData;if(n&&!l.value){var s=n,f=n;"/"===s?s="根目录":("/"===f[f.length-1]&&(f=f.slice(0,f.length-1)),s=n.split("/").pop()),a&&(s=a);var p={id:M(),label:s,type:c.value.type,loading:!1,total:0,list:[],param:{p:1,showRow:500,path:f}};l.value=!0,u.value.push(p),o.value=u.value.length-1,Ge(function(){r.updateTabActiveData(),r.refreshFilesList(),t&&t(p)})}}),nl=function(e){return RegExp(/[\*\|\:\\\"\/\<\>\?]+/).test(e)},al=i("D",function(e){var t=st(tc()).fileTabActiveData;return rl(t.value.param.path+"/"+e)}),rl=function(e){return e.replace("//","/")},il=i("w",function(){var e=b(p().m(function e(t){var n,a,r,i,u;return p().w(function(e){for(;;)switch(e.n){case 0:if(n=t.replace(/\/+$/,"")||"/",a=ul(n),"/.Recycle_bin"!==t&&"/www/.Recycle_bin"!==t){e.n=1;break}return go.error("此为回收站目录，请在右上角按【回收站】按钮打开"),e.a(2,!1);case 1:return r=tc(),i=st(r),u=i.fileTabActiveData,i.searchVal,u.value.param.p=1,r.updateTabActiveData({param:{path:a,search:""}}),r.refreshFilesList(),e.a(2,a)}},e)}));return function(t){return e.apply(this,arguments)}}()),ul=function(e){return"/"===(e=(e=e.replace(/\\/g,"/")).replace("//","/"))?e:e=e.replace(/\/+$/g,"")},ol=i("cd",function(e){return"dir"===e?"文件夹":"文件"}),ll=function(e,t){e.isReName=!0,t&&t(e)},cl=function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML},sl=i("a0",function(){var e=b(p().m(function e(t,n){var a,r,i,u,o,l,c;return p().w(function(e){for(;;)switch(e.n){case 0:if(a=tc(),r=st(a),i=r.recyclingBinStatus,u=a.watchDeleteFileData,null!==i.value){e.n=2;break}return e.n=1,ea({type:"all",search:"",time_search:JSON.stringify([])});case 1:o=e.v,l=o.data,i.value=l.status;case 2:return c=i.value?"删除【".concat(cl(t.fileName),"】").concat("file"===t.type?"文件":"文件夹","后，该文件将迁移至文件回收站，如需彻底删除请前往文件回收站，是否继续操作？"):"风险操作，当前未开启文件回收站，删除的【".concat(cl(t.fileName),"】").concat("file"===t.type?"文件":"文件夹","将彻底删除，无法恢复，是否继续操作？"),e.n=3,y({title:"删除".concat(ol(t.type),"【").concat(cl(t.fileName),"】"),isHtml:!0,type:i.value?"default":"calc",content:'<div class="break-all">'+c+"<div>"+(t.isShare?'<span class="text-danger">当前文件已开启【外链分享】，请谨慎操作！</span>':"")});case 3:return e.n=4,T({loading:"正在删除，请稍后...",request:Bn({path:al(t.fileName),type:t.type}),message:!0,success:function(e){e.status&&u(t),n&&n()}});case 4:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),fl=i("I",function(){var e=b(p().m(function e(t,n){var a;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Un({path:al(t.fileName)});case 1:(a=e.v).status?(go.success(a.msg),n&&n()):go.error(a.msg),Ul();case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),pl=Ue(null),dl=i("u",function(){var e=st(tc()).fileTabActiveData;"/"!==e.value.param.path?pl.value=E({title:"上传文件到【".concat(e.value.param.path,"】 --支持断点续传"),area:"72",component:function(){return C(function(){return u.import("./index-legacy122.js?v=1763689792")},void 0,u.meta.url)},compData:{path:e.value.param.path},onCancel:function(){pl.value=null}}):go.error("不能直接上传文件到系统根目录!")}),vl=i("J",function(){var e=b(p().m(function e(t,n){var a;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Gn({path:al(t.fileName)});case 1:(a=e.v).status?(go.success(a.msg),n&&n()):go.error(a.msg),Ul();case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),ml=i("N",function(){var e=b(p().m(function e(t,n){var a,r;return p().w(function(e){for(;;)switch(e.n){case 0:return a=tc(),e.n=1,Jn({path:al(t.fileName),type:n});case 1:(r=e.v).status?go.success(r.msg):go.error(r.msg),a.refreshFilesList();case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),hl=i("a4",function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.n){case 0:return n=tc(),e.n=1,Kn({path:al(t.fileName)});case 1:(a=e.v).status?go.success(a.msg):go.error(a.msg),n.refreshFilesList();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),gl=function(){st(tc()).copyFilesData.value={files:[],type:""}},yl=function(e,t){var n=Lu();st(n).compData.value={fileData:e,type:t},E({title:"重复文件提示",area:40,btn:["确认","取消"],component:function(){return C(function(){return u.import("./index-legacy182.js?v=1763689792")},void 0,u.meta.url)}})},bl=i("A",function(e){var t=st(to()),n=t.activeName,a=t.compData;return n.value="database"===e?"db":"all",a.value={type:e},E({title:"回收站",area:110,component:function(){return C(function(){return u.import("./index-legacy183.js?v=1763689792")},void 0,u.meta.url)}})}),wl=function(e,t){if("dir"===t)return"folder";for(var n=e.split("."),a=n[n.length-1],r=0;r<ko.length;r++)if(ko[r]==a)return ko[r];return"file"},kl=i("R",function(e){var t="text";return e&&(e=e.toLowerCase()),Object.entries(So).forEach(function(n){var a=r(n,2),i=a[0];a[1].forEach(function(n){n==e&&(t=i)})}),t}),_l=i("z",b(p().m(function e(){var t,n,a,r,i,u,o,l,c,s,f,d,v,m,h;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=tc(),n=st(t),a=n.fileTabActiveData,r=n.copyFilesData,i=null,u=r.value.files[0],o=al(u.fileName),!("dir"===u.type&&a.value.param.path.indexOf(o+"/")>-1)){e.n=1;break}return go.error("错误的复制逻辑，从".concat(o,"粘贴到").concat(a.value.param.path,"有包含关系，存在无限循环复制风险!")),e.a(2,!1);case 1:return l={path:a.value.param.path},1===r.value.files.length&&(l.name=u.fileName),e.n=2,Wn(l);case 2:if(c=e.v,!((s=c.data).length>0)){e.n=3;break}return yl(s,r.value.files.length>1?"batch":"single"),e.a(2,!1);case 3:if(xl(),e.p=4,i=go.load("正在粘贴，请稍候..."),!(r.value.files.length>1)){e.n=6;break}return e.n=5,Ba({type:"copy"===r.value.type?1:2,path:a.value.param.path});case 5:f=e.v,go.request(f),r.value.files=[],gl(),e.n=11;break;case 6:if(d=u.path,v={sfile:d,dfile:o},"copy"!==r.value.type){e.n=8;break}return e.n=7,$n(v);case 7:h=e.v,e.n=10;break;case 8:return e.n=9,Yn(v);case 9:h=e.v;case 10:(m=h).status?("copy"===r.value.type?go.success(m.msg):go.success("剪切成功"),r.value.files=[],gl()):go.error(m.msg);case 11:return e.p=11,i&&i.close(),clearTimeout(Sl),t.refreshFilesList(),e.f(11);case 12:return e.a(2)}},e,null,[[4,,11,12]])}))),Sl=null,xl=function(){var e=tc().getRealTask;Sl=setTimeout(function(){e()},1500)},Tl=i("di",function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Li();case 1:return e.n=2,Cl(t);case 2:return e.n=3,er({name:t.fileName,path:t.path});case 3:return e.n=4,Ci();case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Ll=i("$",function(e,t){var n=st(tc()).copyFilesData;e.path=al(e.fileName),n.value.files=[e],n.value.type=t,go.success("".concat("copy"===t?"复制":"剪切","成功，请在目标目录点击右上角【粘贴】按钮!"))}),Cl=i("bN",function(){var e=b(p().m(function e(t,n){var a,r,i,u,o,l;return p().w(function(e){for(;;)switch(e.n){case 0:if(u=tc(),(0,u.unbindKeydown)(),o={path:t.path,title:t.path.split("/").pop(),size:t.size,type:"editor"},null==t||null===(a=t.path)||void 0===a||!a.includes("/dev/pts")){e.n=1;break}return go.error("系统目录文件不支持编辑"),e.a(2);case 1:if("text"===kl(null===(r=o.fileName)||void 0===r?void 0:r.split(".").pop())){e.n=2;break}return go.error("暂不支持该类型文件编辑"),e.a(2);case 2:if("minimize"!==(null==(l=document.querySelector(".bt-dialog-header .svgtofont-icon-minmax-black"))||null===(i=l.closest(".icon"))||void 0===i?void 0:i.dataset.state)){e.n=3;break}return Ti(o),e.a(2);case 3:if(!di.value){e.n=4;break}return Xi(o),e.a(2);case 4:return e.n=5,Li();case 5:Ho(o,n);case 6:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),El=i("P",function(e){var t=st(tc()).createItem,n=no().findCurrentImgIndex;if(t.value=[],e.isNew||e.isReName)return!1;if("dir"===e.type)il(e.path);else switch(kl(e.ext)){case"images":n(window.location.protocol+"//"+window.location.host+"/download?filename="+e.path);break;case"video":$o(e);break;case"compress":Ol(e);break;default:Cl(e)}}),Dl=i("V",function(e,t){window.open("/download?filename="+encodeURIComponent(e.path),"_self","noopener,noreferrer"),t&&t()}),Fl=i("W",function(e){Oo(e)}),Nl=i("X",function(e){Ao(e)}),Il=i("K",function(e){Do(e)}),jl=i("L",function(e){Fo(e)}),Pl=i("Y",function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:n=st(tc()),"ltd"!==n.authType.value?Wc({disablePro:!0,sourceId:70,plugin:!1}):No(t);case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Rl=i("a1",function(e){Po(e)}),Ol=i("a3",function(e){Ro(e)}),Al=i("a2",function(e){var t=Tu();st(t).fileItem.value=e,Mo()}),zl=i("a5",function(e){zo(e)}),Ml=i("Z",function(e,t){t||(t="routine"),jo(e,t)}),Vl=i("a9",function(){dl()}),ql=i("a6",function(){var e=b(p().m(function e(t,n){var a,r,i,u,o,l;return p().w(function(e){for(;;)switch(e.n){case 0:a=st(tc()),r=a.fileTabActiveData,i=a.copyFilesData,u={data:JSON.stringify(t.map(function(e){return e.fileName})),type:0,path:r.value.param.path},l=n,e.n="copy"===l?1:"cut"===l?2:3;break;case 1:return u.type=1,e.a(3,3);case 2:return u.type=2,e.a(3,3);case 3:return e.n=4,Ha(u);case 4:(o=e.v).status?(go.success("".concat("copy"===n?"复制":"剪切","成功，请在目标目录点击右上角【粘贴】按钮!")),i.value.files=t,i.value.type=n):go.error(o.msg);case 5:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}()),Hl=i("a8",function(){var e=b(p().m(function e(t){var n,a,r,i,u;return p().w(function(e){for(;;)switch(e.n){case 0:return n=tc(),a=st(tc()),r=a.fileTabActiveData,i=a.recyclingBinStatus,u=i.value?"删除后，文件将迁移至文件回收站，如需彻底删除请前往文件回收站，是否继续操作？":"风险操作，当前未开启文件回收站，删除后将彻底删除，无法恢复，是否继续操作？",e.n=1,y({title:"批量删除文件",type:i.value?"default":"calc",content:u});case 1:return e.n=2,T({loading:"正在删除，请稍后...",request:Ha({data:JSON.stringify(t.map(function(e){return e.fileName})),type:4,path:r.value.param.path}),message:!0,success:function(e){e.status&&n.refreshFilesList()}});case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Bl=function(e,t){var n=e.path,a=e.name,r=tc(),i=st(r),u=i.fileTabList,o=i.disabledCutTab,l=i.fileTabActive;if(n&&!o.value){var c=n,s=n;"/"===c?c="根目录":("/"===s[s.length-1]&&(s=s.slice(0,s.length-1)),c=n.split("/").pop()),a&&(c=a);var f={id:M(),label:c,type:"list",loading:!1,total:0,list:[],param:{p:1,showRow:500,path:s}};o.value=!0,u.value.push(f),l.value=u.value.length-1,Ge(function(){r.updateTabActiveData(),r.refreshFilesList(),t&&t(f)})}},Ul=i("bQ",b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.n){case 0:return t=st(tc()),n=t.favoriteList,e.n=1,T({request:Xn(),data:[Array,n]});case 1:return e.a(2)}},e)}))),Gl=i("t",b(p().m(function e(){var t,n,a,r;return p().w(function(e){for(;;)switch(e.n){case 0:return t=st(tc()),n=t.diskList,e.n=1,Qn();case 1:a=e.v,r=a.data,n.value=r;case 2:return e.a(2)}},e)}))),Jl=i("ag",function(e){var t=tc(),n=st(t),a=n.fileTabList,r=n.fileTabActive,i=e;"/"===i[i.length-1]&&"/"!==i&&(i=i.slice(0,i.length-1));var u=a.value.findIndex(function(e){return e.param.path===i});-1!==u?(r.value=u,t.updateTabActiveData(),t.refreshFilesList()):Bl({path:e})}),Wl=function(e){return{icon:"icon-".concat(e),ext:"dir"==e?" folder":"",fileName:"新建".concat("dir"==e?"文件夹":"文本"),time:"",ps:"",size:0,type:e,user:"root",rootLevel:"0",isLink:"",isShare:!1,isTop:!1,isFav:!1,isOsPs:!1,isPsEdit:!1,isSearch:!1,isReName:!0,isNew:!0,isSync:"",isLock:!1,path:"",tamperProofId:0,isFile:"dir"!==e}},$l=i("aC",function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0;0",a=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=function(e,t){var n="",a=yo.get("".concat("/"===t?"/":"".concat(t,"/")).concat(e));switch(e){case".htaccess":n="PS: Apache用户配置文件(伪静态)";break;case"swap":n="PS: 宝塔默认设置的SWAP交换分区文件"}return e.includes(".upload.tmp")&&(n="PS: 宝塔文件上传临时文件,重新上传从断点续传,可删除"),e.includes(".user.ini")&&(n="PS: PHP用户配置文件(防跨站)!"),a&&(n=a),a||n}(t.nm,a),u="1"===n.split(";")[0],o=n.split(";")[1],l=wl(t.nm,e),c=function(e,t){return"".concat(e,"/").concat(t).replace("//","/")}(a,t.nm);return{icon:kl(l),ext:l,fileName:t.nm,time:g(t.mt),ps:i||t.rmk||"",size:t.sz,type:e,user:t.user,rootLevel:t.acc,isLink:t.lnk,isShare:0!=Number(t.durl)?t.durl:0,isTop:!!t.top,isFav:!!Number(t.fav),isOsPs:!U(i)&&""!==i,isPsEdit:!1,isSearch:!0,isReName:!1,isNew:!1,isSync:Yl(r,c),isLock:u,path:c,tamperProofId:Number(o),isFile:"dir"!==e}}),Yl=function(e,t){if(U(e)||0==e.length)return"";var n=e.find(function(e){return e.path===t});return n?n.type:""},Kl=function(e){return e.map(function(e){return{val:e.val,label:e.val}})},Ql=function(e,t){E({title:(null==e?void 0:e.title)||"批量操作结果",area:t||42,component:function(){return C(function(){return u.import("./index-legacy125.js?v=1763689792")},void 0,u.meta.url)},compData:e})},Xl=i("q",function(e,t){var n=window.innerWidth,a=window.innerHeight,r=t.offsetWidth,i=t.offsetHeight,u=e.clientX,o=e.clientY,l=u;u+r>n&&(l=u-r);var c=o-(a-o<i?i:0);c<0&&(c=(a-i)/2),t.style.top=c+"px",t.style.left=l+"px"}),Zl=Object.freeze(Object.defineProperty({__proto__:null,BatchSetAuth:Xo,CreateTerminalDialog:Yo,FileCompressPreview:Vo,FileCompressView:Po,FileDecompressionView:Ro,FileFormatConversionView:Mo,FileImageView:Go,FileInputDatabaseView:Uo,FileMergeView:Ao,FileOperationRecordView:Io,FileRecyclingBinView:bl,FileSearchView:To,FileSetShareView:Do,FileSplitView:Oo,FileStatusDetailView:jo,FilesAceEditor:Ho,FilesCompressCoverView:Ko,FilesHistoryRecordView:Bo,ManageFavoritesView:Co,SendEmailView:zo,ShareDetailView:Fo,ShareListView:Eo,addFavorites:fl,addTab:Bl,addTabEvent:tl,batchDelFile:Hl,calculateContextMenuPosition:Xl,calculatePopoverPosition:function(e,t){var n=window.innerWidth,a=window.innerHeight,r=t.offsetWidth,i=t.offsetHeight,u=e.clientX,o=e.clientY,l=u;u+r>n&&(l=u-r);var c=o;return o+i>a&&(c=o-i),c<0&&(c=0),{top:c,left:l,el:t}},cloudStorageDialog:Qo,copyFiles:Ll,createCompress:Rl,createCopy:hl,createFile:Wl,deCompressFile:Ol,defaultPS:yo,delFavorites:vl,delFileEvent:sl,determineFileType:kl,downFile:Dl,editFilesDialog:Jo,editorCloseDialog:el,editorLeaveDialog:Zo,exts:ko,fileBatchSet:ql,fileMainType:So,fileReName:ll,fileRsyncView:No,fileTaskDialog:xo,fileType:_o,fileUploadDialog:pl,formatFile:Al,getDataType:ol,getDiskList:Gl,getExtIcon:wl,getFavoriteList:Ul,getViewportWidth:qo,getWholePath:al,isSyncType:Yl,matchUnqualifiedString:nl,openAceEditor:Cl,openDetail:Ml,openEditorView:Tl,openFile:El,openFileAsync:Pl,openFileMerge:Nl,openFileShare:jl,openFileSplit:Fl,openFilesUpload:dl,openResultDialog:Ql,pasteFiles:_l,pathJumpEvent:il,path_check:ul,recomList:bo,reconstructionFile:$l,removeCopyOrCutData:gl,renderHistoryList:Kl,repetFileView:yl,sendEmail:zl,setColumn:function(e,t){},setFileListActive:Jl,setFileShare:Il,setToping:ml,symbolicLinkView:Lo,temperDialog:Wo,toRepeatPath:rl,uploadFiles:Vl,videoPlayDialog:$o},Symbol.toStringTag,{value:"Module"})),ec=i("bL",at("FILES-URL-DOWN-LOAD-STORE",function(){var e=tc(),t=st(e).fileTabActiveData,n=e.getRealTask,a=ut({url:"",path:t.value.param.path,filename:""}),r=Ue(!1),i=Ue(),u=ut({url:[{validator:function(e,t,n){""===t?n(new Error("请输入正确的URL地址!")):Z(t)?n():n(new Error("请输入正确的URL地址!"))},trigger:["blur"]}],filename:[{validator:function(e,t,n){""===t?n(new Error("请输入新文件名!")):nl(t)?n(new Error('文件名不能包含 /\\:*?"<>|符号!')):n()},trigger:["blur","change"]}]});return{quickForm:a,formDisabled:r,quickFormRef:i,quickRules:u,onConfirm:function(){var e=m({},a);i.value.validate(function(){var t=b(p().m(function t(a){return p().w(function(t){for(;;)switch(t.n){case 0:if(!a){t.n=1;break}return t.n=1,T({loading:r,request:Aa(e),message:!0,success:function(e){e.status&&n()}});case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},onPathChange:function(){Gc({type:"dir",path:a.path,change:function(e){a.path=e}})},setName:function(e){var t=e.split("/");a.filename=t[t.length-1]},init:function(){r.value=!1,Object.assign(a,{url:"",path:t.value.param.path,filename:""})}}})),tc=i("F",at("FILES-STORE",function(){var e=s(),t=e.mainHeight,n=e.mainWidth,a=e.payment,r=it(a.value).authType,i={id:"label-1",label:"wwwroot",type:"list",loading:!1,total:0,param:{p:1,showRow:500,path:"/www/wwwroot",sort:"",reverse:"True"}},o=Ue(0),c=Ue(0),f=Ue(m({},i)),d=Ue([m({},i)]),v=Ue(0),h=Ue(!0),g=Ue(),k=ut({index:0,id:""}),_=Ue(0),x=Ue(0),L=Ue(!1),D=Ue(!1),F=Ue([]),N=Ue(0),j=Ue(f.value.param.path),R=Ue(),O=Ue(!0),A=Ue([]),z=Ue(0),M=ut({showMore:!1,showUl:!1,list:[]}),V=Ue(""),q=Ue(),H=Ue(!1),G=Ue([]),J=Ue([]),W=Ue({reqEnd:!1,isSetup:!1,isBuy:!1}),$=Ue(!1),Y=Ue(!1),K=Ue({isLock:!0,rootLevel:!0,size:!0,time:!0,ps:!0}),Q=Ue(""),Z=Ue([]),ie=Ue(!1),ue=Ue([]),oe=Et(function(){return ue.value.length||0}),le=Ue([]),ce=Et(function(){return le.value.length||0}),se=Ue([]),fe=Ue([]),pe=Ue([]),de=Ue({status:!1,tip:""}),ve=Ue({}),me=Ue({files:[],type:""}),he=Ue({}),ge=Ue(""),ye=Ue(!1),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d.value[c.value];e.param&&(e.param=m(m({},t.param),e.param));var n=m(m({},t),e);d.value.splice(c.value,1,n),Object.assign(f.value,n),V.value=f.value.param.search||"",H.value="True"===f.value.param.all,qe.value=!1,j.value!==n.param.path&&(j.value=f.value.param.path,Le(j.value))},we=function(){var e=n.value-36;F.value=[],N.value=0,Ge(function(){document.querySelectorAll(".tab-item").forEach(function(e){var t=e.getBoundingClientRect();F.value.push(t.width),N.value+=t.width});var t=N.value-e;x.value=t>0?t:0,ke(e)})},ke=function(e){var t=F.value.reduce(function(e,t,n){return n<=c.value?e+t:e},0);if(t<=e)_.value=-1;else{if(c.value===d.value.length-1)return void(_.value=x.value);var n=t-e+20;D.value=!0,_.value=n}},_e=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return V.value=t,be({param:{search:V.value,all:H.value?"True":"False"}}),e.n=1,rt();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,P({status:-3});case 1:n=e.v,a=document.querySelector(".realTaskDialog"),n.data.length>0&&!a&&xo(t);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),xe=Mt(function(){w.error("不能直接上传文件到系统根目录!")},2e3),Te=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(O.value=t,!t){e.n=13;break}if(f.value.param.path!==j.value){e.n=1;break}return e.a(2);case 1:if(!((n=j.value).length>0)||n.includes("/")){e.n=2;break}return w.error("路径输入不符合规则"),j.value=f.value.param.path,e.a(2);case 2:if(0!==n.length){e.n=3;break}return j.value=f.value.param.path,e.a(2);case 3:return e.n=4,Za({path:j.value});case 4:if(e.v.data.exists){e.n=10;break}return e.p=5,e.n=6,y({width:50,title:"路径不存在",content:"【".concat(n,"】路径不存在,是否创建并跳转?")});case 6:e.n=8;break;case 7:if(e.p=7,"cancel"!==e.v){e.n=8;break}return j.value=f.value.param.path,e.a(2);case 8:return e.n=9,T({loading:"正在新建文件，请稍后...",request:Hn({path:n,type:"dir"}),message:!0,success:function(e){e.status&&il(n)}});case 9:e.n=12;break;case 10:return e.n=11,il(n);case 11:a=e.v,j.value=a||n;case 12:e.n=14;break;case 13:ee(R.value);case 14:return e.a(2)}},e,null,[[5,7]])}));return function(t){return e.apply(this,arguments)}}(),Le=function(e){if(e){var t=e.split("/");if("/"===e)return A.value=[{name:"根目录",path:"/",show:!0,list:[]}];A.value=t.map(function(e,n){return{name:""===e?"根目录":e,path:""===e?"/":t.slice(0,n+1).join("/"),show:!0,showFold:!1,loading:!1,list:[]}}),Ee(),Ge(function(){M.list=[],M.showMore=!1;var e=document.querySelectorAll(".path-group-item"),t=document.querySelector(".path-list-group"),n=Array.from(e).reduce(function(e,t){return e+t.clientWidth+4},0);setTimeout(function(){if(n>((null==t?void 0:t.clientWidth)||400)){for(var a=20,r=e.length-1;r>=0;r--)(a+=e[r].clientWidth)>((null==t?void 0:t.clientWidth)||0)&&(A.value[r].show=!1,M.showMore=!0,M.list=A.value.slice(r+1));M.showMore&&(A.value[0].show=!1,M.list=A.value.slice(1))}},100)})}},Ce=function(){var e=b(p().m(function e(t,n){var a,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Ee(),A.value[n].showFold=!0,A.value[n].loading=!0,e.n=1,Mn({path:t,p:1,showRow:2e3});case 1:a=e.v,r=a.data.dir,A.value[n].loading=!1,A.value[n].list=r.map(function(e){return{name:e.nm,path:"".concat(t,"/").concat(e.nm).replace(/\/+/g,"/")}}),z.value=n,window.addEventListener("click",Ee),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){M.showUl=!1,A.value[z.value]&&(A.value=A.value.map(function(e){return m(m({},e),{},{showFold:!1})})),window.removeEventListener("click",Ee)},De=Ue([{name:"文件名",key:"name",show:!0,disable:!0},{name:"防篡改",key:"isLock",show:!0,disable:!1,icon:!0},{name:"权限",key:"rootLevel",show:!0,disable:!1},{name:"大小",key:"size",show:!0,disable:!1},{name:"修改时间",key:"time",show:!0,disable:!1},{name:"备注",key:"ps",show:!0,disable:!1},{name:"操作",key:"action",show:!0,disable:!0}]),Fe=[{type:"copy",icon:"copy-file-icon",label:"复制",handler:function(){return ql(G.value,"copy")}},{type:"cut",icon:"cut-file-icon",label:"剪切",hide:1370,handler:function(){return ql(G.value,"cut")}},{type:"compress",icon:"compress-file-icon",label:"压缩",hide:1446,handler:function(){return Rl(G.value)}},{type:"auth",icon:"authority-file-icon",label:"权限",hide:1610,handler:function(){return Xo(G.value)}},{type:"delete",icon:"delete-file-icon",label:"删除",hide:1620,handler:function(){return Hl(G.value)}}],Ne=function(){var e=b(p().m(function e(t){var n,a,r,i,u;return p().w(function(e){for(;;)switch(e.n){case 0:u=t,e.n="upload"===u?1:"openUrlLinkDown"===u?2:"bos"===u||"alioss"===u||"txcos"===u||"obs"===u?3:5;break;case 1:return dl(),e.a(3,5);case 2:return Ie(),e.a(3,5);case 3:return e.n=4,nr();case 4:return a=e.v,r=a.data,(i=null==r||null===(n=r.down)||void 0===n?void 0:n.find(function(e){return e.name===t}))&&null!=i&&i.is_conf?Qo({type:"down",zName:i.title,pname:t}):je(t,73),e.a(3,5);case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=ec().onConfirm;E({title:"URL链接下载",area:50,btn:!0,component:function(){return C(function(){return u.import("./index-legacy184.js?v=1763689792")},void 0,u.meta.url)},onConfirm:e})},je=function(){var e=b(p().m(function e(t,n){var a,i;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if("ltd"===r.value){e.n=1;break}return Wc({sourceId:n}),e.a(2);case 1:return e.p=1,e.n=2,B({sName:t});case 2:if(a=e.v,(i=a.data).setup){e.n=3;break}return $c({name:i.name,type:"i",pluginInfo:i}),e.a(2);case 3:ws({name:t}),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])}));return function(t,n){return e.apply(this,arguments)}}(),Pe=function(){Ge(function(){Ke(),Ze()})},Re=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return"true"===localStorage.getItem("MYSQL-RECYCLE")&&(bl("database"),localStorage.removeItem("MYSQL-RECYCLE")),De.value.forEach(function(e){e.show=K.value[e.key]}),e.n=1,Gl();case 1:Ul();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Oe=Ue(null),Ae=Ue(null),ze=Ue(null),Me=Ue(!1),Ve=Ue(""),qe=Ue(!1),He=Ue(!1),Be=function(){var e=b(p().m(function e(){var t,n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(no(),"/"!==(t=f.value.param.path)){e.n=1;break}return e.a(2);case 1:if(e.p=1,He.value=!0,!W.value.reqEnd||!W.value.isSetup||"ltd"!==r.value){e.n=2;break}ue.value=ue.value.map(function(e){return e.isDirComputed=!0,e}),Xe(),et(),e.n=4;break;case 2:return e.n=3,Ka({path:t});case 3:n=e.v,a=n.data,Ve.value=a,qe.value=!0,He.value=!1;case 4:return e.p=4,0===Ve.value.length&&qe.value&&(He.value=!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,,4,5]])}));return function(){return e.apply(this,arguments)}}(),Je=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:"/"===f.value.param.path?Me.value=!0:Me.value=!1;case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),We=Ue([]),$e=function(e){if("el-input__inner"!==e.target.className&&"TEXTAREA"!==e.target.tagName){var t="list"===f.value.type,n=document.querySelector(".el-dialog__body")||document.querySelector(".el-dialog__container");if(!n||"none"===n.style.display){var a=[],r=st(no()).selectList;if(We.value.forEach(function(e){r.value.includes(e.path)&&a.push(e)}),e.ctrlKey&&65===e.keyCode&&(e.preventDefault(),ze.value.handleCheckAll(!0)),e.ctrlKey&&88===e.keyCode)switch(a.length){case 0:return;case 1:Ll(a[0],"cut");break;default:ql(a,"cut")}if(e.ctrlKey&&67===e.keyCode)switch(a.length){case 0:return;case 1:Ll(a[0],"copy");break;default:ql(a,"copy")}if(e.ctrlKey&&86===e.keyCode){if(0===me.value.files.length)return;_l()}if(113===e.keyCode)switch(a.length){case 0:return;case 1:ll(a[0],t?Oe.value.editRow:Ae.value.editFile)}if(13===e.keyCode)switch(a.length){case 0:return;case 1:if(a[0].isNew||a[0].isReName||a[0].isPs)return;El(a[0])}if(46===e.keyCode){if(0===a.length)return;if(a[0].isNew||a[0].isReName)return;Hl(a)}}}},Ye=function(){document.addEventListener("keydown",$e)},Ke=function(){document.removeEventListener("keydown",$e)},Qe=function(e){""!==e&&1!=ie.value&&(Z.value=[Wl(e)],Xe())},Xe=function(){We.value=[].concat(l(Z.value),l(ue.value),l(le.value)).map(function(e,t){return e.vid=t,e}),no().watchDataList(We.value)},Ze=function(){He.value=!1,be({param:{search:""}}),Ye();var e=localStorage.getItem("copyOrCutData");e&&(me.value=JSON.parse(e))},et=function(){var e=b(p().m(function e(){var t,n,a,r,i;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=f.value.param.path,e.n=1,tr(t);case 1:for(i in n=e.v,a=n.data,U(a.msg)||-1!=a.msg.indexOf("企业版")||w.error(a.msg),r=a.list)r["".concat(t,"/").concat(i)]=r[i];Ve.value=I(a.total_asize),setTimeout(function(){ue.value=ue.value.map(function(e){return e.diskInfo=r[e.path],e.isDirComputed=!1,e}),Xe()},300);case 2:return e.p=2,He.value=!1,qe.value=!0,e.f(2);case 3:return e.a(2)}},e,null,[[0,,2,3]])}));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:if(!$.value){e.n=1;break}return e.a(2);case 1:return $.value=!0,e.n=2,rt();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),nt=function(){rt(),te("Path",f.value.param.path)},at=function(){var e=JSON.parse(JSON.stringify(f.value.param));return"time"==e.sort&&(e.sort="mtime"),"fileName"==e.sort&&(e.sort="name"),void 0!==e.search&&""===e.search&&delete e.search,void 0!==e.all&&"True"!==e.all&&delete e.all,e},rt=function(){var e=b(p().m(function e(){var t,n,a,r,i,u,o,l,c,s,d,v,m,h,g,y,b,k,_,x,T,L,C,E,D,F;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return ue.value=[],le.value=[],We.value=[],e.p=1,f.value.loading=!0,t=at(),e.n=2,Mn(t);case 2:if(n=e.v,a=n.status,r=n.msg,i=n.data,"True"==t.all&&i.is_max&&w.error("当前搜索结果已超出最大值3000条！"),a||void 0===r){e.n=4;break}if(w.error(r),(u=f.value.param.path.split("/")).pop(),"/"!==(o=u.join("/").replace(/\/+$/,"")||"/")){e.n=3;break}return e.a(2);case 3:return be({param:{path:o}}),rt(),e.a(2);case 4:if(l=i.path,c=i.dir,s=i.files,d=i.store,v=i.bt_sync,i.page,m=i.tamper_data,h=i.search_history,g=i.file_recycle,y=m.dirs,b=m.files,k=m.msg,_=m.tip,x=m.rules,T=[],L="ok"===_,de.value.status=L,de.value.tip=L?"":_,pe.value=Kl(h),ue.value=[],c.forEach(function(e,t){ue.value.push($l("dir",e,k?"":y[t],l,v))}),le.value=[],s.forEach(function(e,t){var n=$l("file",e,k?"":b[t],l);0===t&&L&&(ve.value=x.length>0?x.find(function(e){return e.pid===n.tamperProofId}):void 0),"images"===n.icon&&T.push(n.fileName),le.value.push(n)}),!(T.length>0)){e.n=6;break}return e.n=5,$a({return_type:"base64",height:45,width:45,files:T,path:l});case 5:C=e.v,E=C.data,se.value=E?Object.entries(E.data):[],no().setSmallImage(),e.n=7;break;case 6:se.value=[];case 7:return fe.value=d,Y.value=g,D="/"===(D=l)?"根目录":l.split("/").pop(),be({label:D,total:ne(i.page),type:f.value.type||"list",param:{path:i.path}}),$.value=!1,e.n=8,Xe();case 8:ot(),e.n=10;break;case 9:e.p=9,F=e.v,S(F);case 10:return e.p=10,f.value.loading=!1,e.f(10);case 11:return e.a(2)}},e,null,[[1,9,10,11]])}));return function(){return e.apply(this,arguments)}}(),ot=function(){Ge(function(){var e=document.querySelector(".custom-tbody");e&&(ye.value=36*We.value.length>e.clientHeight)})};return{isHaveScoller:ye,authType:r,mainHeight:t,mainWidth:n,fileTabActive:c,fileTabActiveData:f,fileTabList:d,isAddTabs:h,closeTabs:k,favoriteList:fe,diskList:J,dataList:We,deleteFileData:he,imgPathItem:ge,recyclingBinStatus:Y,copyFilesData:me,navBtnHeight:o,imageList:se,disabledCutTab:$,dirPath:j,pathInputRef:R,pathInputMode:O,pathListGroup:A,more:M,searchVal:V,searchRef:q,isChildren:H,contextRef:g,scrollWidth:_,showLeftArrow:L,showRightArrow:D,searchHistory:pe,updateTabActiveData:be,getFilesList:rt,triggerEvent:function(e){e?ht(q).showPopover():ht(q).hidePopover()},searchEvent:_e,getRealTask:Se,handleDragOff:function(e){var t,n;(e.preventDefault(),"/"!==f.value.param.path)?null!=e&&null!==(t=e.dataTransfer)&&void 0!==t&&t.items&&Array.from(null==e||null===(n=e.dataTransfer)||void 0===n?void 0:n.items).some(function(e){return"file"===e.kind})&&(pl.value||dl()):xe()},cutPathInputMode:Te,cutDirPath:function(e,t){""===e&&(j.value="/"),R.value.blur(),Z.value=[],Xe(),be({param:{search:"",p:1,all:"False"}}),t||il(e)},getPathListGroup:Le,getCurrentFoldDirList:Ce,goBack:function(){if(!$.value){if($.value=!0,"/"==f.value.param.path){if(""===f.value.param.search)return $.value=!1,w.error("当前目录为根目录");be({param:{search:"",all:"False"}}),il("/")}var e=f.value.param.path.split("/");e.pop(),be({param:{search:"",all:"False"}});var t=e.join("/");il(t)}},closeOther:function(){d.value=d.value.filter(function(e,t){return t===k.index}),k.index!==c.value&&nt(),c.value=0,be(),we()},closeRight:function(){d.value.splice(k.index+1);var e=d.value[k.index].param.path;c.value=k.index,f.value.param.path!==e&&(be(),nt()),be(),we()},watchTabsWidth:function(){Ge(function(){var e;v.value=(e=document.querySelector(".tabs"))?e.getBoundingClientRect().width:0;var t=document.querySelectorAll(".tab-item"),n=0;t.forEach(function(e){var t=e.getBoundingClientRect();n+=t.width}),h.value=v.value-n>160})},handleRightClick:function(e,t,n){Object.assign(k,{id:t.id,index:n}),g.value.show(e)},watchWindowResize:we,watchScrollWidth:function(e){var t=e;L.value=0!=t&&-1!=t,-1===t&&(_.value=0,t=0),D.value=x.value>0&&t!=x.value;var n=document.querySelector(".tabs");n&&n.scrollTo({top:0,left:_.value,behavior:"smooth"})},cutTab:function(e){$.value&&c.value!==e||(c.value=e,$.value=!0,Z.value=[],be(),nt(),we())},scrollLeft:function(){var e=n.value-36;_.value<=e/2?_.value=0:_.value-=e/2},scrollRight:function(){var e=n.value-36;if(x.value<=e/2)_.value=x.value;else{var t=_.value+=e/2;t>x.value&&(t=x.value),_.value=t}},closeTab:function(e,t){var n=d.value.length;if(1===n)return w.error("至少保留一个标签页");var a=d.value.findIndex(function(e){return e.id===t});d.value.splice(a,1),c.value>a?(c.value=c.value-1,be()):c.value===a&&($.value=!0,c.value=n-a===1?a-1:a,be(),nt()),we()},fileBatchNum:G,createListType:Q,columnShow:K,cloudList:[{name:"百度云存储",icon:"baidu-cloud",command:"bos"},{name:"阿里云存储",icon:"alioss-cloud",command:"alioss"},{name:"腾讯云存储",icon:"tencent-cloud",command:"txcos"},{name:"华为云存储",icon:"huawei-cloud",command:"obs"}],actionsBtn:Fe,fileBatchEvent:function(e){switch(e){case"copy":ql(G.value,"copy");break;case"cut":ql(G.value,"cut");break;case"compress":Rl(G.value);break;case"auth":Xo(G.value);break;case"del":Hl(G.value)}},handleChangeMenu:function(e){f.value.type!==e&&(be({type:e}),f.value.type=e,Pe()),G.value=[],st(no()).selectList.value=[],ze.value&&(ze.value.selectList=[])},handleCommand:Ne,openPlugin:je,collectCommand:function(e){if("manger"!==e)if(f.value.label=e.name,"dir"===e.type)il(e.path);else{var t=m(m({},e),{},{fileName:e.name,ext:e.ext||e.name.split(".").pop()});El(t)}else Co()},createCommand:function(e){var t;switch(null===(t=document.querySelector(".vue-recycle-scroller"))||void 0===t||t.scroll({top:0}),e){case"file":case"dir":Q.value=e,Qe(e);break;case"link":Lo()}},globalTamperStatus:de,createItem:Z,fileList:le,fileLength:ce,dirList:ue,dirLength:oe,size:Ve,sizeShow:qe,sizeLoad:He,table:Oe,isNoCreteItem:ie,iconView:Ae,listView:ze,btnPopover:Me,diskAnalysis:W,watchDeleteFileData:function(e){if(0!==Object.keys(e).length){var t=e.type,n=e.path;e.isNew&&(Z.value=[]),"dir"===t?ue.value=ue.value.filter(function(e){return e.path!==n}):le.value=le.value.filter(function(e){return e.path!==n}),he.value={},f.value.total=We.value.length,Xe()}},watchCreateListType:Qe,sizeComputed:Be,checkRoot:Je,initMain:Ze,bindKeydown:Ye,unbindKeydown:Ke,initNavBtn:Re,refreshList:tt,refreshFilesList:nt,init:function(){e.getGlobalInfo(),Se(),function(){try{Ge(b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,B({sName:"disk_analysis"});case 1:t=e.v,n=t.data,Object.assign(W.value,{reqEnd:!0,isSetup:n.status&&n.setup&&n.endtime>-1,isBuy:n.endtime>-1});case 2:return e.a(2)}},e)})))}catch(e){}}(),X("searchFile")&&(To(),ae("searchFile")),Le(j.value)},$reset:function(){ue.value=[],le.value=[],se.value=[],fe.value=[],pe.value=[],L.value=!1,D.value=!1,f.value.param.search="",re(["/files?action=GetDirNew","/system?action=GetDiskInfo","/task?action=get_task_lists","/plugin?action=get_soft_find","/files?action=get_files_store"])},keydown:$e}},{persist:[{storage:localStorage,paths:["fileTabList"]}]})),nc=Object.freeze(Object.defineProperty({__proto__:null,default:tc},Symbol.toStringTag,{value:"Module"})),ac={class:""},rc=H(Je({__name:"file-cover-confirm",props:{compData:{default:function(){}}},setup:function(e,t){var n=t.expose,a=e,r=Ue([{label:"文件名",prop:"name"},{label:"文件差异(本地->线上)",render:function(e){return"".concat(I(e.locaSize)," -> ").concat(I(e.size))}}]);return n({onConfirm:function(e){return a.compData.confirm(e,!0),!1},onCancel:function(e){return a.compData.cancel(e,!1),!1}}),function(e,t){var n=ie;return Xe(),Ze("div",{class:It(["confirm-default","text-default relative p-2rem"])},[t[0]||(t[0]=nt("div",{class:"content flex items-center mb-[10px]"},[nt("i",{class:"svgtofont-el-warning text-titleLarge text-warning"}),nt("div",{class:"message flex flex-col flex-1 ml-4 py-[.3rem] leading-[2.4rem] text-base"},[nt("div",{class:"text text-base text-secondary leading-[2.5rem]"},"检测到上传目录包含重复文件，是否覆盖？")])],-1)),nt("div",ac,[Me(n,{column:ht(r),data:a.compData.data,"max-height":170},null,8,["column","data"])])])}}}),[["__scopeId","data-v-74ddacde"]]),ic=tc().refreshFilesList,uc=x(),oc=function(){return e=function t(n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(this,"target",""),h(this,"uploadPath",""),h(this,"uploadElement",null),h(this,"loading",{close:function(){}}),h(this,"isUpload",!0),h(this,"isGetFiles",!1),h(this,"readFileTimeout",0),h(this,"limit",{size:32212254720,number:1e3}),h(this,"uploadStatus","paused"),h(this,"uploadLimitSize",2097152),h(this,"uploadList",[]),h(this,"uploadTime",{endTime:0,startTime:0}),h(this,"uploadInfo",{estimatedTime:0,uploadedSize:0,speedInterval:null,speedAverage:0,uploadTime:0,fileSize:0,startTime:0,endTime:0,success:0,error:0}),h(this,"fileList",[]),h(this,"fileTotalSize",0),h(this,"fileTotalNumber",0),h(this,"uploadInterval",0),h(this,"uploadCycleSize",[]),h(this,"speedLastTime",0),h(this,"timerSpeed",0),h(this,"uploadError",0),h(this,"isOpenCoverLayer",0),h(this,"uploadedFiles",[]),h(this,"initData",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.uploadStatus="paused",a.uploadList=[],a.isUpload=!0,a.uploadTime={endTime:0,startTime:0},a.isGetFiles=!1,a.uploadInfo={estimatedTime:0,uploadedSize:0,speedInterval:null,speedAverage:0,uploadTime:0,fileSize:0,startTime:0,endTime:0,success:0,error:0},a.fileList=[],a.fileTotalSize=0,a.fileTotalNumber=0,a.uploadInterval=0,a.uploadCycleSize=[],a.speedLastTime=0,a.timerSpeed=0,e&&a.watchFileUploadStatus({status:"paused",timeElapsed:0,averageSpeed:0,uploadSize:"0B",successNumber:0,errorNumber:0})}),h(this,"watchFileList",function(e){return e}),h(this,"watchFileUploadSpeed",function(e){return e}),h(this,"watchFileUploadStatus",function(e){return e}),h(this,"fileUploadLimit",function(e,t){var n=t;if(!a.isGetFiles)return!1;var r=e.name.split("."),i=(t=t||e.webkitRelativePath).split("/");t="/".concat(i.slice(0,i.length-1).join("/")).replace("//","/");var u=!1;return a.fileList.forEach(function(t,a){if(t.path+t.name==n&&t.size==I(e.size))return uc.error("该文件已存在"),u=!0}),!(!u&&(a.fileList=a.fileList.filter(function(e,t){return e.path+e.name!==n}),a.fileList.push({vid:D(8),file:e,path:t,name:e.name,size:I(e.size),type:r.length>1?r[r.length-1]:"txt",status:"paused",progress:0}),a.watchFileList(a.fileList),a.fileTotalSize+=e.size,a.fileTotalNumber++,a.fileTotalNumber>=a.limit.number?(uc.error("当前文件数量已超过文件上传上限".concat(a.limit.number,"个， 请压缩文件夹后重试！")),1):a.fileTotalSize>=a.limit.size&&(uc.error("当前文件大小已超过文件上传".concat(I(a.limit.size),"限制， 请使用SFTP/FTP等工具上传文件！")),1)))}),h(this,"uploadFile",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0!==a.fileList.length&&(0==e&&0==a.uploadList.length&&(a.isOpenCoverLayer=0,a.uploadStatus="uploading",a.uploadedFiles=[],a.uploadCycleSize=[],a.uploadTime.startTime=a.getTimeReal()),a.fileList.length===t?(clearTimeout(a.uploadInterval),a.uploadStatus="success",a.uploadTime.endTime=a.getTimeReal(),a.renderUploadSpeed(),a.initData(),ic(),!1):void a.uploadFileItem(e,t))}),h(this,"uploadFileItem",function(){var e=b(p().m(function e(t,n){var r,i,u,o,l,c,s,f,d,v,h;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=a.fileList[n],i=0,null!=r){e.n=1;break}return e.a(2,!1);case 1:return u=a.uploadInfo.uploadedSize,a.uploadInterval=setInterval(function(){4===a.uploadCycleSize.length&&a.uploadCycleSize.splice(0,1),a.uploadCycleSize.push(Math.abs(a.uploadInfo.uploadedSize-u))},1e3),a.uploadInfo.endTime=a.getTimeReal(),o=(a.uploadInfo.endTime-a.uploadInfo.startTime)/1e3,a.timerSpeed=Number((a.uploadInfo.fileSize/o).toFixed(2)),a.uploadInfo.startTime=a.getTimeReal(),l=a.getUpdateSpeed(),c=a.uploadLimitSize,(s=Math.floor(l/a.uploadLimitSize))&&n>1&&(c*=s>4?4:s),0==t&&(a.uploadInfo.startTime=a.getTimeReal(),r=m(m({},r),{progress:0,upload:2,upload_size:"0B"})),i=Math.min(r.file.size,t+c),a.uploadInfo.fileSize=i-t,f=a.uploadPath+r.path,d=new FormData,ue(),d.append("f_path",f),d.append("f_name",r.name),d.append("f_size",r.file.size),d.append("f_start",t.toString()),d.append("blob",r.file.slice(t,i)),e.p=2,e.n=3,oe({method:"post",url:""+a.target,headers:{"x-http-token":window.vite_public_request_token},data:d});case 3:return v=e.v,h=v.data,e.n=4,a.watchUploadStatus(h,r,n,{fileStart:t,fileEnd:i});case 4:e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},e,null,[[2,5]])}));return function(t,n){return e.apply(this,arguments)}}()),h(this,"fileSelectHandler",function(e,t){var n;if(a.readFileTimeout=0,a.isGetFiles=!0,a.loading=uc.load("正在获取上传文件，请稍候..."),null!==(n=e.target)&&void 0!==n&&n.files){var r,i=null===(r=e.target)||void 0===r?void 0:r.files;[].forEach.call(i,function(e){a.traverseFileTree(e,t)})}else if(e.dataTransfer.items){var u=e.dataTransfer.items;[].forEach.call(u,function(e){var n=(e.webkitGetAsEntry||e.getAsEntry).call(e);if(n){if(!a.isUpload)return!1;a.traverseFileTree(n,t)}})}}),h(this,"traverseFileTree",function(e,t){var n=e.fullPath||"";if(e.isFile)e.file(function(e){a.isGetFiles=a.fileUploadLimit(e,n),clearTimeout(a.readFileTimeout),a.readFileTimeout=setTimeout(function(){if(a.loading.close(),!a.isGetFiles)return a.clearUploadFileList(),a.watchFileList(a.fileList),!1;t&&t(a.fileList)},100)});else if(e.isDirectory){var r=e.createReader(),i=function(e){[].forEach.call(e,function(e){if(!a.isUpload)return!1;a.traverseFileTree(e,t)}),e.length>0&&r.readEntries(i)};r.readEntries(i),setTimeout(function(){if(0===a.fileList.length&&a.isGetFiles)return uc.error("拖拽上传文件夹内容为空")},500)}}),h(this,"watchUploadStatus",function(e,t,n,r){"number"==typeof e?(a.renderUploadSpeed(n,m(m({},t),{progress:(e/t.file.size*100).toFixed(2),upload:2,upload_size:I(e)})),r.fileEnd!=e?a.uploadInfo.uploadedSize+=e:a.uploadInfo.uploadedSize+=parseInt((r.fileEnd-r.fileStart).toString()),setTimeout(function(){a.uploadFile(e,n)},50)):(e.status?(a.uploadInfo.success++,a.uploadInfo.endTime=a.getTimeReal(),a.uploadInfo.uploadedSize+=parseInt((r.fileEnd-r.fileStart).toString()),a.renderUploadSpeed(n,m(m({},t),{upload:1,upload_size:t.size}))):(a.renderUploadSpeed(n,m(m({},t),{progress:100,upload:-1,errorMsg:e.msg})),a.uploadInfo.error++),a.uploadFile(0,++n))}),h(this,"getUpdateSpeed",function(){for(var e=0,t=0;t<a.uploadCycleSize.length;t++)e+=a.uploadCycleSize[t];var n=e/a.uploadCycleSize.length;return isNaN(n)?0:n}),h(this,"renderUploadSpeed",function(t,n){if(void 0!==t)try{var r=a.fileList[t];if(1===n.upload||-1===n.upload){r.is_upload=!0,a.uploadList.push(r);var i=document.querySelector(".file-upload-list");i&&(1===a.uploadList.length&&(i.scrollTop=0),a.uploadList.length>1&&(i.scrollTop+=45.5))}r.progress=n.progress,r.status=a.isUploadStatus(n.upload),r.message=n.errorMsg||"",a.watchFileList(a.fileList),a.watchFileUploadSpeed({totalProgress:(a.uploadInfo.uploadedSize/a.fileTotalSize*100).toFixed(2),currentSpeed:I(isNaN(a.timerSpeed)?0:a.timerSpeed),timeRemaining:a.time(parseInt(((a.fileTotalSize-a.uploadInfo.uploadedSize)/a.timerSpeed*1e3).toString())),uploadList:a.uploadList.length})}catch(e){}else{var u=a.getTimeReal();a.watchFileUploadStatus({status:"success",timeElapsed:a.diffTime(a.uploadTime.startTime,u),averageSpeed:a.toSize(a.uploadInfo.uploadedSize/((u-a.uploadTime.startTime)/1e3)),uploadSize:I(a.uploadInfo.uploadedSize),successNumber:a.uploadInfo.success,errorNumber:a.uploadInfo.error})}}),h(this,"getFileName",function(e){return"".concat(e.path,"/").concat(e.name).replace(/\/\//,"/")}),h(this,"useFileUploadExistsConfirm",b(p().m(function e(){var t,n,r,i,u;return p().w(function(e){for(;;)switch(e.n){case 0:return t=a.fileList.map(function(e){return a.uploadPath+a.getFileName(e)}),e.n=1,Ga({files:t.join("\n")});case 1:if(n=e.v,r=n.data){e.n=2;break}return e.a(2);case 2:if(i=[],a.fileList.forEach(function(e,t){var n=r[t];n.exists&&i.push({name:a.getFileName(e),size:n.size,locaSize:e.file.size})}),!i.length){e.n=4;break}return u=function(e,t){if(!t)for(var n=function(){var e=a.fileList[r];i.findIndex(function(t){return t.name.indexOf(e.name)>-1})>=0&&a.fileList.splice(r,1)},r=a.fileList.length-1;r>=0;r--)n();Ge(function(){e(),a.fileList.length?a.uploadFile():a.clearUploadFileList()})},e.n=3,E({title:"文件冲突确认",area:40,component:rc,compData:{data:i,confirm:u,cancel:u},showFooter:!0,cancelText:"跳过",confirmText:"覆盖"});case 3:e.n=5;break;case 4:a.fileList.length&&a.uploadFile();case 5:return e.a(2)}},e)}))),h(this,"cancelFile",function(e){var t=a.fileList.filter(function(t,n){return t.vid!==e.vid});a.fileList=t,a.watchFileList(a.fileList),0===a.fileList.length&&a.clearUploadFileList()}),h(this,"toSize",function(e){for(var t=[" B"," KB"," MB"," GB"," TB"," PB"],n=0;n<t.length;n+=1){if(e<1024){var a=e.toFixed(2)+t[n];return isNaN(e.toFixed(2))||void 0===a?"0B":a}e/=1024}}),h(this,"time",function(e){var t=Math.floor(e/36e5),n=Math.floor(e/6e4),a=e%6e4/1e3,r="".concat(a,"秒");return n>0&&(r="".concat(n,"分钟").concat(a.toFixed(0),"秒")),t>0&&(r="".concat(t,"小时").concat(Math.floor((e-36e5*t)/6e4),"分钟")),r}),this.target=n.target,this.uploadPath=n.uploadPath,this.watchFileList=n.renewalData,this.watchFileUploadSpeed=n.renewalSpeed,this.watchFileUploadStatus=n.renewalStatus,this.initData()},(t=[{key:"uploadStatusInfo",value:function(e){return{success:"上传成功",error:"上传失败",uploading:"上传中",paused:"等待上传",waiting:"等待上传"}[e]}},{key:"isUploadStatus",value:function(e){return{"-1":"error",0:"paused",1:"success",2:"uploading",3:"waiting"}[e]}},{key:"getTimeReal",value:function(){return(new Date).getTime()}},{key:"clearUploadFileList",value:function(){this.initData(!0),this.watchFileList(this.fileList)}},{key:"diffTime",value:function(e,t){"number"!=typeof e&&(e=e.getTime()),"number"!=typeof t&&(t=t.getTime());var n=t-e,a=Math.floor(n/6e4),r=n%6e4/1e3,i="".concat(r.toFixed(a>0?0:2),"秒");return a>0&&(i="".concat(a,"分").concat(r.toFixed(0),"秒")),i}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();i("cI",oc);var lc=function(e){e.preventDefault()},cc=(i("cJ",function(e){var t=document.querySelector("#upload-mask");return window.addEventListener("dragenter",function(t){lc(t),e.dragenter(t)}),null==t||t.addEventListener("dragenter",function(t){lc(t),e.dragenter(t)}),null==t||t.addEventListener("dragleave",function(t){lc(t),e.dragleave(t)}),null==t||t.addEventListener("dragover",function(t){lc(t),e.dragover(t)}),null==t||t.addEventListener("drop",function(t){lc(t),e.drop(t)}),e}),i("cK",function(e){var t=document.querySelector("#upload-mask");window.removeEventListener("dragenter",e.dragenter),null==t||t.removeEventListener("dragenter",e.dragenter),null==t||t.removeEventListener("dragover",e.dragover),null==t||t.removeEventListener("dragleave",e.dragleave),null==t||t.removeEventListener("drop",e.drop)}),i("aG",at("SOFT-OTHER-STORE",function(){var e,t=s().payment,n=st(pc()),a=n.searchVal,r=n.historyList,i=n.showNpsCollect,o=n.isLoading,c=n.inputZipFlag,f=n.speedInstallView,d=pc(),v=d.scoreEvent,m=d.unInstallPlugin,h=Ue(),g=Ue(null),y=ot([]),k=Ue({total:0,page:1,row:15}),_=Ue([]),T=ut({totalProgress:0,uploadList:0,sizeUploaded:0,currentSpeed:0,timeRemaining:0,timeElapsed:0,averageSpeed:0,errorNumber:0,successNumber:0,uploadSize:""}),L=Ue("paused"),D=Ue(null),F=new oc({target:"/files?action=upload",uploadPath:"/tmp/plugin_tmp",renewalData:(e=b(p().m(function e(t){var n,a,r,i,u;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(_.value=l(t),n=t.length>0&&t.every(function(e){return"success"===e.status}),a=t.some(function(e){return"error"===e.status}),!(r=t.some(function(e){return"uploading"===e.status}))&&(n||a)&&D.value&&(D.value.close(),D.value=null),!n||a||r){e.n=7;break}return i=x().load("正在解析插件压缩包，请稍后..."),e.p=1,e.n=2,mn({plugin_zip_path:"/tmp/plugin_tmp/".concat(t[0].name)});case 2:if(u=e.v,!le("status",u.data)||!le("msg",u.data)||u.data.status){e.n=3;break}return e.a(2,w.error(u.data.msg));case 3:N(u.data),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,i.close(),e.f(5);case 6:e.n=8;break;case 7:a&&w.error("文件上传失败");case 8:return e.a(2)}},e,null,[[1,4,5,6]])})),function(t){return e.apply(this,arguments)}),renewalSpeed:function(e){if(T.totalProgress=e.totalProgress,T.uploadList=e.uploadList,T.sizeUploaded=e.sizeUploaded,T.currentSpeed=e.currentSpeed,T.timeRemaining=e.timeRemaining,D.value&&"uploading"===L.value){var t,n,a=Math.round(e.totalProgress||0);null===(t=(n=D.value).setText)||void 0===t||t.call(n,"正在上传插件，请稍后... ".concat(a,"%"))}},renewalStatus:function(e){L.value=e.status,T.timeElapsed=e.timeElapsed,T.averageSpeed=e.averageSpeed,T.uploadSize=e.uploadSize,T.successNumber=e.successNumber,T.errorNumber=e.errorNumber}}),N=function(e){h.value=e,E({title:"安装第三方插件包",area:50,btn:["确定安装","取消"],component:function(){return C(function(){return u.import("./index-legacy185.js?v=1763689792")},void 0,u.meta.url)}})},I=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:h.value=t,g.value=E({title:"".concat(t.title,"购买"),area:50,component:function(){return C(function(){return u.import("./index-legacy186.js?v=1763689792")},void 0,u.meta.url)}});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){return ot([wn({type:"app",onClick:function(e){return An(e)}}),kn(),_n("app"),xn(),Tn({onClick:I}),Ln(),Sn({onClick:v}),Cn({onChange:(e=b(p().m(function e(t,n){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Fn(t,n);case 1:e.v.status||O("0");case 2:return e.a(2)}},e)})),function(t,n){return e.apply(this,arguments)})}),En(function(e){var n=[],a=!function(e){return e.endtime<0}(e);if(n.push({onClick:I,title:-1!==e.endtime?"立即续费":"立即购买",isHide:function(){return a}}),e.setup&&!a&&n.push({onClick:m,title:"卸载"}),!a)return n;if(e.setup){var r=Ss(e);n.push({onClick:function(e){return Dn(e,"update")},title:"更新",isHide:function(){return!r}}),n.push({onClick:An,title:"设置"}),n.push({onClick:m,title:"卸载"})}else e.price>0&&!t.value.bindUser?n.push({onClick:function(){return Jc()},title:"立即购买"}):n.push({onClick:Dn,title:"安装"});return n})]);var e},P=function(){var e=b(p().m(function e(){var t,n,u,l,c,s,f,d,v,m=arguments;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{type:10,query:a.value,p:k.value.page,row:k.value.row,force:"0"},e.p=1,t.query=a.value||"",e.n=2,en(t);case 2:return n=e.v,u=n.data,e.n=3,Nn(u);case 3:l=e.v,c=l.softList,s=l.total,f=l.historyList,(d=l.isForce)&&In(d),i.value=!c.length,y.value=c,r.value=f,k.value.total=s,e.n=5;break;case 4:e.p=4,v=e.v,S(v,"getSoftListData");case 5:return e.p=5,o.value=!1,e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),R=j(),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";R=j(),P({type:10,query:a.value,p:k.value.page,row:k.value.row,force:e})},A=ut({bugTime:"1",qrcode:"https://www.bt.cn",qrcodeSize:160}),z=Ue(0),M=Ue("0"),V=Ue(0),q=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.n){case 0:return clearTimeout(V.value),M.value=(h.value.price*Number(A.bugTime)).toFixed(2),e.n=1,pn({pid:h.value.pid,cycle:A.bugTime,type:-1===h.value.endtime?0:1});case 1:if(t=e.v,null!=(n=t.data)&&n.msg.code){e.n=3;break}return w.request(n),e.n=2,g.value;case 2:return e.v.unmount(),e.a(2);case 3:A.qrcode=n.msg.code,z.value=n.msg.oid,H();case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),H=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:clearTimeout(V.value),V.value=setTimeout(b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,vn({oid:z.value,type:-1===h.value.endtime?0:1});case 1:if(t=e.v,0===t.data){e.n=3;break}return O("1"),e.n=2,g.value;case 2:return e.v.unmount(),e.a(2,w.success(-1!==h.value.endtime?"续费成功":"购买成功"));case 3:H();case 4:return e.a(2)}},e)})),1e3);case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),B=Ue(!1),U=function(){var e=b(p().m(function e(t){var n,a,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,B.value=!0,e.n=1,ce({plugin_name:h.value.name,tmp_path:h.value.tmp_path});case 1:n=e.v,a=n.status,r=n.msg,c.value=!1,w.request({status:a,msg:null==r?void 0:r.replace(/<br>/g,"\n")}),f.value=!1,B.value=!1,O("0"),t(),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}();return{searchVal:a,softTableList:y,tablePageConfig:k,TableColumn:R,importOtherEvent:function(){var e=document.createElement("input");e.type="file",e.style.display="none",e.accept=".zip,.tar.gz",e.id="update_zip",e.multiple=!0,e.addEventListener("change",b(p().m(function t(){var n,a,r;return p().w(function(t){for(;;)switch(t.p=t.n){case 0:if(0!==(n=e.files||[]).length){t.n=1;break}return t.a(2);case 1:if(a=n[0],F.isGetFiles=!0,r="/".concat(""===a.webkitRelativePath?a.name:a.webkitRelativePath),F.fileUploadLimit(a,r)){t.n=2;break}return t.a(2);case 2:return L.value="uploading",D.value=x().load("正在上传插件，请稍后..."),t.p=3,t.n=4,F.useFileUploadExistsConfirm();case 4:t.n=6;break;case 5:t.p=5,t.v,D.value&&(D.value.close(),D.value=null);case 6:return t.a(2)}},t,null,[[3,5]])}))),e.click()},pageChangeEvent:function(e,t){k.value.page=e,k.value.row=t,O("0")},getSoftListData:P,refreshList:O,buyThirdPluginView:I,$reset:function(){a.value="",y.value=[],k.value.page=1},plugin:A,oid:z,price:M,buyPopup:g,getRenewOrder:q,getOrderStatus:H,$reset_buy:function(){clearTimeout(V.value),z.value=0},rowData:h,isShowSpeedVisible:B,installThirdPlugin:U,cancelInstall:function(){B.value=!1,w.error("已取消安装!")},installOtherEvent:N,$reset_install:function(){h.value={}}}}))),sc=i("aF",at("SOFT-PLUGIN-STORE",function(){var e=ut({total:0,page:1,row:15}),t=Vt("softTypeList",[]),n=Ue([]),a=st(pc()),r=a.isSpecial,i=a.searchVal,o=a.isLoading,c=a.tabTypeActive,f=a.showNpsCollect,d=a.historyList,v=pc().unInstallPlugin,h=s(),y=h.payment,k=(h.forceLtd,h.aliyunEcsLtd),_=h.ltdRemarks,x=h.proRemarks,T=h.remarksInfo,L=it(y.value),D=L.authType,F=L.authExpirationTime,N=ut({upgrades:[],version:"",options:[],info:{}}),I=Ue(),j=Ue(),P={speed:"free-time-icon",fifteen:"free-refund-icon",plugin_30:"free-plunge-icon",more:"free-function-icon",recom:"free-certificate-icon",message:"free-function-icon",ip:"free-ip-icon",customer:"contact-customer",plugin_15:"free-fifteen-icon",waf:"icon-file-lock"},R=Et(function(){return _.value.map(function(e){return{title:e[1],icon:P[e[0]]}})}),O=Et(function(){return x.value.map(function(e){return{title:e[1],icon:P[e[0]]}})}),A=Et(function(){return F.value>=0&&"free"!==D.value}),z=Et(function(){return 12===c.value}),M=Et(function(){return 8===c.value}),V=Et(function(){return A.value&&!(z.value&&"pro"===D.value)}),q=Et(function(){return!!k.value||(!!(z.value||A.value&&"ltd"===D.value)||!(!M.value&&A.value&&"pro"===D.value)&&!M.value)}),H=Et(function(){return g(F.value,"yyyy-MM-dd")}),B=Et(function(){var e=(new Date).getTime()/1e3,t=F.value-e;return Math.ceil(t/86400)}),U=Et(function(){return q.value?"#966000":"#f1ad29"}),G=Et(function(){return z.value||q.value?R.value:O.value}),J=Et(function(){return[{title:"全部",id:0},{title:"已安装",id:-1}].concat(l(t.value)).filter(function(e){return 11!=e.id&&10!=e.id})}),W=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:-2===F.value&&(t=32),Wc({sourceId:t,disablePro:q.value,compulsionLtd:q.value});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),$=function(){var a=b(p().m(function a(){var r,u,l,s,v,m,h,g,y,b,w=arguments;return p().w(function(a){for(;;)switch(a.p=a.n){case 0:return r=w.length>0&&void 0!==w[0]?w[0]:{type:c.value,query:i.value,p:e.page,row:e.row,force:"0"},a.p=1,o.value=!0,r.query=i.value||"",a.n=2,en(r);case 2:return u=a.v,l=u.data,a.n=3,Nn(l);case 3:s=a.v,v=s.softList,m=s.total,h=s.historyList,g=s.typeList,y=s.isForce,"1"==r.force&&In(y),f.value=!m,n.value=v,d.value=h,t.value=g,e.total=m,T.value={auth_tips:l.remarks.auth_tips||{},ltd_key:l.remarks.ltd_key||[],pro_key:l.remarks.pro_key||[]},a.n=5;break;case 4:a.p=4,b=a.v,S(b,"getSoftListData");case 5:return a.p=5,o.value=!1,a.f(5);case 6:return a.a(2)}},a,null,[[1,4,5,6]])}));return function(){return a.apply(this,arguments)}}(),K=function(){return ot([wn({type:"app",onClick:function(e){return An(e)}}),kn(),_n("app"),xn(),Tn({onClick:function(e){10!=e.type&&Rn(e,"",34)}}),Ln(),{label:"状态",prop:"gateway",width:50,render:function(e){if(5!==e.type)return Me("span",null,[Ve("--")]);var t="phpmyadmin"===e.name||e.status?"svgtofont-icon-start text-primary":"svgtofont-icon-stop text-danger";return e.setup?Me("span",{class:"flex"},[Me("i",{class:t},null)]):Me("span",null,[Ve("--")])}},Cn({onChange:(e=b(p().m(function e(t,n){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Fn(t,n);case 1:e.v.status||te("0");case 2:return e.a(2)}},e)})),function(t,n){return e.apply(this,arguments)})}),En(function(e){var t=[],n=Y(xs(e.task)),a=_s(e,D.value),r=Y(null==e?void 0:e.preview_url)&&""!=e.preview_url&&!a,i=!!e.route,u=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!1};return t.push({title:e,onClick:n,isHide:a})};if(!a)return u("立即跳转",On,function(){return!i}),u(xs(e.task),Hc,function(){return!n}),u("预览",jn,function(){return!r}),u(-1!==e.endtime?"立即续费":"立即购买",function(e){return Rn(e,e.type,-1!==e.endtime?34:31)},function(){return a}),u("卸载",v,function(){return!(!a&&e.setup)}),t;var o=Ss(e),l=5!==e.type;return e.setup?(u("更新",function(e){return Dn(e,"update")},function(){return!o}),u("设置",An),u("修复",ne,function(){return!l}),u("卸载",v)):e.is_docker?u("立即前往",function(){fe.push({name:"docker"})}):u("安装",Dn),t})]);var e},Q=function(){var e=b(p().m(function e(){var t,n,a,i,u,o;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,se({plugin_name:I.value.name,show:1});case 1:(t=e.v).status?(N.upgrades=t.data,n=N.upgrades.at(-1)||{beta:!1},a=n.beta?n:{},i=N.upgrades.at(0),N.info=I.value.is_beta?a:i,N.info||(u=I.value.version,N.info={beta:2,m_version:u.split[0],update_msg:0,update_time:0,version:u.split[1]}),r&&(N.options=N.upgrades.map(function(e){return{label:e.m_version+"."+e.version+(e.beta?"bate":"Stable"),value:e.m_version+"."+e.version}}),N.version="".concat((null===(o=N.options.at(0))||void 0===o?void 0:o.value)||""))):w.error(t.msg);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,j.value;case 1:e.v.unmount(),Dn(I.value,"repair");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:Dn(m(m({},I.value),{version:N.version}),"repair");case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ee=K(),te=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";ee=K(),$({type:c.value,query:i.value,p:e.page,row:e.row,force:t})},ne=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,us();case 1:if(!e.v){e.n=2;break}return e.a(2);case 2:I.value=t,j.value=E({title:"".concat(t.title,"v").concat(t.version,"-修复插件"),area:50,component:function(){return C(function(){return u.import("./index-legacy187.js?v=1763689792")},void 0,u.meta.url)}});case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();return{TableColumn:ee,searchVal:i,tablePage:e,softTableList:n,typeList:J,refreshPluginList:te,getSoftListData:$,openNpsEvent:function(){return Bc({type:16,id:993,isNoRate:!0})},toggleClassEvent:function(t){c.value=t,sessionStorage.setItem("SOFT-PLUGIN-TYPE",String(t)),e.page=1,te("0")},isPay:A,isActiveLtd:z,isActivePro:M,isActivePay:V,isShowType:q,isExpTime:H,isDistanceDays:B,isShowColor:U,recomList:G,pluginPayEvent:W,plugin:N,helpList:[{content:"无法修复？请尝试切换下版本。"}],getPluginInfo:Q,cutVersionEvent:Z,repairPluginEvent:X,softData:I,$reset:function(){i.value="",n.value=[],t.value=[],e.page=1,I.value={},N.options=[],N.version="",N.upgrades=[],ee.value=[]}}})),fc=i("aI",at("SOFT-DEPLOY-STORE",function(){var e,t=st(pc()),n=t.tabDeployActive,a=t.isLoading,r=t.searchVal,i=pc().scoreEvent,o=Ue(null),c=Ue(),s=Ue(),f=Ue({total:0,page:1,row:15}),d=Vt("deployTypeList",[]),v=ot([]),m=ot([]),h=Ue("all"),g=Et(function(){return[{title:"全部",tid:0}].concat(l(d.value))}),k=function(e){o.value=e||null,E({title:"".concat(e?"更新":"导入","一键部署项目包").concat(e?"【".concat(e.title,"】"):""),area:60,btn:["提交","取消"],component:function(){return C(function(){return u.import("./import-legacy.js?v=1763689792")},void 0,u.meta.url)},showClose:!0})},_=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:t.official?window.open(t.official,"_blank","noopener,noreferrer"):location.reload();case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e;m.value=(e={list:v.value,limit:f.value.row,p:f.value.page},de(e.limit,e.list)[e.p-1]||[])},T=function(){var e=b(p().m(function e(t){var n,r,i,u,o,l,c,s;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t.search||delete t.search,a.value=!0,e.n=1,ln(t);case 1:n=e.v,r=n.data,i=n.status,u=pe(r),o=r.list,l=r.dep_type,1===Number(t.force)&&In(i),c="all"===h.value?"":h.value,u("list")&&j(o)&&(v.value=c?o.filter(function(e){switch(c){case"php":return null===e.project_type||e.project_type===c||0===e.project_type&&0===e.install_type;case"php_async":return e.project_type===c||0===e.project_type&&1===e.install_type;case"java":return e.project_type===c||1===e.project_type;default:return e.project_type===c}}):o,f.value.total=v.value.length,x()),u("dep_type")&&j(l)&&(d.value=l,d.value.push({tid:100,title:"其他"})),e.n=3;break;case 2:e.p=2,s=e.v,S(s);case 3:return e.p=3,a.value=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(t){return e.apply(this,arguments)}}(),L=ot([Yt({isHide:100!=n.value,type:"page",key:"name"}),wn({type:"deploy",sortable:!0,onClick:function(e){return D(e)}}),{label:"版本",prop:"version"},_n("deploy"),{label:"项目类型",width:90,render:function(e){if(100===n.value){var t={php_async:"异步项目",java:"Java项目",default:"PHP项目"};return t[e.project_type]||t.default}var a={1:"Java项目",0:"PHP项目"};return a[e.project_type]||a.default}},{label:"支持版本",render:function(e){var t=e.php,n=e.java,a=e.project_type,r=1===a||"java"===a?"JDK版本：":"PHP版本：",i=t||n;return Me("span",{title:"支持的".concat(r).concat(i)},[r,i])}},{label:"提供者",prop:"author",render:function(e){var t="--";if("宝塔"===e.author)t=e.title;else t=e.author;return Me("span",{class:"bt-link",onClick:function(){return _(e)}},[t])}},Sn({onClick:function(e){return i(e)},sortable:!0}),En(function(e){var t=[{onClick:D,title:"一键部署"}];return 0===e.id&&(t.push({onClick:k,title:"更新"}),t.push({onClick:I,title:"删除"})),t})]),D=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)if(0===e.n)return o.value=t,c.value=E({title:"【".concat(t.title,"】一键部署"),area:60,btn:["提交","取消"],component:function(){return C(function(){return u.import("./index-legacy188.js?v=1763689792").then(function(e){return e.i})},void 0,u.meta.url)},showClose:!0}),e.a(2,c.value)},e)}));return function(t){return e.apply(this,arguments)}}(),F=[{label:"删除自定义项目",value:"delete",event:(e=b(p().m(function e(t,a){var i;return p().w(function(e){for(;;)switch(e.n){case 0:return i=function(){var e=b(p().m(function e(t){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,cn({dname:t.name});case 1:return e.a(2,e.v)}},e)}));return function(t){return e.apply(this,arguments)}}(),e.n=1,t({title:"批量删除",content:"即将删除所选中的项目，是否继续操作?",column:[{prop:"name",label:"项目名称"},Qt()],onConfirm:function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a(i);case 1:return T({type:n.value,search:r.value}),e.a(2,!1)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)})),function(t,n){return e.apply(this,arguments)})}],N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";T({type:n.value,search:r.value,force:e})},I=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,y({title:"删除自定义项目",type:"calc",icon:"warning-filled",content:"您真的要删除【".concat(t.name,"】吗？")});case 1:return e.n=2,cn({dname:t.name});case 2:(n=e.v).status?(w.success(n.msg),N()):w.error(n.msg),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),P=ut({name:"",title:"",php:"",enable_functions:"",version:"",ps:"",file:null,project_type:"php",mysql_version:"",java_version:""}),R=Ue("未选择任何文件"),O=Ue(),A=[{content:function(){return Me(qt,null,[Me("span",{class:"text-danger"},[Ve("请上传zip格式的项目包")]),Ve(",里面必需包含auto_install.json配置文件")])}}],z=function(){var e=b(p().m(function e(t){var a,r,i,u;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,O.value.validate();case 1:if(P.file){e.n=2;break}return w.error("请上传项目包"),e.a(2);case 2:if(P.file.name.endsWith(".zip")){e.n=3;break}return w.error("请上传zip格式的项目包"),e.a(2);case 3:return(a=new FormData).append("name",P.name),a.append("title",P.title),"php"===P.project_type?(a.append("php",P.php),a.append("enable_functions",P.enable_functions)):(a.append("mysql_version",P.mysql_version),a.append("java_version",P.java_version),a.append("project_type",P.project_type)),a.append("version",P.version),a.append("ps",P.ps),a.append("dep_zip",P.file),r={headers:{"Content-Type":"multipart/form-data","x-http-token":window.vite_public_request_token}},i=w.load("正在导入项目，请稍后..."),e.n=4,oe.post("/deployment?action=AddPackage",a,r);case 4:u=e.v,i.close(),u.data.status?(f.value.page=1,n.value=100,N(),t(),w.success(u.data.msg)):w.error(u.data.msg),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}();return{searchVal:r,typeList:g,projectType:h,projectTypeOptions:[{label:"全部项目",value:"all"},{label:"PHP项目",value:"php"},{label:"异步项目",value:"php_async"},{label:"Java项目",value:"java"}],TableColumn:L,deployShowTableList:m,deployTableListRef:s,TableBatchOptions:F,tablePageConfig:f,getDeployListData:T,pageChangeEvent:function(e,t){f.value.page=e,f.value.row=t,x()},importProjectEvent:k,toggleClassEvent:function(e){n.value=e,sessionStorage.setItem("SOFT-DEPLOY-TYPE",String(e)),f.value.page=1,f.value.total=0,T({type:e,search:r.value}),L.value[0].isHide=100!=n.value},onChangeProjectType:function(e){f.value.page=1,T({type:n.value,search:r.value,force:"0"})},refreshDeployList:N,fileName:R,helpList:A,cmdForm:P,cmdRules:{name:[{required:!0,message:"请输入项目英文名称",trigger:["blur"]}],title:[{required:!0,message:"请输入项目中文名称",trigger:["blur"]}],php:[{required:!0,message:"请输入项目PHP版本",trigger:["blur"]}],version:[{required:!0,message:"请输入项目版本",trigger:["blur"]}],ps:[{required:!0,message:"请输入项目简介",trigger:["blur"]}],java_version:[{required:!0,message:"请输入JDK版本",trigger:["blur"]}],mysql_version:[{required:!0,message:"请输入Mysql版本",trigger:["blur"]}]},cmdFormRef:O,projectTypeRadio:[{label:"PHP",value:"php"},{label:"Java",value:"java"}],changeProjectType:function(e){O.value.resetFields(),P.project_type=e},importPlugin:function(){var e=document.createElement("input");e.type="file",e.style.display="none",e.accept=".zip",e.id="update_zip",e.multiple=!0,e.addEventListener("change",b(p().m(function t(){var n;return p().w(function(t){for(;;)switch(t.n){case 0:if(0!==(n=e.files||[]).length){t.n=1;break}return t.a(2);case 1:R.value=n[0].name,P.file=n[0];case 2:return t.a(2)}},t)}))),e.click()},onConfirm:z,initImportForm:function(){if(o.value){var e=o.value,t=e.name,n=e.title,a=e.php,r=e.enable_functions,i=e.version,u=e.ps,l=e.project_type,c=e.java,s=e.mysql;Object.assign(P,{name:t,title:n,php:a||"",enable_functions:r||"",version:i,ps:u,project_type:"java"===l?"java":"php",mysql_version:s||"",java_version:c||""})}},oneDeploy:c,rowData:o,$reset:function(){r.value="",h.value="all",v.value=[],m.value=[],f.value={total:0,page:1,row:10}},$reset_import_form:function(){o.value=null,R.value="未选择任何文件",Object.assign(P,{name:"",title:"",php:"",enable_functions:"",version:"",ps:"",file:null,project_type:"php",mysql_version:"",java_version:""})}}})),pc=i("aE",at("SOFT-STORE",function(){var e=s().mainWidth,t=Be(),n=Ht(),a=Et(function(){var e;return(null===(e=Ht())||void 0===e?void 0:e.name)||"plugin"}),r=sessionStorage.getItem("SOFT-PLUGIN-TYPE"),i=Ue(r?Number(r):0),o=sessionStorage.getItem("SOFT-DEPLOY-TYPE"),c=Ue(o?Number(o):0),f=Ue(!1),d=Ue(!1),v=Ue(!1),h=Ue(!1),g=Ue(!1),k=Ue([]),_=ot([]),S=ot([]),x=Ue(),T={name:"get_soft_list",key:"get_soft_list"},L=Ue(),D=Et(function(){return"deployment"!==a.value}),F=Et(function(){return"plugin"===a.value}),N=Ue(),I=Ue(),P=Ue(),R=Et(function(){var e,t=null===(e=N.value)||void 0===e?void 0:e.name;return"total"===t||"rsync"===t||"syssafe"===t||"tamper_proof"===t}),O=Ue(!1),A=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.value;case 1:(n=e.v)&&n.unmount();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),z=function(){var e,t;null!==(e=x.value)&&void 0!==e&&e.blur&&x.value.blur(),null!==(t=x.value)&&void 0!==t&&t.hidePopover&&x.value.hidePopover()},M=function(){var e;null!==(e=x.value)&&void 0!==e&&e.showPopover&&x.value.showPopover()},V=function(){var e=b(p().m(function e(){var t,n,r,i,u,o,l,c,s,f,d,v=arguments;return p().w(function(e){for(;;)switch(e.n){case 0:t=v.length>0&&void 0!==v[0]?v[0]:"0",n=v.length>1?v[1]:void 0,"other"===a.value?(r=cc(),i=st(r),u=i.tablePageConfig,n&&(u.value.page=1),r.refreshList(t)):"plugin"===a.value?(o=sc(),l=st(o),c=l.tablePage,n&&(c.value.page=1),o.refreshPluginList(t)):"deployment"===a.value&&(s=fc(),f=st(s),d=f.tablePageConfig,n&&(d.value.page=1),s.refreshDeployList(t));case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=b(p().m(function e(t){var n,a=arguments;return p().w(function(e){for(;;)switch(e.n){case 0:n=a.length>1&&void 0!==a[1]?a[1]:22,z(),ws({pluginName:t,source:n});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=b(p().m(function e(){var t,n,a,r;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,tn();case 1:t=e.v,n=t.data,j(n)&&2===n.length&&(_.value=(null===(a=n[0])||void 0===a?void 0:a.plugin)||[],S.value=(null===(r=n[1])||void 0===r?void 0:r.plugin)||[]);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=b(p().m(function e(t,n){var a,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,y({icon:"warning-filled",title:"删除搜索历史记录",content:"删除该条搜索历史【"+t+"】，是否继续？"});case 1:return a=ve("正在删除指定搜索历史记录，请稍后..."),e.p=2,e.n=3,me(m(m({},{val:t}),T));case 3:(r=e.v).status&&k.value.splice(n,1),w.request(r),M(),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,a.close(),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(t,n){return e.apply(this,arguments)}}(),U=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,y({icon:"warning-filled",title:"清空搜索历史",content:"清空所有搜索历史记录，是否继续？"});case 1:return t=ve("正在清空搜索历史记录，请稍后..."),e.p=2,e.n=3,he(T);case 3:(n=e.v).status&&(k.value=[]),w.request(n),M(),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,t.close(),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),G=Vt("softList",[]),J=Et(function(){return G.value.slice(0,W.value)||[]}),W=Et(function(){return e.value<=400?1:Math.floor((e.value-200)/120)}),$=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,nn();case 1:t=e.v,n=t.data,G.value=n;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Y=Ue(!1),K=Ue(5),Q=ot([{score:5,name:"力荐"},{score:4,name:"好"},{score:3,name:"一般"},{score:2,name:"差"},{score:1,name:"非常差"}]),X=ut({count:0,total:0,avg:0,rate:0,starList:[]}),Z=function(){var e=b(p().m(function e(){var t,n,a,r;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,Y.value=!0,e.n=1,sn({pid:N.value.id,p:1});case 1:if((t=e.v).status){for(n=t.data.split.reverse(),a=t.data.total,X.avg=Number(((1*n[4]+2*n[3]+3*n[2]+4*n[1]+5*n[0])/a).toFixed(1)),X.count=N.value.count,X.total=a,X.rate=0!==a?Number((100*Number(((n[0]+n[1])/a).toFixed(2))).toFixed(0)):0,r=0;r<5;r++)X.starList.push(Number((100*Number((n[r]/a).toFixed(2))).toFixed(0)));Y.value=!1}e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fn({pid:N.value.id,num:K.value,ps:"用户未做任何评价"});case 1:(t=e.v).status?(V(),A(I),w.success(t.msg)):w.error(t.msg),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),te=function(){var e=b(p().m(function e(){var t,n,a,r;return p().w(function(e){for(;;)switch(e.n){case 0:t=N.value.version,n=0;case 1:if(!(n<N.value.versions.length)){e.n=3;break}if(!N.value.versions[n].setup||!N.value.version.includes(N.value.versions[n].m_version)){e.n=2;break}return(t=N.value.versions[n].m_version).indexOf(".")<0&&(t+="."+N.value.versions[n].version),e.a(3,3);case 2:n++,e.n=1;break;case 3:if(a=N.value.name,!R){e.n=9;break}if(!O.value){e.n=7;break}return e.n=4,rn({soft_name:a});case 4:if(!(r=e.v).status){e.n=5;break}return e.a(2,ne(a,t));case 5:w.error(r.msg);case 6:return e.a(2,r.status);case 7:return e.a(2,ne(a,t));case 8:e.n=10;break;case 9:return e.a(2,ne(a,t));case 10:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=b(p().m(function e(t,n){var a,r,i;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,an({sName:t,version:n});case 1:return(i=e.v).status?(w.success(i.msg),V()):w.msg({dangerouslyUseHTMLString:!0,message:i.msg,type:"error",duration:0,showClose:!0}),null!==(a=N.value)&&void 0!==a&&a.callBack&&(null===(r=N.value)||void 0===r||r.callBack(i.status)),e.a(2,i.status)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),ae=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:if(n.name!==a.value){e.n=1;break}return e.a(2);case 1:t.push({name:a.value});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ie=function(e){"refreshSoftTable"===e.data&&V()};return{tabActive:a,historyList:k,tabTypeActive:i,tabDeployActive:c,showNpsCollect:f,isLoading:d,inputZipFlag:v,speedInstallView:h,isResetDeployPage:g,isPluginView:F,redirectRouter:ae,cutTabsEvent:function(e){a.value=e,ge("/soft/"+e)},initSoftView:function(){window.addEventListener("message",ie)},$reset:function(){window.removeEventListener("message",ie),re(["/plugin?action=get_soft_list","/plugin?action=push_plugin","/plugin?action=get_usually_plugin"])},refreshRouteData:V,searchRef:x,softSearchList:_,softRecommendList:S,handleOpenPluginEvent:q,getHotSoft:H,clearSoftHistory:function(e){k.value.splice(e,1),k.value=l(k.value)},clearFindHistoryEvent:B,inputHistoryEvent:function(e){L.value=e,z(),V("0")},clearAllHistoryEvent:U,initHistory:function(){0===k.value.length&&z(),hs({promises:[H],delay:100})},$reset_history:function(){L.value="",k.value=[],_.value=[],S.value=[],f.value=!1},showRefresh:D,triggerHideEvent:z,triggerShowEvent:M,openNPS:function(){Bc({type:16,id:993,isNoRate:!0})},searchVal:L,initRecently:function(){hs({promises:[$],delay:500})},handleOpenRecentEvent:function(e){ws({pluginName:e.name,type:"default"})},getHistoryInfo:$,softNum:W,softList:G,softListSliceData:J,$reset_recently:function(){G.value=[]},scoreEvent:function(e){N.value=e,I.value=E({title:"【".concat(e.title,"】评分"),area:55,component:function(){return C(function(){return u.import("./index-legacy189.js?v=1763689792")},void 0,u.meta.url)}})},loading:Y,pluginData:N,pluginScore:X,score:K,getComment:function(e){return Q.value.filter(function(t){return t.score===e})[0].name},getDetail:Z,onSubmitScore:ee,$reset_score:function(){N.value={},X.starList=[]},unInstallPlugin:function(e){N.value=e,P.value=E({showFooter:!0,title:"卸载",area:45,component:function(){return C(function(){return u.import("./index-legacy190.js?v=1763689792")},void 0,u.meta.url)}})},onUnInstall:te,unInstall:ne,isSpecial:R,checked:O}})),dc=Object.freeze(Object.defineProperty({__proto__:null,SOFT_STORE:pc,useSoftStore:function(){var e=pc();return m(m({},e),st(e))}},Symbol.toStringTag,{value:"Module"}));i("dk",dc);var vc=function(e,t){return new Promise(function(e,n){E({title:"编译安装",area:45,btn:["提交并".concat(t),"取消"],component:function(){return C(function(){return u.import("./compile-install-legacy.js?v=1763689792")},void 0,u.meta.url)},onConfirm:function(){return e(!0)},onCancel:function(){return e(!1)}})})},mc=(i("aK",function(e){return E({title:"".concat(e.title,"- 更新日志"),area:52,component:function(){return C(function(){return u.import("./history-version-legacy.js?v=1763689792")},void 0,u.meta.url)},compData:{name:e.name,title:e.title}})}),s()),hc=mc.isRefreshSoftList,gc=(mc.isUpdatePayment,mc.updatePluginCheck),yc=function(e,t,n){var a,r,i,u=e.title,o=e.name,l=e.ps,c=e.type,s=e.dependnet,f=e.other_php,p=e.versions,d=e.version,v=o.split("-")[0];n.title=u,n.name=o,n.isBeta=!!e.is_beta,n.ps=l,n.type=c,n.call=t,n.isInstall="i"===t,n.isUpdate="u"===t,n.isRepair="r"===t,n.isPHPInstall="php"===v&&"i"===t,n.isBeta=!!e.is_beta,n.isSystem=5===c,n.isPHPInstall="php"===v,n.isMysqlUpdate="mysql"===v&&("r"===t||"u"===t),n.isSpecialPlugins=["apache","nginx","mysql"].includes(o),n.introduction=(i=e.introduction)?i.split(";").map(function(e){return e.split("|")}):[],n.compile=["nginx","apache","mysql","php"].includes(v),n.currentVersion=d||"",n.otherPHP=f||[],n.versions=p||[],n.dependnet=s,n.isDependnet=!(null!=s&&null!==(a=s.need)&&void 0!==a&&a.length||null!=s&&null!==(r=s.selected)&&void 0!==r&&r.length)},bc=function(){var e=b(p().m(function e(t,n,a){var r,i,u;return p().w(function(e){for(;;)switch(e.n){case 0:if(!Bt(t)||!le("name",t)){e.n=1;break}return yc(t,n,a),e.a(2);case 1:return r=w.load("正在获取插件信息，请稍候..."),e.n=2,B({sName:t});case 2:i=e.v,u=i.data,r.close(),yc(u,n,a);case 3:return e.a(2)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),wc=function(){var e=b(p().m(function e(t,n,a){var r,i,u,o,l,c,s,f,d;return p().w(function(e){for(;;)switch(e.n){case 0:if(r=U(a),i=t.versions[a||0],r&&t.isSystem&&(u=t.versions.findIndex(function(e){return t.currentVersion.indexOf(e.m_version)>-1}))>=0&&(i=t.versions[u]),!t.isPHPInstall){e.n=3;break}if(r&&(a=t.otherPHP.findIndex(function(e){return e.name===t.name})),i=t.otherPHP[a||0],t.name===i.name){e.n=2;break}return o=w.load("正在获取PHP版本信息，请稍候..."),e.n=1,B({sName:i.name});case 1:l=e.v,c=l.data,i=c.versions[0],o.close(),e.n=3;break;case 2:i=t.versions[0];case 3:if(t.isSystem||(n.updateTime=i.update_time?g(i.update_time,"yyyy/MM/dd"):"无",n.isBeta=!!i.beta,n.updateMsg=i.update_msg||"暂无内容"),n.mVersion=i.m_version,!t.isSystem||!t.isUpdate||t.isPHPInstall){e.n=6;break}return e.n=4,jc(t);case 4:if((d=e.v).length){e.n=5;break}return n.fullVersion="版本错误",e.a(2);case 5:n.version=null===(s=d[0])||void 0===s?void 0:s.version,n.fullVersion="".concat(null===(f=d[0])||void 0===f?void 0:f.m_version,".").concat(d[0].version),e.n=7;break;case 6:n.version=i.version,n.fullVersion="".concat(i.m_version).concat(i.version?"."+i.version:"");case 7:return e.a(2,n)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),kc=function(e,t){var n=[],a=e.versions,r=e.isPHPInstall,i=e.otherPHP;r?(i.map(function(e,t){n.push({title:e.name,key:t,disabled:e.status,data:e})}),t.value=i.findIndex(function(t){return t.name===e.name}),t.version=n):(a.map(function(t,a){var r=U(t.beta)?" Beta":" Stable",i=e.name+" ";e.isSystem?r="":i="",n.push({title:"".concat(i).concat(t.m_version).concat(""===t.version?"":".".concat(t.version)).concat(r),key:a,data:t})}),t.value=0,t.version=n)},_c=function(e,t){return{sName:e.name,version:t.mVersion,min_version:t.version}},Sc=function(){var e=b(p().m(function e(t){var n,a,r,i,u,o=arguments;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:1,a=o.length>2?o[2]:void 0,e.n=1,Pc(t);case 1:if(!e.v){e.n=2;break}return e.a(2);case 2:if(0!==n){e.n=5;break}return e.n=3,xc(t,t.upgrade?"更新":"安装");case 3:if(e.v){e.n=4;break}return e.a(2);case 4:a();case 5:return r=w.load("正在添加安装任务，请稍候..."),e.p=6,e.n=7,dn(m(m({},t),{},{type:n}));case 7:if(i=e.v,u=i.data,!le("status",u)||!le("msg",u)||u.status){e.n=8;break}return w.msg({dangerouslyUseHTMLString:!0,message:'<div style="line-height:22px;">'.concat(u.msg,"</div>"),type:"error",duration:2e3}),e.a(2);case 8:hc.value=!0,Hc(),setTimeout(function(){w.request(u)},1e3),e.n=10;break;case 9:e.p=9,e.v;case 10:return e.p=10,r.close(),e.f(10);case 11:return e.a(2)}},e,null,[[6,9,10,11]])}));return function(t){return e.apply(this,arguments)}}(),xc=function(){var e=b(p().m(function e(t,n){return p().w(function(e){for(;;)if(0===e.n)return e.a(2,vc(t.sName,n))},e)}));return function(t,n){return e.apply(this,arguments)}}(),Tc=function(){var e=b(p().m(function e(t,n){var a,r,i;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Fc({pluginTitle:n.title,pluginName:t.sName,fullVersion:n.fullVersion});case 1:return a=e.v,e.n=2,dn(m({},t));case 2:if(r=e.v,i=r.data,a.unmount(),!le("status",i)||!le("msg",i)||i.status){e.n=3;break}return w.msg({message:'<div style="line-height:22px;">'.concat(i.msg,"</div>"),type:"error",duration:2e3,showClose:!0,dangerouslyUseHTMLString:!0}),e.a(2,!1);case 3:return e.a(2,i);case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(t,n){return e.apply(this,arguments)}}(),Lc=function(){var e=b(p().m(function e(t,n,a){var r,i,u,o,l,c,s,f=arguments;return p().w(function(e){for(;;)switch(e.n){case 0:return r=f.length>3&&void 0!==f[3]?f[3]:"",i={i:"安装",r:"修复",u:"更新"},e.n=1,Nc({title:"正在".concat(i[a],"插件：").concat(r,",请稍候..."),msg:"正在安装插件，请稍候..."});case 1:return u=e.v,e.n=2,be({plugin_name:t,tmp_path:n,install_opt:a});case 2:if(o=e.v,w.request(o),l=st(pc()),l.inputZipFlag.value=!0,u.unmount(),!gc.value.status){e.n=3;break}return gc.value.status=!1,null===(c=(s=gc.value).callback)||void 0===c||c.call(s),e.a(2);case 3:"/soft/plugin"!==location.pathname?window.location.reload():hc.value=!0;case 4:return e.a(2)}},e)}));return function(t,n,a){return e.apply(this,arguments)}}(),Cc=function(){var e=b(p().m(function e(t,n){var a;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Tc(t,n);case 1:if(a=e.v){e.n=2;break}return e.a(2,!1);case 2:a&&Lc(t.sName,a.tmp_path,"i",n.title);case 3:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Ec=function(){var e=b(p().m(function e(t,n){var a;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Tc(t,n);case 1:(a=e.v)&&Lc(t.sName,a.tmp_path,"u",n.title);case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Dc=function(){var e=b(p().m(function e(t,n){var a;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Tc(t,n);case 1:(a=e.v)&&Lc(t.sName,a.tmp_path,"r",n.title);case 2:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),Fc=function(e){return function(e){var t=e.pluginTitle,n=e.pluginName,a=e.fullVersion;return st(Rc()).downLoadPopup.value=E({area:45,component:function(){return C(function(){return u.import("./download-speed-legacy.js?v=1763689792")},void 0,u.meta.url)},compData:{pluginTitle:t,pluginName:n,fullVersion:a}})}({pluginTitle:e.pluginTitle,pluginName:e.pluginName,fullVersion:e.fullVersion})},Nc=function(e){return function(e){return st(Rc()).compData.value={speedConfig:e},E({title:e.title||"正在执行安装脚本，请稍候...",area:[50,26.4],component:function(){return C(function(){return u.import("./speed-install-legacy.js?v=1763689792")},void 0,u.meta.url)},compData:e})}(e)},Ic=function(){var e=b(p().m(function e(t,n){return p().w(function(e){for(;;)switch(e.n){case 0:if(!t.isMysqlUpdate){e.n=1;break}return e.n=1,y({title:"更新[MySQL]",isHtml:!0,width:"40rem",content:'<div class="!text-secondary">更新过程可能会导致服务中断,您真的现在就将[MySQL]更新到['.concat(n,']吗?</div>\n\t\t\t\t<div class="text-danger">更新数据库有风险,建议在更新前,先备份您的数据库</div>\n\t\t\t\t<div class="text-danger">若您的是云服务器,强烈建议您在更新前做一个快照</div>\n\t\t\t\t<div class="text-danger">建议您在服务器负载闲时进行软件更新</div>'),type:"calc"});case 1:return e.a(2)}},e)}));return function(t,n){return e.apply(this,arguments)}}(),jc=function(){var e=b(p().m(function e(t){var n,a,r,i,u;return p().w(function(e){for(;;)if(0===e.n)return a=[],r=null===(n=t.currentVersion)||void 0===n||null===(n=n.match(/(\d+\.\d+)/))||void 0===n?void 0:n.at(1),t.isMysqlUpdate?(u=null===(i=t.currentVersion.match(/(greatsql_\d+\.\d+|mariadb_\d+\.\d+|AliSQL)/))||void 0===i?void 0:i.at(1),a=t.versions.filter(function(e){return e.m_version===u||e.m_version===r})):a=t.versions.filter(function(e){return e.m_version===r}),e.a(2,a)},e)}));return function(t){return e.apply(this,arguments)}}(),Pc=function(){var e=b(p().m(function e(t){var n,a,r,i;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ye();case 1:if(n=e.v,a=n.data,le("task",a)){e.n=2;break}return e.a(2,!1);case 2:if(r=a.task,!(t.sName.indexOf("php-")>-1)){e.n=3;break}if(!r.some(function(e){var n=e.name.match(/-(.*?)\]/)&&e.name.match(/-(.*?)\]/)[1]===t.version,a=e.name.indexOf("php-")>-1;return n&&a})){e.n=3;break}return w.error("正在安装相同版本的php插件，不可重复安装!"),e.a(2,!0);case 3:if(!(i=["nginx","apache","openlitespeed"]).includes(t.sName)){e.n=4;break}if(!r.some(function(e){return e.name.match(/\[(.*?)-/)&&i.includes(e.name.match(/\[(.*?)-/)[1])})){e.n=4;break}return w.error("正在安装同类型软件nginx,apache或openLiteSpeed，不可重复安装!"),e.a(2,!0);case 4:return e.a(2,!1)}},e)}));return function(t){return e.apply(this,arguments)}}(),Rc=i("ai",at("INSTALL-STORE",function(){var e,t=s().installInfo,n=Ue(),a=Ue(),r=[[7,"免","border-disabled text-darkTertiary"],[8,"专","border-[var(--bt-pro-light-color)] text-[var(--bt-pro-color)]"],[12,"企","border-[var(--bt-ltd-light-color)] text-[var(--bt-ltd-color)]"]],i=lt({title:"",name:"",ps:"",type:0,call:"i",isBeta:!1,isSystem:!1,isInstall:!1,isUpdate:!1,isRepair:!1,isSpecialPlugins:!1,isPHPInstall:!1,isMysqlUpdate:!1,otherPHP:[],compile:!1,currentVersion:"",versions:[],label:[],introduction:[],isDependnet:!1,dependnet:{need:[],selected:[]}}),u=ut({fullVersion:"",mVersion:"",version:"",isBeta:!1,status:!1,updateTime:"",updateMsg:""}),o=lt({value:0,version:[]}),l=Ue(!1),c=Ue([]),f=Ue(!0),d=ut({progress:0,done:0,total:0,estimated:0,speed:0}),v=["安装完成","Successify","complete"],h=Ue(null===(e=n.value)||void 0===e||null===(e=e.speedConfig)||void 0===e?void 0:e.msg),g=Ue(null),k=Ue({args_name:"",ps:"",args:"",init:"#在编译前执行的shell脚本内容，通常为第三方模块的依赖安装和源码下载等前置准备"}),_=Ue(),S=Ue(!1),x={mode:"ace/mode/nginx",theme:we.value?"ace/theme/clouds_midnight":"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},T=Et(function(){return i.title.indexOf("PHP-")>-1?"PHP":i.title}),L=Et(function(){return r.find(function(e){return e[0]===i.type})||[]}),C=Et(function(){var e;return"soft_ico/ico-".concat((null===(e=i.name)||void 0===e?void 0:e.indexOf("php-"))>-1?"php":i.name,".png")}),E=Et(function(){return I(d.done)}),D=Et(function(){return I(d.total)}),F=Et(function(){return I(d.speed)}),N=Ue([{label:"模块名称",prop:"name"},{label:"模块描述",prop:"ps"},{label:"是否启用",render:function(e){return Me(He,{modelValue:e.checked,"onUpdate:modelValue":function(t){return e.checked=t},onChange:function(){z()}},null)}},{label:"操作",align:"right",render:function(e){return[Me("div",{class:"flex items-center justify-end"},[Me("span",{class:"bt-link",onClick:function(){return A(e)}},[Ve("删除")])])]}}]),j=Ue([{name:"模块名称",ps:"模块描述"}]),P=ot({args_name:[{required:!0,message:"请输入模块名称",trigger:"blur"}],args:[{required:!0,message:"请输入模块参数",trigger:"blur"}]}),R=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,null===(t=_.value)||void 0===t?void 0:t.validate();case 1:return e.p=1,S.value=!1,e.n=2,Se(m({name:i.name},k.value));case 2:n=e.v,w.request(n),O(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),O=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,xe({name:i.name});case 1:t=e.v,j.value=t.data.args,n=t.data.config.split("\n"),j.value.forEach(function(e){n.includes(e.name)?e.checked=!0:e.checked=!1}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,y({content:"确认删除模块【 ".concat(t.name,"】 吗？"),title:"提示",icon:"warning-filled"});case 1:return e.n=2,ke({name:i.name,args_name:t.name});case 2:n=e.v,O(),w.request(n),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=b(p().m(function e(){var t,n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=w.load("正在设置模块，请稍后..."),e.p=1,n=j.value.filter(function(e){return e.checked}).map(function(e){return e.name}).join("\n"),e.n=2,_e({name:i.name,args_names:n});case 2:a=e.v,t.close(),w.request(a),O(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,t.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),M=Ue(),V=function(){var e=b(p().m(function e(){var t,n,a,r,i,u,o;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=st(pc()),n=t.inputZipFlag,a=t.speedInstallView,e.p=1,e.n=2,Le({num:10,filename:"/tmp/panelShell.pl"});case 2:if(i=e.v,u=i.msg.trim().split("\n"),o=v.some(function(e){return u[u.length-1].includes(e)}),"Successify"!==u[u.length-1]&&!0!==n.value&&!o){e.n=3;break}return n.value=!1,a.value=!1,Z(),e.a(2,!1);case 3:h.value=i.msg,null!==(r=g.value)&&void 0!==r&&r.scrollHeight&&(g.value.scrollTop=g.value.scrollHeight),M.value=setTimeout(function(){V()},1e3),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}(),q=function(){var e=b(p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Te({plugin_name:i.name});case 1:t=e.v,(n=t.data).status&&(d.done=n.down_size,d.total=n.total_size,d.progress=n.down_pre,d.estimated=n.need_time,d.speed=n.sec_speed),f.value&&setTimeout(function(){f.value&&q()},400),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),H=function(e){o.value=e,wc(i,u,o.value)},B=function(){var e=b(p().m(function e(){var t,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,l.value=!0,e.n=1,se({plugin_name:n.value.name});case 1:t=e.v,a=t.data,c.value=a,l.value=!1,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=b(p().m(function e(){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.value;case 1:null==(n=e.v)||n.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),G=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n=_c(i,u),0!==t&&U(),!i.isSystem){e.n=2;break}return e.n=1,Sc(n,t,function(){return U()});case 1:return e.a(2,e.v);case 2:return e.n=3,Cc(n,{title:i.title,fullVersion:u.fullVersion});case 3:if(e.v){e.n=4;break}return e.a(2,!1);case 4:J(),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},e,null,[[0,5]])}));return function(t){return e.apply(this,arguments)}}(),J=function(){n.value.softData&&n.value.softData.callBack&&n.value.softData.callBack()},W=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:try{t=_c(i,u),U(),Dc(t,{title:i.title,fullVersion:u.fullVersion})}catch(n){}case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),$=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,(t=_c(i,u)).upgrade=t.version,!i.isSystem&&U(),!i.isSystem){e.n=3;break}return e.n=1,Ic(i,u.fullVersion);case 1:return e.n=2,Sc(t,0,function(){return U()});case 2:return e.a(2,e.v);case 3:Ec(t,{title:i.title,fullVersion:u.fullVersion}),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.n){case 0:if(n.value.name){e.n=1;break}return e.a(2);case 1:return t=le("name",n.value.pluginInfo)?n.value.pluginInfo:n.value.name,e.n=2,bc(t,n.value.type,i);case 2:return e.n=3,kc(i,o);case 3:return e.n=4,wc(i,u);case 4:n.value.name&&"mysql"===n.value.name&&i.isInstall&&o.version.forEach(function(e,t){/^5\.7\.\d+/.test(e.title.replace("mysql","").trim())&&(o.value=t,H(t))});case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),K=Ue(),Q=function(){var e=b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return f.value=!1,e.n=1,a.value;case 1:e.v.unmount();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),X=Ue(),Z=function(){K.value&&clearTimeout(K.value),X.value&&clearTimeout(X.value),M.value&&clearTimeout(M.value)};return{customFormRef:_,compData:n,$reset:function(){u.fullVersion="",u.mVersion="",u.version="",u.isBeta=!1,u.status=!1,u.updateTime="",u.updateMsg="暂无日志"},init:Y,pluginModuleInfo:i,pluginActiveInfo:u,versionModel:o,cutPluginActiveInfo:H,install:G,repair:W,update:$,clearTimeoutAll:Z,pluginImgSrc:C,pluginTitle:T,pluginLabel:L,pluginPictureSrc:function(e){var t=i.name.includes("php-")?"php":i.name,n=i.introduction[e];return"https://www.bt.cn/Public/new/plugin/".concat(t,"/").concat(n[1])},getHistoryVersion:B,historyLoad:l,historyData:c,getSoftDownloadSpeed:q,downloadSpeed:d,doneSize:E,totalSize:D,speedSize:F,closeInstall:J,initDownLoad:function(){K.value=setTimeout(function(){q()},100)},downLoadPopup:a,closeDownLoad:Q,initSpeed:function(){var e=st(pc()).speedInstallView;X.value=setTimeout(function(){V(),e.value=!0},100)},speedMsg:h,getCustomModuleData:O,config:x,customForm:k,customVisible:S,clearAddForm:function(){k.value={args_name:"",ps:"",args:"",init:"#在编译前执行的shell脚本内容，通常为第三方模块的依赖安装和源码下载等前置准备"}},rules:P,setCustomModuleData:z,tableColumn:N,handleAddCustomModule:function(){S.value=!0},customData:j,submitCustomModule:R}})),Oc=i("aj",function(){return st(Rc())}),Ac=(i("aA",function(){return c.post("plugin/get_index_list")}),i("ax",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.post("plugin/get_soft_list",{data:e,check:"object"})}),i("ay",function(e){return c.post("plugin?action=add_index",{data:{sName:e},customType:"model",check:"msg"})}),i("az",function(e){return c.post("plugin?action=remove_index",{data:{sName:e},customType:"model",check:"msg"})}),i("d4",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.post("warning/get_list",{data:e})}),i("cZ",function(){return c.post("warning/get_result",{check:"object"})}),i("db",function(){return c.post("project/safecloud/get_safe_overview",{customType:"model"})}),i("d8",function(){return c.post("project/safecloud/get_pending_alarm_trend",{customType:"model"})}),i("d9",function(){return c.post("project/safecloud/get_security_trend",{customType:"model"})}),i("da",function(){return c.post("project/safecloud/get_security_dynamic",{customType:"model"})}),i("d7",function(){return c.post("/plugin?action=a&name=bt_hids&s=set_process",{customType:"model"})}),i("aB",function(e){return c.post("plugin/sort_index",{data:e})}),i("ak",function(){return c.post("system/ReMemory")}),i("an",function(e){return c.post("monitor/process_management/kill_process_all",{data:e,customType:"model",check:"msg"})}),i("d2",function(){return c.post("warning/get_scan_bar",{check:"object"})}),i("d3",function(){return c.post("safe/security/get_repair_bar",{check:"object",customType:"model"})}),i("ao",function(){return c.post("panel/overview/GetOverview",{check:"array",customType:"model"})}),i("ar",function(e){return c.post("panel/overview/AddOverview",{data:e,check:"msg",customType:"model"})}),i("as",function(e){return c.post("panel/overview/SetOverview",{data:e,check:"msg",customType:"model"})}),i("at",function(e){return c.post("panel/overview/SortOverview",{data:e,check:"msg",customType:"model"})}),i("aq",function(e){return c.post("panel/overview/DelOverview",{data:e,check:"msg",customType:"model"})}),i("d1",function(){return c.post("warning/get_tmp_result")}),i("d0",function(){return c.post("warning/kill_get_list")}),i("am",function(e){return c.post("system/set_rname",{data:e,check:"msg"})}),i("ap",function(e){return c.post("/mod/ssh/com/index_ssh_info",{data:e,check:"array",customType:"model"})}),i("dc",function(){return c.post("/safe/exportreport/get_pdf",{check:"object",customType:"model"})}),i("cY",function(){return c.post("/project/safecloud/get_safecloud_list",{check:"object",customType:"model"})}),i("df",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c.post("/project/safecloud/get_webshell_result",{data:e,customType:"model",check:"object"})}),i("dg",function(){return c.post("/project/scanning/get_vuln_info",{check:"object",customType:"model"})}),i("c_",function(){return c.post("/project/safecloud/get_config",{customType:"model",check:"object"})}),i("c$",function(e){return c.post("/project/safecloud/set_config",{data:e,customType:"model",check:"object"})}),i("dd",function(e){return c.post("/project/safecloud/ignore_file",{data:e,customType:"model",check:"object"})}),i("de",function(e){return c.post("/project/safecloud/deal_webshell_file",{data:e,customType:"model",check:"object"})}),i("dh",function(e){return c.post("/project/safecloud/set_alarm_config",{data:e,customType:"model",check:"object"})}),function(){return c.post("/ssl/cert/get_newssl_discount",{customType:"model",check:"object"})});Oc();var zc=s(),Mc=(zc.forceLtd,zc.aliyunEcsLtd),Vc=zc.payment,qc=zc.panel,Hc=i("m",function(){return E({title:"消息盒子",area:[72,56],component:function(){return C(function(){return u.import("./index-legacy191.js?v=1763689792")},void 0,u.meta.url)}})}),Bc=(i("aJ",b(p().m(function e(){return p().w(function(e){for(;;)if(0===e.n)return e.a(2,E({title:"重启服务器或者面板",area:[33,11],component:function(){return C(function(){return u.import("./index-legacy192.js?v=1763689792")},void 0,u.meta.url)}}))},e)}))),i("a",function(){return E({title:"设置菜单显示隐藏",area:[35,40],component:function(){return C(function(){return u.import("./index-legacy193.js?v=1763689792")},void 0,u.meta.url)}})}),i("aw",function(){return E({title:!1,area:20,component:function(){return C(function(){return u.import("./index-legacy194.js?v=1763689792")},void 0,u.meta.url)}})}),i("n",function(){return E({area:60,component:function(){return C(function(){return u.import("./index-legacy195.js?v=1763689792")},void 0,u.meta.url)}})}),i("e",function(e){return E({area:52,compData:e,component:function(){return C(function(){return u.import("./index-legacy196.js?v=1763689792")},void 0,u.meta.url)}})})),Uc=(i("cX",function(){return E({area:60,component:function(){return C(function(){return u.import("./index-legacy197.js?v=1763689792")},void 0,u.meta.url)},cancel:function(){return b(p().m(function e(){return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,De({questions:JSON.stringify({25:"用户未填写任何信息"}),product_type:19,software_name:"Enterprise-Edition-Survey",rate:0});case 1:return e.a(2)}},e)}))()}})}),i("s",function(e){return E({title:"".concat(e.title,"配置"),area:54,compData:e,component:function(){return C(function(){return u.import("./index-legacy198.js?v=1763689792")},void 0,u.meta.url)}})})),Gc=i("f",function(e){return E({area:[75,68.6],compData:e,component:function(){return C(function(){return u.import("./index-legacy199.js?v=1763689792")},void 0,u.meta.url)}})}),Jc=i("b",b(p().m(function e(){var t,n,a,r,i,o,l,c,s=arguments;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:"绑定宝塔账号，享受更多服务",n=s.length>1&&void 0!==s[1]?s[1]:"",!Mc.value){e.n=1;break}return e.a(2,x().error("当前为企业版，无法切换账号。"));case 1:return a=function(){return C(function(){return u.import("./index-legacy112.js?v=1763689792")},void 0,u.meta.url)},e.p=2,r=Ue({client:0,login:0}),e.n=3,Ee();case 3:if(!(i=e.v).status){e.n=6;break}if(0===(null===(o=i.data)||void 0===o?void 0:o.login)){e.n=6;break}r.value.client=i.data.client,r.value.login=i.data.login,c=null===(l=i.data)||void 0===l?void 0:l.client,e.n=1===c?4:2===c?5:6;break;case 4:return a=function(){return C(function(){return u.import("./tencent-bind-user-legacy.js?v=1763689792")},void 0,u.meta.url)},e.a(3,6);case 5:return a=function(){return C(function(){return u.import("./ali-bind-user-legacy.js?v=1763689792")},void 0,u.meta.url)},e.a(3,6);case 6:return e.a(2,E({area:40,component:a,compData:{authData:r.value,title:t,isDialog:!0,redirect:n}}));case 7:return e.p=7,e.v,e.a(2,E({area:40,component:function(){return C(function(){return u.import("./index-legacy112.js?v=1763689792")},void 0,u.meta.url)}}))}},e,null,[[2,7]])}))),Wc=(i("j",function(){return E({area:20,component:function(){return C(function(){return u.import("./index-legacy200.js?v=1763689792")},void 0,u.meta.url)}})}),i("al",function(){return E({area:20,component:function(){return C(function(){return u.import("./index-legacy201.js?v=1763689792")},void 0,u.meta.url)}})}),i("p",Mt(function(e){var t=Mc.value?[82,60]:[100,72],n=(!Mc.value||"ltd"===Vc.value.authType)&&(!Ce(e.showClose)||e.showClose);return E({area:t,showClose:n,compData:m(m({},e),{},{disablePro:!!U(e.disablePro)||e.disablePro}),component:function(){return C(function(){return u.import("./index-legacy202.js?v=1763689792")},void 0,u.meta.url)}})},1e3))),$c=i("k",function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)if(0===e.n)return n=s(),(a=n.installInfo).value=E({area:63,compData:t,component:function(){return C(function(){return u.import("./index-legacy203.js?v=1763689792")},void 0,u.meta.url)}}),e.a(2,a.value)},e)}));return function(t){return e.apply(this,arguments)}}()),Yc=function(e){var t=e.title,n=e.type,a=e.callback;return E({title:t,area:50,compData:{type:n,callback:a},component:function(){return C(function(){return u.import("./index-legacy204.js?v=1763689792")},void 0,u.meta.url)}})},Kc=(i("d",function(){var e=b(p().m(function e(t){var n,a,r,i,u,o,l,c,s,f,d,v,m,h;return p().w(function(e){for(;;)if(0===e.n)return n=t.id,a=void 0===n?999:n,r=t.type,i=t.name,u=t.softName,o=void 0===u?"panel":u,l=t.description,c=t.isNoRate,s=void 0!==c&&c,f=t.title,d=t.isCard,v=void 0===d||d,m=t.isShowPhone,h=void 0===m||m,e.a(2,Bc({id:a,type:r,name:i,softName:o,description:l,isNoRate:s,title:f,isCard:v,isShowPhone:h}))},e)}));return function(t){return e.apply(this,arguments)}}()),function(){var e=b(p().m(function e(t){var n,a,r,i,u;return p().w(function(e){for(;;)switch(e.n){case 0:if(a=t.pluginInfo){e.n=2;break}return e.n=1,B({sName:t.name});case 1:r=e.v,i=r.data,t.pluginInfo=i;case 2:if(u={phpmyadmin:function(){return Qc()},tomcat:function(){return es(a)},pureftpd:function(){return Xc(a)},memcached:function(){return ts(a)},nginx:function(){return ns(a)},mysql:function(){return Zc(a)},openlitespeed:function(){return as(a)},php:function(){return rs(a)},apache:function(){return is(a)}},!(null!==(n=a.name)&&void 0!==n&&n.includes("php-")||u[a.name])){e.n=4;break}if(!a.name.includes("php-")){e.n=3;break}return e.a(2,u.php());case 3:if(!u[a.name]){e.n=4;break}return e.a(2,u[a.name]());case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),Qc=function(){return E({isAsync:!0,title:"PHPMyAdmin",area:[74,56],component:function(){return C(function(){return u.import("./index-legacy205.js?v=1763689792")},void 0,u.meta.url)}})},Xc=function(e){return E({isAsync:!0,title:"Ftp管理",area:[100,56],component:function(){return C(function(){return u.import("./index-legacy206.js?v=1763689792")},void 0,u.meta.url)},compData:e,showClose:!0})},Zc=function(e){return E({isAsync:!0,title:"Mysql",area:[80,65],component:function(){return C(function(){return u.import("./index-legacy207.js?v=1763689792")},void 0,u.meta.url)},compData:e,showClose:!0})},es=function(e){return E({isAsync:!0,title:"Tomcat管理",area:[64,54],component:function(){return C(function(){return u.import("./index-legacy208.js?v=1763689792")},void 0,u.meta.url)},compData:e,showClose:!0})},ts=function(e){return E({isAsync:!0,title:"Memcached管理",area:[64,54],component:function(){return C(function(){return u.import("./index-legacy209.js?v=1763689792")},void 0,u.meta.url)},compData:e,showClose:!0})},ns=function(e){return E({isAsync:!0,title:"Nginx",area:[68,58],component:function(){return C(function(){return u.import("./index-legacy210.js?v=1763689792")},void 0,u.meta.url)},compData:e,showClose:!0})},as=function(e){return E({isAsync:!0,title:"OpenLiteSpeed",area:[64,54],component:function(){return C(function(){return u.import("./index-legacy211.js?v=1763689792")},void 0,u.meta.url)},compData:e,showClose:!0})},rs=function(e){return E({isAsync:!0,title:"PHP-".concat(e.version,"管理"),area:[80,64],component:function(){return C(function(){return u.import("./index-legacy212.js?v=1763689792")},void 0,u.meta.url)},compData:e,showClose:!0})},is=function(e){return E({isAsync:!0,title:"Apache",area:[68,58],component:function(){return C(function(){return u.import("./index-legacy213.js?v=1763689792")},void 0,u.meta.url)},compData:e,showClose:!0})},us=(i("c",function(){var e=b(p().m(function e(t){var n,a,r,i;return p().w(function(e){for(;;)switch(e.n){case 0:return n=t.name,a=t.options,r=t.request,i=t.selectList,e.n=1,E({title:"批量设置".concat(n),area:"40",compData:{name:n,options:a,selectList:i,request:r},showFooter:!0,component:function(){return C(function(){return u.import("./index-legacy214.js?v=1763689792")},void 0,u.meta.url)}});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),i("ah",function(){var e=b(p().m(function e(t){var n,a,r,i,o,l,c,s,f=arguments;return p().w(function(e){for(;;)switch(e.n){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:"editor",a=f.length>2&&void 0!==f[2]?f[2]:"",e.n=1,C(function(){return Promise.resolve().then(function(){return Zl})},void 0,u.meta.url);case 1:return r=e.v,e.n=2,C(function(){return Promise.resolve().then(function(){return yu})},void 0,u.meta.url);case 2:if(i=e.v,o=i.useCreateEditorTabs,l=i.editorExample,c=r.FilesAceEditor,s={path:t,title:t.split("/").pop(),type:n,mode:a},!l.value){e.n=3;break}return o(s),e.a(2);case 3:c(s);case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),i("o",function(e,t){if(!e.length)return x().error("操作失败，请重试");E({title:"批量".concat(t.title||"操作","结果"),area:42,component:function(){return C(function(){return u.import("./index-legacy125.js?v=1763689792")},void 0,u.meta.url)},compData:{resultData:e,resultTitle:t.title||"操作"}})}),i("av",b(p().m(function e(){var t,n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!sessionStorage.getItem("diskWarn")){e.n=1;break}return e.a(2,!1);case 1:if(t=localStorage.getItem("checkWarnInfo"),!t){e.n=6;break}if(e.p=2,n=JSON.parse(t),a=n.byte_size,!(Number(a[0])-Number(a[1])<=524288e3)){e.n=4;break}return e.n=3,E({title:!1,showClose:!1,area:[40,36],component:function(){return C(function(){return u.import("./index-legacy215.js?v=1763689792")},void 0,u.meta.url)}});case 3:return e.a(2,!0);case 4:return sessionStorage.removeItem("diskWarn"),e.a(2,!1);case 5:return e.p=5,e.v,e.a(2,!1);case 6:return e.a(2,!1)}},e,null,[[2,5]])})))),os=(i("au",b(p().m(function e(){var t,n,a,r,i,o,l;return p().w(function(e){for(;;)switch(e.n){case 0:if(t=Vt("newsslDiscountStatus",!1),n=["alissl2025","ssl251104"],!t.value||!n.includes(qc.value.oem)){e.n=3;break}return i=ve("正在获取商业SSL优惠信息，请稍后..."),e.n=1,Ac();case 1:if(o=e.v,l=o.data,t.value=!1,i.close(),l.status){e.n=2;break}return e.a(2,!1);case 2:E({title:!1,area:42,component:function(){return C(function(){return u.import("./index-legacy216.js?v=1763689792")},void 0,u.meta.url)},compData:{title:(null==l||null===(a=l.data)||void 0===a?void 0:a.message)||"恭喜您获得：".concat((null==l||null===(r=l.data)||void 0===r?void 0:r.discount_info)||"","优惠"),instructions:["请先安装Nginx环境，创建网站后使用","创建网站后，设置-SSL-宝塔证书，进行证书申请","优惠券请在24小时内使用，过期优惠券将作废"],confirmText:"立即安装套件"}});case 3:return e.a(2,!1)}},e)}))),i("cU",Je({__name:"index",props:Ut({version:{},allAlarm:{type:Boolean,default:!1},multiple:{type:Boolean,default:function(){return!0}},limit:{default:function(){return[]}},options:{},isDefault:{type:Boolean,default:!1},isShowApi:{type:Boolean,default:!0}},{modelValue:{},modelModifiers:{}}),emits:Ut(["change"],["update:modelValue"]),setup:function(e,a){var r=a.expose,i=a.emit,u=s(),o=u.getOldSenderAlarmListInfo,c=u.push,f=e,d=x(),v=d.load,h=(d.error,Ue(!1)),g=Gt(e,"modelValue"),y=["dingding","feishu","mail","weixin","wx_account","sms"],w=i,k=ot([]),_=function(e){w("change",e)},S=function(){var e=b(p().m(function e(){var a,r,i,u,s,d;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,h.value=!0,e.n=1,o();case 1:a=[],r=p().m(function e(){var t,n;return p().w(function(e){for(;;)switch(e.n){case 0:Object.prototype.hasOwnProperty.call(c.value.old,i)&&(t=c.value.old[i]).setup&&!f.limit.includes(t.name)&&(n=!("{}"===JSON.stringify(t.data)),t.isSetAlarm=n,a.push({label:t.title,value:t.name,disabled:!t.setup||!n,isSetAlarm:!n,render:function(){var e=!t.setup||!n;return Me("div",{class:"flex justify-between"},[Me("span",null,[t.title]),Me("span",{class:"".concat(e?"text-danger":"hover:text-primary"," cursor-pointer mr-[4px]")},[Me("span",{onClick:function(e){e.stopPropagation(),T(t)}},[e?"[未配置]":"[已配置]"])])])}}));case 1:return e.a(2)}},e)}),s=n(c.value.old);case 2:if((d=s()).done){e.n=4;break}return i=d.value,e.d(t(r()),3);case 3:e.n=2;break;case 4:k.value=a,f.options&&(k.value=[].concat(l(f.options),a)),f.isShowApi||(k.value=k.value.filter(function(e){return y.includes(e.value)})),f.allAlarm&&k.value.unshift({label:"全部",value:"all",disabled:!1,isSetAlarm:!1,render:function(){return Me("div",{class:"flex justify-between"},[Ve("全部"),Me("span",null,null)])}}),Array.isArray(g.value)&&g.value.length?g.value.forEach(function(e){k.value.find(function(t){return t.value===e})||(g.value=g.value.filter(function(t){return t!==e}))}):Y(g.value)&&g.value&&(k.value.find(function(e){return e.value===g.value})||(g.value="")),f.isDefault&&!g.value&&(u=a.filter(function(e){return!e.disabled})).length&&(g.value=f.multiple?[u[0].value]:u[0].value),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.p=6,h.value=!1,e.f(6);case 7:return e.a(2)}},e,null,[[0,5,6,7]])}));return function(){return e.apply(this,arguments)}}(),T=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:if(n=[{title:"钉钉机器人",type:"dingding"},{title:"飞书机器人",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信机器人",type:"weixin"},{title:"微信公众号",type:"wx_account"}].find(function(e){return e.type===t.name})||{title:"",type:"",data:{}},"wx_account"!==t.name||t.setup){e.n=1;break}return e.n=1,L(t.name);case 1:Uc(m(m({},n),{},{callback:S}));case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=v("正在安装模块，请稍后..."),e.p=1,e.n=2,Fe({name:t});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,n.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t){return e.apply(this,arguments)}}();return Nt(S),r({refresh:S}),function(t,n){var a=Ne,r=Ye("bt-loading");return Ke((Xe(),gt(a,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return g.value=e}),multiple:e.multiple,options:ht(k),placeholder:"请选择告警方式",onChange:_},null,8,["modelValue","multiple","options"])),[[r,ht(h)]])}}}))),ls=i("_",Je({__name:"index",props:Ut({multiple:{type:Boolean,default:function(){return!0}},limit:{default:function(){return[]}}},{modelValue:{},modelModifiers:{}}),emits:Ut(["change"],["update:modelValue"]),setup:function(e,t){var n=t.expose,a=t.emit,i=s(),u=i.getSenderAlarmListInfo,o=i.push,l=e,c=Ue(!1),f=Gt(e,"modelValue"),d=a,v=ot([]),h=function(e){d("change",e)},g=[{title:"钉钉",type:"dingding"},{title:"飞书",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"短信通知",type:"sms"},{title:"自定义消息通道",type:"webhook"}],y=function(){var e=b(p().m(function e(){var t,n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=[].concat(g),c.value=!0,e.n=1,u(!1);case 1:v.value=[],n=o.value.config.filter(function(e){return e.used&&!l.limit.includes(e.sender_type)}),a=t.filter(function(e){return!n.some(function(t){return t.sender_type===e.type})&&!l.limit.includes(e.type)}),n.forEach(function(e){var t,n=g.find(function(t){return t.type===e.sender_type}),a=null!==(t=e.data)&&void 0!==t&&t.title?e.data.title+(e.data.title?" (".concat((null==n?void 0:n.title)||"",")"):""):n.title;if("sms"===e.sender_type){if(!e.data.total)return!1;a="短信通知 (".concat(e.data.count,"条)")}v.value.push({label:a||n.title,value:e.id,disabled:!1,render:function(){return Me("div",{class:"flex justify-between"},[Me("span",{class:"mr-[10px]"},[a]),Me("span",{class:"hover:text-primary cursor-pointer mr-[4px]"},[Me("span",{onClick:function(t){t.stopPropagation(),w(m(m({},n),{},{data:e,name:e.sender_type,setup:!0,isSetAlarm:!0}))}},["sms"!==e.sender_type?"[已配置]":""])])])}})}),a.forEach(function(e){v.value.push({label:e.title,value:"",disabled:!0,render:function(){return Me("div",{class:"flex justify-between"},[Me("span",null,[e.title]),Me("span",{class:"text-danger cursor-pointer mr-[4px]",onClick:function(t){t.stopPropagation(),w(m(m({},e),{},{setup:!1,name:e.type,data:{},isSetAlarm:!1}))}},["sms"!==e.type?"[未配置]":""])])}})}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,c.value=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:n=[{title:"钉钉机器人",type:"dingding"},{title:"飞书机器人",type:"feishu"},{title:"邮箱",type:"mail"},{title:"企业微信机器人",type:"weixin"},{title:"微信公众号",type:"wx_account"},{title:"自定义消息通道",type:"webhook"},{title:"短信通知",type:"sms"}].find(function(e){return e.type===t.name})||{title:"",type:"",data:{}},Uc(m(m({},n),{},{data:t}));case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();n({refresh:y}),Nt(y);var k=Et(function(){var e;return null!==(e=l.limit)&&void 0!==e&&e.length?v.value.filter(function(e){var t,n=null===(t=g.find(function(t){var n;return(null===(n=e.label)||void 0===n?void 0:n.includes(t.title))||"function"==typeof e.render&&e.render().toString().includes(t.title)}))||void 0===t?void 0:t.type;return!l.limit.includes(n)}):v.value});return We([function(){return l.limit},function(){return v.value}],function(e){var t=r(e,2),n=t[0],a=t[1];if(null!=n&&n.length&&f.value&&null!=a&&a.length)if(Array.isArray(f.value)){var i=k.value.map(function(e){return e.value});i.length>0&&(f.value=f.value.filter(function(e){return i.includes(e)}))}else k.value.some(function(e){return e.value===f.value})||(f.value=void 0)},{deep:!0,immediate:!0}),We(function(){return v.value},function(e){null!=e&&e.length&&f.value&&Ge(function(){var e=k.value.map(function(e){return e.value});Array.isArray(f.value)?f.value=f.value.filter(function(t){return e.includes(t)}):e.includes(f.value)||(f.value=void 0)})},{immediate:!0}),function(t,n){var a=Ne,r=Ye("bt-loading");return Ke((Xe(),gt(a,{modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return f.value=e}),multiple:e.multiple,options:ht(k),onChange:h,placeholder:"请选择告警方式"},null,8,["modelValue","multiple","options"])),[[r,ht(c)]])}}})),cs=s(),ss=cs.payment,fs=cs.pluginInfo,ps=(cs.forceLtd,cs.aliyunEcsLtd),ds=cs.resetAuthState,vs=x(),ms=function(){var t=b(p().m(function t(n,a){var r,i,u,o;return p().w(function(t){for(;;)switch(t.p=t.n){case 0:if(0!==n.length){t.n=1;break}return t.a(2,a&&a(!0));case 1:return r=e(n),i=r[0],u=f(r).slice(1),t.p=2,t.n=3,i();case 3:o=t.v,a&&a(o),t.n=5;break;case 4:t.p=4,t.v;case 5:return t.a(2,ms(u,a))}},t,null,[[2,4]])}));return function(e,n){return t.apply(this,arguments)}}(),hs=i("g",function(){var e=b(p().m(function e(t){var n,a,r,i,u,o,l;return p().w(function(e){for(;;)switch(e.n){case 0:return n=t.promises,a=t.callback,r=t.delay,i=t.isRouter,u=t.check,o=window.location.pathname,l=function(){return new Promise(function(e){setTimeout(function(){i||(i=window.location.pathname),i&&!u?e(je(i,o)):u&&u()?e(!0):e(!1)},r||0)})},e.n=1,l();case 1:if(e.v){e.n=2;break}return e.a(2,a&&a(!0));case 2:return e.a(2,ms(n,a))}},e)}));return function(t){return e.apply(this,arguments)}}()),gs=function(){var e=b(p().m(function e(t){var n,a,r,i,u;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,n=t.pluginName,a=t.pluginInfo,!U(n)||!U(a)){e.n=1;break}return vs.error("缺少参数: options.name 或 options.pluginInfo"),e.a(2,Promise.reject(new Error("缺少参数: options.name 或 options.pluginInfo")));case 1:if(!Pe(a)){e.n=2;break}return e.a(2,a);case 2:return Y(a)&&(n=a),e.n=3,B({sName:n});case 3:return r=e.v,i=r.data,a=i,e.a(2,a);case 4:return e.p=4,u=e.v,e.a(2,Promise.reject(u))}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}(),ys=function(){var e=b(p().m(function e(t){var n,a,r;return p().w(function(e){for(;;)switch(e.n){case 0:if(!("ltd"===ss.value.authType&&ss.value.authExpirationTime>0)){e.n=1;break}return e.a(2,{isPay:!0,type:"ltd",pluginInfo:Pe(t.pluginInfo)?t.pluginInfo:t.pluginName});case 1:return e.n=2,gs(t);case 2:if(n=e.v,a=n.endtime,r=n.type,!("pro"===ss.value.authType&&ss.value.authExpirationTime>0&&8===r)){e.n=3;break}return e.a(2,{isPay:!0,type:"pro",pluginInfo:n});case 3:if(!(a>=0)){e.n=4;break}return e.a(2,{isPay:!0,type:"plugin",pluginInfo:n});case 4:return e.a(2,{isPay:!1,type:"free",pluginInfo:n})}},e)}));return function(t){return e.apply(this,arguments)}}(),bs=function(){var e=b(p().m(function e(t){var n;return p().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,$c(m(m({},t),{},{name:t.name||(null===(n=t.pluginInfo)||void 0===n?void 0:n.name),type:"i"}));case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ws=i("l",function(){var e=b(p().m(function e(t){var n,a,r,i;return p().w(function(e){for(;;)switch(e.n){case 0:return(t.name||t.softData)&&(t.pluginName=(null==t?void 0:t.name)||"",t.pluginInfo=(null==t?void 0:t.softData)||t.pluginInfo),e.n=1,gs(t);case 1:return n=e.v,e.n=2,ys({pluginInfo:n});case 2:if(a=e.v,a.isPay||![8,12].includes(n.type)){e.n=3;break}return e.a(2,Wc(m({disablePro:8!==n.type,compulsionLtd:8!==n.type,sourceId:t.source},null!=t&&t.plugin?{pluginInfo:n}:{})));case 3:if(n.setup){e.n=4;break}return e.a(2,bs({pluginInfo:n,installNow:(null==t?void 0:t.installNow)||!1}));case 4:if(r=["mysql","pureftpd","nginx","apache","tomcat","memcached","openlitespeed","phpmyadmin"].includes(n.name),i=-1!==n.name.indexOf("php-"),!r&&!i){e.n=5;break}return e.a(2,Kc({pluginInfo:n}));case 5:return e.n=6,ks(n.name);case 6:if(e.v){e.n=7;break}return e.a(2,!1);case 7:sessionStorage.setItem("pluginViewInfo",JSON.stringify(m(m({},n),{},{built:t.pluginInfo?"1":"0"}))),fs.value.visible=!0,fs.value.id=n.name,fs.value.name=n.title,fs.value.callback=(null==t?void 0:t.callback)||null;case 8:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()),ks=function(){var e=b(p().m(function e(t){var n,a;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Ie(t);case 1:if(n=e.v,!(a=n.data).msg||-1===a.msg.indexOf("您无操作此插件的权限")){e.n=2;break}return vs.request(a),e.a(2,Promise.resolve(!1));case 2:return e.a(2,Promise.resolve(!0));case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),_s=(i("cW",b(p().m(function e(){var t;return p().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!ps.value){e.n=1;break}return e.a(2,x().error("当前为企业版，无法解绑账号。"));case 1:return e.n=2,y({icon:"warning-filled",title:"解绑宝塔账号",width:"35rem",content:"解绑宝塔账号后，将无法正常使用面板功能，是否继续操作？"});case 2:return e.n=3,Ae();case 3:t=e.v,ds(),vs.request(t),t.status&&setTimeout(function(){return fe.push({name:"bind-user"})},2e3),e.n=5;break;case 4:e.p=4,e.v;case 5:return e.a(2)}},e,null,[[0,4]])}))),i("d5",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{readonly:!1,theme:"chrome"};return{mode:"ace/mode/nginx",theme:we.value?"ace/theme/clouds_midnight":"ace/theme/".concat(e.theme||"chrome"),wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:e.readonly,fontSize:"12px"}}),i("cT",function(e,t,n,a){return{type:"custom",key:t,rules:(null==n?void 0:n.rules)||{},render:function(r){var i=Re({key:t},r);return Me(Oe,{label:e,prop:i},{default:function(){return[Me(os,Jt({modelValue:r.value[i],"onUpdate:modelValue":function(e){return r.value[i]=e}},(null==n?void 0:n.attrs)||{},{onChange:a}),null)]}})}}}),i("cV",function(e,t,n,a){return{type:"custom",key:t,rules:(null==n?void 0:n.rules)||{},render:function(r){var i,u=Re({key:t},r);return Me(Oe,{label:e,prop:u,"label-width":null==n||null===(i=n.attrs)||void 0===i?void 0:i.labelWidth},{default:function(){return[Me(ls,Jt({modelValue:r.value[u],"onUpdate:modelValue":function(e){return r.value[u]=e}},(null==n?void 0:n.attrs)||{},{onChange:a}),null)]}})}}}),i("h",function(e,t,n,a){try{var r={all:Number(n)||0,exclude_ids:[]};if(t&&Pe(t[0])?r.exclude_ids=t.map(function(e){return e.id}):r.exclude_ids=t,r.exclude_ids=JSON.stringify(r.exclude_ids),a&&a.params&&(r=m(m({},r),a.params)),n)return r;var i=fe.currentRoute.value.meta.icon;return e&&j(e)&&(null==e||e.forEach(function(e){var t="".concat(i,"_list");r[t]||(r[t]=[]),r[t].push(h({id:e.id},(null==a?void 0:a.key)||"name",e[(null==a?void 0:a.key)||"name"]))}),r["".concat(i,"_list")]=JSON.stringify(r["".concat(i,"_list")])),r}catch(u){}}),i("i",function(e){try{var t,n,a,r,i,u,o={data:[],msg:(null==e?void 0:e.msg)||"操作成功！"};if(le("data",e)&&e.data||le("success",e)||le("error",e))le("data",e)&&e.data||(e.data={error:e.error||[],success:e.success||[]}),o.msg=e.msg||"操作完成！",Pe(null===(t=e.data)||void 0===t?void 0:t.error)&&(e.data.error=Object.entries(e.data.error).map(function(e){return{name:e[0],msg:e[1],status:!1}})),Y(null===(n=e.data)||void 0===n?void 0:n.success[0])&&(e.data.success=e.data.success.map(function(e){return{name:e,msg:"操作成功！",status:!0}})),(null===(a=e.data)||void 0===a?void 0:a.error.length)>0&&(e.data.error=e.data.error.map(function(e){return le("status",e)||(e.status=!1),e})),(null===(r=e.data)||void 0===r?void 0:r.success.length)>0&&(e.data.success=e.data.success.map(function(e){return le("status",e)||(e.status=!0),e})),o.data=null===(i=e.data)||void 0===i?void 0:i.error.concat(null===(u=e.data)||void 0===u?void 0:u.success);else j(e)?o.data=e:vs.request(e);return o}catch(l){}}),function(e,t){var n=e.endtime,a=e.type;return n>=0||"ltd"===t||("pro"===t&&12!==a||"free"===t&&12!==a&&8!==a)}),Ss=function(e){var t;if("phpmyadmin"===e.name)return!1;if(!e.versions)return!1;if((null===(t=e.versions)||void 0===t?void 0:t.length)>1){if(e.admin&&!["Redis"].includes(e.title)){var n=e.versions[0],a="".concat(n.m_version,".").concat(n.version),r=e.version!==a;if(e.is_beta){var i=e.versions[e.versions.length-1];if(1===i.beta){var u="".concat(i.m_version,".").concat(i.version);r=e.version!==u&&e.version<u}}if(r&&"mongodb"!==e.name)return!0}else for(var o=0;o<e.versions.length;o++){var l=e.versions[o];if(2===ze(e.version,"".concat(l.m_version,".").concat(l.version)))return!0}}else{var c=e.versions[0],s=!!c.beta;void 0===s&&(s=!1),void 0===e.is_beta&&(e.is_beta=!1);var f="".concat(c.m_version,".").concat(c.version);if(e.version!==f&&s===e.is_beta&&e.version<f)return!0}return!1},xs=function(e){var t=!1;switch(e){case"-1":t="正在安装";break;case"0":t="等待安装";break;case"-2":t="正在更新"}return t}}}})}();
