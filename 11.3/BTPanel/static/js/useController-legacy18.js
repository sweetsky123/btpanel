!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var u=null!=arguments[n]?arguments[n]:{};n%2?e(Object(u),!0).forEach(function(e){r(t,e,u[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(u)):e(Object(u)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(u,e))})}return t}function r(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var u=r.call(e,n||"default");if("object"!=t(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,u,o){var i=r&&r.prototype instanceof s?r:s,f=Object.create(i.prototype);return a(f,"_invoke",function(n,r,u){var a,o,i,s=0,f=u||[],l=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return a=e,o=0,i=t,v.n=n,c}};function p(n,r){for(o=n,i=r,e=0;!l&&s&&!u&&e<f.length;e++){var u,a=f[e],p=v.p,y=a[2];n>3?(u=y===r)&&(i=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=t):a[0]<=p&&((u=n<2&&p<a[1])?(o=0,v.v=r,v.n=a[1]):p<y&&(u=n<3||a[0]>r||r>y)&&(a[4]=n,a[5]=r,v.n=y,o=0))}if(u||n>1)return c;throw l=!0,r}return function(u,f,y){if(s>1)throw TypeError("Generator is already running");for(l&&1===f&&p(f,y),o=f,i=y;(e=o<2?t:i)||!l;){a||(o?o<3?(o>1&&(v.n=-1),p(o,i)):v.n=i:v.v=i);try{if(s=2,a){if(o||(u="next"),e=a[u]){if(!(e=e.call(a,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,o<2&&(o=0)}else 1===o&&(e=a.return)&&e.call(a),o<2&&(i=TypeError("The iterator does not provide a '"+u+"' method"),o=1);a=t}else if((e=(l=v.n<0)?i:n.call(r,v))!==c)break}catch(e){a=t,o=1,i=e}finally{s=1}}return{value:e,done:l}}}(n,u,o),!0),f}var c={};function s(){}function f(){}function l(){}e=Object.getPrototypeOf;var v=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),p=l.prototype=s.prototype=Object.create(v);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,a(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return f.prototype=l,a(p,"constructor",l),a(l,"constructor",f),f.displayName="GeneratorFunction",a(l,o,"GeneratorFunction"),a(p),a(p,o,"Generator"),a(p,r,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:y}})()}function a(t,e,n,r){var u=Object.defineProperty;try{u({},"",{})}catch(t){u=0}a=function(t,e,n,r){function o(e,n){a(t,e,function(t){return this._invoke(e,n,t)})}e?u?u(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},a(t,e,n,r)}function o(t,e,n,r,u,a,o){try{var i=t[a](o),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,u)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(r,u){var a=t.apply(e,n);function i(t){o(a,r,u,i,c,"next",t)}function c(t){o(a,r,u,i,c,"throw",t)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./site-legacy.js?v=1763689792"],function(t,e){"use strict";var r,a,o,c,s,f,l,v,p,y,b,m;return{setters:[function(t){r=t.Q,a=t.u,o=t.M,c=t.p},function(t){s=t.j,f=t.t,l=t.r},function(t){v=t.u,p=t.S},function(t){y=t.delRewriteTel,b=t.getRewriteList,m=t.setRewriteTel}],execute:function(){var e=s("SITE-PSEUDO-STORE",function(){var t=function(){var t=i(u().m(function t(e){return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r({loading:"正在删除伪静态规则，请稍候...",request:y(e),message:!0});case 1:t.v,t.n=3;break;case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"删除失败"});case 3:return t.a(2)}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),e=function(){var t=i(u().m(function t(e){var n,a;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r({request:b(e)});case 1:return n=t.v,a=n.data,t.a(2,{data:a,status:status});case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"获取伪静态列表失败"})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),n=function(){var t=i(u().m(function t(e){var n;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r({loading:"正在设置模板，请稍候...",request:m(e),message:!0});case 1:return n=t.v,t.a(2,{status:n.status,msg:n.msg});case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"设置模板失败"})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}();return{delPseudoStaticEvent:t,getReWriteListEvent:e,setTemplateEvent:n}}),h=v(),w=h.siteType,d=h.siteInfo,g=h.isBindExtranet,j=p(),O=j.getFileEvent,S=j.saveFileEvent,P=a(),E=P.plugin,T=P.getGlobalInfo,_=f(E.value).webserver,k=e(),x=k.delPseudoStaticEvent,G=k.getReWriteListEvent,R=k.setTemplateEvent,D=t("s",l("")),F=l([]),q=t("a",l("")),I=t("o",l([])),L=l(!1),N=l(""),W=t("t",l(!1)),B=(t("c",[{content:"请选择您的应用，若设置伪静态后，网站无法正常访问，请尝试设置回default"},{content:"您可以对伪静态规则进行修改，修改完后保存即可。"}]),t("e",function(t){return!F.value.includes(t)}),t("f",function(){var t=i(u().m(function t(e){return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,c({title:"删除伪静态模板【".concat(e.name,"】"),content:"删除后不可恢复，确定删除吗？",icon:"warning-filled"});case 1:return t.n=2,x(e);case 2:if(!t.v.status){t.n=4;break}return t.n=3,B();case 3:return t.n=4,Q();case 4:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),function(){var t=i(u().m(function t(){var e,n,r;return u().w(function(t){for(;;)switch(t.n){case 0:return e=["php","proxy"].includes(w.value),n={siteName:(e?"":w.value+"_")+d.value.name},W.value=!0,t.n=1,G(n);case 1:r=t.v,M(r.data,e),W.value=!1;case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()),M=function(){var t=i(u().m(function t(e,n){return u().w(function(t){for(;;)switch(t.n){case 0:I.value=e.rewrite,F.value=e.default_list,N.value=e.sitePath+"/.htaccess",q.value=e.rewrite[0]||"","nginx"===_.value&&(N.value="/www/server/panel/vhost/rewrite/".concat((n?"":w.value.replace("nodejs","node")+"_")+d.value.name,".conf"));case 1:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),Q=function(){var t=i(u().m(function t(){var e,n,r=arguments;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{path:N.value},t.p=1,W.value=!0,t.n=2,O(e);case 2:return n=t.v,D.value=n.data.data,W.value=!1,t.a(2,n);case 3:return t.p=3,t.v,W.value=!1,t.a(2,{data:"获取伪静态内容失败"})}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}();t("h",function(t){var e="/www/server/panel/rewrite/".concat(_.value,"/").concat(t,".conf");"0.当前"===t?Q():Q({path:e})}),t("b",i(u().m(function t(){var e,n=arguments;return u().w(function(t){for(;;)switch(t.n){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{data:D.value,encoding:"utf-8",path:"".concat(N.value)},t.n=1,S(e);case 1:t.v.status&&B();case 2:return t.a(2)}},t)}))),t("d",function(){var t=i(u().m(function t(e){var r,a;return u().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,(r=n(n({},e),{},{data:D.value})).name=r.name.trim(),!r.name.includes(" ")){t.n=1;break}return t.a(2,o.error("模板名称不能包含空格"));case 1:if(""!==r.name){t.n=2;break}return t.a(2,o.error("模板名称不能为空"));case 2:if(!I.value.includes(r.name)){t.n=3;break}return t.a(2,o.error("模板名称不能和已有的模板名称重复且不可为空"));case 3:return t.n=4,R(r);case 4:if(!(a=t.v).status){t.n=6;break}return L.value=!1,t.n=5,B();case 5:return t.n=6,Q();case 6:return t.a(2,a.status);case 7:return t.p=7,t.v,t.a(2,!1)}},t,null,[[0,7]])}));return function(e){return t.apply(this,arguments)}}()),t("i",i(u().m(function t(){var e;return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,T();case 1:return["php","proxy","html","phpasync"].includes(w.value)?g.value=!0:g.value=!(null===(e=d.value)||void 0===e||null===(e=e.project_config)||void 0===e||!e.bind_extranet),t.n=2,B();case 2:return t.n=3,Q();case 3:return t.a(2)}},t)})))}}})}();
