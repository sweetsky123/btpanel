var a;import{Q as o,W as e,x as s,b as t,l as r,e as n,$ as i}from"./utils-lib.js?v=1763689792";import{_ as l}from"./index109.js?v=1763689792";import{_ as p}from"./index118.js?v=1763689792";import{C as d,i as m,o as c}from"./index14.js?v=1763689792";import{D as u,E as f}from"./useController3.js?v=1763689792";import{s as w,r as _,o as j,W as x,c as b,v as g,I as h,x as v,y,e as C,C as k,J as D,z as U,D as z,G as I}from"./base-lib.js?v=1763689792";import{u as O}from"./column.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index123.js?v=1763689792";import"./index130.js?v=1763689792";import"./index131.js?v=1763689792";import"./validator.js?v=1763689792";import"./index110.js?v=1763689792";import"./index107.js?v=1763689792";const T=t(),W=d(),{rowData:q}=w(W),A=_(!1),E=_([]),G=_(0),H=j({cron_id:(null==(a=q.value)?void 0:a.id)||0,p:1,rows:10}),J=x([{label:"文件名称",prop:"name",showOverflowTooltip:!0},{label:"备份时间",prop:"addtime"},{label:"备份到",prop:"filename",showOverflowTooltip:!0},{label:"文件大小",render:a=>s(a.size)},O([{onClick:async a=>{try{const o=await f({cron_id:a.cron_id,filename:a.filename});o.status?o.data.is_loacl?window.open("/download?filename="+encodeURIComponent(o.data.path),"_blank","noopener,noreferrer"):window.open(o.data.path,"_blank","noopener,noreferrer"):T.error(o.msg)}catch(o){}},title:"下载"}])]),Q=async()=>{try{await o({loading:A,request:u({...H,cron_id:q.value.id}),data:{data:[Array,E],page:e(G)}})}catch(a){}},R={class:"p-[20px]"},$={key:0},B=b({__name:"index",emits:["close"],setup(a,{emit:o}){const e=o,s=()=>{e("close")};return g(()=>Q()),(a,o)=>{const e=r,t=p,d=l,u=n,f=i,w=h("bt-loading");return v(),y("div",R,[C(d,null,{content:k(()=>[D(C(e,{"max-height":400,column:U(J),data:U(E)},null,8,["column","data"]),[[w,U(A)],[w,"正在加载中，请稍候...","title"]])]),"footer-right":k(()=>[C(t,{total:U(G),page:U(H).p,"onUpdate:page":o[0]||(o[0]=a=>U(H).p=a),row:U(H).rows,"onUpdate:row":o[1]||(o[1]=a=>U(H).rows=a),onChange:U(Q)},null,8,["total","page","row","onChange"])]),_:1}),C(f,{"list-style":"disc",class:"mt-[1rem]"},{default:k(()=>[U(m)?(v(),y("li",$,[C(u,{onClick:o[2]||(o[2]=a=>U(c)(s))},{default:k(()=>[...o[3]||(o[3]=[z("一键跳转至本地备份目录",-1)])]),_:1})])):I("",!0)]),_:1})])}}});export{B as default};
