!function(){function e(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=t(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var l=0,a=function(){};return{s:a,n:function(){return l>=e.length?{done:!0}:{done:!1,value:e[l++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,u=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw u}}}}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){if(e){if("string"==typeof e)return r(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",u=t.toStringTag||"@@toStringTag";function o(t,r,l,u){var o=r&&r.prototype instanceof c?r:c,s=Object.create(o.prototype);return a(s,"_invoke",function(t,r,l){var a,u,o,c=0,s=l||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return a=n,u=0,o=e,d.n=t,i}};function p(t,r){for(u=t,o=r,n=0;!f&&c&&!l&&n<s.length;n++){var l,a=s[n],p=d.p,v=a[2];t>3?(l=v===r)&&(o=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=p&&((l=t<2&&p<a[1])?(u=0,d.v=r,d.n=a[1]):p<v&&(l=t<3||a[0]>r||r>v)&&(a[4]=t,a[5]=r,d.n=v,u=0))}if(l||t>1)return i;throw f=!0,r}return function(l,s,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,v),u=s,o=v;(n=u<2?e:o)||!f;){a||(u?u<3?(u>1&&(d.n=-1),p(u,o)):d.n=o:d.v=o);try{if(c=2,a){if(u||(l="next"),n=a[l]){if(!(n=n.call(a,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,u<2&&(u=0)}else 1===u&&(n=a.return)&&n.call(a),u<2&&(o=TypeError("The iterator does not provide a '"+l+"' method"),u=1);a=e}else if((n=(f=d.n<0)?o:t.call(r,d))!==i)break}catch(n){a=e,u=1,o=n}finally{c=1}}return{value:n,done:f}}}(t,l,u),!0),s}var i={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var d=[][r]?n(n([][r]())):(a(n={},r,function(){return this}),n),p=f.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,a(e,u,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,a(p,"constructor",f),a(f,"constructor",s),s.displayName="GeneratorFunction",a(f,u,"GeneratorFunction"),a(p),a(p,u,"Generator"),a(p,r,function(){return this}),a(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:o,m:v}})()}function a(e,n,t,r){var l=Object.defineProperty;try{l({},"",{})}catch(e){l=0}a=function(e,n,t,r){function u(n,t){a(e,n,function(e){return this._invoke(n,t,e)})}n?l?l(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(u("next",0),u("throw",1),u("return",2))},a(e,n,t,r)}function u(e,n,t,r,l,a,u){try{var o=e[a](u),i=o.value}catch(e){return void t(e)}o.done?n(i):Promise.resolve(i).then(r,l)}function o(e){return function(){var n=this,t=arguments;return new Promise(function(r,l){var a=e.apply(n,t);function o(e){u(a,r,l,o,i,"next",e)}function i(e){u(a,r,l,o,i,"throw",e)}o(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useStore-legacy.js?v=1763689792","./config-legacy.js?v=1763689792","./index-legacy117.js?v=1763689792","./index-legacy109.js?v=1763689792","./index-legacy108.js?v=1763689792"],function(t,r){"use strict";var a,u,i,c,s,f,d,p,v,m,y,b,h,x,w,_,g,S,V,k,E,P,C,T,I,j,K,A,U,R,N,D,O,L,G,F,M,Y,z,q,B,Q,H,X,J,Z,$,W,ee,ne,te,re,le,ae,ue,oe,ie,ce;return{setters:[function(e){a=e.M,u=e.X,i=e.Q,c=e.J,s=e.k,f=e.e,d=e.j,p=e._,v=e.v,m=e.B,y=e.n,b=e.H,h=e.Y,x=e.Z,w=e.f,_=e.$,g=e.l},function(e){S=e.c,V=e.r,k=e.w,E=e.x,P=e.y,C=e.e,T=e.C,I=e.z,j=e.D,K=e.A,A=e.S,U=e.R,R=e.H,N=e.ad,D=e.ab,O=e.V,L=e.o,G=e.I,F=e.J,M=e.B,Y=e.F,z=e.G,q=e.b1,B=e.O,Q=e.ap,H=e.aZ,X=e.an,J=e.ak,Z=e.aj,$=e.aT,W=e.am},function(e){ee=e.g},function(e){ne=e.Q,te=e.R,re=e.S,le=e.T,ae=e.U,ue=e.V},function(e){oe=e.C},function(e){ie=e._},function(e){ce=e._}],execute:function(){var se={class:"p-[2rem]"},fe={class:"text-small flex items-center"},de=S({__name:"index",setup:function(e){var t=ee().refs,r=t.safeConfig,p=t.openPortPopup,v=V(8888),m=V(!1),y=V(!1),b=function(){y.value=!0,v.value=r.value.port},h=function(){var e=o(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i({loading:"正在设置面板端口，请稍候...",request:ne({port:v.value}),message:!0});case 1:c("".concat(location.protocol,"//").concat(location.hostname,":").concat(v.value).concat(location.pathname),2e3);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return k(function(){return p},function(e){e&&(b(),p.value=!1)},{deep:!0}),function(e,t){var l=s,o=R,i=N,c=D,p=f,x=O,w=d;return E(),P("div",null,[C(I(oe),{label:"面板端口"},{value:T(function(){return[C(l,{modelValue:I(r).port,"onUpdate:modelValue":t[0]||(t[0]=function(e){return I(r).port=e}),disabled:"",class:"!w-[26rem]"},null,8,["modelValue"]),C(o,{type:"primary",class:"!ml-12px",onClick:b},{default:T(function(){return n(t[6]||(t[6]=[j("设置",-1)]))}),_:1})]}),desc:T(function(){return n(t[7]||(t[7]=[K("span",null,[K("span",null,"建议端口范围8888 - 65535，"),K("span",{class:"text-danger"},"注意：有安全组的服务器请提前在安全组放行新端口")],-1)]))}),_:1}),C(w,{title:"设置面板端口",modelValue:I(y),"onUpdate:modelValue":t[4]||(t[4]=function(e){return U(y)?y.value=e:null}),area:40,"show-footer":!0,onConfirm:t[5]||(t[5]=function(e){return function(){if(!m.value)return a.error("请勾选同意协议"),!1;var e=Number(v.value);if(!u(e))return a.error("端口格式错误，请重新输入");y.value=!1,h()}()})},{default:T(function(){return[K("div",se,[t[10]||(t[10]=K("ul",{class:"help-list"},[K("li",null,"建议端口范围8888 - 65535，"),K("li",null,"注意：有安全组的服务器请提前在安全组放行新端口"),K("li",null,"如果修改端口导致面板无法访问，请在SSH命令行通过bt命令改回原来的端口")],-1)),C(c,{id:"panelPostFrom",class:"mt-[24px] flex justify-center","label-position":"left",onSubmit:t[2]||(t[2]=A(function(){},["prevent"]))},{default:T(function(){return[C(i,{label:"面板端口"},{default:T(function(){return[C(l,{modelValue:I(v),"onUpdate:modelValue":t[1]||(t[1]=function(e){return U(v)?v.value=e:null}),class:"w-[21rem] edit-input"},null,8,["modelValue"])]}),_:1})]}),_:1}),C(x,{modelValue:I(m),"onUpdate:modelValue":t[3]||(t[3]=function(e){return U(m)?m.value=e:null}),class:"pl-16px"},{default:T(function(){return[K("div",fe,[t[9]||(t[9]=j("我已了解,",-1)),C(p,{href:"https://www.bt.cn/bbs/thread-40037-1-1.html"},{default:T(function(){return n(t[8]||(t[8]=[j("如何放行端口？",-1)]))}),_:1})])]}),_:1},8,["modelValue"])])]}),_:1},8,["modelValue"])])}}}),pe=(t("P",p(de,[["__scopeId","data-v-90716bc7"]])),{class:"p-[2.8rem]"}),ve=S({__name:"index",setup:function(e){var t=ee().refs.safeConfig,r=V(""),a=V(!1),u=function(){r.value=t.value.admin_path,a.value=!0},c=function(){var e=o(l().m(function e(n){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,v(n);case 1:return n=e.v,e.n=2,i({request:te({admin_path:n}),message:!0,loading:"正在设置安全入口，请稍候..."});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}();return function(e,l){var o=s,i=R,f=N,p=D,v=d;return E(),P("div",null,[C(I(oe),{label:"安全入口"},{value:T(function(){return[C(o,{modelValue:I(t).admin_path,"onUpdate:modelValue":l[0]||(l[0]=function(e){return I(t).admin_path=e}),disabled:"",class:"!w-[26rem]"},null,8,["modelValue"]),C(i,{type:"primary",class:"!ml-12px",onClick:u},{default:T(function(){return n(l[5]||(l[5]=[j("设置",-1)]))}),_:1})]}),desc:T(function(){return n(l[6]||(l[6]=[K("span",null,"面板管理入口，设置后只能通过指定安全入口登录面板,如: /www_bt_cn",-1)]))}),_:1}),C(v,{title:"设置面板安全入口",modelValue:I(a),"onUpdate:modelValue":l[2]||(l[2]=function(e){return U(a)?a.value=e:null}),area:40,"show-footer":"",onConfirm:l[3]||(l[3]=function(e){return t.value.admin_path=r.value,c(r.value),void(a.value=!1)}),onSubmit:l[4]||(l[4]=A(function(){},["prevent"]))},{default:T(function(){return[K("div",pe,[C(p,{class:"flex justify-center","label-position":"right"},{default:T(function(){return[C(f,{label:"安全入口"},{default:T(function(){return[C(o,{modelValue:I(r),"onUpdate:modelValue":l[1]||(l[1]=function(e){return U(r)?r.value=e:null}),class:"!w-[24rem]"},null,8,["modelValue"])]}),_:1})]}),_:1})])]}),_:1},8,["modelValue"])])}}}),me=(t("S",p(ve,[["__scopeId","data-v-60dff4cb"]])),{class:"p-[24px]"}),ye={class:"inline-block mr-[32px]"},be={class:"font-bold text-small"},he={class:"inline-block mr-[32px]"},xe={class:"font-bold text-small"},we={class:"inline-block mr-[32px]"},_e={class:"font-bold text-small"},ge={class:"mt-2 flex items-center"},Se={class:"w-[19rem] flex"},Ve={class:"mt-2 flex items-center"},ke={class:"mt-6 sslPanel"},Ee={class:"flex justify-between"},Pe={class:"flex items-center w-full"},Ce={class:"flex mt-[12px]"},Te={class:"flex-1 mr-[20px]"},Ie={class:"flex-1"},je={class:"list-disc text-secondary px-[20px] pt-[12px] leading-8"},Ke={class:"flex items-center"},Ae={class:"pt-[20px] flex flex-col"},Ue={class:"flex items-center mt-[12px] ml-[4px] px-[20px]"},Re={class:"bg-light footer-btn flex items-center justify-end mt-[20px] p-[12px] w-full"},Ne={class:"p-[2rem]"},De={class:"flex items-center justify-center mb-[16px]"},Oe={class:"flex flex-col bg-light p-[20px]"},Le={key:1},Ge={class:"w-[24rem]"},Fe={class:"w-[24rem]"},Me={class:"list-disc ml-[20px] mt-[12px] leading-10 text-secondary"},Ye={class:"flex items-center"},ze={class:"p-[1.5rem]"},qe={class:"max-h-[38rem] overflow-auto"},Be=S({__name:"index",setup:function(t){var u,c=ee().refs,p=c.safeConfig,v=c.noPortConfig,S=c.openSSLPopup,A=V(!1),ne=V(!1),te=V(!1),se=V(!1),fe=V(),de=V(5),pe=V({sllType:1,privateKey:"",certPem:"",checked:!1,email:"",resource:"http"}),ve=V({cert_type:"",domain:"",email:""}),Be=V(!1),Qe=V({certPem:"",download_root:!1,info:{},privateKey:"",rep:!1,root_password:""}),He=[{title:"自签证书",key:1,disabled:!1},{title:"Let's Encrypt",key:2,disabled:!p.value.domain},{title:"其他证书",key:3,disabled:!1}],Xe=V([]),Je=L({index:"",cert_type:"",privateKey:"",certPem:"",email:"",auth_type:""}),Ze=V(!1),$e=[{content:"解析域名需要一定时间来生效,完成所以上所有解析操作后,请等待1分钟后再点击验证按钮"},{content:"可通过CMD命令来手动验证域名解析是否生效:\n\t\t nslookup -q=txt _acme-challenge.".concat(null===(u=p.value.domain)||void 0===u?void 0:u.replace("*.",""))},{content:"若您使用的是宝塔云解析插件,阿里云DNS,DnsPod作为DNS,可使用DNS接口自动解析"}],We=[{label:"解析域名",prop:"domain"},{label:"记录值",showOverflowTooltip:!0,render:function(e){var n="dns"===pe.value.resource?e.auth_value:e.file_path;return C("div",{class:"flex items-center"},[C("div",{class:"truncate w-[15rem]"},[n]),C("span",{class:"svgtofont-icon-copy ml-[4px] text-secondary text-medium w-[1.6rem] cursor-pointer",onClick:function(){return m({value:n})}},null)])}},{label:"类型",render:function(e){return"dns"===pe.value.resource?C("span",null,[e.type]):C("div",{class:"flex items-center"},[C("div",{class:"truncate w-[15rem]"},[e.content]),C("span",{class:"svgtofont-icon-copy ml-[4px] text-secondary text-medium w-[1.6rem] cursor-pointer",onClick:function(){return m({value:e.content})}},null)])}},{label:"必需",prop:"must",width:100}],en=function(){var e=o(l().m(function e(){var n,t,r;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fn();case 1:return n=e.v,e.n=2,re(Je);case 2:t=e.v,r=t.data,null==n||n.close(),a.request(r),r.status&&sn(r),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,Ze.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),nn=function(e){window.open(e,"_blank","noopener,noreferrer")},tn=function(){var n=o(l().m(function n(t,r){var u,o,i,c,s,f,d,p,v;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:if(!r){n.n=1;break}return n.a(2);case 1:return n.p=1,n.n=2,navigator.clipboard.readText();case 2:u=n.v,o=[/-----BEGIN PRIVATE KEY-----[\s\S]*?-----END PRIVATE KEY-----/,/-----BEGIN RSA PRIVATE KEY-----[\s\S]*?-----END RSA PRIVATE KEY-----/,/-----BEGIN EC PRIVATE KEY-----[\s\S]*?-----END EC PRIVATE KEY-----/],i=[/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/,/-----BEGIN CERTIFICATE REQUEST-----[\s\S]*?-----END CERTIFICATE REQUEST-----/],c=e("key"===t?o:i),n.p=3,c.s();case 4:if((s=c.n()).done){n.n=8;break}if(f=s.value,!(d=u.match(f))||!d[0]){n.n=7;break}a.success("已从粘贴板检测到".concat("key"===t?"密钥":"证书")),p=t,n.n="key"===p?5:"cert"===p?6:7;break;case 5:return Qe.value.privateKey=d[0],n.a(3,7);case 6:return Qe.value.certPem=d[0],n.a(3,7);case 7:n.n=4;break;case 8:n.n=10;break;case 9:n.p=9,v=n.v,c.e(v);case 10:return n.p=10,c.f(),n.f(10);case 11:n.n=13;break;case 12:n.p=12,n.v;case 13:return n.a(2)}},n,null,[[3,9,10,11],[1,12]])}));return function(e,t){return n.apply(this,arguments)}}(),rn=function(e){pe.value.sllType=e},ln=function(){var e=o(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return Be.value=!0,e.p=1,e.n=2,i({loading:"正在保存面板证书配置，请稍候...",request:le({privateKey:Qe.value.privateKey,certPem:Qe.value.certPem}),message:!0,success:un});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,Be.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),an=function(){y({title:"证书夹",area:70,compData:{onRefresh:function(e){Qe.value.certPem=(null==e?void 0:e.fullchain)||"",Qe.value.privateKey=(null==e?void 0:e.privkey)||"",Qe.value.info=(null==e?void 0:e.info)||{}}},component:function(){return b(function(){return r.import("./cert-folder-legacy.js?v=1763689792")},void 0,r.meta.url)}})},un=function(){var e=o(l().m(function e(){return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return Be.value=!0,e.p=1,e.n=2,i({loading:"正在获取面板证书配置，请稍候...",request:ae(),success:function(e){var n,t;Qe.value=e.data,pe.value.privateKey=null===(n=e.data)||void 0===n?void 0:n.privateKey,pe.value.certPem=null===(t=e.data)||void 0===t?void 0:t.certPem}});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,Be.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),on=function(){var e=o(l().m(function e(){var n,t;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ue();case 1:n=e.v,t=n.data,ve.value=t,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),cn=function(){var e=o(l().m(function e(n,t,r){var u,i,c,s,f,d,p;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,c={cert_type:n,privateKey:t,certPem:r},0===n&&(delete c.cert_type,c.privateKey,c.certPem),2===pe.value.sllType&&(c.email=pe.value.email,c.auth_type=pe.value.resource),2===pe.value.sllType?setTimeout(o(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,fn();case 1:s=e.v;case 2:return e.a(2)}},e)})),500):f=a.load("正在设置面板证书配置，请稍候..."),e.n=1,re(c);case 1:return p=e.v,d=p.data,null===(u=s)||void 0===u||u.close(),null===(i=f)||void 0===i||i.close(),e.n=2,sn(d,c);case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,Be.value=!1,te.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}));return function(n,t,r){return e.apply(this,arguments)}}(),sn=function(){var e=o(l().m(function e(n,t){var r,u,o,i;return l().w(function(e){for(;;)switch(e.n){case 0:if(!n.status){e.n=2;break}return r=a.load("正在刷新页面，请稍候..."),e.n=1,new Promise(function(e){return setTimeout(e,2e3)});case 1:r.close(),h(),sessionStorage.clear(),window.location.href="".concat("http:"===location.protocol?"https":"http","://").concat(window.location.host).concat(p.value.admin_path),Be.value=!1,e.n=3;break;case 2:u=t.certPem,o=t.cert_type,i=t.privateKey,p.value.panelSSl=!p.value.panelSSl,x(n,"auths")&&(Xe.value=n.auths,Je.index=n.index,Je.certPem=u,Je.cert_type=o,Je.privateKey=i,Je.email=pe.value.email,Je.auth_type=pe.value.resource,Ze.value=!0);case 3:a.request(n);case 4:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),fn=function(){return y({area:[50,25],component:function(){return b(function(){return r.import("./cert-progress-legacy.js?v=1763689792")},void 0,r.meta.url)}})};k(v,function(e){e.value&&(Qe.value.privateKey=v.value.key,Qe.value.certPem=v.value.cert,Qe.value.info.subject=v.value.certInfo.subject,Qe.value.info.issuer=v.value.certInfo.issuer,Qe.value.info.notAfter=v.value.certInfo.notAfter)}),k(S,function(e){e&&(te.value=!0,on(),S.value=!1)},{deep:!0});var dn=function(e){(e?te:ne).value&&(e?te.value=!1:ne.value=!1,p.value.panelSSl=!p.value.panelSSl)},pn=function(e){(e?te:ne).value&&function(e){if(!se.value&&!e)return a.error("请勾选并同意承担风险");e?cn(1,pe.value.privateKey,pe.value.certPem):(cn(0),ne.value=!1)}(e)};return function(e,t){var r=Q,l=R,u=f,o=H,i=s,c=d,v=O,y=ce,b=w,h=$,x=W,S=X,V=N,k=J,L=Z,ee=D,re=g,le=ie,ae=_,ue=G("bt-loading");return E(),P("div",null,[C(I(oe),{label:"面板SSL"},{value:T(function(){return[C(r,{modelValue:I(p).panelSSl,"onUpdate:modelValue":t[0]||(t[0]=function(e){return I(p).panelSSl=e}),onChange:t[1]||(t[1]=function(e){return(n=I(p).panelSSl)?(te.value=!0,on()):ne.value=!0,void(n?(clearInterval(fe.value),fe.value=null,de.value=5):(fe.value&&clearInterval(fe.value),fe.value=setInterval(function(){de.value--,de.value<=0&&(clearInterval(fe.value),fe.value=null,de.value=5)},1e3)));var n})},null,8,["modelValue"]),C(l,{size:"small",class:"!ml-[12px]",onClick:t[2]||(t[2]=function(e){return A.value=!0,void un()})},{default:T(function(){return n(t[27]||(t[27]=[j(" 面板SSL配置 ",-1)]))}),_:1})]}),desc:T(function(){return[t[29]||(t[29]=K("span",null,"为面板设置https协议访问，提升面板访问安全性，",-1)),C(u,{href:"https://www.bt.cn/bbs/thread-105443-1-1.html"},{default:T(function(){return n(t[28]||(t[28]=[j("了解详情",-1)]))}),_:1})]}),_:1}),C(c,{title:"自定义面板证书",modelValue:I(A),"onUpdate:modelValue":t[13]||(t[13]=function(e){return U(A)?A.value=e:null}),area:[70]},{default:T(function(){return[F((E(),P("div",me,[C(o,{type:"success",closable:!1},{default:T(function(){return[K("div",ye,[t[30]||(t[30]=j(" 认证域名：",-1)),K("span",be,M(I(Qe).info.subject),1)]),K("div",he,[t[31]||(t[31]=j(" 证书品牌：",-1)),K("span",xe,M(I(Qe).info.issuer),1)]),K("div",we,[t[32]||(t[32]=j(" 到期时间： ",-1)),K("span",_e,M(I(Qe).info.notAfter),1)])]}),_:1}),t[50]||(t[50]=K("div",{class:"mt-6 flex items-center text-primary font-bold"},[K("span",null,"堡塔APP IOS端使用https证书需要使用非自签证书")],-1)),I(Qe).download_root?(E(),P(Y,{key:0},[K("div",ge,[t[36]||(t[36]=K("span",null,"温馨提示：当前证书为自签证书，需要安装本地根证书，",-1)),C(l,{size:"small",type:"primary",class:"mr-[8px]",onClick:t[3]||(t[3]=function(e){return nn("/download?filename=/www/server/panel/ssl/baota_root.pfx")})},{default:T(function(){return n(t[33]||(t[33]=[j(" 下载根证书 ",-1)]))}),_:1}),I(Qe).root_password?(E(),P(Y,{key:0},[t[35]||(t[35]=K("span",null,"证书密码：",-1)),K("div",Se,[C(i,{modelValue:I(Qe).root_password,"onUpdate:modelValue":t[4]||(t[4]=function(e){return I(Qe).root_password=e}),disabled:!0,placeholder:"密码为空"},null,8,["modelValue"]),C(l,{type:"primary",class:"align-sub",onClick:t[5]||(t[5]=function(e){return function(e){if(!e)return a.error("当前密码为空，无法复制！");m({value:e})}(I(Qe).root_password||"")})},{default:T(function(){return n(t[34]||(t[34]=[j("复制 ",-1)]))}),_:1})])],64)):z("",!0)]),K("div",Ve,[t[38]||(t[38]=K("span",null,[K("span",{class:"text-danger"},"MAC"),j("专用本地根证书：")],-1)),C(l,{size:"small",type:"primary",class:"mr-[8px]",onClick:t[6]||(t[6]=function(e){return nn("/download?filename=/www/server/panel/ssl/baota_root.crt")})},{default:T(function(){return n(t[37]||(t[37]=[j(" 下载根证书 ",-1)]))}),_:1}),t[39]||(t[39]=K("span",null,[j("* 无密码 "),K("span",{class:"text-danger"},"MAC"),j("需要设置信任此证书")],-1))])],64)):z("",!0),K("div",ke,[K("div",Ee,[K("div",Pe,[t[41]||(t[41]=K("span",{class:"mr-4px"},"面板SSL",-1)),C(r,{modelValue:I(p).panelSSl,"onUpdate:modelValue":t[7]||(t[7]=function(e){return I(p).panelSSl=e}),onChange:t[8]||(t[8]=function(e){return n=I(p).panelSSl,void cn(n?1:0,Qe.value.privateKey,Qe.value.certPem);var n})},null,8,["modelValue"]),C(u,{href:"https://www.bt.cn/bbs/thread-105443-1-1.html",class:"ml-[12px]"},{default:T(function(){return n(t[40]||(t[40]=[j(" 如何开启证书？ ",-1)]))}),_:1})]),C(l,{size:"small",class:"float-right",onClick:an},{default:T(function(){return n(t[42]||(t[42]=[j("证书夹",-1)]))}),_:1})]),K("div",Ce,[K("div",Te,[t[43]||(t[43]=K("div",{class:"text-small mb-[8px]"},"密钥(KEY)",-1)),C(i,{class:"text-small",type:"textarea",modelValue:I(Qe).privateKey,"onUpdate:modelValue":t[9]||(t[9]=function(e){return I(Qe).privateKey=e}),rows:13,size:"small",onFocus:t[10]||(t[10]=function(e){return tn("key",I(Qe).privateKey)})},null,8,["modelValue"])]),K("div",Ie,[t[44]||(t[44]=K("div",{class:"text-small mb-[8px]"},"证书(PEM格式)",-1)),C(i,{type:"textarea",modelValue:I(Qe).certPem,"onUpdate:modelValue":t[11]||(t[11]=function(e){return I(Qe).certPem=e}),rows:13,size:"small",onFocus:t[12]||(t[12]=function(e){return tn("cert",I(Qe).certPem)})},null,8,["modelValue"])])]),C(l,{type:"primary",class:"!mt-4",onClick:ln},{default:T(function(){return n(t[45]||(t[45]=[j("保存",-1)]))}),_:1})]),K("ul",je,[K("li",null,[K("div",Ke,[t[47]||(t[47]=j(" 粘贴您的*.key以及*.pem内容，然后保存即可 ",-1)),C(u,{href:"https://www.bt.cn/bbs/thread-105443-1-1.html"},{default:T(function(){return n(t[46]||(t[46]=[j("帮助",-1)]))}),_:1})])]),t[48]||(t[48]=K("li",null,"如果浏览器提示证书链不完整,请检查是否正确拼接PEM证书",-1)),t[49]||(t[49]=K("li",null,"PEM格式证书 = 域名证书.crt + 根证书(root_bundle).crt",-1))])])),[[ue,I(Be)],[ue,"正在获取证书信息，请稍候...","title"]])]}),_:1},8,["modelValue"]),C(c,{title:"关闭面板SSL",area:38,modelValue:I(ne),"onUpdate:modelValue":t[17]||(t[17]=function(e){return U(ne)?ne.value=e:null}),onCancel:t[18]||(t[18]=function(e){return dn(!1)})},{default:T(function(){return[K("div",Ae,[t[53]||(t[53]=K("div",{class:"flex items-center px-[20px]"},[K("i",{class:"svgtofont-el-warning-filled text-warningDark !text-titleLarge pr-4"}),K("span",{class:"text-base leading-10 text-danger"},"关闭SSL后请使用安全登录模式进行登录，否则会存在“重放攻击”风险，是否确定关闭？")],-1)),K("div",Ue,[C(v,{modelValue:I(se),"onUpdate:modelValue":t[14]||(t[14]=function(e){return U(se)?se.value=e:null}),class:"!mr-[4px]"},null,8,["modelValue"]),t[51]||(t[51]=j(" 我已了解风险，确认关闭 ",-1))]),K("div",Re,[C(l,{type:"warning",onClick:t[15]||(t[15]=function(e){return dn(!1)})},{default:T(function(){return n(t[52]||(t[52]=[j("取消",-1)]))}),_:1}),C(l,{type:"danger",onClick:t[16]||(t[16]=function(e){return pn(!1)}),disabled:!!I(fe)||!I(se)},{default:T(function(){return[j("确认关闭SSL "+M(I(fe)?"（剩余".concat(I(de),"秒可操作）"):""),1)]}),_:1},8,["disabled"])])])]}),_:1},8,["modelValue"]),C(c,{title:"面板证书SSL",area:[54],modelValue:I(te),"onUpdate:modelValue":t[23]||(t[23]=function(e){return U(te)?te.value=e:null}),"show-footer":!0,onConfirm:t[24]||(t[24]=function(e){return pn(!0)}),onCancel:t[25]||(t[25]=function(e){return dn(!0)})},{default:T(function(){return[K("div",Ne,[K("div",De,[C(y,{name:"scanning-success",size:"3.2"}),t[54]||(t[54]=K("p",{class:"text-extraLarge ml-[4px]"},"立即【开启SSL证书】保护面板安全",-1))]),K("div",Oe,[t[55]||(t[55]=K("span",null,"访问步骤：",-1)),t[56]||(t[56]=K("ul",{class:"list-decimal ml-[20px] mt-[4px] leading-10"},[K("li",null,"开启https"),K("li",null,"使用https网站访问面板"),K("li",null,"如提醒风险（正常现象）点击【高级】或【详情】如下图"),K("li",null,"【继续访问】或【接受风险并继续】")],-1)),C(b,{src:"/other/bt-https.png",class:"block mt-[4px] h-[18rem] w-[28rem]"})]),C(ee,{ref:"form",model:I(pe),class:"my-6"},{default:T(function(){return[C(V,{label:"类型"},{default:T(function(){return[C(S,{modelValue:I(pe).sllType,"onUpdate:modelValue":t[19]||(t[19]=function(e){return I(pe).sllType=e}),class:"!w-[28rem]",onChange:rn},{default:T(function(){return[(E(),P(Y,null,q(He,function(e){return C(x,{key:e.key,label:e.title,value:e.key,disabled:e.disabled},{default:T(function(){return[2!==e.key||I(p).domain?(E(),P("span",Le,M(e.title),1)):(E(),B(h,{key:0,class:"item",effect:"dark",content:"Let's Encrypt证书类型需要绑定域名才能选择",placement:"top-start"},{default:T(function(){return[K("span",null,M(e.title),1)]}),_:2},1024))]}),_:2},1032,["label","value","disabled"])}),64))]}),_:1},8,["modelValue"])]}),_:1}),2==I(pe).sllType?(E(),B(V,{key:0,label:"验证方法"},{default:T(function(){return[C(L,{modelValue:I(pe).resource,"onUpdate:modelValue":t[20]||(t[20]=function(e){return I(pe).resource=e})},{default:T(function(){return[C(k,{label:"http",value:"http"},{default:T(function(){return n(t[57]||(t[57]=[j("文件验证",-1)]))}),_:1}),C(k,{label:"dns",value:"dns"},{default:T(function(){return n(t[58]||(t[58]=[j("DNS验证",-1)]))}),_:1})]}),_:1},8,["modelValue"])]}),_:1})):z("",!0),3==I(pe).sllType?(E(),B(V,{key:1,label:"密钥(KEY)"},{default:T(function(){return[K("div",Ge,[C(i,{modelValue:I(pe).privateKey,"onUpdate:modelValue":t[21]||(t[21]=function(e){return I(pe).privateKey=e}),type:"textarea",rows:4},null,8,["modelValue"])])]}),_:1})):z("",!0),3==I(pe).sllType?(E(),B(V,{key:2,label:"证书(PEM格式)"},{default:T(function(){return[K("div",Fe,[C(i,{modelValue:I(pe).certPem,"onUpdate:modelValue":t[22]||(t[22]=function(e){return I(pe).certPem=e}),type:"textarea",rows:4},null,8,["modelValue"])])]}),_:1})):z("",!0)]}),_:1},8,["model"]),K("ul",Me,[K("li",null,[K("div",Ye,[t[60]||(t[60]=j("开启后导致面板不能访问，可以点击查看",-1)),C(u,{href:"https://www.bt.cn/bbs/thread-117246-1-1.html"},{default:T(function(){return n(t[59]||(t[59]=[j("解决方法",-1)]))}),_:1})])]),t[61]||(t[61]=K("li",null,"自签证书不被浏览器信任，显示不安全是正常现象",-1))])])]}),_:1},8,["modelValue"]),C(c,{modelValue:I(Ze),"onUpdate:modelValue":t[26]||(t[26]=function(e){return U(Ze)?Ze.value=e:null}),area:70,title:"手动".concat("dns"===I(pe).resource?"解析TXT记录":"创建验证文件")},{default:T(function(){return[K("div",ze,[t[63]||(t[63]=j(" 请按以下列表做TXT解析: ",-1)),C(le,null,{content:T(function(){return[K("div",qe,[(E(!0),P(Y,null,q(I(Xe),function(e,n){return E(),P(Y,null,[e.data.length?(E(),P("div",{key:n},[K("span",null,"验证域名："+M(e.domain),1),C(re,{class:"my-[1rem]",column:We,data:e.data},null,8,["data"])])):z("",!0)],64)}),256))])]}),"footer-right":T(function(){return[C(l,{onClick:en},{default:T(function(){return n(t[62]||(t[62]=[j("验证",-1)]))}),_:1})]}),_:1}),C(ae,{options:$e,listStyle:"disc",class:"ml-[20px]"})])]}),_:1},8,["modelValue","title"])])}}}),Qe=(t("a",p(Be,[["__scopeId","data-v-478ec3ca"]])),{class:"w-[26rem]"});t("_",S({__name:"index",setup:function(e){var t=ee(),r=t.refs.safeConfig,l=t.saveConfig;return function(e,t){var a=s,u=R;return E(),B(I(oe),{label:"绑定域名"},{value:T(function(){return[K("div",Qe,[C(a,{modelValue:I(r).domain,"onUpdate:modelValue":t[0]||(t[0]=function(e){return I(r).domain=e})},null,8,["modelValue"])]),C(u,{type:"primary",class:"!ml-12px",onClick:t[1]||(t[1]=function(e){l("正在绑定域名，请稍候...")})},{default:T(function(){return n(t[2]||(t[2]=[j("保存",-1)]))}),_:1})]}),desc:T(function(){return n(t[3]||(t[3]=[K("span",null,"为面板绑定一个访问域名，",-1),K("span",{class:"text-danger"},"注意：一旦绑定域名，只能通过域名访问面板",-1)]))}),_:1})}}}))}}})}();
