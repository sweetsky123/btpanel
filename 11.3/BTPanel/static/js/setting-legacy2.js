!function(){function t(r){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(r)}function r(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",a=e.toStringTag||"@@toStringTag";function u(e,n,i,a){var u=n&&n.prototype instanceof c?n:c,s=Object.create(u.prototype);return o(s,"_invoke",function(e,n,o){var i,a,u,c=0,s=o||[],p=!1,f={p:0,n:0,v:t,a:y,f:y.bind(t,4),d:function(r,e){return i=r,a=0,u=t,f.n=e,l}};function y(e,n){for(a=e,u=n,r=0;!p&&c&&!o&&r<s.length;r++){var o,i=s[r],y=f.p,v=i[2];e>3?(o=v===n)&&(u=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=y&&((o=e<2&&y<i[1])?(a=0,f.v=n,f.n=i[1]):y<v&&(o=e<3||i[0]>n||n>v)&&(i[4]=e,i[5]=n,f.n=v,a=0))}if(o||e>1)return l;throw p=!0,n}return function(o,s,v){if(c>1)throw TypeError("Generator is already running");for(p&&1===s&&y(s,v),a=s,u=v;(r=a<2?t:u)||!p;){i||(a?a<3?(a>1&&(f.n=-1),y(a,u)):f.n=u:f.v=u);try{if(c=2,i){if(a||(o="next"),r=i[o]){if(!(r=r.call(i,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,a<2&&(a=0)}else 1===a&&(r=i.return)&&r.call(i),a<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((r=(p=f.n<0)?u:e.call(n,f))!==l)break}catch(r){i=t,a=1,u=r}finally{c=1}}return{value:r,done:p}}}(e,i,a),!0),s}var l={};function c(){}function s(){}function p(){}r=Object.getPrototypeOf;var f=[][i]?r(r([][i]())):(o(r={},i,function(){return this}),r),y=p.prototype=c.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t}return s.prototype=p,o(y,"constructor",p),o(p,"constructor",s),s.displayName="GeneratorFunction",o(p,a,"GeneratorFunction"),o(y),o(y,a,"Generator"),o(y,i,function(){return this}),o(y,"toString",function(){return"[object Generator]"}),(n=function(){return{w:u,m:v}})()}function o(t,r,e,n){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}o=function(t,r,e,n){function a(r,e){o(t,r,function(t){return this._invoke(r,e,t)})}r?i?i(t,r,{value:e,enumerable:!n,configurable:!n,writable:!n}):t[r]=e:(a("next",0),a("throw",1),a("return",2))},o(t,r,e,n)}function i(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,n)}return e}function a(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?i(Object(e),!0).forEach(function(r){u(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}function u(r,e,n){return(e=function(r){var e=function(r,e){if("object"!=t(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,e||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(r)}(r,"string");return"symbol"==t(e)?e:e+""}(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function l(t,r,e,n,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void e(t)}u.done?r(l):Promise.resolve(l).then(n,o)}function c(t){return function(){var r=this,e=arguments;return new Promise(function(n,o){var i=t.apply(r,e);function a(t){l(i,n,o,a,u,"next",t)}function u(t){l(i,n,o,a,u,"throw",t)}a(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./form-item-legacy.js?v=1763689792","./useController-legacy14.js?v=1763689792"],function(t,e){"use strict";var o,i,u,l,s,p,f,y,v,b,d,m,g,h,w,_,j,O,P,S,x,D,k,T,E,A,C;return{setters:[function(t){o=t.Q,i=t.aK,u=t.p,l=t.b,s=t.L,p=t.aj,f=t.H},function(t){y=t.proxyTcpAction},function(t){v=t.r,b=t.o,d=t.e,m=t.D,g=t.F,h=t.c,w=t.g,_=t.v,j=t.a8,O=t.x,P=t.O,S=t.z},function(t){x=t.a,D=t.u},function(t){k=t.u},function(t){T=t.i,E=t.b,A=t.g},function(t){C=t.j}],execute:function(){var L=l();k();var z=t("r",v({})),G=v("proxy"),N=function(){var t=c(n().m(function t(){var r,e;return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,y({handle:"port",listen_port:z.value.listen_port,protocol:z.value.protocol});case 1:if((r=t.v).status){t.n=2;break}return L.error(r.msg),t.a(2);case 2:z.value=a(a({},r.data),{},{listen_port:String(r.data.listen_port).replace(" udp","")}),t.n=4;break;case 3:t.p=3,e=t.v,i(e);case 4:return t.a(2)}},t,null,[[0,3]])}));return function(){return t.apply(this,arguments)}}(),q=(t("a",'一行一条配置，请以;结尾，例如：\nproxy_set_header Cookie "cookie_name=cookie_value";\nallow 192.168.1.0/24;\naccess_log /www/wwwlogs/xxx.log;'),t("c",b({config:""})));t("b",[{content:"注意：一行一条配置，请以;结尾"},{content:function(){return d(g,null,[m("案例："),d("br",null,null),m("重定向请求：return 301 /new-page;"),d("br",null,null),m("重写URL：rewrite ^/blog/(.*)$ /$1 break;"),d("br",null,null),m("文件上传限制：client_max_body_size 10M;"),d("br",null,null),m("处理特定http方法："),d("br",null,null),m("limit_except POST "),"{",m(" "),d("br",null,null),m("    allow 192.168.1.0/24;"),d("br",null,null),m("    deny all;"),d("br",null,null),"}",d("br",null,null),m("限制请求速率：limit_rate 100k;"),d("br",null,null)])}},{content:"保存配置前请核对配置是否正确，错误的配置可能会导致反向代理无法正常访问"}]),t("o",function(){var t=c(n().m(function t(r){var e,a;return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,e={handle:"update",protocol:z.value.protocol,listen_port:z.value.listen_port,proxy_pass:z.value.proxy_pass,custom:q.config?q.config:" "},t.n=1,o({loading:"正在保存，请稍后...",request:y(e),message:!0});case 1:t.v.status&&r(),t.n=3;break;case 2:t.p=2,a=t.v,i(a);case 3:return t.a(2)}},t,null,[[0,2]])}));return function(r){return t.apply(this,arguments)}}()),t("i",function(){q.config=z.value.custom||""});v(),v();var F=b({loading:!1,type:"black",white:[],black:[]}),U=function(){var t=c(n().m(function t(r){var e,i;return n().w(function(t){for(;;)switch(t.n){case 0:return e=!!Array.isArray(r),t.n=1,u({title:"".concat(e?"批量删除":"删除").concat("ipWhiteList"===G.value?"白":"黑","名单"),content:"".concat(e?"批量删除选中的ip，是否继续操作？":"删除".concat("ipWhiteList"===G.value?"白":"黑","名单【").concat(r.ip,"】，是否继续操作？"))});case 1:return i=a({listen_port:z.value.listen_port,protocol:z.value.protocol,handle:"ipWhiteList"===G.value?"delete_allow":"delete_deny"},e?{ip:r.map(function(t){return t.ip}).join(" ")}:{ip:r.ip}),"ipWhiteList"===G.value?(i.allow=i.ip,delete i.ip):(i.deny=i.ip,delete i.ip),t.n=2,o({loading:"正在删除，请稍后...",request:y(i),message:!0});case 2:t.v.status&&N();case 3:return t.a(2)}},t)}));return function(r){return t.apply(this,arguments)}}();v([x({key:"ip"}),{label:"IP",prop:"ip",minWidth:120},D([{title:"删除",onClick:function(t){U(t)}}])]);var W=v({types:F.type,address:""});v();var I=t("l",v("")),M=function(){var t=c(n().m(function t(){var r,e;return n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,o({request:y({handle:"log",listen_port:z.value.listen_port,protocol:z.value.protocol}),loading:"正在获取日志内容,请稍后..."});case 1:(r=t.v).status&&(I.value=r.data.data||"暂无日志内容"),t.n=3;break;case 2:t.p=2,e=t.v,i(e);case 3:return t.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),$=h({name:"AddProxyTcp",props:{compData:{type:Object,default:function(){return{}}}},setup:function(t,e){var o,i,a,u,l,p=e.expose,f=s({data:{isEdit:t.compData.isEdit||!1,ps:(null===(o=t.compData.row)||void 0===o?void 0:o.ps)||"",listen_port:(null===(i=t.compData.row)||void 0===i?void 0:i.listen_port)||"",protocol:(null===(a=t.compData.row)||void 0===a?void 0:a.protocol)||"tcp",proxy_pass:(null===(u=t.compData.row)||void 0===u?void 0:u.proxy_pass)||""},options:function(e){return w(function(){return[T("协议","protocol",[{label:"TCP",value:"tcp"},{label:"UDP",value:"udp"},{label:"TCP/UDP",value:"tcp/udp"}],{attrs:{disabled:t.compData.isEdit}}),E("代理端口","listen_port",{attrs:{placeholder:"请输入代理端口，例如：8764",width:"27rem",disabled:t.compData.isEdit},rules:[{required:!0,message:"请输入代理端口",trigger:"blur"},{trigger:["blur"],validator:function(t,r,e){var n=Number(r);Number.isNaN(n)||n<0||n>65535?e(new Error("请输入正确的端口")):e()}}]}),E("代理地址","proxy_pass",{attrs:{placeholder:"请输入代理地址，例如：192.168.100.20:22",width:"27rem"},rules:[{required:!0,message:"请输入代理地址",trigger:"blur"}]}),E("备注","ps",{attrs:{placeholder:"请输入备注",width:"27rem"}})].concat(r(t.compData.isEdit?[A("保存",{attrs:{type:"primary",class:"!ml-[10rem]",onClick:function(){v()}}})]:[]))})},submit:C}),y=f.BtForm,v=f.submit;return p({onConfirm:(l=c(n().m(function t(r){return n().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,v();case 1:t.v&&r("close");case 2:return t.a(2)}},t)})),function(t){return l.apply(this,arguments)})}),function(){return d(y,{class:"p-[2rem]"},null)}}}),B=h({__name:"setting",props:{compData:{type:Object,default:function(){return{}}}},setup:function(t){var r=t,n=p({type:"left-bg-card",value:G,options:[{label:"TCP/UDP代理",name:"proxy",lazy:!0,render:function(){return d($,{compData:{isEdit:!0,row:r.compData.row}},null)}},{label:"自定义配置",name:"custom",lazy:!0,render:function(){return f(function(){return e.import("./setting-custom-legacy.js?v=1763689792")},void 0,e.meta.url)}},{label:"日志",name:"siteLogs",lazy:!0,render:function(){return f(function(){return e.import("./setting-log-legacy.js?v=1763689792")},void 0,e.meta.url)}}]}).BtTabs;_(function(){z.value=r.compData.row});var o=function(t){"siteLogs"!==t?N():M()};return j(function(){I.value="",G.value="proxy",z.value={},q.config="",F.white=[],F.black=[],W.value.address=""}),function(t,r){return O(),P(S(n),{onChange:o})}}}),H=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"}));t("s",H)}}})}();
