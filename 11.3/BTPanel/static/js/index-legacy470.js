!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function a(r,n,o,a){var u=n&&n.prototype instanceof c?n:c,s=Object.create(u.prototype);return l(s,"_invoke",function(r,n,o){var a,u,l,c=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,u=0,l=e,p.n=r,i}};function m(r,n){for(u=r,l=n,t=0;!f&&c&&!o&&t<s.length;t++){var o,a=s[t],m=p.p,v=a[2];r>3?(o=v===n)&&(l=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=r<2&&m<a[1])?(u=0,p.v=n,p.n=a[1]):m<v&&(o=r<3||a[0]>n||n>v)&&(a[4]=r,a[5]=n,p.n=v,u=0))}if(o||r>1)return i;throw f=!0,n}return function(o,s,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,v),u=s,l=v;(t=u<2?e:l)||!f;){a||(u?u<3?(u>1&&(p.n=-1),m(u,l)):p.n=l:p.v=l);try{if(c=2,a){if(u||(o="next"),t=a[o]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,u<2&&(u=0)}else 1===u&&(t=a.return)&&t.call(a),u<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((t=(f=p.n<0)?l:r.call(n,p))!==i)break}catch(t){a=e,u=1,l=t}finally{c=1}}return{value:t,done:f}}}(r,o,a),!0),s}var i={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][n]?t(t([][n]())):(l(t={},n,function(){return this}),t),m=f.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,l(m,"constructor",f),l(f,"constructor",s),s.displayName="GeneratorFunction",l(f,o,"GeneratorFunction"),l(m),l(m,o,"Generator"),l(m,n,function(){return this}),l(m,"toString",function(){return"[object Generator]"}),(u=function(){return{w:a,m:v}})()}function l(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,t,r,n){function a(t,r){l(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(a("next",0),a("throw",1),a("return",2))},l(e,t,r,n)}function i(e,t,r,n,o,a,u){try{var l=e[a](u),i=l.value}catch(e){return void r(e)}l.done?t(i):Promise.resolve(i).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function u(e){i(a,n,o,u,l,"next",e)}function l(e){i(a,n,o,u,l,"throw",e)}u(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy124.js?v=1763689792","./index-legacy137.js?v=1763689792","./useController-legacy6.js?v=1763689792","./site-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792","./index.vue_vue_type_style_index_0_scoped_cdc7f4d3_lang-legacy.js?v=1763689792"],function(e,r){"use strict";var n,a,l,i,s,f,p,m,v,d,y,b,g,h,_,w,j,x,O,S,P,k,T,D,N,C,V,A,z,E,F,I,G,U,H,L,R,J,M,$,q,K,B,Q;return{setters:[function(e){n=e.u,a=e.p,l=e.aK,i=e.aC,s=e.e,f=e.$,p=e.j,m=e.b,v=e.H},function(e){d=e.c,y=e.r,b=e.o,g=e.g,h=e.a0,_=e.v,w=e.I,j=e.J,x=e.z,O=e.x,S=e.y,P=e.F,k=e.e,T=e.R,D=e.O,N=e.C,C=e.D,V=e.G,A=e.A,z=e.b1,E=e.H,F=e.b9,I=e.an,G=e.ad,U=e.ab,H=e.d,L=e.am},function(e){R=e._},function(e){J=e._},function(e){M=e.o},function(e){$=e.serviceAdmin,q=e.getPluginInfo,K=e.getProofFind,B=e.setConfigSite},function(e){Q=e.u},null,null,null,null,null,null],execute:function(){var W=""+new URL("../images/soft_ico/tamper_core_service.png",r.meta.url).href,X={class:"relative h-full"},Y={class:"flex items-center"},Z={key:2,class:"absolute top-0 z-10 h-full w-full bg-lighter text-center flex flex-col items-center justify-center"},ee={class:"p-2rem"};e("default",d({__name:"index",props:{compData:{default:{}}},setup:function(e,d){var te=d.expose,re=H(function(){return v(function(){return r.import("./overview-legacy.js?v=1763689792")},void 0,r.meta.url)}),ne=H(function(){return v(function(){return r.import("./exclude-protect-ext-legacy.js?v=1763689792")},void 0,r.meta.url)}),oe=H(function(){return v(function(){return r.import("./protect-ext-legacy.js?v=1763689792")},void 0,r.meta.url)}),ae=H(function(){return v(function(){return r.import("./advanced-legacy2.js?v=1763689792")},void 0,r.meta.url)}),ue=H(function(){return v(function(){return r.import("./white-list-legacy.js?v=1763689792")},void 0,r.meta.url)}),le=m(),ie=n().payment,ce=Q().siteInfo,se=y(!1),fe=y(),pe=y("pro"===ie.value.authType?"tamper_proof_refactored":"tamper_core"),me=y(!1),ve=y(!1),de=y({}),ye=y(!1),be=y(),ge=y(!1),he=b({sites:[],list:[]}),_e=b({sites:[{required:!0,message:"请选择同步配置",trigger:"blur"}]}),we=[{isHtml:!0,content:'【一键应用】将当前网站已配置的<span class="text-danger">排除目录</span>，<span class="text-danger">防护文件</span>，同步配置到其他网站'}],je=g(function(){var e="tamper_core"==pe.value;return{title:"".concat(e?"堡塔企业级防篡改":"网站防篡改程序","-功能介绍"),height:36,ps:"".concat(e?"内核版防篡改,用于保护站点内容安全，防止黑客非法修改网页、网站挂马等入侵行为，支持Centos/Debian/Ubuntu，注意：不能与其它防篡改软件同时使用":"事件型防篡改，用于保护站点内容安全，防止黑客非法修改网页、网站挂马等入侵行为"),source:e?180:46,desc:["保护站点内容安全","阻止黑客非法修改网页","阻止网站被挂马","阻止其他入侵行为"],isInstall:ve.value,tabImgs:["https://www.bt.cn/Public/new/plugin/introduce/site/".concat(e?"tamper_core_preview":"tamper_proof_preview",".png")],pluginInfo:de.value}}),xe=y("overview"),Oe=y(),Se=y(!0),Pe=[{content:"启动",event:function(){return ke("start")}},{content:"重启",event:function(){return ke("restart")}},{content:"重载配置",event:function(){return ke("reload")}}],ke=function(){var e=c(u().m(function e(t){var r,n,o,i,c,s;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:e.p=0,n="",c=t,e.n="start"===c?1:"restart"===c?2:"reload"===c?3:4;break;case 1:return n="启动",e.a(3,4);case 2:return n="重启",e.a(3,4);case 3:return n="重载",e.a(3,4);case 4:return e.n=5,a({title:"".concat(n,"防篡改服务"),content:"".concat(n,"项目后，当前服务将").concat(n,"运行，是否继续操作？")});case 5:return r=le.load("正在".concat(n,"防篡改服务，请稍候...")),e.n=6,$({action:t});case 6:o=e.v,le.msg({customClass:"bt-message-error-html !max-w-[36rem]",dangerouslyUseHTMLString:!0,message:o.msg,type:o.status?"success":"error",showClose:!o.status,duration:o.status?5e3:0}),o.status&&Te(),e.n=8;break;case 7:e.p=7,s=e.v,l(s);case 8:return e.p=8,null===(i=r)||void 0===i||i.close(),e.f(8);case 9:return e.a(2)}},e,null,[[0,7,8,9]])}));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=c(u().m(function e(){var t,r,n,a,l,i,c;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,se.value=!0,e.n=1,q({sName:"tamper_core"});case 1:return t=e.v,r=t.data,e.n=2,q({sName:"tamper_proof_refactored"});case 2:n=e.v,a=n.data,l=r.setup&&r.endtime>0,i=a.setup&&a.endtime>=0,me.value=!1,ve.value=!0,l?pe.value="tamper_core":i?pe.value="tamper_proof_refactored":(pe.value="pro"===ie.value.authType?"tamper_proof_refactored":"tamper_core","free"===ie.value.authType?ve.value=!1:me.value=!0),me.value=l||i,de.value="tamper_core"==pe.value?r:a,c={type:pe.value,maskLayer:me.value},"tamper_core"==pe.value?(c.isVersion=parseFloat(r.version)>=3.2,c.isNewAlarmVersion=parseFloat(r.version)>=5.6,Oe.value=[{label:"概览",name:"overview",lazy:!0,render:function(){return k(re,{compData:c},null)}},{label:"受保护的文件类型",lazy:!0,name:"protect",render:function(){return k(oe,{compData:o(o({},c),{},{childType:"protect"})},null)}},{label:"白名单",lazy:!0,name:"exclude",render:function(){return k(ue,{compData:o(o({},c),{},{childType:"exclude"})},null)}},{label:"高级设置",name:"advanced",lazy:!0,render:function(){return k(ae,{compData:o(o({},c),{},{childType:"advanced"})},null)}}]):Oe.value=[{label:"概览",name:"overview",lazy:!0,render:function(){return k(re,{compData:c},null)}},{label:"排除目录",name:"exclude",lazy:!0,render:function(){return k(ne,{compData:o(o({},c),{},{childType:"exclude"})},null)}},{label:"保护文件/扩展名",name:"protect",lazy:!0,render:function(){return k(ne,{compData:o(o({},c),{},{childType:"protect"})},null)}}],e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,se.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),De=function(){},Ne=function(){var e;he.list=(null===(e=fe.value)||void 0===e||null===(e=e.getRef())||void 0===e||null===(e=e.overview)||void 0===e?void 0:e.sitesList)||[],ye.value=!0},Ce=function(){var e=c(u().m(function e(){var t,r,n,o,a,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,be.value.validate();case 1:return e.p=1,e.n=2,K({siteName:ce.value.name});case 2:return r=e.v,n=r.data,o={protectExt:JSON.stringify(n.protectExt),excludePath:JSON.stringify(n.excludePath),sites:JSON.stringify(he.sites.map(function(e){var t;return{siteName:e,path:null===(t=he.list)||void 0===t?void 0:t.find(function(t){return t.siteName==e}).path}})),sourceSite:ce.value.path},e.n=3,B(o);case 3:return a=e.v,ye.value=!1,M({title:"批量设置配置",resultData:null===(t=a.data)||void 0===t?void 0:t.map(function(e){return{name:e.ps,status:e.status,msg:e.msg}}),resultTitle:"配置",showMult:!1}),e.a(2);case 4:e.p=4,i=e.v,l(i);case 5:return e.a(2)}},e,null,[[1,4]])}));return function(){return e.apply(this,arguments)}}();return h("kernelModuleStatus",Se),_(Te),te({init:Te}),function(r,n){var o=i,a=E,u=s,l=J,c=F,m=R,v=L,d=I,y=G,b=U,g=f,h=p,_=w("bt-loading");return j((O(),S("div",X,[x(me)?(O(),S(P,{key:0},[k(o,{ref_key:"tamperRef",ref:fe,type:"bg-card",modelValue:x(xe),"onUpdate:modelValue":n[0]||(n[0]=function(e){return T(xe)?xe.value=e:null}),options:x(Oe)},null,8,["modelValue","options"]),"overview"!==x(xe)&&"tamper_proof_refactored"===x(pe)?(O(),D(a,{key:0,type:"primary",class:"absolute top-0 right-0",onClick:Ne},{default:N(function(){return t(n[3]||(n[3]=[C(" 一键应用 ",-1)]))}),_:1})):V("",!0),"tamper_core"==x(pe)&&parseFloat(x(de).version)<3.2?(O(),D(l,{key:1,visible:!0},{content:N(function(){return[A("div",Y,[n[5]||(n[5]=A("span",null,"版本过低无法使用，请点击更新",-1)),k(u,{onClick:De,class:"!font-bold !text-base"},{default:N(function(){return t(n[4]||(n[4]=[C(" 【企业级防篡改】 ",-1)]))}),_:1})])]}),_:1})):"tamper_core"!=x(pe)||x(Se)?V("",!0):(O(),S("div",Z,[n[6]||(n[6]=A("div",{class:"text-secondary text-subtitleLarge mb-1rem flex items-center"},[A("img",{width:"30",src:W}),C(" 【服务已停止】 ")],-1)),n[7]||(n[7]=A("div",{class:"text-tertiary text-base mb-2rem"},"检测到当前服务未开启，请尝试手动启动！否则无法正常使用防篡改插件功能",-1)),k(c,{options:Pe})]))],64)):(O(),D(m,{key:1,data:x(je),class:"p-20px"},null,8,["data"])),k(h,{title:"一键应用",modelValue:x(ye),"onUpdate:modelValue":n[2]||(n[2]=function(e){return T(ye)?ye.value=e:null}),area:50,"show-footer":"",onConfirm:Ce},{default:N(function(){return[A("div",ee,[k(b,{ref_key:"applyFormRef",ref:be,model:x(he),rules:x(_e),disabled:x(ge)},{default:N(function(){return[k(y,{label:"同步配置",prop:"sites"},{default:N(function(){return[k(d,{modelValue:x(he).sites,"onUpdate:modelValue":n[1]||(n[1]=function(e){return x(he).sites=e}),multiple:"","collapse-tags":"",class:"!w-30rem",placeholder:"请选择"},{default:N(function(){return[(O(!0),S(P,null,z(x(he).list,function(t){return O(),S(P,null,[t.siteName!==e.compData.name?(O(),D(v,{key:t.siteName,label:t.siteName,value:t.siteName},null,8,["label","value"])):V("",!0)],64)}),256))]}),_:1},8,["modelValue"])]}),_:1})]}),_:1},8,["model","rules","disabled"]),k(g,{options:we,"list-style":"disc",class:"mt-2rem ml-2rem"})])]}),_:1},8,["modelValue"])])),[[_,x(se)]])}}}))}}})}();
