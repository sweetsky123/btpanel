import{Q as a,l as e}from"./utils-lib.js?v=1763689792";import{c as t,r as s,aE as l,v as n,I as r,x as i,y as m,A as o,e as u,z as c,R as p,G as d,F as b,b1 as f,J as y,ap as v,B as g}from"./base-lib.js?v=1763689792";import{a5 as x,a6 as _,a7 as j,a8 as h}from"./firewall.js?v=1763689792";import{u as q}from"./column.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";const w={class:"p-[2rem]"},D={key:0,class:"flex items-center mb-[2rem]"},A={class:"flex items-center justify-center mb-[1.2rem] bg-lighter border-1 border-base py-[1.2rem]"},I={class:"text-small"},S={class:"font-bold text-large mt-[.8rem]"},k=t({__name:"index",props:{compData:{default:()=>({})}},setup(t){const k=t,P=s(!1),V=s(),z=s(!1),B=s([{title:"封锁的IP总数",value:"total_banned",num:0},{title:"连接失败总数",value:"total_failed",num:0},{title:"当前封锁IP数",value:"currently_banned",num:0},{title:"当前连接失败次数",value:"currently_failed",num:0}]),C=async e=>{P.value=!e,await a({loading:"正在设置防扫描开关，请稍候...",request:x({status:e?1:0}),message:!0}),P.value=e},E=async()=>{"AntiScan"==k.compData.type&&(async()=>{try{const{data:e}=await a({loading:"正在获取防扫描开关状态，请稍候...",request:h()});P.value=Boolean(e.status)}catch(e){}})(),(async()=>{const e=await a({loading:z,request:k.compData.requestFn()});B.value.forEach(a=>{a.num=Number(e.data[a.value])||0}),V.value=e.data.banned_ip_list})()},F=[{label:"IP",prop:"ip",render:a=>l("span",a)},q([{onClick:e=>(async e=>{const t="AntiScan"===k.compData.type;await a({loading:"正在解封,请稍后...",request:t?_({data:JSON.stringify({ip:e})}):j({ip:e}),message:!0}),E()})(e),title:"删除"}])];return n(E),(a,s)=>{const l=v,n=e,x=r("bt-loading");return i(),m("div",w,["AntiScan"==t.compData.type?(i(),m("div",D,[s[1]||(s[1]=o("span",{class:"mr-[.8rem]"},"防扫描开关",-1)),u(l,{modelValue:c(P),"onUpdate:modelValue":s[0]||(s[0]=a=>p(P)?P.value=a:null),size:"small",onChange:C},null,8,["modelValue"])])):d("",!0),o("div",A,[(i(!0),m(b,null,f(c(B),(a,e)=>(i(),m("div",{key:e,class:"flex flex-col items-center mx-[.4rem] p-[.8rem]"},[o("span",I,g(a.title),1),o("span",S,g(a.num||0),1)]))),128))]),y(u(n,{ref:"antiTable",column:F,data:c(V),"max-height":220},null,8,["data"]),[[x,c(z)],[x,"正在加载中，请稍后...","title"]])])}}});export{k as default};
