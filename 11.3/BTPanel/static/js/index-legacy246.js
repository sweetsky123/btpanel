!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach(function(n){l(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function l(n,t,a){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var a=n[Symbol.toPrimitive];if(void 0!==a){var r=a.call(n,t||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[t]=a,n}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function l(t,a,r,l){var u=a&&a.prototype instanceof i?a:i,c=Object.create(u.prototype);return o(c,"_invoke",function(t,a,r){var l,u,o,i=0,c=r||[],p=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(n,t){return l=n,u=0,o=e,d.n=t,s}};function f(t,a){for(u=t,o=a,n=0;!p&&i&&!r&&n<c.length;n++){var r,l=c[n],f=d.p,v=l[2];t>3?(r=v===a)&&(o=l[(u=l[4])?5:(u=3,3)],l[4]=l[5]=e):l[0]<=f&&((r=t<2&&f<l[1])?(u=0,d.v=a,d.n=l[1]):f<v&&(r=t<3||l[0]>a||a>v)&&(l[4]=t,l[5]=a,d.n=v,u=0))}if(r||t>1)return s;throw p=!0,a}return function(r,c,v){if(i>1)throw TypeError("Generator is already running");for(p&&1===c&&f(c,v),u=c,o=v;(n=u<2?e:o)||!p;){l||(u?u<3?(u>1&&(d.n=-1),f(u,o)):d.n=o:d.v=o);try{if(i=2,l){if(u||(r="next"),n=l[r]){if(!(n=n.call(l,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,u<2&&(u=0)}else 1===u&&(n=l.return)&&n.call(l),u<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),u=1);l=e}else if((n=(p=d.n<0)?o:t.call(a,d))!==s)break}catch(n){l=e,u=1,o=n}finally{i=1}}return{value:n,done:p}}}(t,r,l),!0),c}var s={};function i(){}function c(){}function p(){}n=Object.getPrototypeOf;var d=[][a]?n(n([][a]())):(o(n={},a,function(){return this}),n),f=p.prototype=i.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,r,"GeneratorFunction")),e.prototype=Object.create(f),e}return c.prototype=p,o(f,"constructor",p),o(p,"constructor",c),c.displayName="GeneratorFunction",o(p,r,"GeneratorFunction"),o(f),o(f,r,"Generator"),o(f,a,function(){return this}),o(f,"toString",function(){return"[object Generator]"}),(u=function(){return{w:l,m:v}})()}function o(e,n,t,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}o=function(e,n,t,a){function l(n,t){o(e,n,function(e){return this._invoke(n,t,e)})}n?r?r(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[n]=t:(l("next",0),l("throw",1),l("return",2))},o(e,n,t,a)}function s(e,n,t,a,r,l,u){try{var o=e[l](u),s=o.value}catch(e){return void t(e)}o.done?n(s):Promise.resolve(s).then(a,r)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(a,r){var l=e.apply(n,t);function u(e){s(l,a,r,u,o,"next",e)}function o(e){s(l,a,r,u,o,"throw",e)}u(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./hooks-legacy.js?v=1763689792","./index-legacy383.js?v=1763689792","./index-legacy107.js?v=1763689792","./validator-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./useController-legacy5.js?v=1763689792","./useController-legacy6.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./useMethod-legacy5.js?v=1763689792"],function(e,t){"use strict";var a,l,o,s,c,p,d,f,v,m,b,w,h,_,y,g,x,V,k,j,S,P,U,q,C,O,D,I,L,F,H,T,M,A,N,E,R,z,Q,$,G,J,W,B,Y,K,Z,X,ee,ne,te,ae,re,le,ue,oe,se,ie,ce,pe,de,fe,ve,me,be,we,he,_e,ye,ge;return{setters:[function(e){a=e.c,l=e.o,o=e.r,s=e.e,c=e.D,p=e.F,d=e.v,f=e.x,v=e.y,m=e.C,b=e.z,w=e.R,h=e.J,_=e.A,y=e.b1,g=e.B,x=e.G,V=e.O,k=e.aA,j=e.ad,S=e.am,P=e.an,U=e.ab,q=e.c6,C=e.aB,O=e.w,D=e.L,I=e.K,L=e.aE,F=e.aZ},function(e){H=e.u,T=e.aH,M=e.bR,A=e.b6,N=e.p,E=e.Q,R=e.k,z=e.e,Q=e.$,$=e._,G=e.b,J=e.n,W=e.H,B=e.aK,Y=e.j,K=e.f,Z=e.aj},function(e){X=e.checkAutoInstall,ee=e.createAsync,ne=e.getSwooleCorrespondencePhp,te=e.getSystemUserListAsync,ae=e.GetPHPVersion,re=e.checkInstallAsync,le=e.addPhpSite,ue=e.setDeploymentInfo,oe=e.getDeploymentList,se=e.getPluginInfo,ie=e.createWebsiteMultiple,ce=e.getIgnoreAd,pe=e.getFtpMysqlStatus,de=e.ignoreAd},function(e){fe=e.u},function(e){ve=e.default},function(e){me=e._},function(e){be=e.k,we=e.f,he=e.l},function(e){_e=e.u},function(e){ye=e.v},function(e){ge=e.o},null,null,null,null],execute:function(){var xe={class:"flex"},Ve={class:"flex items-center h-3.2rem"},ke=["onClick"],je={key:0,class:"text-small ml-[8px] flex items-center"},Se={key:1,class:"text-small ml-[8px] flex items-center"},Pe={class:"flex items-center"},Ue={class:"flex items-center mb-[4px]"},qe=a({__name:"index",props:{compData:{default:{}}},setup:function(e,t){var a=t.expose,C=e,O=H().panel,D=_e().isRefreshList,I=l({database:!1}),L=o(),F=o(!1),$=o({site_path:"/www/wwwroot",project_cmd:"",install_dependence:0,php_version:"",swoole_version:4,domains:"",sql:!1,project_ps:"",project_port:"",codeing:"utf8mb4",open_proxy:!1,project_proxy_path:"",datauser:"",datapassword:"",run_user:"www",composer_version:""}),G=o(!1),J=o([]),W=o([]);o({});var B=o(!1),Y=o({}),K="/www/wwwroot/",Z=[{content:"当前仅支持nginx服务器使用"},{content:"【swoole版本】开启自动安装依赖时会给对应版本的php安装swoole"},{content:s(p,null,[c("【自动安装项目依赖】只尝试"),s("span",{class:"text-danger"},[c("composer install")]),c("进行安装依赖，最终安装结果请前往 项目-日志-安装依赖日志 进行确认，若安装依赖不成功，项目会"),s("span",{class:"text-danger"},[c("启动失败")])])},{content:"安装依赖不成功，可能和composer版本有关，可尝试切换composer版本"}],ae=function(){var e=i(u().m(function e(n){var t,a,r;return u().w(function(e){for(;;)switch(e.n){case 0:return t="mysql"===n?n:"php-"+(Number(n)/10).toFixed(1),e.n=1,T({sName:t});case 1:a=e.v,r=a.data,be({name:r.name,type:"i",pluginInfo:r});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),re=function(){we({type:"dir",path:$.value.site_path.replace(/\/$/,""),change:function(e){M(e,"string",""),$.value.site_path=e,B.value=!0,le()}})},le=function(){var e=i(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,X({path:$.value.site_path});case 1:n=e.v,$.value.composer_version=n.data?"2.7.3":"",$.value.install_dependence=n.data?1:0,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=i(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.n){case 0:try{(n="php-"+(Number($.value.php_version)/10).toFixed(1))&&he({name:n})}catch(t){}case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=i(u().m(function e(n){var t;return u().w(function(e){for(;;)switch(e.n){case 0:$.value.php_version=n,Y.value=null!==(t=J.value.find(function(e){return e.php_version===n}))&&void 0!==t?t:{};case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),se=function(e){var n,t,a;"string"==typeof e&&($.value.site_path&&$.value.site_path!==K.replace(/\/$/,"")||(B.value=!1),B.value||($.value.site_path=(null===(n=K)||void 0===n?void 0:n.replace(/\/\//g,"/"))+(null===(t=e.split("\n")[0])||void 0===t||null===(t=t.replace(/:/g,"_"))||void 0===t?void 0:t.trim())),$.value.datauser=null===(a=e.split("\n")[0])||void 0===a||null===(a=a.replace(/\W/g,"_"))||void 0===a?void 0:a.substr(0,16),$.value.datapassword=A(16),$.value.project_ps=e.split("\n")[0])},ie=function(e){$.value.composer_version=e,$.value.install_dependence=e?1:0},ce=function(e){var n,t=r(r({},e),{},{sql_user:e.datauser,sql_pwd:e.datapassword,sql_codeing:e.codeing,install_dependence:e.install_dependence,open_proxy:e.open_proxy?1:0,webname:{domain:"",domainlist:[],count:0}}),a=null===(n=e.domains)||void 0===n?void 0:n.split("\n");return a.forEach(function(e,n){0===n?t.webname.domain=e:t.webname.domainlist.push(a[n])}),t.webname.count=t.webname.domainlist.length,t.webname=JSON.stringify(t.webname),delete t.domains,delete t.datauser,delete t.datapassword,delete t.codeing,t},pe=function(){var e=i(u().m(function e(n){var t,a,r;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,L.value.validate();case 1:if(null!==(t=Y.value)&&void 0!==t&&t.swoole_status){e.n=2;break}return e.n=2,N({width:50,title:"提示",isHtml:!0,content:"当前版本PHP-安装扩展未安装swoole，可能导致项目无法启动，是否继续操作？",icon:"warning-filled"});case 2:return a=ce($.value),e.n=3,E({request:ee(a),message:!0});case 3:null!=(r=e.v)&&r.status&&(D.value=!0,n());case 4:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),de=function(){var e=i(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,te();case 1:n=e.v,W.value=n.data,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=i(u().m(function e(n){return u().w(function(e){for(;;)switch(e.n){case 0:return $.value.swoole_version=n,e.n=1,ve();case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ve=function(){var e=i(u().m(function e(){var n,t,a,r,l;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ne({swoole_version:$.value.swoole_version});case 1:(n=e.v).status&&(J.value=n.data,l=null===(t=J.value)||void 0===t?void 0:t.filter(function(e){return e.setup_status}),$.value.php_version=null===(a=l[0])||void 0===a?void 0:a.php_version,Y.value=null!==(r=l[0])&&void 0!==r?r:{}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=i(u().m(function e(){var n,t,a;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,C.compData.getStatus();case 1:n=e.v,I.database=n.mysql,(t=O.value.sitePath)&&($.value.site_path=t,K=null===(a=t+"/")||void 0===a?void 0:a.replace(/\/\//g,"/")),ve(),de();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return d(ge),a({init:ge,onConfirm:pe}),function(e,t){var a=R,r=k,l=j,u=me,o=S,i=P,d=z,C=U,O=Q,D=q;return f(),v("div",null,[s(C,{ref_key:"addSwooleSiteFormRef",ref:L,disabled:b(F),model:b($),rules:b(ye)},{default:m(function(){return[s(l,{label:"绑定域名",prop:"domains"},{default:m(function(){return[s(r,{ref:"popover",placement:"top-start","popper-class":"green-tips-popover !p-0",title:"",width:"400",visible:b(G),"onUpdate:visible":t[2]||(t[2]=function(e){return w(G)?G.value=e:null}),"trigger-keys":[],trigger:"focus"},{reference:m(function(){return[h(s(a,{onInput:se,modelValue:b($).domains,"onUpdate:modelValue":t[0]||(t[0]=function(e){return b($).domains=e}),type:"textarea",width:"52rem",rows:4,resize:"none",onFocus:t[1]||(t[1]=function(e){return G.value=!0}),placeholder:"如需填写多个域名，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},null,8,["modelValue"]),[[D,void 0,"popover"]])]}),default:m(function(){return[t[16]||(t[16]=_("div",{class:"!p-[12px] bg-primary text-white"},[c(" 如需填写多个域名，请换行填写，每行一个域名，默认为80端口 "),_("br"),c(" IP地址格式：192.168.1.199 "),_("br"),c(" 泛解析添加方法 *.domain.com "),_("br"),c(" 如另加端口格式为 www.domain.com:88 ")],-1))]}),_:1},8,["visible"])]}),_:1}),s(l,{label:"项目目录",prop:"site_path"},{default:m(function(){return[s(u,{modelValue:b($).site_path,"onUpdate:modelValue":t[3]||(t[3]=function(e){return b($).site_path=e}),placeholder:"请输入项目目录",icon:"el-folder-opened",width:"52rem",onFocus:t[4]||(t[4]=function(e){return B.value=!0}),onBlur:le,onIconClick:re},null,8,["modelValue"])]}),_:1}),s(l,{label:"swoole版本"},{default:m(function(){return[_("div",xe,[_("div",null,[s(i,{modelValue:b($).swoole_version,"onUpdate:modelValue":t[5]||(t[5]=function(e){return b($).swoole_version=e}),class:"!w-[8rem]",onChange:fe},{default:m(function(){return[s(o,{label:"2.x",value:2}),s(o,{label:"4.x",value:4}),s(o,{label:"5.x",value:5})]}),_:1},8,["modelValue"])]),s(l,{label:"PHP版本",prop:"php_version"},{default:m(function(){var e,a,r;return[_("div",Ve,[s(i,{modelValue:b($).php_version,"onUpdate:modelValue":t[6]||(t[6]=function(e){return b($).php_version=e}),placeholder:"请选择PHP版本",class:"!w-[14rem]",onChange:oe},{default:m(function(){return[(f(!0),v(p,null,y(b(J),function(e,n){return f(),V(o,{key:n,disabled:!e.setup_status,label:"PHP-".concat(e.php_version),value:e.php_version},{default:m(function(){return[_("span",null,"PHP-"+g(e.php_version),1),e.setup_status?x("",!0):(f(),v(p,{key:0},[t[17]||(t[17]=c(" [ ",-1)),_("span",{class:"mx-[4px] bt-link",onClick:function(n){return ae(e.php_version)}},"未安装",8,ke),t[18]||(t[18]=c(" ] ",-1))],64))]}),_:2},1032,["disabled","label","value"])}),128))]}),_:1},8,["modelValue"]),b($).php_version?(f(),v(p,{key:0},[null!==(e=b(Y))&&void 0!==e&&e.swoole_status?null!==(a=b(Y))&&void 0!==a&&a.setup_swoole_isactive||null===(r=b(Y))||void 0===r||!r.swoole_version?x("",!0):(f(),v("span",Se,[c(" 当前php未安装swoole"+g(b($).swoole_version)+"扩展 ",1),s(d,{class:"ml-[4px]",onClick:ue},{default:m(function(){return n(t[21]||(t[21]=[c(">>立即安装",-1)]))}),_:1})])):(f(),v("span",je,[t[20]||(t[20]=c(" 当前php未安装swoole扩展 ",-1)),s(d,{class:"ml-[4px]",onClick:ue},{default:m(function(){return n(t[19]||(t[19]=[c(">>立即安装",-1)]))}),_:1})]))],64)):x("",!0)])]}),_:1})])]}),_:1}),s(l,{label:"数据库"},{default:m(function(){return[_("div",Pe,[s(i,{class:"!w-[16rem]",modelValue:b($).sql,"onUpdate:modelValue":t[7]||(t[7]=function(e){return b($).sql=e}),disabled:!b(I).database},{default:m(function(){return[s(o,{label:"不创建",value:!1}),s(o,{label:"MySQL",value:"MYSQL"})]}),_:1},8,["modelValue","disabled"]),b(I).database?x("",!0):(f(),v("span",{key:0,onClick:t[8]||(t[8]=function(e){return ae("mysql")}),class:"ml-[4px] text-danger cursor-pointer !text-small"},"未安装数据库，点击安装")),b($).sql?(f(),V(i,{key:1,class:"!w-[16rem] ml-[8px]",modelValue:b($).codeing,"onUpdate:modelValue":t[9]||(t[9]=function(e){return b($).codeing=e})},{default:m(function(){return[s(o,{label:"utf8mb4",value:"utf8mb4"}),s(o,{label:"utf8",value:"utf8"}),s(o,{label:"gbk",value:"gbk"}),s(o,{label:"big5",value:"big5"})]}),_:1},8,["modelValue"])):x("",!0)])]}),_:1}),b($).sql?(f(),V(l,{key:0,label:"数据库账号"},{default:m(function(){return[_("div",Ue,[s(l,{prop:"datauser"},{default:m(function(){return[s(a,{placeholder:"创建数据库账号",class:"w-[24rem]",modelValue:b($).datauser,"onUpdate:modelValue":t[10]||(t[10]=function(e){return b($).datauser=e})},null,8,["modelValue"])]}),_:1}),s(l,{label:"密码",class:"!mt-0"},{default:m(function(){return[s(a,{placeholder:"数据库密码",class:"w-[24rem]",modelValue:b($).datapassword,"onUpdate:modelValue":t[11]||(t[11]=function(e){return b($).datapassword=e})},null,8,["modelValue"])]}),_:1})]),t[22]||(t[22]=_("span",{class:"text-tertiary text-small"},"创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库。",-1))]}),_:1})):x("",!0),s(l,{label:"运行用户"},{default:m(function(){return[s(i,{class:"!w-[16rem]",modelValue:b($).run_user,"onUpdate:modelValue":t[12]||(t[12]=function(e){return b($).run_user=e})},{default:m(function(){return[(f(!0),v(p,null,y(b(W),function(e){return f(),V(o,{key:e,label:e,value:e},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"]),t[23]||(t[23]=_("span",{class:"text-tertiary text-small ml-[.4rem]"},"* 无特殊需求请选择www用户",-1))]}),_:1}),s(l,{label:"启动命令",prop:"project_cmd"},{default:m(function(){return[s(a,{modelValue:b($).project_cmd,"onUpdate:modelValue":t[13]||(t[13]=function(e){return b($).project_cmd=e}),width:"52rem",placeholder:"请输入项目的启动命令，例：php serve.php"},null,8,["modelValue"])]}),_:1}),s(l,{label:"依赖安装"},{default:m(function(){return[s(i,{class:"!w-[16rem]",modelValue:b($).composer_version,"onUpdate:modelValue":t[14]||(t[14]=function(e){return b($).composer_version=e}),"empty-values":[null,void 0],onChange:ie},{default:m(function(){return[s(o,{label:"不安装",value:""}),s(o,{label:"用composer2.7.3安装",value:"2.7.3"}),s(o,{label:"用composer1.10.27安装",value:"1.10.27"})]}),_:1},8,["modelValue"])]}),_:1}),s(l,{label:"备注"},{default:m(function(){return[s(a,{modelValue:b($).project_ps,"onUpdate:modelValue":t[15]||(t[15]=function(e){return b($).project_ps=e}),placeholder:"请输入备注,可为空",width:"52rem"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["disabled","model","rules"]),s(O,{class:"mt-2rem pl-1rem",options:Z})])}}}),Ce=$(qe,[["__scopeId","data-v-e02e5c14"]]),Oe={class:"flex"},De={class:"mr-2rem"},Ie={key:1,class:"!text-small"},Le={class:"flex items-center"},Fe={class:"flex items-center mb-[4px]"},He=a({__name:"index",props:{compData:{default:{}}},setup:function(e,t){var a=t.expose,h=e,g=H().panel,q=_e().isRefreshList,C=G(),O=l({database:!1}),D=o(),I=o(!1),L=o({site_path:"/www/wwwroot",project_cmd:"php think run",install_dependence:0,php_version:"",thinkphp_version:!0,domains:"",sql:!1,project_ps:"",project_port:"",codeing:"utf8mb4",open_proxy:!1,project_proxy_path:"",datauser:"",datapassword:"",run_user:"www",composer_version:""}),F=o(!1),$=o([]),J=o([]),W=o({}),B=o(!1),Y="/www/wwwroot/",K=[{content:"当前仅支持nginx服务器使用"},{content:"【fileinfo版本】若未安装，项目会启动失败"},{content:s(p,null,[c("【自动安装项目依赖】只尝试"),s("span",{class:"text-danger"},[c("composer install")]),c("进行安装依赖，最终安装结果请前往 项目-日志-安装依赖日志 进行确认，若安装依赖不成功，项目会"),s("span",{class:"text-danger"},[c("启动失败")])])},{content:"安装依赖不成功，可能和composer版本有关，可尝试切换composer版本"}],Z=function(){we({type:"dir",path:L.value.site_path.replace(/\/$/,""),change:function(e){M(e,"string",""),L.value.site_path=e,B.value=!0,ne()}})},ne=function(){var e=i(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,X({path:L.value.site_path});case 1:n=e.v,L.value.composer_version=n.data?"2.7.3":"",L.value.install_dependence=n.data?1:0,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),le=function(){var e=i(u().m(function e(n){var t,a;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({sName:n});case 1:t=e.v,a=t.data,be({name:a.name,type:"i",pluginInfo:a});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ue=function(){var e=i(u().m(function e(){var n,t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ae();case 1:t=e.v,$.value=t.data.filter(function(e){return"纯静态"!==e.name}),$.value=$.value.reverse(),L.value.php_version=null!==(n=$.value)&&void 0!==n&&n.length?$.value[0].version:"",e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=i(u().m(function e(){var n,t,a,r=arguments;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=r.length>0&&void 0!==r[0]&&r[0],e.p=1,n&&(t=C.load("正在检查安装信息，请稍后...")),e.n=2,re({name:"fileinfo",php_version:L.value.php_version});case 2:a=e.v,n&&t.close(),W.value=a,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),se=function(){var e=i(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.n){case 0:try{n="php-"+(Number(L.value.php_version)/10).toFixed(1),he({name:n})}catch(t){}case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=i(u().m(function e(n){return u().w(function(e){for(;;)switch(e.n){case 0:L.value.php_version=n,oe(!0);case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ce=function(e){var n,t,a;"string"==typeof e&&(L.value.site_path&&L.value.site_path!==Y.replace(/\/$/,"")||(B.value=!1),B.value||(L.value.site_path=(null===(n=Y)||void 0===n?void 0:n.replace(/\/\//g,"/"))+(null===(t=e.split("\n")[0])||void 0===t||null===(t=t.replace(/:/g,"_"))||void 0===t?void 0:t.trim())),L.value.datauser=null===(a=e.split("\n")[0])||void 0===a||null===(a=a.replace(/\W/g,"_"))||void 0===a?void 0:a.substr(0,16),L.value.datapassword=A(16),L.value.project_ps=e.split("\n")[0])},pe=function(e){var n,t=r(r({},e),{},{sql_user:e.datauser,sql_pwd:e.datapassword,sql_codeing:e.codeing,install_dependence:e.install_dependence?1:0,open_proxy:e.open_proxy?1:0,webname:{domain:"",domainlist:[],count:0}}),a=null===(n=e.domains)||void 0===n?void 0:n.split("\n");return a.forEach(function(e,n){0===n?t.webname.domain=e:t.webname.domainlist.push(a[n])}),t.webname.count=t.webname.domainlist.length,t.webname=JSON.stringify(t.webname),delete t.domains,delete t.datauser,delete t.datapassword,delete t.codeing,t},de=function(){var e=i(u().m(function e(n){var t;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,D.value.validate();case 1:if(W.value.status){e.n=2;break}return e.n=2,N({width:50,title:"提示",isHtml:!0,content:"当前版本PHP-安装扩展未安装fileinfo，可能导致项目无法启动，是否继续操作？",icon:"warning-filled"});case 2:return t=pe(L.value),e.n=3,E({loading:I,request:ee(t),message:!0});case 3:e.v.status&&(q.value=!0,n());case 4:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),fe=function(){var e=i(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,te();case 1:n=e.v,J.value=n.data,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=i(u().m(function e(){var n,t,a;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,h.compData.getStatus();case 1:return n=e.v,O.database=n.mysql,(t=g.value.sitePath)&&(L.value.site_path=t,Y=null===(a=t+"/")||void 0===a?void 0:a.replace(/\/\//g,"/")),e.n=2,ue();case 2:return e.n=3,oe();case 3:fe();case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return d(ve),a({init:ve,onConfirm:de}),function(e,t){var a=R,r=k,l=j,u=me,o=S,i=P,d=z,h=U,g=Q;return f(),v("div",null,[s(h,{ref_key:"addThinkphpSiteFormRef",ref:D,disabled:b(I),model:b(L),rules:b(ye)},{default:m(function(){return[s(l,{label:"绑定域名",prop:"domains"},{default:m(function(){return[s(r,{ref:"popover",placement:"top-start","popper-class":"green-tips-popover !p-0",title:"",width:"400",visible:b(F),"onUpdate:visible":t[2]||(t[2]=function(e){return w(F)?F.value=e:null}),"trigger-keys":[],trigger:"focus"},{reference:m(function(){return[s(a,{onInput:ce,modelValue:b(L).domains,"onUpdate:modelValue":t[0]||(t[0]=function(e){return b(L).domains=e}),type:"textarea",width:"52rem",rows:4,resize:"none",onFocus:t[1]||(t[1]=function(e){return F.value=!0}),placeholder:"如需填写多个域名，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},null,8,["modelValue"])]}),default:m(function(){return[t[15]||(t[15]=_("div",{class:"!p-[12px] bg-primary text-white"},[c(" 如需填写多个域名，请换行填写，每行一个域名，默认为80端口 "),_("br"),c(" IP地址格式：192.168.1.199 "),_("br"),c(" 泛解析添加方法 *.domain.com "),_("br"),c(" 如另加端口格式为 www.domain.com:88 ")],-1))]}),_:1},8,["visible"])]}),_:1}),s(l,{label:"项目目录",prop:"site_path"},{default:m(function(){return[s(u,{modelValue:b(L).site_path,"onUpdate:modelValue":t[3]||(t[3]=function(e){return b(L).site_path=e}),placeholder:"请输入项目目录",icon:"el-folder-opened",width:"52rem",onFocus:t[4]||(t[4]=function(e){return B.value=!0}),onIconClick:Z},null,8,["modelValue"])]}),_:1}),s(l,{label:"PHP版本"},{default:m(function(){return[_("div",Oe,[_("div",De,[s(i,{class:"!w-[16rem]",modelValue:b(L).php_version,"onUpdate:modelValue":t[5]||(t[5]=function(e){return b(L).php_version=e}),onChange:ie},{default:m(function(){return[(f(!0),v(p,null,y(b($),function(e){return f(),V(o,{key:e.value,label:e.name,value:e.version},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]),s(l,{label:"fileinfo版本"},{default:m(function(){return[b(W).status?(f(),v("span",Ie,"当前php已安装fileinfo扩展")):(f(),V(d,{key:0,onClick:se},{default:m(function(){return n(t[16]||(t[16]=[c("当前php未安装fileinfo扩展 >>立即安装",-1)]))}),_:1}))]}),_:1})])]}),_:1}),s(l,{label:"数据库"},{default:m(function(){return[_("div",Le,[s(i,{class:"!w-[16rem]",modelValue:b(L).sql,"onUpdate:modelValue":t[6]||(t[6]=function(e){return b(L).sql=e}),disabled:!b(O).database},{default:m(function(){return[s(o,{label:"不创建",value:!1}),s(o,{label:"MySQL",value:"MYSQL"})]}),_:1},8,["modelValue","disabled"]),b(O).database?x("",!0):(f(),v("span",{key:0,onClick:t[7]||(t[7]=function(e){return le("mysql")}),class:"ml-[4px] text-danger cursor-pointer !text-small"},"未安装数据库，点击安装")),b(L).sql?(f(),V(i,{key:1,class:"ml-[8px] !w-[16rem]",modelValue:b(L).codeing,"onUpdate:modelValue":t[8]||(t[8]=function(e){return b(L).codeing=e})},{default:m(function(){return[s(o,{label:"utf8mb4",value:"utf8mb4"}),s(o,{label:"utf8",value:"utf8"}),s(o,{label:"gbk",value:"gbk"}),s(o,{label:"big5",value:"big5"})]}),_:1},8,["modelValue"])):x("",!0)])]}),_:1}),b(L).sql?(f(),V(l,{key:0,label:"数据库账号"},{default:m(function(){return[_("div",Fe,[s(l,{prop:"datauser"},{default:m(function(){return[s(a,{placeholder:"创建数据库账号",class:"w-[24rem]",modelValue:b(L).datauser,"onUpdate:modelValue":t[9]||(t[9]=function(e){return b(L).datauser=e})},null,8,["modelValue"])]}),_:1}),s(l,{label:"密码",class:"!mt-0"},{default:m(function(){return[s(a,{placeholder:"数据库密码",class:"w-[24rem]",modelValue:b(L).datapassword,"onUpdate:modelValue":t[10]||(t[10]=function(e){return b(L).datapassword=e})},null,8,["modelValue"])]}),_:1})]),t[17]||(t[17]=_("span",{class:"text-tertiary text-small"},"创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库。",-1))]}),_:1})):x("",!0),s(l,{label:"运行用户"},{default:m(function(){return[s(i,{class:"!w-[16rem]",modelValue:b(L).run_user,"onUpdate:modelValue":t[11]||(t[11]=function(e){return b(L).run_user=e})},{default:m(function(){return[(f(!0),v(p,null,y(b(J),function(e){return f(),V(o,{key:e,label:e,value:e},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"]),t[18]||(t[18]=_("span",{class:"text-tertiary text-small ml-[.4rem]"},"* 无特殊需求请选择www用户",-1))]}),_:1}),s(l,{label:"启动命令",prop:"project_cmd"},{default:m(function(){return[s(a,{modelValue:b(L).project_cmd,"onUpdate:modelValue":t[12]||(t[12]=function(e){return b(L).project_cmd=e}),width:"52rem",placeholder:"请输入项目的启动命令，例：php serve.php"},null,8,["modelValue"])]}),_:1}),s(l,{label:"依赖安装"},{default:m(function(){return[s(i,{class:"!w-[16rem]",modelValue:b(L).composer_version,"onUpdate:modelValue":t[13]||(t[13]=function(e){return b(L).composer_version=e}),"empty-values":[null,void 0]},{default:m(function(){return[s(o,{label:"不安装",value:""}),s(o,{label:"用composer2.7.3安装",value:"2.7.3"}),s(o,{label:"用1.10.27安装",value:"1.10.27"})]}),_:1},8,["modelValue"])]}),_:1}),s(l,{label:"备注"},{default:m(function(){return[s(a,{modelValue:b(L).project_ps,"onUpdate:modelValue":t[14]||(t[14]=function(e){return b(L).project_ps=e}),placeholder:"请输入备注,可为空",width:"52rem"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["disabled","model","rules"]),s(g,{class:"mt-2rem pl-1rem",options:K})])}}}),Te=$(He,[["__scopeId","data-v-440093de"]]),Me={class:"flex items-center"},Ae={class:"flex items-center mb-[4px]"},Ne=a({__name:"index",props:{compData:{default:{}}},setup:function(e,n){var t=n.expose,a=e,h=H().panel,g=_e().isRefreshList,q=l({database:!1}),C=o(),O=o(!1),D=o({site_path:"/www/wwwroot",project_cmd:"",install_dependence:0,php_version:"",domains:"",sql:!1,project_ps:"",project_port:"",codeing:"utf8mb4",open_proxy:!1,project_proxy_path:"",datauser:"",datapassword:"",run_user:"www",composer_version:""}),I=o(!1),L=o([]),F=o([]),N=o(!1),z="/www/wwwroot/",$=[{content:"当前仅支持nginx服务器使用"},{content:s(p,null,[c("【自动安装项目依赖】只尝试"),s("span",{class:"text-danger"},[c("composer install")]),c("进行安装依赖，最终安装结果请前往 项目-日志-安装依赖日志 进行确认，若安装依赖不成功，项目会"),s("span",{class:"text-danger"},[c("启动失败")])])},{content:"安装依赖不成功，可能和composer版本有关，可尝试切换composer版本"}],G=function(){we({type:"dir",path:D.value.site_path.replace(/\/$/,""),change:function(e){M(e,"string",""),D.value.site_path=e,N.value=!0,J()}})},J=function(){var e=i(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,X({path:D.value.site_path});case 1:n=e.v,D.value.composer_version=n.data?"2.7.3":"",D.value.install_dependence=n.data?1:0,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=i(u().m(function e(n){var t,a;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,T({sName:n});case 1:t=e.v,a=t.data,be({name:a.name,type:"i",pluginInfo:a});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),B=function(){var e=i(u().m(function e(){var n,t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ae();case 1:t=e.v,L.value=t.data.filter(function(e){return"纯静态"!==e.name}),L.value=L.value.reverse(),D.value.php_version=null!==(n=L.value)&&void 0!==n&&n.length?L.value[0].version:"",e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Y=function(e){var n,t,a;"string"==typeof e&&(D.value.site_path&&D.value.site_path!==z.replace(/\/$/,"")||(N.value=!1),N.value||(D.value.site_path=(null===(n=z)||void 0===n?void 0:n.replace(/\/\//g,"/"))+(null===(t=e.split("\n")[0])||void 0===t||null===(t=t.replace(/:/g,"_"))||void 0===t?void 0:t.trim())),D.value.datauser=null===(a=e.split("\n")[0])||void 0===a||null===(a=a.replace(/\W/g,"_"))||void 0===a?void 0:a.substr(0,16),D.value.datapassword=A(16),D.value.project_ps=e.split("\n")[0])},K=function(e){var n,t=r(r({},e),{},{sql_user:e.datauser,sql_pwd:e.datapassword,sql_codeing:e.codeing,install_dependence:e.install_dependence?1:0,open_proxy:e.open_proxy?1:0,webname:{domain:"",domainlist:[],count:0}}),a=null===(n=e.domains)||void 0===n?void 0:n.split("\n");return a.forEach(function(e,n){0===n?t.webname.domain=e:t.webname.domainlist.push(a[n])}),t.webname.count=t.webname.domainlist.length,t.webname=JSON.stringify(t.webname),delete t.domains,delete t.datauser,delete t.datapassword,delete t.codeing,t},Z=function(){var e=i(u().m(function e(n){var t;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,C.value.validate();case 1:return t=K(D.value),e.n=2,E({loading:O,request:ee(t),message:!0});case 2:e.v.status&&(g.value=!0,n());case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ne=function(){var e=i(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,te();case 1:n=e.v,F.value=n.data,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),re=function(){var e=i(u().m(function e(){var n,t,r;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a.compData.getStatus();case 1:n=e.v,q.database=n.mysql,(t=h.value.sitePath)&&(D.value.site_path=t,z=null===(r=t+"/")||void 0===r?void 0:r.replace(/\/\//g,"/")),B(),ne();case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return d(re),t({init:re,onConfirm:Z}),function(e,n){var t=R,a=k,r=j,l=me,u=S,o=P,i=U,d=Q;return f(),v("div",null,[s(i,{ref_key:"addUniversalSiteFormRef",ref:C,disabled:b(O),model:b(D),rules:b(ye)},{default:m(function(){return[s(r,{label:"绑定域名",prop:"domains"},{default:m(function(){return[s(a,{ref:"popover",placement:"top-start","popper-class":"green-tips-popover !p-0",title:"",width:"400",visible:b(I),"onUpdate:visible":n[2]||(n[2]=function(e){return w(I)?I.value=e:null}),"trigger-keys":[],trigger:"focus"},{reference:m(function(){return[s(t,{onInput:Y,modelValue:b(D).domains,"onUpdate:modelValue":n[0]||(n[0]=function(e){return b(D).domains=e}),type:"textarea",width:"52rem",rows:4,resize:"none",onFocus:n[1]||(n[1]=function(e){return I.value=!0}),placeholder:"如需填写多个域名，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},null,8,["modelValue"])]}),default:m(function(){return[n[15]||(n[15]=_("div",{class:"!p-[12px] bg-primary text-white"},[c(" 如需填写多个域名，请换行填写，每行一个域名，默认为80端口 "),_("br"),c(" IP地址格式：192.168.1.199 "),_("br"),c(" 泛解析添加方法 *.domain.com "),_("br"),c(" 如另加端口格式为 www.domain.com:88 ")],-1))]}),_:1},8,["visible"])]}),_:1}),s(r,{label:"项目目录",prop:"site_path"},{default:m(function(){return[s(l,{modelValue:b(D).site_path,"onUpdate:modelValue":n[3]||(n[3]=function(e){return b(D).site_path=e}),placeholder:"请输入项目目录",icon:"el-folder-opened",width:"52rem",onFocus:n[4]||(n[4]=function(e){return N.value=!0}),onIconClick:G},null,8,["modelValue"])]}),_:1}),s(r,{label:"PHP版本"},{default:m(function(){return[s(o,{class:"!w-[16rem]",modelValue:b(D).php_version,"onUpdate:modelValue":n[5]||(n[5]=function(e){return b(D).php_version=e})},{default:m(function(){return[(f(!0),v(p,null,y(b(L),function(e){return f(),V(u,{key:e.value,label:e.name,value:e.version},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1}),s(r,{label:"数据库"},{default:m(function(){return[_("div",Me,[s(o,{class:"!w-[16rem]",modelValue:b(D).sql,"onUpdate:modelValue":n[6]||(n[6]=function(e){return b(D).sql=e}),disabled:!b(q).database},{default:m(function(){return[s(u,{label:"不创建",value:!1}),s(u,{label:"MySQL",value:"MYSQL"})]}),_:1},8,["modelValue","disabled"]),b(q).database?x("",!0):(f(),v("span",{key:0,onClick:n[7]||(n[7]=function(e){return W("mysql")}),class:"ml-[4px] text-danger cursor-pointer !text-small"},"未安装数据库，点击安装")),b(D).sql?(f(),V(o,{key:1,class:"ml-[8px] !w-[16rem]",modelValue:b(D).codeing,"onUpdate:modelValue":n[8]||(n[8]=function(e){return b(D).codeing=e})},{default:m(function(){return[s(u,{label:"utf8mb4",value:"utf8mb4"}),s(u,{label:"utf8",value:"utf8"}),s(u,{label:"gbk",value:"gbk"}),s(u,{label:"big5",value:"big5"})]}),_:1},8,["modelValue"])):x("",!0)])]}),_:1}),b(D).sql?(f(),V(r,{key:0,label:"数据库账号"},{default:m(function(){return[_("div",Ae,[s(r,{prop:"datauser"},{default:m(function(){return[s(t,{placeholder:"创建数据库账号",class:"w-[24rem]",modelValue:b(D).datauser,"onUpdate:modelValue":n[9]||(n[9]=function(e){return b(D).datauser=e})},null,8,["modelValue"])]}),_:1}),s(r,{label:"密码",class:"!mt-0"},{default:m(function(){return[s(t,{placeholder:"数据库密码",class:"w-[24rem]",modelValue:b(D).datapassword,"onUpdate:modelValue":n[10]||(n[10]=function(e){return b(D).datapassword=e})},null,8,["modelValue"])]}),_:1})]),n[16]||(n[16]=_("span",{class:"text-tertiary text-small"},"创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库。",-1))]}),_:1})):x("",!0),s(r,{label:"运行用户"},{default:m(function(){return[s(o,{class:"!w-[16rem]",modelValue:b(D).run_user,"onUpdate:modelValue":n[11]||(n[11]=function(e){return b(D).run_user=e})},{default:m(function(){return[(f(!0),v(p,null,y(b(F),function(e){return f(),V(u,{key:e,label:e,value:e},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"]),n[17]||(n[17]=_("span",{class:"text-tertiary text-small ml-[.4rem]"},"* 无特殊需求请选择www用户",-1))]}),_:1}),s(r,{label:"启动命令",prop:"project_cmd"},{default:m(function(){return[s(t,{modelValue:b(D).project_cmd,"onUpdate:modelValue":n[12]||(n[12]=function(e){return b(D).project_cmd=e}),width:"52rem",placeholder:"请输入项目的启动命令，例：php serve.php"},null,8,["modelValue"])]}),_:1}),s(r,{label:"依赖安装"},{default:m(function(){return[s(o,{class:"!w-[16rem]",modelValue:b(D).composer_version,"onUpdate:modelValue":n[13]||(n[13]=function(e){return b(D).composer_version=e}),"empty-values":[null,void 0]},{default:m(function(){return[s(u,{label:"不安装",value:""}),s(u,{label:"用2.7.3安装",value:"2.7.3"}),s(u,{label:"用1.10.27安装",value:"1.10.27"})]}),_:1},8,["modelValue"])]}),_:1}),s(r,{label:"备注"},{default:m(function(){return[s(t,{modelValue:b(D).project_ps,"onUpdate:modelValue":n[14]||(n[14]=function(e){return b(D).project_ps=e}),placeholder:"请输入备注,可为空",width:"52rem"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["disabled","model","rules"]),s(d,{class:"mt-2rem pl-1rem",options:$})])}}}),Ee=$(Ne,[["__scopeId","data-v-18db48dc"]]),Re={class:"pb-0 w-full"},ze={class:"py-[8px] px-[12px] text-secondary bg-[var(--el-color-success-light-9)] !w-full block flex items-center"},Qe={class:"inline-grid grid-cols-3 text-small gap-x-6 gap-y-2 !w-[60rem] !h-[12.3rem]"},$e=["onClick"],Ge={class:"flex flex-col text-secondary"},Je={class:"w-full flex items-center"},We={class:"flex flex-col items-start leading-9 w-full"},Be={class:"truncate font-bold"},Ye={class:"w-[14rem] truncate"},Ke={class:"flex items-center"},Ze={key:0,class:"svgtofont-el-success-filled text-iconLarge mr-[8px]"},Xe={class:"flex flex-col items-start leading-9 w-full"},en={key:0,class:"truncate font-bold"},nn={class:"flex flex-col bg-light p-[12px] px-[16px] text-small w-full"},tn={class:"flex items-center justify-between"},an={class:"text-tertiary flex items-center text-small p-[12px] px-[16px]"},rn={class:"p-[20px]"},ln={class:"flex items-center mb-[4px]"},un=a({__name:"index",props:{compData:{default:{}}},setup:function(e,a){var r=a.expose,L=e,F=H().panel,T=_e().isRefreshList,M=G(),N=o([]),E=o(0),Q=o(!1),$=o(),Z=o(!1),X=C("popupClose"),ee="/www/wwwroot/",ne=o({menuType:"addDeployment",path:"/www/wwwroot",ftp:!1,type:"PHP",type_id:0,ps:"",port:"",version:"",need_index:0,need_404:0,sql:!1,codeing:"utf8mb4",webname:"",ftp_username:"",ftp_password:"",datauser:"",datapassword:""}),te=o({ftp:!0,ftpData:{username:"",password:""},sql:!0,databaseStatus:!0,sqlData:{username:"",password:""},siteStatus:!1,site:{name:""}}),re=o({isSetup:!1,versions:[],version:"",code:"utf8mb4"}),ie=o({title:"111",version:"222"}),ce=l({datauser:"",datapassword:"",type:"MySQL",code:"utf8mb4",version:""}),pe=o(null),de=o([]),fe=o(!1),ve=o(!1),he=o([]),ge=function(){we({type:"dir",path:ne.value.path,change:function(e){ne.value.path=e}})},xe=function(e){var n,t,a;"string"==typeof e&&(ne.value.ps=e.split("\n")[0],ne.value.path=(null===(n=ee)||void 0===n?void 0:n.replace(/\/\//g,"/"))+(null===(t=e.split("\n")[0])||void 0===t||null===(t=t.replace(/:/g,"_"))||void 0===t?void 0:t.trim()),ne.value.datapassword=A(),ne.value.datauser=null===(a=e.split("\n")[0])||void 0===a?void 0:a.replace(/\W/g,"_").substring(0,16))},Ve=function(){var e=i(u().m(function e(n){var t,a,r;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t="php-"+(Number(n)/10).toFixed(1),e.n=1,se({sName:t});case 1:a=e.v,r=a.data,be({name:t,type:"i",pluginInfo:r}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),ke=function(){var e=i(u().m(function e(){var n,t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,oe();case 1:n=e.v,t=n.data,N.value=t.list,de.value=t.list,pe.value=t,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),je=function(){J({isAsync:!0,title:"模板",area:84,component:function(){return W(function(){return t.import("./other-template-legacy.js?v=1763689792")},void 0,t.meta.url)},compData:{templateData:pe.value,templateId:E.value,selectTemplate:Oe}})},Se=function(){fe.value=!0,ce.datauser=ne.value.datauser,ce.datapassword=ne.value.datapassword,ce.version=re.value.version},Pe=function(){var e=i(u().m(function e(n){var t,a;return u().w(function(e){for(;;)switch(e.n){case 0:t=null==n?void 0:n.php.split(","),a=re.value.versions.filter(function(e){return t.includes(e.version)}).map(function(e){return e.version}),he.value=t.map(function(e){return{name:"PHP-"+e,version:e,status:a.includes(e)}}),re.value.version=a[a.length-1],ce.version=re.value.version,ne.value.version=re.value.version;case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Ue=function(){var e=i(u().m(function e(){var n,t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,L.compData.getStatus();case 1:return n=e.v,e.n=2,ae();case 2:t=e.v,re.value.isSetup=n.mysql,re.value.versions=t.data.filter(function(e){return"00"!==e.version}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=i(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:fe.value=!1,ne.value.datauser=ce.datauser,ne.value.datapassword=ce.datapassword,ne.value.codeing=ce.code,re.value.version=ce.version,re.value.code=ce.code,ne.value.version=re.value.version;case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=i(u().m(function e(n){var a,r,l,o,s,i,c,p;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return(a=Object.assign({},ne.value)).ftp?(te.value.ftpData.username=a.ftp_username,te.value.ftpData.password=a.ftp_password):(delete a.ftp_username,delete a.ftp_password,te.value.ftp=!1),a.sql?(te.value.sqlData.username=a.user,te.value.sqlData.password=a.password):(delete a.datauser,delete a.datapassword,te.value.sql=!1),-1!==a.webname.split("\n")[0].indexOf(":")?a.port=a.webname.split("\n")[0].split(":")[1]:a.port=80,(r=a.webname.split("\n")).shift(),a.webname=JSON.stringify({domain:a.webname.split("\n")[0],domainlist:r,count:r.length}),delete a.menuType,l=null,e.n=1,$.value.validate();case 1:return e.p=1,Q.value=!0,l=M.load("正在部署中..."),e.n=2,le(a);case 2:if(!1!==(o=e.v).data.status){e.n=3;break}return e.a(2,M.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:o.status?"添加网站成功":o.msg,type:o.status?"success":"error",duration:o.status?3e3:0,showClose:!o.status}));case 3:return o.status&&X(),e.n=4,ue({source:1,site_name:JSON.parse(a.webname).domain,php_version:a.version,dname:N.value.find(function(e){return e.id===E.value}).name});case 4:s=e.v,i=s.data,l.close(),o.data.siteStatus&&(te.value.siteStatus=!0,te.value.site.name=JSON.parse(a.webname).domain+i.msg.success_url),a.ftp||a.sql?(te.value.sqlData.username=a.datauser,te.value.sqlData.password=a.datapassword,te.value.databaseStatus=o.data.databaseStatus,J({isAsync:!0,title:"网站添加结果",area:46,component:function(){return W(function(){return t.import("./add-result-legacy.js?v=1763689792")},void 0,t.meta.url)},compData:te.value})):M.msg({customClass:"bt-message-error-html",dangerouslyUseHTMLString:!0,message:o.data.status?"添加网站成功":o.data.msg,type:o.data.status?"success":"error",duration:o.data.status?3e3:0,showClose:!o.data.status}),T.value=!0,e.n=6;break;case 5:e.p=5,p=e.v,B(p);case 6:return e.p=6,null===(c=l)||void 0===c||c.close(),Q.value=!1,e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(n){return e.apply(this,arguments)}}(),Oe=function(e){E.value=e;var n=de.value.findIndex(function(n){return n.id===e});n<5?(ie.value={},Pe(de.value[n])):(ie.value=de.value.find(function(n){return n.id===e}),Pe(ie.value)),ne.value.datauser="sql"+A(6),ne.value.datapassword=A(6,"password")};O(function(){return re.value.version},function(){ne.value.version=re.value.version});var De=function(){var e=i(u().m(function e(){var n,t,a,r;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,ve.value=!0,e.n=1,Ue();case 1:return e.n=2,ke();case 2:return E.value=null===(n=de.value[0])||void 0===n?void 0:n.id,e.n=3,Pe(de.value[0]);case 3:Oe(null===(t=de.value[0])||void 0===t?void 0:t.id),ve.value=!1,ne.value.sql="MySQL",ie.value={},(a=F.value.sitePath)&&(ne.value.path=a,ee=null===(r=a+"/")||void 0===r?void 0:r.replace(/\/\//g,"/")),e.n=5;break;case 4:e.p=4,e.v,ve.value=!1;case 5:return e.a(2)}},e,null,[[0,4]])}));return function(){return e.apply(this,arguments)}}();return d(De),r({init:De,onConfirm:Ce}),function(e,t){var a=z,r=K,l=k,u=j,o=R,i=me,d=U,C=S,O=P,L=Y,F=q;return f(),v("div",Re,[_("span",ze,[t[12]||(t[12]=c(" 快速的部署网站程序，商城、论坛、博客、框架等程序， ",-1)),s(a,{href:"https://www.bt.cn/bbs/thread-33063-1-1.html"},{default:m(function(){return n(t[11]||(t[11]=[c(" 免费入驻平台 ",-1)]))}),_:1})]),s(d,{model:b(ne),rules:b(ye),class:"pt-[12px]",ref_key:"addDeploySiteFormRef",ref:$},{default:m(function(){return[s(u,{label:"模板部署",class:""},{default:m(function(){var e,u;return[_("div",Qe,[(f(!0),v(p,null,y(b(de),function(e,n){return h((f(),v("div",{key:e.id,class:D([{"template-focus":b(E)===e.id},"mb-[4px] w-full flex items-center border border-darker py-[4px] px-[8px] rounded-base cursor-pointer template-hover"]),onClick:function(n){return function(e){E.value=e.id,Oe(e.id)}(e)}},[s(l,{ref_for:!0,ref:"popover",placement:"top-start",width:"200","popper-class":"white-tips-popover",trigger:"hover"},{reference:m(function(){return[_("div",Je,[s(r,{src:"/site_dep_ico/".concat(e.name.toLowerCase(),".png"),class:"w-[3.6rem] mr-[4px]"},null,8,["src"]),_("div",We,[_("span",Be,g(e.title)+" "+g(e.version),1),_("span",Ye,g(e.ps.split("<")[0]),1)])])]}),default:m(function(){return[_("div",Ge,[_("span",null,"名称："+g(e.title),1),_("span",null,"版本："+g(e.version),1),_("span",null,"简介："+g(e.ps.split("<")[0]),1),_("span",null,[t[13]||(t[13]=c("官网：",-1)),s(a,{href:e.official,target:"_blank"},{default:m(function(){return[c(g(e.official),1)]}),_:2},1032,["href"])]),_("span",null,"评价："+g(e.score),1)])]}),_:2},1536)],10,$e)),[[I,n<5]])}),128)),_("div",{onClick:je,class:D([{"justify-center":!b(ie).id,"template-focus":b(ie).id},"mb-[4px] w-full flex items-center border border-darker py-[4px] px-[12px] rounded-base cursor-pointer template-hover"])},[_("div",Ke,[null!==(e=b(ie))&&void 0!==e&&e.id?(f(),v("i",Ze)):x("",!0),_("div",Xe,[null!==(u=b(ie))&&void 0!==u&&u.id?(f(),v("span",en,g(b(ie).title)+" "+g(b(ie).version),1)):x("",!0),s(a,null,{default:m(function(){return n(t[14]||(t[14]=[c("更多模板 >>",-1)]))}),_:1})])])],2)])]}),_:1}),s(u,{label:"域名",prop:"webname"},{default:m(function(){return[s(l,{ref:"popover",placement:"top-start","popper-class":"green-tips-popover !p-0",title:"",width:"400",visible:b(Z),"onUpdate:visible":t[2]||(t[2]=function(e){return w(Z)?Z.value=e:null}),"trigger-keys":[],trigger:"focus"},{reference:m(function(){return[h(s(o,{onInput:xe,modelValue:b(ne).webname,"onUpdate:modelValue":t[0]||(t[0]=function(e){return b(ne).webname=e}),type:"textarea",width:"52rem",rows:4,resize:"none",onFocus:t[1]||(t[1]=function(e){return Z.value=!0}),placeholder:"如需填写多个域名，请换行填写，每行一个域名，默认为80端口\nIP地址格式：192.168.1.199\n泛解析添加方法 *.domain.com\n如另加端口格式为 www.domain.com:88"},null,8,["modelValue"]),[[F,void 0,"popover"]])]}),default:m(function(){return[t[15]||(t[15]=_("div",{class:"!p-[12px] bg-primary text-white"},[c(" 如需填写多个域名，请换行填写，每行一个域名，默认为80端口 "),_("br"),c(" IP地址格式：192.168.1.199 "),_("br"),c(" 泛解析添加方法 *.domain.com "),_("br"),c(" 如另加端口格式为 www.domain.com:88 ")],-1))]}),_:1},8,["visible"])]}),_:1}),s(u,{label:"备注"},{default:m(function(){return[s(o,{modelValue:b(ne).ps,"onUpdate:modelValue":t[3]||(t[3]=function(e){return b(ne).ps=e}),placeholder:"请输入备注,可为空",width:"52rem"},null,8,["modelValue"])]}),_:1}),s(u,{label:"根目录",prop:"path"},{default:m(function(){return[s(i,{modelValue:b(ne).path,"onUpdate:modelValue":t[4]||(t[4]=function(e){return b(ne).path=e}),placeholder:"请输入根目录",icon:"el-folder-opened",width:"52rem",onIconClick:ge},null,8,["modelValue"])]}),_:1}),s(u,{label:"其他配置",prop:"other"},{default:m(function(){return[_("div",nn,[_("div",tn,[_("span",{class:D({"text-danger":!b(re).isSetup})}," 数据库："+g(b(re).isSetup?"MySQL数据库":"数据库未安装！"),3),_("span",null,"编码："+g(b(re).code),1),_("span",null,"账号："+g(b(ne).datauser),1),_("span",null,"密码："+g(b(ne).datapassword),1),_("span",null,"PHP版本："+g(b(re).version),1)])]),_("span",an,[t[17]||(t[17]=c(" 其他配置初始状态为默认选择的配置项，如需修改请点击 ",-1)),s(a,{onClick:Se},{default:m(function(){return n(t[16]||(t[16]=[c("编辑配置",-1)]))}),_:1})])]}),_:1})]}),_:1},8,["model","rules"]),s(L,{title:"编辑配置",modelValue:b(fe),"onUpdate:modelValue":t[10]||(t[10]=function(e){return w(fe)?fe.value=e:null}),showFooter:"",area:62,onConfirm:qe},{default:m(function(){return[_("div",rn,[s(d,{model:b(ce),rules:b(ye),ref:"editFormRef"},{default:m(function(){return[s(u,{label:"数据库"},{default:m(function(){return[s(O,{class:"!w-[16rem]",modelValue:b(ne).sql,"onUpdate:modelValue":t[5]||(t[5]=function(e){return b(ne).sql=e})},{default:m(function(){return[s(C,{label:"MySQL",value:"MySQL"})]}),_:1},8,["modelValue"]),s(O,{modelValue:b(ce).code,"onUpdate:modelValue":t[6]||(t[6]=function(e){return b(ce).code=e}),class:"ml-[8px] !w-[16rem]"},{default:m(function(){return[s(C,{label:"utf8mb4",value:"utf8mb4"}),s(C,{label:"utf8",value:"utf8"}),s(C,{label:"gbk",value:"gbk"}),s(C,{label:"big5",value:"big5"})]}),_:1},8,["modelValue"])]}),_:1}),s(u,{label:"数据库账号"},{default:m(function(){return[_("div",ln,[s(u,{prop:"datauser",label:""},{default:m(function(){return[s(o,{placeholder:"创建数据库账号",modelValue:b(ce).datauser,"onUpdate:modelValue":t[7]||(t[7]=function(e){return b(ce).datauser=e}),width:"17rem"},null,8,["modelValue"])]}),_:1}),s(u,{label:"",class:"!mt-0"},{default:m(function(){return[s(o,{class:"ml-[8px]",width:"16rem",placeholder:"数据库密码",modelValue:b(ce).datapassword,"onUpdate:modelValue":t[8]||(t[8]=function(e){return b(ce).datapassword=e})},null,8,["modelValue"])]}),_:1})]),t[18]||(t[18]=_("span",{class:"text-tertiary text-small"}," 创建站点的同时，为站点创建一个对应的数据库帐户，方便不同站点使用不同数据库。 ",-1))]}),_:1}),s(u,{label:"PHP版本"},{default:m(function(){return[s(O,{class:"!w-[16rem]",modelValue:b(ce).version,"onUpdate:modelValue":t[9]||(t[9]=function(e){return b(ce).version=e})},{default:m(function(){return[(f(!0),v(p,null,y(b(he),function(e){return f(),V(C,{key:e.value,label:e.name,disabled:!e.status,value:e.version},{default:m(function(){return[_("span",null,g(e.name),1),e.status?x("",!0):(f(),v(p,{key:0},[t[20]||(t[20]=c(" [ ",-1)),s(a,{class:"my-4px",onClick:function(n){return Ve(e.version)}},{default:m(function(){return n(t[19]||(t[19]=[c("未安装",-1)]))}),_:1},8,["onClick"]),t[21]||(t[21]=c(" ] ",-1))],64))]}),_:2},1032,["label","disabled","value"])}),128))]}),_:1},8,["modelValue"]),t[22]||(t[22]=_("span",{class:"text-tertiary text-small ml-1rem"},"* 仅显示选中模板所支持的PHP版本",-1))]}),_:1})]}),_:1},8,["model","rules"])])]}),_:1},8,["modelValue"])])}}}),on=$(un,[["__scopeId","data-v-ad60fbfc"]]),sn=a({__name:"index",setup:function(e,n){var t=n.expose,a=_e().isRefreshList,r=G(),l=o("域名|1|0|0|0\n域名|1|0|0|0\n域名|1|0|0|0"),p=C("popupClose"),d=function(e){return e.replace(/\s+/g,"")},m=function(e){return/^([\w\u4e00-\u9fa5\-\*]{1,100}\.){1,10}([\w\u4e00-\u9fa5\-]{1,24}|[\w\u4e00-\u9fa5\-]{1,24}\.[\w\u4e00-\u9fa5\-]{1,24})$/.test(d(e))},h=function(e){return/^([1-9]|[1-9]\d|[1-9]\d{2}|[1-9]\d{3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/.test(e)},y=[{label:"名称",prop:"name"},{label:"FTP",prop:"db_status",render:function(e){return"boolean"==typeof e.db_status?L("span",{class:e.db_status?"text-primary":""},e.db_status?"已配置":"未配置"):L("span",e.db_status)}},{label:"数据库",prop:"ftp_status",render:function(e){return"boolean"==typeof e.ftp_status?L("span",{class:e.ftp_status?"text-primary":""},e.ftp_status?"已配置":"未配置"):L("span",e.ftp_status)}},{label:"结果",render:function(e){return L("span",{class:e.status?"text-primary":"text-danger truncate !w-[9.6rem] inline-block"},e.status?"操作成功":e.msg)}}],g=function(){var e=i(u().m(function e(n){var t,o,s,i,c,f,v,b,w,_,g,x,V,k,j,S,P,U;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:t=l.value.split("\n"),o=[],s=0;case 1:if(!(s<t.length)){e.n=14;break}if(i=t[s],c=i.split("|"),f=[],""!==i){e.n=2;break}return e.a(3,13);case 2:v=0;case 3:if(!(v<c.length)){e.n=12;break}b=s+1,w=d(c[v]),f.push(w),U=v,e.n=0===U?4:1===U?9:11;break;case 4:_=w.split(","),g=0;case 5:if(!(g<_.length)){e.n=8;break}if(x=_[g].trim(),V=x.split(":"),m(V[0])){e.n=6;break}return r.error("第"+b+"行,域名格式错误【"+V[0]+"】"),e.a(2,!1);case 6:if(void 0===V[1]){e.n=7;break}if(h(V[1])){e.n=7;break}return r.error("第"+b+"行,端口格式错误【"+V[1]+"】"),e.a(2,!1);case 7:g++,e.n=5;break;case 8:return e.a(3,11);case 9:if("1"===w){e.n=10;break}if(!(w.indexOf("/")<-1)){e.n=10;break}return r.error("第"+b+"行,站点目录格式错误【"+w+"】"),e.a(2,!1);case 10:return e.a(3,11);case 11:v++,e.n=3;break;case 12:o.push(f.join("|").replace(/\r|\n/,""));case 13:s++,e.n=1;break;case 14:return k=r.load("正在批量添加站点,请稍后..."),e.p=15,e.n=16,ie({create_type:"txt",websites_content:JSON.stringify(o)});case 16:j=e.v,S=j.data,P=[],Object.keys(S.success).forEach(function(e){P.push({name:e,status:!0,ftp_status:S.success[e].ftp_status,db_status:S.success[e].db_status})}),Object.keys(S.error).forEach(function(e){P.push({name:e,status:!1,ftp_status:"--",db_status:"--",msg:S.error[e]})}),a.value=!0,p(),ge({resultColumn:y,resultData:P,resultTitle:"添加站点"},46),l.value="域名|1|0|0|0\n域名|1|0|0|0\n域名|1|0|0|0",e.n=18;break;case 17:e.p=17,e.v;case 18:return e.p=18,k.close(),e.f(18);case 19:return e.a(2)}},e,null,[[15,17,18,19]])}));return function(n){return e.apply(this,arguments)}}();return t({onConfirm:g}),function(e,n){var t=R;return f(),v("div",null,[s(t,{type:"textarea",modelValue:b(l),"onUpdate:modelValue":n[0]||(n[0]=function(e){return w(l)?l.value=e:null}),rows:12,resize:"none",width:"72rem"},null,8,["modelValue"]),n[1]||(n[1]=_("ul",{class:"mt-[8px] text-tertiary leading-10"},[_("li",null,"批量格式：域名|根目录|FTP|数据库|PHP版本"),_("li",null,"域名参数：多个域名用 , 分割"),_("li",null,"根目录参数：填写 1 为自动创建，或输入具体目录"),_("li",null,"FTP参数：填写 1 为自动创建，填写 0 为不创建"),_("li",null,"数据库参数：填写 1 为自动创建，填写 0 为不创建"),_("li",null,"PHP版本参数：填写 0 为静态，或输入PHP具体版本号列如：56、71、74"),_("li",null,"如需添加多个站点，请换行填写"),_("li",null,[c(" 案例： "),_("span",null,"bt.cn,test.cn:8081|/www/wwwroot/bt.cn|1|1|56")])],-1))])}}}),cn={class:"p-[20px]"},pn=["innerHTML"];e("default",a({__name:"index",props:{compData:{default:{}}},setup:function(e,n){var t=n.expose,a=e,r=H().plugin,l=o(!0),c=o(!1),p=o(""),w=G(),h=o("addSiteDefault");o(null);var y=C("popupSetFooter",function(e){}),g=function(){var e=i(u().m(function e(){var n,t,a;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe();case 1:return n=e.v,t=n.data,e.a(2,{ftp:t.ftp,mysql:t.mysql});case 2:e.p=2,a=e.v,B(a);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),k=a.compData,j=k.typeList,S=k.refresh,P=Z({type:"card",value:h,options:[{label:"传统项目",name:"addSiteDefault",lazy:!0,render:s(ve,{compData:{getStatus:g,typeList:j,refresh:S}},null)},{label:"swoole异步项目",name:"addSwoole",lazy:!0,render:s(Ce,{compData:{getStatus:g}},null)},{label:"thinkphp异步项目",name:"addThinkphp",lazy:!0,render:s(Te,{compData:{getStatus:g}},null)},{label:"异步项目",name:"addUniversal",lazy:!0,render:s(Ee,{compData:{getStatus:g}},null)},{label:"一键部署",name:"addDeployment",lazy:!0,render:s(on,{compData:{getStatus:g}},null)},{label:"批量创建",name:"batchAddSite",lazy:!0,render:s(sn,null,null)}]}),U=P.BtTabs,q=P.tabsRefs;O(function(){return h.value},function(e){y("addPack"!==e)});var D=function(){var e=i(u().m(function e(n){return u().w(function(e){for(;;)switch(e.n){case 0:if("addSwoole"!==h.value&&"addThinkphp"!==h.value&&"addUniversal"!==h.value||"nginx"===r.value.webserver){e.n=1;break}return e.a(2,w.error("当前仅支持nginx服务器使用"));case 1:q()[h.value].onConfirm(n);case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),I=function(){var e=i(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:de(),l.value=!0;case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();return d(i(u().m(function e(){var n,t,a,r;return u().w(function(e){for(;;)switch(e.n){case 0:return"addPack"===h.value&&y(!1),e.n=1,ce();case 1:return n=e.v,t=n.data,a=!(null!=t&&t.status),p.value=(null==t?void 0:t.msg)||"",e.n=2,fe({});case 2:r=e.v,l.value=!a&&!r;case 3:return e.a(2)}},e)}))),t({onConfirm:D,getStatus:g}),function(e,n){var t=F;return f(),v("div",cn,[b(l)?x("",!0):(f(),V(t,{key:0,class:"!mb-[1rem]",type:"info",closable:b(c),"close-text":"不再显示","show-icon":"",onMouseenter:n[0]||(n[0]=function(e){return c.value=!0}),onMouseleave:n[1]||(n[1]=function(e){return c.value=!1}),onClose:I},{default:m(function(){return[_("div",{class:"flex text-small",innerHTML:b(p)},null,8,pn)]}),_:1},8,["closable"])),s(b(U))])}}}))}}})}();
