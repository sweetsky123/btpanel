import{_ as t}from"./index109.js?v=1763689792";import{aQ as e,n as a,H as s,Q as i,kq as l,kr as n,p as o,ap as r,iZ as m,b3 as c,an as p}from"./utils-lib.js?v=1763689792";import{b as u,k as d,N as f}from"./useMethods.js?v=1763689792";import{c as _,a as h,u as v}from"./column.js?v=1763689792";import{o as b,r as y,c as g,w as k,a8 as j,x as C,y as R,e as w,C as x,A as E,z as O}from"./base-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";const{refs:{isRefreshTemplateList:T}}=e(),q=b({isRefresh:!0}),B=y([]),D=[{active:!0,label:"添加",type:"button",onClick:()=>{d(()=>T.value=!0)}},{label:"需求反馈",type:"link",class:"ml-[2rem]",onClick:()=>{f()}}],A=(t={})=>a({component:()=>s(()=>import("./add-compose-template.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),title:"编辑Yaml模板",area:64,btn:"保存",compData:{row:t}}),L=async t=>{a({component:()=>s(()=>import("./pull-mirror-select-dialog.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),compData:t,title:"拉取镜像",btn:"确定",area:60})},N=async t=>{try{const e=await i({request:l({id:t.id})});if(e.status)return void a({component:()=>s(()=>import("./clear-confirm.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),title:"删除编排模板【".concat(t.name,"】"),area:55,btn:!0,compData:{confirmMsg:"检测到编排模板【".concat(t.name,"】，已应用到容器编排【").concat(e.msg,"】"),confirmCheck:"删除编排模板【".concat(t.name,"】以及已应用的容器编排和创建的容器"),confirmEvent:async(e,a)=>{i({request:n({data:JSON.stringify({template_id:t.id,status:e})}),message:!0,success:()=>{a(),T.value=!0}})}}});await o({type:"calc",title:"删除编排模板【".concat(t.name,"】"),content:"删除编排模板【".concat(t.name,"】，是否继续操作？")}),i({request:n({data:JSON.stringify({template_id:t.id})}),message:!0,success:()=>T.value=!0})}catch(e){}},P=r([{label:"删除模板",value:"delete",event:async(t,e,a,s)=>{const{label:i,value:l}=s,o=async(t,e)=>{const{id:a}=t;if("delete"===l)return await n({data:JSON.stringify({template_id:a})})};await t({title:"批量".concat(i,"编排模板"),content:"批量".concat(i,"已选的编排模板，是否继续操作！"),column:[{label:"模板名",prop:"name"},_()],onConfirm:async()=>(await e(o),T.value=!0,!1)})}}]),I={class:"relative p-2rem"},J={class:"flex items-center"},S=g({__name:"index",setup(a){const{refs:{isRefreshTemplateList:s}}=e(),{BtOperation:l}=c({options:D});k(()=>s.value,t=>{s.value&&(q.isRefresh=!0,f())});const{BtTable:n,BtPage:o,BtBatch:r,BtColumn:d,refresh:f,param:_}=p({request:t=>(async t=>{if(T.value=!1,!q.isRefresh)return{data:u({limit:t.limit,list:B.value,p:t.p})||[],total:B.value.length};q.isRefresh=!1;const e=await i({request:m(),data:Array});return B.value=e,{data:u({limit:t.limit,list:B.value,p:t.p})||[],total:B.value.length}})(t),columns:[h(),{label:"模板名",prop:"name",minWidth:100},{label:"路径",prop:"path",minWidth:100,isCustom:!0},{label:"备注",prop:"remark",minWidth:100,isCustom:!0},v([{onClick:A,title:"编辑"},{onClick:L,width:60,title:"拉取镜像"},{onClick:N,title:"删除"}])],extension:[P]});return j(()=>{q.isRefresh=!0,B.value=[]}),(e,a)=>{const s=t;return C(),R("div",I,[w(s,null,{"header-left":x(()=>[E("div",J,[w(O(l))])]),"header-right":x(()=>[w(O(d))]),content:x(()=>[w(O(n),{key:"templateTable","max-height":410})]),"footer-left":x(()=>[w(O(r))]),"footer-right":x(()=>[w(O(o))]),popup:x(()=>[...a[0]||(a[0]=[])]),_:1})])}}});export{S as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
