!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function a(n,o,u,i){var a=o&&o.prototype instanceof c?o:c,f=Object.create(a.prototype);return r(f,"_invoke",function(n,r,o){var u,i,a,c=0,f=o||[],s=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return u=e,i=0,a=t,p.n=n,l}};function d(n,r){for(i=n,a=r,e=0;!s&&c&&!o&&e<f.length;e++){var o,u=f[e],d=p.p,y=u[2];n>3?(o=y===r)&&(a=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=t):u[0]<=d&&((o=n<2&&d<u[1])?(i=0,p.v=r,p.n=u[1]):d<y&&(o=n<3||u[0]>r||r>y)&&(u[4]=n,u[5]=r,p.n=y,i=0))}if(o||n>1)return l;throw s=!0,r}return function(o,f,y){if(c>1)throw TypeError("Generator is already running");for(s&&1===f&&d(f,y),i=f,a=y;(e=i<2?t:a)||!s;){u||(i?i<3?(i>1&&(p.n=-1),d(i,a)):p.n=a:p.v=a);try{if(c=2,u){if(i||(o="next"),e=u[o]){if(!(e=e.call(u,a)))throw TypeError("iterator result is not an object");if(!e.done)return e;a=e.value,i<2&&(i=0)}else 1===i&&(e=u.return)&&e.call(u),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);u=t}else if((e=(s=p.n<0)?a:n.call(r,p))!==l)break}catch(e){u=t,i=1,a=e}finally{c=1}}return{value:e,done:s}}}(n,u,i),!0),f}var l={};function c(){}function f(){}function s(){}e=Object.getPrototypeOf;var p=[][u]?e(e([][u]())):(r(e={},u,function(){return this}),e),d=s.prototype=c.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,r(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return f.prototype=s,r(d,"constructor",s),r(s,"constructor",f),f.displayName="GeneratorFunction",r(s,i,"GeneratorFunction"),r(d),r(d,i,"Generator"),r(d,u,function(){return this}),r(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:a,m:y}})()}function r(t,e,n,o){var u=Object.defineProperty;try{u({},"",{})}catch(t){u=0}r=function(t,e,n,o){function i(e,n){r(t,e,function(t){return this._invoke(e,n,t)})}e?u?u(t,e,{value:n,enumerable:!o,configurable:!o,writable:!o}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},r(t,e,n,o)}function o(t,e,n,r,o,u,i){try{var a=t[u](i),l=a.value}catch(t){return void n(t)}a.done?e(l):Promise.resolve(l).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,u){var i=t.apply(e,n);function a(t){o(i,r,u,a,l,"next",t)}function l(t){o(i,r,u,a,l,"throw",t)}a(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792"],function(t,r){"use strict";var o,i,a,l,c,f,s,p,d,y,m,v,b,g,h,w,_,j,S,k,O,V,P,q,F,T,x,G,C,E;return{setters:[function(t){o=t.Q,i=t.M,a=t.l,l=t.k,c=t.j},function(t){f=t.c,s=t.r,p=t.e,d=t.D,y=t.v,m=t.I,v=t.x,b=t.y,g=t.J,h=t.z,w=t.C,_=t.A,j=t.R,S=t.F,k=t.b1,O=t.ad,V=t.an,P=t.ab,q=t.O,F=t.am},function(t){T=t.getFtpInfo,x=t.getMysqlInfo,G=t.getSiteInfo,C=t.modifyFtpLink,E=t.modifyMysqlLink},null],execute:function(){var r={class:"p-[20px]"};t("default",f({__name:"associated-database",setup:function(t){var f=s(!1),I=s(!1),U=s([]),A=s([]),M=s({pid:"",site:"",id:"",type:"mysql"}),L=s([{prop:"rname",label:"站点名称"},{label:"FTP用户",render:function(t){return p("div",null,[t.ftp.name?t.ftp.name:"--"," ",p("span",{class:"cursor-pointer bt-link",onClick:function(){N(t,"ftp")}},[d("切换")])])}},{label:"数据库",render:function(t){return p("div",null,[t.mysql.name?t.mysql.name:"--"," ",p("span",{class:"cursor-pointer bt-link",onClick:function(){N(t,"mysql")}},[d("切换")])])}}]),N=function(){var t=u(n().m(function t(e,r){return n().w(function(t){for(;;)switch(t.n){case 0:return M.value.type=r,t.n=1,o({request:"ftp"===r?T():x(),data:[Array,U]});case 1:M.value.pid=e[r].id,M.value.site=e.rname,f.value=!0,M.value.id=e.id;case 2:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}(),R=function(){var t=u(n().m(function t(){return n().w(function(t){for(;;)switch(t.n){case 0:o({loading:I,request:G(),data:[Array,A]});case 1:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),z=function(){var t=u(n().m(function t(){var r,u,a,l,c,s;return n().w(function(t){for(;;)switch(t.n){case 0:if(r=M.value,u=r.type,a=r.pid,l=r.id,a){t.n=1;break}return i.error("请选择用户"),t.a(2);case 1:return c=e(e({},"ftp"===u?"ftp_id":"sql_id",a),"pid",l),s="ftp"===u?C:E,t.n=2,o({loading:"正在切换，请稍后...",request:s(c),message:!0});case 2:t.v.status&&(f.value=!1,R());case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();return y(R),function(t,e){var n=a,o=l,u=O,i=F,s=V,d=P,y=c,T=m("bt-loading");return v(),b("div",null,[g(p(n,{"max-height":"560",column:h(L),data:h(A)},null,8,["column","data"]),[[T,h(I)]]),p(y,{title:"ftp"===h(M).type?"切换FTP用户":"切换数据库用户",modelValue:h(f),"onUpdate:modelValue":e[3]||(e[3]=function(t){return j(f)?f.value=t:null}),area:42,"show-footer":"",onConfirm:z},{default:w(function(){return[_("div",r,[p(d,{modelValue:h(M),"onUpdate:modelValue":e[2]||(e[2]=function(t){return j(M)?M.value=t:null}),ref:"websiteFormRef"},{default:w(function(){return[p(u,{label:"站点名称"},{default:w(function(){return[p(o,{class:"!w-[24rem]",disabled:"",modelValue:h(M).site,"onUpdate:modelValue":e[0]||(e[0]=function(t){return h(M).site=t})},null,8,["modelValue"])]}),_:1}),p(u,{label:"ftp"===h(M).type?"ftp用户":"数据库用户",prop:"pid"},{default:w(function(){return[p(s,{modelValue:h(M).pid,"onUpdate:modelValue":e[1]||(e[1]=function(t){return h(M).pid=t}),class:"!w-[24rem]"},{default:w(function(){return[(v(!0),b(S,null,k(h(U),function(t,e){return v(),q(i,{key:e,label:t.name,value:t.id},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1},8,["label"])]}),_:1},8,["modelValue"])])]}),_:1},8,["title","modelValue"])])}}}))}}})}();
