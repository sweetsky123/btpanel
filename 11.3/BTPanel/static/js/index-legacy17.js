!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,u="function"==typeof Symbol?Symbol:{},a=u.iterator||"@@iterator",o=u.toStringTag||"@@toStringTag";function i(n,u,a,o){var i=u&&u.prototype instanceof c?u:c,s=Object.create(i.prototype);return t(s,"_invoke",function(n,t,u){var a,o,i,c=0,s=u||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(n,t){return a=n,o=0,i=e,p.n=t,l}};function d(n,t){for(o=n,i=t,r=0;!f&&c&&!u&&r<s.length;r++){var u,a=s[r],d=p.p,m=a[2];n>3?(u=m===t)&&(i=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=d&&((u=n<2&&d<a[1])?(o=0,p.v=t,p.n=a[1]):d<m&&(u=n<3||a[0]>t||t>m)&&(a[4]=n,a[5]=t,p.n=m,o=0))}if(u||n>1)return l;throw f=!0,t}return function(u,s,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),o=s,i=m;(r=o<2?e:i)||!f;){a||(o?o<3?(o>1&&(p.n=-1),d(o,i)):p.n=i:p.v=i);try{if(c=2,a){if(o||(u="next"),r=a[u]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,o<2&&(o=0)}else 1===o&&(r=a.return)&&r.call(a),o<2&&(i=TypeError("The iterator does not provide a '"+u+"' method"),o=1);a=e}else if((r=(f=p.n<0)?i:n.call(t,p))!==l)break}catch(r){a=e,o=1,i=r}finally{c=1}}return{value:r,done:f}}}(n,a,o),!0),s}var l={};function c(){}function s(){}function f(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(t(r={},a,function(){return this}),r),d=f.prototype=c.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,t(d,"constructor",f),t(f,"constructor",s),s.displayName="GeneratorFunction",t(f,o,"GeneratorFunction"),t(d),t(d,o,"Generator"),t(d,a,function(){return this}),t(d,"toString",function(){return"[object Generator]"}),(n=function(){return{w:i,m:m}})()}function t(e,n,r,u){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}t=function(e,n,r,u){function o(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?a?a(e,n,{value:r,enumerable:!u,configurable:!u,writable:!u}):e[n]=r:(o("next",0),o("throw",1),o("return",2))},t(e,n,r,u)}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){a(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function a(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var u=r.call(n,t||"default");if("object"!=e(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function o(e,n,t,r,u,a,o){try{var i=e[a](o),l=i.value}catch(e){return void t(e)}i.done?n(l):Promise.resolve(l).then(r,u)}function i(e){return function(){var n=this,t=arguments;return new Promise(function(r,u){var a=e.apply(n,t);function i(e){o(a,r,u,i,l,"next",e)}function l(e){o(a,r,u,i,l,"throw",e)}i(void 0)})}}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return c(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./utils-lib-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./index-legacy118.js?v=1763689792","./index-legacy130.js?v=1763689792","./index-legacy131.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy137.js?v=1763689792","./column-legacy.js?v=1763689792","./database-legacy.js?v=1763689792","./useMethod-legacy4.js?v=1763689792","./useStore-legacy2.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy138.js?v=1763689792","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1763689792","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./index.vue_vue_type_style_index_0_scoped_cdc7f4d3_lang-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(e,t){"use strict";var r,a,o,c,s,f,p,d,m,y,v,b,g,h,_,w,j,k,x,C,S,O,q,P,A,T,M,D,L,E,I,R,V,G,U,H,F,B,N,z,J,Q,W,Y,Z,$,K,X,ee,ne,te,re,ue,ae,oe,ie,le,ce,se,fe,pe,de,me,ye,ve,be,ge,he,_e,we,je,ke,xe,Ce,Se,Oe,qe,Pe,Ae,Te,Me,De,Le,Ee,Ie,Re;return{setters:[function(e){r=e.u,a=e.Q,o=e.n,c=e.H,s=e.aE,f=e.M,p=e.aF,d=e.e,m=e.aG,y=e.P,v=e.aB,b=e.l,g=e.ah,h=e.aH,_=e.aI,e.aJ,w=e.W},function(e){j=e._},function(e){k=e._},function(e){x=e._},function(e){C=e.B},function(e){S=e.c,O=e.aH,q=e.g,P=e.o,A=e.r,T=e.w,M=e.a0,D=e.v,L=e.I,E=e.x,I=e.y,R=e.z,V=e.O,G=e.C,U=e.e,H=e.G,F=e.A,B=e.R,N=e.F,z=e.B,J=e.D,Q=e.S,W=e.L,Y=e.J,Z=e.ap,$=e.aZ,K=e.H,X=e.at,ee=e.as,ne=e.ar,te=e.aT},function(e){re=e._},function(e){ue=e.a,ae=e.f,oe=e.g,ie=e.u},function(e){le=e.addDbTypes,ce=e.modifyDbTypes,se=e.delDbTypes,fe=e.getMysqlRootPwd,pe=e.getMysqlCloudServer,de=e.setAutoConfig,me=e.getDbTypes,ye=e.getMysqlList,ve=e.getAutoConfig},function(e){be=e.o,ge=e.a,he=e.b,_e=e.c,we=e.s,je=e.d,ke=e.e,xe=e.f,Ce=e.g,Se=e.h,Oe=e.i,qe=e.j,Pe=e.k,Ae=e.l},function(e){Te=e.g},function(e){Me=e.e,De=e.g,Le=e.p},function(e){Ee=e.B},function(e){Ie=e._},function(e){Re=e._},null,null,null,null],execute:function(){var Ve={class:"inline-flex items-center mr-2rem"},Ge={key:0,class:"text-small"},Ue={class:"flex items-center"};e("default",S({__name:"index",setup:function(e){var S=Te(),He=S.refs,Fe=He.isRefreshTable,Be=He.isLoading,Ne=He.softData,ze=He.isHaveServer,Je=He.isRefreshClassList,Qe=S.resetRefresh,We=S.refreshTableList,Ye=O(),Ze=r(),$e=Ze.payment,Ke=Ze.mainWidth,Xe=q(function(){return $e.value.authType}),en=P({status:!1,code:""}),nn=A(!1),tn=A(""),rn=P({total:0,page:1,row:10}),un=A([]),an=A([]),on=A(null),ln=A("all"),cn=A(""),sn=A([]),fn=A([]),pn=A([]),dn=q(function(){return Ke.value>1530?280:Ke.value>1440?200:Ke.value>1200?150:120}),mn=q(function(){return!Ne.value.setup&&!ze.value});T(Je,function(e){e&&(Je.value=!1,jn())});var yn,vn,bn=[{label:"设置权限",value:"permission",event:(vn=i(n().m(function e(t,r,a,o,i,l){return n().w(function(e){for(;;)if(0===e.n)return e.a(2,_e(a.value,"multlples",u(u({},l),{},{clearBatch:i})))},e)})),function(e,n,t,r,u,a){return vn.apply(this,arguments)})},{label:"设置分类",value:"class",event:(yn=i(n().m(function e(t,r,u,a,o,i){return n().w(function(e){for(;;)switch(e.n){case 0:we(u,o,gn,i);case 1:return e.a(2)}},e)})),function(e,n,t,r,u,a){return yn.apply(this,arguments)})}].concat(l(je())),gn=A([]),hn=A([]),_n=function(e){cn.value=e,rn.page=1,We()},wn=function(){rn.page=1,We()},jn=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({request:me({db_type:"mysql"}),data:{msg:Array},success:function(e){var n=e.msg;gn.value=l(n.map(function(e){return{label:e.ps,value:String(e.id)}})),fn.value=[{label:"全部分类",value:"all"}].concat(l(n.map(function(e){return{label:e.ps,value:String(e.id)}}))),hn.value=fn.value.map(function(e){return e.value}).filter(function(e){return Number(e)>=0||"all"===e})}});case 1:return e.a(2,Promise.resolve(fn.value||[]))}},e)}));return function(){return e.apply(this,arguments)}}(),kn=function(){var e=i(n().m(function e(){var t;return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({loading:"正在获取密码，请稍后...",request:fe({table:"config",id:1,key:"mysql_root"}),data:String});case 1:t=e.v,ke(t);case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),xn=function(e){o({title:"高级设置",area:[96,62],compData:e,component:function(){return c(function(){return t.import("./index-legacy135.js?v=1763689792")},void 0,t.meta.url)}})},Cn=function(){var e=i(n().m(function e(t,r){var u,a,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return u=f.success("正在跳转phpMyAdmin，请稍后..."),e.p=1,e.n=2,h({sName:"phpmyadmin"});case 2:if(a=e.v,o=a.data,"panel"!==r){e.n=5;break}if(null==o||!o.ext.auth){e.n=3;break}return e.a(2,f.error("当前phpMyAdmin已开启密码访问，请使用【通过公共访问】进行访问"));case 3:if("false"!==(null==o?void 0:o.setup)){e.n=4;break}return e.a(2,f.error("当前phpMyAdmin未安装，请先安装phpMyAdmin"));case 4:return e.n=5,_(t.username,t.password);case 5:e.n=7;break;case 6:e.p=6,e.v;case 7:return e.p=7,u.close(),e.f(7);case 8:return e.a(2)}},e,null,[[1,6,7,8]])}));return function(n,t){return e.apply(this,arguments)}}(),Sn=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a({request:pe(),data:[Array,sn]});case 1:return sn.value.length||(ze.value=!1),e.a(2,sn.value)}},e)}));return function(){return e.apply(this,arguments)}}(),On=function(){var e=i(n().m(function e(){var t,r=arguments;return n().w(function(e){for(;;)switch(e.n){case 0:return""===(t=r.length>0&&void 0!==r[0]?r[0]:{p:rn.page,limit:rn.row,table:"databases",search:cn.value,sid:"all"===ln.value?"":ln.value}).sid&&delete t.sid,Number(t.sid)<0&&(t.type_id=t.sid,delete t.sid),e.n=1,a({loading:Be,request:ye(t),data:{data:[Array,un],page:w(rn),search_history:[Array,pn],error:String},success:function(e){Pe.value=e.data,e.error&&(en.status=!0,en.code=e.error)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),qn=function(){var e=i(n().m(function e(){var t,r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ve({name:"mysql"});case 1:t=e.v,r=t.data,nn.value=!!r.status,tn.value=r.cycle,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Pn=function(){var e=i(n().m(function e(t){return n().w(function(e){for(;;)switch(e.p=e.n){case 0:return nn.value=t,e.p=1,e.n=2,a({loading:"正在设置自动备份数据库...",request:de({name:"mysql",status:t?1:0}),message:!0,success:function(e){e.status||(nn.value=!t)}});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,undefined.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}(),An=function(){return Ye.push({path:"/crontab/task"})},Tn=function(){localStorage.setItem("MYSQL-RECYCLE","true"),window.location.href="/files"},Mn=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return an.value=Ln(),!mn.value&&De({promises:[jn],delay:1e3}),qn(),On(),e.n=1,Sn();case 1:an.value=Ln(),s(an.value,"database_mysql_column");case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Dn=[{name:"企业增量备份",ename:"increment",callback:function(){return xn("increment")}},{name:"远程数据库",ename:"server",callback:function(){return ge()}},{name:"关联服务",ename:"service",callback:function(){return xn("service")}},{name:"容量限制",ename:"capacity",callback:function(){return un.value.length?un.value.some(function(e){return 0===e.sid})?void function(e){"ltd"===Xe.value?0===e.sid?o({title:"数据库配额",area:50,component:function(){return c(function(){return t.import("./index-legacy136.js?v=1763689792")},void 0,t.meta.url)},compData:e,showFooter:!0}):f.error("仅本地数据库支持设置容量配额"):Le({sourceId:52})}(un.value.filter(function(e){return 0===e.sid})[0]):f.error("当前页暂无本地数据库进行容量配额！"):f.error("暂无数据库，请先添加数据库")}},{name:"敏感词检测",ename:"sensitive",callback:function(){return xn("sensitive")}},{name:"Mysql用户管理",ename:"user",callback:function(){return xn("user")}}],Ln=function(){return[ue({type:"page",key:"id"})].concat(l(xe(Oe)),[ae({event:function(e,n){return Ae(e,n)}}),Ce(sn.value,"mysql"),oe({table:"databases"}),ie([{isHide:function(e){return!!e.sid},onClick:function(e){return Cn(e,"panel")},title:"管理"},{onClick:_e,title:"权限"},{onClick:function(e){return Se(e)},title:"工具"},{onClick:function(e){return Oe(e)},title:"改密"},{onClick:function(e){return qe(e)},title:"删除"}])])};return T(function(){return Fe.value},function(){var e=i(n().m(function e(t){return n().w(function(e){for(;;)switch(e.n){case 0:if(!t){e.n=1;break}return e.n=1,On();case 1:Qe();case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),M("serverList",sn),D(Mn),function(e,n){var t=re,r=p,u=Z,a=$,o=K,i=X,c=ee,s=ne,f=te,h=d,_=C,w=m,S=y,O=x,q=v,P=b,A=g,T=k,M=j,D=L("bt-loading");return E(),I("div",null,[R(mn)?(E(),V(t,{key:0,options:R(Ne)},{content:G(function(){return[U(Ie,{type:"Mysql"})]}),_:1},8,["options"])):H("",!0),R(en).status?(E(),V(r,{key:1,options:R(en)},null,8,["options"])):H("",!0),U(a,{type:"info",closable:!1,class:"!mb-[12px]","show-icon":""},{title:G(function(){return[F("div",Ve,[n[8]||(n[8]=F("div",{class:"mr-4 min-w-max text-secondary text-small"},"自动备份数据库",-1)),U(u,{size:"small",class:"mr-8px",modelValue:R(nn),"onUpdate:modelValue":n[0]||(n[0]=function(e){return B(nn)?nn.value=e:null}),width:36,onChange:Pn},null,8,["modelValue"]),R(nn)?(E(),I(N,{key:1},[F("span",null,z(R(tn)),1),F("span",{class:"bt-link",onClick:An},"[前往计划任务]")],64)):(E(),I("div",Ge," 添加数据库后，可开启自动备份，保证数据安全。 "))])]}),_:1}),U(M,null,{"header-left":G(function(){return[F("div",Ue,[U(o,{type:"primary",onClick:n[1]||(n[1]=function(e){return R(be)(Sn)})},{default:G(function(){return l(n[9]||(n[9]=[J(" 添加数据库 ",-1)]))}),_:1}),R(Ne).setup?(E(),V(o,{key:0,onClick:kn},{default:G(function(){return l(n[10]||(n[10]=[J("root密码",-1)]))}),_:1})):H("",!0),U(o,{onClick:R(ge)},{default:G(function(){return l(n[11]||(n[11]=[J("远程数据库",-1)]))}),_:1},8,["onClick"]),U(o,{onClick:R(he)},{default:G(function(){return l(n[12]||(n[12]=[J("phpMyAdmin",-1)]))}),_:1},8,["onClick"]),U(s,{class:"ml-10px","split-button":"",type:"default",onClick:n[2]||(n[2]=Q(function(e){return xn("route")},["stop"])),onCommand:xn},{dropdown:G(function(){return[U(c,null,{default:G(function(){return[U(i,{command:"route"},{default:G(function(){return l(n[13]||(n[13]=[J("数据库备份",-1)]))}),_:1}),U(i,{command:"user"},{default:G(function(){return l(n[14]||(n[14]=[J(" 用户管理 ",-1)]))}),_:1}),U(i,{command:"service"},{default:G(function(){return l(n[15]||(n[15]=[J("关联服务",-1)]))}),_:1}),U(i,{command:"process"},{default:G(function(){return l(n[16]||(n[16]=[J(" 守护进程 ",-1)]))}),_:1}),U(i,{command:"reinforce"},{default:G(function(){return l(n[17]||(n[17]=[J(" 等保加固 ",-1)]))}),_:1})]}),_:1})]}),default:G(function(){return[n[18]||(n[18]=J(" 高级设置 ",-1))]}),_:1}),U(Re,{"comp-data":R(sn),class:"mx-[1rem]"},null,8,["comp-data"]),U(f,{content:"点击跳转数据库回收站",placement:"top"},{default:G(function(){return[U(o,{type:"default",onClick:Tn},{default:G(function(){return l(n[19]||(n[19]=[F("i",{class:"svgtofont-el-delete mr-2px"},null,-1),F("span",{class:"<2xl:hidden"},"回收站",-1)]))}),_:1})]}),_:1}),R(Ne).setup&&R(Ke)>1200?(E(),V(Ee,{key:1,class:"ml-[1rem]","plugin-name":"mysql","is-request":!1,pluginInfo:R(Ne)},null,8,["pluginInfo"])):H("",!0),U(h,{onClick:n[3]||(n[3]=function(e){return R(Me)({name:"数据库",type:12,id:17})}),icon:"desired",class:"ml-[12px] <2xl:hidden",iconClass:"text-medium"},{default:G(function(){return l(n[20]||(n[20]=[J(" 需求反馈 ",-1)]))}),_:1})])]}),"header-right":G(function(){return[U(_,{class:"mr-[10px] !w-[14rem]",modelValue:R(ln),"onUpdate:modelValue":n[4]||(n[4]=function(e){return B(ln)?ln.value=e:null}),onChange:wn,name:"Mysql",options:R(fn),config:{getClassList:jn,addClass:function(e){var n=e.ps;return le({ps:n,db_type:"mysql"})},editClass:function(e){var n=e.ps,t=e.id;return ce({ps:n,id:t,db_type:"mysql"})},deleteClass:function(e){var n=e.id;return se({id:n,db_type:"mysql"})}},ignore:R(hn)},null,8,["modelValue","options","config","ignore"]),U(S,{class:W("!w-[".concat(R(dn),"px]")),disabledPopover:!1,modelValue:R(cn),"onUpdate:modelValue":n[5]||(n[5]=function(e){return B(cn)?cn.value=e:null}),clearable:"",placeholder:"请输入数据库名称/备注",onSearch:_n},{default:G(function(){return[U(w,{list:{historyList:R(pn),recommendList:Dn},name:"databases",keys:"databases",onUpdate:R(We),onSearch:_n},null,8,["list","onUpdate"])]}),_:1},8,["class","modelValue"]),U(O,{class:"ml-[10px]",onRefresh:R(We)},null,8,["onRefresh"]),U(q,{name:"database_mysql",class:"ml-[10px]","table-ref":R(on),column:R(an)},null,8,["table-ref","column"])]}),content:G(function(){return[Y(U(P,{ref_key:"mysqlDbTableRef",ref:on,column:R(an),data:R(un),total:R(rn).total},null,8,["column","data","total"]),[[D,R(Be)]])]}),"footer-left":G(function(){return[U(A,{options:bn,"table-ref":R(on)},null,8,["table-ref"])]}),"footer-right":G(function(){return[U(T,{total:R(rn).total,page:R(rn).page,"onUpdate:page":n[6]||(n[6]=function(e){return R(rn).page=e}),row:R(rn).row,"onUpdate:row":n[7]||(n[7]=function(e){return R(rn).row=e}),onChange:R(We)},null,8,["total","page","row","onChange"])]}),_:1})])}}}))}}})}();
