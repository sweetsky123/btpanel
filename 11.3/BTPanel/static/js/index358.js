import{j as a,r as s,e as t,c as e,s as o,aB as r,g as l,n as p,x as u,y as n,z as d,A as i,C as c,B as m,O as v,D as _,G as x,ax as f,az as y,aT as w,H as D}from"./base-lib.js?v=1763689792";import{B as b,kT as h,M as j,l as k,_ as T}from"./utils-lib.js?v=1763689792";import{o as M}from"./index61.js?v=1763689792";import{o as C}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index109.js?v=1763689792";import"./index118.js?v=1763689792";import"./useMethod9.js?v=1763689792";import"./column.js?v=1763689792";import"./index110.js?v=1763689792";import"./useMethod11.js?v=1763689792";import"./header-nav-tools.vue_vue_type_script_setup_true_lang.js?v=1763689792";import"./index107.js?v=1763689792";const X=a("MAIL_DOMAIN_DNS",()=>{const a=s(),e=s({}),o=s([{type:"TXT",host:"@",value:"v=spf1 a mx -all"},{type:"TXT",host:"default._domainkey",value:""},{type:"TXT",host:"_dmarc",value:""}]),r=({status:a})=>t("div",{class:["inline-flex items-center",a?"text-primary":"text-dangerDark"]},[t("span",{class:["glyphicon","glyphicon-".concat(a?"ok":"remove")]},null),t("span",{class:"ml-4px"},[a?"OK":"未设置"])]),l=s([{prop:"domain",label:"域名",width:120,showOverflowTooltip:!0},{prop:"mx_status",label:"MX记录",render:a=>t(r,{status:1===a.mx_status},null)},{prop:"a_status",label:"A记录",render:a=>t(r,{status:1===a.a_status},null)},{prop:"spf_status",label:"SPF记录",render:a=>t(r,{status:1===a.spf_status},null)},{prop:"dkim_status",label:"DKIM记录",render:a=>t(r,{status:1===a.dkim_status},null)},{prop:"dmarc_status",label:"DMARC记录",render:a=>t(r,{status:1===a.dmarc_status},null)}]);return{statusData:a,propsData:e,addTxtRecordData:o,statusColumns:l,onCopy:a=>{b({value:a,success:"复制成功",error:"复制失败"})},onVerify:async a=>{const{data:s}=await h({domain:e.value.row.domain});j.request(s),s.status&&(a(),e.value.onRefresh&&e.value.onRefresh())},init:s=>{e.value=s,a.value=[e.value.row],o.value[1].value=e.value.row.dkim_value,o.value[2].value=e.value.row.dmarc_value},onParseAllEnvent:async a=>{M(e.value.row.domain,e.value.row.mx_record,(s,t)=>{s.status&&(a&&a(),e.value.onRefresh&&e.value.onRefresh(),C(t,{title:"一键解析"}))})}}}),A={class:"p-20px"},R={class:"mr-4px max-w-220px! truncate"},g=["onClick"],I={class:"flex flex-center mt-24px justify-end"},O=T(e({__name:"index",props:{compData:{}},setup(a){const{propsData:s,addTxtRecordData:e,statusData:b}=o(X()),{init:h,statusColumns:j,onCopy:T,onVerify:M,onParseAllEnvent:C}=X(),O=a,B=r("popupClose"),P=l(()=>!(O.compData.row.mx_status&&O.compData.row.a_status&&O.compData.row.spf_status&&O.compData.row.dkim_status&&O.compData.row.dmarc_status)&&O.compData.row.dns_id);return p(()=>{h(O.compData)}),(a,o)=>{var r;const l=k,p=f,h=y,X=w,O=D;return u(),n("div",A,[t(l,{class:"mb-20px",data:d(b),column:d(j)},null,8,["data","column"]),o[4]||(o[4]=i("div",{class:"record-title"},"第一步：添加 MX 记录",-1)),o[5]||(o[5]=i("div",{class:"record-desc"},"登录域名服务商，添加记录类型为MX的记录，用于邮箱服务(解析MX记录之前要先解析A记录)",-1)),t(h,{class:"mb-30px",data:[{type:"MX",host:"@",value:null==(r=d(s).row)?void 0:r.mx_record,priority:"10"}]},{default:c(()=>[t(p,{prop:"type",label:"记录类型"}),t(p,{prop:"host",label:"主机记录"}),t(p,{prop:"value",label:"记录值"}),t(p,{prop:"priority",label:"MX优先级"})]),_:1},8,["data"]),o[6]||(o[6]=i("div",{class:"record-title"},"第二步：添加 TXT 记录",-1)),o[7]||(o[7]=i("div",{class:"record-desc"},"添加记录类型为TXT的记录，用于邮箱反垃圾(请直接复制下列参数)",-1)),t(h,{class:"mb-30px",data:d(e)},{default:c(()=>[t(p,{prop:"type",label:"记录类型"}),t(p,{prop:"host",label:"主机记录"}),t(p,{width:"280",prop:"value",label:"记录值"},{default:c(a=>[t(X,{content:a.row.value,"popper-class":"w-220px",effect:"dark",placement:"top-end"},{default:c(()=>[i("span",R,m(a.row.value),1)]),_:2},1032,["content"]),i("span",{class:"text-primary cursor-pointer hover:text-primaryDark",onClick:s=>d(T)(a.row.value)}," (复制) ",8,g)]),_:1})]),_:1},8,["data"]),i("div",I,[d(P)?(u(),v(O,{key:0,onClick:o[0]||(o[0]=a=>d(C)(d(B)))},{default:c(()=>[...o[2]||(o[2]=[_("一键解析",-1)])]),_:1})):x("",!0),t(O,{type:"primary",onClick:o[1]||(o[1]=a=>d(M)(d(B)))},{default:c(()=>[...o[3]||(o[3]=[_(" 已设置，验证域名解析 ",-1)])]),_:1})])])}}}),[["__scopeId","data-v-7c5c2fce"]]);export{O as default};
