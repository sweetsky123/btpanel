import{c as e,s,aB as a,g as r,e as t,c5 as o,D as l,J as i,c6 as p,aA as u,H as m,v as n,x as d,y as c,z as v}from"./base-lib.js?v=1763689792";import{L as g,k as f}from"./utils-lib.js?v=1763689792";import{b as j,j as h,a as b,d as x,h as w}from"./form-item.js?v=1763689792";import{F as y,G as _,H as C,I as k,J as q,K as F}from"./index238.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./index109.js?v=1763689792";import"./column.js?v=1763689792";import"./useController4.js?v=1763689792";import"./validator.js?v=1763689792";import"./index107.js?v=1763689792";import"./useController5.js?v=1763689792";import"./site.js?v=1763689792";import"./useStore4.js?v=1763689792";import"./useController6.js?v=1763689792";import"./useMethod5.js?v=1763689792";const V={class:"p-[2rem] max-h-[60rem] overflow-auto"},H=e({__name:"node-form",setup(e,{expose:H}){const U=y(),{versionOptions:z,extendOptions:B,popoverFocus:J,isEdit:M}=s(U),O=a("popupClose",()=>{}),A=[{label:"npm",value:"npm"},{label:"yarn",value:"yarn"}],{BtForm:D,submit:E,param:G}=g({data:_,options:e=>r(()=>[j("名称","name",{attrs:{class:"!w-[320px]",placeholder:"请输入环境名称",disabled:M.value},rules:[{required:!0,message:"请输入环境名称",trigger:"blur"}]}),h("版本","version",z.value,{attrs:{class:"!w-[32rem]",disabled:M.value},rules:[{required:!0,message:"请选择Node版本",trigger:"change"}]}),b("运行目录","path",{attrs:{class:"!w-[320px]",placeholder:"请选择运行目录"},rules:[{required:!0,message:"请选择运行目录",trigger:"change"}],icon:"icon-file_mode",iconClick:()=>{C(e)}}),x([h("包管理器","package",A,{attrs:{class:"!w-[22rem]",disabled:M.value},rules:[{required:!0,message:"请选择包管理器",trigger:"change"}]}),w("镜像源",()=>t(o,{modelValue:e.value.repo_url,"onUpdate:modelValue":s=>e.value.repo_url=s,class:"!w-[32rem]",placeholder:"请选择或输入镜像源","fetch-suggestions":(e,s)=>{s(B.value)},"popper-class":"my-extautocomplete"},{default:({item:s})=>t("div",{class:s.value===e.value.repo_url?"bg-light flex items-center justify-between px-[2rem]":"flex items-center justify-between px-[2rem]"},[t("div",{class:s.value===e.value.repo_url?"bt-link w-[38rem] truncate":"w-[38rem] truncate"},[s.label])])}),"repo_url",{attrs:{class:"!w-[22rem]"},rules:[{required:!0,message:"请输入或选择镜像源",trigger:"change"}]})]),w("启动命令",()=>t(u,{ref:"nodepopover",placement:"top-start","popper-class":"green-tips-popover !p-0",title:"",width:"440",visible:J.value,"onUpdate:visible":e=>J.value=e,"trigger-keys":[],trigger:"focus"},{default:()=>t("div",{class:"!p-[12px] bg-primary text-white"},[l("请填写完整启动命令，如：node main.js?v=1763689792")]),reference:()=>i(t(f,{modelValue:e.value.command,"onUpdate:modelValue":s=>e.value.command=s,type:"textarea",width:"52rem",rows:7,resize:"none",onFocus:()=>{J.value=!0},placeholder:"请填写完整启动命令，如：node main.js?v=1763689792"},null),[[p,"nodepopover"]])}),"command",{attrs:{class:"!w-[52rem]"},rules:[{required:!0,message:"请填写完整启动命令，如：node main.js?v=1763689792",trigger:"change"}]}),...e.value.port&&e.value.port.length>0?[k(e.value.port),w(" ",()=>t(m,{type:"default",onClick:()=>{e.value.port.push({server:"",con:"",output:!1,protocol:["tcp"],id:1})}},{default:()=>[l("添加")]}))]:[w("端口",()=>t(m,{type:"default",onClick:()=>{e.value.port.push({server:"",con:"",output:!1,protocol:["tcp"],id:1e3*Math.random()})}},{default:()=>[l("添加")]}))]]),submit:async(e,s,a)=>{await s(),q(e.value,O)}});return n(()=>{F(G)}),H({onConfirm:E}),(e,s)=>(d(),c("div",V,[t(v(D))]))}});export{H as default};
