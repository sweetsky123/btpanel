!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return i(s,"_invoke",function(n,r,o){var a,u,i,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,n){return a=e,u=0,i=t,p.n=n,c}};function v(n,r){for(u=n,i=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],v=p.p,m=a[2];n>3?(o=m===r)&&(i=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=v&&((o=n<2&&v<a[1])?(u=0,p.v=r,p.n=a[1]):v<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,p.n=m,u=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,m),u=s,i=m;(e=u<2?t:i)||!f;){a||(u?u<3?(u>1&&(p.n=-1),v(u,i)):p.n=i:p.v=i);try{if(l=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,i)))throw TypeError("iterator result is not an object");if(!e.done)return e;i=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(f=p.n<0)?i:n.call(r,p))!==c)break}catch(e){a=t,u=1,i=e}finally{l=1}}return{value:e,done:f}}}(n,o,a),!0),s}var c={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),v=f.prototype=l.prototype=Object.create(p);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,i(t,o,"GeneratorFunction")),t.prototype=Object.create(v),t}return s.prototype=f,i(v,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,o,"GeneratorFunction"),i(v),i(v,o,"Generator"),i(v,r,function(){return this}),i(v,"toString",function(){return"[object Generator]"}),(u=function(){return{w:a,m:m}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){function a(e,n){i(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(a("next",0),a("throw",1),a("return",2))},i(t,e,n,r)}function c(t,e,n,r,o,a,u){try{var i=t[a](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function u(t){c(a,r,o,u,i,"next",t)}function i(t){c(a,r,o,u,i,"throw",t)}u(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./index-legacy437.js?v=1763689792","./useStore-legacy12.js?v=1763689792","./validator-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./useStore-legacy11.js?v=1763689792","./ssl-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(t,n){"use strict";var r,a,i,c,s,f,p,v,m,y,d,b,g,j,w,S,h,x,_,O,P,I,T,E,k,A,D,C,L,M,B,G;return{setters:[function(t){r=t.r,a=t.g,i=t.s,c=t.c,s=t.v,f=t.a8,p=t.x,v=t.y,m=t.e,y=t.C,d=t.A,b=t.F,g=t.b1,j=t.L,w=t.z,S=t.B,h=t.D,x=t.G,_=t.aZ,O=t.H},function(t){P=t._},function(t){I=t.u},function(t){T=t.j},function(t){E=t.p,k=t.Q,A=t.n,D=t.H,C=t.b,L=t.V,M=t._},function(t){B=t.u},function(t){G=t.n},null,null,null,null,null,null],execute:function(){var N=C(),V=r({}),F=a(function(){var t;return(null===(t=V.value.productInfo)||void 0===t?void 0:t.totalPrice)>5e3}),H=r(F.value?"ali":"wx"),W=r(!1),Y=r(0),z=r(!1),R=I(),q=R.btCertPollingPopup,Q=R.isRefreshBtSSL,U=i(B()).btIsRefresh,Z=function(){var t=l(u().m(function t(){return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,q.value;case 1:t.v.unmount();case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),$=function(t){F.value&&"wx"===t&&(t="ali",N.error("微信支付单笔限额5000元，请使用支付宝支付")),H.value=t,sessionStorage.setItem("PAY-BT-SSL-VIEW-TIME","".concat((new Date).getTime()/1e3))},J=function(){var t=l(u().m(function t(e){var n;return u().w(function(t){for(;;)switch(t.n){case 0:if(W.value=!1,e&&sessionStorage.setItem("PAY-BT-SSL-VIEW-TIME","".concat(e)),!(n=sessionStorage.getItem("PAY-BT-SSL-VIEW-TIME"))){t.n=2;break}if(!(parseInt("".concat((new Date).getTime()/1e3-Number(n)),10)>600&&q.value)){t.n=1;break}return sessionStorage.removeItem("PAY-BT-SSL-VIEW-TIME"),t.a(2,E({title:"支付超时",icon:"warning",content:"由于您长时间未操作，支付超时，请刷新网页重新购买！",onConfirm:function(){Z(),window.location.reload()},onCancel:function(){Z(),window.location.reload()}}));case 1:q.value||sessionStorage.removeItem("PAY-BT-SSL-VIEW-TIME");case 2:return t.n=3,K();case 3:z.value?(Y.value&&clearTimeout(Y.value),Y.value=setTimeout(function(){J()},3e3)):X();case 4:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=l(u().m(function t(){var e,n;return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,k({request:G({url:"/api/v1/ssl/get_order_status",pay_id:V.value.pay_id})});case 1:if(e=t.v,(n=e.data).status||n.data){t.n=2;break}return N.error("请求失败，请稍后再试。如有支付问题，请联系客服。"),W.value=!0,t.a(2,Promise.reject({status:!1,msg:"请求失败，请稍后再试。如有支付问题，请联系客服。"}));case 2:n.data&&0!==n.data&&(V.value.id=n.data),z.value=0===n.data;case 3:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),X=function(){var t=l(u().m(function t(){var e,r,a,i;return u().w(function(t){for(;;)switch(t.n){case 0:return e=V.value,r=e.id,a=e.productInfo,i=o(o({},V.value),{},{id:r,product_name:null==a?void 0:a.productName,product_id:null==a?void 0:a.product_id}),A({title:"支付成功",area:[60,60],component:function(){return D(function(){return n.import("./pay-success-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:i}),Q.value=!0,U.value=!0,t.n=1,q.value;case 1:t.v.unmount(),clearTimeout(Y.value);case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),tt={class:"px-[3rem] py-[2rem] pb-[24px]"},et={class:"ssl-pay-type"},nt=["onClick"],rt={class:"p-[24px] flex flex-col justify-center items-center"},ot={class:"mt-[16px] text-base font-bold flex items-center"},at={class:"text-[2.5rem] ml-[8px] text-orange"},ut={key:0,class:"mt-[20px] text-base flex items-center"},it={class:"ssl-pay-info"},ct={class:"ssl-pay-info-line"},lt={class:"ssl-pay-info-line"},st={class:"mt-[16px] flex items-center justify-center"},ft=c({__name:"index",props:{compData:{default:{actual_amount:0,ali:"",discount_amount:0,pay_id:0,total_amount:0,wx:"",productInfo:{}}}},emits:["close"],setup:function(t,n){n.emit;var r=I().btCertPollingPopup,o=t,u=[{name:"微信支付",label:"wx"},{name:"支付宝支付",label:"ali"}],i=a(function(){return V.value[H.value]}),c=a(function(){var t,e=(null===(t=V.value)||void 0===t?void 0:t.productInfo)||{},n=e.productName,r=e.years,o=e.num;if(!n)return"";var a=r?"".concat(r,"年"):"",u=o?" *".concat(o):"";return"".concat(n).concat(a).concat(u)});return s(function(){V.value=o.compData,J((new Date).getTime()/1e3)}),f(function(){r.value=null,z.value=!1,clearTimeout(Y.value)}),function(t,n){var r,o=_,a=P,l=O;return p(),v("div",tt,[m(o,{type:"error",closable:!1},{title:y(function(){return e(n[2]||(n[2]=[d("span",{class:"text-small"},[d("i",{calss:"svgtofont-el-warning-outline text-small"}),d("span",null," 禁止含有诈骗、赌博、色情、木马、病毒等违法违规业务信息的站点申请SSL证书，如有违反，撤销申请，停用账号。 ")],-1)]))}),_:1}),d("div",et,[(p(),v(b,null,g(u,function(t){return d("span",{key:t.name,class:j("ssl-pay-tab-item ".concat(t.label===w(H)?"isActive":"")),onClick:function(e){return w($)(t.label)}},[d("span",{class:j("pay-icon ".concat(t.label))},null,2),d("span",null,S(t.name),1)],10,nt)}),64))]),d("div",rt,[m(a,{value:w(i),size:160},null,8,["value"]),d("span",ot,[n[3]||(n[3]=d("span",null,"总计",-1)),d("span",at,S(Number(null===(r=w(V))||void 0===r?void 0:r.actual_amount).toFixed(2))+" 元 ",1)]),w(W)?(p(),v("span",ut,[m(l,{type:"default",onClick:n[0]||(n[0]=function(){return w(J)()})},{default:y(function(){return e(n[4]||(n[4]=[h("刷新支付状态",-1)]))}),_:1}),d("span",{class:"bt-link ml-[2rem]",onClick:n[1]||(n[1]=function(){return w(T)&&w(T).apply(void 0,arguments)})},"联系客服")])):x("",!0)]),d("div",it,[d("div",ct,[n[5]||(n[5]=d("span",{class:"w-[5rem]"},"商品名称",-1)),d("span",null,S(w(c)),1)]),d("div",lt,[n[6]||(n[6]=d("span",{class:"w-[5rem]"},"下单时间",-1)),d("span",null,S(w(L)(w(V).addtime,"yyyy-MM-dd HH:mm:ss")),1)])]),d("div",st,[n[7]||(n[7]=d("span",{class:"scan-icon"},null,-1)),d("span",null,S("wx"===w(H)?"微信扫一扫支付":"支付宝扫一扫支付"),1)])])}}});t("default",M(ft,[["__scopeId","data-v-94504324"]]))}}})}();
