!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function i(e,a,u,o){var i=a&&a.prototype instanceof l?a:l,c=Object.create(i.prototype);return t(c,"_invoke",function(e,t,a){var u,o,i,l=0,c=a||[],f=!1,v={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(e,t){return u=e,o=0,i=n,v.n=t,s}};function m(e,t){for(o=e,i=t,r=0;!f&&l&&!a&&r<c.length;r++){var a,u=c[r],m=v.p,d=u[2];e>3?(a=d===t)&&(i=u[(o=u[4])?5:(o=3,3)],u[4]=u[5]=n):u[0]<=m&&((a=e<2&&m<u[1])?(o=0,v.v=t,v.n=u[1]):m<d&&(a=e<3||u[0]>t||t>d)&&(u[4]=e,u[5]=t,v.n=d,o=0))}if(a||e>1)return s;throw f=!0,t}return function(a,c,d){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&m(c,d),o=c,i=d;(r=o<2?n:i)||!f;){u||(o?o<3?(o>1&&(v.n=-1),m(o,i)):v.n=i:v.v=i);try{if(l=2,u){if(o||(a="next"),r=u[a]){if(!(r=r.call(u,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,o<2&&(o=0)}else 1===o&&(r=u.return)&&r.call(u),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);u=n}else if((r=(f=v.n<0)?i:e.call(t,v))!==s)break}catch(r){u=n,o=1,i=r}finally{l=1}}return{value:r,done:f}}}(e,u,o),!0),c}var s={};function l(){}function c(){}function f(){}r=Object.getPrototypeOf;var v=[][u]?r(r([][u]())):(t(r={},u,function(){return this}),r),m=f.prototype=l.prototype=Object.create(v);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return c.prototype=f,t(m,"constructor",f),t(f,"constructor",c),c.displayName="GeneratorFunction",t(f,o,"GeneratorFunction"),t(m),t(m,o,"Generator"),t(m,u,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:d}})()}function t(e,n,r,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}t=function(e,n,r,a){function o(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?u?u(e,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[n]=r:(o("next",0),o("throw",1),o("return",2))},t(e,n,r,a)}function n(e,t,n,r,a,u,o){try{var i=e[u](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(a,u){var o=e.apply(t,r);function i(e){n(o,a,u,i,s,"next",e)}function s(e){n(o,a,u,i,s,"throw",e)}i(void 0)})}}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./utils-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./cataluge-setting-legacy.js?v=1763689792"],function(t,n){"use strict";var u,o,i,s,l,c,f,v,m,d,p,g,b,h,y,_,w,z,j,q,S,k,N,x,O,T,A,P,E;return{setters:[function(e){u=e.u,o=e.H,i=e.aK,s=e.Q,l=e.p,c=e.M,f=e.aC},function(e){v=e.getWebdavConf,m=e.removeAuth,d=e.setNginxAuth,p=e.setWebdav,g=e.removeWebdav,b=e.addWebdav,h=e.getXfsDisk,y=e.getPathQuota,_=e.setSiteQuota,w=e.setClientMaxBodySize},function(e){z=e.e,j=e.g,q=e.r,S=e.o,k=e.c,N=e.x,x=e.y,O=e.z,T=e.R},function(e){A=e.p},function(e){P=e.u},function(e){E=e.default}],execute:function(){var I=P().siteInfo,G=u(),M=G.payment,W=G.enterpriseRec,C=M.value.authType,B=[{label:"网站目录",name:"catalugeTab",lazy:!0,render:function(){return z(E,null,null)}}].concat(a(W.value?[{label:"网站配额",lazy:!0,name:"flowQuota",render:function(){return o(function(){return n.import("./capacity-quota-legacy.js?v=1763689792")},void 0,n.meta.url)}}]:[]),[{label:"nginx WebDav",lazy:!0,name:"nginxWebDav",render:function(){return o(function(){return n.import("./nginx-web-dav-legacy.js?v=1763689792")},void 0,n.meta.url)}}]),F=j(function(){var e;return(null===(e=I.value)||void 0===e?void 0:e.tabName)||"catalugeTab"}),Q=t("j",q(!1)),D=q(!1),U=t("w",q(!1)),V=t("n",q({auth:!1,site_name:"",site_path:"",domain:"",status:!1,user:"",pass:"",client_max_body_size:""})),H=t("k",q({domain:""})),R=t("g",r(e().m(function t(){var n,r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,v({site_name:I.value.name});case 1:if(n=e.v,r=n.data,U.value=!r.need_create||!1,D.value=r.status,!r.need_create){e.n=2;break}return e.a(2);case 2:V.value=Object.assign(V.value,r),V.value.auth=!!r.auth,r.auth&&(V.value.user=r.auth.auth_name,V.value.pass=r.auth.auth_value),e.n=4;break;case 3:e.p=3,a=e.v,i(a);case 4:return e.a(2)}},t,null,[[0,3]])}))),J=(t("e",function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:V.value.auth=Boolean(n),n||(V.value.user="",V.value.pass="",s({loading:"正在设置状态，请稍后...",request:m({site_name:I.value.name}),message:!0}));case 1:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),t("s",r(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:s({loading:"正在保存,请稍后...",request:d({site_name:I.value.name,auth_name:V.value.user,auth_value:V.value.pass}),message:!0});case 1:return e.a(2)}},t)}))),t("h",function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:return V.value.status=!Boolean(n),e.n=1,s({loading:"正在设置状态,请稍后...",request:p({site_name:I.value.name,option:n?1:0}),message:!0});case 1:e.v.status&&(V.value.status=Boolean(n));case 2:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),t("d",r(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.n){case 0:return n=I.value.name,e.n=1,l({title:"删除【".concat(n,"】webdav"),content:"是否删除【".concat(n,"】webdav，删除后将不再对域名进行限制?"),icon:"warning-filled"});case 1:return e.n=2,s({loading:"正在删除webdav，请稍后...",request:g({site_name:n}),message:!0});case 2:e.v.status&&R();case 3:return e.a(2)}},t)}))),t("p",r(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,s({loading:"正在添加,请稍后...",request:b({domain:H.value.domain,site_id:I.value.id}),message:!0});case 1:J(),R();case 2:return e.a(2)}},t)}))),t("l",function(){Q.value=!1,H.value.domain=""})),K=t("a",q()),L=t("v",q(!1)),X=t("m",q(!1)),$=t("b",q([])),Y=(t("r",{size:[{required:!0,message:"容量不能为空",trigger:["blur"]},{validator:function(e,t,n){Number.isInteger(1*Y.size)?n():n(new Error("容量必须为整数"))},trigger:["blur","change"]}],alarmSize:[{required:!0,message:"触发告警大小不能为空",trigger:["blur"]},{validator:function(e,t,n){Y.status?Number.isInteger(1*Y.alarmNum)?n():n(new Error("触发告警大小必须为整数")):n()},trigger:["blur","change"]}],alarmNum:[{required:!0,message:"告警次数不能为空",trigger:["blur"]},{validator:function(e,t,n){Y.status?Number.isInteger(1*Y.alarmNum)?n():n(new Error("告警次数必须为整数")):n()},trigger:["blur","change"]}],module:[{required:!0,validator:function(e,t,n){Y.status&&0===Y.module.length?n(new Error("请选择告警方式")):n()},trigger:["blur","change"]}]}),t("c",S({used:0,size:0,status:!1,alarmSize:0,alarmNum:0,alarmModel:[],module:[],option:{}}))),Z=t("u",q()),ee=q(!1),te=function(){if(0!==Y.size){var e=1024*Y.size*1024;Y.size>0&&Y.used>=e?Z.value="当前容量已用完":Z.value=(Y.used/1024/1024).toFixed(2)||0}else Z.value="未配置"},ne=(t("i",function(){var t=r(e().m(function t(n){var r,a,u,o,s,l,c,f,v,m,d;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(L.value=!0,e.p=1,X.value=!1,$.value=[],r=n||I.value,a=r.quota,n){e.n=7;break}return e.p=2,e.n=3,h({path:I.value.path});case 3:if(u=e.v,(o=u.data).status){e.n=4;break}return X.value=!0,$.value=null===(s=o.msg)||void 0===s?void 0:s.split("\n"),e.a(2);case 4:return e.n=5,y({path:I.value.path});case 5:l=e.v,a=l.data,e.n=7;break;case 6:e.p=6,m=e.v,i(m);case 7:f=(c=a).quota_storage,v=c.quota_push,f&&(Y.used=f.used,Y.size=f.size),v&&void 0!==v.module&&(Y.status=v.status,Y.alarmSize=v.size,Y.alarmNum=v.push_count,Y.module=""===v.module?[]:v.module.split(",")),te(),L.value=!1,e.n=9;break;case 8:e.p=8,d=e.v,i(d);case 9:return e.p=9,L.value=!1,e.f(9);case 10:return e.a(2)}},t,null,[[2,6],[1,8,9,10]])}));return function(e){return t.apply(this,arguments)}}()),t("o",r(e().m(function t(){var n,r,a,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=I.value.path,"ltd"===C){e.n=1;break}return A({sourceId:183,disablePro:!0}),e.a(2);case 1:if(r={path:n,quota_type:"site",quota_push:{status:Y.status,size:Number(Y.alarmSize),push_count:Number(Y.alarmNum),module:Y.module.join(",")},quota_storage:{size:Number(Y.size)}},!Y.status||0!==r.quota_push.module.length){e.n=2;break}return e.a(2,c.error("请选择至少一种告警方式"));case 2:if(!(r.quota_storage.size<r.quota_push.size)){e.n=3;break}return e.a(2,c.error("容量配额必须大于触发告警大小"));case 3:return e.n=4,K.value.validate();case 4:return e.p=4,ee.value=!0,e.n=5,_({data:JSON.stringify(r)});case 5:(a=e.v).status?c.request(a):c.msg({dangerouslyUseHTMLString:!0,message:a.msg,type:"error",duration:0,showClose:!0}),e.n=7;break;case 6:e.p=6,u=e.v,i(u);case 7:return e.p=7,ee.value=!1,e.f(7);case 8:return e.a(2)}},t,null,[[4,6,7,8]])}))),t("f",r(e().m(function t(){var n,r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=c.load("正在设置,请稍后..."),e.p=1,e.n=2,w({site_name:I.value.name,client_max_body_size:V.value.client_max_body_size});case 2:r=e.v,c.request(r),R(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,n.close(),e.f(4);case 5:return e.a(2)}},t,null,[[1,3,4,5]])}))),k({__name:"index",setup:function(e){return function(e,t){var n=f;return N(),x("div",null,[z(n,{type:"card",modelValue:O(F),"onUpdate:modelValue":t[0]||(t[0]=function(e){return T(F)?F.value=e:null}),options:O(B)},null,8,["modelValue","options"])])}}})),re=Object.freeze(Object.defineProperty({__proto__:null,default:ne},Symbol.toStringTag,{value:"Module"}));t("q",re)}}})}();
