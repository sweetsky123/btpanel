!function(){function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(e)}function e(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function t(n){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?e(Object(a),!0).forEach(function(e){r(n,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,a,u,o,i=[],l=!0,c=!1;try{if(u=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=u.call(t)).done)&&(i.push(r.value),i.length!==e);l=!0);}catch(n){c=!0,a=n}finally{try{if(!l&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return i}}(n,e)||o(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(n){return function(n){if(Array.isArray(n))return i(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||o(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(n,e){if(n){if("string"==typeof n)return i(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(n,e):void 0}}function i(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function u(t,r,a,u){var l=r&&r.prototype instanceof i?r:i,s=Object.create(l.prototype);return c(s,"_invoke",function(t,r,a){var u,i,l,c=0,s=a||[],f=!1,p={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(e,t){return u=e,i=0,l=n,p.n=t,o}};function v(t,r){for(i=t,l=r,e=0;!f&&c&&!a&&e<s.length;e++){var a,u=s[e],v=p.p,d=u[2];t>3?(a=d===r)&&(l=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=n):u[0]<=v&&((a=t<2&&v<u[1])?(i=0,p.v=r,p.n=u[1]):v<d&&(a=t<3||u[0]>r||r>d)&&(u[4]=t,u[5]=r,p.n=d,i=0))}if(a||t>1)return o;throw f=!0,r}return function(a,s,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,d),i=s,l=d;(e=i<2?n:l)||!f;){u||(i?i<3?(i>1&&(p.n=-1),v(i,l)):p.n=l:p.v=l);try{if(c=2,u){if(i||(a="next"),e=u[a]){if(!(e=e.call(u,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,i<2&&(i=0)}else 1===i&&(e=u.return)&&e.call(u),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=n}else if((e=(f=p.n<0)?l:t.call(r,p))!==o)break}catch(e){u=n,i=1,l=e}finally{c=1}}return{value:e,done:f}}}(t,a,u),!0),s}var o={};function i(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(c(e={},r,function(){return this}),e),v=f.prototype=i.prototype=Object.create(p);function d(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,c(n,a,"GeneratorFunction")),n.prototype=Object.create(v),n}return s.prototype=f,c(v,"constructor",f),c(f,"constructor",s),s.displayName="GeneratorFunction",c(f,a,"GeneratorFunction"),c(v),c(v,a,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),(l=function(){return{w:u,m:d}})()}function c(n,e,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}c=function(n,e,t,r){function u(e,t){c(n,e,function(n){return this._invoke(e,t,n)})}e?a?a(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t:(u("next",0),u("throw",1),u("return",2))},c(n,e,t,r)}function s(n,e,t,r,a,u,o){try{var i=n[u](o),l=i.value}catch(n){return void t(n)}i.done?e(l):Promise.resolve(l).then(r,a)}function f(n){return function(){var e=this,t=arguments;return new Promise(function(r,a){var u=n.apply(e,t);function o(n){s(u,r,a,o,i,"next",n)}function i(n){s(u,r,a,o,i,"throw",n)}o(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useMethod-legacy9.js?v=1763689792","./site-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./validator-legacy.js?v=1763689792","./useMethod-legacy8.js?v=1763689792","./useMethod-legacy11.js?v=1763689792"],function(n,e){"use strict";var r,o,i,c,s,p,v,d,m,h,y,g,w,b,_,k,x,C,O,S,P,j,I,T,L,V,M,E,D,R,q,A,F,z,U,B,H,N,G,W,K,$,Z,J,Q,Y,X,nn,en,tn,rn,an,un,on,ln,cn,sn,fn,pn,vn,dn,mn,hn,yn,gn,wn,bn,_n,kn,xn,Cn,On,Sn,Pn,jn,In,Tn,Ln,Vn,Mn,En,Dn,Rn,qn,An,Fn,zn,Un,Bn,Hn,Nn,Gn,Wn,Kn,$n,Zn,Jn,Qn,Yn,Xn,ne,ee,te,re,ae,ue,oe,ie,le,ce,se,fe,pe,ve,de;return{setters:[function(n){r=n.M,o=n.g7,i=n.g8,c=n.ak,s=n._,p=n.f8,v=n.H,d=n.fZ,m=n.n,h=n.p,y=n.g9,g=n.ga,w=n.gb,b=n.b,_=n.gc,k=n.R,x=n.e,C=n.gd,O=n.ge,S=n.gf,P=n.gg,j=n.Q,I=n.gh,T=n.gi,L=n.l,V=n.gj,M=n.gk,E=n.gl,D=n.d,R=n.gm,q=n.gn,A=n.go,F=n.ap,z=n.fb,U=n.gp,B=n.gq,H=n.gr,N=n.gs,G=n.an,W=n.ao,K=n.ag,$=n.$,Z=n.gt,J=n.gu,Q=n.gv,Y=n.gw,X=n.ax,nn=n.V,en=n.gx,tn=n.gy,rn=n.gz,an=n.gA,un=n.az,on=n.fS,ln=n.gB,cn=n.gC,sn=n.gD,fn=n.gE,pn=n.r,vn=n.gF,dn=n.aC,mn=n.N},function(n){hn=n.j,yn=n.r,gn=n.s,wn=n.c,bn=n.x,_n=n.y,kn=n.A,xn=n.B,Cn=n.N,On=n.a8,Sn=n.O,Pn=n.C,jn=n.e,In=n.D,Tn=n.z,Ln=n.R,Vn=n.ak,Mn=n.aj,En=n.U,Dn=n.H,Rn=n.o,qn=n.g,An=n.V,Fn=n.L,zn=n.G,Un=n.F,Bn=n.ap,Hn=n.v,Nn=n.I,Gn=n.J,Wn=n.Z,Kn=n.K,$n=n.ad,Zn=n.ab,Jn=n.aY,Qn=n.a9,Yn=n.aT},function(n){Xn=n.a,ne=n.u,ee=n.b,te=n.o,re=n.e},function(n){ae=n.getCliVersion},function(n){ue=n.B,oe=n.u,ie=n.c,le=n.a},function(n){ce=n._},function(n){se=n.o,fe=n.f},function(n){pe=n.r},function(n){ve=n.m,de=n.i}],execute:function(){var me,he=hn("MAIL_SETTING_TIME",function(){var n=yn(0),e=yn(null);return{type:n,days:e,reset:function(){n.value=0,e.value=null}}}),ye=gn(he()),ge=ye.type,we=ye.days,be=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:if(we.value||0===we.value||1!==ge.value){n.n=1;break}return r.error("请输入保存时间"),n.a(2);case 1:return n.n=2,o({save_day:0===ge.value?0:we.value});case 2:e=n.v,t=e.data,r.request(t),_e();case 3:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),_e=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,i();case 1:e=n.v,t=e.data,c(t)&&(0===t.data||null===t.data?(ge.value=0,we.value=null):(ge.value=1,we.value=t.data));case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),ke=function(n){var e=n.replace(/[^\d]/g,"");we.value=""===e||"0"===e?"":e},xe={class:"setting-card"},Ce={class:"setting-title"},Oe=s(wn({__name:"setting-card",props:{title:{default:""}},setup:function(n){return function(e,t){return bn(),_n("div",xe,[kn("div",Ce,xn(n.title),1),Cn(e.$slots,"default",{},void 0,!0)])}}}),[["__scopeId","data-v-125476a8"]]),Se={class:"flex items-center"},Pe={class:"w-250px"},je=wn({__name:"index",setup:function(n){var e=gn(he()),t=e.type,r=e.days,a=he().reset;return p().install&&_e(),On(function(){a()}),function(n,e){var a=Vn,o=Mn,i=En,l=Dn;return bn(),Sn(Oe,{title:"邮件保存时间"},{default:Pn(function(){return[kn("div",Se,[jn(o,{modelValue:Tn(t),"onUpdate:modelValue":e[0]||(e[0]=function(n){return Ln(t)?t.value=n:null})},{default:Pn(function(){return[jn(a,{value:0},{default:Pn(function(){return u(e[2]||(e[2]=[In("永久",-1)]))}),_:1}),jn(a,{class:"ml-24px",value:1},{default:Pn(function(){return u(e[3]||(e[3]=[In("自定义",-1)]))}),_:1})]}),_:1},8,["modelValue"]),kn("div",Pe,[jn(i,{modelValue:Tn(r),"onUpdate:modelValue":e[1]||(e[1]=function(n){return Ln(r)?r.value=n:null}),class:"flex-1 ml-16px",type:"number",min:1,max:999999,onInput:Tn(ke),disabled:0===Tn(t),controls:!1,placeholder:"请输入保存时间"},{append:Pn(function(){return u(e[4]||(e[4]=[In("天",-1)]))}),_:1},8,["modelValue","onInput","disabled"])]),jn(l,{class:"ml-24px",type:"primary",ghost:"",onClick:Tn(be)},{default:Pn(function(){return u(e[5]||(e[5]=[In(" 保存 ",-1)]))}),_:1},8,["onClick"])])]}),_:1})}}}),Ie=n("M",hn("MAIL_SETTING_WEB",function(){var n,t,r=Rn({id:0,site_name:"",status:!1,ssl_status:!1}),a=qn(function(){return"".concat(r.ssl_status?"https":"http","://").concat(r.site_name)}),u=Xn("安装 WebMail",{onRefresh:(n=f(l().m(function n(){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return et})},void 0,e.meta.url);case 1:(0,n.v.getInfo)();case 2:return n.a(2)}},n)})),function(){return n.apply(this,arguments)})}),o=Xn("添加已部署的网络邮件",{onRefresh:(t=f(l().m(function n(){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return et})},void 0,e.meta.url);case 1:(0,n.v.getInfo)();case 2:return n.a(2)}},n)})),function(){return t.apply(this,arguments)})}),i=yn(null),c=Rn({domain:"",php_version:null}),s={domain:{trigger:"change",validator:function(){return""!==c.domain.trim()||new Error("请输入域名")}},php_version:{trigger:"change",validator:function(){return null!==c.php_version||new Error("请选择PHP版本")}}},p=yn([]),d=ne(),m=d.loading,h=d.setLoading,y=yn(null),g=Rn({id:0,domain:null,path:""}),w={domain:{trigger:"change",validator:function(){return null!==g.domain||new Error("请选择站点")}}},b=yn([]),_=ne(),k=_.loading,x=_.setLoading;return{info:r,url:a,installModal:u,configModal:o,reset:function(){r.id=0,r.site_name="",r.status=!1,r.ssl_status=!1},resetInstallForm:function(){c.domain="",c.php_version=null},installForm:c,installRules:s,phpOptions:p,installFormRef:i,installLoading:m,installSetLoading:h,configForm:g,configRules:w,configFormRef:y,configLoading:k,configSetLoading:x,domainOptions:b,resetConfigForm:function(){g.id=0,g.domain=null,g.path=""}}})),Te=gn(Ie()),Le=Te.info,Ve=Te.installModal,Me=Te.configModal,Ee=Te.phpOptions,De=Te.installForm,Re=Te.installFormRef,qe=Te.configForm,Ae=Te.configFormRef,Fe=Te.domainOptions,ze=Ie(),Ue=ze.installSetLoading,Be=ze.configSetLoading,He=b(),Ne=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,d();case 1:e=n.v,t=e.data,c(t)&&(Le.value.id=t.id,Le.value.status=t.status,Le.value.site_name=t.site_name,Le.value.ssl_status=t.ssl_status);case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Ge=function(){Ve.value.data.onRefresh=Ne,m({title:Ve.value.title,area:48,showFooter:!0,compData:Ve.value.data,confirmText:"安装",component:function(){return v(function(){return e.import("./install-legacy.js?v=1763689792")},void 0,e.meta.url)}})},We=function(){var n,e=yn(!1);h({title:"卸载 WebMail",width:70,content:function(){return jn("div",null,[jn("div",{class:"mb-16px"},[In("卸载WebMail后，【"),Le.value.site_name,In("】已从网站列表中删除，网站无法访问，是否继续?")]),jn(An,{checked:e.value,onChange:function(n){e.value=n}},{default:function(){return[jn("div",{class:"text-desc leading-[1.4]"},[In("FTP、数据库、文档根目录在选择后将被完全删除，请谨慎！")])]}})])},onConfirm:(n=f(l().m(function n(){var t,r;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,y({id:Le.value.id,site_name:Le.value.site_name,force:e.value?1:0});case 1:t=n.v,r=t.data,He.request(r),Ne();case 2:return n.a(2)}},n)})),function(){return n.apply(this,arguments)})})},Ke=function(){m({title:Me.value.title,area:48,showFooter:!0,compData:Me.value.data,component:function(){return v(function(){return e.import("./config-legacy2.js?v=1763689792")},void 0,e.meta.url)}})},$e=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,ae();case 1:e=n.v,t=e.data,c(t)&&(Ee.value=t.versions.reverse().map(function(n){return{label:n.name,value:n.version}}),De.value.php_version=t.versions[0].version);case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Ze=n("t",f(l().m(function n(){return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,Ue(!0),n.n=1,Promise.all([$e()]);case 1:return n.p=1,Ue(!1),n.f(1);case 2:return n.a(2)}},n,null,[[0,,1,2]])}))),Je=n("u",function(){var n=f(l().m(function n(e){var t,r,a;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,null===(t=Re.value)||void 0===t?void 0:t.validate();case 1:return n.n=2,g({site_name:De.value.domain||"",php_version:De.value.php_version||""});case 2:r=n.v,a=r.data,He.request(a),a.status&&(Ve.value.data.onRefresh&&"function"==typeof Ve.value.data.onRefresh&&Ve.value.data.onRefresh(),e());case 3:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()),Qe=function(){var n=f(l().m(function n(){var e,t,r;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,_();case 1:e=n.v,t=e.data,k(t.data)&&(Fe.value=t.data.map(function(n){return{label:n.name,value:n.name,data:n}}),null!==(r=t.data)&&void 0!==r&&r.length&&(qe.value.domain=t.data[0].name,qe.value.path=t.data[0].path,qe.value.id=t.data[0].id));case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Ye=n("x",function(n){var e=Fe.value.find(function(e){return e.value===n}).data;c(e)&&(qe.value.id=e.id,qe.value.path=e.path)}),Xe=n("v",f(l().m(function n(){return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,Be(!0),n.n=1,Promise.all([Qe()]);case 1:return n.p=1,Be(!1),n.f(1);case 2:return n.a(2)}},n,null,[[0,,1,2]])}))),nt=n("w",function(){var n=f(l().m(function n(e){var t,r,a;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,null===(t=Ae.value)||void 0===t?void 0:t.validate();case 1:return n.n=2,w({id:qe.value.id,site_name:qe.value.domain||"",path:qe.value.path});case 2:r=n.v,a=r.data,He.request(a),a.status&&(e(),Me.value.data.onRefresh&&"function"==typeof Me.value.data.onRefresh&&Me.value.data.onRefresh());case 3:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()),et=Object.freeze(Object.defineProperty({__proto__:null,configInit:Xe,configOnConfirm:nt,getDomainOptions:Qe,getInfo:Ne,getPhpOptions:$e,goSite:function(){location.href="/site/php"},installInit:Ze,installOnConfirm:Je,onInstall:Ge,onShowConfig:Ke,onUninstall:We,onUpdateDomain:Ye},Symbol.toStringTag,{value:"Module"})),tt={class:"flex items-center"},rt={class:"flex items-center mr-32px text-base"},at={key:0,class:"flex items-center mr-24px text-base"},ut=wn({__name:"index",setup:function(n){var e=gn(Ie()),t=e.info,r=e.url,a=Ie().reset;return Ne(),On(function(){a()}),function(n,e){var a=x,o=Dn;return bn(),Sn(Oe,{title:"WebMail"},{default:Pn(function(){return[kn("div",tt,[kn("div",rt,[e[0]||(e[0]=kn("span",{class:"mr-10px"},"安装状态:",-1)),kn("span",{class:Fn(Tn(t).status?"text-primary":"text-dangerDark")},xn(Tn(t).status?"已安装":"未安装"),3)]),Tn(t).status?(bn(),_n("div",at,[e[1]||(e[1]=kn("span",{class:"mr-10px"},"URL:",-1)),jn(a,{href:Tn(r),target:"_blank"},{default:Pn(function(){return[In(xn(Tn(r)),1)]}),_:1},8,["href"])])):zn("",!0),Tn(t).status?(bn(),Sn(o,{key:1,onClick:Tn(We)},{default:Pn(function(){return u(e[2]||(e[2]=[In(" 卸载 ",-1)]))}),_:1},8,["onClick"])):(bn(),_n(Un,{key:2},[jn(o,{type:"primary",ghost:"",onClick:Tn(Ge)},{default:Pn(function(){return u(e[3]||(e[3]=[In(" 安装 ",-1)]))}),_:1},8,["onClick"]),jn(o,{class:"ml-10px",onClick:Tn(Ke)},{default:Pn(function(){return u(e[4]||(e[4]=[kn("span",null,"添加已有的服务",-1)]))}),_:1},8,["onClick"])],64))])]}),_:1})}}}),ot=hn("MAIL_SETTING_MONITOR",function(){var n=yn(!1),e=ne(),t=e.loading,r=e.setLoading;return{status:n,loading:t,setLoading:r,reset:function(){n.value=!1,r(!1)}}}),it=gn(ot()).status,lt=ot().setLoading,ct=b(),st=function(){var n=f(l().m(function n(e){return l().w(function(n){for(;;)switch(n.n){case 0:h({title:e?"启用服务状态监控":"关闭服务状态监控",content:e?"检查邮局服务的状态，并在停止时自动重新启动":"关闭后，系统将不再监控邮局服务状态",onConfirm:function(){var n=f(l().m(function n(){var t,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e?C():O();case 1:t=n.v,r=t.data,ct.request(r),ft(),n.n=3;break;case 2:n.p=2,n.v,it.value=!e,ct.error("操作失败");case 3:return n.a(2)}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),onCancel:function(){it.value=!e}});case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),ft=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,lt(!0),n.n=1,S();case 1:e=n.v,t=e.data,it.value=!!t.status,n.n=3;break;case 2:n.p=2,n.v,it.value=!1;case 3:return n.p=3,lt(!1),n.f(3);case 4:return n.a(2)}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),pt={class:"flex items-center"},vt=wn({__name:"index",setup:function(n){var e=p(),t=gn(ot()),r=t.status,a=t.loading,u=ot().reset;return e.install&&ft(),On(function(){u()}),function(n,e){var t=Bn;return bn(),Sn(Oe,{title:"监控"},{default:Pn(function(){return[kn("div",pt,[e[0]||(e[0]=kn("div",{class:"text-base mr-[3rem]"},"服务停止后自动启动",-1)),jn(t,{"model-value":Tn(r),loading:Tn(a),onChange:Tn(st)},null,8,["model-value","loading","onChange"])])]}),_:1})}}}),dt=hn("MAIL_SETTING_SERVICE",function(){var n=ee([{prop:"name",label:"名称"},{prop:"status",label:"状态",render:function(n){return jn(ue,{modelValue:n.status,onClick:(t=f(l().m(function t(){return l().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,v(function(){return Promise.resolve().then(function(){return bt})},void 0,e.meta.url);case 1:(0,t.v.onChangeStatus)(n);case 2:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})},null);var t}},oe(function(n){return[{title:n.status?"停止":"开启",onClick:(u=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return bt})},void 0,e.meta.url);case 1:(0,n.v.onChangeStatus)(t);case 2:return n.a(2)}},n)})),function(n){return u.apply(this,arguments)})},{title:"重启",onClick:(a=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return bt})},void 0,e.meta.url);case 1:(0,n.v.onRestart)(t);case 2:return n.a(2)}},n)})),function(n){return a.apply(this,arguments)})},{title:"修复",onClick:(r=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return bt})},void 0,e.meta.url);case 1:(0,n.v.onRepair)(t);case 2:return n.a(2)}},n)})),function(n){return r.apply(this,arguments)})},{title:"设置",onClick:(t=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return bt})},void 0,e.meta.url);case 1:(0,n.v.onShowConfig)(t);case 2:return n.a(2)}},n)})),function(n){return t.apply(this,arguments)})}];var t,r,a,u})]),t=n.table,r=n.columns,a=Xn(),u=ne(),o=u.loading,i=u.setLoading;return{table:t,columns:r,loading:o,setLoading:i,configModal:a,reset:function(){i(!1),t.data=[],t.total=0}}}),mt=gn(dt()),ht=mt.table,yt=mt.configModal,gt=dt().setLoading,wt=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,gt(!0),n.n=1,P();case 1:e=n.v,t=e.data,c(t)&&(ht.value.data=[],ht.value.data.push({key:"dovecot",name:"Dovecot",status:t.dovecot}),t.change_rspamd?ht.value.data.push({key:"opendkim",name:"Opendkim",status:t.opendkim}):ht.value.data.push({key:"rspamd",name:"Rspamd",status:t.rspamd}),ht.value.data.push({key:"postfix",name:"Postfix",status:t.postfix}));case 2:return n.p=2,gt(!1),n.f(2);case 3:return n.a(2)}},n,null,[[0,,2,3]])}));return function(){return n.apply(this,arguments)}}(),bt=Object.freeze(Object.defineProperty({__proto__:null,getList:wt,onChangeStatus:function(n){var e;h({title:n.status?"正在停止 ".concat(n.key," 服务"):"正在启动 ".concat(n.key," 服务"),content:n.status?"确定要停止 ".concat(n.key," 服务吗？"):"确定要启动 ".concat(n.key," 服务吗？"),onConfirm:(e=f(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:j({request:I({service:n.key,type:n.status?"stop":"start"}),message:!0,success:function(){wt()}});case 1:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})})},onRepair:function(n){var e,t="确定要修复 ".concat(n.key," 服务吗？");"dovecot"===n.key?t="配置将恢复为默认设置，并使以下配置失效：SSL。确认继续吗？":"postfix"===n.key&&(t="配置将恢复为默认设置，并使以下配置失效：SSL、防垃圾邮件、BCC、SMTP 中继、邮件转发。确认继续吗？"),h({title:"修复 ".concat(n.key," 服务"),content:t,onConfirm:(e=f(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:j({request:T({service:n.key,type:"repair"}),message:!0,success:function(){wt()}});case 1:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})})},onRestart:function(n){var e;h({title:"重启 ".concat(n.key," 服务"),content:"确定要重启 ".concat(n.key," 服务吗？"),onConfirm:(e=f(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:j({request:I({service:n.key,type:"restart"}),message:!0,success:function(){wt()}});case 1:return e.a(2)}},e)})),function(){return e.apply(this,arguments)})})},onShowConfig:function(n){yt.value.data.row=n,yt.value.title="在线编辑 【".concat(n.key,"_配置文件】"),yt.value.show=!0,m({title:yt.value.title,area:[80,60],component:function(){return v(function(){return e.import("./config-legacy3.js?v=1763689792")},void 0,e.meta.url)},compData:yt.value.data,showFooter:!0,confirmText:"保存"})}},Symbol.toStringTag,{value:"Module"})),_t=wn({__name:"index",setup:function(n){var e=gn(dt()),t=e.table,r=e.loading,a=dt(),u=a.columns,o=a.reset;return p().install&&wt(),On(function(){o()}),function(n,e){var a=L;return bn(),Sn(Oe,{title:"服务状态"},{default:Pn(function(){return[jn(a,{loading:Tn(r),"loading-num":3,data:Tn(t).data,column:Tn(u)},null,8,["loading","data","column"])]}),_:1})}}}),kt=yn(!1),xt=yn(!1),Ct=function(n){var e;h({title:"".concat(n?"开启":"关闭","自动续期SSL证书"),content:"".concat(n?"开启后，系统将自动续期SSL证书":"关闭后，系统将不再自动续期SSL证书"),onConfirm:(e=f(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:j({loading:"正在".concat(n?"开启":"关闭","自动续期SSL证书"),message:!0,request:n?V():M(),success:function(){Ot()}});case 1:return e.a(2)}},e)})),function(){return e.apply(this,arguments)}),onCancel:function(){kt.value=!n}})},Ot=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return xt.value=!0,n.p=1,n.n=2,E();case 2:e=n.v,t=e.data,kt.value=t.status,xt.value=!1,n.n=4;break;case 3:n.p=3,n.v,kt.value=!1;case 4:return n.a(2)}},n,null,[[1,3]])}));return function(){return n.apply(this,arguments)}}(),St={class:"flex items-center"},Pt=wn({__name:"index",setup:function(n){return Hn(function(){Ot()}),function(n,e){var t=Bn;return bn(),Sn(Oe,{title:"自动续期SSL证书"},{default:Pn(function(){return[kn("div",St,[e[0]||(e[0]=kn("div",{class:"text-base mr-[3rem]"},"自动续期",-1)),jn(t,{"model-value":Tn(kt),loading:Tn(xt),onChange:Tn(Ct)},null,8,["model-value","loading","onChange"])])]}),_:1})}}}),jt=s(wn({__name:"index",setup:function(n){return function(n,e){return bn(),_n("div",null,[jn(ut),jn(je),jn(vt),jn(Pt),jn(_t)])}}}),[["__scopeId","data-v-f3d68613"]]),It=hn("MAIL_BCC",function(){var n,t,r,a=Rn({p:1,size:10}),u=Xn("添加密抄",{isEdit:!1,row:void 0,onRefresh:(n=f(l().m(function n(){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return Ft})},void 0,e.meta.url);case 1:(0,n.v.getList)();case 2:return n.a(2)}},n)})),function(){return n.apply(this,arguments)})}),o=new Map([["sender","发送时抄送"],["recipient","接收时抄送"]]),i=ee([{prop:"user",label:"被抄送者",showOverflowTooltip:!0},{prop:"forward_user",label:"抄送到",showOverflowTooltip:!0},{prop:"domain",label:"域名",showOverflowTooltip:!0},{prop:"type",label:"抄送类型",render:function(n){return o.get(n.type)}},{prop:"active",label:"状态",render:function(n){return jn("div",{class:"w-[2rem]"},[1===n.active?jn(D,{icon:"el-circle-check",class:"!text-primary"},null):jn(D,{icon:"el-circle-close",class:"!text-dangerDark"},null)])}},oe([{title:"编辑",onClick:(r=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return Ft})},void 0,e.meta.url);case 1:(0,n.v.onShowEdit)(t);case 2:return n.a(2)}},n)})),function(n){return r.apply(this,arguments)})},{title:"删除",onClick:(t=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return Ft})},void 0,e.meta.url);case 1:(0,n.v.onDel)(t);case 2:return n.a(2)}},n)})),function(n){return t.apply(this,arguments)})}])]),c=i.table,s=i.columns;return{search:a,formModal:u,table:c,columns:s,reset:function(){a.p=1,a.size=10,c.data=[],c.total=0}}}),Tt=gn(It()),Lt=Tt.search,Vt=Tt.table,Mt=Tt.formModal,Et=b(),Dt=function(){Mt.value.data.isEdit=!1,Mt.value.title="添加密抄",Mt.value.show=!0,m({title:Mt.value.title,area:54,component:function(){return v(function(){return e.import("./index-legacy363.js?v=1763689792")},void 0,e.meta.url)},compData:Mt.value.data,showFooter:!0})},Rt=function(){var n=f(l().m(function n(e){var t,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,h({title:"删除转发",content:"是否删除转发设置?"});case 1:return n.n=2,q({type:e.type,user:e.user,forward_user:e.forward_user});case 2:t=n.v,r=t.data,Et.request(r),qt(),n.n=4;break;case 3:n.p=3,n.v;case 4:return n.a(2)}},n,null,[[0,3]])}));return function(e){return n.apply(this,arguments)}}(),qt=function(){var n=f(l().m(function n(){var e,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,Vt.value.loading=!0,n.n=1,R();case 1:e=n.v,r=e.data,Vt.value.data=[],c(r.data)&&Object.entries(r.data).forEach(function(n){var e,r=a(n,2),o=r[0],i=r[1];k(i)&&(e=Vt.value.data).push.apply(e,u(i.map(function(n){return t(t({},n),{},{type:o})})))});case 2:return n.p=2,Vt.value.loading=!1,n.f(2);case 3:return n.a(2)}},n,null,[[0,,2,3]])}));return function(){return n.apply(this,arguments)}}(),At=function(){Lt.value.p=1,qt()},Ft=Object.freeze(Object.defineProperty({__proto__:null,getList:qt,onDel:Rt,onShowAdd:Dt,onShowEdit:function(n){Mt.value.data.isEdit=!0,Mt.value.data.row=n,Mt.value.title="编辑密抄",Mt.value.show=!0,m({title:Mt.value.title,area:54,component:function(){return v(function(){return e.import("./index-legacy363.js?v=1763689792")},void 0,e.meta.url)},compData:Mt.value.data,showFooter:!0})},refresh:At},Symbol.toStringTag,{value:"Module"})),zt=wn({__name:"index",setup:function(n){var e=gn(It()).table,t=It(),r=t.columns,a=t.reset;return qt(),On(function(){a()}),function(n,t){var a=Dn,o=L,i=ce,l=Nn("bt-loading");return bn(),Sn(i,null,{"header-left":Pn(function(){return[jn(a,{type:"primary",onClick:Tn(Dt)},{default:Pn(function(){return u(t[0]||(t[0]=[In("添加密抄",-1)]))}),_:1},8,["onClick"])]}),"header-right":Pn(function(){return[jn(a,{onClick:Tn(At)},{default:Pn(function(){return u(t[1]||(t[1]=[In("刷新",-1)]))}),_:1},8,["onClick"])]}),content:Pn(function(){return[Gn(jn(o,{data:Tn(e).data,column:Tn(r)},null,8,["data","column"]),[[l,Tn(e).loading]])]}),_:1})}}}),Ut=n("f",yn(0)),Bt=yn(!1),Ht=n("i",yn(!1)),Nt=n("d",yn([])),Gt=n("m",yn([])),Wt=n("a",yn({type:"mail",forward_type:0,rule:"all",rule_str:"",receiver:"",status:!0,domain:""})),Kt=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,A({dtype:Ut.value});case 1:return e=n.v,t=e.data,n.a(2,{data:t.data,total:t.total});case 2:return n.p=2,n.v,n.a(2,{data:[],total:0})}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),$t=function(){var n=f(l().m(function n(e,t,r,a,u,o){var i,c,s,p;return l().w(function(n){for(;;)switch(n.n){case 0:return i=a.label,c=a.value,s=new Map([["delete","批量删除已选的转发规则"]]),p=function(){var n=f(l().m(function n(){var e,t,a;return l().w(function(n){for(;;)switch(n.n){case 0:e=new Map([["delete",H]]).get(c),a=c,n.n="delete"===a?1:4;break;case 1:if(t=r.value.map(function(n){return n.address}).join(","),!e){n.n=3;break}return n.n=2,e({forward_type:Ut.value,address:t});case 2:return n.a(2,n.v);case 3:return n.a(3,4);case 4:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),n.n=1,e({title:"批量".concat(i),content:"".concat(s.get(c),"，是否继续操作！"),column:[{label:"转发规则",prop:"address"},ie()],onConfirm:function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,p();case 1:e=n.v,Bt.value=!0,t=[],e.status?r.value.forEach(function(n){t.push({name:n.address,status:!0,msg:"删除成功"})}):r.value.forEach(function(n){t.push({name:n.address,status:!1,msg:"删除失败"})}),u&&u(),se(t,{title:"".concat(i,"转发规则")});case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}()});case 1:return n.a(2)}},n)}));return function(e,t,r,a,u,o){return n.apply(this,arguments)}}(),Zt=F([{label:"删除",value:"delete",event:$t}]),Jt=function(){var n=f(l().m(function n(t,r){return l().w(function(n){for(;;)switch(n.n){case 0:Wt.value.forward_type=Ut.value,m({title:t?"编辑转发规则".concat(r.forwarder):"添加转发规则",area:54,component:function(){return v(function(){return e.import("./index-legacy364.js?v=1763689792")},void 0,e.meta.url)},compData:{isEdit:t,row:r},showFooter:!0});case 1:return n.a(2)}},n)}));return function(e,t){return n.apply(this,arguments)}}(),Qt=n("h",function(n){return Wt.value.type=""===n.rule?"mail":"wildcard",Wt.value.status=!!n.active,Wt.value.domain=n.domain,Wt.value.rule=n.rule,Wt.value.receiver=n.goto,Wt.value.forward_type=Ut.value,""===n.rule?Wt.value.rule_str=n.address:Wt.value.rule_str=n.rule_str,Wt.value}),Yt=(n("c",f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return Ht.value=!0,n.p=1,n.n=2,z();case 2:e=n.v,t=e.data.data,Nt.value=t.map(function(n){return{label:n,value:n}}),n.n=4;break;case 3:n.p=3,n.v;case 4:return n.p=4,Ht.value=!1,n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}))),n("g",function(){var n=f(l().m(function n(e){var t,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,N({domain:e});case 1:t=n.v,r=t.data.data,Gt.value=r.map(function(n){return{label:n.username,value:n.username}}),n.n=3;break;case 2:n.p=2,n.v;case 3:return n.a(2)}},n,null,[[0,2]])}));return function(e){return n.apply(this,arguments)}}()),n("r",function(){Wt.value={type:"mail",forward_type:0,rule:"all",rule_str:"",receiver:"",status:!0,domain:""}}),function(n){var e=t({},n);return e.status=e.status?1:0,"wildcard"!==e.type&&(e.rule=""),1===e.forward_type&&(delete e.rule_str,delete e.rule),delete e.type,e}),Xt=(n("b",function(){var n=f(l().m(function n(e){var t,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,t=Yt(e),n.n=1,j({request:U(t),loading:"添加中...",message:!0});case 1:return(r=n.v).status&&(Bt.value=!0),n.a(2,r.status);case 2:return n.p=2,n.v,n.a(2,!1)}},n,null,[[0,2]])}));return function(e){return n.apply(this,arguments)}}()),n("e",function(){var n=f(l().m(function n(e,r){var a,u;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,a=Yt(e),n.n=1,j({request:B(t(t({},a),{},{address:r})),loading:"编辑中...",message:!0});case 1:return(u=n.v).status&&(Bt.value=!0),n.a(2,u.status);case 2:return n.p=2,n.v,n.a(2,!1)}},n,null,[[0,2]])}));return function(e,t){return n.apply(this,arguments)}}())),nr=function(){var n=f(l().m(function n(e){return l().w(function(n){for(;;)switch(n.n){case 0:h({title:"删除转发规则【".concat(e.forwarder,"】"),content:"是否确认删除该转发规则？",onConfirm:function(){var n=f(l().m(function n(){return l().w(function(n){for(;;)switch(n.n){case 0:j({request:H({forward_type:Ut.value,address:e.address}),loading:"删除中...",message:!0,success:function(){Bt.value=!0}});case 1:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}()});case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),er=wn({__name:"index",setup:function(n){var e=[{content:'<span class="text-dangerDark">转发优先级：准确的邮箱转发>域名转发到域名>捕获前缀、后缀、全部邮箱>捕获不存在的邮箱</span>',isHtml:!0},{content:'<span class="text-dangerDark">捕获所有的邮箱和捕获不存在的邮箱不能同时存在</span>',isHtml:!0},{content:'<span class="text-dangerDark">除准确的邮箱转发外，其它所有转发均支持在邮箱不存在时也能转发（可用于实现“无限邮”）</span>',isHtml:!0}],t=G({request:Kt,columns:[le({key:"address"}),{label:"被转发者",prop:"forwarder",showOverflowTooltip:!0},{label:"转发到",prop:"goto",showOverflowTooltip:!0},{label:"域名",prop:"domain",isHide:function(){return 0===Ut.value},showOverflowTooltip:!0},{label:"创建时间",prop:"created"},{label:"修改时间",prop:"modified"},{label:"状态",prop:"active",render:function(n){return jn(Bn,{modelValue:n.active,"onUpdate:modelValue":function(e){return n.active=e},size:"small",activeValue:1,inactiveValue:0,onChange:(e=f(l().m(function e(t){return l().w(function(e){for(;;)switch(e.n){case 0:return n.active=t,e.n=1,Xt(Qt(n),n.address);case 1:return e.a(2)}},e)})),function(n){return e.apply(this,arguments)})},null);var e}},oe([{title:"编辑",onClick:function(n){Jt(!0,n)}},{title:"删除",onClick:function(n){nr(n)}}])],extension:[Zt,W(Bt)]}),r=t.BtTable,a=t.BtBatch,o=t.BtRefresh;return function(n,t){var i=Dn,l=K,c=ce,s=$;return bn(),_n("div",null,[jn(c,null,{"header-left":Pn(function(){return[jn(i,{type:"primary",onClick:t[0]||(t[0]=function(n){return Tn(Jt)(!1)})},{default:Pn(function(){return u(t[3]||(t[3]=[In("添加",-1)]))}),_:1})]}),"header-right":Pn(function(){return[jn(l,{type:"button",size:"default",modelValue:Tn(Ut),"onUpdate:modelValue":t[1]||(t[1]=function(n){return Ln(Ut)?Ut.value=n:null}),options:[{label:"转发到邮箱",value:0},{label:"转发到域名",value:1}],onChange:t[2]||(t[2]=function(){Bt.value=!0}),class:"mr-[1rem]"},null,8,["modelValue"]),jn(Tn(o))]}),content:Pn(function(){return[jn(Tn(r))]}),"footer-left":Pn(function(){return[jn(Tn(a))]}),_:1}),jn(s,{class:"mt-[1rem]",options:e})])}}}),tr=hn("MAIL_BACKUP_PLAN",function(){var n=yn(!1),e=Rn({open:!1,cycle:"week",week:"1",hour:1,minute:30,backupTo:"localhost",save:3}),t=yn([{label:"服务器磁盘",value:"localhost"}]);return{open:n,form:e,toOptions:t,weekOptions:[{label:"周一",value:"1"},{label:"周二",value:"2"},{label:"周三",value:"3"},{label:"周四",value:"4"},{label:"周五",value:"5"},{label:"周六",value:"6"},{label:"周日",value:"0"}],cycleOptions:[{label:"每周",value:"week"},{label:"每天",value:"day"}],reset:function(){e.cycle="week",e.week="1",e.hour=1,e.minute=30,e.backupTo="localhost",e.save=3,e.open=!1,n.value=!1}}}),rr=gn(tr()),ar=rr.form,ur=rr.open,or=rr.toOptions,ir=function(){var n={type:ar.value.cycle,hour:ar.value.hour,minute:ar.value.minute,backupTo:ar.value.backupTo,save:ar.value.save};return"week"===ar.value.cycle&&(n=Object.assign(n,{week:ar.value.week})),n},lr=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,Z(ir());case 1:e=n.v,t=e.data,r.request(t),fr();case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),cr=function(n){var e;ur.value&&!1===n&&h({title:"关闭邮件备份",content:"确认关闭当前备份计划?",onConfirm:(e=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,J();case 1:e=n.v,t=e.data,r.request(t),ar.value.open=!1;case 2:return n.a(2)}},n)})),function(){return e.apply(this,arguments)}),onCancel:function(){ar.value.open=!n}})},sr=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,Q();case 1:e=n.v,t=e.data,k(t.data)&&(or.value=t.data.map(function(n){return{label:n.name,value:n.value}}),or.value.unshift({label:"服务器磁盘",value:"localhost"}));case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),fr=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,Y();case 1:e=n.v,t=e.data,c(t)&&t.hasOwnProperty("type")&&(ur.value=!0,ar.value.open=!0,ar.value.cycle=t.type,ar.value.week=t.where1,ar.value.hour=t.where_hour,ar.value.minute=t.where_minute,ar.value.backupTo=t.backupTo,ar.value.save=t.save),n.n=3;break;case 2:n.p=2,n.v,ur.value=!1,ar.value.open=!1;case 3:return n.a(2)}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),pr=function(n){var e=parseInt(n);isNaN(e)||e<1?ar.value.save=1:ar.value.save=e},vr=function(n){var e=parseInt(n);isNaN(e)||e<0?ar.value.hour=0:ar.value.hour=e>23?23:e},dr=function(n){var e=parseInt(n);isNaN(e)||e<0?ar.value.minute=0:ar.value.minute=e>59?59:e},mr={class:"flex items-center"},hr={class:"w-100px"},yr={class:"w-120px ml-16px"},gr=wn({__name:"period",props:{value:{default:function(){return{cycle:"week",week:"1",hour:1,minute:30}}},valueModifiers:{}},emits:["update:value"],setup:function(n){var e=tr(),t=e.weekOptions,r=e.cycleOptions,a=Wn(n,"value");return function(n,e){var o=X,i=En;return bn(),_n("div",mr,[kn("div",hr,[jn(o,{modelValue:a.value.cycle,"onUpdate:modelValue":e[0]||(e[0]=function(n){return a.value.cycle=n}),options:Tn(r)},null,8,["modelValue","options"])]),Gn(kn("div",yr,[jn(o,{modelValue:a.value.week,"onUpdate:modelValue":e[1]||(e[1]=function(n){return a.value.week=n}),options:Tn(t)},null,8,["modelValue","options"])],512),[[Kn,"week"===a.value.cycle]]),kn("div",null,[jn(i,{modelValue:a.value.hour,"onUpdate:modelValue":e[2]||(e[2]=function(n){return a.value.hour=n}),class:"ml-16px !w-140px",type:"number",min:0,max:23,controls:!1,onInput:Tn(vr)},{append:Pn(function(){return u(e[4]||(e[4]=[In("小时",-1)]))}),_:1},8,["modelValue","onInput"])]),kn("div",null,[jn(i,{modelValue:a.value.minute,"onUpdate:modelValue":e[3]||(e[3]=function(n){return a.value.minute=n}),class:"ml-16px !w-140px",type:"number",min:0,max:59,controls:!1,onInput:Tn(dr)},{append:Pn(function(){return u(e[5]||(e[5]=[In("分钟",-1)]))}),_:1},8,["modelValue","onInput"])])])}}}),wr={class:"p-20px"},br={class:"flex-1"},_r={class:"flex items-center"},kr={class:"w-140px"},xr=wn({__name:"index",setup:function(n){var e=gn(tr()),t=e.form,r=e.toOptions,a=tr().reset;return fr(),sr(),On(function(){a()}),function(n,e){var a=Bn,o=$n,i=X,l=En,c=Dn,s=Zn,f=Jn;return bn(),Sn(f,{class:"mb-16px",shadow:"never"},{header:Pn(function(){return u(e[4]||(e[4]=[kn("div",{class:"card-header"},[kn("span",null,"备份计划")],-1)]))}),default:Pn(function(){return[kn("div",wr,[jn(s,{model:Tn(t)},{default:Pn(function(){return[jn(o,{label:"邮件备份"},{default:Pn(function(){return[jn(a,{modelValue:Tn(t).open,"onUpdate:modelValue":e[0]||(e[0]=function(n){return Tn(t).open=n}),onChange:Tn(cr)},null,8,["modelValue","onChange"])]}),_:1}),jn(o,{label:"执行周期"},{default:Pn(function(){return[kn("div",br,[jn(gr,{value:Tn(t),"onUpdate:value":e[1]||(e[1]=function(n){return Ln(t)?t.value=n:null})},null,8,["value"])])]}),_:1}),kn("div",_r,[jn(o,{label:"备份到"},{default:Pn(function(){return[kn("div",kr,[jn(i,{modelValue:Tn(t).backupTo,"onUpdate:modelValue":e[2]||(e[2]=function(n){return Tn(t).backupTo=n}),options:Tn(r)},null,8,["modelValue","options"])])]}),_:1}),jn(o,{label:"保留最新","label-width":"auto"},{default:Pn(function(){return[jn(l,{modelValue:Tn(t).save,"onUpdate:modelValue":e[3]||(e[3]=function(n){return Tn(t).save=n}),class:"!w-140px",type:"number",min:1,controls:!1,onInput:Tn(pr)},{append:Pn(function(){return u(e[5]||(e[5]=[In("份",-1)]))}),_:1},8,["modelValue","onInput"])]}),_:1})]),jn(o,{label:" ","show-feedback":!1},{default:Pn(function(){return[jn(c,{type:"primary",onClick:Tn(lr)},{default:Pn(function(){return u(e[6]||(e[6]=[In("保存",-1)]))}),_:1},8,["onClick"])]}),_:1})]}),_:1},8,["model"])])]}),_:1})}}}),Cr=hn("MAIL_BACKUP_IMPORT",function(){var n,t,r=Rn({path:"/www/backup/path/"}),a=ee([{prop:"name",label:"文件名"},{prop:"mtime",label:"导入时间",render:function(n){return nn(n.mtime)}},oe([{title:"恢复",onClick:(t=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return Dr})},void 0,e.meta.url);case 1:(0,n.v.onRestore)(t);case 2:return n.a(2)}},n)})),function(n){return t.apply(this,arguments)})},{title:"删除",onClick:(n=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,v(function(){return Promise.resolve().then(function(){return Dr})},void 0,e.meta.url);case 1:(0,n.v.onDelete)(t);case 2:return n.a(2)}},n)})),function(e){return n.apply(this,arguments)})}],{width:120,fixed:"right",label:"操作"})]),u=a.table,o=a.columns,i=ne(),c=i.loading,s=i.setLoading;return{search:r,table:u,columns:o,loading:c,setLoading:s,reset:function(){u.data=[],u.total=0}}}),Or=gn(Cr()),Sr=Or.search,Pr=Or.table,jr=Cr().setLoading,Ir=function(){te({path:Sr.value.path,uploadData:{accept:".gz,.tar,.tar.gz,.zip",multiple:!0},refreshEvent:function(n,e){Er(),e()}})},Tr=function(){var n;fe({type:"file",change:(n=f(l().m(function n(e){return l().w(function(n){for(;;)switch(n.n){case 0:j({request:en({file_path:e}),message:!0});case 1:return n.a(2)}},n)})),function(e){return n.apply(this,arguments)})})},Lr=function(){var n=f(l().m(function n(e){var t,a;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,h({title:"恢复备份",content:"确认恢复当前备份?"});case 1:return n.n=2,en({file_path:"".concat(Sr.value.path,"/").concat(e.name)});case 2:t=n.v,a=t.data,r.request(a);case 3:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),Vr=function(){var n=f(l().m(function n(e){var t,a;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,h({title:"删除备份",content:"确认删除当前备份?"});case 1:return n.n=2,rn({path:"".concat(Sr.value.path,"/").concat(e.name)});case 2:t=n.v,a=t.data,r.request(a),Er();case 3:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),Mr=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,an();case 1:e=n.v,t=e.data,c(t)&&(Sr.value.path=un(t.data)?t.data:"");case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),Er=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,jr(!0),n.n=1,Mr();case 1:return n.n=2,tn(Qn(Sr.value));case 2:e=n.v,t=e.data,Pr.value.data=k(t.data)?t.data:[];case 3:return n.p=3,jr(!1),n.f(3);case 4:return n.a(2)}},n,null,[[0,,3,4]])}));return function(){return n.apply(this,arguments)}}(),Dr=Object.freeze(Object.defineProperty({__proto__:null,getList:Er,getPath:Mr,onDelete:Vr,onRestore:Lr,onSelect:Tr,onUpload:Ir},Symbol.toStringTag,{value:"Module"})),Rr={class:"px-20px py-16px"},qr=wn({__name:"index",setup:function(n){var e=gn(Cr()),t=e.loading,r=e.table,a=Cr(),o=a.columns,i=a.reset;return Er(),On(function(){i()}),function(n,e){var a=Dn,i=L,l=ce,c=Jn,s=Nn("bt-loading");return bn(),Sn(c,{shadow:"never"},{header:Pn(function(){return u(e[0]||(e[0]=[kn("div",{class:"card-header"},[kn("span",null,"邮件导入")],-1)]))}),default:Pn(function(){return[kn("div",Rr,[jn(l,null,{"header-left":Pn(function(){return[jn(a,{onClick:Tn(Ir)},{default:Pn(function(){return u(e[1]||(e[1]=[In("本地上传",-1)]))}),_:1},8,["onClick"]),jn(a,{onClick:Tn(Tr)},{default:Pn(function(){return u(e[2]||(e[2]=[In("在服务器中选择",-1)]))}),_:1},8,["onClick"])]}),content:Pn(function(){return[Gn(jn(i,{"max-height":340,bordered:!0,data:Tn(r).data,column:Tn(o)},null,8,["data","column"]),[[s,Tn(t)]])]}),_:1})])]}),_:1})}}}),Ar=wn({__name:"index",setup:function(n){return function(n,e){return bn(),_n("div",null,[jn(xr),jn(qr)])}}}),Fr=yn(!1);Xn("添加IP标签",{isEdit:!1,row:void 0,onRefresh:(me=f(l().m(function n(){return l().w(function(n){for(;;)switch(n.n){case 0:Fr.value=!0;case 1:return n.a(2)}},n)})),function(){return me.apply(this,arguments)})});var zr=n("j",yn({tag:"",ip:"",syslog:"",helo:"",ipv:4,binds:""})),Ur=n("l",yn([]));yn([]);var Br=n("s",yn(!1)),Hr=function(){var n=f(l().m(function n(e,t,r,a,u,o){var i,c,s,p;return l().w(function(n){for(;;)switch(n.n){case 0:return i=a.label,c=a.value,s=new Map([["delete","批量删除已选的IP标签"]]),p=function(){var n=f(l().m(function n(){var e,t,a;return l().w(function(n){for(;;)switch(n.n){case 0:e=new Map([["delete",fn]]).get(c),a=c,n.n="delete"===a?1:4;break;case 1:if(t=r.value.map(function(n){return n.tag}).join(","),!e){n.n=3;break}return n.n=2,e({tags:t});case 2:return n.a(2,n.v);case 3:return n.a(3,4);case 4:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),n.n=1,e({title:"批量".concat(i),content:"".concat(s.get(c),"，是否继续操作！"),column:[{label:"标签名",prop:"tag"},ie()],onConfirm:function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,p();case 1:e=n.v,Fr.value=!0,t=[],e.status?r.value.forEach(function(n){t.push({name:n.tag,status:!0,msg:"删除成功"})}):r.value.forEach(function(n){t.push({name:n.tag,status:!1,msg:"删除失败"})}),u&&u(),se(t,{title:"".concat(i,"标签")});case 2:return n.a(2)}},n)}));return function(){return n.apply(this,arguments)}}()});case 1:return n.a(2)}},n)}));return function(e,t,r,a,u,o){return n.apply(this,arguments)}}(),Nr=F([{label:"批量删除",value:"delete",event:Hr}]),Gr=function(){var n=f(l().m(function n(){var e,t;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,on();case 1:return e=n.v,t=e.data,n.a(2,{data:t.data||[],total:0});case 2:return n.p=2,n.v,n.a(2,{data:[],total:0})}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}(),Wr=function(){var n=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:m({title:"添加IP标签",area:50,component:function(){return v(function(){return e.import("./index-legacy365.js?v=1763689792")},void 0,e.meta.url)},compData:{isEdit:!1},btn:!0});case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),Kr=(n("p",f(l().m(function n(){var e,t,r;return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,Br.value=!0,n.n=1,ln();case 1:e=n.v,t=e.data,Object.keys(t).length>0&&(r=Object.values(t).flatMap(function(n){return Object.entries(n)}),Ur.value=r.map(function(n){var e=a(n,2),t=(e[0],e[1]);return{label:"".concat(t.public_ip),value:"".concat(t.addr),type:t.type}})),n.n=3;break;case 2:n.p=2,n.v;case 3:return n.p=3,Br.value=!1,n.f(3);case 4:return n.a(2)}},n,null,[[0,2,3,4]])}))),n("k",function(n){var e,t=null===(e=Ur.value.find(function(e){return e.value===n}))||void 0===e?void 0:e.type;return t?"IPv4"===t?4:6:4}),n("q",function(){zr.value={tag:"",ip:"",syslog:"",helo:"",ipv:4,binds:""}}),n("o",function(){var n=f(l().m(function n(e){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,j({request:cn(e),loading:"添加中...",message:!0});case 1:if(!n.v.status){n.n=2;break}return Fr.value=!0,n.a(2,!0);case 2:return n.a(2,!1)}},n)}));return function(e){return n.apply(this,arguments)}}()),n("n",function(){var n=f(l().m(function n(e){return l().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,j({request:sn(e),loading:"编辑中...",message:!0});case 1:if(!n.v.status){n.n=2;break}return Fr.value=!0,n.a(2,!0);case 2:return n.a(2,!1)}},n)}));return function(e){return n.apply(this,arguments)}}()),function(){var n=f(l().m(function n(e){return l().w(function(n){for(;;)switch(n.n){case 0:h({title:"删除【".concat(e.tag,"】标签"),content:"确定删除【".concat(e.tag,"】标签吗？"),onConfirm:function(){var n=f(l().m(function n(){return l().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,fn({tags:e.tag});case 1:Fr.value=!0,n.n=3;break;case 2:n.p=2,n.v;case 3:return n.a(2)}},n,null,[[0,2]])}));return function(){return n.apply(this,arguments)}}()});case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}()),$r=function(n){return{tag:n.tag,ip:n.ip,syslog:n.syslog,helo:n.helo,ipv:"ipv6"===n.preference?6:4,binds:k(n.binds)?n.binds:[]}},Zr=function(){var n=f(l().m(function n(t){return l().w(function(n){for(;;)switch(n.n){case 0:zr.value=$r(t),m({title:"编辑【".concat(t.tag,"】标签"),area:50,component:function(){return v(function(){return e.import("./index-legacy365.js?v=1763689792")},void 0,e.meta.url)},compData:{isEdit:!0},btn:!0});case 1:return n.a(2)}},n)}));return function(e){return n.apply(this,arguments)}}(),Jr=wn({__name:"index",setup:function(n){var e=[{content:'<span class="text-dangerDark">IP池中的IP标签可作为某个域名发送邮件的出口IP，在域名列表里配置</span>',isHtml:!0},{content:'<span class="text-dangerDark">每个IP可以有多个标签但是标签名不能重复</span>',isHtml:!0},{content:'<span class="text-dangerDark">调整完发送IP注意修改SPF记录，避免收件方退信或认定为垃圾邮件</span>',isHtml:!0}],t=function(){pn.push("/mail/maildomain")},r=G({request:Gr,columns:[le({key:"tag"}),{label:"标签名",prop:"tag"},{renderHeader:function(){return jn("div",null,[jn("span",null,[In("IP")]),jn(Yn,{placement:"top",effect:"light"},{default:function(){return jn("span",{class:"ml-4px bt-ico-ask"},[In("?")])},content:function(){return jn("div",null,[jn("div",{class:"text-dangerDark"},[In("• 只能选择由系统从网卡扫描出的IP，此处展示IP地址是通过网络请求获取的公网IP")]),jn("div",{class:"text-dangerDark"},[In("• 不支持虚拟网卡，如docker、lo、veth、br-、tun、tap、virb等")]),jn("div",{class:"text-dangerDark"},[In("• 若没有找到想要的IP请检查：")]),jn("div",{class:"text-dangerDark",style:"margin-left: 20px;"},[In("1.IP绑定的网卡（ipa）")]),jn("div",{class:"text-dangerDark",style:"margin-left: 20px;"},[In("2.是否能正常访问宝塔官网获取公网IP")]),jn("div",{class:"text-dangerDark",style:"margin-left: 20px;"},[In("（curl --interface【网卡上的IP】https://www.bt.cn/api/getIpAddress）")])])}})])},prop:"ip"},{renderHeader:function(){return pe("HELO/EHLO","用于HELO/EHLO的域名，绑定之后也可用于其它域名，不影响发送邮件")},prop:"helo"},oe([{title:"编辑",onClick:function(n){return Zr(n)}},{title:"删除",onClick:function(n){return Kr(n)}}])],extension:[Nr,W(Fr)]}),a=r.BtTable,o=(r.BtRefresh,r.BtBatch);return function(n,r){var i=Dn,l=ce,c=$;return bn(),_n("div",null,[jn(l,null,{"header-left":Pn(function(){return[jn(i,{type:"primary",onClick:Tn(Wr)},{default:Pn(function(){return u(r[0]||(r[0]=[In("添加IP标签",-1)]))}),_:1},8,["onClick"])]}),"header-right":Pn(function(){return[jn(i,{onClick:t},{default:Pn(function(){return u(r[1]||(r[1]=[In("去使用",-1)]))}),_:1})]}),content:Pn(function(){return[jn(Tn(a))]}),"footer-left":Pn(function(){return[jn(Tn(o))]}),_:1}),jn(c,{class:"mt-[1rem]",options:e})])}}}),Qr={key:0,class:"software-mask"},Yr={key:1,class:"software-install"},Xr={key:0,class:"software-view"},na={class:"relative"},ea={class:"absolute right-0 top-0"},ta=s(wn({__name:"index",setup:function(n){var e=vn(),t=gn(e).install,r=[{name:"common",label:"通用设置",lazy:!0,render:function(){return jn(jt,null,null)}},{name:"ip",label:"IP池",lazy:!0,render:function(){return jn(Jr,null,null)}},{name:"bcc",label:"密件抄送",lazy:!0,render:function(){return jn(zt,null,null)}},{name:"forward",label:"邮件转发",lazy:!0,render:function(){return jn(er,null,null)}},{name:"backup",label:"备份",lazy:!0,render:function(){return jn(Ar,null,null)}}];return function(n,e){var a=D,o=dn,i=mn;return bn(),_n("div",null,[Tn(t)?zn("",!0):(bn(),_n("div",Qr)),Tn(t)?zn("",!0):(bn(),_n("div",Yr,[Tn(t)?zn("",!0):(bn(),_n("div",Xr,[jn(a,{icon:"el-warning",size:30,class:"mr-[8px]",color:"orange"}),e[2]||(e[2]=kn("span",{class:"text-base font-black"},"未安装邮件服务器",-1)),kn("span",{class:"bt-link text-base ml-8px",onClick:e[0]||(e[0]=function(n){return Tn(re)("mail_sys","i")})},"点击安装")]))])),kn("div",null,[kn("div",na,[jn(o,{type:"card",options:r,modelValue:Tn(ve),"onUpdate:modelValue":e[1]||(e[1]=function(n){return Ln(ve)?ve.value=n:null})},null,8,["modelValue"]),kn("div",ea,[jn(i,{onClick:Tn(de)},{default:Pn(function(){return u(e[3]||(e[3]=[In("环境初始化",-1)]))}),_:1},8,["onClick"])])])])])}}}),[["__scopeId","data-v-662737fd"]]),ra=Object.freeze(Object.defineProperty({__proto__:null,default:ta},Symbol.toStringTag,{value:"Module"}));n("y",ra)}}})}();
