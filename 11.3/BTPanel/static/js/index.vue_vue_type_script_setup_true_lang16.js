import{hy as a,n as e,aC as l,$ as s,V as t}from"./utils-lib.js?v=1763689792";import{c as n,v as o,I as i,x as r,y as u,z as d,O as p,R as c,G as m,A as x,J as y,e as v,C as f,D as b,H as h,b2 as C}from"./base-lib.js?v=1763689792";import{d5 as g}from"./validator.js?v=1763689792";import{i as k,c as w,d as V,t as j,a as _,b as S,e as B,s as F,h as O,r as U,v as E,f as H}from"./useController19.js?v=1763689792";import{u as N,S as T}from"./useStore4.js?v=1763689792";import{B as q}from"./index119.js?v=1763689792";const z={class:"h-full"},A={key:0},D={class:"w-full"},G={class:"my-[12px]"},I={key:1,class:"bg-[var(--el-base-tertiary)] flex items-center justify-center h-full",style:{"min-height":"600px"}},J={class:"bg-lighter px-[48px] py-[16px] text-default flex"},R=n({__name:"index",setup(n,{expose:R}){const{isBindExtranet:$}=N(),{jumpTabEvent:K}=T(),L=()=>{let l;const{BtTable:s}=a({request:()=>({data:O.value,total:O.value.length}),columns:[{label:"文件名",render:a=>t(Number(a))},{label:"操作",align:"right",render:a=>{let e=Number(a);return v("div",null,[v("span",{class:"cursor-pointer bt-link",onClick:()=>{M(a)}},[b("查看")]),v(C,{direction:"vertical"},null),v("span",{class:"cursor-pointer bt-link",onClick:async()=>{if(await U(e)){const a=await l;null==a||a.unmount()}}},[b("恢复")])])}}]});l=e({title:"配置文件历史版本",area:42,showFooter:!1,component:()=>v("div",{class:"p-[20px]"},[v(s,{"max-height":400},null)])})},M=async a=>{await E(a);const l=e({title:"查看文件历史版本",area:64,showFooter:!1,component:()=>v("div",{class:"p-[20px]"},[v(h,{type:"primary",onClick:async()=>{if(await U(a)){const a=await l;null==a||a.unmount()}}},{default:()=>[b("恢复文件")]}),v(q,{class:"!h-[50rem] !w-full my-[12px]",modelValue:H.value,"onUpdate:modelValue":a=>H.value=a,editorOption:g({readonly:!0})},null)])})};return o(k),R({init:k}),(a,e)=>{const t=l,n=s,o=i("bt-loading");return r(),u("div",z,[d($)?(r(),u("div",A,[d(w)?(r(),p(t,{key:0,type:"card",modelValue:d(V),"onUpdate:modelValue":e[0]||(e[0]=a=>c(V)?V.value=a:null),options:d(j),onChange:d(_)},null,8,["modelValue","options","onChange"])):m("",!0),x("div",D,[e[7]||(e[7]=x("span",{class:"my-[4px] text-secondary"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),x("div",G,[y(v(d(q),{class:"!h-[54rem] border-[1px] border-dark rounded-base",modelValue:d(B),"onUpdate:modelValue":e[1]||(e[1]=a=>c(B)?B.value=a:null),onSave:e[2]||(e[2]=a=>d(F)()),id:"configContent",editorOption:{mode:"ace/mode/nginx"}},null,8,["modelValue"]),[[o,d(S)]])]),x("div",null,[v(d(h),{type:"primary",onClick:e[3]||(e[3]=a=>d(F)())},{default:f(()=>[...e[5]||(e[5]=[b("保存",-1)])]),_:1}),v(d(h),{onClick:L,type:"default"},{default:f(()=>[...e[6]||(e[6]=[b("历史文件",-1)])]),_:1})]),v(n,{options:[{content:"此处为站点主配置文件，若您不了解配置规则，请勿随意修改."}],"list-style":"disc",class:"ml-[20px] mt-[20px]"})])])):(r(),u("div",I,[x("div",J,[e[8]||(e[8]=b(" 请开启 ",-1)),x("span",{class:"mx-[.4rem] bt-link",onClick:e[4]||(e[4]=a=>d(K)("mapping"))},"外网映射"),e[9]||(e[9]=b(" 后查看配置信息 ",-1))])]))])}}});export{R as _};
