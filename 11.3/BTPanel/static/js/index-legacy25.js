!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=a(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==t.return||t.return()}finally{if(l)throw o}}}}function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){if(e){if("string"==typeof e)return r(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=Array(n);t<n;t++)a[t]=e[t];return a}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function u(t,a,r,i){var u=a&&a.prototype instanceof c?a:c,s=Object.create(u.prototype);return o(s,"_invoke",function(t,a,r){var i,o,u,c=0,s=r||[],p=!1,f={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(n,t){return i=n,o=0,u=e,f.n=t,l}};function d(t,a){for(o=t,u=a,n=0;!p&&c&&!r&&n<s.length;n++){var r,i=s[n],d=f.p,m=i[2];t>3?(r=m===a)&&(u=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=d&&((r=t<2&&d<i[1])?(o=0,f.v=a,f.n=i[1]):d<m&&(r=t<3||i[0]>a||a>m)&&(i[4]=t,i[5]=a,f.n=m,o=0))}if(r||t>1)return l;throw p=!0,a}return function(r,s,m){if(c>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,m),o=s,u=m;(n=o<2?e:u)||!p;){i||(o?o<3?(o>1&&(f.n=-1),d(o,u)):f.n=u:f.v=u);try{if(c=2,i){if(o||(r="next"),n=i[r]){if(!(n=n.call(i,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,o<2&&(o=0)}else 1===o&&(n=i.return)&&n.call(i),o<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),o=1);i=e}else if((n=(p=f.n<0)?u:t.call(a,f))!==l)break}catch(n){i=e,o=1,u=n}finally{c=1}}return{value:n,done:p}}}(t,r,i),!0),s}var l={};function c(){}function s(){}function p(){}n=Object.getPrototypeOf;var f=[][a]?n(n([][a]())):(o(n={},a,function(){return this}),n),d=p.prototype=c.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,o(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=p,o(d,"constructor",p),o(p,"constructor",s),s.displayName="GeneratorFunction",o(p,r,"GeneratorFunction"),o(d),o(d,r,"Generator"),o(d,a,function(){return this}),o(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:u,m:m}})()}function o(e,n,t,a){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}o=function(e,n,t,a){function i(n,t){o(e,n,function(e){return this._invoke(n,t,e)})}n?r?r(e,n,{value:t,enumerable:!a,configurable:!a,writable:!a}):e[n]=t:(i("next",0),i("throw",1),i("return",2))},o(e,n,t,a)}function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach(function(n){c(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function c(n,t,a){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var a=n[Symbol.toPrimitive];if(void 0!==a){var r=a.call(n,t||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[t]=a,n}function s(e,n,t,a,r,i,o){try{var u=e[i](o),l=u.value}catch(e){return void t(e)}u.done?n(l):Promise.resolve(l).then(a,r)}function p(e){return function(){var n=this,t=arguments;return new Promise(function(a,r){var i=e.apply(n,t);function o(e){s(i,a,r,o,u,"next",e)}function u(e){s(i,a,r,o,u,"throw",e)}o(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useStore-legacy3.js?v=1763689792","./index-legacy107.js?v=1763689792","./useMethods-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./vue-virtual-scroller.esm-legacy.js?v=1763689792","./vue-virtual-scroller-legacy.js?v=1763689792","./form-item-legacy.js?v=1763689792","./useController-legacy4.js?v=1763689792","./index.vue_vue_type_style_index_0_lang-legacy.js?v=1763689792","./index-legacy119.js?v=1763689792"],function(e,a){"use strict";var r,o,u,c,s,f,d,m,v,y,h,_,g,b,w,k,x,C,j,S,D,O,q,I,T,z,A,P,E,M,R,V,G,L,F,N,H,U,W,B,K,Q,J,$,X,Y,Z,ee,ne,te,ae,re,ie,oe,ue,le,ce,se,pe,fe,de,me,ve,ye,he,_e,ge,be,we,ke,xe,Ce,je,Se,De,Oe,qe,Ie,Te,ze,Ae,Pe,Ee,Me,Re,Ve,Ge,Le,Fe;return{setters:[function(e){r=e.Q,o=e.aL,u=e.aA,c=e.b,s=e.u,f=e.aM,d=e.aN,m=e.aO,v=e.n,y=e.H,h=e.p,_=e.aP,g=e.e,b=e._,w=e.aQ,k=e.E,x=e.aR,C=e.aS,j=e.aT,S=e.aU,D=e.y,O=e.az,q=e.aV,I=e.aW,T=e.aX,z=e.aY,A=e.aZ,P=e.a_,E=e.a$,M=e.b0,R=e.ay,V=e.O},function(e){G=e.o,L=e.av,F=e.s,N=e.j,H=e.r,U=e.W,W=e.c,B=e.w,K=e.v,Q=e.a8,J=e.x,$=e.y,X=e.A,Y=e.e,Z=e.z,ee=e.Q,ne=e.D,te=e.C,ae=e.L,re=e.F,ie=e.b1,oe=e.O,ue=e.J,le=e.K,ce=e.B,se=e.G,pe=e.H,fe=e.as,de=e.ar,me=e.aT,ve=e.at,ye=e.n,he=e.V,_e=e.an,ge=e.am,be=e.i,we=e.g,ke=e.be,xe=e.b2,Ce=e.aA,je=e.aG,Se=e.M,De=e.ay,Oe=e.I},function(e){qe=e.g},function(e){Ie=e._},function(e){Te=e.c,ze=e.N,Ae=e.g},function(e){Pe=e.j},function(e){Ee=e.s},null,function(e){Me=e.h,Re=e.b,Ve=e.c},function(e){Ge=e.o},function(e){Le=e._},function(e){Fe=e.B}],execute:function(){var Ne=c(),He=qe().refs.deployMenuData,Ue=G({loading:!1,list:[],total:0}),We=G({p:1,row:200,query:"",force:0}),Be=function(){var e=p(i().m(function e(){var n,t,a,c,s,p=arguments;return i().w(function(e){for(;;)switch(e.n){case 0:n=p.length>0&&void 0!==p[0]?p[0]:{query:We.query,p:We.p,row:We.row,force:0},t="docker_app_list_timestamp",a=localStorage.getItem(t),c=Date.now(),s=!1,(!a||c-parseInt(a)>864e5)&&(s=!0),r({request:o(l(l({},n),{},{app_type:He.value.app_type,force:n.force||(s?1:0)})),loading:L(Ue,"loading"),success:function(e){e.status?((1===n.force||s)&&(localStorage.setItem(t,c.toString()),!s&&Ne.success("刷新成功")),Ue.list=e.data.data.map(function(e,n){return l(l({},e),{},{index:"".concat(e.appname||Math.random().toString(36).substring(2,15),"_").concat(n)})}),Ue.total=u(e.data.page),He.value.maximum_cpu=e.data.maximum_cpu,He.value.maximum_memory=e.data.maximum_memory+" MB"):Ne.error(e.msg)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ke=N("DOCKER-APP-STORE-LOCAL",function(){return{activeTabs:H("git"),apphubGitConfig:H({}),isSaveGitConfig:H(!1),usingHelpLink:H("https://www.bt.cn/bbs/thread-147864-1-1.html")}}),Qe=e("u",function(){return F(Ke())})(),Je=Qe.apphubGitConfig,$e=Qe.isSaveGitConfig,Xe=c(),Ye=qe().refs.deployMenuData,Ze=s().mainWidth,en=U([]),nn=U(""),tn=function(){return Math.floor((Ze.value-420)/140)},an=H(),rn=e("r",function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:if(We.p=1,on(),"installed"!==Ye.value.app_type){e.n=2;break}return e.n=1,ln("all");case 1:return n&&Xe.success("刷新成功"),e.a(2);case 2:if(We.force=n?1:0,!n){e.n=3;break}return e.n=3,Te();case 3:return e.n=4,Be(We);case 4:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),on=function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r({request:f(),data:[Array,en],success:function(e){an.value=e.slice(tn(),e.length)}});case 1:return e.a(2,e.v)}},e)}));return function(){return e.apply(this,arguments)}}(),un=function(){var e=p(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:return nn.value=(null===(t=an.value)||void 0===t||null===(t=t.find(function(e){return e.type===n}))||void 0===t?void 0:t.desc)||"",Ye.value.app_type=n,We.query="",We.p=1,We.force=0,e.n=1,Be(We);case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ln=function(){var e=p(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:Ue.loading=!0,nn.value=(null===(t=en.value)||void 0===t||null===(t=t.find(function(e){return e.type===n}))||void 0===t?void 0:t.desc)||"",Ye.value.app_type="installed",r({request:d({app_type:n,p:1,row:20,query:We.query||""}),loading:L(Ue,"loading"),success:function(e){e.status?(Ue.list=e.data.data.map(function(e,n){return l(l({},e),{},{index:n})})||[],e.data.page?Ue.total=u(e.data.page):Ue.total=0):Xe.error(e.msg)}});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),cn=function(){"installed"===Ye.value.app_type&&ln("all"),Ye.value.app_type="installed"},sn=function(){en.value=[],nn.value="",an.value=[]},pn=function(){var e=p(i().m(function e(n){var t,r,o,u,l,c,s,p,f;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=Xe.load("正在获取配置信息..."),e.p=1,e.n=2,m();case 2:r=e.v,o=r.data.git_config||{},u=o.git_url,l=void 0===u?"":u,c=o.git_branch,s=void 0===c?"":c,p=o.user_config,f=void 0===p?{}:p,Je.value={git_url:l,git_branch:s,name:f.name||"",password:f.password||""},r.status&&($e.value=!0),v({title:"导入应用",area:70,btn:["导入","取消"],component:function(){return y(function(){return a.import("./index-legacy145.js?v=1763689792")},void 0,a.meta.url)}}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,null==t||t.close(),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(n){return e.apply(this,arguments)}}(),fn=function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,h({title:"清理应用",content:"该操作将会清除所有外部应用，已安装的应用将会保留至已安装列表，是否继续？"});case 1:return e.n=2,r({request:_(),message:!0,success:function(){Be(We)}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),dn={class:"flex flex-1 relative items-center mb-20px"},mn={class:"text-small text-secondary leading-[2rem] mx-[2rem] flex items-center"},vn={class:"w-full flex items-center"},yn={class:"flex flex-1 relative flex-wrap"},hn=["onClick"],_n={key:0,class:"flex items-center"},gn=W({__name:"index",setup:function(e,n){var a=n.expose,r=qe().refs.deployMenuData,i=s().mainWidth;B(function(){return i.value},function(){var e,n;an.value=en.value.slice(tn(),null===(e=en.value)||void 0===e?void 0:e.length),nn.value=(null===(n=an.value)||void 0===n||null===(n=n.find(function(e){return e.type===r.value.app_type}))||void 0===n?void 0:n.desc)||""}),K(on);var o=H();return Q(sn),a({testRef:o}),function(e,n){var a,i,u=Ie,l=g,c=pe,s=ve,p=fe,f=de,d=me;return J(),$("div",{ref_key:"testRef",ref:o},[X("div",dn,[n[12]||(n[12]=X("span",{class:"w-[80px] pr-16px text-base flex justify-end flex-shrink-0"},"应用搜索",-1)),Y(u,{class:"!w-[52rem]",ref:"searchRef",icon:"el-search",modelValue:Z(We).query,"onUpdate:modelValue":n[0]||(n[0]=function(e){return Z(We).query=e}),clearable:"",onClear:n[1]||(n[1]=function(e){return Z(rn)(!1)}),onIconClick:n[2]||(n[2]=function(e){return Z(rn)(!1)}),placeholder:"支持应用名称、字段模糊搜索",onKeyup:n[3]||(n[3]=ee(function(e){return Z(rn)(!1)},["enter","native"]))},null,8,["modelValue"]),X("span",mn,[n[10]||(n[10]=ne(" 如果您希望添加其它Docker应用，请 ",-1)),X("span",{class:"bt-link",onClick:n[4]||(n[4]=function(e){return Z(Pe)()})},"联系客服"),n[11]||(n[11]=ne(" ,或进行 ",-1)),X("span",{class:"bt-link",onClick:n[5]||(n[5]=function(e){return Z(ze)()})},"需求反馈"),Y(l,{href:"https://www.bt.cn/bbs/thread-137717-1-1.html",class:"ml-4px"},{default:te(function(){return t(n[9]||(n[9]=[ne(">>使用帮助",-1)]))}),_:1})])]),X("div",vn,[n[19]||(n[19]=X("span",{class:"w-[80px] pr-16px text-base flex justify-end"},"应用分类",-1)),X("div",{class:ae(["class-item",{on:"all"===Z(r).app_type}]),onClick:n[6]||(n[6]=function(e){return Z(un)("all")})},"全部",2),X("div",{class:ae(["class-item flex-shrink-0",{on:"installed"===Z(r).app_type}]),onClick:n[7]||(n[7]=function(){return Z(cn)&&Z(cn).apply(void 0,arguments)})},"已安装",2),X("div",yn,[(J(!0),$(re,null,ie(null===(a=Z(en))||void 0===a?void 0:a.slice(0,Z(tn)()),function(e,n){return J(),$("div",{key:n,onClick:function(n){return Z(un)(e.type)},class:ae(["class-item",Z(r).app_type===e.type?"on":""])},ce(e.desc),11,hn)}),128)),null!==(i=Z(an))&&void 0!==i&&i.length?(J(),oe(f,{key:0,"show-timeout":200,onCommand:Z(un)},{dropdown:te(function(){return[Y(p,null,{default:te(function(){return[(J(!0),$(re,null,ie(Z(an),function(e,n){return J(),oe(s,{key:n,command:e.type},{default:te(function(){return[ne(ce(e.desc),1)]}),_:2},1032,["command"])}),128))]}),_:1})]}),default:te(function(){return[Y(c,{type:"default",class:ae(["AppClassButton",{on:Z(an).some(function(e){return e.type===Z(r).app_type})}])},{default:te(function(){return[n[13]||(n[13]=ne(" 更多 ",-1)),ue(X("span",null,"（"+ce(Z(nn))+"）",513),[[le,Z(nn)]]),n[14]||(n[14]=X("i",{class:"svgtofont-el-arrow-down ml-[.5rem]"},null,-1))]}),_:1},8,["class"])]}),_:1},8,["onCommand"])):se("",!0)]),ue(Y(c,{title:"更新列表",class:"refresh !mr-[1.2rem]",onClick:n[8]||(n[8]=function(e){return Z(rn)(!0)})},{default:te(function(){return t(n[15]||(n[15]=[ne(" 更新应用列表 ",-1)]))}),_:1},512),[[le,"installed"!==Z(r).app_type&&"AppHub"!==Z(r).app_type]]),"AppHub"===Z(r).app_type?(J(),$("div",_n,[Y(c,{type:"default",title:"清理应用",class:"ml-[1rem]",onClick:Z(fn)},{default:te(function(){return t(n[16]||(n[16]=[ne(" 清理应用 ",-1)]))}),_:1},8,["onClick"]),Y(d,{content:"支持从Git仓库或本地文件导入应用，自动扫描并识别多个应用，支持选择性导入和批量导入",enterable:!1,placement:"left"},{content:te(function(){return t(n[17]||(n[17]=[X("div",{class:"flex flex-col pb-[4px]"},[X("div",null,"支持从Git仓库或本地文件导入应用"),X("div",null,"自动扫描并识别多个应用"),X("div",null,"支持选择性导入和批量导入")],-1)]))}),default:te(function(){return[Y(c,{type:"primary",class:"refresh !mr-[1.2rem] ml-[1rem]",onClick:Z(pn)},{default:te(function(){return t(n[18]||(n[18]=[ne(" 导入应用 ",-1)]))}),_:1},8,["onClick"])]}),_:1})])):se("",!0)])],512)}}}),bn=b(gn,[["__scopeId","data-v-8ac8f40f"]]),wn=c(),kn=qe().refs.deployMenuData,xn=H(!1),Cn=H(!1),jn=null,Sn=function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:if(!xn.value){e.n=1;break}return e.a(2);case 1:if(xn.value=!0,Cn.value=!0,!(Ue.list.length<Ue.total)){e.n=4;break}if(We.p++,"installed"!==kn.value.app_type){e.n=3;break}return e.n=2,Dn("all");case 2:e.n=4;break;case 3:return e.n=4,Be(We);case 4:xn.value=!1;case 5:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Dn=function(){var e=p(i().m(function e(n,a){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,1===We.p&&(Ue.total=0,Ue.list=[]),a||(Ue.loading=!0),kn.value.app_type="installed",e.n=1,r({request:d({app_type:n||"all",p:We.p,row:20,query:We.query||""}),success:function(e){if(e.status){var n=e.data.data.map(function(e,n){return l(l({},e),{},{index:n})})||[];Ue.list=[].concat(t(Ue.list),t(n)),e.data.page?Ue.total=u(e.data.page):Ue.total=0}else wn.error(e.msg)}});case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,Ue.loading=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(n,t){return e.apply(this,arguments)}}(),On=function(){Ue.list.some(function(e){return"initializing"===e.status})&&(jn=setTimeout(function(){Dn("all",!0),On()},3e4))},qn=""+new URL("../img/soft_ico/icon_plug.svg",a.meta.url).href;function In(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!be(e)}var Tn=c(),zn=qe().refs.deployMenuData,An=w().refs.isRefreshInstallList,Pn=e("e",{mode:"ace/mode/yaml",theme:k.value?"ace/theme/clouds_midnight":"ace/theme/chrome",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"}),En=function(){var e=p(i().m(function e(n,t){var a,r,o,u,l,c;return i().w(function(e){for(;;)switch(e.n){case 0:return a=n.appname,r=n.appid,o=-1==r?"/static/img/soft_ico/apphub":"/static/img/soft_ico/dkapp",u=-1==r?"ico-apphub_":"ico-dkapp_",l=null==a?void 0:a.replace(/-+[{0-9},\.,]+$/,""),c="".concat(o,"/").concat(u).concat(l,".png"),e.n=1,Ae(c);case 1:t.value=e.v;case 2:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),Mn=function(e){return e.canUpdate&&e.installed},Rn=function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,pt({appData:n,openDependInstall:Vn});case 1:st(),v({title:"".concat(n.appname,"安装配置"),area:70,component:function(){return y(function(){return a.import("./add-app-soft-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:{appData:n,openDependInstall:Vn},showFooter:!0});case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Vn=function(){var e=p(i().m(function e(n){var t,r;return i().w(function(e){for(;;)switch(e.n){case 0:return t=n.name,r=n.type,zn.value.app_type=r,We.query="",e.n=1,Be();case 1:ye(p(i().m(function e(){var n;return i().w(function(e){for(;;)switch(e.n){case 0:if(!(n=Ue.list.find(function(e){return e.appname===t}))){e.n=2;break}return e.n=1,pt({appData:n,openDependInstall:Vn});case 1:st(),v({title:"".concat(n.appname,"安装配置"),area:70,component:function(){return y(function(){return a.import("./add-app-soft-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:{appData:n,openDependInstall:Vn},showFooter:!0});case 2:return e.a(2)}},e)})));case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Gn=function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:v({title:"更新配置",area:42,component:function(){return y(function(){return a.import("./app-update-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:n,showFooter:!0});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Ln=function(e){v({title:"详情展示",area:64,component:function(){return y(function(){return a.import("./detail-view-legacy.js?v=1763689792")},void 0,a.meta.url)},compData:e,btns:!1})},Fn=function(e,n,t){switch(e){case"ollama":case"ollama_and_openwebui":case"deepseek_r1":v({title:"管理",area:[86,52],component:function(){return y(function(){return a.import("./index-legacy146.js?v=1763689792").then(function(e){return e.i})},void 0,a.meta.url)},compData:l(l({},n),t),btns:!1});break;case"mysql":case"redis":case"postgresql":case"tdengine":Hn(e,n)}},Nn=W({name:"ContainerTerminalDialog",props:{compData:{type:Object,default:function(){return{}}}},setup:function(e,n){var t=n.expose,a=H(),r=H(e.compData.cmd),i=H(null);return K(function(){ye(function(){i.value=a.value.socketInfo(),i.value.send("cd /www/wwwroot\r\n"),i.value.send("clear && ".concat(r.value,"\r\n"))})}),t({onCancel:function(){i.value.close()}}),function(){return Y("div",{class:"p-[1rem] bg-black h-full"},[Y(Le,{id:"dockerTerminal",class:"h-full",active:!0,ref:a,url:"/webssh","host-info":{}},null)])}}}),Hn=function(){var e=p(i().m(function e(t,a){var o,u,l,c,s,p,f;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:o=["redis_password","mysql_root_password","postgres_password"],u="",l=n(a.appinfo),e.p=1,l.s();case 2:if((c=l.n()).done){e.n=4;break}if(s=c.value,!o.includes(s.fieldKey)){e.n=3;break}return u=s.fieldValue,e.a(3,4);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,f=e.v,l.e(f);case 6:return e.p=6,l.f(),e.f(6);case 7:return e.n=8,r({request:x({appname:t,id:a.container_id,password:u}),loading:"正在获取数据库终端命令，请稍后..."});case 8:if((p=e.v).status){e.n=9;break}return e.a(2,Tn.error("连接数据库失败"));case 9:v({component:function(){return Nn},title:"宝塔终端",area:[80,50],compData:{cmd:p.msg}});case 10:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(n,t){return e.apply(this,arguments)}}(),Un=function(e){return"0.0.0.0"===e.host_ip&&"Database"!==e.apptype&&"System"!==e.apptype},Wn=function(e,n,t){"0.0.0.0"===e.host_ip&&"Database"!==e.apptype&&"System"!==e.apptype?window.open("".concat(t,"://").concat(e.server_ip,":").concat(n),"_blank","noopener,noreferrer"):Tn.error("当前应用不支持IP+端口访问")},Bn=function(){var e=p(i().m(function e(n,t){var r,o,u,l,c;return i().w(function(e){for(;;)switch(e.n){case 0:if("path"!==n){e.n=2;break}return e.n=1,y(function(){return a.import("./utils-lib-legacy.js?v=1763689792").then(function(e){return e.lW})},void 0,a.meta.url);case 1:o=e.v,u=o.router,l=null===(r=t.appinfo.filter(function(e){return"app_path"===e.fieldKey})[0])||void 0===r?void 0:r.fieldValue,C("Path",l),c=Tn.load("正在跳转,请稍后..."),u.push({path:"/files"}),c.close();case 2:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),Kn=function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:Ge({id:n.site_id,name:n.site_name,addtime:n.site_addtime});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Qn=function(e,n,t){if(!t||"initializing"===e.status){var r=!1;"log"===n&&"initializing"===e.status&&(r=!0);var i={back:{component:function(){return y(function(){return a.import("./backup-view-legacy.js?v=1763689792")},void 0,a.meta.url)},area:82,title:"应用备份",showFooter:!1},log:{component:function(){return y(function(){return a.import("./app-log-legacy.js?v=1763689792")},void 0,a.meta.url)},area:88,title:"应用日志",showFooter:!1},password:{component:function(){return y(function(){return a.import("./update-password-legacy.js?v=1763689792")},void 0,a.meta.url)},area:42,title:"修改mysql密码",showFooter:!0}};v({title:i[n].title,area:i[n].area,compData:l(l({},e),{},{isInit:r}),component:i[n].component,showFooter:i[n].showFooter})}},Jn=function(){var e=p(i().m(function e(n,t,a){var o;return i().w(function(e){for(;;)switch(e.n){case 0:return o={rebuild:"重建",start:"启动",restart:"重启",stop:"停止"},e.n=1,h({title:"提示",content:"确定要".concat(o[t],"【").concat(a.service_name,"】吗?"),icon:"warning-filled"});case 1:return e.n=2,r({request:j({service_name:a.service_name,status:t,app_name:a.appname}),loading:"正在操作,请稍后...",message:!0});case 2:n("refresh");case 3:return e.a(2)}},e)}));return function(n,t,a){return e.apply(this,arguments)}}(),$n=function(){var e=p(i().m(function e(n,t){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,h({title:"提示",content:"确定要删除【".concat(t.appname,"】吗?"),icon:"warning-filled",type:"check",check:{content:"同时删除此应用的所有数据",onConfirm:function(){var e=p(i().m(function e(a){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r({request:S({id:t.id,delete_data:Number(a)}),loading:"正在删除,请稍后...",message:!0});case 1:n("refresh");case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()}});case 1:return e.a(2)}},e)}));return function(n,t){return e.apply(this,arguments)}}(),Xn=function(e){return window.open("http://"+e,"_blank","noopener,noreferrer")},Yn=U({}),Zn=e("f",G({version:"",showCompose:"false",editcompose:""})),et=function(e){var n;null===(n=e.field)||void 0===n||n.forEach(function(e){Zn[e.attr]=e.default,"checkbox"===e.type&&(Zn[e.attr]=Boolean(e.default))}),Zn.service_name="".concat(e.appname,"_").concat(D(4))},nt=(e("a",function(e,n){switch(e.type){case"password":return Me(e.name,function(){return Y("div",{class:"flex flex-col items-start justify-center w-full"},[Y(Ie,{placeholder:"请输入".concat(e.name),width:"24rem","is-active":!0,modelValue:n.value[e.attr],"onUpdate:modelValue":function(t){return n.value[e.attr]=t},icon:"el-refresh",onInput:function(t){return it(e,t,n)},onIconClick:function(){return Zn[e.attr]=D(16)}},null)])},e.attr,{rules:{}});case"checkbox":return Me(e.name,function(){return Y(he,{modelValue:n.value[e.attr],"onUpdate:modelValue":function(t){return n.value[e.attr]=t},label:e.name,class:"!my-0"},{default:function(){return[Y("span",{class:"unit"},[ne(" * "),e.suffix,ne(" ")])]}})},e.attr);case"textarea":return Ve(e.name,e.attr,{attrs:{placeholder:"请输入".concat(e.name),autosize:{minRows:1,maxRows:15},class:"!w-[244px]",onInput:function(t){return it(e,t,n)}},rules:[{required:!1,message:"请输入".concat(e.name),trigger:["change","blur"]}],slots:{unit:function(){return ot(e)}}});default:if("string"==typeof e.type&&e.type.startsWith("ace:")){var t=e.type.split(":")[1]||"",a=l(l({},Pn),{},{mode:t?"ace/mode/".concat(t):"ace/mode/text"});return Me(e.name,function(){return Y("div",{class:"flex flex-col items-start justify-center w-full"},[Y(Fe,{key:"editer1",class:"!w-[500px] h-[30rem]",modelValue:n.value[e.attr],"onUpdate:modelValue":function(t){return n.value[e.attr]=t},editorOption:a},null),e.suffix?Y("span",{class:"text-secondary text-[1.2rem] leading-[1] mt-[1rem]",innerHTML:" * ".concat(e.suffix)},null):Y("span",null,null)])},e.attr)}return Re(e.name,e.attr,{attrs:{class:"!w-[244px] relative;",placeholder:"请输入".concat(e.name)},slots:{unit:function(){return ot(e)}},rules:[{required:!1,message:"请输入".concat(e.name),trigger:"blur"}]})}}),e("b",function(e,n,t){return Me(e.appTypeCN,function(){var n,a,r;return Y("div",null,[(null===(n=tt.value[at(e)])||void 0===n?void 0:n.appname)&&Y(_e,{class:"!w-[12rem]",modelValue:tt.value.form[e.apptype],"onUpdate:modelValue":function(n){return tt.value.form[e.apptype]=n}},In(a=e.appname.map(function(e){return Y(ge,{label:e,value:e},null)}))?a:{default:function(){return[a]}}),Y(_e,{modelValue:tt.value[rt(e)].service_name,"onUpdate:modelValue":function(n){return tt.value[rt(e)].service_name=n},placeholder:0==tt.value[rt(e)].option.length?"未安装":"请选择",disabled:0==tt.value[rt(e)].option.length,class:"ml-[0.8rem] !w-[16rem]"},In(r=tt.value[rt(e)].option.map(function(e){return Y(ge,{label:e.service_name+" "+e.version,value:e.service_name},null)}))?r:{default:function(){return[r]}}),Y("span",{class:"ml-[2rem] text-small leading-[2.2rem] text-tertiary"},[e.appDesc]),0==tt.value[rt(e)].option.length&&Y("div",null,[Y("span",{class:"leading-[1] bt-link !text-small",onClick:function(){return ut({name:rt(e),type:e.apptype},t)}},[ne("点击安装")])])])})}),e("v",U([]))),tt=e("d",H({})),at=function(e){var n=e.appname;return O(n)?n:n[0]},rt=function(e){return tt.value.form[e.apptype]},it=function(e,n,t){"domain"===e.attr&&""!==n&&(t.value.allow_access=!1)},ot=function(e){var n="whitespace-nowrap absolute left-[250px] top-0 text-secondary";return"cpus"===e.attr?Y("span",{class:n},[" * ".concat(e.suffix).concat(zn.value.maximum_cpu)]):"memory_limit"===e.attr?Y("span",{class:n},[" * ".concat(e.suffix).concat(zn.value.maximum_memory)]):e.suffix?Y("span",{class:n,innerHTML:" * ".concat(e.suffix)},null):Y("span",null,null)},ut=function(e,n){Yn.value.openDependInstall(e),n()},lt=function(e){if(!(e.indexOf(".")>-1))return!1;var n=e.split(".");return 3===n.length?{x:n[0],yz:"".concat(n[1],".").concat(n[2])}:2===n.length&&{x:n[0],yz:n[1]}},ct=function(){try{if(Zn.domain&&!P(Zn.domain))return void Tn.error("域名格式不正确");var e=l(l(l({},Zn),-1==Yn.value.appData.appid?{appid:Number(Yn.value.appData.appid)}:{}),{},{app_name:Yn.value.appData.appname,disable_domain:Number(!Zn.domain),allow_access:Number(Zn.allow_access)},"true"===Zn.showCompose?{compose_file:Zn.editcompose}:{});return lt(Zn.version)?(e.m_version=lt(Zn.version).x,e.s_version=lt(Zn.version).yz):(e.m_version=Zn.version,e.s_version=""),Yn.value.appData.depend&&(e.depend_app=[],Object.keys(tt.value.form).forEach(function(n){var t=tt.value.form[n];Object.keys(tt.value).forEach(function(n){if(t===n){if(!tt.value[n].service_name)throw Tn.error("未选择必须依赖项"),new Error("未选择必须依赖项");e.depend_app.push({appname:tt.value[n].appname,service_name:tt.value[n].service_name})}})}),e.depend_app=JSON.stringify(e.depend_app)),delete e.showCompose,e}catch(n){}},st=(e("i",function(){var e=p(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,ct();case 1:if(t=e.v){e.n=2;break}return e.a(2);case 2:r({loading:"正在安装...",request:q(t),message:!0,success:function(e){e.status&&(zn.value.app_type="installed",n())}});case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),function(){var e,n;nt.value=[],null===(e=Yn.value.appData)||void 0===e||null===(e=e.appversion)||void 0===e||e.forEach(function(e){e.s_version.length?e.s_version.forEach(function(n){nt.value.push({label:e.m_version+"."+n,value:e.m_version+"."+n})}):nt.value.push({label:e.m_version,value:e.m_version})}),Zn.version=null===(n=nt.value[0])||void 0===n?void 0:n.value}),pt=function(){var e=p(i().m(function e(n){var t,a,o;return i().w(function(e){for(;;)switch(e.n){case 0:o=[],tt.value.form={},Yn.value=n,et(n.appData),null===(t=n.appData.depend)||void 0===t||t.forEach(function(e){return tt.value.form[e.apptype]=""}),null===(a=n.appData.depend)||void 0===a||a.forEach(function(e){e.appname.forEach(function(n,t){!t&&(tt.value.form[e.apptype]=n),tt.value[n]={appname:n,apptype:e.apptype,version:"",service_name:"",option:[]},o.push({app_name:n,app_type:e.apptype})})}),r({request:I({depend_app:JSON.stringify(o)}),data:{data:Array},success:function(e){var n;null===(n=e.data)||void 0===n||n.forEach(function(e,n){var t;tt.value[e.appname].service_name=null===(t=e.installed[0])||void 0===t?void 0:t.service_name,tt.value[e.appname].option=e.installed||[]})}});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),ft=(e("c",function(){Yn.value={},e("f",Zn=G({version:"",showCompose:"false",editcompose:""})),nt.value=[],tt.value={}}),null),dt=[],mt={},vt=e("p",H("run")),yt=e("s",U("")),ht=function(){var e,n;null===(e=ft=R({route:"/sock_shell",onMessage:_t}))||void 0===e||e.send("tail -f "+(null===(n=mt.appinfo.filter(function(e){return"installed_log"===e.fieldKey})[0])||void 0===n?void 0:n.fieldValue))},_t=function(e,n){try{var t,a,r,i=n.data;if(dt.push(i),dt.length>50)yt.value=null===(t=dt)||void 0===t?void 0:t.slice(dt.length-50).join(" ");else yt.value=null===(a=dt)||void 0===a?void 0:a.join(" ");if(i.includes("bt_successful")||i.includes("bt_failed"))null===(r=ft)||void 0===r||r.close()}catch(u){var o;null===(o=ft)||void 0===o||o.close()}},gt=(e("q",function(e){yt.value="",dt=[],"run"===e?gt():bt()}),e("t",function(){"run"===vt.value?gt():bt()}),function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:r({request:E({service_name:mt.service_name,app_name:mt.appname}),success:function(e){yt.value=e.data.data}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()),bt=(e("n",function(e){(mt=e).isInit?(vt.value="install",bt()):gt()}),function(){var e=p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:if(!mt.isInit){e.n=1;break}return ht(),e.a(2);case 1:r({request:M({service_name:mt.service_name}),success:function(e){yt.value=e.data.data||""}});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()),wt=(e("o",function(){var e;null===(e=ft)||void 0===e||e.close(),ft=null,dt=[],mt={},vt.value="run",yt.value=""}),e("l",G({version:"",backup:!1,pull:!1,id:""}))),kt=e("m",U([])),xt=(e("h",function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:return wt.id=n.id,e.n=1,r({request:T({id:wt.id}),data:{data:[Array,kt]},success:function(e){wt.version=e.data[0].version}});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),e("k",function(){var e=p(i().m(function e(n){var t;return i().w(function(e){for(;;)switch(e.n){case 0:return t={id:wt.id,m_version:wt.version.split(".")[0],s_version:"".concat(wt.version.split(".")[1],".").concat(wt.version.split(".")[2]),backup:wt.backup,pull:wt.pull},e.n=1,r({request:z(t),loading:"正在更新,请稍后...",message:!0});case 1:An.value=!0,n();case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),e("j",function(){wt.version="",wt.backup=!1,wt.pull=!1,wt.id="",kt.value=[]}),e("g",function(e,n,t,a){"true"===e&&""===n.value.editcompose&&r({request:A({app_name:t,gpu:"boolean"==typeof n.value.gpu,appid:a}),success:function(e){n.value.editcompose=e.data.data}})}),["src"]),Ct={src:qn,alt:"icon_plug",key:"icon_plug",class:"AppImg"},jt={class:"AppContent"},St={class:"w-full flex items-start justify-between"},Dt={class:"flex-col flex flex-grow-0"},Ot={class:"AppRow"},qt=["title"],It={key:0,class:"flex items-center"},Tt={key:0,class:"flex items-center"},zt={key:1},At={class:"mx-8px"},Pt=["innerHTML","title"],Et={key:1,class:"AppDescribe"},Mt={class:"AppRow"},Rt={class:"-m-[12px]"},Vt=["onClick"],Gt=["onClick"],Lt=["title","onClick"],Ft={class:"flex items-center flex-1"},Nt={class:"flex items-center"},Ht={class:"truncate max-w-[24rem]"},Ut={key:0,class:"flex"},Wt={key:0,class:"absolute bottom-14px w-[80%]"},Bt={key:1,class:"tag-container absolute bottom-6"},Kt=W({__name:"index",props:{data:{default:function(){return{}}}},emits:["refresh"],setup:function(e,n){var a=n.emit,r=e,o=qe().refs.deployMenuData,u=H("");B(r,p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return u.value="",e.n=1,En(r.data,u);case 1:return e.a(2)}},e)}))),K(p(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,En(r.data,u);case 1:return e.a(2)}},e)})));var l=a,c=we(function(){switch(r.data.status){case"running":return["运行中","success"];case"exited":return["已停止","danger"];case"initializing":return["安装中","info"];default:return["异常","warning"]}});return function(n,a){var r=g,i=ke,s=me,p=Ce,f=pe,d=xe;return J(),$("div",{class:ae(["AppItem relative",{"!h-[12.8rem]":!e.data.installed}])},[Z(u)?(J(),$("img",{src:Z(u),key:e.data.appname,class:"AppImg"},null,8,xt)):(J(),$("img",Ct)),X("div",jt,[X("div",St,[X("div",Dt,[X("div",Ot,[X("span",{class:ae(["text-medium font-600",{"truncate leading-[22px] !font-normal flex-1 max-w-[20rem]":e.data.installed,"flex items-center":!e.data.installed}]),title:e.data.installed?e.data.service_name:e.data.apptitle},[X("span",null,ce(e.data.installed?e.data.service_name:e.data.apptitle),1),e.data.installedCount?(J(),$("span",{key:0,class:"mx-8px bt-link text-small font-normal",onClick:a[0]||(a[0]=function(e){return Z(o).app_type="installed"})},"已安装 ("+ce(e.data.installedCount)+")",1)):se("",!0),e.data.help?(J(),oe(r,{key:1,href:e.data.help,target:"_blank",class:"ml-8px bt-link text-small font-normal"},{default:te(function(){return t(a[17]||(a[17]=[ne(" >>帮助",-1)]))}),_:1},8,["href"])):se("",!0)],10,qt),e.data.installed?(J(),$("div",It,[Y(i,{type:Z(c)[1],class:ae(["mx-[0.8rem]",{"cursor-pointer":"initializing"===e.data.status}]),onClick:a[1]||(a[1]=function(n){return Z(Qn)(e.data,"log",!0)})},{default:te(function(){return["initializing"===e.data.status?(J(),$("span",Tt,t(a[18]||(a[18]=[ne("正在安装 ",-1),X("i",{class:"svgtofont-el-loading !text-small animation-spin"},null,-1)])))):(J(),$("span",zt,ce(Z(c)[0]),1))]}),_:1},8,["type","class"]),Y(s,{class:"item",effect:"dark",content:"进入安装目录",placement:"top"},{default:te(function(){return[X("i",{class:"svgtofont-folder-open mr-[0.4rem]",onClick:a[2]||(a[2]=function(n){return Z(Bn)("path",e.data)})})]}),_:1}),Y(s,{class:"item",effect:"dark",content:"打开日志",placement:"top"},{default:te(function(){return[X("i",{class:"svgtofont-left-logs",onClick:a[3]||(a[3]=function(n){return Z(Qn)(e.data,"log")})})]}),_:1}),X("span",At,"已安装:"+ce(e.data.createat),1)])):se("",!0)]),X("div",null,[e.data.installed?se("",!0):(J(),$("span",{key:0,innerHTML:e.data.appdesc,title:e.data.appdesc,class:"AppNoSetDes"},null,8,Pt)),e.data.installed?(J(),$("div",Et,[X("div",Mt,[Y(i,{type:"info",class:"mr-[0.8rem]",effect:"plain"},{default:te(function(){return[ne("版本:"+ce(e.data.m_version+(e.data.s_version?".":"")+e.data.s_version),1)]}),_:1}),(J(!0),$(re,null,ie(e.data.port,function(n,t){return J(),oe(p,{key:n,trigger:"hover",placement:"bottom",width:"12.5rem","popper-class":"!min-w-[12.5rem]"},{reference:te(function(){return[ue(Y(i,{type:"info",class:ae(["mr-[0.8rem]",Z(Un)(e.data)?"cursor-pointer":""]),effect:"plain",onClick:function(t){return Z(Wn)(e.data,n,"http")}},{default:te(function(){return[ne("端口:"+ce(n),1)]}),_:2},1032,["class","onClick"]),[[le,t<2]])]}),default:te(function(){return[X("div",Rt,[X("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-light",onClick:function(t){return Z(Wn)(e.data,n,"http")}},"HTTP协议访问",8,Vt),X("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-light",onClick:function(t){return Z(Wn)(e.data,n,"https")}},"HTTPS协议访问",8,Gt)])]}),_:2},1024)}),128)),Y(s,{placement:"top"},{content:te(function(){return[X("div",null,[(J(!0),$(re,null,ie(e.data.port,function(n,t){var a;return ue((J(),$("span",{key:t,class:ae(Z(Un)(e.data)?"cursor-pointer":""),title:Z(Un)(e.data)?"点击访问应用":"",onClick:function(t){return Z(Wn)(e.data,n)}},[ne(ce(n)+" ",1),ue(X("span",null,",",512),[[le,t!==(null===(a=e.data.port)||void 0===a?void 0:a.length)-1]])],10,Lt)),[[le,t>1]])}),128))])]}),default:te(function(){var n;return[(null===(n=e.data.port)||void 0===n?void 0:n.length)>=3?(J(),oe(i,{key:0,type:"info"},{default:te(function(){var n;return[ne(" +"+ce((null===(n=e.data.port)||void 0===n?void 0:n.length)-2),1)]}),_:1})):se("",!0)]}),_:1})]),X("div",Ft,[e.data.domain?(J(),oe(i,{key:0,type:"info",class:"mr-[0.8rem] cursor-pointer",effect:"plain",onClick:a[4]||(a[4]=function(n){return Z(Xn)(e.data.domain)})},{default:te(function(){return[X("div",Nt,[a[19]||(a[19]=X("i",{class:"svgtofont-icon-max-black mr-[0.4rem] !text-base"},null,-1)),Y(s,{effect:"dark",content:"点击跳转域名:"+e.data.domain,placement:"top-start"},{default:te(function(){return[X("span",Ht,"域名:"+ce(e.data.domain),1)]}),_:1},8,["content"])])]}),_:1})):se("",!0),e.data.domain?(J(),$("span",{key:1,class:"bt-link",onClick:a[5]||(a[5]=function(n){return Z(Kn)(e.data)})}," >管理网站")):se("",!0)])])):se("",!0)])]),e.data.installed?(J(),$("div",Ut,["ollama"===e.data.appname||"ollama_and_openwebui"===e.data.appname||"deepseek_r1"===e.data.appname?(J(),oe(f,{key:0,size:"small",onClick:a[6]||(a[6]=function(n){return Z(Fn)(e.data.appname,e.data)})},{default:te(function(){return t(a[20]||(a[20]=[ne("模型管理",-1)]))}),_:1})):se("",!0),"mysql"===e.data.appname||"redis"===e.data.appname||"postgresql"===e.data.appname||"tdengine"===e.data.appname?(J(),oe(f,{key:1,size:"small",onClick:a[7]||(a[7]=function(n){return Z(Fn)(e.data.appname,e.data)})},{default:te(function(){return t(a[21]||(a[21]=[ne("终端",-1)]))}),_:1})):se("",!0)])):se("",!0),e.data.installed?se("",!0):(J(),oe(f,{key:1,type:"primary",onClick:a[8]||(a[8]=function(n){return Z(Rn)(e.data)})},{default:te(function(){return t(a[22]||(a[22]=[ne("安装",-1)]))}),_:1}))]),e.data.installed?(J(),$("div",Wt,[Y(d,{class:"!my-[0.8rem] w-full"}),Y(f,{size:"small",onClick:a[9]||(a[9]=function(n){return Z(Ln)(e.data)})},{default:te(function(){return t(a[23]||(a[23]=[ne("详情 ",-1)]))}),_:1}),Y(f,{size:"small",onClick:a[10]||(a[10]=function(n){return Z(Qn)(e.data,"back")})},{default:te(function(){return t(a[24]||(a[24]=[ne("备份",-1)]))}),_:1}),"exited"===e.data.status?(J(),oe(f,{key:0,size:"small",onClick:a[11]||(a[11]=function(n){return Z(Jn)(l,"start",{service_name:e.data.service_name,appname:e.data.appname})})},{default:te(function(){return t(a[25]||(a[25]=[ne("启动 ",-1)]))}),_:1})):se("",!0),"exited"!==e.data.status?(J(),oe(f,{key:1,size:"small",onClick:a[12]||(a[12]=function(n){return Z(Jn)(l,"stop",{service_name:e.data.service_name,appname:e.data.appname})})},{default:te(function(){return t(a[26]||(a[26]=[ne("停止 ",-1)]))}),_:1})):se("",!0),Y(f,{size:"small",onClick:a[13]||(a[13]=function(n){return Z(Jn)(l,"restart",{service_name:e.data.service_name,appname:e.data.appname})})},{default:te(function(){return t(a[27]||(a[27]=[ne("重启 ",-1)]))}),_:1}),Y(f,{type:"default",plain:"",size:"small",class:"danger-button",onClick:a[14]||(a[14]=function(n){return Z(Jn)(l,"rebuild",{service_name:e.data.service_name,appname:e.data.appname})})},{default:te(function(){return t(a[28]||(a[28]=[ne("重建 ",-1)]))}),_:1}),Y(f,{type:"default",plain:"",size:"small",class:"danger-button",onClick:a[15]||(a[15]=function(n){return Z($n)(l,{appname:e.data.appname,id:e.data.id})})},{default:te(function(){return t(a[29]||(a[29]=[ne("卸载",-1)]))}),_:1}),Z(Mn)(e.data)?(J(),oe(f,{key:2,size:"small",onClick:a[16]||(a[16]=function(n){return Z(Gn)(e.data)})},{default:te(function(){return t(a[30]||(a[30]=[ne("更新",-1)]))}),_:1})):se("",!0)])):se("",!0),e.data.installed?se("",!0):(J(),$("div",Bt,[Y(i,{type:"info"},{default:te(function(){return[ne(ce(e.data.appTypeCN),1)]}),_:1}),-1==e.data.appid?(J(),oe(i,{key:0,type:"success",class:"ml-4"},{default:te(function(){return t(a[31]||(a[31]=[ne("外部应用",-1)]))}),_:1})):se("",!0)]))])],2)}}}),Qt=b(Kt,[["__scopeId","data-v-234f2b3e"]]),Jt={class:"pr-[1.5rem]"},$t={class:"w-full !h-[4rem] p-2rem inline-block flex justify-center items-center text-small"},Xt={class:"text-small"},Yt=W({__name:"index",setup:function(e){var n=s(),a=n.mainHeight,r=n.mainWidth,o=qe().refs.deployMenuData,u=w().refs,l=u.isRefreshAppList,c=u.isRefreshInstallList,f=H(null),d=H(null),m=we(function(){return r.value<1125?1:r.value<1632?2:3}),v=we(function(){return(r.value-35)/m.value});return B(function(){return o.value.app_type},function(){var e=p(i().m(function e(n){return i().w(function(e){for(;;)switch(e.n){case 0:if(f.value.scrollTop=0,Cn.value=!1,"installed"!==n){e.n=2;break}return clearTimeout(jn),e.n=1,Dn("all");case 1:On(),e.n=3;break;case 2:clearTimeout(jn);case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),B(function(){return l.value},function(e){e&&(Be(We),l.value=!1)}),B(function(){return c.value},function(e){e&&(clearTimeout(jn),Dn("all"),c.value=!1)}),B(function(){return Ue.list.length},function(e){d.value.scrollToPosition(0),d.value.handleResize()}),K(function(){"installed"===o.value.app_type?c.value=!0:l.value=!0}),je(function(){clearTimeout(jn)}),function(e,n){var r=g,i=xe,u=De;return J(),$("div",{ref_key:"scrollContainerRef",ref:f,style:Se("height:".concat(Z(a)-260,"px")),class:"overflow-hidden relative scrollBox"},[ue(Y(Z(Ee),{ref_key:"virtualScrollRef",ref:d,class:"AppList",style:Se("height:".concat(Z(a)-280,"px;width: calc(20px + ").concat(Z(v),"px * ").concat(Z(m),");")),items:Z(Ue).list,"item-size":"installed"===Z(o).app_type?175:145,itemSecondarySize:Z(v),gridItems:Z(m),buffer:290,"key-field":"index",itemClass:"app-item",onScrollEnd:Z(Sn)},{default:te(function(e){var n=e.item;return[X("div",Jt,[Y(Qt,{data:n,onRefresh:Z(Dn)},null,8,["data","onRefresh"])])]}),after:te(function(){return[Z(Cn)&&Z(Ue).list.length&&"installed"!==Z(o).app_type?(J(),oe(i,{key:0},{default:te(function(){return[X("span",$t,[n[2]||(n[2]=ne("没有更多了,如没有想要的应用可",-1)),Y(r,{onClick:Z(ze)},{default:te(function(){return t(n[1]||(n[1]=[ne("提交需求反馈",-1)]))}),_:1},8,["onClick"])])]}),_:1})):se("",!0)]}),_:1},8,["style","items","item-size","itemSecondarySize","gridItems","onScrollEnd"]),[[le,Z(Ue).list.length]]),Z(Ue).list.length?se("",!0):(J(),oe(u,{key:0,class:"w-full"},{description:te(function(){return[X("span",Xt,[n[3]||(n[3]=ne("未查询到搜索内容,请尝试",-1)),X("span",{class:"inline-flex bt-link",onClick:n[0]||(n[0]=function(e){return Z(rn)(!0)})},"更新应用列表"),n[4]||(n[4]=ne("或加入QQ群：767189639反馈",-1))])]}),_:1}))],4)}}}),Zt=b(Yt,[["__scopeId","data-v-7a8f7a60"]]),ea={class:"w-full"},na=b(W({__name:"index",setup:function(e){return je(function(){V(["/mod/docker/com/get_apps","/mod/docker/com/get_tags","/mod/docker/com/get_installed_apps"])}),Q(function(){Ue.list=[],Ue.total=0,We.p=1,We.query=""}),function(e,n){var t=Oe("bt-loading");return J(),$("div",ea,[Y(bn,{class:"mb-8px"}),ue(Y(Zt,null,null,512),[[t,Z(Ue).loading],[t,"正在加载列表，请稍后...","title"]])])}}}),[["__scopeId","data-v-02f5e14a"]]),ta=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"}));e("w",ta)}}})}();
