!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,u="function"==typeof Symbol?Symbol:{},o=u.iterator||"@@iterator",a=u.toStringTag||"@@toStringTag";function i(e,u,o,a){var i=u&&u.prototype instanceof c?u:c,s=Object.create(i.prototype);return t(s,"_invoke",function(e,t,u){var o,a,i,c=0,s=u||[],f=!1,p={p:0,n:0,v:r,a:y,f:y.bind(r,4),d:function(e,t){return o=e,a=0,i=r,p.n=t,l}};function y(e,t){for(a=e,i=t,n=0;!f&&c&&!u&&n<s.length;n++){var u,o=s[n],y=p.p,m=o[2];e>3?(u=m===t)&&(i=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=r):o[0]<=y&&((u=e<2&&y<o[1])?(a=0,p.v=t,p.n=o[1]):y<m&&(u=e<3||o[0]>t||t>m)&&(o[4]=e,o[5]=t,p.n=m,a=0))}if(u||e>1)return l;throw f=!0,t}return function(u,s,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&y(s,m),a=s,i=m;(n=a<2?r:i)||!f;){o||(a?a<3?(a>1&&(p.n=-1),y(a,i)):p.n=i:p.v=i);try{if(c=2,o){if(a||(u="next"),n=o[u]){if(!(n=n.call(o,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,a<2&&(a=0)}else 1===a&&(n=o.return)&&n.call(o),a<2&&(i=TypeError("The iterator does not provide a '"+u+"' method"),a=1);o=r}else if((n=(f=p.n<0)?i:e.call(t,p))!==l)break}catch(n){o=r,a=1,i=n}finally{c=1}}return{value:n,done:f}}}(e,o,a),!0),s}var l={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(t(n={},o,function(){return this}),n),y=f.prototype=c.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e}return s.prototype=f,t(y,"constructor",f),t(f,"constructor",s),s.displayName="GeneratorFunction",t(f,a,"GeneratorFunction"),t(y),t(y,a,"Generator"),t(y,o,function(){return this}),t(y,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:m}})()}function t(e,r,n,u){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}t=function(e,r,n,u){function a(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?o?o(e,r,{value:n,enumerable:!u,configurable:!u,writable:!u}):e[r]=n:(a("next",0),a("throw",1),a("return",2))},t(e,r,n,u)}function r(e,t,r,n,u,o,a){try{var i=e[o](a),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,u)}function n(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./index-legacy137.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./useController-legacy17.js?v=1763689792","./index-legacy110.js?v=1763689792","./validator-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792","./index.vue_vue_type_style_index_0_scoped_cdc7f4d3_lang-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./useController-legacy6.js?v=1763689792","./config-legacy.js?v=1763689792"],function(t,u){"use strict";var o,a,i,l,c,s,f,p,y,m,d,v,b,g,h,_,j,w,x,S,O,P,V,C,E,k,A;return{setters:[function(e){o=e._},function(e){a=e.L,i=e.bE,l=e.k},function(e){c=e.c,s=e.g,f=e.e,p=e.V,y=e.D,m=e.H,d=e.x,v=e.y,b=e.z,g=e.O,h=e.C,_=e.B,j=e.G,w=e.L},function(e){x=e.u,S=e.S},function(e){O=e.i,P=e.h,V=e.p,C=e.o,E=e.m,k=e.b,A=e.a},null,null,null,null,null,null,null,null,null],execute:function(){t("default",c({__name:"traffic",setup:function(t,u){var c=u.expose,G=x(),I=(G.isBindExtranet,G.siteInfo);S();var T,U,B=a({data:O,options:function(e){return s(function(){var t;return[{type:"custom",render:function(){return f(i,{label:"是否启用"},{default:function(){return[f(p,{modelValue:e.value.value,"onUpdate:modelValue":function(t){return e.value.value=t},onChange:function(t){return P(t,e.value)}},{default:function(){return[y("启用流量控制")]}})]}})}},{type:"select",label:"限制方案",key:"type",options:V.value,attrs:{style:"width: 24rem;",onChange:function(t){var r=V.value[t].items,n=r.perserver,u=r.perip,o=r.limit_rate;e.value.perserver=n,e.value.perip=u,e.value.limit_rate=o}}},{type:"custom",render:function(){return f(i,{label:"并发限制",prop:"perserver"},{default:function(){return[f(l,{modelValue:e.value.perserver,"onUpdate:modelValue":function(t){return e.value.perserver=t},type:"number",width:"24rem",class:"mr-1rem"},null),f("div",{class:"text-tertiary text-small"},[y("* 限制当前站点最大并发数")])]}})},rules:{perserver:[{required:!0,message:"请输入并发限制",trigger:"blur"},{validator:function(e,t,r){t>65535?r(new Error("不能大于65535")):r()}}]}},{type:"custom",render:function(){return f(i,{label:"单IP限制",prop:"perip"},{default:function(){return[f(l,{modelValue:e.value.perip,"onUpdate:modelValue":function(t){return e.value.perip=t},type:"number",width:"24rem",class:"mr-1rem"},null),f("span",{class:"text-tertiary text-small"},[y("* 限制单个IP访问最大并发数")])]}})},rules:{perip:[{required:!0,message:"请输入单IP限制",trigger:"blur"},{validator:function(e,t,r){t>65535?r(new Error("不能大于65535")):r()}}]}},{type:"custom",render:function(){return f(i,{label:"流量限制",prop:"limit_rate"},{default:function(){return[f(l,{modelValue:e.value.limit_rate,"onUpdate:modelValue":function(t){return e.value.limit_rate=t},type:"number",width:"24rem",class:"mr-1rem"},null),f("span",{class:"text-tertiary text-small"},[y("* 限制每个请求的流量上限（单位：KB）")])]}})},rules:{limit_rate:[{required:!0,message:"请输入流量限制",trigger:"blur"}]}}].concat(n(null!==(t=I.value)&&void 0!==t&&t.id?[{type:"custom",render:function(){return f(i,{label:" "},{default:function(){return[f(m,{type:"primary",onClick:q},{default:function(){return[e.value.value?"保存":"保存并启用"]}})]}})}}]:[]))})},submit:(T=e().m(function t(r,n){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n();case 1:return e.n=2,C(r.value);case 2:return e.a(2,e.v)}},t)}),U=function(){var e=this,t=arguments;return new Promise(function(n,u){var o=T.apply(e,t);function a(e){r(o,n,u,a,i,"next",e)}function i(e){r(o,n,u,a,i,"throw",e)}a(void 0)})},function(e,t){return U.apply(this,arguments)})}),F=B.BtForm,q=B.submit;return c({onConfirm:q}),function(e,t){var r=o;return d(),v("div",{class:w(["h-full",{"p-2rem":b(A)}])},[b(E)?(d(),g(r,{key:0,width:"36rem"},{content:h(function(){return[y(_(b(k)),1)]}),_:1})):j("",!0),f(b(F))],2)}}}))}}})}();
