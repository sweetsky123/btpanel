import{c as a,t as e,g as s,e as t,ag as r,V as l,D as u,H as d,a9 as n,x as i,y as m,A as o,z as p}from"./base-lib.js?v=1763689792";import{u as c,L as y,bE as f,Q as b}from"./utils-lib.js?v=1763689792";import{cV as _,p as g,dh as v,c_ as j}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";const w=a({__name:"alarm",setup(a){const{payment:w}=c(),{authType:h}=e(w.value),{BtForm:x,submit:V}=y({data:async()=>{const{data:a}=await(async()=>{const{data:a}=await j(),{status:e,safe_type:s,sender:t}=a.data.alertable;return{data:{status:e,safe_type:s,sender:t}}})();return a.sender.length>0&&(a.sender=a.sender.filter(a=>{if(a&&""!==a)return a})),a||{sender:[],status:!1,safe_type:[]}},options:a=>s(()=>[{type:"switch",label:"告警开关",key:"status"},{type:"custom",render:()=>t(f,{label:"类型"},{default:()=>[t(r,{modelValue:a.value.safe_type,"onUpdate:modelValue":e=>a.value.safe_type=e},{default:()=>[t(l,{value:"webshell"},{default:()=>[u("恶意文件告警")]})]})]})},_("通知方式","sender",{attrs:{class:"!w-24rem",limit:["sms"]},rules:{sender:[{required:!0,message:"请选择告警方式",trigger:"change"}]}}),{type:"custom",render:()=>t(f,{label:" "},{default:()=>[t(d,{type:"primary",onClick:V},{default:()=>["保存"]})]})}]),submit:async(a,e)=>{"ltd"===h.value?(await e(),await b({loading:"正在保存配置，请稍后...",request:v(n(a.value)),message:!0})):g({sourceId:68})}});return(a,e)=>(i(),m("div",null,[e[0]||(e[0]=o("div",{class:"text-large mb-6"},"全局告警设置",-1)),t(p(x))]))}});export{w as default};
