!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?e(Object(a),!0).forEach(function(e){r(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function r(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,a,i){var o=r&&r.prototype instanceof s?r:s,l=Object.create(o.prototype);return u(l,"_invoke",function(n,r,a){var u,i,o,s=0,l=a||[],f=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return u=e,i=0,o=t,v.n=n,c}};function p(n,r){for(i=n,o=r,e=0;!f&&s&&!a&&e<l.length;e++){var a,u=l[e],p=v.p,d=u[2];n>3?(a=d===r)&&(o=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=t):u[0]<=p&&((a=n<2&&p<u[1])?(i=0,v.v=r,v.n=u[1]):p<d&&(a=n<3||u[0]>r||r>d)&&(u[4]=n,u[5]=r,v.n=d,i=0))}if(a||n>1)return c;throw f=!0,r}return function(a,l,d){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,d),i=l,o=d;(e=i<2?t:o)||!f;){u||(i?i<3?(i>1&&(v.n=-1),p(i,o)):v.n=o:v.v=o);try{if(s=2,u){if(i||(a="next"),e=u[a]){if(!(e=e.call(u,o)))throw TypeError("iterator result is not an object");if(!e.done)return e;o=e.value,i<2&&(i=0)}else 1===i&&(e=u.return)&&e.call(u),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=t}else if((e=(f=v.n<0)?o:n.call(r,v))!==c)break}catch(e){u=t,i=1,o=e}finally{s=1}}return{value:e,done:f}}}(n,a,i),!0),l}var c={};function s(){}function l(){}function f(){}e=Object.getPrototypeOf;var v=[][r]?e(e([][r]())):(u(e={},r,function(){return this}),e),p=f.prototype=s.prototype=Object.create(v);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,u(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,u(p,"constructor",f),u(f,"constructor",l),l.displayName="GeneratorFunction",u(f,i,"GeneratorFunction"),u(p),u(p,i,"Generator"),u(p,r,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:o,m:d}})()}function u(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}u=function(t,e,n,r){function i(e,n){u(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},u(t,e,n,r)}function i(t,e,n,r,a,u,i){try{var o=t[u](i),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var u=t.apply(e,n);function o(t){i(u,r,a,o,c,"next",t)}function c(t){i(u,r,a,o,c,"throw",t)}o(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792"],function(t,e){"use strict";var r,u,i,c,s,l,f,v,p,d,m,h,y,g,b,w,j,O,R,E,S,_,P;return{setters:[function(t){r=t.Q,u=t.bb,i=t.u,c=t.n,s=t.H,l=t.p,f=t.bR,v=t.M},function(t){p=t.modifyRedirect,d=t.removeRedirect,m=t.getRedirectFile,h=t.getFileBody,y=t.getRedirectList,g=t.createRedirect,b=t.getProjectDomain,w=t.setErrorRedirect,j=t.MulDelRedirect},function(t){O=t.s,R=t.j,E=t.r},function(t){S=t.c},function(t){_=t.u,P=t.S}],execute:function(){var T=R("SITE-REDIRECT-STORE",function(){var t=_(),e=t.siteType,n=(t.siteInfo,E(!1)),i=function(){var t=o(a().m(function t(n){var u;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r({loading:"正在修改，请稍后...",request:p(n,e.value),message:!0});case 1:return u=t.v,t.a(2,{status:u.status,msg:u.msg});case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"修改状态失败"})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=o(a().m(function t(n){var u;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r({loading:"正在删除，请稍后...",request:d(n,e.value),message:!0});case 1:return u=t.v,t.a(2,{status:u.status,msg:u.msg});case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"删除重定向失败"})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=o(a().m(function t(n){var u,i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,u=["php","html","proxy"].includes(e.value),t.n=1,r({loading:"正在获取内容，请稍候...",request:u?m(n,e.value):h(n)});case 1:if(i=t.v,"php"!==e.value&&"html"!==e.value){t.n=2;break}return t.a(2,{data:{content:i.data[0].data,redirect_conf_file:i.data[1]},status:!0});case 2:return t.a(2,{data:{content:i.data.data,redirect_conf_file:n.path},status:!0});case 3:return t.p=3,t.v,t.a(2,{status:!1,msg:"获取配置文件失败"})}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=o(a().m(function t(n){var u;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r({request:y(n,e.value),data:Array});case 1:return u=t.v,t.a(2,{data:u,total:u.length,other:{}});case 2:return t.p=2,t.v,t.a(2,{data:[],total:0,other:{}})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=o(a().m(function t(n,u){var i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r({loading:"正在提交，请稍后...",request:u?p(n,e.value):g(n,e.value),message:!0});case 1:return i=t.v,t.a(2,{status:i.status,msg:i.msg});case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"添加重定向失败"})}},t,null,[[0,2]])}));return function(e,n){return t.apply(this,arguments)}}(),v=function(){var t=o(a().m(function t(n){var i,o,c;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,i=["php","html"].includes(e.value),t.n=1,r({request:i?u(n):b(n,e.value)});case 1:if(o=t.v,c=o.data,"proxy"!==e.value){t.n=2;break}return t.a(2,{data:c.data.domain_list,status:!0});case 2:return t.a(2,{data:Array.isArray(c)?c:c.data,status:!0});case 3:t.n=5;break;case 4:return t.p=4,t.v,t.a(2,{status:!1,msg:"获取域名失败"});case 5:return t.a(2)}},t,null,[[0,4]])}));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=o(a().m(function t(n,u){var i;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,r({loading:"正在保存，请稍后...",request:u||"html"===e.value?p(n,e.value):w(n),message:!0});case 1:return i=t.v,t.a(2,{status:i.status,msg:i.msg});case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"添加错误重定向失败"})}},t,null,[[0,2]])}));return function(e,n){return t.apply(this,arguments)}}();return{getDomainEvent:v,changeStatusEvent:i,delRedirectEvent:c,getRedirectFileEvent:s,getRedirectDataEvent:l,submitRedirectEvent:f,submitErrorRedirectEvent:j,isRefreshList:n}}),x=t("u",function(){return O(T())}),D=i().plugin,k=_(),F=k.siteInfo,L=k.siteType,N=k.isBindExtranet,U=P().saveFileEvent,q=x().isRefreshList,I=T(),G=I.getDomainEvent,A=I.changeStatusEvent,J=I.delRedirectEvent,M=I.getRedirectDataEvent,B=I.getRedirectFileEvent,C=I.submitRedirectEvent,H=I.submitErrorRedirectEvent,Q=t("d",E(!1)),z=t("c",E(!1)),K=t("b",E("")),V=E(""),W=E(!1),X=E(),Y=E(!1),Z=t("n",E()),$=t("r",E()),tt=(t("h",[{content:"设置域名重定向后，该域名的404重定向将失效"},{content:"取消重定向时，由于浏览器会缓存重定向信息，在清除缓存前，浏览器仍会根据缓存自动重定向"}]),t("o",[{content:"重定向类型：表示访问选择的“域名”或输入的“路径”时将会重定向到指定URL"},{content:"目标URL：可以填写你需要重定向到的站点，目标URL必须为可正常访问的URL，否则将返回错误"},{content:"重定向方式：使用301表示永久重定向，使用302表示临时重定向"},{content:"保留URI参数：表示重定向后访问的URL是否带有子路径或参数如设置访问http://b.com"},{content:"重定向到http://a.com 保留URI参数： http://b.com/1.html ---\x3e http://a.com/1.html"},{content:"不保留URI参数：http://b.com/1.html ---\x3e http://a.com"}]),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L.value,r=n(n({},t),{},{type:t.type?0:1,redirectdomain:JSON.stringify(t.redirectdomain)});return delete r.redirect_conf_file,"proxy"===e&&(r.site_name=F.value.name,delete r.sitename),r}),et=(t("k",function(){var t=o(a().m(function t(e,r,u,i){var c,s,l,v;return a().w(function(t){for(;;)switch(t.n){case 0:return c=i.label,s=i.value,l=new Map([["start","批量启用选中的规则后，配置的重定向域名/目录将会生效"],["stop","批量停用选中的规则后，配置的重定向域名/目录将会失效"],["delete","批量删除当前选中的规则后，配置的重定向域名/目录将会彻底失效"]]),v=function(){var t=o(a().m(function t(e){var r,u,i,o,c;return a().w(function(t){for(;;)switch(t.n){case 0:r=new Map([["start",p],["stop",p],["delete",j]]),u=e.redirectname,i=r.get(s),c=s,t.n="start"===c||"stop"===c?1:"delete"===c?3:5;break;case 1:if(!i){t.n=3;break}return o=tt(n(n({},e),{},{type:"stop"===s?1:0})),t.n=2,i(o,L.value);case 2:case 4:return t.a(2,t.v);case 3:if(!i){t.n=5;break}return t.n=4,i({site_id:F.value.id,redirectnames:u},L.value);case 5:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),t.n=1,e({title:"批量".concat(c),content:"".concat(l.get(s),"，是否继续操作？"),column:[{label:"规则名称",render:function(t){var e;return t.errorpage?"404错误页面":"domain"===t.domainorpath?null===(e=f(t.redirectdomain,"array",[]))||void 0===e?void 0:e.join("、"):t.redirectpath}},S()],onConfirm:function(){var t=o(a().m(function t(){return a().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,r(v);case 1:return q.value=!0,t.a(2,!1)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)}));return function(e,n,r,a){return t.apply(this,arguments)}}()),t("f",function(){var t=o(a().m(function t(e){var n,r;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n=tt(e),t.n=1,A(n);case 1:return(r=t.v).status&&(q.value=!0),t.a(2,r);case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"修改状态失败"})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}()),t("j",function(){var t=o(a().m(function t(e){var n,r,u,i,o,c,s=arguments;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:L.value,t.p=1,t.n=2,l({title:"删除重定向【".concat("domain"===e.domainorpath?null===(r=f(e.redirectdomain,"array",[]))||void 0===r?void 0:r.join("、"):e.redirectpath,"】"),content:"删除选中的规则后，配置的重定向域名/目录将指向源地址，是否继续操作？",icon:"warning-filled",type:"calc"});case 2:return u=F.value.name,i=e.redirectname,o={proxy:{site_name:u,redirectname:i},default:{sitename:u,redirectname:i}},t.n=3,J(o[n]||o.default);case 3:return(c=t.v).status&&(q.value=!0),t.a(2,c);case 4:return t.p=4,t.v,t.a(2,{status:!1,msg:"删除重定向失败"})}},t,null,[[1,4]])}));return function(e){return t.apply(this,arguments)}}()),t("g",function(){var t=o(a().m(function t(e){var n,r,u,i,o;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,z.value=!0,n=["php","html"].includes(L.value),r={},r=n?{sitename:F.value.name,redirectname:e.redirectname,webserver:D.value.webserver}:{path:e.redirect_conf_file},t.n=1,B(r);case 1:(u=t.v).status?(Q.value=!0,K.value=null===(i=u.data)||void 0===i?void 0:i.content,V.value=null===(o=u.data)||void 0===o?void 0:o.redirect_conf_file):(v.error(u.msg),Q.value=!1),z.value=!1,t.n=3;break;case 2:t.p=2,t.v,Q.value=!1;case 3:return t.a(2)}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}()),t("s",o(a().m(function t(){var e,n,r=arguments;return a().w(function(t){for(;;)switch(t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{data:K.value,encoding:"utf-8",path:V.value},t.n=1,U(e);case 1:return n=t.v,t.a(2,n)}},t)}))),function(){var t=o(a().m(function t(){var e,n,r,u=arguments;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=u.length>0&&void 0!==u[0]&&u[0],n={sitename:F.value.name},t.p=1,t.n=2,M(n);case 2:return r=t.v,e&&v.success("刷新成功"),W.value=!1,X.value=null,Array.isArray(r.data)&&r.data.forEach(function(t){t.errorpage&&(W.value=!0,X.value=t)}),t.a(2,r);case 3:return t.p=3,t.v,t.a(2,{data:[],total:0,other:{}})}},t,null,[[1,3]])}));return function(){return t.apply(this,arguments)}}()),nt=(t("e",function(t){Y.value=!!t,$.value=t||!1,c({title:"".concat(t?"编辑":"添加","重定向").concat(t?"【".concat(t.sitename,"】"):""),area:68,component:function(){return s(function(){return e.import("./add-redirect-legacy2.js?v=1763689792")},void 0,e.meta.url)},btn:!0})}),t("a",function(t){!t&&W.value&&(t=X.value),$.value=t||!1,c({title:"404重定向设置",area:42,component:function(){return s(function(){return e.import("./error-redirect-legacy.js?v=1763689792")},void 0,e.meta.url)},compData:{rowData:t,siteType:L.value,refresh:function(){return q.value=!0}},btn:!0})}),t("i",o(a().m(function t(){var e,r,u,i,o;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,r=F.value,u=r.project_type,i=r.project_config,N.value=!(null==i||!i.bind_extranet),["php","html","proxy","phpasync"].includes(u)&&(N.value=!0),t.n=1,et();case 1:return o=t.v,at.value=o.data,t.a(2,n(n({},o),{},{data:(null===(e=o.data)||void 0===e?void 0:e.map(function(t,e){return n(n({},t),{},{id:e+1})}))||[]}));case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))),function(t){var e=F.value.name,r=t.holdpath,a=t.type,u=t.redirectdomain,i=n(n({},t),{},{sitename:e,holdpath:r?"1":"0",type:a?"1":"0",redirectdomain:JSON.stringify(u),redirectname:t.redirectname||(new Date).getTime()});return"proxy"===L.value&&(i.site_name=e,delete i.sitename),i}),rt=(t("l",function(){var t=o(a().m(function t(e){var n,r;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n=nt(e),t.n=1,C(n,Y.value);case 1:return(r=t.v).status&&(q.value=!0),t.a(2,r.status);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}()),function(t){if(t)return{table:"domain",list:"True",search:F.value.id};var e={python:{data:JSON.stringify({name:F.value.name})},phpasync:{data:JSON.stringify({sitename:F.value.name})},proxy:{id:F.value.id,site_name:F.value.name},default:{data:JSON.stringify({project_name:F.value.name})}};return e[L.value]||e.default}),at=E([]),ut=(t("m",o(a().m(function t(){var e,n,r,u;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,e=["php","html"].includes(L.value),n=rt(e),t.n=1,G(n);case 1:return r=t.v,Y.value?Z.value=r.data:(u=at.value.map(function(t){return t.redirectdomain}).flat(),Z.value=r.data.filter(function(t){return!u.includes(t.name)})),t.a(2,r);case 2:return t.p=2,t.v,t.a(2,{status:!1,msg:"获取域名失败"})}},t,null,[[0,2]])}))),function(t){var e,r=F.value.name,a=n(n({},t),{},{sitename:r,type:Number(t.type)});return a.redirectname=(null===(e=X.value)||void 0===e?void 0:e.redirectname)||(new Date).getTime(),"html"===L.value&&(a.domainorpath="path",a.holdpath=999,a.redirectpath=""),"/"===a.topath&&(a.tourl=""),a});t("p",function(){var t=o(a().m(function t(e){var n,r;return a().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n=ut(e),t.n=1,H(n,W.value);case 1:return r=t.v,q.value=!0,t.a(2,r.status);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}())}}})}();
