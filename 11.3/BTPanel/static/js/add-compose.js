import{aQ as a,L as e,Q as s,iX as r,iY as t,iZ as l,_ as m}from"./utils-lib.js?v=1763689792";import{c as i,g as o,aE as c,W as u,v as d,x as p,y as n,e as v,z as f}from"./base-lib.js?v=1763689792";import{d as _,j as g,F as k,b,c as h}from"./form-item.js?v=1763689792";import{k as j}from"./useMethods.js?v=1763689792";const y={class:"flex flex-col lib-box"},x=m(i({__name:"add-compose",props:{compData:{default:()=>({})}},emits:["close"],setup(m,{expose:i,emit:x}){const w=m,D=x,{refs:{orchestrationData:q}}=a(),{BtForm:C,submit:A,param:E}=e({data:()=>({template_id:"",project_name:"",remark:""}),options:a=>o(()=>[_([g("容器编排模板","template_id",J.value,{attrs:{class:"!w-[30rem]",placeholder:"请选择编排模板",onChange:e=>F(e,a)},rules:[{required:!0,message:"请选择编排模板",trigger:"change"}]}),k(()=>c("span",{class:"cursor-pointer text-primary h-[3.2rem] leading-[3.2rem] ml-[1.5rem] inline-block",onClick:async()=>{j(L)}},"创建"),{key:"create",rules:{}})]),b("名称","project_name",{attrs:{class:"!w-[30rem]",placeholder:"请输入容器编排名称"},rules:[{required:!0,message:"请输入容器编排名称",trigger:"blur"}]}),h("备注","remark",{attrs:{class:"!w-[30rem]",placeholder:"请输入备注"}})]),submit:async(a,e,l)=>{await e();const m={template_id:a.value.template_id,project_name:a.value.project_name,remark:a.value.remark,...w.compData.id?{project_id:w.compData.id}:{}};s({request:w.compData.isEdit?r({data:JSON.stringify(m)}):t({data:JSON.stringify(m)}),loading:"提交中...",message:!0,success:a=>{a.status&&(D("close"),q.value.refreshList="force")}})}}),F=(a,e)=>{var s;e.value.remark=null==(s=J.value.find(e=>e.value===a))?void 0:s.remark},J=u([]),L=async()=>{s({request:l(),data:Array,success:a=>{var e,s;J.value=a.map(a=>({value:a.id,label:a.name,remark:a.remark})),E.value.template_id=(null==(e=J.value[0])?void 0:e.value)||"",E.value.remark=(null==(s=J.value[0])?void 0:s.remark)||""}})};return d(()=>{L()}),i({onConfirm:A}),(a,e)=>(p(),n("div",y,[v(f(C),{"label-width":"90px"})]))}}),[["__scopeId","data-v-cd0e41d7"]]);export{x as A};
