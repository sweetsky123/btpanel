import{c as a,o as s,r as e,v as o,x as l,y as i,e as t,C as d,z as n,A as r,D as m,F as p,b1 as u,S as c,am as f,an as _,ad as v,ab as D,O as b,B as w}from"./base-lib.js?v=1763689792";import{e as h,b as y}from"./utils-lib.js?v=1763689792";import{A as j,K as x}from"./ssl.js?v=1763689792";import{g as L}from"./useStore5.js?v=1763689792";import{d as S}from"./useMethod6.js?v=1763689792";import{a as g}from"./index486.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const z={class:"p-2rem"},C={class:"el-select-dropdown__empty"},N={style:{float:"left"}},k={class:"ml-[1rem]",style:{float:"right",color:"var(--el-base-tertiary)","font-size":"var(--el-font-size-base)"}},O=a({__name:"index",props:{compData:{type:Object,default:()=>{}}},emits:["close"],setup(a,{expose:O,emit:V}){const A=y(),{refs:{isRefreshDomainList:R,isRefreshDomainConfigList:q}}=L(),B=a,E=V,F=s({dns_id:"",ids:[]}),H=e([]),J=()=>{F.dns_id="",F.ids=[]},K=()=>{E("close"),S()};return o(()=>{var a,s,e,o;(async()=>{const{data:a}=await j(),{data:s}=a;H.value=s})(),B.compData.row.id&&((null==(a=B.compData.row)?void 0:a.dns)&&(F.dns_id=B.compData.row.dns.id),F.ids.push(B.compData.row.id)),B.compData.row.domain_id&&F.ids.push(B.compData.row.domain_id),(null==(s=B.compData)?void 0:s.rowList)&&(null==(o=null==(e=B.compData)?void 0:e.rowList)?void 0:o.length)&&(F.ids=[],B.compData.rowList.forEach(a=>{F.ids.push(a.id),a.domain_id&&F.ids.push(a.domain_id)}))}),O({onConfirm:async()=>{var a,s,e,o;if(F.dns_id)try{const l=await x({dns_id:F.dns_id,ids:JSON.stringify(F.ids)});A.request(l),l.status&&(J(),(B.compData.row.domain_id||(null==(s=null==(a=B.compData)?void 0:a.rowList)?void 0:s.some(a=>a.domain_id)))&&(q.value=!0),(B.compData.row.id||(null==(o=null==(e=B.compData)?void 0:e.rowList)?void 0:o.some(a=>a.id)))&&(R.value=!0),E("close"))}catch(l){}else A.error("请选择验证类型")}}),(a,s)=>{const e=h,o=f,y=_,j=v,x=D;return l(),i("div",z,[t(x,{model:n(F),class:"relative w-full","label-position":"right",size:"small",onSubmit:s[1]||(s[1]=c(()=>{},["prevent"]))},{default:d(()=>[t(j,{label:"验证类型",prop:"dns_name",class:"!m-0"},{default:d(()=>[t(y,{modelValue:n(F).dns_id,"onUpdate:modelValue":s[0]||(s[0]=a=>n(F).dns_id=a),class:"!w-[33rem]",filterable:"","default-first-option":"",size:"default",placeholder:"请选择验证类型"},{empty:d(()=>[r("p",C,[s[3]||(s[3]=r("span",null,"暂无数据，请先添加DNS接口",-1)),t(e,{class:"!text-base",onClick:K},{default:d(()=>[...s[2]||(s[2]=[m(">>添加",-1)])]),_:1})])]),default:d(()=>[(l(!0),i(p,null,u(n(H),a=>(l(),b(o,{key:a.id,label:a.dns_name,value:a.id},{default:d(()=>[r("span",N,w(a.dns_name),1),r("span",k,w(a.ps),1)]),_:2},1032,["label","value"]))),128)),t(o,{label:"更多类型",value:"none",disabled:""},{default:d(()=>[r("p",null,[s[5]||(s[5]=r("span",null,"更多类型，请添加DNS接口",-1)),t(e,{class:"!text-base",onClick:K},{default:d(()=>[...s[4]||(s[4]=[m(">>添加",-1)])]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),t(g,{title:"添加NDS接口"})])}}});export{O as default};
