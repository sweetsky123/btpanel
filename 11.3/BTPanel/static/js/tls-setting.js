import{c as a,r as e,o as s,v as t,I as l,J as o,z as i,x as c,y as u,e as n,C as r,D as d,V as m,ag as p,ad as f,H as v,ab as L}from"./base-lib.js?v=1763689792";import{aK as _,Q as S,$ as T}from"./utils-lib.js?v=1763689792";import{getSslProtocol as h,setSslProtocol as g}from"./site.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const k={class:"p-[20px]"},y=a({__name:"tls-setting",setup(a){const y=e(),b=s({checkList:["选中且禁用"]}),j=e(!1),x=e([{content:"请注意，TLS 1.0和1.1版本存在安全风险。如果您的应用程序不会出现兼容性问题，请不要勾选此选项。"},{content:"修改后只会对后续部署证书的站点进行设置，已部署证书的站点不会因此改变"},{content:"仅支持PHP项目"}]),V={checkList:[{required:!0,message:"请选择TLS设置",trigger:"change"}]},w=async()=>{j.value=!0;try{const{data:a}=await h();let e=[];for(let s in a)a[s]&&e.push(s);b.checkList=e}catch(a){_(a)}finally{j.value=!1}},H=async()=>{await y.value.validate();(await S({loading:"正在设置，请稍后...",request:g({use_protocols:b.checkList.join(",")}),message:!0})).status&&w()};return t(()=>{w()}),(a,e)=>{const s=m,t=p,_=f,S=v,h=T,g=L,w=l("bt-loading");return o((c(),u("div",k,[n(g,{ref_key:"formRef",ref:y,model:i(b),rules:V,"label-position":"left"},{default:r(()=>[n(_,{label:"TLS设置",prop:"checkList"},{default:r(()=>[n(t,{modelValue:i(b).checkList,"onUpdate:modelValue":e[0]||(e[0]=a=>i(b).checkList=a)},{default:r(()=>[n(s,{value:"TLSv1"},{default:r(()=>[...e[1]||(e[1]=[d("TLSv1",-1)])]),_:1}),n(s,{value:"TLSv1.1"},{default:r(()=>[...e[2]||(e[2]=[d("TLSv1.1",-1)])]),_:1}),n(s,{value:"TLSv1.2"},{default:r(()=>[...e[3]||(e[3]=[d("TLSv1.2",-1)])]),_:1}),n(s,{value:"TLSv1.3"},{default:r(()=>[...e[4]||(e[4]=[d("TLSv1.3",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(_,{label:" "},{default:r(()=>[n(S,{type:"primary",onClick:H},{default:r(()=>[...e[5]||(e[5]=[d("保存",-1)])]),_:1})]),_:1}),n(h,{class:"ml-[20px] my-[20px]",options:i(x)},null,8,["options"])]),_:1},8,["model"])])),[[w,i(j)]])}}});export{y as default};
