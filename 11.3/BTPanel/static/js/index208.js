import{Q as a,b8 as e,M as l,aC as s}from"./utils-lib.js?v=1763689792";import{r as t,c as o,v as r,I as n,x as i,O as m,C as u,e as c,A as d,J as p,z as v,R as f,D as _,y as w,F as x,b1 as g,B as b,aD as y,H as j,am as C,an as h}from"./base-lib.js?v=1763689792";import{B as V}from"./index119.js?v=1763689792";import{S as k,_ as D}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1763689792";import{a_ as S,m as q,a$ as H,b0 as U}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./ace.js?v=1763689792";import"./column.js?v=1763689792";import"./index110.js?v=1763689792";import"./index107.js?v=1763689792";const B=k(),F=t({}),T=t("service"),z=t(""),A=t(!1),I=t(""),J=t(""),M=t([]),N=async()=>{await a({loading:"正在保存中，请稍后...",request:e({path:"/www/server/tomcat/conf/server.xml",data:z.value,encoding:"utf-8"}),message:!0})},O=async a=>{let[e]=a.version.split(".");if(J.value!==e)try{await S({sName:"tomcat",version:J.value,min_version:""}),q()}catch(s){}else l.error("当前版本与选择版本一致")},P=({props:{name:e}})=>{switch(e){case"config":(async()=>{await a({loading:A,request:H({path:"/www/server/tomcat/conf/server.xml"}),data:{data:[String,z]}})})();break;case"logs":(async()=>{await a({loading:A,request:U({path:"/www/wwwlogs/nginx_error.log"}),data:{msg:[String,I]}})})()}},Q={class:"my-[12px]"},R={class:"flex text-secondary items-center"},$={class:"pre-box bg-[#333] text-white h-[50rem] overflow-auto p-[12px] rounded-small"},E=o({__name:"index",props:{compData:{default:{}}},setup(a){const e=a;return r(()=>{var a;a=e.compData,T.value="service",a&&(F.value=a),B.init(F.value),J.value=F.value.version[0],M.value=F.value.versions}),(e,l)=>{const t=y,o=V,r=j,k=C,S=h,q=s,H=n("bt-loading"),U=n("scroll-bottom");return i(),m(q,{modelValue:v(T),"onUpdate:modelValue":l[3]||(l[3]=a=>f(T)?T.value=a:null),type:"left-bg-card",onTabClick:v(P)},{default:u(()=>[c(t,{label:"服务",name:"service"},{default:u(()=>[c(D)]),_:1}),c(t,{label:"配置文件",name:"config"},{default:u(()=>[l[5]||(l[5]=d("span",{class:"my-[4px] text-secondary"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),d("div",Q,[p(c(o,{class:"!h-[36rem] !w-[full]",modelValue:v(z),"onUpdate:modelValue":l[0]||(l[0]=a=>f(z)?z.value=a:null),id:"configContent",filePath:"/www/server/tomcat/conf/server.xml"},null,8,["modelValue"]),[[H,v(A)]])]),c(r,{onClick:v(N),type:"primary"},{default:u(()=>[...l[4]||(l[4]=[_("保存",-1)])]),_:1},8,["onClick"]),l[6]||(l[6]=d("ul",{class:"leading-8 mt-20px text-small list-disc ml-[20px]"},[d("li",null,"此处为tomcat主配置文件,若您不了解配置规则,请勿随意修改")],-1))]),_:1}),c(t,{label:"版本切换",name:"version"},{default:u(()=>[d("div",R,[l[8]||(l[8]=d("span",null,"选择版本",-1)),c(S,{class:"mx-[12px] !w-[18rem]",modelValue:v(J),"onUpdate:modelValue":l[1]||(l[1]=a=>f(J)?J.value=a:null)},{default:u(()=>[(i(!0),w(x,null,g(v(M),(a,e)=>(i(),m(k,{key:e,label:"tomcat"+a.m_version,value:a.m_version},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),c(r,{type:"primary",onClick:l[2]||(l[2]=e=>v(O)(a.compData))},{default:u(()=>[...l[7]||(l[7]=[_("切换",-1)])]),_:1})])]),_:1}),c(t,{label:"运行日志",name:"logs"},{default:u(()=>[p((i(),w("div",$,[_(b(v(I)||"暂无日志"),1)])),[[H,v(A)],[U]])]),_:1})]),_:1},8,["modelValue","onTabClick"])}}});export{E as default};
