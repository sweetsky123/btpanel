import{c as e,v as s,a8 as a,x as l,y as t,A as i,e as n,C as r,z as c,D as o,B as p,L as d,G as u,O as m,F as y,b1 as f,bB as x,an as v,H as k,aT as g,aF as _,am as b,f as h,aD as I}from"./base-lib.js?v=1763689792";import{f as j,e as w,_ as C}from"./utils-lib.js?v=1763689792";import{_ as M}from"./index110.js?v=1763689792";import{ai as U,aj as L,aK as T}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";const H=""+new URL("../images/soft_ico/icon_plug.svg",import.meta.url).href,S={class:"install-plugin"},V={class:"header"},D={class:"header-left"},A={class:"header-title"},z={class:"text-medium font-bold flex items-center truncate h-[20px]"},B={class:"ml-[4px]"},F={class:"mt-[8px]"},N={class:"mr-[10px] text-tertiary text-base flex items-center"},P={class:"header-right"},R={class:"illustrate"},q=["innerHTML"],G=["innerHTML"],K={class:"tips-list"},O={key:0,class:"!text-danger"},$={key:1,class:"!text-danger"},E={key:3},J=C(e({__name:"index",props:{compData:{default:()=>({type:"i",installNow:!1,name:"",pluginInfo:void 0})}},emits:["close","refresh"],setup(e,{emit:C}){const J=U(),{init:Q,cutPluginActiveInfo:W,install:X,repair:Y,update:Z,pluginPictureSrc:ee,$reset:se}=J,{pluginModuleInfo:ae,pluginActiveInfo:le,versionModel:te,pluginImgSrc:ie,pluginTitle:ne,pluginLabel:re,compData:ce}=L(),oe=e;return s(async()=>{ce.value=oe.compData,await Q(),ce.value.installNow&&X()}),a(()=>{se()}),(e,s)=>{const a=j,C=x,U=M,L=w,J=b,Q=v,se=k,ce=g,oe=h,pe=I,de=_;return l(),t("div",S,[i("div",V,[i("div",D,[n(a,{src:c(ie),class:"h-[35px] w-[40px] mr-[10px]",type:"img"},{error:r(()=>[...s[7]||(s[7]=[i("img",{src:H,class:"w-[4rem] h-[4rem]",alt:""},null,-1)])]),_:1},8,["src"]),i("div",A,[i("span",z,[o(p(c(ne))+" ",1),i("span",B,p(c(ae).currentVersion||c(le).fullVersion),1),!c(ae).isSystem&&13!==c(ae).type&&c(re).length>0?(l(),t("span",{key:0,class:d(c(re)[2]+" border-[1px] p-[4px] font-500 text-base ml-[5px]")},p(c(re)[1]),3)):u("",!0)]),i("span",F,[i("span",N,[c(ae).isUpdate?(l(),m(C,{key:0,"is-dot":"",class:"item"},{default:r(()=>[o(" 最新版本："+p("".concat(c(le).fullVersion)),1)]),_:1})):u("",!0),c(ae).isSystem||!c(ae).isInstall&&!c(ae).isUpdate?u("",!0):(l(),t(y,{key:1},[c(ae).isInstall?u("",!0):(l(),m(U,{key:0})),i("span",null,"更新时间："+p(c(le).updateTime),1),n(U),n(L,{class:"font-normal",onClick:s[0]||(s[0]=e=>c(T)(c(ae)))},{default:r(()=>[...s[8]||(s[8]=[i("span",{class:"text-base"},"更新日志",-1)])]),_:1})],64))])])])]),i("div",P,[c(te).version.length>1&&c(ae).isInstall?(l(),t(y,{key:0},[n(Q,{modelValue:c(te).value,"onUpdate:modelValue":s[1]||(s[1]=e=>c(te).value=e),class:"!w-[140px]",onChange:c(W)},{default:r(()=>[(l(!0),t(y,null,f(c(te).version,e=>(l(),m(J,{key:e.key,value:e.key,disabled:e.disabled,label:e.title},null,8,["value","disabled","label"]))),128))]),_:1},8,["modelValue","onChange"]),n(U,{class:"mx-[1rem]"})],64)):u("",!0),c(ae).isSystem&&c(ae).isInstall?(l(),t(y,{key:1},[c(ae).compile?(l(),m(ce,{key:0,placement:"top",enterable:!0},{content:r(()=>[...s[9]||(s[9]=[i("span",null,"安装时间较长，性能最大化，适合生产环境",-1)])]),default:r(()=>[n(se,{class:"mr-[4px]",onClick:s[2]||(s[2]=e=>c(X)(0))},{default:r(()=>[...s[10]||(s[10]=[o("编译安装",-1)])]),_:1})]),_:1})):u("",!0),n(ce,{placement:"top",enterable:!1},{content:r(()=>[...s[11]||(s[11]=[i("span",null,"安装时间极快，版本与稳定性略低于编译安装，适合快速部署测试",-1)])]),default:r(()=>[n(se,{type:"primary",onClick:s[3]||(s[3]=e=>c(X)(1))},{default:r(()=>[o(p(c(ae).compile?"极速安装":"立即安装"),1)]),_:1})]),_:1})],64)):c(ae).isInstall?(l(),m(se,{key:2,type:"primary",onClick:s[4]||(s[4]=e=>c(X)())},{default:r(()=>[...s[12]||(s[12]=[o(" 立即安装 ",-1)])]),_:1})):u("",!0),c(ae).isRepair?(l(),m(se,{key:3,type:"primary",onClick:s[5]||(s[5]=e=>c(Y)())},{default:r(()=>[...s[13]||(s[13]=[o(" 立即修复 ",-1)])]),_:1})):u("",!0),c(ae).isUpdate?(l(),m(se,{key:4,type:"primary",onClick:s[6]||(s[6]=e=>c(Z)())},{default:r(()=>[...s[14]||(s[14]=[o(" 立即更新 ",-1)])]),_:1})):u("",!0)])]),c(ae).introduction.length?(l(),m(de,{key:0,"tab-position":"left",class:"carousel"},{default:r(()=>[(l(!0),t(y,null,f(c(ae).introduction,(e,s)=>(l(),m(pe,{label:e[0],lazy:"",key:s},{default:r(()=>[n(oe,{src:c(ee)(s),class:"max-h-[100%] object-scale-down","preview-src-list":[c(ee)(s)]},null,8,["src","preview-src-list"])]),_:2},1032,["label"]))),128))]),_:1})):u("",!0),i("div",R,[c(ae).isUpdate?(l(),t(y,{key:1},[s[16]||(s[16]=i("div",{class:"title"},"更新日志：",-1)),i("div",{class:"content",innerHTML:c(le).updateMsg},null,8,G)],64)):(l(),t(y,{key:0},[s[15]||(s[15]=i("div",{class:"title"},"插件说明：",-1)),i("div",{class:"content",innerHTML:c(ae).ps},null,8,q)],64))]),i("ul",K,[s[19]||(s[19]=i("li",null,"如果已存在此插件，文件将被替换！",-1)),c(ae).isSystem?u("",!0):(l(),t("li",O,"请手动安装插件扩展和依赖环境，如果未安装，将无法正常使用该插件")),c(ae).isMysqlUpdate?(l(),t("li",$,"更新数据库有风险,建议在更新前,先备份您的数据库！")):u("",!0),c(ae).isUpdate?(l(),t(y,{key:2},[s[17]||(s[17]=i("li",{class:"!text-danger"},"更新过程可能会导致服务中断,请须知",-1)),s[18]||(s[18]=i("li",{class:"!text-danger"},"建议您在服务器负载闲时进行软件更新",-1))],64)):(l(),t("li",E,"安装过程可能需要几分钟时间，请耐心等候!"))])])}}}),[["__scopeId","data-v-1bab6c83"]]);export{J as default};
