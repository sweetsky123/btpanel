import{q as s,M as e,e as r}from"./utils-lib.js?v=1763689792";import{c as t,o as a,g as l,w as i,v as o,x as m,y as c,A as n,L as u,z as d,B as f,M as x,e as p,C as g,D as v,G as y}from"./base-lib.js?v=1763689792";import{m as _}from"./useMethod4.js?v=1763689792";const b={class:"flex items-center"},w={class:"flex flex-1 items-center"},C={class:"mr-[12px] text-small min-w-[16rem] max-w-30rem"},M={class:"flex items-center"},h={key:0,class:"flex items-center"},j=t({__name:"index",props:{server:{default:()=>({sid:0,ip:""})}},setup(t){const j=t,k=a({status:!1,msg:"检查中...",error:!1}),L=l(()=>k.status?"svgtofont-el-success-filled text-primary":"svgtofont-el-circle-close-filled text-[#EF0808]"),S=async()=>{z(),e.success("刷新成功")},q=()=>{e.msg({dangerouslyUseHTMLString:!0,message:String(k.error)||"暂无异常信息",type:"error",showClose:!0,duration:0})},z=async()=>{if(s(j.server.sid))return e.error("查询失败");k.msg="连接中...";const{db_status:r,msg:t,err_msg:a}=await _(j.server.sid);k.status=r,k.msg=r?"正常":t,k.error=!r&&a};return i(()=>j.server.sid,e=>{!s(e)&&z()},{immediate:!0}),o(()=>{}),(s,e)=>{const a=r;return m(),c("div",b,[n("i",{class:u("text-medium mr-[4px] ".concat(d(L)))},null,2),n("div",w,[n("div",C,[n("span",null,f(t.server.ip)+"状态：",1),n("span",{style:x("color:#".concat(d(k).status?"20a53a":"ef0808"))},f(d(k).msg),5)]),n("div",M,[e[2]||(e[2]=n("i",{class:"svgtofont-icon-refresh text-base mr-[4px] text-primary"},null,-1)),p(a,{onClick:S},{default:g(()=>[...e[0]||(e[0]=[v("刷新",-1)])]),_:1}),d(k).error?(m(),c("div",h,[p(a,{onClick:q,class:"ml-8px"},{default:g(()=>[...e[1]||(e[1]=[v("| 查看异常信息",-1)])]),_:1})])):y("",!0)])])])}}});export{j as _};
