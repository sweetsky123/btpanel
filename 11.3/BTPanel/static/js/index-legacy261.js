!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return n(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=Array(n);r<n;r++)t[r]=e[r];return t}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function l(r,o,u,a){var l=o&&o.prototype instanceof c?o:c,f=Object.create(l.prototype);return t(f,"_invoke",function(r,t,o){var u,a,l,c=0,f=o||[],s=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,r){return u=n,a=0,l=e,d.n=r,i}};function m(r,t){for(a=r,l=t,n=0;!s&&c&&!o&&n<f.length;n++){var o,u=f[n],m=d.p,p=u[2];r>3?(o=p===t)&&(l=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=e):u[0]<=m&&((o=r<2&&m<u[1])?(a=0,d.v=t,d.n=u[1]):m<p&&(o=r<3||u[0]>t||t>p)&&(u[4]=r,u[5]=t,d.n=p,a=0))}if(o||r>1)return i;throw s=!0,t}return function(o,f,p){if(c>1)throw TypeError("Generator is already running");for(s&&1===f&&m(f,p),a=f,l=p;(n=a<2?e:l)||!s;){u||(a?a<3?(a>1&&(d.n=-1),m(a,l)):d.n=l:d.v=l);try{if(c=2,u){if(a||(o="next"),n=u[o]){if(!(n=n.call(u,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,a<2&&(a=0)}else 1===a&&(n=u.return)&&n.call(u),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=e}else if((n=(s=d.n<0)?l:r.call(t,d))!==i)break}catch(n){u=e,a=1,l=n}finally{c=1}}return{value:n,done:s}}}(r,u,a),!0),f}var i={};function c(){}function f(){}function s(){}n=Object.getPrototypeOf;var d=[][u]?n(n([][u]())):(t(n={},u,function(){return this}),n),m=s.prototype=c.prototype=Object.create(d);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,t(e,a,"GeneratorFunction")),e.prototype=Object.create(m),e}return f.prototype=s,t(m,"constructor",s),t(s,"constructor",f),f.displayName="GeneratorFunction",t(s,a,"GeneratorFunction"),t(m),t(m,a,"Generator"),t(m,u,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(r=function(){return{w:l,m:p}})()}function t(e,n,r,o){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}t=function(e,n,r,o){function a(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?u?u(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r:(a("next",0),a("throw",1),a("return",2))},t(e,n,r,o)}function o(e,n,r,t,o,u,a){try{var l=e[u](a),i=l.value}catch(e){return void r(e)}l.done?n(i):Promise.resolve(i).then(t,o)}function u(e){return function(){var n=this,r=arguments;return new Promise(function(t,u){var a=e.apply(n,r);function l(e){o(a,t,u,l,i,"next",e)}function i(e){o(a,t,u,l,i,"throw",e)}l(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy123.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792"],function(n,t){"use strict";var o,a,l,i,c,f,s,d,m,p,v,y,b,_,g,h,w,j,k,x,S,V,O,A,T,C,U,E,G,P;return{setters:[function(e){o=e.aQ,a=e.Q,l=e.cA,i=e.M,c=e.ay,f=e.iU,s=e.ax,d=e.aC,m=e._},function(e){p=e.r,v=e.o,y=e.c,b=e.v,_=e.a8,g=e.x,h=e.y,w=e.e,j=e.C,k=e.z,x=e.S,S=e.Q,V=e.D,O=e.A,A=e.R,T=e.ad,C=e.H,U=e.U,E=e.ab,G=e.aD},function(e){P=e._},null],execute:function(){var t=o().refs.isRefreshTableList,F=null,I=p(!1),R=p(""),z=p("common"),M=v({name:"",image:"",cmd:""}),Q={model_index:"btdocker",mod_name:"image",def_name:"pull_from_some_registry",ws_callback:111,name:"",image:""},q=function(){R.value=""},D=function(e,n){try{var r=n.data;if(R.value+="".concat(r),r.includes("bt_successful")||r.includes("bt_failed")){var o,u={status:r.includes("bt_successful"),msg:r.includes("bt_successful")?"拉取成功":"拉取失败"};i.request(u),u.status&&(t.value=!0),null===(o=F)||void 0===o||o.close(),I.value=!1}}catch(a){}},H=function(){var e,n;null===(e=F)||void 0===e||e.close(),R.value="",null===(n=F=c({route:"/ws_model",onMessage:D}))||void 0===n||n.send(Q)},K={image:[{validator:function(e,n,r){""===n?r(new Error("请输入镜像名")):r()},trigger:["blur"]}]},L=function(){t.value=!0},N=p([]),$=function(){var e=u(r().m(function e(){var n;return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,""!==M.cmd){e.n=1;break}return i.error("请输入命令"),e.a(2);case 1:return I.value=!0,Q.name="",Q.url="",Q.image="",Q.def_name="get_cmd_log",e.n=2,f({cmd:M.cmd},"image");case 2:(n=e.v).status?H():(i.error(n.msg),I.value=!1),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,e.f(4);case 5:return e.a(2)}},e,null,[[0,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),B=function(){var e=u(r().m(function e(n){return r().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"cmd"!==z.value){e.n=1;break}return $(),e.a(2);case 1:if(""!==M.name){e.n=2;break}return i.error("请选择仓库名"),e.a(2);case 2:return I.value=!0,e.n=3,n.value.validate(function(){var e=u(r().m(function e(n){return r().w(function(e){for(;;)switch(e.n){case 0:n?(Q.name=N.value.find(function(e){return e.url==M.name}).name,Q.url=N.value.find(function(e){return e.url==M.name}).url,Q.image=M.image,Q.def_name="pull_from_some_registry",H()):I.value=!1;case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}());case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,e.f(5);case 6:return e.a(2)}},e,null,[[0,4,5,6]])}));return function(n){return e.apply(this,arguments)}}(),J=function(){var e=u(r().m(function e(){return r().w(function(e){for(;;)switch(e.n){case 0:a({request:l(),data:Array,success:function(e){var n;e.forEach(function(e){N.value.push({value:e.url,label:"".concat(e.name).concat("docker.io"===e.url?"":"(".concat(e.url,")")),url:e.url,name:e.name})}),M.name=null===(n=N.value[0])||void 0===n?void 0:n.value}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),W={class:"flex flex-col p-[1.6rem] lib-box"},X={class:"rounded-small h-[45.6rem]"},Y={class:"rounded-small h-[45.6rem]"};n("default",m(y({__name:"index",setup:function(n,r){var t=r.expose,o=p(),u=function(){B(o)};return b(function(){J()}),_(function(){var e;null===(e=F)||void 0===e||e.close(),F=null,N.value=[],M.name="",M.image="",M.cmd="",q()}),t({onConfirm:u,onCancel:L}),function(n,r){var t=s,a=T,l=C,i=U,c=P,f=E,m=G,p=d;return g(),h("div",W,[w(p,{modelValue:k(z),"onUpdate:modelValue":r[5]||(r[5]=function(e){return A(z)?z.value=e:null}),type:"card",onChange:k(q)},{default:j(function(){return[w(m,{name:"common",label:"常规拉取"},{default:j(function(){return[w(f,{ref_key:"cmdFormRef",ref:o,size:"default",model:k(M),rules:k(K),disabled:k(I),class:"relative w-full","label-position":"right",onSubmit:r[2]||(r[2]=x(function(){},["prevent"]))},{default:j(function(){return[w(a,{prop:"name",label:"仓库名"},{default:j(function(){return[w(t,{modelValue:k(M).name,"onUpdate:modelValue":r[0]||(r[0]=function(e){return k(M).name=e}),options:k(N),class:"!w-[32rem]"},null,8,["modelValue","options"])]}),_:1}),w(a,{prop:"image",label:"镜像名"},{default:j(function(){return[w(i,{class:"!w-[32rem]",modelValue:k(M).image,"onUpdate:modelValue":r[1]||(r[1]=function(e){return k(M).image=e}),onKeydown:S(u,["enter"]),placeholder:"请输入镜像名，按回车拉取,如:image:v1"},{append:j(function(){return[w(l,{type:"default",onClick:u},{default:j(function(){return e(r[6]||(r[6]=[V("拉取",-1)]))}),_:1})]}),_:1},8,["modelValue"])]}),_:1}),r[7]||(r[7]=O("div",{class:"resultTitle px-[.2rem] py-[.4rem] mt-[1.6rem]"},"拉取结果：",-1)),O("div",X,[w(c,{class:"h-[45.6rem] !rounded-none",content:k(R)},null,8,["content"])])]}),_:1},8,["model","rules","disabled"])]}),_:1}),w(m,{name:"cmd",label:"命令拉取"},{default:j(function(){return[w(f,{ref:"cmdRef",size:"large",model:k(M),rules:k(K),disabled:k(I),class:"relative w-full","label-position":"right",onSubmit:r[4]||(r[4]=x(function(){},["prevent"]))},{default:j(function(){return[w(a,{prop:"cmd"},{default:j(function(){return[w(i,{autofocus:"",modelValue:k(M).cmd,"onUpdate:modelValue":r[3]||(r[3]=function(e){return k(M).cmd=e}),onKeyup:S(u,["enter"]),placeholder:"请输入需要执行的命令,docker pull redis:latest，按回车执行"},{append:j(function(){return[w(l,{type:"default",onClick:u},{default:j(function(){return e(r[8]||(r[8]=[V("执行命令",-1)]))}),_:1})]}),_:1},8,["modelValue"])]}),_:1}),r[9]||(r[9]=O("div",{class:"resultTitle px-[.2rem] py-[.4rem] mt-[1.6rem]"},"拉取结果：",-1)),O("div",Y,[w(c,{class:"h-[45.6rem] !rounded-none",content:k(R)},null,8,["content"])])]}),_:1},8,["model","rules","disabled"])]}),_:1})]}),_:1},8,["modelValue","onChange"])])}}}),[["__scopeId","data-v-e3d09b27"]]))}}})}();
