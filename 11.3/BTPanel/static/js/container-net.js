import{_ as a}from"./index109.js?v=1763689792";import{aQ as e,M as s,Q as t,lm as n,p as i,ln as o,cu as l,ax as r,aB as c,l as d}from"./utils-lib.js?v=1763689792";import{c as m,r as u,o as p,W as _,v as f,I as b,x as y,O as g,C,e as h,z as I,D as w,J as j,H as v}from"./base-lib.js?v=1763689792";import{u as k}from"./column.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";const N=m({__name:"container-net",setup(m){const{refs:{currentConDetail:N},getCurrentCon:W}=e(),x=u(),A=p({container_id:""}),V=p({list:[],loading:!1}),O=_([]),P=async()=>{const a={id:A.container_id,container_id:N.value.Id};a.id?t({request:n({data:JSON.stringify(a)}),message:!0,success:async a=>{a.status&&(await W(N.value.Id),q(),A.container_id="")}}):s.error("请选择网络")},q=async()=>{V.loading=!0;const a=Object.entries(N.value.NetworkSettings.Networks),e=[];a.forEach(a=>{e.push({name:a[0],...a[1]})}),V.list=e,V.loading=!1};let D=u([{label:"网络名",prop:"name",minWidth:100},{label:"IPV4地址",prop:"IPAddress",minWidth:100,isCustom:!0},{label:"IPV6地址",prop:"IPAddress6",minWidth:100,isCustom:!1},{label:"网关",prop:"Gateway",minWidth:100,isCustom:!0},{label:"MAC地址",prop:"MacAddress",minWidth:100,isCustom:!0},k([{onClick:async a=>{await i({title:"退出网络【".concat(a.name,"】"),content:"您真的要退出网络【".concat(a.name,"】吗？")});const e={id:a.NetworkID,container_id:N.value.Id};t({request:o({data:JSON.stringify(e)}),message:!0,success:async a=>{a.status&&(await W(N.value.Id),q())}})},width:60,title:"退出网络"}])]);return f(async()=>{q(),t({request:l(),data:Array,success:a=>{O.value=a.map(a=>({label:a.name,value:a.id}))}})}),(e,s)=>{const t=r,n=v,i=c,o=d,l=a,m=b("bt-loading");return y(),g(l,null,{"header-left":C(()=>[h(t,{modelValue:I(A).container_id,"onUpdate:modelValue":s[0]||(s[0]=a=>I(A).container_id=a),options:I(O),class:"!w-[20rem]"},null,8,["modelValue","options"]),h(n,{title:"加入网络",class:"!ml-[1rem]",type:"primary",onClick:P},{default:C(()=>[...s[1]||(s[1]=[w("加入网络",-1)])]),_:1})]),"header-right":C(()=>[h(i,{name:"containerNetColumn",column:I(D),tableRef:I(x)},null,8,["column","tableRef"])]),content:C(()=>[j(h(o,{ref_key:"dockerNetTable",ref:x,column:I(D),data:I(V).list,description:"容器网络列表为空"},null,8,["column","data"]),[[m,I(V).loading],[m,"正在加载容器网络列表，请稍后...","title"]])]),_:1})}}});export{N as default};
