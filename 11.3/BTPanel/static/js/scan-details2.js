import{_ as a}from"./index123.js?v=1763689792";import{killScan as s}from"./site.js?v=1763689792";import{by as e,M as t,p as o,Q as l}from"./utils-lib.js?v=1763689792";import{c as n,aB as i,r as u,w as r,v as c,aG as m,x as p,y as f,e as v,z as d}from"./base-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const _={class:"flex-wrap h-full"},w=n({__name:"scan-details",props:{compData:{default:()=>({})}},setup(n,{expose:w}){const x=i("popupSetFooter"),g=n,j=u("获取中..."),h=u(!0),y=u(),{path_info:b}=g.compData,D=async()=>{var a,s;try{j.value="获取中...";const o=await e({num:20,filename:b});if(j.value=o.msg||"扫描中...",-1!==(null==(a=o.msg)?void 0:a.indexOf("扫描结束")))return h.value=!1,t.success("扫描已结束"),x(!1),void q();-1===(null==(s=o.msg)?void 0:s.indexOf("扫描结束"))&&h.value&&(y.value=setTimeout(function(){D()},1500)),o.status||(t.request(o),h.value=!1)}catch(o){q()}},q=()=>{y.value&&clearTimeout(y.value)};return r(()=>g.compData,a=>{h.value=!0,D()}),c(()=>D()),m(()=>q()),w({onConfirm:async a=>{await o({icon:"warning-filled",title:"停止检测网站",width:"40rem",content:"当前正在进行检测网站，确定停止检测网站吗？"}),await l({loading:"正在停止检测，请稍后...",request:s({id:g.compData.id}),message:!0}),h.value=!1,q(),a()},onCancel:q}),(s,e)=>{const t=a;return p(),f("div",_,[v(t,{class:"h-full",title:"全屏查看",content:d(j)},null,8,["content"])])}}});export{w as default};
