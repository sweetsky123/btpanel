!function(){function e(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||t(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,u,o,l=[],i=!0,c=!1;try{if(u=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;i=!1}else for(;!(i=(r=u.call(t)).done)&&(l.push(r.value),l.length!==n);i=!0);}catch(e){c=!0,a=e}finally{try{if(!i&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){if(e){if("string"==typeof e)return r(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function l(t,r,a,o){var l=r&&r.prototype instanceof c?r:c,s=Object.create(l.prototype);return u(s,"_invoke",function(t,r,a){var u,o,l,c=0,s=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return u=n,o=0,l=e,d.n=t,i}};function p(t,r){for(o=t,l=r,n=0;!f&&c&&!a&&n<s.length;n++){var a,u=s[n],p=d.p,v=u[2];t>3?(a=v===r)&&(l=u[(o=u[4])?5:(o=3,3)],u[4]=u[5]=e):u[0]<=p&&((a=t<2&&p<u[1])?(o=0,d.v=r,d.n=u[1]):p<v&&(a=t<3||u[0]>r||r>v)&&(u[4]=t,u[5]=r,d.n=v,o=0))}if(a||t>1)return i;throw f=!0,r}return function(a,s,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,v),o=s,l=v;(n=o<2?e:l)||!f;){u||(o?o<3?(o>1&&(d.n=-1),p(o,l)):d.n=l:d.v=l);try{if(c=2,u){if(o||(a="next"),n=u[a]){if(!(n=n.call(u,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,o<2&&(o=0)}else 1===o&&(n=u.return)&&n.call(u),o<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),o=1);u=e}else if((n=(f=d.n<0)?l:t.call(r,d))!==i)break}catch(n){u=e,o=1,l=n}finally{c=1}}return{value:n,done:f}}}(t,a,o),!0),s}var i={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var d=[][r]?n(n([][r]())):(u(n={},r,function(){return this}),n),p=f.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,u(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,u(p,"constructor",f),u(f,"constructor",s),s.displayName="GeneratorFunction",u(f,o,"GeneratorFunction"),u(p),u(p,o,"Generator"),u(p,r,function(){return this}),u(p,"toString",function(){return"[object Generator]"}),(a=function(){return{w:l,m:v}})()}function u(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}u=function(e,n,t,r){function o(n,t){u(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(o("next",0),o("throw",1),o("return",2))},u(e,n,t,r)}function o(e,n,t,r,a,u,o){try{var l=e[u](o),i=l.value}catch(e){return void t(e)}l.done?n(i):Promise.resolve(i).then(r,a)}function l(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var u=e.apply(n,t);function l(e){o(u,r,a,l,i,"next",e)}function i(e){o(u,r,a,l,i,"throw",e)}l(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./index-legacy123.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy119.js?v=1763689792","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1763689792","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1763689792","./validator-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./ace-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(t,r){"use strict";var u,o,i,c,s,f,d,p,v,m,y,g,b,h,w,_,x,k,j,S,C,V,O,A,T,U,q,E,I,P,G,W,H,D,F,N,z,R,M,B,$,J,L,Q,K,X,Y,Z,ee;return{setters:[function(e){u=e.Q,o=e.b8,i=e.M,c=e.bj,s=e.x,f=e.b2,d=e.k,p=e.aC,v=e._},function(e){m=e._},function(e){y=e.r,g=e.c,b=e.s,h=e.v,w=e.I,_=e.x,x=e.y,k=e.e,j=e.C,S=e.A,C=e.J,V=e.z,O=e.R,A=e.D,T=e.F,U=e.b1,q=e.O,E=e.B,I=e.G,P=e.aD,G=e.H,W=e.am,H=e.an,D=e.ax,F=e.az,N=e.ad,z=e.ab},function(e){R=e.B},function(e){M=e.S,B=e._},function(e){$=e.S,J=e._},function(e){L=e.b3,Q=e.b0,K=e.a_,X=e.m,Y=e.b4,Z=e.b5,ee=e.a$},null,null,null,null,null],execute:function(){var r=$(),ne=M(),te=y({}),re={active:"活动连接(Active connections)",accepts:"总连接次数(accepts)",handled:"总握手次数(handled)",requests:"总请求数(requests)",Reading:"请求数(Reading)",Writing:"响应数(Writing)",Waiting:"驻留进程(Waiting)",worker:"工作进程(Worker)",workercpu:"Nginx占用CPU(Workercpu)",workermen:"Nginx占用内存(Workermen)"},ae=y([]),ue=y("service"),oe=y(""),le=y(!1),ie=y(!1),ce=y([]),se=y(""),fe=y(""),de=y(""),pe=y([]),ve=function(){var e=l(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,u({loading:ie,request:Y(),data:[Array,ae]});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),me=function(){var e=l(a().m(function e(){var n;return a().w(function(e){for(;;)switch(e.n){case 0:return n={},ae.value.forEach(function(e){n[e.name]=e.value}),e.n=1,u({loading:"正在保存中，请稍后...",request:L(n),message:!0});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=l(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,u({loading:le,request:Z(),success:function(e){if(c("status",e)&&!e.status)i.msg({message:e.msg||"获取数据失败",type:"error",dangerouslyUseHTMLString:!0,customClass:"bt-message-error-html ",showClose:!0});else{ce.value=[];var t=["bytes","bytes_read","bytes_written"];Object.keys(e.data).forEach(function(n){ce.value.push({name:n,ps:re[n],value:t.includes(n)?s(Number(e.data[n])):e.data[n]})});var r=ce.value.findIndex(function(e){return"active"===e.name});if(r>-1){var a=n(ce.value.splice(r,1),1)[0];ce.value.unshift(a)}}}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=l(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,u({loading:le,request:ee({path:"/www/server/nginx/conf/nginx.conf"}),data:{data:[String,oe]}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=l(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,u({loading:"正在保存中，请稍后...",request:o({path:"/www/server/nginx/conf/nginx.conf",data:oe.value,encoding:"utf-8"}),message:!0});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),he=function(){var e=l(a().m(function e(){return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,u({loading:le,request:Q({path:"/www/wwwlogs/nginx_error.log"}),data:{msg:[String,se]}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=l(a().m(function e(){return a().w(function(e){for(;;)switch(e.p=e.n){case 0:if(fe.value!==de.value){e.n=1;break}return i.error("当前版本与选择版本一致"),e.a(2);case 1:return e.p=1,e.n=2,K({sName:"nginx",version:fe.value,min_version:""});case 2:X(),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),_e=function(e){switch(e.props.name){case"service":xe();break;case"performance":ve();break;case"config":ge();break;case"load":ye();break;case"logs":he()}},xe=function(e){ue.value="service",e&&(te.value=e),ne.init(te.value),r.init({name:"nginx"}),fe.value=te.value.version.split(".")[0]+"."+te.value.version.split(".")[1],de.value=te.value.version.split(".")[0]+"."+te.value.version.split(".")[1],pe.value=te.value.versions},ke={class:"my-[12px]"},je={class:"flex text-secondary items-center"},Se={class:"flex flex-col text-secondary performance"},Ce={key:0,class:"flex items-center"},Ve={key:1,class:"flex items-center"},Oe=g({__name:"index",props:{compData:{default:{}}},setup:function(n){var t=n,r=b(M()).compData;return h(function(){xe(t.compData),r.value.refreshEvent=l(a().m(function e(){var n,t;return a().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,f({name:"web"});case 1:n=e.v,t=n.data,r.value.status=t.s_status;case 2:return e.a(2)}},e)}))}),function(n,t){var r=P,a=R,u=G,o=W,l=H,i=D,c=F,s=d,f=N,v=z,y=m,g=p,b=w("bt-loading");return _(),x("div",null,[k(g,{modelValue:V(ue),"onUpdate:modelValue":t[2]||(t[2]=function(e){return O(ue)?ue.value=e:null}),type:"left-bg-card",class:"h-full",onTabClick:V(_e)},{default:j(function(){return[k(r,{label:"服务",name:"service"},{default:j(function(){return[k(B),k(J)]}),_:1}),k(r,{label:"配置文件",name:"config"},{default:j(function(){return[t[4]||(t[4]=S("span",{class:"my-[4px] text-secondary"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),S("div",ke,[C(k(a,{class:"!h-[38rem] !w-[52rem]",modelValue:V(oe),"onUpdate:modelValue":t[0]||(t[0]=function(e){return O(oe)?oe.value=e:null}),id:"configContent",filePath:"/www/server/nginx/conf/nginx.conf"},null,8,["modelValue"]),[[b,V(le)]])]),k(u,{type:"primary",onClick:V(be)},{default:j(function(){return e(t[3]||(t[3]=[A("保存",-1)]))}),_:1},8,["onClick"]),t[5]||(t[5]=S("ul",{class:"leading-8 mt-20px text-small list-disc ml-[20px]"},[S("li",null,"此处为nginx主配置文件,若您不了解配置规则,请勿随意修改")],-1))]}),_:1}),k(r,{label:"版本切换",name:"version"},{default:j(function(){return[S("div",je,[t[7]||(t[7]=S("span",null,"选择版本",-1)),k(l,{class:"mx-[12px] !w-[18rem]",modelValue:V(fe),"onUpdate:modelValue":t[1]||(t[1]=function(e){return O(fe)?fe.value=e:null})},{default:j(function(){return[(_(!0),x(T,null,U(V(pe),function(e,n){return _(),q(o,{key:n,label:"nginx "+e.m_version,value:e.m_version},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"]),k(u,{type:"primary",onClick:V(we)},{default:j(function(){return e(t[6]||(t[6]=[A("切换",-1)]))}),_:1},8,["onClick"])])]}),_:1}),k(r,{label:"负载状态",name:"load"},{default:j(function(){return[C((_(),q(c,{maxHeight:"500",data:V(ce),border:"",style:{width:"100%"}},{default:j(function(){return[k(i,{prop:"ps",label:"字段"}),k(i,{prop:"value",label:"当前值"})]}),_:1},8,["data"])),[[b,V(le)]])]}),_:1}),C((_(),q(r,{label:"性能调整",name:"performance"},{default:j(function(){return[S("div",Se,[k(v,{"label-position":"right","label-width":"186px"},{default:j(function(){return[(_(!0),x(T,null,U(V(ae),function(e,n){return _(),q(f,{label:e.name,key:n},{default:j(function(){return["gzip"!=e.name?(_(),x("div",Ce,[k(s,{modelValue:e.value,"onUpdate:modelValue":function(n){return e.value=n},type:"worker_processes"!==e.name?"number":""},null,8,["modelValue","onUpdate:modelValue","type"]),S("span",null,E(e.ps),1)])):I("",!0),"gzip"==e.name?(_(),x("div",Ve,[k(l,{modelValue:e.value,"onUpdate:modelValue":function(n){return e.value=n},class:"!w-[8rem] mx-8px"},{default:j(function(){return[k(o,{label:"开启",value:"on"}),k(o,{label:"关闭",value:"off"})]}),_:1},8,["modelValue","onUpdate:modelValue"]),S("span",null,E(e.ps),1)])):I("",!0)]}),_:2},1032,["label"])}),128)),k(f,{label:" "},{default:j(function(){return[k(u,{onClick:V(me),type:"primary"},{default:j(function(){return e(t[8]||(t[8]=[A("保存",-1)]))}),_:1},8,["onClick"])]}),_:1})]}),_:1})])]}),_:1})),[[b,V(ie)]]),k(r,{label:"错误日志",name:"logs"},{default:j(function(){return[k(y,{content:V(se),autoScroll:!0,isHtml:!0,"full-screen":{title:"全屏查看日志",onRefresh:V(he)},style:"height:540px"},null,8,["content","full-screen"])]}),_:1})]}),_:1},8,["modelValue","onTabClick"])])}}});t("default",v(Oe,[["__scopeId","data-v-1a4c55d7"]]))}}})}();
