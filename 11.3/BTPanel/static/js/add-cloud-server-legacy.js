!function(){function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(r)}function r(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function l(r,o,u,a){var l=o&&o.prototype instanceof c?o:c,s=Object.create(l.prototype);return t(s,"_invoke",function(r,t,o){var u,a,l,c=0,s=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(r,t){return u=r,a=0,l=e,d.n=t,i}};function p(r,t){for(a=r,l=t,n=0;!f&&c&&!o&&n<s.length;n++){var o,u=s[n],p=d.p,b=u[2];r>3?(o=b===t)&&(l=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=e):u[0]<=p&&((o=r<2&&p<u[1])?(a=0,d.v=t,d.n=u[1]):p<b&&(o=r<3||u[0]>t||t>b)&&(u[4]=r,u[5]=t,d.n=b,a=0))}if(o||r>1)return i;throw f=!0,t}return function(o,s,b){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,b),a=s,l=b;(n=a<2?e:l)||!f;){u||(a?a<3?(a>1&&(d.n=-1),p(a,l)):d.n=l:d.v=l);try{if(c=2,u){if(a||(o="next"),n=u[o]){if(!(n=n.call(u,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,a<2&&(a=0)}else 1===a&&(n=u.return)&&n.call(u),a<2&&(l=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=e}else if((n=(f=d.n<0)?l:r.call(t,d))!==i)break}catch(n){u=e,a=1,l=n}finally{c=1}}return{value:n,done:f}}}(r,u,a),!0),s}var i={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var d=[][u]?n(n([][u]())):(t(n={},u,function(){return this}),n),p=f.prototype=c.prototype=Object.create(d);function b(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,t(p,"constructor",f),t(f,"constructor",s),s.displayName="GeneratorFunction",t(f,a,"GeneratorFunction"),t(p),t(p,a,"Generator"),t(p,u,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(r=function(){return{w:l,m:b}})()}function t(e,r,n,o){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}t=function(e,r,n,o){function a(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?u?u(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n:(a("next",0),a("throw",1),a("return",2))},t(e,r,n,o)}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach(function(r){u(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function u(r,t,n){return(t=function(r){var t=function(r,t){if("object"!=e(r)||!r)return r;var n=r[Symbol.toPrimitive];if(void 0!==n){var o=n.call(r,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(r)}(r,"string");return"symbol"==e(t)?t:t+""}(t))in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function a(e,r,t,n,o,u,a){try{var l=e[u](a),i=l.value}catch(e){return void t(e)}l.done?r(i):Promise.resolve(i).then(n,o)}function l(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var u=e.apply(r,t);function l(e){a(u,n,o,l,i,"next",e)}function i(e){a(u,n,o,l,i,"throw",e)}l(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./database-legacy.js?v=1763689792","./useStore-legacy2.js?v=1763689792","./useMethod-legacy4.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(e,t){"use strict";var n,u,a,i,c,s,f,d,p,b,v,y,m,g,_,h,w,j,O,S,P,V,k,q,x,D,E,G,T,U;return{setters:[function(e){n=e.c,u=e.r,a=e.v,i=e.I,c=e.x,s=e.y,f=e.e,d=e.C,p=e.J,b=e.z,v=e.O,y=e.G,m=e.S,g=e.A,_=e.B,h=e.F,w=e.b1,j=e.U,O=e.ad,S=e.ab},function(e){P=e.ci,V=e.lk,k=e.k,q=e.Q},function(e){x=e.addServer,D=e.addModulesServer,E=e.modifyServer,G=e.modifyModulesServer},function(e){T=e.g},function(e){U=e.q},null,null,null,null,null],execute:function(){var t={class:"p-[24px]"},F={class:"ml-20px mt-12px leading-8 text-small list-disc"},N={key:0},J={key:1};e("default",n({__name:"add-cloud-server",props:{compData:{default:function(){return{row:{},refreshEvent:function(){}}}}},setup:function(e,n){var M=n.expose,A=T().refs.tabActive,C=e,I=u(),z=u(!0),B={mysql:{port:3306,db_user:"root"},mongodb:{port:27017,db_user:"root"},sqlserver:{port:1433,db_user:"sa"},pgsql:{port:5432,db_user:"postgres"},redis:{port:6379,db_user:""}},H=u({db_host:"",db_port:B[A.value].port,db_user:B[A.value].db_user,db_password:"",ps:"",type:A.value}),Q=[{content:"支持阿里云、腾讯云等云厂商的云数据库"},{content:"注意1：请确保本服务器有访问数据库的权限"},{content:"注意2：请确保填写的管理员帐号具备足够的权限"}],K={db_host:[{required:!0,message:"请输入服务器地址",trigger:["blur","change"]},{validator:function(e,r,t){(P(r)||V(r))&&""!==r||t(new Error("请输入正确的服务器地址")),t()},trigger:["blur","change"]}],db_password:[{required:!0,message:"请输入服务器密码",trigger:["blur","change"]}],db_user:[{required:!0,message:"请输入管理员名称",trigger:["blur","change"]}],db_port:[{required:!0,message:"请输入服务器端口",trigger:["blur","change"]}]},L=function(e){if(z.value&&C.compData.row)return z.value=!1;z.value=!1,H.value.ps=e},R=function(){var e=l(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,I.value.validate();case 1:return t=o(o({},H.value),{},{db_ps:H.value.ps}),e.n=2,q({loading:"正在添加远程服务器信息，请稍候...",request:"mysql"===A.value?x(t):D({data:JSON.stringify(t)},A.value),message:!0});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=l(r().m(function e(){var t;return r().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,I.value.validate();case 1:return t=o(o({},H.value),{},{db_ps:H.value.ps}),"mysql"!==A.value&&(t.type=A.value),e.n=2,q({loading:"正在修改远程服务器信息，请稍候...",request:"mysql"===A.value?E(t):G({data:JSON.stringify(t)},A.value),message:!0});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=l(r().m(function e(t){var n;return r().w(function(e){for(;;)switch(e.n){case 0:if(null===(n=C.compData.row)||void 0===n||!n.db_host){e.n=2;break}return e.n=1,W();case 1:e.n=3;break;case 2:return e.n=3,R();case 3:C.compData.refreshEvent(),t();case 4:return e.a(2)}},e)}));return function(r){return e.apply(this,arguments)}}();return a(function(){var e;null!==(e=C.compData.row)&&void 0!==e&&e.db_host&&(H.value=o(o({},C.compData.row),{},{type:A.value}))}),M({onConfirm:X}),function(e,r){var n,o,u=j,a=O,l=k,P=S,V=i("focus");return c(),s("div",t,[f(P,{model:b(H),rules:K,ref_key:"cloudForm",ref:I,onSubmit:r[5]||(r[5]=m(function(){},["prevent"]))},{default:d(function(){return[f(a,{label:"服务器地址",prop:"db_host"},{default:d(function(){return[p(f(u,{class:"!w-[24rem]",placeholder:"请输入服务器地址",modelValue:b(H).db_host,"onUpdate:modelValue":r[0]||(r[0]=function(e){return b(H).db_host=e}),onInput:L},null,8,["modelValue"]),[[V]])]}),_:1}),f(a,{label:"数据库端口",prop:"db_port"},{default:d(function(){return[f(l,{type:"number",class:"!w-[24rem]",modelValue:b(H).db_port,"onUpdate:modelValue":r[1]||(r[1]=function(e){return b(H).db_port=e})},null,8,["modelValue"])]}),_:1}),"redis"!=b(A)?(c(),v(a,{key:0,label:"管理员名称",prop:"db_user"},{default:d(function(){return[f(l,{modelValue:b(H).db_user,"onUpdate:modelValue":r[2]||(r[2]=function(e){return b(H).db_user=e}),placeholder:"请输入管理员名称",class:"!w-[24rem]"},null,8,["modelValue"])]}),_:1})):y("",!0),f(a,{label:"管理员密码",prop:"db_password"},{default:d(function(){return[f(l,{modelValue:b(H).db_password,"onUpdate:modelValue":r[3]||(r[3]=function(e){return b(H).db_password=e}),placeholder:"请输入管理员密码",class:"!w-[24rem]"},null,8,["modelValue"])]}),_:1}),f(a,{label:"备注"},{default:d(function(){return[f(l,{modelValue:b(H).ps,"onUpdate:modelValue":r[4]||(r[4]=function(e){return b(H).ps=e}),placeholder:"服务器备注",class:"!w-[24rem]"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"]),g("ul",F,[null!==(n=b(U))&&void 0!==n&&n.length&&b(U)[0]?(c(),s("li",N,_(b(U)[0]),1)):y("",!0),(c(),s(h,null,w(Q,function(e,r){return g("li",{key:r},_(e.content),1)}),64)),null!==(o=b(U))&&void 0!==o&&o.length&&b(U)[1]?(c(),s("li",J,_(b(U)[1]),1)):y("",!0)])])}}}))}}})}();
