!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){l(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function l(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var a=r.call(n,t||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function l(t,r,a,l){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return o(s,"_invoke",function(t,r,a){var l,u,o,c=0,s=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return l=n,u=0,o=e,d.n=t,i}};function p(t,r){for(u=t,o=r,n=0;!f&&c&&!a&&n<s.length;n++){var a,l=s[n],p=d.p,v=l[2];t>3?(a=v===r)&&(o=l[(u=l[4])?5:(u=3,3)],l[4]=l[5]=e):l[0]<=p&&((a=t<2&&p<l[1])?(u=0,d.v=r,d.n=l[1]):p<v&&(a=t<3||l[0]>r||r>v)&&(l[4]=t,l[5]=r,d.n=v,u=0))}if(a||t>1)return i;throw f=!0,r}return function(a,s,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,v),u=s,o=v;(n=u<2?e:o)||!f;){l||(u?u<3?(u>1&&(d.n=-1),p(u,o)):d.n=o:d.v=o);try{if(c=2,l){if(u||(a="next"),n=l[a]){if(!(n=n.call(l,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,u<2&&(u=0)}else 1===u&&(n=l.return)&&n.call(l),u<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),u=1);l=e}else if((n=(f=d.n<0)?o:t.call(r,d))!==i)break}catch(n){l=e,u=1,o=n}finally{c=1}}return{value:n,done:f}}}(t,a,l),!0),s}var i={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var d=[][r]?n(n([][r]())):(o(n={},r,function(){return this}),n),p=f.prototype=c.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,o(p,"constructor",f),o(f,"constructor",s),s.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(p),o(p,a,"Generator"),o(p,r,function(){return this}),o(p,"toString",function(){return"[object Generator]"}),(u=function(){return{w:l,m:v}})()}function o(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,n,t,r){function l(n,t){o(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(l("next",0),l("throw",1),l("return",2))},o(e,n,t,r)}function i(e,n,t,r,a,l,u){try{var o=e[l](u),i=o.value}catch(e){return void t(e)}o.done?n(i):Promise.resolve(i).then(r,a)}function c(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var l=e.apply(n,t);function u(e){i(l,r,a,u,o,"next",e)}function o(e){i(l,r,a,u,o,"throw",e)}u(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./useStore-legacy12.js?v=1763689792","./useController-legacy15.js?v=1763689792","./ssl-legacy.js?v=1763689792","./useStore-legacy11.js?v=1763689792","./useMethod-legacy6.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./index-legacy109.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./useController-legacy6.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792","./useController-legacy5.js?v=1763689792","./useMethod-legacy5.js?v=1763689792","./useController-legacy4.js?v=1763689792","./useStore-legacy5.js?v=1763689792"],function(e,t){"use strict";var r,l,o,i,s,f,d,p,v,m,y,b,h,_,g,w,j,S,x,k,V,O,T,P,C,D,A,H,I,E,U,R,N,F,G,L,X,q,B,M,W,$,z,J,K,Q,Y,Z,ee,ne,te,re,ae,le,ue;return{setters:[function(e){r=e.s,l=e.r,o=e.g,i=e.o,s=e.c,f=e.e,d=e.H,p=e.D,v=e.v,m=e.a8,y=e.x,b=e.y,h=e.C,_=e.z,g=e.F,w=e.b1,j=e.O,S=e.A,x=e.B,k=e.aj,V=e.R,O=e.ak,T=e.J,P=e.L,C=e.K,D=e.aT,A=e.S,H=e.am,I=e.an,E=e.ad,U=e.U,R=e.ab},function(e){N=e.cf,F=e.a_,G=e.ci,L=e.Q,X=e.b,q=e.L,B=e.bE,M=e.k,W=e.e,$=e.$,z=e.j,J=e._},function(e){K=e.S,Q=e.u},function(e){Y=e.a6,Z=e.a,ee=e.q,ne=e.F,te=e.P},function(e){re=e.n,ae=e.t},function(e){le=e.u},function(e){ue=e.d},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var t=K().getDomainListEvent,oe=r(le()).btIsRefresh,ie=Q(),ce=ie.sslDnsApiInfo,se=ie.isRefreshBtSSL,fe=ie.otherPopup,de=X(),pe=l({});l(!1);var ve=l(!1),me=l("dns"),ye=l("TXT_CSR_HASH"),be=l({domains:"",interface:""}),he=l(!1),_e=l(""),ge=l([]),we=l([]),je=l(""),Se=l(!1),xe=l(),ke=l({domain:""}),Ve=l([]);o(function(){var e=2===pe.value.product_id,n=e?"*":"www";return"请输入需要申请证书的域名（单域名".concat(e?"通配符":"","证书），必填项，例如：").concat(n,".bt.cn")});var Oe=l([{value:"TXT_CSR_HASH",label:"DNS验证(TXT解析)",tips:"如网站还未备案完成，可选【DNS验证】",checkTips:[]}]),Te=l([{value:"HTTP_CSR_HASH",label:"文件验证",tips:"",checkTips:[]}]),Pe=i({domain:[N({message:"域名不能为空"}),{validator:function(e,n,t){F(n)?1===pe.value.product_id&&n.indexOf("*")>-1?t(new Error("当前为单域名证书，不支持通配符申请")):t():t(new Error("域名格式错误，请重新输入"))},trigger:["change"]}]}),Ce=function(){var e=c(u().m(function e(){var n;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(n=xe.value)||void 0===n?void 0:n.validate();case 1:Se.value=!1,be.value.domains=ke.value.domain;case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),De=function(){var e=c(u().m(function e(){var n,r,l,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,t();case 1:r=e.v,l=pe.value.product_id,ge.value=r.data.map(function(e){var n=e.name&&e.name.startsWith("*."),t=1===l&&n;return a({label:e.name,value:e.name,disabled:t,disabledTooltip:t?"当前为单域名证书，不支持通配符申请":void 0},e)}),he.value=!0,o=ge.value.find(function(e){return!e.disabled}),je.value=(null==o?void 0:o.name)||(null===(n=ge.value)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.name)||"",we.value=ge.value,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=c(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:be.value.domains=je.value,he.value=!1;case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),He=function(e){ge.value=[],we.value.forEach(function(n){n.name.indexOf(e)>-1&&ge.value.push(n)}),ge.value.length||(ge.value=we.value)},Ie=function(e){var n=me.value;if("dns"!==n){var t=ce.value.find(function(e){return e.value===n});if(t){var r=!t.data;(!e||e&&r)&&Y({title:"设置".concat(t.info.title,"接口"),row:t.info})}}},Ee=function(){var e=c(u().m(function e(n){var t,r,l,o,i,c;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n.value.domains){e.n=1;break}return t=ve.value?"IP地址不能为空":"域名不能为空",e.a(2,de.error(t));case 1:if(r=n.value.domains.trim(),!ve.value){e.n=3;break}if(G(r)){e.n=2;break}return e.a(2,de.error("IP证书申请域名格式错误，请输入正确的ipv4地址"));case 2:e.n=4;break;case 3:if(2!==pe.value.product_id||r.startsWith("*.")){e.n=4;break}return e.a(2,de.error("证书类型不匹配，请使用带通配符的域名格式。比如：*.bt.cn"));case 4:return l=null,e.p=5,l=de.load("正在提交证书信息，请稍后..."),o={domain:r,check_type:ve.value?2:1,order_id:pe.value.id},e.n=6,L({request:re(a({url:"/api/v1/ssl/cert/apply_cert"},o))});case 6:i=e.v,(c=i.data).status&&(se.value=!0,oe.value=!0,fe.value&&(fe.value.unmount(),fe.value=null),Z({id:pe.value.id,product_id:pe.value.product_id,set_verify:!0,dns_id:be.value.interface,cert_info:{domain:c.data.domain,verify_name:null}})),de[c.status?"success":"error"](c.msg),e.n=8;break;case 7:e.p=7,e.v;case 8:return e.p=8,l&&l.close(),e.f(8);case 9:return e.a(2)}},e,null,[[5,7,8,9]])}));return function(n){return e.apply(this,arguments)}}(),Ue=function(){var e=c(u().m(function e(){var n,t,r;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,L({request:ae()});case 1:t=e.v,r=t.data,Ve.value=r.map(function(e){return{label:e.ps?"".concat(e.dns_name," - ").concat(e.ps):e.dns_name,value:e.id,domains:e.domains,ps:e.ps}}),be.value.interface=null===(n=Ve.value)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.value,e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),Re={class:"px-3rem py-1.2rem"},Ne={key:0,class:"flex items-center gap-[8px] flex-wrap"},Fe={class:"dns-option-content"},Ge={class:"dns-name font-500"},Le={class:"dns-domains text-tertiary text-small my-2"},Xe={class:"flex items-center"},qe={class:"flex-shrink-0"},Be={key:1,class:"flex flex-col"},Me={class:"mr-[2px]"},We={class:"flex justify-between"},$e={class:"p-[20px]"},ze={class:"mb-[8px] border-light"},Je={class:"py-[.5rem] px-[1.1rem]"},Ke={class:"p-[20px]"},Qe=s({__name:"index",props:{compData:{}},emits:["close"],setup:function(e,t){var r=t.emit,a=Q().sslDnsApiInfo,l=o(function(){return a.value?a.value.filter(function(e){return"dns"===e.value}):[]}),u=r,i=e,c=function(){u("close"),ue()},s=q({data:be.value,options:function(e){return o(function(){return[{type:"custom",render:function(){return f(B,{label:"证书信息"},{default:function(){return[f("span",{class:"text-primary"},[i.compData.product_name])]}})}},{type:"slots",key:"sslVerifyType"},{type:"slots",key:"domains",rules:{domains:[N({message:3===i.compData.product_id?"IP地址不能为空":"域名不能为空"})]}},{type:"custom",render:function(){return f(B,{label:" "},{default:function(){return[f(d,{type:"primary",onClick:function(){return Ee(e)}},{default:function(){return[p("提交资料")]}})]}})}},{type:"help",options:ee.value}]})}}),F=s.BtForm,G=s.param;return v(function(){pe.value=i.compData,Ue(),ve.value=3===pe.value.product_id,ye.value=ve.value?"HTTP_CSR_HASH":"TXT_CSR_HASH"}),m(function(){be.value.domains="",ke.value.domain="",me.value="dns"}),function(e,t){var r=H,a=W,u=I,o=E,i=U,s=$,v=z,m=R;return y(),b("div",Re,[f(_(F),{"label-width":"80px"},{domains:h(function(){return[f(o,{label:3===_(pe).product_id?"IP地址":"域名",prop:"domains"},{default:h(function(){return[3!==_(pe).product_id?(y(),b("div",Ne,[f(_(M),{modelValue:_(G).domains,"onUpdate:modelValue":t[0]||(t[0]=function(e){return _(G).domains=e}),width:"28rem",class:"disabled-input flex-shrink-0",placeholder:_(ne)},null,8,["modelValue","placeholder"]),f(u,{modelValue:_(G).interface,"onUpdate:modelValue":t[1]||(t[1]=function(e){return _(G).interface=e}),placeholder:"选择DNS接口",class:"domain-select !w-[14rem] flex-shrink-0",placement:"bottom"},{default:h(function(){return[(y(!0),b(g,null,w(_(Ve),function(e){return y(),j(r,{key:e.value,label:e.label,value:e.value,class:"dns-option flex flex-col justify-center !h-[5rem] !leading-auto !line-height-normal"},{default:h(function(){return[S("div",Fe,[S("div",Ge,x(e.label),1),S("div",Le,x(e.domains.length?e.domains.join(","):"manual"===e.value?"手动解析":"未添加域名"),1)])]}),_:2},1032,["label","value"])}),128)),f(r,{label:"更多类型",value:"none",disabled:""},{default:h(function(){return[S("p",Xe,[t[15]||(t[15]=S("span",null,"更多类型，请添加DNS接口",-1)),f(a,{class:"ml-2 underline",onClick:c},{default:h(function(){return n(t[14]||(t[14]=[p("点击添加",-1)]))}),_:1})])]}),_:1})]}),_:1},8,["modelValue"]),S("div",qe,[S("span",{class:"bt-link",onClick:t[2]||(t[2]=function(){return _(De)&&_(De).apply(void 0,arguments)})},"选择已有域名")])])):(y(),b("div",Be,[f(_(M),{modelValue:_(G).domains,"onUpdate:modelValue":t[3]||(t[3]=function(e){return _(G).domains=e}),width:"42rem",class:"disabled-input",placeholder:"请输入正确的ipv4地址，例如：192.168.1.1"},null,8,["modelValue"])]))]}),_:1},8,["label"])]}),sslVerifyType:h(function(){return[f(_(B),{label:"验证方式"},{default:h(function(){return[f(_(k),{class:"!leading-[2.4rem]",modelValue:_(ye),"onUpdate:modelValue":t[4]||(t[4]=function(e){return V(ye)?ye.value=e:null})},{default:h(function(){return[(y(!0),b(g,null,w(3===_(pe).product_id?_(Te):_(Oe),function(e){return y(),b("div",{class:"item",key:e.value},[f(_(O),{value:e.value},{default:h(function(){return[S("span",Me,x(e.label),1)]}),_:2},1032,["value"])])}),128))]}),_:1},8,["modelValue"])]}),_:1})]}),dnsVerify:h(function(){return[f(_(B),{label:"选择DNS接口"},{default:h(function(){return[f(u,{class:"mr-1rem !w-[16rem]",modelValue:_(me),"onUpdate:modelValue":t[5]||(t[5]=function(e){return V(me)?me.value=e:null}),placeholder:"请选择",onChange:t[6]||(t[6]=function(e){return _(Ie)(!0)})},{default:h(function(){return[(y(!0),b(g,null,w(_(l),function(e){return y(),j(r,{key:e.value,label:e.label,value:e.value},{default:h(function(){return[S("span",We,[S("span",null,x(e.label),1),T(S("span",{class:P(e.data?"text-primary":"text-orange")},x(e.data?"[已配置]":"[未配置]"),3),[[C,e.config]])])]}),_:2},1032,["label","value"])}),128))]}),_:1},8,["modelValue"]),T(f(_(d),{type:"default",onClick:t[7]||(t[7]=function(e){return _(Ie)(!1)})},{default:h(function(){return n(t[16]||(t[16]=[p("配置",-1)]))}),_:1},512),[[C,"dns"!==_(me)]])]}),_:1})]}),_:1}),f(v,{title:"选择域名",modelValue:_(he),"onUpdate:modelValue":t[10]||(t[10]=function(e){return V(he)?he.value=e:null}),area:57,"show-footer":!0,"append-to-body":!0,onConfirm:_(Ae)},{default:h(function(){return[S("div",$e,[f(i,{class:"!w-[53rem] mb-[16px]",modelValue:_(_e),"onUpdate:modelValue":t[8]||(t[8]=function(e){return V(_e)?_e.value=e:null}),placeholder:"支持字段模糊搜索",onInput:_(He),clearable:""},null,8,["modelValue","onInput"]),S("div",ze,[t[17]||(t[17]=S("div",{class:"flex justify-between items-center bg-base py-[1rem] pl-[1rem]"},"域名",-1)),f(_(k),{modelValue:_(je),"onUpdate:modelValue":t[9]||(t[9]=function(e){return V(je)?je.value=e:null}),class:"custom-radio-group whitespace-nowrap py-[2px] w-full"},{default:h(function(){return[(y(!0),b(g,null,w(_(ge),function(e){return y(),b(g,{key:e.value},[e.disabled&&e.disabledTooltip?(y(),j(_(D),{key:0,placement:"top"},{content:h(function(){return[S("span",Je,x(e.disabledTooltip),1)]}),default:h(function(){return[f(_(O),{value:e.value,disabled:e.disabled,class:"custom-radio-item"},{default:h(function(){return[p(x(e.label),1)]}),_:2},1032,["value","disabled"])]}),_:2},1024)):(y(),j(_(O),{key:1,value:e.value,disabled:e.disabled,class:"custom-radio-item"},{default:h(function(){return[p(x(e.label),1)]}),_:2},1032,["value","disabled"]))],64)}),128))]}),_:1},8,["modelValue"])]),f(s,{options:_(te),class:"ml-[20px]"},null,8,["options"])])]}),_:1},8,["modelValue","onConfirm"]),f(v,{title:"自定义域名",modelValue:_(Se),"onUpdate:modelValue":t[13]||(t[13]=function(e){return V(Se)?Se.value=e:null}),area:57,"show-footer":!0,"append-to-body":!0,onConfirm:_(Ce)},{default:h(function(){return[S("div",Ke,[f(m,{class:"mb-[16px]",ref_key:"customDomainRef",ref:xe,model:_(ke),rules:_(Pe),onSubmit:t[12]||(t[12]=A(function(){},["prevent"]))},{default:h(function(){return[f(o,{label:"自定义域名",prop:"domain"},{default:h(function(){return[f(i,{autofocus:"",class:"!w-[40rem] mb-[8px]",modelValue:_(ke).domain,"onUpdate:modelValue":t[11]||(t[11]=function(e){return _(ke).domain=e}),placeholder:"请输入需要申请证书的域名（单域名证书），必填项，例如：www.bt.cn"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model","rules"]),f(s,{options:_(te),class:"ml-[20px]"},null,8,["options"])])]}),_:1},8,["modelValue","onConfirm"])])}}});e("default",J(Qe,[["__scopeId","data-v-e65e0bbf"]]))}}})}();
