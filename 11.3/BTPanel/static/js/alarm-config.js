import{c as e,s as a,g as s,w as t,v as l,x as r,y as m,e as i,C as o,z as d,R as n,O as u,D as p,G as c,A as g,B as x,U as f,ad as y,ak as _,aj as b,ab as v}from"./base-lib.js?v=1763689792";import{_ as V}from"./validator.js?v=1763689792";import{k as j,ax as k,_ as w}from"./utils-lib.js?v=1763689792";import{a as U}from"./index53.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";import"./index116.js?v=1763689792";import"./index111.js?v=1763689792";import"./store.js?v=1763689792";import"./store2.js?v=1763689792";import"./config.js?v=1763689792";import"./store3.js?v=1763689792";import"./hooks.js?v=1763689792";const O={class:"px-[2rem] py-[4rem] give-dialog"},D={class:"flex items-center"},R={key:0,class:"text-tertiary"},h={key:1,class:"text-tertiary"},C={key:0,class:"text-[#999] ml-1.6rem text-[1.2rem]"},F={key:1,class:"text-[#999] ml-1.6rem text-[1.2rem]"},q={key:2,class:"text-[#999] ml-1.6rem text-[1.2rem]"},I={class:"flex items-center"},A=w(e({__name:"alarm-config",setup(e){const w=U(),{giveFormDisabled:A,giveFormRef:B,msgForm:G,maxCapacityAndUsageRate:P,options:$,nextOptions:z,rowData:H}=a(w),{type:T,data:E,id:J}=H.value,K={num:[{required:!0,message:"请输入发送次数",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"请输入正整数",trigger:"blur"}],usageRate:[{required:!0,message:"请输入告警阈值",trigger:"blur"},{pattern:/^[0-9]\d*$/,message:"请输入正整数",trigger:"blur"}],give:[{required:!0,message:"请至少选择一个告警方式",trigger:"change"}]},L=s(()=>{switch(T){case"load":return"【负载状态】告警";case"cpu":return"【CPU使用率】告警";case"mem":return"【内存使用率】告警"}if(-1!==T.indexOf("disk"))return"磁盘【".concat(T.split("-")[1],"】告警")}),M=s(()=>{switch(T){case"load":return"负载状态";case"cpu":case"mem":return"使用率"}if(-1!==T.indexOf("disk"))return 2===E.cycle||"2"===G.value.typeDetection?"占用率":"剩余容量"}),N=s(()=>"2"===G.value.typeDetection?"%":"GB");return t(()=>H.value,()=>{w.alarmInfo()}),l(async()=>{w.alarmInfo()}),(e,a)=>{const s=f,t=y,l=_,U=b,$=j,H=k,E=V,J=v;return r(),m("div",O,[i(J,{model:d(G),rules:K,ref_key:"giveFormRef",ref:B,disabled:d(A)},{default:o(()=>[i(t,{label:"任务类型"},{default:o(()=>[i(s,{class:"!w-[30rem]",modelValue:d(L),"onUpdate:modelValue":a[0]||(a[0]=e=>n(L)?L.value=e:null),readonly:!0,disabled:""},null,8,["modelValue"])]),_:1}),-1!==d(T).indexOf("disk")?(r(),u(t,{key:0,label:"检测类型"},{default:o(()=>[i(U,{modelValue:d(G).typeDetection,"onUpdate:modelValue":a[1]||(a[1]=e=>d(G).typeDetection=e),onChange:d(w).switchTypeDetection},{default:o(()=>[i(l,{label:"2"},{default:o(()=>[...a[6]||(a[6]=[p("占用百分比",-1)])]),_:1}),i(l,{label:"1"},{default:o(()=>[...a[7]||(a[7]=[p("剩余容量",-1)])]),_:1})]),_:1},8,["modelValue","onChange"])]),_:1})):c("",!0),i(t,{label:d(M),prop:"usageRate"},{default:o(()=>[g("div",D,[i($,{class:"!w-[12rem]",modelValue:d(G).usageRate,"onUpdate:modelValue":a[2]||(a[2]=e=>d(G).usageRate=e),min:0,max:d(P),type:"number"},{append:o(()=>[-1!==d(T).indexOf("disk")?(r(),m("span",R,x(d(N)),1)):(r(),m("span",h,"%"))]),_:1},8,["modelValue","max"]),d(T).indexOf("cpu")>-1?(r(),m("span",C," 每5分钟平均CPU超过该数值就告警 ")):-1===d(T).indexOf("disk")?(r(),m("span",F," 每5分钟平均负载超过该数值就告警 ")):(r(),m("span",q," 每隔10分钟磁盘占用超过该数值就告警 "))])]),_:1},8,["label"]),i(t,{label:"发送次数",prop:"num"},{default:o(()=>[g("div",I,[i($,{class:"!w-[12rem]",modelValue:d(G).num,"onUpdate:modelValue":a[3]||(a[3]=e=>d(G).num=e),min:0,type:"number"},{append:o(()=>[...a[8]||(a[8]=[g("span",{class:"text-tertiary"},"次",-1)])]),_:1},8,["modelValue"]),a[9]||(a[9]=g("span",{class:"text-tertiary ml-1.6rem text-small"}," 后将不再发送告警信息，如需发送多次请填写2次以上 ",-1))])]),_:1}),-1===d(T).indexOf("disk")?(r(),u(t,{key:1,label:"告警后执行",prop:"next_data"},{default:o(()=>[i(H,{modelValue:d(G).next_data,"onUpdate:modelValue":a[4]||(a[4]=e=>d(G).next_data=e),options:d(z),class:"!w-[30rem]",multiple:""},null,8,["modelValue","options"])]),_:1})):c("",!0),i(t,{label:"告警方式",prop:"give"},{default:o(()=>[i(E,{class:"!w-[30rem]",modelValue:d(G).give,"onUpdate:modelValue":a[5]||(a[5]=e=>d(G).give=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","disabled"]),a[10]||(a[10]=g("div",{class:"tip"},[g("ul",null,[g("li",null,"【发送次数】设置0时，每天触发告警次数没有上限")])],-1))])}}}),[["__scopeId","data-v-e9138fa7"]]);export{A as default};
