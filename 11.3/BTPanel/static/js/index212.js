import{r as e,o as a,e as l,D as s,c as t,v as n,I as i,x as r,O as o,C as u,z as d,R as m,J as c,A as p,y as v,F as _,b1 as f,B as b,G as h,L as x,M as y,aD as g,H as w,am as k,an as V,ad as C,ab as B,bP as q,bO as P,b2 as G}from"./base-lib.js?v=1763689792";import{B as U}from"./index119.js?v=1763689792";import{Q as L,b8 as j,M as H,p as S,aK as M,u as I,l as O,k as T,j as z,aC as A,_ as F}from"./utils-lib.js?v=1763689792";import{_ as D}from"./index123.js?v=1763689792";import{_ as E}from"./index109.js?v=1763689792";import{S as N,_ as R}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1763689792";import{b8 as $,b9 as J,m as K,ba as Q,bb as W,bc as X,bd as Y,be as Z,bf as ee,bg as ae,bh as le,bi as se,bj as te,bk as ne,bl as ie,bm as re,bn as oe,bo as ue,bp as de,bq as me,br as ce,a$ as pe,bs as ve,bt as _e,bu as fe,bv as be,bw as he}from"./validator.js?v=1763689792";import{u as xe}from"./column.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./ace.js?v=1763689792";import"./index110.js?v=1763689792";import"./index107.js?v=1763689792";const ye=N(),ge=e({}),we=e("service"),ke=e(!1),Ve=e(!1),Ce=e(""),Be=e(""),qe=e(""),Pe={pool:"应用池(pool)",process_manager:"进程管理方式(process manager)",dynamic:"动态",static:"静态",start_time:"启动日期(start time)",accepted_conn:"请求数(accepted conn)",listen_queue:"请求队列(listen queue)",max_listen_queue:"最大等待队列(max listen queue)",len_queue:"socket队列长度(listen queue len)",idle_processes:"空闲进程数量(idle processes)",active_processes:"活跃进程数量(active processes)",total_processes:"总进程数量(total processes)",max_active_processes:"最大活跃进程数量(max active processes)",max_children_reached:"到达进程上限次数(max children reached)",slow_requests:"慢请求数量(slow requests)"},Ge=e([]),Ue=e(!1),Le=a({slowLogs:"",logs:""}),je=e(""),He=a({uploadLimit:"",timeLimit:""}),Se=async()=>{await L({loading:Ue,request:$({version:Be.value}),success:e=>{Le.slowLogs=e.data.msg||"当前暂无数据"}})},Me=async()=>{await L({loading:Ue,request:J({version:Be.value}),success:e=>{Le.logs=e.msg?e.msg:"当前暂无数据"}})},Ie=async()=>{if(!(e=>{if("timeout"===e){if(!/^[1-9]\d*$/.test(He.timeLimit))return H.error("请输入正整数"),!1;if(Number(He.timeLimit)<30||Number(He.timeLimit)>86400)return H.error("超时限制范围为30-86400"),!1}else{if(!/^[1-9]\d*$/.test(He.uploadLimit))return H.error("请输入正整数"),!1;if(Number(He.uploadLimit)<2)return H.error("上传大小限制不可小于2M"),!1}return!0})(we.value))return;const e="timeout"===we.value,a=e?de:me,l={version:Be.value,[e?"time":"max"]:e?He.timeLimit:He.uploadLimit};await L({loading:"正在保存中，请稍后...",request:a(l),message:!0})},Oe=async e=>{await L({loading:Ue,request:pe({path:e}),data:{data:[String,je]}})},Te=async e=>{await L({loading:"正在保存配置，请稍后...",request:j({path:"/www/server/php/"+Be.value+"/etc/"+e,data:je.value,encoding:"utf-8"}),message:!0})},ze=e([{label:"名称",prop:"name"},{label:"类型",prop:"type"},{label:"说明",prop:"msg",width:320},{label:"状态",prop:"status",width:60,render:e=>e.status?l("i",{class:"svgtofont-el-check font-bold "},null):l("i",{class:"svgtofont-el-close font-bold "},null)},{label:"操作",align:"right",render:e=>"-1"===e.task&&"-1"!=e.phpversions.indexOf(qe.value)?l("span",{class:"bt-link",onClick:K},[s("正在安装")]):"0"===e.task&&"-1"!=e.phpversions.indexOf(qe.value)?l("span",{class:"!text-small bt-link",onClick:K},[s("等待安装..")]):e.status?l("span",{class:"!text-danger bt-link",onClick:()=>{L({loading:"正在卸载中，请稍后...",request:Q({name:e.name,version:qe.value}),message:!0})}},[s("卸载")]):l("span",{class:"bt-link",onClick:()=>{L({loading:"正在安装中，请稍后...",request:W({name:e.name.toLowerCase(),version:qe.value,type:1}),message:!0,success:()=>{K(),De()}})}},[s("安装")])}]),Ae=e([]),Fe=a({list:[],functionInput:""}),De=async()=>{await L({loading:Ue,request:X({version:Be.value}),data:{libs:[Array,Ae],disable_functions:String},success:e=>{const a=e.libs.filter(e=>e.versions.includes(Be.value));Ae.value=a,Fe.list=e.disable_functions?e.disable_functions.split(",").map(e=>({name:e})):[]}})},Ee=e([]),Ne=async()=>{let e={version:Be.value};Ee.value.forEach(a=>{e[a.name]=a.value}),await L({loading:"正在保存中，请稍后...",request:Y(e),message:!0})},Re=async(e=!1)=>{await L({loading:ke,request:Z({version:Be.value}),data:[Array,Ee],success:a=>{e&&H.success("刷新成功")}})},$e=async e=>{const a=(()=>{const e=Fe.list.map(e=>e.name).join(",");return{version:Be.value,disable_functions:e}})();await L({loading:"正在保存中，请稍后...",request:ve(a),message:!0,success:e=>{e.status&&(Fe.functionInput="",De())}})},Je=async()=>{Fe.list.push({name:Fe.functionInput}),await $e()},Ke=e([{label:"名称",prop:"name"},xe([{title:"删除",onClick:async e=>{Fe.list.splice(Fe.list.indexOf(e),1),await $e()}}])]),Qe={"1GB内存":{max_children:30,start_servers:5,min_spare_servers:5,max_spare_servers:20},"2GB内存":{max_children:50,start_servers:5,min_spare_servers:5,max_spare_servers:30},"4GB内存":{max_children:80,start_servers:10,min_spare_servers:10,max_spare_servers:30},"8GB内存":{max_children:120,start_servers:10,min_spare_servers:10,max_spare_servers:30},"16GB内存":{max_children:200,start_servers:15,min_spare_servers:15,max_spare_servers:50},"32GB内存":{max_children:300,start_servers:20,min_spare_servers:20,max_spare_servers:50},"48GB内存":{max_children:400,start_servers:20,min_spare_servers:20,max_spare_servers:50},"64GB内存":{max_children:500,start_servers:30,min_spare_servers:30,max_spare_servers:60},"96GB内存":{max_children:700,start_servers:40,min_spare_servers:40,max_spare_servers:70},"128GB内存":{max_children:1e3,start_servers:50,min_spare_servers:50,max_spare_servers:100}},We=a({limit:"",listen:"",bind_port:"",allowed:"",pm:"",max_children:"",start_servers:"",min_spare_servers:"",max_spare_servers:""}),Xe=e([]),Ye={max_children:"允许创建的最大子进程数",start_servers:"起始进程数（服务启动后初始进程数量）",min_spare_servers:"最小空闲进程数（清理空闲进程后的保留数量）",max_spare_servers:"最大空闲进程数（当空闲进程达到此值时清理）"},Ze=e=>{Xe.value=Object.entries(Qe[e]).map(e=>({name:e[0],value:e[1],tips:Ye[e[0]]}))},ea=async()=>{Xe.value.forEach((e,a)=>{a<4&&(We[e.name]=e.value)}),await L({loading:"正在保存中，请稍后...",request:ee({version:Be.value,...We,btn_children_submit:""}),message:!0})},aa=a({save_handler:"",save_path:"",port:"",passwd:""}),la=a({total:0,oldfile:0}),sa=async()=>{await L({loading:"正在保存中，请稍后...",request:ae({version:Be.value,save_handler:aa.save_handler,ip:aa.save_path,port:aa.port,passwd:aa.passwd}),message:!0})},ta=async()=>{await S({title:"清理php_session文件",icon:"warning-filled",content:"是否清理php_session文件？"}),L({loading:"正在清理，请稍后...",request:le(),message:!0,success:na})},na=async()=>{await L({loading:Ue,request:se({version:Be.value}),success:e=>{la.total=e.data.total,la.oldfile=e.data.oldfile}})},ia=async()=>{switch(aa.save_handler){case"redis":aa.save_path="127.0.0.1",aa.port="6379";break;case"memcache":case"memcached":aa.save_path="127.0.0.1",aa.port="11211";break;case"files":aa.save_path="",aa.port="",aa.passwd=""}},ra=e([]),oa=e(!1),ua=e(""),da=a({data:{},key:[]}),ma=async()=>{await L({loading:ke,request:be({php_version:Be.value}),success:e=>{da.data=e.data,da.key=Object.keys(da.data.phpinfo.keys);const a=e.data.phpinfo.modules.split(" ")||[];ra.value=a.map(e=>({name:e}))}})},ca=async()=>{await L({request:te({version:Be.value}),success:e=>{ua.value=e.data.replace("a:link {color: #009; text-decoration: none; background-color: #fff;}","").replace("a:link {color: #000099; text-decoration: none; background-color: #ffffff;}",""),oa.value=!0}})},pa=async({props:{name:e}})=>{switch(e){case"development":case"function":De();break;case"performance":(async()=>{ke.value=!0;try{const{data:e}=await _e({version:Be.value});Xe.value=[],Object.keys(e).forEach(a=>{Xe.value.push({name:a,value:e[a],tips:Ye[a]})}),We.listen=e.unix,We.allowed=e.allowed,We.bind_port=e.bind+(e.port?":"+e.port:""),We.pm=e.pm,Object.keys(Qe).forEach(a=>{Qe[a].max_children===Number(e.max_children)&&(We.limit=a)})}catch(e){M(e)}finally{ke.value=!1}})();break;case"session":(async()=>{await L({loading:ke,request:fe({version:Be.value}),success:e=>{aa.save_handler=e.data.save_handler,aa.save_path=e.data.save_path,aa.port=e.data.port,aa.passwd=e.data.passwd}})})(),na();break;case"phpinfo":ma();break;case"settings":Re();break;case"config":Oe("/www/server/php/"+Be.value+"/etc/php.ini");break;case"fpm":Oe("/www/server/php/"+Be.value+"/etc/php-fpm.conf");break;case"state":(async()=>{ke.value=!0;try{const e=await ce({version:Be.value});Ge.value=[],Object.keys(e.data).forEach(a=>{Pe[a.replaceAll(" ","_")]&&Ge.value.push({name:Pe[a.replaceAll(" ","_")],value:e.data[a]})}),0===Ge.value.length&&(Ge.value=[{name:"当前暂无数据",value:"null"}])}catch(e){M(e)}finally{ke.value=!1}})();break;case"logs":Me();break;case"slowLogs":Se();break;case"timeout":case"upload":(async()=>{await L({loading:ke,request:ue({version:Be.value}),success:e=>{He.uploadLimit=e.data.max,He.timeLimit=e.data.maxTime}})})()}},va=async()=>{try{L({loading:"正在获取中，请稍后...",request:ne(),message:!0})}catch(e){}},_a=e("list"),fa=async({props:{name:e}})=>{_a.value=e,"list"===e?De():"installed"===e?ma():"pecl"===e&&wa()},ba=e([]),ha=e(""),xa=e(!1),ya=e(""),ga=async()=>{if(!ha.value)return H.error("请输入扩展名称");try{await L({loading:"正在安装中，请稍后...",request:ie({name:ha.value,version:Be.value}),message:!0}),ha.value=""}catch(e){}},wa=async()=>{try{await L({request:re({version:Be.value}),data:[Array,ba]})}catch(e){}},ka=async()=>{try{const e=await L({loading:"正在获取中，请稍后...",request:oe({version:Be.value})});ya.value=e.data.msg||"当前暂无数据",xa.value=!0}catch(e){}},Va=e([{label:"扩展名称",prop:"name"},{label:"版本",prop:"version"},{label:"类型",prop:"type"},xe([{title:"删除",onClick:async e=>{try{await S({title:"删除扩展",icon:"warning-filled",content:"是否删除扩展【"+e.name+"】？"}),await L({loading:"正在删除中，请稍后...",request:he({phpv:Be.value,name:e.name}),message:!0})}catch(a){}}}])]),Ca={class:"mt-[8px] leading-8 text-small list-disc ml-[20px]"},Ba={class:"flex items-center"},qa={key:0,class:"flex items-center"},Pa={key:1,class:"flex items-center"},Ga={class:"flex text-secondary items-center"},Ua={class:"flex text-secondary items-center"},La={class:"my-[12px]"},ja={class:"leading-8 mt-20px text-small list-disc ml-[20px]"},Ha={class:"my-[12px]"},Sa={class:"flex items-center"},Ma={class:"flex flex-col text-secondary performance"},Ia={class:"flex items-center"},Oa={class:"flex items-center"},Ta={class:"flex items-center"},za={class:"flex items-center"},Aa={class:"flex items-center"},Fa={class:"ml-[12px] text-tertiary"},Da={class:"flex items-center"},Ea={class:"phpinfo pb-[20px]"},Na={class:"inline-block max-w-[50rem]"},Ra=["innerHTML"],$a=F(t({__name:"index",props:{compData:{default:{}}},setup(e){const a=e,{mainHeight:t}=I();return n(()=>{var e;e=a.compData,we.value="service",e&&(ge.value=e),ye.init(ge.value),Ve.value=ge.value.status,Ce.value=ge.value.s_version+"-"+ge.value.name.replace("php-","").replace(".",""),Be.value=ge.value.name.replace("php-","").replace(".",""),qe.value=ge.value.version.split(".")[0]+ge.value.version.split(".")[1]}),(a,n)=>{const L=g,j=O,H=T,S=w,M=E,I=D,F=z,N=A,$=k,J=V,K=C,Q=B,W=U,X=q,Y=P,Z=G,ee=i("bt-loading");return r(),o(N,{modelValue:d(we),"onUpdate:modelValue":n[24]||(n[24]=e=>m(we)?we.value=e:null),type:"left-bg-card",onTabClick:d(pa)},{default:u(()=>[l(L,{label:"服务",name:"service"},{default:u(()=>[l(R)]),_:1}),l(L,{label:"安装扩展",name:"development",lazy:""},{default:u(()=>[l(N,{type:"card",onTabClick:d(fa),modelValue:d(_a),"onUpdate:modelValue":n[3]||(n[3]=e=>m(_a)?_a.value=e:null)},{default:u(()=>[l(L,{label:"安装列表",name:"list"},{default:u(()=>[c(l(j,{column:d(ze),data:d(Ae),"max-height":"450"},null,8,["column","data"]),[[ee,d(Ue)]]),p("ul",Ca,[p("li",null,[p("span",{class:"bt-link",onClick:n[0]||(n[0]=(...e)=>d(va)&&d(va)(...e))},"点击获取最新扩展列表")]),n[25]||(n[25]=p("li",null,"Redis扩展仅支持一个PHP版本安装使用，若在其它PHP版本已安装redis扩展，请勿再装",-1)),n[26]||(n[26]=p("li",null,"请按实际需求安装扩展,不要安装不必要的PHP扩展,这会影响PHP执行效率,甚至出现异常",-1)),n[27]||(n[27]=p("li",null,"opcache/xcache/apc等脚本缓存扩展,请只安装其中1个,否则可能导致您的站点程序异常",-1))])]),_:1}),l(L,{label:"已安装扩展",name:"installed"},{default:u(()=>[c(l(j,{column:[{label:"扩展名称",prop:"name"}],data:d(ra),"max-height":"520"},null,8,["data"]),[[ee,d(Ue)]])]),_:1}),l(L,{label:"pecl扩展安装",name:"pecl"},{default:u(()=>[l(M,null,{"header-left":u(()=>[p("div",Ba,[n[30]||(n[30]=p("span",{class:"mr-8px"},"扩展名称",-1)),l(H,{placeholder:"请输入扩展名称",width:"32rem",modelValue:d(ha),"onUpdate:modelValue":n[1]||(n[1]=e=>m(ha)?ha.value=e:null)},null,8,["modelValue"]),l(S,{type:"primary",class:"ml-[8px]",onClick:d(ga)},{default:u(()=>[...n[28]||(n[28]=[s("点击安装",-1)])]),_:1},8,["onClick"]),l(S,{class:"ml-[8px]",onClick:d(ka)},{default:u(()=>[...n[29]||(n[29]=[s("安装日志",-1)])]),_:1},8,["onClick"])])]),content:u(()=>[l(j,{column:d(Va),data:d(ba),"max-height":"500"},null,8,["column","data"])]),"footer-left":u(()=>[...n[31]||(n[31]=[p("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[20px]"},[p("li",null,"pecl扩展与扩展安装仅能选择一处安装"),p("li",null,"如出现安装异常请查看安装日志手动处理"),p("li",null,"安装时的选项参数均为默认"),p("li",null,"安装日志仅展示最新一次的安装日志数据")],-1)])]),_:1}),l(F,{title:"pecl安装日志",area:54,modelValue:d(xa),"onUpdate:modelValue":n[2]||(n[2]=e=>m(xa)?xa.value=e:null)},{default:u(()=>[l(I,{title:"全屏查看日志",content:d(ya),autoScroll:!0,isHtml:!0,style:"height:460px"},null,8,["content"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["onTabClick","modelValue"])]),_:1}),l(L,{label:"配置修改",name:"settings",lazy:""},{default:u(()=>[c((r(),v("div",null,[l(Q,{"label-position":"right","label-width":"200px",class:"settings"},{default:u(()=>[(r(!0),v(_,null,f(d(Ee),(e,a)=>(r(),o(K,{label:e.name,key:a},{default:u(()=>[2==e.type||3===e.type||"cgi.fix_pathinfo"===e.name?(r(),v("div",qa,[l(H,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,width:"12rem",class:"mr-[12px]"},null,8,["modelValue","onUpdate:modelValue"]),p("span",null,b(e.ps),1)])):(r(),v("div",Pa,[l(J,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,class:"!w-[12rem] mr-[12px]"},{default:u(()=>[l($,{label:"开启",value:"On"}),l($,{label:"关闭",value:"Off"})]),_:1},8,["modelValue","onUpdate:modelValue"]),p("span",null,b(e.ps),1)]))]),_:2},1032,["label"]))),128)),l(K,{label:" ",class:"mt-[20px]"},{default:u(()=>[l(S,{type:"primary",onClick:d(Ne)},{default:u(()=>[...n[32]||(n[32]=[s("保存",-1)])]),_:1},8,["onClick"]),l(S,{type:"default",onClick:n[4]||(n[4]=e=>d(Re)(!0))},{default:u(()=>[...n[33]||(n[33]=[s("刷新",-1)])]),_:1})]),_:1})]),_:1})])),[[ee,d(ke)]])]),_:1}),c((r(),o(L,{label:"上传限制",name:"upload"},{default:u(()=>[p("div",Ga,[l(H,{modelValue:d(He).uploadLimit,"onUpdate:modelValue":n[5]||(n[5]=e=>d(He).uploadLimit=e),type:"number","text-type":"MB",width:"14rem"},{append:u(()=>[...n[34]||(n[34]=[s("MB",-1)])]),_:1},8,["modelValue"]),l(S,{type:"primary",class:"ml-[12px]",onClick:d(Ie)},{default:u(()=>[...n[35]||(n[35]=[s("保存",-1)])]),_:1},8,["onClick"])])]),_:1})),[[ee,d(ke)]]),c((r(),o(L,{label:"超时限制",name:"timeout"},{default:u(()=>[p("div",Ua,[l(H,{modelValue:d(He).timeLimit,"onUpdate:modelValue":n[6]||(n[6]=e=>d(He).timeLimit=e),type:"number","text-type":"秒",width:"14rem"},{append:u(()=>[...n[36]||(n[36]=[s("秒",-1)])]),_:1},8,["modelValue"]),l(S,{type:"primary",class:"ml-[12px]",onClick:d(Ie)},{default:u(()=>[...n[37]||(n[37]=[s("保存",-1)])]),_:1},8,["onClick"])])]),_:1})),[[ee,d(ke)]]),l(L,{label:"配置文件",name:"config",lazy:""},{default:u(()=>[n[40]||(n[40]=p("span",{class:"my-[4px] text-secondary"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),p("div",La,[c(l(W,{class:"!h-[46rem] !w-[64rem]",modelValue:d(je),"onUpdate:modelValue":n[7]||(n[7]=e=>m(je)?je.value=e:null),id:"configContent",onSave:n[8]||(n[8]=e=>d(Te)("php.ini"))},null,8,["modelValue"]),[[ee,d(Ue)]])]),l(S,{type:"primary",onClick:n[9]||(n[9]=e=>d(Te)("php.ini"))},{default:u(()=>[...n[38]||(n[38]=[s("保存",-1)])]),_:1}),p("ul",ja,[p("li",null,"此处为"+b(e.compData.name)+"主配置文件,若您不了解配置规则,请勿随意修改",1),n[39]||(n[39]=p("li",null,"默认已开启Openssl/Curl/Mysql等扩展，详情可点击phpinfo查看",-1))])]),_:1}),l(L,{label:"FPM配置文件",name:"fpm"},{default:u(()=>[n[42]||(n[42]=p("span",{class:"my-[4px] text-secondary"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),p("div",Ha,[c(l(W,{class:"!h-[48rem] !w-[64rem]",modelValue:d(je),"onUpdate:modelValue":n[10]||(n[10]=e=>m(je)?je.value=e:null),id:"fpmContent",onSave:n[11]||(n[11]=e=>d(Te)("php-fpm.conf"))},null,8,["modelValue"]),[[ee,d(Ue)]])]),l(S,{type:"primary",onClick:n[12]||(n[12]=e=>d(Te)("php-fpm.conf"))},{default:u(()=>[...n[41]||(n[41]=[s("保存",-1)])]),_:1}),n[43]||(n[43]=p("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[20px]"},[p("li",null,"此处为PHP-FPM配置文件,若您不了解配置规则，请勿修改!")],-1))]),_:1}),l(L,{label:"禁用函数",name:"function",lazy:""},{default:u(()=>[l(M,null,{"header-left":u(()=>[p("div",Sa,[l(H,{placeholder:"添加要被禁止的函数名,如: exec",width:"32rem",modelValue:d(Fe).functionInput,"onUpdate:modelValue":n[13]||(n[13]=e=>d(Fe).functionInput=e)},null,8,["modelValue"]),l(S,{type:"primary",class:"ml-[8px]",onClick:d(Je)},{default:u(()=>[...n[44]||(n[44]=[s("保存",-1)])]),_:1},8,["onClick"])])]),content:u(()=>[c(l(j,{column:d(Ke),data:d(Fe).list,"max-height":"500"},null,8,["column","data"]),[[ee,d(Ue)]])]),"footer-left":u(()=>[...n[45]||(n[45]=[p("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[20px]"},[p("li",null,"在此处可以禁用指定函数的调用,以增强环境安全性!"),p("li",null,"强烈建议禁用如exec,system等危险函数!")],-1)])]),_:1})]),_:1}),l(L,{label:"性能调整",name:"performance",lazy:""},{default:u(()=>[c((r(),v("div",Ma,[l(Q,{"label-position":"right","label-width":"140px",class:"mb-[20px] performance-form",model:d(We)},{default:u(()=>[l(K,{label:"并发方案"},{default:u(()=>[l(J,{class:"!w-[16rem] mr-[4px]",modelValue:d(We).limit,"onUpdate:modelValue":n[14]||(n[14]=e=>d(We).limit=e),onChange:d(Ze)},{default:u(()=>[l($,{label:"1GB内存",value:"1GB内存"}),l($,{label:"2GB内存",value:"2GB内存"}),l($,{label:"4GB内存",value:"4GB内存"}),l($,{label:"8GB内存",value:"8GB内存"}),l($,{label:"16GB内存",value:"16GB内存"}),l($,{label:"32GB内存",value:"32GB内存"}),l($,{label:"48GB内存",value:"48GB内存"}),l($,{label:"64GB内存",value:"64GB内存"}),l($,{label:"96GB内存",value:"96GB内存"}),l($,{label:"128GB内存",value:"128GB内存"})]),_:1},8,["modelValue","onChange"])]),_:1}),l(K,{label:"连接方式"},{default:u(()=>[p("div",Ia,[l(J,{class:"!w-[16rem] mr-[12px]",modelValue:d(We).listen,"onUpdate:modelValue":n[15]||(n[15]=e=>d(We).listen=e)},{default:u(()=>[l($,{label:"Unix套接字",value:"unix"}),l($,{label:"Tcp套接字",value:"tcp"})]),_:1},8,["modelValue"]),n[46]||(n[46]=p("span",{class:"text-tertiary"},"推荐Unix套接字",-1))])]),_:1}),l(K,{label:"连接信息"},{default:u(()=>[p("div",Oa,[l(H,{width:"16rem",modelValue:d(We).bind_port,"onUpdate:modelValue":n[16]||(n[16]=e=>d(We).bind_port=e)},null,8,["modelValue"]),n[47]||(n[47]=p("span",{class:"ml-12px text-tertiary"},"绑定IP:监听端口或Uinx套接字地址",-1))])]),_:1}),l(K,{label:"IP白名单"},{default:u(()=>[p("div",Ta,[l(H,{width:"16rem",modelValue:d(We).allowed,"onUpdate:modelValue":n[17]||(n[17]=e=>d(We).allowed=e)},null,8,["modelValue"]),n[48]||(n[48]=p("span",{class:"ml-12px text-tertiary"},"允许访问PHP的IP，多个请用逗号隔开",-1))])]),_:1}),l(K,{label:"运行模式"},{default:u(()=>[p("div",za,[l(J,{class:"!w-[16rem] mr-[12px]",modelValue:d(We).pm,"onUpdate:modelValue":n[18]||(n[18]=e=>d(We).pm=e)},{default:u(()=>[l($,{label:"静态模式",value:"static"}),l($,{label:"动态模式",value:"dynamic"}),l($,{label:"按需模式",value:"ondemand"})]),_:1},8,["modelValue"]),n[49]||(n[49]=p("span",{class:"text-tertiary"},"PHP-FPM运行模式",-1))])]),_:1}),(r(!0),v(_,null,f(d(Xe),(e,a)=>(r(),v(_,{key:a},[a<4?(r(),o(K,{key:0,label:e.name},{default:u(()=>[p("div",Aa,[l(H,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,width:"16rem",type:"number"},null,8,["modelValue","onUpdate:modelValue"]),p("span",Fa,b(e.tips),1)])]),_:2},1032,["label"])):h("",!0)],64))),128)),l(K,{label:" "},{default:u(()=>[l(S,{type:"primary",onClick:d(ea)},{default:u(()=>[...n[50]||(n[50]=[s("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),n[51]||(n[51]=p("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[20px]"},[p("li",null,"【最大子进程数量】越大，并发能力越强，但max_children最大不要超过5000"),p("li",null,"【内存】每个PHP子进程需要20MB左右内存，过大的max_children会导致服务器不稳定"),p("li",null,"【静态模式】始终维持设置的子进程数量，对内存开销较大，但并发能力较好"),p("li",null,"【动态模式】按设置最大空闲进程数来收回进程，内存开销小，建议小内存机器使用"),p("li",null,"【按需模式】根据访问需求自动创建进程，内存开销极小，但并发能力略差"),p("li",null,"【外网访问】若需外网访问，连接方式为TCP套接字，并将[连接信息-绑定IP]改为0.0.0.0"),p("li",null,"【外网访问】配置正确的IP白名单，在防火墙/安全组放行监听端口，有安全风险，需谨慎"),p("li",null,"调整完配置需要重启PHP才会生效")],-1))])),[[ee,d(ke)]])]),_:1}),c((r(),o(L,{label:"负载状态",name:"state"},{default:u(()=>[l(Y,{class:"margin-top table-descriptions",column:2,border:""},{default:u(()=>[(r(!0),v(_,null,f(d(Ge),(e,a)=>(r(),o(X,{key:a,span:2},{label:u(()=>[s(b(e.name),1)]),default:u(()=>[s(" "+b(e.value),1)]),_:2},1024))),128))]),_:1})]),_:1})),[[ee,d(ke)]]),l(L,{label:"Session配置",name:"session",lazy:""},{default:u(()=>[p("div",null,[c((r(),o(Q,{form:d(aa),class:"session"},{default:u(()=>[l(K,{label:"存储模式"},{default:u(()=>[l(J,{modelValue:d(aa).save_handler,"onUpdate:modelValue":n[19]||(n[19]=e=>d(aa).save_handler=e),onChange:d(ia),class:"!w-[24rem]"},{default:u(()=>[l($,{label:"files",value:"files"}),l($,{label:"Redis",value:"redis"}),l($,{label:"Memcache",value:"memcache"}),l($,{label:"Memcached",value:"memcached"})]),_:1},8,["modelValue","onChange"])]),_:1}),l(K,{label:"链接地址"},{default:u(()=>[p("div",Da,[l(H,{modelValue:d(aa).save_path,"onUpdate:modelValue":n[20]||(n[20]=e=>d(aa).save_path=e),disabled:"files"===d(aa).save_handler,width:"24rem"},null,8,["modelValue","disabled"]),n[52]||(n[52]=p("span",{class:"ml-[8px]"},"支持域名和IP地址",-1))])]),_:1}),l(K,{label:"端口"},{default:u(()=>[l(H,{modelValue:d(aa).port,"onUpdate:modelValue":n[21]||(n[21]=e=>d(aa).port=e),disabled:"files"===d(aa).save_handler,width:"24rem"},null,8,["modelValue","disabled"])]),_:1}),l(K,{label:"密码"},{default:u(()=>[l(H,{placeholder:"无密码时留空",modelValue:d(aa).passwd,"onUpdate:modelValue":n[22]||(n[22]=e=>d(aa).passwd=e),disabled:"files"===d(aa).save_handler,width:"24rem"},null,8,["modelValue","disabled"])]),_:1}),l(K,{label:" "},{default:u(()=>[l(S,{type:"primary",onClick:d(sa)},{default:u(()=>[...n[53]||(n[53]=[s("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["form"])),[[ee,d(ke)]]),n[58]||(n[58]=p("ul",{class:"mt-[8px] leading-12 text-small list-disc ml-[20px]"},[p("li",null,"若你的站点并发比较高，使用Redis，Memcache能有效提升PHP并发能力"),p("li",null,"若调整Session模式后，网站访问异常，请切换回原来的模式"),p("li",null,"切换Session模式会使在线的用户会话丢失，请在流量小的时候切换")],-1)),l(Z),c((r(),v("div",null,[n[57]||(n[57]=p("div",null,"清理Session文件",-1)),l(Y,{class:"my-[20px] w-[50%] session table-descriptions",column:1,border:""},{default:u(()=>[l(X,null,{label:u(()=>[...n[54]||(n[54]=[s(" 总Session文件数量 ",-1)])]),default:u(()=>[s(" "+b(d(la).total),1)]),_:1}),l(X,null,{label:u(()=>[...n[55]||(n[55]=[s(" 可清理的Session文件数量 ",-1)])]),default:u(()=>[s(" "+b(d(la).oldfile),1)]),_:1})]),_:1}),l(S,{type:"primary",onClick:d(ta)},{default:u(()=>[...n[56]||(n[56]=[s("清理session文件",-1)])]),_:1},8,["onClick"])])),[[ee,d(Ue)]])])]),_:1}),l(L,{label:"日志",name:"logs"},{default:u(()=>[l(I,{title:"全屏查看日志",content:d(Le).logs,autoScroll:!0,isHtml:!0,style:"height:600px",refresh:d(Me)},null,8,["content","refresh"])]),_:1}),l(L,{label:"慢日志",name:"slowLogs"},{default:u(()=>[l(I,{title:"全屏查看日志",content:d(Le).slowLogs,autoScroll:!0,isHtml:!0,style:"height:600px",refresh:d(Se)},null,8,["content","refresh"])]),_:1}),l(L,{label:"phpinfo",name:"phpinfo",lazy:"",class:"overflow-auto h-full"},{default:u(()=>[c((r(),v("div",null,[p("div",Ea,[l(S,{type:"default",onClick:d(ca)},{default:u(()=>[...n[59]||(n[59]=[s("查看phpinfo",-1)])]),_:1},8,["onClick"]),l(Y,{class:"margin-top table-descriptions",column:2,border:"",title:"基本信息"},{default:u(()=>[l(X,null,{label:u(()=>[...n[60]||(n[60]=[s(" PHP版本 ",-1)])]),default:u(()=>{var e;return[s(" "+b((null==(e=d(da).data.phpinfo)?void 0:e.php_version)||""),1)]}),_:1}),l(X,null,{label:u(()=>[...n[61]||(n[61]=[s(" 安装位置 ",-1)])]),default:u(()=>{var e;return[s(" "+b((null==(e=d(da).data.phpinfo)?void 0:e.php_path)||""),1)]}),_:1}),l(X,{span:2},{label:u(()=>[...n[62]||(n[62]=[s(" php.ini ",-1)])]),default:u(()=>{var e;return[s(" "+b((null==(e=d(da).data.phpinfo)?void 0:e.php_ini)||""),1)]}),_:1}),l(X,{span:2},{label:u(()=>[...n[63]||(n[63]=[s(" 已加载 ",-1)])]),default:u(()=>{var e;return[p("span",Na,b((null==(e=d(da).data.phpinfo)?void 0:e.modules)||""),1)]}),_:1})]),_:1}),(r(!0),v(_,null,f(d(da).key,(e,a)=>(r(),o(Y,{column:3,class:"table-descriptions",border:"",title:d(da).data.phpinfo.keys[e],key:a},{default:u(()=>[(r(!0),v(_,null,f(Object.keys(d(da).data[e]),(a,l)=>(r(),o(X,{key:l},{label:u(()=>[s(b(a),1)]),default:u(()=>[p("span",{class:x(d(da).data[e][a]?"text-primary":"text-danger")},b(d(da).data[e][a]?"yes":"no"),3)]),_:2},1024))),128))]),_:2},1032,["title"]))),128))]),l(F,{title:"phpInfo",modelValue:d(oa),"onUpdate:modelValue":n[23]||(n[23]=e=>m(oa)?oa.value=e:null),area:["90%"]},{default:u(()=>[p("div",{innerHTML:d(ua),class:"overflow-auto",style:y("height:".concat(d(t)-100,"px"))},null,12,Ra)]),_:1},8,["modelValue"])])),[[ee,d(ke)]])]),_:1})]),_:1},8,["modelValue","onTabClick"])}}}),[["__scopeId","data-v-a1691411"]]);export{$a as default};
