import{n as e,H as t,M as a,hv as s,u as o,b3 as r,an as n,q as i,ap as l}from"./utils-lib.js?v=1763689792";import{_ as c}from"./index109.js?v=1763689792";import{r as p,g as _,c as u,s as m,e as d,D as f,w as v,v as j,n as b,x as w,O as g,C as y,z as h,A as x}from"./base-lib.js?v=1763689792";import{a as C,d as k,g as O,u as S}from"./column.js?v=1763689792";import{c as B,h as L,e as T,g as E,i as I,s as P,j as N,u as R,a as D,m as A,k as V}from"./useController6.js?v=1763689792";import{u as M,S as q}from"./useStore4.js?v=1763689792";import{u as z}from"./index147.js?v=1763689792";import{f as G,l as H}from"./validator.js?v=1763689792";import"./index.vue_vue_type_style_index_0_scoped_cdc7f4d3_lang.js?v=1763689792";import{getNetVersion as F,getPluginInfo as J}from"./site.js?v=1763689792";const{isRefreshList:U,siteInfo:$}=M(),{editGeneralProject:K,addGeneralProject:Q,setSiteInfo:W}=q(),X=()=>{$.value=null,e({title:"添加.Net项目",area:72,component:()=>t(()=>import("./index399.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),showFooter:!0})},Y=(a,s="")=>{W(a,s),e({title:".Net项目管理["+a.name+"] -- 添加时间["+a.addtime+"]",area:[84,72],component:()=>t(()=>import("./index400.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})},Z=e=>{},ee=p([]),te=_(()=>!!$.value),ae=p({project_path:"",project_name:"",port:"",project_cmd:"",run_user:"www",project_ps:"",release_firewall:!1,dotnet_version:"",is_power_on:!1,bind_extranet:!1}),se=async(e,t,s)=>{try{await s.value.validate();const t={data:JSON.stringify({...e.value,is_power_on:e.value.is_power_on?1:0})},o=$.value?K:Q,r=await o(t);return a.msg({dangerouslyUseHTMLString:!0,message:r.msg,type:r.status?"success":"error",duration:r.status?2e3:0,showClose:!r.status,customClass:"!max-w-[66rem]"}),U.value=!0,r.status}catch(o){return!1}},oe=()=>{G({type:"all",path:ae.value.project_path,change:e=>{ae.value.project_path=e}})},re=async(e=!1)=>{try{const t=await F();if(ee.value=t.data.map(e=>({label:e,value:e})),e)return a.success("Net版本，刷新成功");ae.value.dotnet_version=t.data[0]}catch(t){}},ne=async()=>{if(await re(),te.value){const{project_config:e,ps:t}=$.value;Object.assign(ae.value,{...e,project_ps:s(t),bind_extranet:1===e.bind_extranet,is_power_on:1===e.is_power_on,port:e.port})}},ie=()=>{Object.assign(ae.value,{project_path:"",project_name:"",port:"",project_cmd:"",run_user:"www",project_ps:"",release_firewall:!1,dotnet_version:"",is_power_on:!1,bind_extranet:!1})},le=async()=>{try{const{data:e}=await J({sName:"dotnet"});await H({name:"dotnet",softData:e})}catch(e){}},ce=u({__name:"index",setup(e){o();const{getSiteList:a,setSiteInfo:s}=q(),{activeType:p,isRefreshList:_,siteInfo:u}=m(q()),{BtOperation:M}=r({options:[{type:"button",label:"添加项目",active:!0,onClick:X},{type:"button",label:".Net环境管理",onClick:le}]}),G=z({key:"type_id",name:"Net分类",options:()=>[{label:"全部分类",value:"all"}],event:I,ignore:["0"],field:"type_name"}),H=l([R(),D({classList:V}),{label:"删除项目",value:"delete",event:A}]),{BtTable:F,BtPage:J,BtRefresh:U,BtSearch:$,BtColumn:K,BtBatch:Q,BtTableCategory:W,refresh:Z,config:ee}=n({request:e=>{const{type_id:t,...s}=e;return a({...s,type_id:i(t)||"all"===t?"":t,table:"sites"})},columns:[C(),B({onClick:e=>{Y(e)}}),L({onClick:(e,t)=>{if("setting"===t)return void Y(e,"state");const a=e.run?"stop":"start";P(e,"restart"===t?t:a)}}),k(),O({table:"sites",width:200}),T({onClick:e=>{Y(e,"ssl")}}),S([{title:"设置",onClick:e=>{Y(e)}},{title:"删除",onClick:e=>{N(e)}}])],extension:[G,H],empty:()=>d("span",null,[f("您的列表为空，您可以"),d("span",{class:"bt-link",onClick:X},[f("添加一个项目")])])});return v(_,async e=>{var t;if(e){if(await Z(),null==(t=u.value)?void 0:t.name){const e=ee.data.find(e=>e.name===u.value.name);e&&s(e)}_.value=!1}}),j(()=>{b(()=>{t(()=>import("./index399.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),t(()=>import("./index400.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})}),(e,t)=>{const a=c;return w(),g(a,null,{"header-left":y(()=>[d(h(M)),x("div",{class:"flex items-center ml-1rem",onClick:t[0]||(t[0]=(...e)=>h(E)&&h(E)(...e))},[...t[1]||(t[1]=[x("i",{class:"svgtofont-desired text-medium"},null,-1),x("span",{class:"bt-link"},"需求反馈",-1)])])]),"header-right":y(()=>[d(h(W),{class:"!w-[200px] mr-[10px]"}),d(h($),{class:"mr-[10px]",placeholder:"请输入项目名称或备注"}),d(h(U),{class:"mr-[10px]"}),d(h(K))]),content:y(()=>[d(h(F))]),"footer-left":y(()=>[d(h(Q))]),"footer-right":y(()=>[d(h(J))]),_:1})}}}),pe=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{ie as $,se as a,ne as b,te as c,le as d,pe as e,re as g,Z as i,ae as n,oe as o,ee as v};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
