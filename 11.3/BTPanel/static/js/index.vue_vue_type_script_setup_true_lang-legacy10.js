!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,o="function"==typeof Symbol?Symbol:{},u=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function a(e,o,u,i){var a=o&&o.prototype instanceof c?o:c,s=Object.create(a.prototype);return r(s,"_invoke",function(e,r,o){var u,i,a,c=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,r){return u=e,i=0,a=t,p.n=r,l}};function m(e,r){for(i=e,a=r,n=0;!f&&c&&!o&&n<s.length;n++){var o,u=s[n],m=p.p,v=u[2];e>3?(o=v===r)&&(a=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=t):u[0]<=m&&((o=e<2&&m<u[1])?(i=0,p.v=r,p.n=u[1]):m<v&&(o=e<3||u[0]>r||r>v)&&(u[4]=e,u[5]=r,p.n=v,i=0))}if(o||e>1)return l;throw f=!0,r}return function(o,s,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,v),i=s,a=v;(n=i<2?t:a)||!f;){u||(i?i<3?(i>1&&(p.n=-1),m(i,a)):p.n=a:p.v=a);try{if(c=2,u){if(i||(o="next"),n=u[o]){if(!(n=n.call(u,a)))throw TypeError("iterator result is not an object");if(!n.done)return n;a=n.value,i<2&&(i=0)}else 1===i&&(n=u.return)&&n.call(u),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);u=t}else if((n=(f=p.n<0)?a:e.call(r,p))!==l)break}catch(n){u=t,i=1,a=n}finally{c=1}}return{value:n,done:f}}}(e,u,i),!0),s}var l={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var p=[][u]?n(n([][u]())):(r(n={},u,function(){return this}),n),m=f.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,r(m,"constructor",f),r(f,"constructor",s),s.displayName="GeneratorFunction",r(f,i,"GeneratorFunction"),r(m),r(m,i,"Generator"),r(m,u,function(){return this}),r(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:a,m:v}})()}function r(e,t,n,o){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}r=function(e,t,n,o){function i(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?u?u(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},r(e,t,n,o)}function t(e,r,t,n,o,u,i){try{var a=e[u](i),l=a.value}catch(e){return void t(e)}a.done?r(l):Promise.resolve(l).then(n,o)}function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return o(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}System.register(["./index-legacy137.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./useController-legacy17.js?v=1763689792"],function(r,o){"use strict";var u,i,a,l,c,s,f,p,m,v,d,y,b,g,h,w,x,j,_,S,E,O,k,I,P,V,A,C,T;return{setters:[function(e){u=e._},function(e){i=e.L,a=e.bE,l=e.k},function(e){c=e.c,s=e.g,f=e.e,p=e.V,m=e.D,v=e.H,d=e.x,y=e.y,b=e.z,g=e.F,h=e.O,w=e.C,x=e.B,j=e.G,_=e.A,S=e.L},function(e){E=e.u,O=e.S},function(e){k=e.i,I=e.h,P=e.p,V=e.a,A=e.o,C=e.m,T=e.b}],execute:function(){var o={key:1,class:"bg-light flex items-center justify-center min-h-[60rem]"},G={class:"bg-lighter px-[48px] py-[16px] text-default flex"};r("_",c({__name:"index",setup:function(r,c){var F,U,B=c.expose,N=E(),q=N.isBindExtranet,L=N.siteInfo,z=O().jumpTabEvent,D=i({data:k,options:function(e){return s(function(){var r;return[{type:"custom",render:function(){return f(a,{label:"是否启用"},{default:function(){return[f(p,{modelValue:e.value.value,"onUpdate:modelValue":function(r){return e.value.value=r},onChange:function(r){return I(r,e.value)}},{default:function(){return[m("启用流量控制")]}})]}})}},{type:"select",label:"限制方案",key:"type",options:P.value,attrs:{style:"width: 24rem;",onChange:function(r){var t=P.value[r].items,n=t.perserver,o=t.perip,u=t.limit_rate;e.value.perserver=n,e.value.perip=o,e.value.limit_rate=u}}},{type:"custom",render:function(){return f(a,{label:"并发限制",prop:"perserver"},{default:function(){return[f(l,{modelValue:e.value.perserver,"onUpdate:modelValue":function(r){return e.value.perserver=r},type:"number",width:"24rem",class:"mr-1rem"},null),f("div",{class:"text-tertiary text-small"},[m("* 限制当前站点最大并发数")])]}})},rules:{perserver:[{required:!0,message:"请输入并发限制",trigger:"blur"},{validator:function(e,r,t){r>65535&&t(new Error("不能大于65535")),Number.isInteger(1*r)?t():t(new Error("输入必须为整数"))}}]}},{type:"custom",render:function(){return f(a,{label:"单IP限制",prop:"perip"},{default:function(){return[f(l,{modelValue:e.value.perip,"onUpdate:modelValue":function(r){return e.value.perip=r},type:"number",width:"24rem",class:"mr-1rem"},null),f("span",{class:"text-tertiary text-small"},[m("* 限制单个IP访问最大并发数")])]}})},rules:{perip:[{required:!0,message:"请输入单IP限制",trigger:"blur"},{validator:function(e,r,t){r>65535&&t(new Error("不能大于65535")),Number.isInteger(1*r)?t():t(new Error("输入必须为整数"))}}]}},{type:"custom",render:function(){return f(a,{label:"流量限制",prop:"limit_rate"},{default:function(){return[f(l,{modelValue:e.value.limit_rate,"onUpdate:modelValue":function(r){return e.value.limit_rate=r},type:"number",width:"24rem",class:"mr-1rem"},null),f("span",{class:"text-tertiary text-small"},[m("* 限制每个请求的流量上限（单位：KB）")])]}})},rules:{limit_rate:[{required:!0,message:"请输入流量限制",trigger:"blur"},{validator:function(e,r,t){Number.isInteger(1*r)?t():t(new Error("输入必须为整数"))}}]}}].concat(n(null!==(r=L.value)&&void 0!==r&&r.id&&!V.value?[{type:"custom",render:function(){return f(a,{label:" "},{default:function(){return[f(v,{type:"primary",onClick:K},{default:function(){return[e.value.value?"保存":"保存并启用"]}})]}})}}]:[]))})},submit:(F=e().m(function r(t,n){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n();case 1:return e.n=2,A(t.value);case 2:return e.a(2,e.v)}},r)}),U=function(){var e=this,r=arguments;return new Promise(function(n,o){var u=F.apply(e,r);function i(e){t(u,n,o,i,a,"next",e)}function a(e){t(u,n,o,i,a,"throw",e)}i(void 0)})},function(e,r){return U.apply(this,arguments)})}),H=D.BtForm,K=D.submit;return B({onConfirm:K}),function(e,r){var t=u;return d(),y("div",{class:S(["h-full",{"p-2rem":b(V)}])},[b(q)?(d(),y(g,{key:0},[b(C)?(d(),h(t,{key:0,width:"36rem"},{content:w(function(){return[m(x(b(T)),1)]}),_:1})):j("",!0),f(b(H))],64)):(d(),y("div",o,[_("div",G,[r[1]||(r[1]=m(" 请开启 ",-1)),_("span",{class:"mx-[.4rem] bt-link",onClick:r[0]||(r[0]=function(e){return b(z)("mapping")})}," 外网映射 "),r[2]||(r[2]=m(" 后查看流量限制 ",-1))])]))],2)}}}))}}})}();
