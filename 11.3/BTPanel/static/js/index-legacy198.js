!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,n||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function u(n,r,a,u){var i=r&&r.prototype instanceof l?r:l,s=Object.create(i.prototype);return c(s,"_invoke",function(n,r,a){var u,i,c,l=0,s=a||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return u=t,i=0,c=e,p.n=n,o}};function d(n,r){for(i=n,c=r,t=0;!f&&l&&!a&&t<s.length;t++){var a,u=s[t],d=p.p,m=u[2];n>3?(a=m===r)&&(c=u[(i=u[4])?5:(i=3,3)],u[4]=u[5]=e):u[0]<=d&&((a=n<2&&d<u[1])?(i=0,p.v=r,p.n=u[1]):d<m&&(a=n<3||u[0]>r||r>m)&&(u[4]=n,u[5]=r,p.n=m,i=0))}if(a||n>1)return o;throw f=!0,r}return function(a,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,m),i=s,c=m;(t=i<2?e:c)||!f;){u||(i?i<3?(i>1&&(p.n=-1),d(i,c)):p.n=c:p.v=c);try{if(l=2,u){if(i||(a="next"),t=u[a]){if(!(t=t.call(u,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,i<2&&(i=0)}else 1===i&&(t=u.return)&&t.call(u),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);u=e}else if((t=(f=p.n<0)?c:n.call(r,p))!==o)break}catch(t){u=e,i=1,c=t}finally{l=1}}return{value:t,done:f}}}(n,a,u),!0),s}var o={};function l(){}function s(){}function f(){}t=Object.getPrototypeOf;var p=[][r]?t(t([][r]())):(c(t={},r,function(){return this}),t),d=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,c(d,"constructor",f),c(f,"constructor",s),s.displayName="GeneratorFunction",c(f,a,"GeneratorFunction"),c(d),c(d,a,"Generator"),c(d,r,function(){return this}),c(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:u,m:m}})()}function c(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,t,n,r){function u(t,n){c(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(u("next",0),u("throw",1),u("return",2))},c(e,t,n,r)}function o(e,t,n,r,a,u,i){try{var c=e[u](i),o=c.value}catch(e){return void n(e)}c.done?t(o):Promise.resolve(o).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var u=e.apply(t,n);function i(e){o(u,r,a,i,c,"next",e)}function c(e){o(u,r,a,i,c,"throw",e)}i(void 0)})}}System.register(["./index-legacy109.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./useStore-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./form-item-legacy.js?v=1763689792","./index-legacy437.js?v=1763689792","./index-legacy113.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./config-legacy.js?v=1763689792"],function(e,n){"use strict";var r,u,c,o,s,f,p,d,m,v,b,h,y,w,g,_,x,k,q,j,S,O,T,P,U,C,D,A,R,z,L,M,N,E,F,J,V,I,G,H,B,W,Q,$,K,X,Y,Z,ee,te,ne,re,ae,ue,ie,ce;return{setters:[function(e){r=e._},function(e){u=e.L,c=e.e,o=e.Q,s=e.ic,f=e.az,p=e.b,d=e.bj,m=e._,v=e.as,b=e.id,h=e.b6,y=e.u,w=e.hy,g=e.n,_=e.N,x=e.p,k=e.ie,q=e.ig,j=e.ih,S=e.ii,O=e.ij},function(e){T=e.c,P=e.t,U=e.r,C=e.g,D=e.e,A=e.D,R=e.v,z=e.x,L=e.y,M=e.z,N=e.o,E=e.I,F=e.C,J=e.A,V=e.bb,I=e.J,G=e.H,H=e.U,B=e.a9,W=e.S,Q=e.O},function(e){$=e.u},function(e){K=e.g},function(e){X=e._},function(e){Y=e.b,Z=e.c,ee=e.f,te=e.d,ne=e.j,re=e.e,ae=e.h,ue=e.F},function(e){ie=e._},function(e){ce=e._},null,null],execute:function(){var n={class:"w-[460px] px-[16px] py-[24px] input_autofill"},oe="w-[320px]",le=T({__name:"mail",props:{compData:{default:function(){return{title:"",type:"",row:{},callback:function(){}}}}},setup:function(e,t){var r,a,m=t.expose,v=e,b=P(v.compData),h=b.type,y=b.row,w="https://www.bt.cn/bbs/thread-108097-1-1.html",g=U({title:"",qq_mail:"",qq_stmp_pwd:"",hosts:"",port:"465",receiveMail:""}),_=u({data:function(){return g.value},options:function(){return C(function(){return[Y("名称","title",{attrs:{placeholder:"请输入邮箱名称",class:oe},rules:[{required:!0,message:"请输入名称",trigger:["blur","change"]},{max:15,message:"名称不能超过15个字符",trigger:["blur","change"]}]}),Y("发送人邮箱","qq_mail",{attrs:{placeholder:"请输入发送人邮箱",class:oe,autocomplete:"new-password"},rules:[{required:!0,message:"请输入发送人邮箱",trigger:["blur","change"]}]}),Y("SMTP密码","qq_stmp_pwd",{attrs:{placeholder:"请输入SMTP密码",showPassword:!0,class:oe},rules:[{required:!0,message:"请输入SMTP密码",trigger:["blur","change"]}]}),Y("SMTP服务器","hosts",{attrs:{placeholder:"请输入SMTP服务器",class:oe},rules:[{required:!0,message:"请输入SMTP服务器",trigger:["blur","change"]}]}),Y("端口","port",{attrs:{placeholder:"请输入端口",class:oe},rules:[{required:!0,message:"请输入端口",trigger:["blur","change"]}]}),Z("邮箱","receiveMail",{attrs:{placeholder:"接收者邮箱，每行1个",rows:6,class:oe},rules:[{required:!0,message:"请输入接收者邮箱",trigger:["blur","change"]}]}),ee(" ",[{content:"推荐使用465端口，协议为SSL/TLS"},{content:"25端口为SMTP协议，587端口为STARTTLS协议"},{content:D(c,{href:w,target:"_blank"},{default:function(){return[A("配置教程")]}})}])]})},submit:(r=l(i().m(function e(t,n){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n();case 1:return e.a(2,j())}},e)})),function(e,t){return r.apply(this,arguments)})}),x=_.BtForm,k=_.submit,q=function(){var e={qq_mail:g.value.qq_mail,qq_stmp_pwd:g.value.qq_stmp_pwd,hosts:g.value.hosts,port:g.value.port},t=g.value.receiveMail.split("\n").filter(function(e){return""!==e&&" "!==e}),n={sender_type:h.value,sender_data:JSON.stringify({send:e,receive:t,title:g.value.title})};return d("id",y.value)&&(n.sender_id=y.value.id),n},j=function(){var e=l(i().m(function e(t){var n,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,n=q(),e.n=1,o({loading:"正在设置,请稍候...",request:s(n),success:function(e){e.status&&v.compData.callback(!0),f(e.data.data)&&!e.status?p().error("".concat(e.msg,"【").concat(e.data.data,"】")):p().request(e)}});case 1:return r=e.v,e.a(2,r.status);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}();return R(function(){if(y.value&&"id"in y.value){var e=y.value.data||{},t=e.send,n=e.receive,r=void 0===n?[]:n,a=e.title,u=void 0===a?"":a,i=t||{},c=i.hosts,o=i.port,l=i.qq_mail,s=i.qq_stmp_pwd;g.value.hosts=c,g.value.port=o,g.value.qq_mail=l,g.value.qq_stmp_pwd=s,g.value.receiveMail=Array.isArray(r)?r.join("\n"):"",g.value.title=u}}),m({onConfirm:(a=l(i().m(function e(t){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,k();case 1:if(!(n=e.v)){e.n=2;break}n=t();case 2:return e.a(2,n)}},e)})),function(e){return a.apply(this,arguments)})}),function(e,t){return z(),L("div",n,[D(M(x),{size:"small"})])}}}),se=m(le,[["__scopeId","data-v-a5bea34c"]]),fe={class:"w-[90%] px-16px py-24px"},pe=T({__name:"web-hook",props:{compData:{default:function(){return{title:"",type:"",row:{},callback:function(){}}}}},setup:function(e,t){var n,r,d=t.expose,m=e,b=P(m.compData),h=b.type,y=b.row,w="自定义webhook",g="https://www.bt.cn/bbs/thread-143326-1-1.html",_=U({title:"",url:"",atall:"True",method:"POST",body_type:"json",custom_parameter:"",headers:""}),x=[{label:"POST",value:"POST"},{label:"PUT",value:"PUT"},{label:"PATCH",value:"PATCH"}],k=[{label:"application/json",value:"json"},{label:"x-www-form-urlencoded",value:"form_data"}],q={class:"!w-[140px]"},j=function(e){return{placeholder:"非必填，可输入标准JSON格式的字符串，例如：{aa:bb}",autosize:{minRows:e,maxRows:e},resize:"none"}},S=C(function(){return[Y("名称","title",{attrs:{placeholder:"机器人名称或备注",class:"w-[320px]"},rules:[{required:!0,message:"请输入机器人名称或备注",trigger:["blur","change"]}]}),Z("URL","url",{attrs:{placeholder:"请输入".concat(w,"机器人URL"),autosize:{minRows:5,maxRows:5},resize:"none",class:"w-[320px]"},rules:[{required:!0,message:"请输入".concat(w,"机器人URL"),trigger:["blur","change"]}]}),te([ne("请求方式","method",x,{attrs:q}),ne("参数格式","body_type",k,{attrs:q,labelAttrs:{labelWidth:"w-[120px]"}})]),ne("证书校验","ssl_verify",[{label:"开启",value:1},{label:"关闭",value:0}],{attrs:q,labelAttrs:{labelWidth:"w-[120px]"}}),Z("自定义参数","custom_parameter",{attrs:a(a({},j(4)),{},{class:"w-[320px]"})}),Z("请求头","headers",{attrs:a(a({},j(2)),{},{class:"w-[320px]"})}),ee(" ",[{content:D(c,{href:g},{default:function(){return["如何使配置并使用自定义消息通道"]}})}])]}),O=u({data:function(){return _.value},options:S,submit:(n=l(i().m(function e(t,n){return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n();case 1:return e.a(2,E())}},e)})),function(e,t){return n.apply(this,arguments)})}),T=O.BtForm,A=O.submit,N=function(){var e,t,n=v(_.value);["custom_parameter","query","headers"].forEach(function(e){try{n[e]=""===n[e]||void 0===n[e]?{}:JSON.parse(n[e])}catch(t){n[e]={}}});var r=(null===(e=y.value)||void 0===e?void 0:e.data)||{},u={sender_type:h.value,sender_data:JSON.stringify(a(a(a({},r),n),{},{ssl_verify:1===n.ssl_verify}))};return null!==(t=y.value)&&void 0!==t&&t.id&&(u.sender_id=y.value.id),u},E=function(){var e=l(i().m(function e(){var t,n;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=N(),e.n=1,o({loading:"正在设置,请稍候...",request:s(t),success:function(e){e.status&&m.compData.callback(!0),f(e.data.data)&&!e.status?p().error(e.msg+"【"+e.data.data+"】"):p().request(e)}});case 1:return n=e.v,e.a(2,n.status);case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return R(function(){if(y.value&&"id"in y.value){var e=y.value.data,t=e.title,n=e.url,r=e.method,a=e.body_type,u=e.custom_parameter,i=e.headers,c=e.ssl_verify;_.value.title=t,_.value.url=n,_.value.method=r,_.value.body_type=a,_.value.custom_parameter=u?JSON.stringify(u):"",_.value.headers=i?JSON.stringify(i):"",_.value.atall="True",_.value.ssl_verify=!1===c?0:1}}),d({onConfirm:(r=l(i().m(function e(t){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,A();case 1:if(!(n=e.v)){e.n=2;break}n=t();case 2:return e.a(2,n)}},e)})),function(e){return r.apply(this,arguments)})}),function(e,t){return z(),L("div",fe,[D(M(T))])}}}),de={class:"p-[16px]"},me={class:"flex items-center justify-around mt-[1.6rem]"},ve={class:"bind"},be={class:"code p-[1rem]"},he=T({__name:"wx-account",props:{compData:{default:function(){return{title:"",type:"",data:{},callback:function(){}}}}},setup:function(e,n){var r=n.expose,a=e,u=U(!1),c=N({bindCode:"www.bt.cn"}),s=function(){var e=l(i().m(function e(){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,o({loading:u,request:b(),success:function(e){e.status?c.bindCode=e.data.res:c.bindCode="二维码失效，请重新获取"}});case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}();return R(s),r({onCancel:function(){return a.compData.callback(!0)}}),function(e,n){var r=ce,a=ie,i=E("bt-loading");return z(),L("div",de,[D(r,{closable:!1,"show-icon":!0,type:"warning"},{title:F(function(){return t(n[0]||(n[0]=[J("div",null,"没有绑定微信公众号无法接收面板告警信息",-1),J("div",null,"当前为体验版，限制每个宝塔账号发送频率100条/天",-1)]))}),_:1}),J("div",me,[n[2]||(n[2]=V('<div class="bind" data-v-0c295be0><div class="title" data-v-0c295be0><span class="steps" data-v-0c295be0>1</span>关注堡塔公众号</div><div class="code" data-v-0c295be0><img src="https://www.bt.cn/Public/img/bt_wx.jpg" alt="堡塔公众号" class="w-[160px]" data-v-0c295be0></div></div>',1)),J("div",ve,[n[1]||(n[1]=J("div",{class:"title"},[J("span",{class:"steps"},"2"),A("绑定微信账号")],-1)),I((z(),L("div",be,[D(a,{value:M(c).bindCode,logo:"/static/images/config/wx_logo.png",level:"L",size:140},null,8,["value"])])),[[i,M(u)],[i,"正在获取二维码，请稍候...","title"]])])])])}}}),ye=m(he,[["__scopeId","data-v-0c295be0"]]),we={class:"w-[470px] px-16px py-24px"},ge=T({__name:"common",props:{compData:{default:function(){return{title:"",type:"",row:{},callback:function(){}}}}},setup:function(e,n){var r,d,m=n.expose,v=e,b=P(v.compData),y=b.title,w=b.type,g=b.row,_=U({title:"",url:"",send_type:"markdown",remindType:"all",specifiedUser:[{id:"",name:"",key:h(10)}]}),x=C(function(){return[{name:"dingding",ps:"如何创建钉钉机器人",help:"https://www.bt.cn/bbs/thread-108081-1-1.html"},{name:"feishu",ps:"如何创建飞书机器人",help:"https://www.bt.cn/bbs/thread-108274-1-1.html"},{name:"weixin",ps:"如何创建企业微信机器人",help:"https://www.bt.cn/bbs/thread-108116-1-1.html"}].find(function(e){return e.name===w.value})}),k=["weixin","dingding","feishu"],q=C(function(){var e;return[Y("名称","title",{attrs:{placeholder:"机器人名称或备注",class:"w-[320px]"},rules:[{required:!0,message:"请输入机器人名称或备注",trigger:["change","blur"]}]}),Z("URL","url",{attrs:{placeholder:"请输入".concat(y.value,"机器人URL"),autosize:{minRows:5,maxRows:5},resize:"none",class:"w-[320px]"},rules:[{required:!0,message:"请输入".concat(y.value,"机器人URL"),trigger:["change","blur"]}]})].concat(t(k.includes(w.value)?[re("提醒","remindType",[{label:"所有用户(@所有人)",value:"all"},{label:"指定用户",value:"specified"},{label:"不提醒",value:"none"}],{attrs:{size:"default"}})].concat(t("specified"===F.value.remindType?[].concat(t(j()),[ae(" ",function(){return D(G,{type:"default",size:"default",class:"!mt-[1rem]",onClick:S},{default:function(){return[A("添加指定用户 ")]}})})]):[])):[]),t("weixin"===w.value?[ne("发送类型","send_type",[{label:"文本",value:"text"},{label:"markdown",value:"markdown"}],{attrs:{placeholder:"请选择发送类型",class:"!w-[320px]"},rules:[{required:!0,message:"请选择发送类型",trigger:["change","blur"]}]})]:[]),[ee(" ",[{content:D(c,{href:null===(e=x.value)||void 0===e?void 0:e.help},{default:function(){var e;return[null===(e=x.value)||void 0===e?void 0:e.ps]}})}])])}),j=function(){return F.value.specifiedUser.map(function(e){switch(w.value){case"weixin":return te([ae(" ",function(){return D(H,{modelValue:e.name,"onUpdate:modelValue":function(t){return e.name=t},placeholder:"微信用户名",class:"!w-[28rem] mt-[1.6rem]"},null)}),ue(function(){return D("span",{class:"text-[1.4rem] text-danger cursor-pointer ml-[1rem] mt-[1.6rem] flex items-center",onClick:function(){return O(e)}},[A("删除")])})]);case"dingding":return te([ae(" ",function(){return D(H,{modelValue:e.name,"onUpdate:modelValue":function(t){return e.name=t},placeholder:"钉钉手机号",class:"!w-[28rem] mt-[1.6rem]"},null)}),ue(function(){return D("span",{class:"text-[1.4rem] text-danger cursor-pointer ml-[1rem] mt-[1.6rem] flex items-center",onClick:function(){return O(e)}},[A("删除")])})]);case"feishu":return te([ae(" ",function(){return D(H,{modelValue:e.id,"onUpdate:modelValue":function(t){return e.id=t},placeholder:"用户id",class:"!w-[14rem] mt-[1.6rem]"},null)}),ue(function(){return D(H,{modelValue:e.name,"onUpdate:modelValue":function(t){return e.name=t},placeholder:"用户名",class:"!w-[14rem] ml-[1rem] mt-[1.6rem]"},null)}),ue(function(){return D("span",{class:"text-[1.4rem] text-danger cursor-pointer ml-[1rem] mt-[1.6rem] flex items-center",onClick:function(){return O(e)}},[A("删除")])})])}return null})},S=function(){if("feishu"===w.value)F.value.specifiedUser.push({id:"",name:"",key:h(10)});else F.value.specifiedUser.push({name:"",key:h(10)})},O=function(e){F.value.specifiedUser=F.value.specifiedUser.filter(function(t){return t.key!==e.key})},T=u({data:function(){return _.value},options:q,submit:(r=l(i().m(function e(t,n){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,n();case 1:return e.a(2,J(t));case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])})),function(e,t){return r.apply(this,arguments)})}),N=T.BtForm,E=T.submit,F=T.param,J=function(){var e=l(i().m(function e(t){var n,r,u,c;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,"weixin"!==w.value&&delete t.value.send_type,n=B(t.value),!k.includes(w.value)){e.n=6;break}if(n.isAtAll="all"===n.remindType,"specified"!==n.remindType){e.n=4;break}c=w.value,e.n="feishu"===c?1:2;break;case 1:return n.user=n.specifiedUser.filter(function(e){return""!==e.id&&""!==e.name}).map(function(e){return"".concat(e.id,"|").concat(e.name)}),e.a(3,3);case 2:return n.user=n.specifiedUser.filter(function(e){return""!==e.name}).map(function(e){return e.name}),e.a(3,3);case 3:e.n=5;break;case 4:n.user=[];case 5:delete n.remindType,delete n.specifiedUser;case 6:return r={sender_type:w.value,sender_data:JSON.stringify(a({},n))},g.value&&"id"in g.value&&(r.sender_id=g.value.id),e.n=7,o({loading:"正在设置,请稍候...",request:s(r),success:function(e){e.status&&v.compData.callback(!0),f(e.data.data)&&!e.status?p().error("".concat(e.msg,"【").concat(e.data.data,"】")):p().request(e)}});case 7:return u=e.v,e.a(2,u.status);case 8:e.p=8,e.v;case 9:return e.a(2)}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}();return R(function(){if(g.value&&"id"in g.value){var e=g.value.data,t=e.title,n=e.url,r=e.send_type,a=e.isAtAll,u=e.user;_.value.title=t,_.value.url=n,_.value.send_type=r,_.value.remindType=!1!==a?"all":u&&u.length>0?"specified":"none",_.value.specifiedUser=(null==u?void 0:u.map(function(e){return{name:e,key:h(10)}}))||[{name:"",key:h(10)}],"feishu"===w.value&&(_.value.specifiedUser=(null==u?void 0:u.map(function(e){return{id:e.split("|")[0],name:e.split("|")[1],key:h(10)}}))||[{id:"",name:"",key:h(10)}])}}),m({onConfirm:(d=l(i().m(function e(t){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,E();case 1:if(!(n=e.v)){e.n=2;break}n=t();case 2:return e.a(2,n)}},e)})),function(e){return d.apply(this,arguments)})}),function(e,t){return z(),L("div",we,[D(M(N),{size:"small",onSubmit:t[0]||(t[0]=W(function(){},["prevent"]))})])}}});e("default",T({__name:"index",props:{compData:{default:function(){return{type:"",title:"",callback:function(){}}}}},setup:function(e,n){var u,c,s=n.expose,d=K().refs.isRefreshList,m=e,v=P(m).compData,b=y(),h=b.getSenderAlarmListInfo,T=b.push,U=function(){var e=l(i().m(function e(){var t,n=arguments;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.p=1,e.n=2,h(t);case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2,T.value.config)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=l(i().m(function e(){var t,n;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,U();case 1:return t=e.v,n=t.filter(function(e){return e.sender_type===v.value.type})||[],e.a(2,{data:n,total:n.length,other:t})}},e)}));return function(){return e.apply(this,arguments)}}(),R=function(e){switch(e){case"mail":return se;case"webhook":return pe;case"wx_account":return ye;default:return ge}},L=function(){var e=l(i().m(function e(t){var n;return i().w(function(e){for(;;)switch(e.n){case 0:return n=R(v.value.type),e.n=1,g({title:"".concat(m.compData.title,"配置"),area:"webhook"===m.compData.type?60:50,compData:a(a({row:t},v.value),{},{callback:function(){H(),d.value=!0}}),showFooter:"wx_account"!==m.compData.type,component:n});case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=l(i().m(function e(t){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,x({title:"设置默认配置",content:"设置【".concat(t.data.title,"】为默认配置后，将会覆盖原有默认配置，是否继续操作？")});case 1:return e.n=2,o({loading:"正在设置，请稍后...",message:!0,request:k({sender_id:t.id,sender_type:t.sender_type}),success:function(e){e.status&&H()}});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=l(i().m(function e(t,n){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,x({title:"".concat(t.used?"禁用":"启用").concat(n,"【").concat(t.data.title,"】"),content:"您真的要".concat(t.used?"禁用":"启用").concat(n,"【").concat(t.data.title,"】吗？")});case 1:return e.n=2,o({loading:"正在设置，请稍后...",message:!0,request:q({sender_id:t.id}),success:function(e){e.status&&H()}});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=l(i().m(function e(t){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,o({loading:"正在测试，请稍后...",request:j({sender_id:t.id}),success:function(e){f(e.data.data)&&!e.status?p().error("".concat(e.msg,"【").concat(e.data.data,"】")):p().request(e)}});case 1:e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=l(i().m(function e(t,n){var r,a;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,x({title:"解绑【".concat(t.data.title,"】").concat(n),content:"您真的要解绑".concat(n,"【").concat(t.data.title,"】吗？")});case 1:return r={sender_id:t.id},a="wx_account"===t.sender_type,e.n=2,o({loading:"正在解绑，请稍后...",message:!0,request:a?S(r):O(r),success:function(e){e.status&&(H(),d.value=!0)}});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}(),I=w({request:C,columns:(c=(null===(u=[{label:"邮箱",name:"mail"},{label:"公众号",name:"wx_account"},{label:"钉钉机器人",name:"dingding"},{label:"飞书机器人",name:"feishu"},{label:"企业微信机器人",name:"weixin"},{label:"自定义Webhook",name:"webhook"}].find(function(e){return e.name===v.value.type}))||void 0===u?void 0:u.label)||"自定义Webhook",[{label:c,prop:"data.title",render:function(e){var t;return D("div",null,[null===(t=e.data)||void 0===t?void 0:t.title,e.original?"【默认配置】":""])}},{label:"状态",width:65,render:function(e){return D("span",{class:"".concat(e.used?"bt-link":"bt-link !text-danger"),onClick:function(){return E(e,c)}},[e.used?"已启用":"未启用"])}},$([{onClick:N,isHide:function(e){return e.original},title:"设置默认",width:60},{onClick:L,isHide:function(e){return"wx_account"===e.sender_type},title:"编辑"},{title:"测试",render:function(e){return D("div",{class:"item-center inline-flex"},[D("span",{class:"bt-link",onClick:(t=l(i().m(function t(){return i().w(function(t){for(;;)switch(t.n){case 0:if(!e.load){t.n=1;break}return t.a(2);case 1:return e.load=!0,t.n=2,J(e);case 2:e.load=!1;case 3:return t.a(2)}},t)})),function(){return t.apply(this,arguments)})},[e.load?"测试中":"测试"]),D(X,{class:"mt-[4px]"},null)]);var t}},{onClick:function(e){return V(e,c)},title:"解绑"}])])}),G=I.BtTable,H=I.refresh;return s({onCancel:m.compData.callback}),function(e,n){var a=_,u=r;return z(),Q(u,{class:"p-[2rem]"},{"header-left":F(function(){return[D(a,{type:"primary",onClick:n[0]||(n[0]=function(e){return L()})},{default:F(function(){return t(n[1]||(n[1]=[A("添加",-1)]))}),_:1})]}),content:F(function(){return[D(M(G),{"max-height":350})]}),_:1})}}}))}}})}();
