import{Q as e,b8 as a,x as l,k as s,aC as t,_ as n}from"./utils-lib.js?v=1763689792";import{r as i,o as c,c as o,v as d,I as m,x as r,O as u,C as p,e as b,A as _,J as f,z as v,R as x,D as y,aD as h,H as g,ax as V,az as C,ad as j,ab as k}from"./base-lib.js?v=1763689792";import{B as w}from"./index119.js?v=1763689792";import{S as z,_ as E}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1763689792";import{b1 as T,b2 as I,a$ as U}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./ace.js?v=1763689792";import"./column.js?v=1763689792";import"./index110.js?v=1763689792";import"./index107.js?v=1763689792";const q=z(),D=i({}),G={bind:"监听IP",port:"监听端口",cachesize:"最大缓存容量",maxconn:"最大连接数限制",curr_connections:"当前打开的连接数",cmd_get:"GET请求数",get_hits:"GET命中次数",get_misses:"GET失败次数",hit:"GET命中率",curr_items:"当前被缓存的数据行数",evictions:"因内存不足而被清理的缓存行数",bytes:"当前已使用内存",bytes_read:"请求总大小",bytes_written:"发送总大小"},H=i("service"),O=i(""),P=i(!1),S=i(!1),A=i([]),B=c({ip:"",cachesize:"",maxconn:"",port:"",btn_set_memcached:""}),M=i(""),N=i([]),R=async()=>{await e({loading:"正在保存中，请稍后...",request:T(B),message:!0})},F=async()=>{await e({loading:"正在保存中，请稍后...",request:a({path:"/etc/init.d/memcached",data:O.value,encoding:"utf-8"}),message:!0})},J=({props:{name:a}})=>{switch(a){case"service":Q();break;case"performance":(async()=>{await e({loading:P,request:I(),success:e=>{B.ip=e.data.bind,B.cachesize=e.data.cachesize,B.maxconn=e.data.maxconn,B.port=e.data.port}})})();break;case"config":(async()=>{await e({loading:P,request:U({path:"/etc/init.d/memcached"}),data:{data:[String,O]}})})();break;case"load":(async()=>{await e({loading:P,request:I(),success:e=>{A.value=[];const a=["bytes","bytes_read","bytes_written"];Object.keys(e.data).forEach(s=>{"limit_maxbytes"!==s&&A.value.push({name:s,ps:G[s],value:a.includes(s)?l(Number(e.data[s])):e.data[s]})})}})})()}},Q=e=>{H.value="service",e&&(D.value=e),q.init(D.value),M.value=D.value.version.split(".")[0]+"."+D.value.version.split(".")[1],N.value=D.value.versions},X={class:"my-[12px]"},Z={class:"flex flex-col text-secondary performance"},$={class:"flex items-center"},K={class:"flex items-center"},L={class:"flex items-center"},W={class:"flex items-center"},Y=n(o({__name:"index",props:{compData:{default:{}}},setup(e){const a=e;return d(()=>{Q(a.compData)}),(e,a)=>{const l=h,n=w,i=g,c=V,o=C,d=s,z=j,T=k,I=t,U=m("bt-loading");return r(),u(I,{modelValue:v(H),"onUpdate:modelValue":a[5]||(a[5]=e=>x(H)?H.value=e:null),type:"left-bg-card",onTabClick:v(J)},{default:p(()=>[b(l,{label:"服务",name:"service"},{default:p(()=>[b(E)]),_:1}),b(l,{label:"配置文件",name:"config"},{default:p(()=>[a[7]||(a[7]=_("span",{class:"my-[4px] text-secondary"},"提示：Ctrl+F 搜索关键字，Ctrl+S 保存，Ctrl+H 查找替换",-1)),_("div",X,[f(b(n,{class:"!h-[36rem] !w-[full]",modelValue:v(O),"onUpdate:modelValue":a[0]||(a[0]=e=>x(O)?O.value=e:null),id:"configContent",filePath:"/etc/init.d/memcached"},null,8,["modelValue"]),[[U,v(P)]])]),b(i,{onClick:v(F),type:"primary"},{default:p(()=>[...a[6]||(a[6]=[y("保存",-1)])]),_:1},8,["onClick"]),a[8]||(a[8]=_("ul",{class:"leading-8 mt-20px text-small list-disc ml-[20px]"},[_("li",null,"此处为memcached主配置文件,若您不了解配置规则,请勿随意修改")],-1))]),_:1}),b(l,{label:"负载状态",name:"load"},{default:p(()=>[f((r(),u(o,{"max-height":"500",data:v(A),border:"",style:{width:"100%"}},{default:p(()=>[b(c,{prop:"name",label:"字段"}),b(c,{prop:"value",label:"当前值"}),b(c,{prop:"ps",label:"说明"})]),_:1},8,["data"])),[[U,v(P)]])]),_:1}),f((r(),u(l,{label:"性能调整",name:"performance"},{default:p(()=>[_("div",Z,[b(T,{model:v(B)},{default:p(()=>[b(z,{label:"BindIp"},{default:p(()=>[_("div",$,[b(d,{modelValue:v(B).ip,"onUpdate:modelValue":a[1]||(a[1]=e=>v(B).ip=e)},null,8,["modelValue"]),a[9]||(a[9]=_("span",{class:"unit"},"监听IP,请勿随意修改",-1))])]),_:1}),b(z,{label:"PORT"},{default:p(()=>[_("div",K,[b(d,{modelValue:v(B).port,"onUpdate:modelValue":a[2]||(a[2]=e=>v(B).port=e),type:"number"},null,8,["modelValue"]),a[10]||(a[10]=_("span",{class:"unit"}," 监听端口,一般无需修改",-1))])]),_:1}),b(z,{label:"CACHESIZE"},{default:p(()=>[_("div",L,[b(d,{modelValue:v(B).cachesize,"onUpdate:modelValue":a[3]||(a[3]=e=>v(B).cachesize=e),type:"number"},null,8,["modelValue"]),a[11]||(a[11]=_("span",{class:"unit"}," MB,缓存大小,建议不要大于512M",-1))])]),_:1}),b(z,{label:"MAXCONN"},{default:p(()=>[_("div",W,[b(d,{modelValue:v(B).maxconn,"onUpdate:modelValue":a[4]||(a[4]=e=>v(B).maxconn=e),type:"number"},null,8,["modelValue"]),a[12]||(a[12]=_("span",{class:"unit"},"最大连接数,建议不要大于40960",-1))])]),_:1}),b(z,{label:" "},{default:p(()=>[b(i,{onClick:v(R),type:"primary"},{default:p(()=>[...a[13]||(a[13]=[y("保存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])])]),_:1})),[[U,v(S)]])]),_:1},8,["modelValue","onTabClick"])}}}),[["__scopeId","data-v-5cf77f24"]]);export{Y as default};
