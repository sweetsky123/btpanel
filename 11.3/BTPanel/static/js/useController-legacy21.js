!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",l=a.toStringTag||"@@toStringTag";function o(e,a,u,l){var o=a&&a.prototype instanceof s?a:s,c=Object.create(o.prototype);return t(c,"_invoke",function(e,t,a){var u,l,o,s=0,c=a||[],f=!1,p={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(e,t){return u=e,l=0,o=n,p.n=t,i}};function v(e,t){for(l=e,o=t,r=0;!f&&s&&!a&&r<c.length;r++){var a,u=c[r],v=p.p,m=u[2];e>3?(a=m===t)&&(o=u[(l=u[4])?5:(l=3,3)],u[4]=u[5]=n):u[0]<=v&&((a=e<2&&v<u[1])?(l=0,p.v=t,p.n=u[1]):v<m&&(a=e<3||u[0]>t||t>m)&&(u[4]=e,u[5]=t,p.n=m,l=0))}if(a||e>1)return i;throw f=!0,t}return function(a,c,m){if(s>1)throw TypeError("Generator is already running");for(f&&1===c&&v(c,m),l=c,o=m;(r=l<2?n:o)||!f;){u||(l?l<3?(l>1&&(p.n=-1),v(l,o)):p.n=o:p.v=o);try{if(s=2,u){if(l||(a="next"),r=u[a]){if(!(r=r.call(u,o)))throw TypeError("iterator result is not an object");if(!r.done)return r;o=r.value,l<2&&(l=0)}else 1===l&&(r=u.return)&&r.call(u),l<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),l=1);u=n}else if((r=(f=p.n<0)?o:e.call(t,p))!==i)break}catch(r){u=n,l=1,o=r}finally{s=1}}return{value:r,done:f}}}(e,u,l),!0),c}var i={};function s(){}function c(){}function f(){}r=Object.getPrototypeOf;var p=[][u]?r(r([][u]())):(t(r={},u,function(){return this}),r),v=f.prototype=s.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,l,"GeneratorFunction")),e.prototype=Object.create(v),e}return c.prototype=f,t(v,"constructor",f),t(f,"constructor",c),c.displayName="GeneratorFunction",t(f,l,"GeneratorFunction"),t(v),t(v,l,"Generator"),t(v,u,function(){return this}),t(v,"toString",function(){return"[object Generator]"}),(e=function(){return{w:o,m:m}})()}function t(e,n,r,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}t=function(e,n,r,a){function l(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?u?u(e,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[n]=r:(l("next",0),l("throw",1),l("return",2))},t(e,n,r,a)}function n(e,t,n,r,a,u,l){try{var o=e[u](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(a,u){var l=e.apply(t,r);function o(e){n(l,a,u,o,i,"next",e)}function i(e){n(l,a,u,o,i,"throw",e)}o(void 0)})}}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./index.vue_vue_type_script_setup_true_lang-legacy20.js?v=1763689792","./index-legacy123.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./index-legacy107.js?v=1763689792","./useController-legacy5.js?v=1763689792","./index-legacy350.js?v=1763689792","./site-legacy.js?v=1763689792"],function(t,n){"use strict";var u,l,o,i,s,c,f,p,v,m,g,d,y,h,b,x,w,_,k,j,S,E,I,L,C,V,P,T,z,O,A,B,R,U,G,N,q,H,F,M,D,J,K,Q,$,W,X,Y,Z,ee,te,ne,re,ae,ue,le,oe,ie,se,ce;return{setters:[function(e){u=e.e,l=e.u,o=e.d,i=e.k,s=e.j,c=e.ax,f=e.Q,p=e.aK,v=e.M,m=e.p,g=e.az},function(e){d=e.c,y=e.v,h=e.I,b=e.J,x=e.z,w=e.x,_=e.y,k=e.F,j=e.B,S=e.G,E=e.A,I=e.e,L=e.D,C=e.C,V=e.t,P=e.O,T=e.R,z=e.M,O=e.ap,A=e.b2,B=e.V,R=e.H,U=e.aA,G=e.ad,N=e.ab,q=e.j,H=e.r,F=e.o,M=e.g,D=e.n},function(e){J=e._,K=e.f,Q=e.p},function(e){$=e._},function(e){W=e._},function(e){X=e.u,Y=e.S},function(e){Z=e._},function(e){ee=e.p},function(e){te=e.A},function(e){ne=e.getSiteErrorLogs,re=e.getSpringBootLogList,ae=e.getSpringBootLog,ue=e.changeSiteLogPath,le=e.setPushTask,oe=e.getSiteLogPushStatus,ie=e.getIpArea,se=e.getSiteLogs,ce=e.getSiteLogFile}],execute:function(){var n={class:"h-full"},fe={key:0,class:"mb-[16px]"},pe={class:"flex"},ve={key:1,class:"bg-light flex items-center justify-center h-full",style:{"min-height":"500px"}},me={class:"bg-lighter px-[48px] py-[16px] text-default flex items-center"},ge=t("b",d({__name:"error-log",setup:function(e,t){var r=t.expose,l=X(),o=l.isBindExtranet,i=l.siteType,s=Y().jumpTabEvent;return y(ot),r({init:ot}),function(e,t){var r=u,l=h("bt-loading");return b((w(),_("div",n,[x(o)?(w(),_(k,{key:0},["proxy"===x(i)?(w(),_("div",fe,"日志大小："+j(x(et).size),1)):S("",!0),E("div",pe,[I(W,{content:x(et).logs,isHtml:!0,fullScreen:{title:"全屏查看[错误]日志",onRefresh:x(ot)},style:{height:"56rem",width:"99.5%"}},null,8,["content","fullScreen"])])],64)):(w(),_("div",ve,[E("div",me,[t[2]||(t[2]=L(" 请开启 ",-1)),I(r,{class:"mx-[.4rem]",onClick:t[0]||(t[0]=function(e){return x(s)("mapping")})},{default:C(function(){return a(t[1]||(t[1]=[L(" 外网映射 ",-1)]))}),_:1}),t[3]||(t[3]=L(" 后查看 ",-1))])]))])),[[l,x(Ze)]])}}})),de={class:"h-full"},ye={key:0,class:"flex items-center justify-between pb-1.6rem"},he={class:"flex items-center"},be={class:"ml-[8px]"},xe={class:"flex items-center"},we={class:"flex items-center p-[12px]"},_e={key:1,class:"mb-[16px]"},ke={key:2,class:"mt-1rem"},je={key:1,class:"bg-light flex items-center justify-center h-full",style:{"min-height":"500px"}},Se={class:"bg-lighter px-[48px] py-[16px] text-default flex items-center"},Ee={class:"p-[20px]"},Ie=t("_",d({__name:"response-log",setup:function(e,t){var n=t.expose,r=l(),c=r.plugin,f=r.enterpriseRec,p=V(c.value).webserver,v=X(),m=v.isBindExtranet,g=v.siteType,d=Y().jumpTabEvent;return y(zt),n({init:zt}),function(e,t){var n=O,r=A,l=o,c=B,v=Z,y=R,V=U,q=u,H=i,F=G,M=N,D=s,K=h("bt-loading");return w(),_("div",de,[x(m)?(w(),_(k,{key:0},["proxy"!==x(g)?(w(),_("div",ye,[b((w(),_("div",he,["python"!==x(g)?(w(),_(k,{key:0},[I(n,{onChange:x(St),modelValue:x(dt).alert,"onUpdate:modelValue":t[0]||(t[0]=function(e){return x(dt).alert=e})},null,8,["onChange","modelValue"]),E("span",be,[t[14]||(t[14]=L(" 关键字告警 ",-1)),E("span",{class:"!inline-block bt-link",onClick:t[1]||(t[1]=function(){return x(Ct)&&x(Ct).apply(void 0,arguments)})}," [配置] ")]),I(r,{direction:"vertical",class:"!h-2rem !mx-1.6rem"})],64)):S("",!0),x(f)?(w(),P(c,{key:1,onChange:x(jt),modelValue:x(dt).showIp,"onUpdate:modelValue":t[2]||(t[2]=function(e){return x(dt).showIp=e})},{default:C(function(){return[E("div",xe,[t[15]||(t[15]=L(" 显示IP归属地信息 ",-1)),I(l,{icon:"icon-ltd",size:16,color:"#9B7E48",class:"ml-[4px]"})])]}),_:1},8,["onChange","modelValue"])):S("",!0),"php"===x(g)?(w(),_(k,{key:2},[I(r,{direction:"vertical",class:"!h-2rem !mx-1.6rem"}),I(V,{trigger:"click",placement:"bottom","popper-class":"white-tips-popover",width:"400",visible:x(gt),"onUpdate:visible":t[5]||(t[5]=function(e){return T(gt)?gt.value=e:null})},{reference:C(function(){return[I(y,{type:"default"},{default:C(function(){return a(t[17]||(t[17]=[L("更改日志路径",-1)]))}),_:1})]}),default:C(function(){return[E("div",we,[I(v,{placeholder:"请输入日志路径",modelValue:x(mt),"onUpdate:modelValue":t[3]||(t[3]=function(e){return T(mt)?mt.value=e:null}),onIconClick:x(_t),icon:"el-folder-opened"},null,8,["modelValue","onIconClick"]),I(y,{type:"primary",class:"!ml-[8px]",onClick:t[4]||(t[4]=function(e){return x(kt)()})},{default:C(function(){return a(t[16]||(t[16]=[L(" 保存 ",-1)]))}),_:1})])]}),_:1},8,["visible"])],64)):S("",!0)])),[[K,x(Ze)]]),I(y,{type:"primary",onClick:t[6]||(t[6]=function(){return x(Pt)()})},{default:C(function(){return a(t[18]||(t[18]=[L("刷新日志",-1)]))}),_:1})])):S("",!0),"proxy"===x(g)?(w(),_("div",_e,"日志大小："+j(x(dt).size),1)):S("",!0),b(I(W,{content:x(dt).logs,isHtml:!0,fullScreen:{title:"全屏查看[响应]日志",onRefresh:x(Pt)},style:z({height:"php"===x(g)?"52rem":"56rem",width:"99.5%"})},null,8,["content","fullScreen","style"]),[[K,x(Ze)]]),"nginx"===x(p)&&"php"===x(g)?(w(),_("div",ke,[t[19]||(t[19]=L(" * 若网站开启cdn导致日志",-1)),t[20]||(t[20]=E("span",{class:"text-danger"},"来源IP",-1)),t[21]||(t[21]=L("解析错误，可前往[ ",-1)),E("span",{class:"cursor-pointer bt-link",onClick:t[7]||(t[7]=function(e){return x(ee)("globalSetting")})},"全局设置"),t[22]||(t[22]=L(" ]打开cdn来源IP解析 ",-1))])):S("",!0)],64)):(w(),_("div",je,[E("div",Se,[t[24]||(t[24]=L(" 请开启 ",-1)),I(q,{class:"mx-[.4rem]",onClick:t[8]||(t[8]=function(e){return x(d)("mapping")})},{default:C(function(){return a(t[23]||(t[23]=[L(" 外网映射 ",-1)]))}),_:1}),t[25]||(t[25]=L(" 后查看 ",-1))])])),I(D,{title:"关键字告警配置",onConfirm:t[12]||(t[12]=function(e){return x(It)(x(xt),"confirm")}),onCancel:x(Et),modelValue:x(ht),"onUpdate:modelValue":t[13]||(t[13]=function(e){return T(ht)?ht.value=e:null}),area:46,showFooter:""},{default:C(function(){return[E("div",Ee,[I(M,{"label-position":"right",model:x(xt),rules:x(wt),ref_key:"alertSetFormRef",ref:bt},{default:C(function(){return[I(F,{label:"周期",prop:"cycle"},{default:C(function(){return[I(H,{modelValue:x(xt).cycle,"onUpdate:modelValue":t[9]||(t[9]=function(e){return x(xt).cycle=e}),type:"number",min:1,width:"24rem","text-type":"分钟"},null,8,["modelValue"])]}),_:1}),I(F,{label:"关键字",prop:"keys"},{default:C(function(){return[I(H,{modelValue:x(xt).keys,"onUpdate:modelValue":t[10]||(t[10]=function(e){return x(xt).keys=e}),type:"textarea",resize:"none",row:6,width:"24rem"},null,8,["modelValue"])]}),_:1}),I(F,{label:"告警方式",prop:"channel"},{default:C(function(){return[I(J,{modelValue:x(xt).channel,"onUpdate:modelValue":t[11]||(t[11]=function(e){return x(xt).channel=e}),multiple:!0,limit:["sms"],class:"!w-[24rem]"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model","rules"]),t[26]||(t[26]=E("ul",{class:"mt-[8px] leading-8 text-small list-disc ml-[20px]"},[E("li",null,"检查时只检查间隔时间内的日志内容"),E("li",null,"周期时间请勿设置太小，建议10分钟以上以免导致服务器资源异常")],-1))])]}),_:1},8,["onCancel","modelValue"])])}}})),Le={key:1,class:"bg-light flex items-center justify-center h-full",style:{"min-height":"500px"}},Ce={class:"bg-lighter px-[48px] py-[16px] text-default flex items-center"},Ve=d({__name:"safe-analysis",setup:function(e){var t=X(),n=t.isBindExtranet,r=t.siteInfo,l=Y().jumpTabEvent;return function(e,t){var o=u;return w(),_("div",null,[x(n)?(w(),P(te,{key:0,type:"site",name:x(r).name},null,8,["name"])):(w(),_("div",Le,[E("div",Ce,[t[2]||(t[2]=L(" 请开启 ",-1)),I(o,{class:"mx-[.4rem]",onClick:t[0]||(t[0]=function(e){return x(l)("mapping")})},{default:C(function(){return a(t[1]||(t[1]=[L(" 外网映射 ",-1)]))}),_:1}),t[3]||(t[3]=L(" 后查看 ",-1))])]))])}}}),Pe={class:"flex flex-col"},Te={class:"flex items-center"},ze={class:"mt-[16px]"},Oe={class:"p-[12px] w-full flex items-start overflow-y-auto h-full"},Ae=["innerHTML"],Be=d({__name:"spring-boot-logs",setup:function(e,t){var n=t.expose,r=l().mainHeight;return y(vt),n({init:vt}),function(e,t){var n=c,u=R,l=s,o=h("bt-loading");return b((w(),_("div",Pe,[E("div",Te,[t[2]||(t[2]=E("span",null,"日志路径",-1)),I(n,{modelValue:x(ut).path,"onUpdate:modelValue":t[0]||(t[0]=function(e){return x(ut).path=e}),options:x(tt),onChange:x(st),placeholder:"请选择",class:"!w-[38rem] !mx-[.8rem]"},null,8,["modelValue","options","onChange"])]),E("div",ze,[E("div",null,[I(u,{type:"primary",onClick:x(it)},{default:C(function(){return a(t[3]||(t[3]=[L("刷新日志",-1)]))}),_:1},8,["onClick"]),I(u,{type:"default",onClick:x(ft)},{default:C(function(){return a(t[4]||(t[4]=[L("实时日志",-1)]))}),_:1},8,["onClick"])]),I(W,{title:"全屏查看【项目】日志",content:x(ut).logs,isHtml:!0,fullScreen:{title:"全屏查看【项目】日志",onRefresh:x(it)},class:"mt-[16px]",style:z({height:"java"===x(nt)?"48rem":"64rem",width:"99.5%"})},null,8,["content","fullScreen","style"])]),I(l,{title:"查看日志",onCancel:x(pt),modelValue:x(rt),"onUpdate:modelValue":t[1]||(t[1]=function(e){return T(rt)?rt.value=e:null}),area:["100%","100%"],"close-btn":1},{default:C(function(){return[E("div",{ref_key:"logPopupCon",ref:at,class:"bg-[#333] text-white w-full h-full",style:z("height: ".concat(x(r),"px;"))},[E("pre",Oe,[t[5]||(t[5]=L("\t\t\t\t\t",-1)),E("code",{class:"flex-1 w-full p-0 bg-none whitespace-pre-line text-i text-[#ececec]",innerHTML:x(ut).logs},null,8,Ae),t[6]||(t[6]=L("\n\t\t\t\t",-1))])],4)]}),_:1},8,["onCancel","modelValue"])])),[[o,x(Ze)]])}}}),Re=q("SITE-LOGS-STORE",function(){var t=X(),n=t.siteType,a=t.siteInfo,u=function(){var t=r(e().m(function t(r){var a,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ne(r,n.value);case 1:return a=e.v,u=a.data,e.a(2,{data:u,status:!0});case 2:return e.p=2,e.v,e.a(2,{msg:"获取错误日志失败",status:!1})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=r(e().m(function t(n){var r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,re(n);case 1:return r=e.v,a=r.data,e.a(2,{data:a.data,status:a.status});case 2:return e.p=2,e.v,e.a(2,{msg:"获取日志失败",status:!1})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),o=function(){var t=r(e().m(function t(n){var r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,ae(n);case 1:return r=e.v,a=r.data,e.a(2,{status:a.status,msg:a.data});case 2:return e.p=2,e.v,e.a(2,{msg:"保存路径失败",status:!1})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=r(e().m(function t(n){var r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,f({loading:"正在保存日志路径，请稍后...",request:ue(n),message:!0});case 1:return r=e.v,e.a(2,{status:r.status,msg:r.msg});case 2:return e.p=2,e.v,e.a(2,{msg:"保存路径失败",status:!1})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=r(e().m(function t(n){var r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,f({loading:"正则处理中，请稍后...",request:le(n),message:!0});case 1:return r=e.v,e.a(2,{status:r.status,msg:r.msg});case 2:return e.p=2,e.v,e.a(2,{status:!1,msg:"推送失败"})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=r(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,f({request:oe({sitename:a.value.name}),data:{status:Boolean,"config.cycle":[Number,"cycle"],"config.keys":[Array,"keys"],"config.channel":[String,"channel"]}});case 1:return n=e.v,e.a(2,{data:n,status:!0});case 2:return e.p=2,e.v,e.a(2,{msg:"获取推送配置失败",status:!1})}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),p=function(){var t=r(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,f({request:ie(),data:{msg:[Number,"msg"]}});case 1:return n=e.v,e.a(2,{data:n.msg,status:!0});case 2:return e.p=2,e.v,e.a(2,{msg:"获取IP归属地失败",status:!1})}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),v=function(){var t=r(e().m(function t(r){var a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,se(r,n.value);case 1:return a=e.v,e.a(2,{data:a.data,status:a.status});case 2:return e.p=2,e.v,e.a(2,{msg:"获取日志失败",status:!1})}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}();return{getErrorLogsEvent:u,getSpringLogEvent:l,setSpringPathEvent:o,saveResLogPathEvent:i,setPushTaskEvent:s,getLogPushEvent:c,getIpStatusEvent:p,getResLogEvent:v}}),Ue=l().payment,Ge=V(Ue.value).authType,Ne=Re(),qe=Ne.getErrorLogsEvent,He=Ne.getSpringLogEvent,Fe=Ne.setSpringPathEvent,Me=Ne.saveResLogPathEvent,De=Ne.setPushTaskEvent,Je=Ne.getLogPushEvent,Ke=Ne.getIpStatusEvent,Qe=Ne.getResLogEvent,$e=X(),We=$e.siteType,Xe=$e.siteInfo,Ye=$e.isBindExtranet,Ze=H(!1),et=H({logs:"",size:"0 b"}),tt=H([]),nt=H(""),rt=H(!1),at=H(null),ut=F({path:"",logs:"",type:"",size:"",isNew:!1,isGunicorn:!1}),lt=(t("t",M(function(){var e;return(null===(e=Xe.value)||void 0===e?void 0:e.tabName)||("java"===We.value?"projectLog":"response")})),t("a",H([{label:"响应日志",name:"response",lazy:!0,render:function(){return I(Ie,null,null)}},{label:"错误日志",name:"error",lazy:!0,render:function(){return I(ge,null,null)}},{label:"日志安全分析",name:"safe",lazy:!0,render:function(){return I(Ve,null,null)}}]))),ot=(t("o",function(e){}),t("i",function(){var e,t;"java"===We.value?(lt.value.some(function(e){return"projectLog"===e.name})||lt.value.unshift({label:"项目日志",name:"projectLog",lazy:!0,render:function(){return I($,null,null)}}),"springboot"===(null===(t=Xe.value)||void 0===t||null===(t=t.project_config)||void 0===t?void 0:t.java_type)?lt.value.some(function(e){return"springbootLog"===e.name})||lt.value.push({label:"springBoot日志",name:"springbootLog",lazy:!0,render:function(){return I(Be,null,null)}}):lt.value=lt.value.filter(function(e){return"springbootLog"!==e.name})):lt.value=lt.value.filter(function(e){return"projectLog"!==e.name&&"springbootLog"!==e.name});["php","proxy","html"].includes(We.value)?Ye.value=!0:Ye.value=!(null===(e=Xe.value)||void 0===e||null===(e=e.project_config)||void 0===e||!e.bind_extranet)}),function(){var t=r(e().m(function t(){var n,r,a,u,l,o,i;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(Ye.value){e.n=1;break}return e.a(2);case 1:return n=Xe.value.name,r=We.value,a={proxy:{site_name:n,type:"error"},default:{siteName:n}},e.p=2,Ze.value=!0,e.n=3,qe(a[r]||a.default);case 3:return o=e.v,"proxy"===r&&(et.value.size=o.data.size||"0 b"),et.value.logs=(null===(u=o.data)||void 0===u?void 0:u.logs)||(null===(l=o.data)||void 0===l?void 0:l.msg)||"暂无日志信息",e.a(2,o);case 4:return e.p=4,i=e.v,p(i),e.a(2,{msg:"获取错误日志失败",status:!1});case 5:return e.p=5,Ze.value=!1,e.f(5);case 6:return e.a(2)}},t,null,[[2,4,5,6]])}));return function(){return t.apply(this,arguments)}}()),it=function(){var t=r(e().m(function t(){var n,r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return Ze.value=!0,e.p=1,n={project_name:Xe.value.name},e.n=2,He(n);case 2:r=e.v,a=r.data,r.status&&(tt.value=a.map(function(e){return{label:e,value:e}}),ut.logs="正在获取日志",ut.path=(null==a?void 0:a[0])||"",st()),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,Ze.value=!1,e.f(4);case 5:return e.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),st=function(){var t=r(e().m(function t(n){var r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,ut.path){e.n=1;break}return ut.logs="暂未在SpringBoot框架中查找到日志配置信息",e.a(2,!1);case 1:return e.n=2,Fe({log_file:ut.path});case 2:return(r=e.v).status||v.error(r.msg),ut.logs=r.msg||"获取日志失败",e.a(2,r);case 3:return e.p=3,e.v,e.a(2,{msg:"保存路径失败",status:!1})}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}(),ct=null,ft=function(){rt.value=!0,D(function(){at.value&&(at.value.scrollTop=at.value.scrollHeight)}),ct&&clearInterval(ct),ct=setInterval(function(){it()},2e3)},pt=function(){rt.value=!1,clearInterval(ct),ct=null},vt=function(){var e,t;nt.value="java",ut.type=(null===(e=Xe.value.project_config)||void 0===e?void 0:e.loglevel)||"",ut.isGunicorn="gunicorn"===(null===(t=Xe.value.project_config)||void 0===t?void 0:t.stype),it()},mt=H(""),gt=H(!1),dt=F({alert:!1,showIp:!1,ipData:0,logs:"",size:"0 b"}),yt=H(!1),ht=H(!1),bt=H(),xt=F({cycle:0,keys:"",channel:[]}),wt=F({cycle:[{required:!0,message:"请输入周期",trigger:"blur"}],keys:[{required:!0,message:"请输入关键字",trigger:"blur"}],channel:[{required:!0,message:"请选择告警方式",trigger:"blur"}]}),_t=function(){K({type:"dir",path:mt.value,change:function(e){mt.value=e,setTimeout(function(){gt.value=!0},0)}})},kt=function(){var t=r(e().m(function t(){var n=arguments;return e().w(function(e){for(;;)switch(e.n){case 0:return n.length>0&&void 0!==n[0]?n[0]:{site_name:Xe.value.name,log_path:mt.value},e.n=1,m({title:"保存日志路径",content:"是否保存日志路径[".concat(mt.value,"]")});case 1:return e.n=2,Me({site_name:Xe.value.name,log_path:mt.value});case 2:e.v.status&&(Pt(),Tt(),gt.value=!1);case 3:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),jt=function(){var t=r(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:"ltd"!==Ge.value?(dt.showIp=!1,Q({disablePro:!0,sourceId:184})):Pt();case 1:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),St=function(){var t=r(e().m(function t(n){return e().w(function(e){for(;;)switch(e.n){case 0:yt.value=!0,n?ht.value=!0:It({},"switch");case 1:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),Et=function(){yt.value&&(dt.alert=!dt.alert,yt.value=!1)},It=function(){var t=r(e().m(function t(n,r){var a,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!ht.value){e.n=1;break}return e.n=1,bt.value.validate();case 1:return a={sitename:Xe.value.name},"switch"!==r&&(yt.value||delete a.sitename,a.channel=n.channel.filter(function(e){return""!==e}).join(","),a.cycle=n.cycle,a.keys=JSON.stringify(g(n.keys)?n.keys.split(","):n.keys)),e.n=2,De(a);case 2:return(u=e.v).status&&Lt(),e.a(2,u.status);case 3:return e.p=3,e.v,e.a(2,!1)}},t,null,[[0,3]])}));return function(e,n){return t.apply(this,arguments)}}(),Lt=function(){var t=r(e().m(function t(){var n,r,a,u,l,o;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Je();case 1:return n=e.v,r={},n.status?(dt.alert=n.data.status,a=n.data,u=a.cycle,l=a.keys,o=a.channel,r={cycle:u,keys:l,channel:o.split(","),status:n.status}):dt.alert=!1,Object.assign(xt,r),e.a(2,{data:r,status:n.status});case 2:return e.p=2,e.v,e.a(2,{msg:"获取告警配置失败",status:!1})}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),Ct=function(){ht.value=!0,Lt()},Vt=function(){var t=r(e().m(function t(){var n;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Ke();case 1:n=e.v,dt.showIp=1===n.data,e.n=3;break;case 2:return e.p=2,e.v,e.a(2,{msg:"获取IP归属地失败",status:!1});case 3:return e.a(2)}},t,null,[[0,2]])}));return function(){return t.apply(this,arguments)}}(),Pt=function(){var t=r(e().m(function t(){var n,r,a,u,l,o=arguments;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:Xe.value.name,r=o.length>1&&void 0!==o[1]?o[1]:We.value,"ltd"!==Ge.value&&(dt.showIp=!1),a={proxy:{site_name:n,type:"access"},default:{siteName:n,ip_area:Number(dt.showIp)}},e.p=1,Ze.value=!0,e.n=2,Qe(a[r]||a.default);case 2:return u=e.v,"proxy"===r?(dt.logs=u.data.msg||"暂无日志信息",dt.size=u.data.size||"0 b"):dt.logs=u.data.msg||"暂无日志信息",e.a(2,u);case 3:return e.p=3,l=e.v,p(l),e.a(2,{msg:"获取日志失败",status:!1});case 4:return e.p=4,Ze.value=!1,e.f(4);case 5:return e.a(2)}},t,null,[[1,3,4,5]])}));return function(){return t.apply(this,arguments)}}(),Tt=function(){f({request:ce({siteName:Xe.value.name}),data:{log_file:String,status:Boolean,msg:String},success:function(e){mt.value=e.log_file,e.status||v.error(e.msg)}})},zt=function(){var t=r(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:if(Ye.value){e.n=1;break}return e.a(2);case 1:return e.n=2,Vt();case 2:if("python"===We.value){e.n=3;break}return e.n=3,Lt();case 3:return e.n=4,Pt();case 4:Tt();case 5:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()}}})}();
