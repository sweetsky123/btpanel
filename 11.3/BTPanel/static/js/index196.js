import{c as e,r as l,o as a,v as r,x as o,y as t,A as s,D as c,B as n,z as i,O as d,R as p,G as m,L as u,e as v,C as b,Q as h,S as y,F as g,b1 as k,J as x,K as f,bX as C,U as _,aA as w,ad as V,ab as j,H as E,be as z}from"./base-lib.js?v=1763689792";import{u as S,ib as U,bz as N,bK as R,b as T,_ as q}from"./utils-lib.js?v=1763689792";import{aw as A}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";const D={class:"nps-survey-box"},J={class:"nps-survey-banner"},K={style:{"vertical-align":"4px"}},L={class:"px-[4rem] text-center !relative"},O={key:0,class:"px-[4rem] mt-[2rem] vertical-top"},H={class:"my-[1rem]"},M={class:"inline-block cardView"},P=["onMouseover"],B={class:"mt-[4px] ml-[7.6rem]"},F={key:0},G={key:1,class:"px-[4rem] mt-[2rem]"},I={class:"mb-1rem"},Q={class:"w-[36rem] ml-[7.6rem] inline-block"},X={class:"flex flex-col items-center p-[2rem] mt-[1.2rem]"},$=q(e({__name:"index",props:{compData:{default:()=>({})}},emits:["close"],setup(e,{emit:q}){const{payment:$}=S(),W=T(),Y=q,Z=e,{id:ee,type:le,name:ae,softName:re,description:oe,isNoRate:te,title:se,isCard:ce,isShowPhone:ne}=Z.compData,ie=l("top-0"),de=l(""),pe=l(0),me=l(),ue=[{text:"很不满意",color:"var(--el-color-danger)",borderColor:"rgba(var(--el-color-danger-rgb),0.4)",bgColor:"rgba(var(--el-color-danger-rgb),0.1)"},{text:"不满意",color:"var(--el-color-danger)",borderColor:"rgba(var(--el-color-danger-rgb),0.4)",bgColor:"rgba(var(--el-color-danger-rgb),0.1)"},{text:"一般",color:"var(--el-color-warning)",borderColor:"rgba(var(--el-color-warning-rgb),0.4)",bgColor:"rgba(var(--el-color-danger-rgb),0.1)"},{text:"满意",color:"var(--el-color-primary)",borderColor:"rgba(var(--el-color-primary-rgb),0.4)",bgColor:"rgba(var(--el-color-primary-rgb),0.1)"},{text:"非常满意",color:"var(--el-color-primary)",borderColor:"rgba(var(--el-color-primary-rgb),0.4)",bgColor:"rgba(var(--el-color-primary-rgb),0.1)"}],ve=l(0),be=l(""),he=l([{text:"软件和互联网",checked:!0},{text:"事业单位",checked:!1},{text:"传统企业",checked:!1},{text:"创业公司",checked:!1},{text:"个人",checked:!1},{text:"其他",checked:!1}]),ye=l(""),ge=l([[{role:"软件开发",check:!1},{role:"建站",check:!1},{role:"互联网服务",check:!1},{role:"软件服务",check:!1}],[{role:"政府单位",check:!1},{role:"政企单位",check:!1},{role:"医院",check:!1},{role:"学校",check:!1}],[{role:"工业",check:!1},{role:"服务",check:!1},{role:"餐饮",check:!1},{role:"制造业等",check:!1}],[{role:"创业公司",check:!1}],[{role:"个人站长",check:!1},{role:"学生",check:!1}]]),ke=se||(ae?"您对".concat(ae,"有什么改进的方向和建议?"):"宝塔面板需求反馈收集"),xe=oe||"如果您在使用过程中遇到任何问题或功能不完善，请将您的问题或需求详细描述给我们，我们将尽力为您解决或完善。",fe=a({phone:"",status:!1}),Ce=async()=>{let e={product_type:le,software_name:re||"panel",rate:pe.value},l={};if(te||null!==pe.value&&0!==pe.value)if(""!==de.value)try{if(l[ee]=de.value,5!=ve.value?l[1e3]=be.value:l[1e3]=ye.value,e.questions=JSON.stringify(l),fe.status){if(!fe.phone)return void W.error("请留下您的手机号码方便后续回访~");let l=U(fe.phone);e.feedback=JSON.stringify(l?{phone:fe.phone}:{email:fe.phone})}await N(e),A(),Y("close")}catch(a){}else W.error("请输入您的需求");else W.error("打个分数再提交吧，麻烦您了~")},_e=l();return r(()=>{if(!te){ie.value="top-34";const e=me.value.$el.querySelectorAll(".el-rate__item");e.forEach((l,a)=>{const r=document.createElement("div"),o=ue[a];r.innerText=o.text,r.classList.add("rate-tips"),r.style.color=o.color,r.style.borderColor=o.borderColor,r.style.backgroundColor=o.bgColor,l.appendChild(r),[1,3,5].includes(a)||(r.style.display="block"),l.addEventListener("mouseover",()=>{e.forEach(e=>{e.querySelector(".rate-tips").style.display="none"}),pe.value=a+1,r.style.display="block"})})}setTimeout(()=>{var e;null==(e=_e.value)||e.focus()},400)}),(e,l)=>{const a=C,r=_,S=w,U=z,N=R,T=V,q=j,A=E;return o(),t("div",D,[s("div",J,[s("span",null,[l[6]||(l[6]=s("i",null,null,-1)),l[7]||(l[7]=c()),s("span",K,n(i(ke)),1)])]),s("div",L,[i(te)?m("",!0):(o(),d(a,{key:0,ref_key:"rate",ref:me,modelValue:i(pe),"onUpdate:modelValue":l[0]||(l[0]=e=>p(pe)?pe.value=e:null),class:"mt-[8px] mb-[3rem]",colors:["var(--el-color-danger)","var(--el-color-warning)","var(--el-color-primary)"],texts:["很不满意","不满意","一般","满意","非常满意"],"aria-label":"Rate",size:"large"},null,8,["modelValue"])),s("span",{class:u(["text-[red] absolute left-12",i(ie)])},"*",2),v(S,{placement:"top-start",width:"440","popper-class":"tips !bg-primary !text-white !text-small !p-12px !leading-[2rem]",trigger:"click","visible-arrow":!0,content:i(xe)},{reference:b(()=>[v(r,{ref_key:"inputRef",ref:_e,modelValue:i(de),"onUpdate:modelValue":l[1]||(l[1]=e=>p(de)?de.value=e:null),type:"textarea",rows:5,placeholder:i(xe),onKeydown:l[2]||(l[2]=h(y(()=>{},["stop"]),["enter"]))},null,8,["modelValue","placeholder"])]),_:1},8,["content"])]),i(ce)?(o(),t("div",O,[s("div",H,[l[8]||(l[8]=s("span",{class:"text-base text-secondary align-top"},"您所属行业：",-1)),s("div",M,[(o(!0),t(g,null,k(i(he),(e,l)=>(o(),t("span",{key:l,class:u(["inline-block text-base h-[1.7rem] cardTitle align-super",{active:e.checked}]),onMouseover:a=>((e,l)=>{ve.value=l,he.value.forEach(e=>{e.checked=!1}),e.checked=!0})(e,l)},n(e.text),43,P))),128))]),s("div",B,[5==i(ve)?(o(),t("span",F,[v(r,{modelValue:i(ye),"onUpdate:modelValue":l[3]||(l[3]=e=>p(ye)?ye.value=e:null),placeholder:"您的行业是",class:"!w-[36rem]"},null,8,["modelValue"])])):(o(!0),t(g,{key:1},k(i(ge)[i(ve)],(e,l)=>(o(),d(U,{class:u(e.check?"active":""),size:"small",key:l,type:"info",onClick:l=>(e=>{be.value=e.role,ge.value.forEach(e=>{e.forEach(e=>{e.check=!1})}),e.check=!0})(e),effect:"plain"},{default:b(()=>[c(n(e.role),1)]),_:2},1032,["class","onClick"]))),128))])])])):m("",!0),"ltd"===i($).authType&&i(ne)?(o(),t("div",G,[s("div",I,[l[9]||(l[9]=s("span",{class:"text-base text-secondary"},"是否愿意接受回访：",-1)),v(N,{size:"small",modelValue:i(fe).status,"onUpdate:modelValue":l[4]||(l[4]=e=>i(fe).status=e)},null,8,["modelValue"])]),v(q,{ref:"formPhone","label-position":"top",model:i(fe)},{default:b(()=>[x(v(T,{label:"",prop:"phone"},{default:b(()=>[s("span",Q,[v(r,{modelValue:i(fe).phone,"onUpdate:modelValue":l[5]||(l[5]=e=>i(fe).phone=e),placeholder:"请留下手机号码或邮箱"},null,8,["modelValue"])])]),_:1},512),[[f,i(fe).status]])]),_:1},8,["model"])])):m("",!0),l[11]||(l[11]=s("div",{class:"mt-[2.4rem] text-base text-primary leading-[4.6rem] flex justify-center"},"我们特别重视您的需求反馈，我们会每周进行需求评审，希望能更好的帮到您",-1)),s("div",X,[v(A,{class:"w-[12.5rem] !py-12px !px-20px !h-auto",size:"large",type:"primary",onClick:Ce},{default:b(()=>[...l[10]||(l[10]=[c("提交",-1)])]),_:1})])])}}}),[["__scopeId","data-v-68877866"]]);export{$ as default};
