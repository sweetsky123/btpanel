!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var u=null!=arguments[n]?arguments[n]:{};n%2?t(Object(u),!0).forEach(function(t){r(e,t,u[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(u)):t(Object(u)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(u,t))})}return e}function r(t,n,r){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var u=r.call(t,n||"default");if("object"!=e(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,u,a){var i=r&&r.prototype instanceof c?r:c,s=Object.create(i.prototype);return o(s,"_invoke",function(n,r,u){var o,a,i,c=0,s=u||[],f=!1,v={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,n){return o=t,a=0,i=e,v.n=n,l}};function d(n,r){for(a=n,i=r,t=0;!f&&c&&!u&&t<s.length;t++){var u,o=s[t],d=v.p,p=o[2];n>3?(u=p===r)&&(i=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=d&&((u=n<2&&d<o[1])?(a=0,v.v=r,v.n=o[1]):d<p&&(u=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,v.n=p,a=0))}if(u||n>1)return l;throw f=!0,r}return function(u,s,p){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,p),a=s,i=p;(t=a<2?e:i)||!f;){o||(a?a<3?(a>1&&(v.n=-1),d(a,i)):v.n=i:v.v=i);try{if(c=2,o){if(a||(u="next"),t=o[u]){if(!(t=t.call(o,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,a<2&&(a=0)}else 1===a&&(t=o.return)&&t.call(o),a<2&&(i=TypeError("The iterator does not provide a '"+u+"' method"),a=1);o=e}else if((t=(f=v.n<0)?i:n.call(r,v))!==l)break}catch(t){o=e,a=1,i=t}finally{c=1}}return{value:t,done:f}}}(n,u,a),!0),s}var l={};function c(){}function s(){}function f(){}t=Object.getPrototypeOf;var v=[][r]?t(t([][r]())):(o(t={},r,function(){return this}),t),d=f.prototype=c.prototype=Object.create(v);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,o(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=f,o(d,"constructor",f),o(f,"constructor",s),s.displayName="GeneratorFunction",o(f,a,"GeneratorFunction"),o(d),o(d,a,"Generator"),o(d,r,function(){return this}),o(d,"toString",function(){return"[object Generator]"}),(u=function(){return{w:i,m:p}})()}function o(e,t,n,r){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}o=function(e,t,n,r){function a(t,n){o(e,t,function(e){return this._invoke(t,n,e)})}t?u?u(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},o(e,t,n,r)}function a(e,t,n,r,u,o,a){try{var i=e[o](a),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,u)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,u){var o=e.apply(t,n);function i(e){a(o,r,u,i,l,"next",e)}function l(e){a(o,r,u,i,l,"throw",e)}i(void 0)})}}System.register(["./ace-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792"],function(e,t){"use strict";var r,o,a,l,c,s,f,v,d,p,b,y,m,h;return{setters:[null,function(e){r=e.E,o=e.bT,a=e.b8,l=e.b},function(e){c=e.c,s=e.t,f=e.r,v=e.W,d=e.w,p=e.v,b=e.n,y=e.e,m=e.m,h=e.a9}],execute:function(){var t=l(),g=t.load,w=t.request;e("B",c({name:"BtAceEditor",props:{modelValue:{type:String,default:""},isZoom:{type:Boolean,default:!1},isScrollBottom:{type:Boolean,default:!1},filePath:{type:String,default:""},request:{type:[Object,Boolean],default:!1},encoding:{type:String,default:"utf-8"},autoSave:{type:Boolean,default:!1},editorOption:{type:Object,default:function(){return{}}}},emits:["update:modelValue","save"],setup:function(e,t){var c=t.attrs,O=t.emit,P=t.expose,S=s(e),j=S.modelValue,q=S.editorOption,V=f("file"),k=f(),T=v(),B=f(!1),E={theme:r.value?"ace/theme/clouds_midnight":"ace/theme/chrome",mode:"ace/mode/nginx",wrap:!0,showInvisibles:!1,showFoldWidgets:!1,useSoftTabs:!0,tabSize:2,showPrintMargin:!1,readOnly:!1,fontSize:"12px"},C=f(!1),x=l();d(function(){return j.value},function(t){if(T.value){if(B.value)return void(B.value=!1);try{var n;T.value.getValue()!==j.value&&(T.value.setValue(t||""),T.value.moveCursorTo(0,0)),e.isScrollBottom&&null!==(n=T.value.renderer)&&void 0!==n&&null!==(n=n.scrollBar)&&void 0!==n&&n.scrollHeight&&setTimeout(function(){T.value&&T.value.getSession().setScrollTop(T.value.renderer.scrollBar.scrollHeight)},50)}catch(r){}}}),d(function(){return e.filePath},function(t,n){t!==n&&T.value&&(_(),"model"!==V.value&&D({filePath:t,request:e.request}))}),d(function(){return e.request},function(t,n){t!==n&&T.value&&(_(),"request"===V.value&&D({filePath:e.filePath,request:t}))},{deep:!0});var _=function(){var t,n;""!==e.filePath?V.value="file":null!=e&&null!==(t=e.request)&&void 0!==t&&t.get&&null!=e&&null!==(n=e.request)&&void 0!==n&&n.set?V.value="request":V.value="model"},z=function(){var t=i(u().m(function t(){return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,b();case 1:!k.value||T.value&&T.value.container||G(!0)&&("model"!==V.value?D({filePath:e.filePath,request:e.request}):T.value&&(T.value.setValue(j.value||""),b(function(){T.value&&(T.value.focus(),T.value.moveCursorTo(0,0))})));case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),G=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(!k.value)return!1;if(T.value&&T.value.container&&T.value.container.parentNode)return!0;if(!t){var r=k.value.getBoundingClientRect();if(0===r.width||0===r.height)return!1}k.value.innerHTML="",window.ace.config.set("basePath","/static/editor/");var u=window.ace.edit(k.value,n(n({},h(E)),q.value));return u.commands.addCommand({name:"保存文件",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:function(){O("save",u.getValue()),e.autoSave&&F({filePath:e.filePath,request:e.request,encoding:e.encoding})},readOnly:!1}),u.getSession().on("change",function(){O("update:modelValue",u.getValue())}),T.value=u,!0}catch(o){return T.value=null,!1}},D=function(){var e=i(u().m(function e(t){var n,r,a,i,l,c,s,f;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.filePath,r=t.request,a=g("正在加载文件内容，请稍后..."),e.p=1,T.value){e.n=2;break}return e.a(2);case 2:if("file"!==V.value){e.n=4;break}return e.n=3,o({path:n});case 3:(i=e.v).status?(l=i.data,c=l&&l.data||"",T.value.setValue(c)):w(i),e.n=7;break;case 4:if("request"!==V.value){e.n=6;break}return e.n=5,r.get();case 5:s=e.v,f=s.data,T.value.setValue(f||""),e.n=7;break;case 6:B.value=!0,O("update:modelValue",T.value.getValue());case 7:b(function(){T.value&&(T.value.focus(),T.value.moveCursorTo(0,0))}),e.n=9;break;case 8:e.p=8,e.v;case 9:return e.p=9,a.close(),e.f(9);case 10:return e.a(2)}},e,null,[[1,8,9,10]])}));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=i(u().m(function e(t){var n,r,o,i,l,c,s;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:if(n=t.filePath,r=t.request,o=t.encoding,i=x.load("正在保存文件，请稍后..."),e.p=1,"file"!==V.value){e.n=3;break}return e.n=2,a({path:n,encoding:o,data:T.value.getValue()});case 2:l=e.v,x.request(l),e.n=6;break;case 3:if("request"!==V.value){e.n=5;break}return e.n=4,r.set({data:T.value.getValue(),encoding:o});case 4:c=e.v,x.request(c),e.n=6;break;case 5:O("save",T.value.getValue());case 6:e.n=8;break;case 7:e.p=7,s=e.v,x.error(s);case 8:return e.p=8,i.close(),e.f(8);case 9:return e.a(2)}},e,null,[[1,7,8,9]])}));return function(t){return e.apply(this,arguments)}}(),R=function(){C.value=!C.value};return p(i(u().m(function t(){return u().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,b();case 1:return _(),G(),t.n=2,b();case 2:"model"!==V.value?D({filePath:e.filePath,request:e.request}):T.value&&(T.value.setValue(j.value||""),b(function(){T.value&&(T.value.focus(),T.value.moveCursorTo(0,0))})),k.value&&window.ResizeObserver&&new ResizeObserver(function(e){e.forEach(function(e){var t=e.contentRect,n=t.width,r=t.height;!(n>0&&r>0)||T.value&&T.value.container?T.value&&n>0&&r>0&&T.value.resize():z()})}).observe(k.value);case 3:return t.a(2)}},t)}))),P({getEditor:function(){return T.value}}),function(){return y("div",{class:"ace-editor-content h-full relative"},[y("div",m({class:"ace-editor ".concat((e.isZoom,"")),style:"height:100%",ref:k},c),null),e.isZoom?y("div",{class:"absolute right-0 top-0 icon-zoom",title:e.isZoom?"全屏显示":"退出全屏",onClick:R},null):null])}}}))}}})}();
