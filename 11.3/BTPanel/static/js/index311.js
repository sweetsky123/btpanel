import{_ as a}from"./index109.js?v=1763689792";import{_ as t}from"./index118.js?v=1763689792";import{u as e,i5 as s,bR as n,V as r,Q as o,W as i,l}from"./utils-lib.js?v=1763689792";import{ap as p,aq as m}from"./firewall.js?v=1763689792";import{o as d}from"./useMethod8.js?v=1763689792";import{c as u,W as c,r as _,b8 as b,v as g,I as j,x,O as f,C as w,J as h,z as k,e as v,L as D,D as C}from"./base-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./column.js?v=1763689792";import"./index110.js?v=1763689792";import"./useStore6.js?v=1763689792";import"./validator.js?v=1763689792";import"./index107.js?v=1763689792";const y=u({__name:"index",props:{compData:{default:()=>({isPopup:!1,name:""})}},setup(u){const y=u;e();const U=c(!1),q=_([]),L=_(0),O=_(y.compData.isPopup);y.compData;const P=b({p:1,limit:20}),R=[{label:"网站列表",prop:"site_name",showOverflowTooltip:!0},{label:"扫描URL总数",prop:"scans",width:100},{label:"扫描耗时",prop:"time",render:a=>[a.end_time<=1||a.end_time-a.start_time<=0?v("span",null,[C("0秒")]):v("span",null,[s(a.end_time-a.start_time)])]},{label:"风险次数",render:a=>[0==a.risks?v("span",null,[C("无风险")]):v("span",{class:"bt-link !text-danger",onClick:()=>d(a)},[a.risks])]},{label:"状态",render:a=>[0===a.is_status&&0===a.end_time||1===a.end_time?v("span",{class:"text-red"},[C("扫描未完成")]):1===a.is_status&&0===a.end_time?v("span",{class:"text-warning"},[C("扫描中")]):v("span",null,[C("扫描完成")])]},{label:"扫描时间",width:150,render:a=>{const t=n(a.start_time,"number",0);return v("span",null,[r(t)])}},{label:"操作",align:"right",render:a=>[0===a.is_status&&0===a.end_time||1===a.end_time||1===a.is_status&&0===a.end_time?v("span",{class:"text-disabled cursor-not-allowed"},[C("扫描未完成")]):v("span",{class:"bt-link",onClick:()=>(a=>{window.open("/project/content/report/html?id="+a.testing_id,"_blank","noopener,noreferrer")})(a)},[C("查看报告")])]}],W=async(a=1)=>{await o({loading:U,request:O.value?p({site_name:y.compData.name,...P}):m({...P}),data:{data:[Array,q],page:i(L)}})};return g(W),(e,s)=>{const n=l,r=t,o=a,i=j("bt-loading");return x(),f(o,{class:D({"p-[2rem]":k(O)})},{content:w(()=>[h(v(n,{ref:"table",column:R,data:k(q),"max-height":k(O)?500:null,description:"检测历史列表为空"},null,8,["data","max-height"]),[[i,k(U)],[i,"正在加载检测历史列表，请稍后...","title"]])]),"footer-right":w(()=>[v(r,{total:k(L),page:k(P).p,"onUpdate:page":s[0]||(s[0]=a=>k(P).p=a),row:k(P).limit,"onUpdate:row":s[1]||(s[1]=a=>k(P).limit=a),onChange:W,layout:"prev, pager, next, total, jumper"},null,8,["total","page","row"])]),popup:w(()=>[...s[2]||(s[2]=[])]),_:1},8,["class"])}}});export{y as default};
