!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach(function(n){o(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function o(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var a=r.call(n,t||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function o(t,r,a,o){var u=r&&r.prototype instanceof c?r:c,s=Object.create(u.prototype);return i(s,"_invoke",function(t,r,a){var o,u,i,c=0,s=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(n,t){return o=n,u=0,i=e,d.n=t,l}};function p(t,r){for(u=t,i=r,n=0;!f&&c&&!a&&n<s.length;n++){var a,o=s[n],p=d.p,m=o[2];t>3?(a=m===r)&&(i=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=t<2&&p<o[1])?(u=0,d.v=r,d.n=o[1]):p<m&&(a=t<3||o[0]>r||r>m)&&(o[4]=t,o[5]=r,d.n=m,u=0))}if(a||t>1)return l;throw f=!0,r}return function(a,s,m){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&p(s,m),u=s,i=m;(n=u<2?e:i)||!f;){o||(u?u<3?(u>1&&(d.n=-1),p(u,i)):d.n=i:d.v=i);try{if(c=2,o){if(u||(a="next"),n=o[a]){if(!(n=n.call(o,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,u<2&&(u=0)}else 1===u&&(n=o.return)&&n.call(o),u<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),u=1);o=e}else if((n=(f=d.n<0)?i:t.call(r,d))!==l)break}catch(n){o=e,u=1,i=n}finally{c=1}}return{value:n,done:f}}}(t,a,o),!0),s}var l={};function c(){}function s(){}function f(){}n=Object.getPrototypeOf;var d=[][r]?n(n([][r]())):(i(n={},r,function(){return this}),n),p=f.prototype=c.prototype=Object.create(d);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,i(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=f,i(p,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,a,"GeneratorFunction"),i(p),i(p,a,"Generator"),i(p,r,function(){return this}),i(p,"toString",function(){return"[object Generator]"}),(u=function(){return{w:o,m:m}})()}function i(e,n,t,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}i=function(e,n,t,r){function o(n,t){i(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(o("next",0),o("throw",1),o("return",2))},i(e,n,t,r)}function l(e,n,t,r,a,o,u){try{var i=e[o](u),l=i.value}catch(e){return void t(e)}i.done?n(l):Promise.resolve(l).then(r,a)}function c(e){return function(){var n=this,t=arguments;return new Promise(function(r,a){var o=e.apply(n,t);function u(e){l(o,r,a,u,i,"next",e)}function i(e){l(o,r,a,u,i,"throw",e)}u(void 0)})}}System.register(["./index-legacy109.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./index-legacy119.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./useController-legacy6.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./site-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./ace-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(e,t){"use strict";var r,o,i,l,s,f,d,p,m,v,y,b,g,h,w,j,O,x,S,_,k,P,V,D,A,E,T,C,B,F,G,U,I,q,N,R,M,H,$,z,J,K,Q,L;return{setters:[function(e){r=e._},function(e){o=e.u,i=e.Q,l=e.M,s=e.k,f=e.l,d=e.ah,p=e.e,m=e.$,v=e.j,y=e.p,b=e.aK},function(e){g=e.B},function(e){h=e.c,w=e.r,j=e.e,O=e.v,x=e.I,S=e.x,_=e.y,k=e.A,P=e.z,V=e.R,D=e.C,A=e.F,E=e.b1,T=e.D,C=e.J,B=e.an,F=e.H,G=e.aE,U=e.O,I=e.am},function(e){q=e.a,N=e.u},function(e){R=e.o},function(e){M=e.S,H=e.u},function(e){$=e.getDirBinding,z=e.addDirBinding,J=e.getFileBody,K=e.deleteDirBindMultiple,Q=e.delDirBinding,L=e.getDirRewrite},null,null,null,null,null],execute:function(){var t={class:"flex items-center"},W={class:"flex items-center mr-[16px]"},X={class:"flex items-center mr-[16px]"},Y={class:"p-[20px]"},Z={class:"flex items-center justify-between"},ee={class:"flex items-center"};e("default",h({__name:"index",props:{compData:{default:function(){return{}}}},setup:function(e,h){var ne=h.expose,te=M().saveFileEvent,re=o().plugin,ae=H().siteInfo,oe=w(),ue=w(""),ie=w([]),le=w("");w([]);var ce,se=w(!1),fe=w(""),de=w(""),pe=w([]),me=w(""),ve=w(!1),ye=[{content:"请选择您的应用，若设置伪静态后，网站无法正常访问，请尝试设置回default"},{content:"您可以对伪静态规则进行修改，修改完后保存即可。"}],be=w([]),ge=w(!1),he=function(){var e=c(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,i({loading:ge,request:$({id:ae.value.id}),data:{dirs:[Array,ie],binding:[Array,be]}});case 1:le.value=ie.value[0]||"";case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=c(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:if(le.value&&ue.value){e.n=1;break}return l.error("域名和子目录都不可为空！"),e.a(2);case 1:return e.n=2,i({loading:"正在添加子目录中,清稍后...",request:z({id:ae.value.id,domain:ue.value,dirName:le.value}),message:!0});case 2:e.v.status&&(ue.value="",he());case 3:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),je=function(){var e=c(u().m(function e(n){return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y({title:"删除【".concat(n.domain,"】"),content:"删除选中的子目录绑定后，将无法访问该子目录绑定的域名，是否继续操作？",icon:"warning-filled"});case 1:return e.n=2,i({loading:"正在删除，请稍后...",request:Q({id:n.id}),message:!0});case 2:e.v.status&&he();case 3:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),Oe=function(){var e=c(u().m(function e(){return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,te({data:fe.value,encoding:"utf-8",path:me.value});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=c(u().m(function e(n){var t,r,o,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=l.load("正在获取伪静态内容，请稍候..."),r={id:n.id},n.add&&(r.add=1),e.p=1,e.n=2,L(r);case 2:if(o=e.v,t.close(),o.data.status){e.n=4;break}return e.n=3,y({title:"创建伪静态",icon:"warning-filled",content:"你真的要为这个子目录创建独立的伪静态规则吗？"});case 3:xe(a(a({},n),{},{add:1})),e.n=5;break;case 4:fe.value=o.data.data,pe.value=o.data.rlist,de.value=o.data.rlist[0],me.value=o.data.filename,se.value=!0;case 5:e.n=7;break;case 6:e.p=6,i=e.v,b(i);case 7:return e.p=7,t.close(),e.f(7);case 8:return e.a(2)}},e,null,[[1,6,7,8]])}));return function(n){return e.apply(this,arguments)}}(),Se=function(){var e=c(u().m(function e(n){return u().w(function(e){for(;;)switch(e.n){case 0:i({loading:ve,request:J({path:"/www/server/panel/rewrite/".concat(re.value.webserver,"/").concat(n,".conf")}),data:{data:[String,fe]}});case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),_e=w([q(),{prop:"domain",label:"域名",render:function(e){return j("span",{class:"cursor-pointer bt-link",onClick:function(){window.open("http://".concat(e.domain,":").concat(e.port),"_blank","noopener,noreferrer")}},[e.domain])}},{prop:"port",label:"端口"},{width:220,label:"子目录",render:function(e){return j("span",null,[e.path])}},N([{onClick:xe,title:"伪静态",width:60},{onClick:je,title:"删除"}])]),ke=[{label:"删除",value:"delete",event:(ce=c(u().m(function e(n,t,r,a,o){var i,l,c,s;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y({title:"批量删除",width:"35rem",icon:"warning-filled",content:"批量删除，该操作可能会存在风险，是否继续？"});case 1:return i=[r.value.map(function(e){return e.id})],e.n=2,K({bind_ids:i,id:ae.value.id});case 2:return l=e.v,c=l.data,s=[],e.n=3,c.success.forEach(function(e){s.push({name:e,msg:"删除成功",status:!0})});case 3:return e.n=4,Object.keys(c.error).forEach(function(e){s.push({name:e,msg:c.data.error[e],status:!1})});case 4:return e.n=5,R({resultData:s,resultTitle:"删除",resultColumn:[{label:"域名",prop:"name"},{label:"结果",render:function(e){return G("span",{class:e.status?"text-primary":"text-danger"},e.status?e.msg||"操作成功":e.msg||"操作失败")}}]});case 5:he(),o();case 6:return e.a(2)}},e)})),function(e,n,t,r,a){return ce.apply(this,arguments)})}];return O(he),ne({init:he}),function(e,a){var o=s,u=I,i=B,l=F,c=f,y=d,b=p,h=g,w=m,O=v,G=r,q=x("bt-loading");return S(),_("div",null,[k("div",t,[k("div",W,[a[5]||(a[5]=k("span",{class:"mr-[16px] w-[4rem]"},"域名",-1)),j(o,{modelValue:P(ue),"onUpdate:modelValue":a[0]||(a[0]=function(e){return V(ue)?ue.value=e:null}),placeholder:"请输入域名"},null,8,["modelValue"])]),k("div",X,[a[6]||(a[6]=k("span",{class:"mr-[16px]"},"子目录",-1)),j(i,{class:"!w-[15rem]",filterable:"",modelValue:P(le),"onUpdate:modelValue":a[1]||(a[1]=function(e){return V(le)?le.value=e:null})},{default:D(function(){return[(S(!0),_(A,null,E(P(ie),function(e,n){return S(),U(u,{key:n,value:e,label:e},null,8,["value","label"])}),128))]}),_:1},8,["modelValue"])]),j(l,{type:"primary",onClick:we},{default:D(function(){return n(a[7]||(a[7]=[T("添加",-1)]))}),_:1})]),j(G,null,{"header-left":D(function(){return n(a[8]||(a[8]=[]))}),"header-right":D(function(){return n(a[9]||(a[9]=[]))}),content:D(function(){return[C(j(c,{ref_key:"subTableRef",ref:oe,"max-height":"500",column:P(_e),data:P(be)},null,8,["column","data"]),[[q,P(ge)]])]}),"footer-left":D(function(){return[j(y,{"table-ref":P(oe),options:P(ke)},null,8,["table-ref","options"])]}),"footer-right":D(function(){return n(a[10]||(a[10]=[]))}),popup:D(function(){return[j(O,{title:"伪静态规则",modelValue:P(se),"onUpdate:modelValue":a[4]||(a[4]=function(e){return V(se)?se.value=e:null}),area:50},{default:D(function(){return[k("div",Y,[k("div",Z,[j(i,{class:"!w-[15rem]",modelValue:P(de),"onUpdate:modelValue":a[2]||(a[2]=function(e){return V(de)?de.value=e:null}),onChange:Se},{default:D(function(){return[(S(!0),_(A,null,E(P(pe),function(e,n){return S(),U(u,{key:n,value:e,label:e},null,8,["value","label"])}),128))]}),_:1},8,["modelValue"]),k("span",ee,[a[12]||(a[12]=T(" 规则转换工具： ",-1)),j(b,{class:"flex items-center",href:"https://www.bt.cn/Tools",target:"_blank"},{default:D(function(){return n(a[11]||(a[11]=[T("Apache转Nginx ",-1),k("i",{class:"svgtofont-el-link"},null,-1)]))}),_:1})])]),C(j(h,{id:"statictRef",class:"!h-[40rem] !w-full my-[12px]",modelValue:P(fe),"onUpdate:modelValue":a[3]||(a[3]=function(e){return V(fe)?fe.value=e:null}),onSave:Oe},null,8,["modelValue"]),[[q,P(ve)]]),k("div",null,[j(l,{type:"primary",onClick:Oe},{default:D(function(){return n(a[13]||(a[13]=[T("保存",-1)]))}),_:1})]),j(w,{options:ye,class:"ml-[20px] mt-[20px]"})])]}),_:1},8,["modelValue"])]}),_:1})])}}}))}}})}();
