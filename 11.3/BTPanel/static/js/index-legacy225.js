!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function u(t,a,o,i){var u=a&&a.prototype instanceof l?a:l,s=Object.create(u.prototype);return e(s,"_invoke",function(t,e,a){var o,i,u,l=0,s=a||[],f=!1,p={p:0,n:0,v:n,a:d,f:d.bind(n,4),d:function(t,e){return o=t,i=0,u=n,p.n=e,c}};function d(t,e){for(i=t,u=e,r=0;!f&&l&&!a&&r<s.length;r++){var a,o=s[r],d=p.p,v=o[2];t>3?(a=v===e)&&(u=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=n):o[0]<=d&&((a=t<2&&d<o[1])?(i=0,p.v=e,p.n=o[1]):d<v&&(a=t<3||o[0]>e||e>v)&&(o[4]=t,o[5]=e,p.n=v,i=0))}if(a||t>1)return c;throw f=!0,e}return function(a,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,v),i=s,u=v;(r=i<2?n:u)||!f;){o||(i?i<3?(i>1&&(p.n=-1),d(i,u)):p.n=u:p.v=u);try{if(l=2,o){if(i||(a="next"),r=o[a]){if(!(r=r.call(o,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,i<2&&(i=0)}else 1===i&&(r=o.return)&&r.call(o),i<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=n}else if((r=(f=p.n<0)?u:t.call(e,p))!==c)break}catch(r){o=n,i=1,u=r}finally{l=1}}return{value:r,done:f}}}(t,o,i),!0),s}var c={};function l(){}function s(){}function f(){}r=Object.getPrototypeOf;var p=[][o]?r(r([][o]())):(e(r={},o,function(){return this}),r),d=f.prototype=l.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=f,e(d,"constructor",f),e(f,"constructor",s),s.displayName="GeneratorFunction",e(f,i,"GeneratorFunction"),e(d),e(d,i,"Generator"),e(d,o,function(){return this}),e(d,"toString",function(){return"[object Generator]"}),(t=function(){return{w:u,m:v}})()}function e(t,n,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}e=function(t,n,r,a){function i(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?o?o(t,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[n]=r:(i("next",0),i("throw",1),i("return",2))},e(t,n,r,a)}function n(t,e,n,r,a,o,i){try{var u=t[o](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function r(t){return function(){var e=this,r=arguments;return new Promise(function(a,o){var i=t.apply(e,r);function u(t){n(i,a,o,u,c,"next",t)}function c(t){n(i,a,o,u,c,"throw",t)}u(void 0)})}}System.register(["./index-legacy109.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./database-legacy.js?v=1763689792","./useMethod-legacy4.js?v=1763689792","./useStore-legacy2.js?v=1763689792","./validator-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(e,n){"use strict";var a,o,i,u,c,l,s,f,p,d,v,y,g,h,m,b,w,x,j,_,O,S,D,q,T,k,M,G,P,E,J,N,A,C;return{setters:[function(t){a=t._},function(t){o=t.u,i=t.p,u=t.M,c=t.Q,l=t.l,s=t.x},function(t){f=t.c,p=t.r,d=t.W,v=t.aB,y=t.o,g=t.v,h=t.I,m=t.x,b=t.y,w=t.e,x=t.z,j=t.C,_=t.J,O=t.G,S=t.A,D=t.aZ,q=t.aE},function(t){T=t.batchDelMysqlData,k=t.deleteDatabase,M=t.checkDelData,G=t.checkModulesDelData,P=t.getMysqlCloudServer,E=t.getModulesCloudServer},function(t){J=t.x},function(t){N=t.g},function(t){A=t.h,C=t.i},null,null,null,null],execute:function(){var n={class:"p-[28px]"},F={key:0,class:"text-danger"},H={key:1,class:"text-danger mt-[4px]"};e("default",f({__name:"index",props:{compData:{default:function(){return{ids:[],isMult:!1,rows:[],config:{enable:!1,exclude:[]}}}}},setup:function(e,f){var R,z=f.expose,B=e,I=N(),L=I.refs.tabActive,Q=I.refreshTableList,W=o().panel,Z=null===(R=B.compData)||void 0===R?void 0:R.config,K=Z.enable,U=Z.exclude,V=B.compData,X=V.ids,Y=V.isMult,$=p(!1),tt=d([]),et=p(W.value.isDbRecycle),nt=d([]),rt=d(!1),at=v("popupSetFooter"),ot=y({title:"警告",titleType:"warning",description:"删除数据库后，数据库内的所有数据将被清空，且不可恢复。"}),it=function(){var e=r(t().m(function e(n){var r,a,o,c,l,s;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,i({type:"input",title:"二次验证信息-删除数据库",content:'移至回收站的数据库如需彻底删除请前往数据库回收站，<span class="text-danger">远程数据库将直接彻底删除</span>，是否继续操作？',icon:"warning-filled",isHtml:!0,input:{content:"删除数据库"}});case 1:if(r=[],a=u.load("正在删除..."),!Y||"mysql"!==L.value){t.n=3;break}return o=A(B.compData.rows,U,K),t.n=2,T(o);case 2:c=t.v,l=C(c.data),s=l.data,J(s,{title:"删除"}),Q(),t.n=4;break;case 3:return t.n=4,ut(r,0,Y);case 4:a.close(),n();case 5:return t.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=r(t().m(function e(n,r,a){var o,i,l,s,f;return t().w(function(t){for(;;)switch(t.n){case 0:return o=nt.value[r],i=o.id,l=o.name,s="mysql"===L.value?null:L.value,t.n=1,c({request:k({id:i,name:l},s)});case 1:f=t.v,n.push({id:i,name:l,status:f.status}),r===nt.value.length-1&&(Q(),a?J(n,{title:"删除数据库"}):u.request(f)),r<nt.value.length-1&&ut(n,r+1,a);case 2:return t.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),ct=function(){var e=r(t().m(function e(){var n,r;return t().w(function(t){for(;;)switch(t.n){case 0:return at(!1),t.n=1,c({loading:rt,request:"mysql"===L.value?M({ids:JSON.stringify(X)}):G({data:JSON.stringify({ids:JSON.stringify(X)})},L.value),data:{data:[Array,nt]}});case 1:n=t.v,r=n.data,$.value=null==r?void 0:r.some(function(t){return t.sid}),$.value&&(ot.titleType="error",ot.description="当前列表存在彻底删除后无法恢复的数据库，请仔细查看列表，以防误删，是否继续操作？"),at(!0);case 2:return t.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),lt=function(){var e=r(t().m(function e(){var n;return t().w(function(t){for(;;)switch(t.n){case 0:return n={data:JSON.stringify({type:L.value})},t.n=1,c({request:"mysql"===L.value?P():E(n,L.value),data:[Array,tt]});case 1:return t.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),st=[{label:"数据库名称",prop:"name"},{label:"数据库大小",prop:"total",render:function(t){return q("span",s(t.total,!0,2))}},{label:"数据库位置",render:function(t){var e,n="本地数据库";return null===(e=tt.value)||void 0===e||e.forEach(function(e){e.id===t.sid&&(n="mysql"===L.value?e.db_host:e.ps,"127.0.0.1"===e.db_host&&(n="本地数据库"))}),q("span",n)}},{width:160,label:"创建时间",prop:"addtime"},{width:100,label:"删除结果",render:function(t){var e=0===t.sid;return e&&et.value?q("span","移至回收站"):q("span",{class:"text-danger"},"彻底删除")}}];return g(function(){lt(),ct()}),z({onConfirm:it}),function(t,e){var r=D,o=l,i=a,u=h("bt-loading");return m(),b("div",n,[w(r,{title:"警告",type:x(ot).titleType,"show-icon":"",closable:!1,description:x(ot).description},null,8,["type","description"]),w(i,null,{content:j(function(){return[_(w(o,{ref:"deleteRef",data:x(nt),column:x(st),"max-height":300},null,8,["data","column"]),[[u,x(rt)],[u,"正在检查删除数据，请稍候...","title"]])]}),_:1}),x($)?(m(),b("p",F,"注意：远程数据库暂不支持数据库回收站，选中的数据库将彻底删除")):O("",!0),e[0]||(e[0]=S("p",{class:"text-danger mt-4px"},"请仔细阅读以上要删除信息，防止数据库被误删",-1)),x(et)||x($)?O("",!0):(m(),b("p",H,"当前数据库回收站尚未开启,请谨慎操作!"))])}}}))}}})}();
