!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var a,n,r="function"==typeof Symbol?Symbol:{},s=r.iterator||"@@iterator",l=r.toStringTag||"@@toStringTag";function u(e,r,s,l){var u=r&&r.prototype instanceof i?r:i,c=Object.create(u.prototype);return t(c,"_invoke",function(e,t,r){var s,l,u,i=0,c=r||[],d=!1,m={p:0,n:0,v:a,a:p,f:p.bind(a,4),d:function(e,t){return s=e,l=0,u=a,m.n=t,o}};function p(e,t){for(l=e,u=t,n=0;!d&&i&&!r&&n<c.length;n++){var r,s=c[n],p=m.p,v=s[2];e>3?(r=v===t)&&(u=s[(l=s[4])?5:(l=3,3)],s[4]=s[5]=a):s[0]<=p&&((r=e<2&&p<s[1])?(l=0,m.v=t,m.n=s[1]):p<v&&(r=e<3||s[0]>t||t>v)&&(s[4]=e,s[5]=t,m.n=v,l=0))}if(r||e>1)return o;throw d=!0,t}return function(r,c,v){if(i>1)throw TypeError("Generator is already running");for(d&&1===c&&p(c,v),l=c,u=v;(n=l<2?a:u)||!d;){s||(l?l<3?(l>1&&(m.n=-1),p(l,u)):m.n=u:m.v=u);try{if(i=2,s){if(l||(r="next"),n=s[r]){if(!(n=n.call(s,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,l<2&&(l=0)}else 1===l&&(n=s.return)&&n.call(s),l<2&&(u=TypeError("The iterator does not provide a '"+r+"' method"),l=1);s=a}else if((n=(d=m.n<0)?u:e.call(t,m))!==o)break}catch(n){s=a,l=1,u=n}finally{i=1}}return{value:n,done:d}}}(e,s,l),!0),c}var o={};function i(){}function c(){}function d(){}n=Object.getPrototypeOf;var m=[][s]?n(n([][s]())):(t(n={},s,function(){return this}),n),p=d.prototype=i.prototype=Object.create(m);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,l,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=d,t(p,"constructor",d),t(d,"constructor",c),c.displayName="GeneratorFunction",t(d,l,"GeneratorFunction"),t(p),t(p,l,"Generator"),t(p,s,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:u,m:v}})()}function t(e,a,n,r){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}t=function(e,a,n,r){function l(a,n){t(e,a,function(e){return this._invoke(a,n,e)})}a?s?s(e,a,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[a]=n:(l("next",0),l("throw",1),l("return",2))},t(e,a,n,r)}function a(e,t,a,n,r,s,l){try{var u=e[s](l),o=u.value}catch(e){return void a(e)}u.done?t(o):Promise.resolve(o).then(n,r)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var l=e.apply(t,n);function u(e){a(l,r,s,u,o,"next",e)}function o(e){a(l,r,s,u,o,"throw",e)}u(void 0)})}}System.register(["./index-legacy124.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./control-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(t,a){"use strict";var r,s,l,u,o,i,c,d,m,p,v,f,y,h,b,_,g,w,x,k,S,T,O,j,D,M,P,C,V,q,G,L,A,F,E,H,I,R,N;return{setters:[function(e){r=e._},function(e){s=e.j,l=e.r,u=e.o,o=e.e,i=e.c,c=e.s,d=e.v,m=e.a8,p=e.x,v=e.y,f=e.J,y=e.K,h=e.z,b=e.A,_=e.R,g=e.F,w=e.S,x=e.M,k=e.B,S=e.b1,T=e.D,O=e.O,j=e.ap,D=e.G,M=e.C,P=e.aA,C=e.ay},function(e){V=e.V,q=e.Q,G=e.p,L=e.u,A=e.ax,F=e.l,E=e._},function(e){H=e.e,I=e.f,R=e.s,N=e.g},null,null,null,null,null],execute:function(){var a=s("CONTROL-STORE",function(){var t=l("monitor"),a=u({title:"日报-功能介绍",ps:"能够对服务器运行情况进行监测，分析服务器异常的信息进行行为记录，协助管理员进行服务器分析。",source:211,desc:["服务器运行情况监测","异常信息记录","服务器分析"],tabImgs:[{title:"概览",imgSrc:"https://www.bt.cn/Public/new/plugin/introduce/control/daily.png"}]}),r=l(!1),s=l([]),i=l(""),c=l(),d=l(""),m=l(),p=l(),v=l([]),f=l([]),y=l([]),h=function(){var t=n(e().m(function t(a){var n,r,l,u,o;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,q({request:H({date:a})});case 1:r=e.v,l=r.data,c.value=l.evaluate,"正常"===l.evaluate?d.value="var(--el-color-primary)":"良好"===l.evaluate?d.value="#2034a5":d.value="#ffa700",u=l.date.toString(),m.value=u.substr(0,4)+"-"+u.substr(4,2)+"-"+u.substr(6,2)+" 00:00:00 - 23:59:59",p.value=l.summary,s.value=[{name:"资源",value:"过载次数(五分钟内平均使用率超过80%)"},{name:"CPU",is_status:!0,data:l.data.cpu},{name:"内存",is_status:!0,data:l.data.ram},{name:"磁盘",is_status:!0,data:l.data.disk},{name:"常用服务",value:"异常次数(服务出现停止运行的次数)"},{name:"Nginx",is_status:!0,data:l.data.server.nginx},{name:"Mysql",is_status:!0,data:l.data.server.mysql},{name:"Apache",is_status:!0,data:l.data.server.apache},{name:"PHP",is_status:!0,data:l.data.server.php},{name:"Ftpd",is_status:!0,data:l.data.server.ftpd},{name:"Redis",is_status:!0,data:l.data.server.redis},{name:"Tomcat",is_status:!0,data:l.data.server.tomcat},{name:"Memcached",is_status:!0,data:l.data.server.memcached},{name:"备份类型",value:"备份失败",excess:"未开启备份",is_excess:!0},{name:"数据库",is_status:!0,data:l.data.backup.database.backup,data_excess:l.data.backup.database.no_backup,have_data_excess:!0},{name:"网站",is_status:!0,data:l.data.backup.site.backup,data_excess:l.data.backup.site.no_backup,have_data_excess:!0},{name:"异常类型",value:"次数"},{name:"面板异常登录",is_status:!0,data:l.data.exception.panel},{name:"SSH异常登录",is_status:!0,data:l.data.exception.ssh},{name:"安全",value:"次数"},{name:"安全风险",is_status:!0,data:l.data.safe.home_risks},{name:"网站漏洞扫描",is_status:!0,data:l.data.safe.vulnerabilities},{name:"恶意文件检测",is_status:!0,data:l.data.safe.malware}],null!==(n=l.data.disk)&&void 0!==n&&n.app_data&&(o=b(l.data.disk.app_data),s.value.push({name:"空间存储状态",is_status:!0,data:o}));case 2:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),b=function(e){var t=[],a={sites:"站点",databases:"数据库",plugins:"面板插件",logs:"日志",backup:"备份"};return Object.keys(a).forEach(function(n){t.push({name:"".concat(a[n]),value:e[n]})}),t},_=function(){var t=n(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,q({request:I(),data:Array,success:function(e){var t={"正常":"success","良好":"warning","异常":"error"};v.value=null==e?void 0:e.map(function(e){return{label:e.time_key.toString().substr(0,4)+"-"+e.time_key.toString().substr(4,2)+"-"+e.time_key.toString().substr(6,2),value:e.time_key,isStatus:t[e.evaluate]||"error"}}).reverse(),i.value=v.value.length?v.value[0].value:"",i.value&&h(i.value)}});case 1:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),g=function(){var t=n(e().m(function t(a){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,G({title:"日报",content:"您确定要".concat(a?"开启":"关闭","日报功能吗？")});case 1:return t.n=2,q({request:R({status:a?"start":"stop"}),message:!0,success:function(){var t=n(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,w();case 1:r.value&&_();case 2:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),w=function(){var t=n(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,q({request:N(),data:[Boolean,r]});case 1:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();return{tabActive:t,$reset:function(){f.value=[],y.value=[],v.value=[],s.value=[]},selectData:v,dataList:y,tableList:s,selectValue:i,topStatus:c,topStatusColor:d,watchTime:m,summary:p,tableColumn:f,productData:a,dailyValue:r,getDailyStatus:w,changeDailyStatus:g,getPanelDailyInfoLists:_,getPanelDailyDatas:h,filterType:function(e){var t;return["数据库","网站","空间存储状态","安全风险","网站漏洞扫描","恶意文件检测"].includes(e.name)?"空间存储状态"===e.name||"数据库"===e.name||"网站"===e.name?e.data.length>0:(null===(t=e.data.detail)||void 0===t||null===(t=t.items)||void 0===t?void 0:t.length)>0:e.data.detail.length>0},goDetail:function(e,t){var a={1:"低危",2:"中危",3:"高危",4:"严重"};"数据库"==t||"网站"==t?e[0].target?f.value=[{label:"名称",showOverflowTooltip:!0,prop:"name"},{label:"时间",render:function(e,t){return V(e.time,"yyyy-MM-dd hh:mm:ss")}}]:f.value=[{label:"名称",showOverflowTooltip:!0,prop:"name"}]:"面板异常登录"==t||"SSH异常登录"==t?f.value=[{label:"时间",showOverflowTooltip:!0,render:function(e){return V(e.time,"yyyy-MM-dd hh:mm:ss")}},{label:"用户",prop:"username"},{label:"详情",prop:"desc"}]:"空间存储状态"==t?f.value=[{label:"名称",width:130,prop:"name"},{label:"占用空间",prop:"value"}]:"磁盘"==t?f.value=[{label:"路径",showOverflowTooltip:!0,prop:"name"},{label:"占用",render:function(e){return e.percent+"%"}}]:"CPU"==t||"内存"==t?f.value=[{label:"过载时间",width:100,render:function(e){return o("span",null,[V(e.time,"yyyy-MM-dd hh:mm:ss")])}},{label:"PID",prop:"pid",width:60},{label:"进程",prop:"name",showOverflowTooltip:!0},{label:"占用",width:60,render:function(e){return e.percent+"%"}}]:["Nginx","Mysql","Apache","PHP","Ftpd","Redis","Tomcat","Memcached"].includes(t)?f.value=[{label:"停止时间",render:function(e){return V(e.time,"yyyy-MM-dd hh:mm:ss")}}]:"安全风险"==t?f.value=[{label:"名称",prop:"title"},{label:"时间",render:function(e){return V(e.check_time,"yyyy-MM-dd hh:mm:ss")},width:"140"},{label:"风险级别",render:function(e){return a[e.level]},width:"80"}]:"网站漏洞扫描"==t?f.value=[{label:"名称",prop:"risk_desc"},{label:"站点名称",prop:"site_name",showOverflowTooltip:!0,width:"100"},{label:"风险级别",render:function(e){return a[e.risk_level]},width:"80"}]:"恶意文件检测"===t&&(f.value=[{label:"威胁类型",prop:"threat_type"},{label:"文件路径",prop:"filepath",showOverflowTooltip:!0},{label:"风险级别",render:function(e){return a[e.risk_level]}},{label:"是否隔离",prop:"quarantined",render:function(e){return e.quarantined?"是":"否"}}]),y.value="数据库"==t||"网站"==t||"空间存储状态"==t?e:"安全风险"===t||"网站漏洞扫描"==t||"恶意文件检测"===t?e.detail.items:e.detail,f.value.unshift({width:40,type:"index"})}}}),U={class:"content_box module-ui"},z={class:"relative"},B={class:"monitor mb-1rem"},$={class:"box-select"},J={class:"box-body"},K={class:"body_top"},Q={class:"watch_time"},W={class:"msg_box"},X={class:"w-[95rem] mt-[2rem]"},Y={class:"item_name"},Z={key:0,class:"!py-[0.8rem] pl-[0.8rem] inline-block border border-light border-t-0 w-full"},ee=["onMouseover"],te={key:2,class:"item_excess"},ae={key:3,class:"item_excess"},ne=["onMouseover"],re=i({__name:"index",setup:function(t){var s=L().payment,l=a(),u=c(l),i=u.selectData,V=u.dataList,q=u.tableList,G=u.selectValue,E=u.topStatus,H=u.topStatusColor,I=u.watchTime,R=u.summary,N=u.tableColumn,re=u.productData,se=u.dailyValue;return d(n(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,l.getDailyStatus();case 1:se.value&&l.getPanelDailyInfoLists();case 2:return e.a(2)}},t)}))),m(l.$reset),function(e,t){var a=j,n=A,u=F,c=P,d=C,m=r;return p(),v("div",U,[f(b("div",z,[b("div",B,[t[3]||(t[3]=b("span",{class:"mr-8px align-middle"},"开启日报",-1)),o(a,{modelValue:h(se),"onUpdate:modelValue":t[0]||(t[0]=function(e){return _(se)?se.value=e:null}),onChange:h(l).changeDailyStatus},null,8,["modelValue","onChange"])]),h(i).length?(p(),v(g,{key:0},[b("div",$,[t[4]||(t[4]=b("span",null,"选择日期：",-1)),o(n,{modelValue:h(G),"onUpdate:modelValue":t[1]||(t[1]=function(e){return _(G)?G.value=e:null}),onClick:t[2]||(t[2]=w(function(){},["stop"])),options:h(i),class:"!w-[12.02rem]",onChange:h(l).getPanelDailyDatas},null,8,["modelValue","options","onChange"])]),b("div",J,[b("div",K,[b("span",{class:"top_status",style:x({color:h(H)})},k(h(E)),5),b("span",Q,"监测时间："+k(h(I)),1),t[5]||(t[5]=b("span",{class:"text-left mb-[1.6rem]"},"健康信息提醒：",-1)),b("div",W,[(p(!0),v(g,null,S(h(R),function(e,t){return p(),v("span",{key:t},"●"+k(e),1)}),128))])]),b("div",X,[(p(!0),v(g,null,S(h(q),function(e,t){return p(),v("div",{class:"bottom_item",key:t},[b("div",Y,[e.is_status?(p(),v("span",{key:0,class:"mr-[.5rem]",style:x({background:"空间存储状态"==e.name?"var(--el-color-primary)":"数据库"==e.name||"网站"==e.name?0==e.data.length&&0==e.data_excess.length?"var(--el-color-primary)":"red":0==e.data.ex?"var(--el-color-primary)":"red"})},null,4)):D("",!0),T(k(e.name),1)]),e.is_status?(p(),v("div",{key:0,class:"item_value",style:x({width:e.have_data_excess?"24rem":"auto"})},["空间存储状态"!==e.name?(p(),v(g,{key:0},[T(k("数据库"==e.name||"网站"==e.name?0==e.data.length?"未监测到异常":e.data.length+"次":0==e.data.ex?"未监测到异常":e.data.ex+"次"),1)],64)):D("",!0),h(l).filterType(e)?(p(),O(c,{key:1,width:"420",placement:"bottom",trigger:"hover","popper-class":"max_over"},{reference:M(function(){return[b("span",{class:"bt-link",onMouseover:function(t){return h(l).goDetail(e.data,e.name)}},"  查看详情",40,ee)]}),default:M(function(){var t,a;return[o(u,{ref_for:!0,ref:"menuTable1","max-height":300,data:h(V),column:h(N)},null,8,["data","column"]),null!==(t=e.data.detail)&&void 0!==t&&t.check_time?(p(),v("span",Z,"检查时间："+k(null===(a=e.data.detail)||void 0===a?void 0:a.check_time),1)):D("",!0)]}),_:2},1024)):D("",!0)],4)):(p(),v("div",{key:1,class:"item_value",style:x({width:e.is_excess?"24rem":"auto"})},k(e.value),5)),e.is_excess?(p(),v("div",te,k(e.excess),1)):D("",!0),e.is_status&&e.data_excess?(p(),v("div",ae,[T(k(e.have_data_excess&&e.data_excess.length?e.data_excess.length+"次":"未监测到异常")+" ",1),e.have_data_excess&&e.data_excess.length?(p(),O(c,{key:0,width:"350",placement:"bottom",trigger:"hover","popper-class":"max_over"},{reference:M(function(){return[b("span",{class:"bt-link",onMouseover:function(t){return h(l).goDetail(e.data_excess,e.name)}},"  查看详情",40,ne)]}),default:M(function(){return[o(u,{ref_for:!0,ref:"menuTable2","max-height":300,data:h(V),column:h(N)},null,8,["data","column"])]}),_:2},1024)):D("",!0)])):D("",!0)])}),128)),t[6]||(t[6]=b("span",{class:"bottom_tips"},[T("更多安全风险详情请到【首页-安全风险】中进行查看 "),b("br"),T("在系统监控开启的情况下，日报会记录服务器每天运行的异常信息，协助管理员分析服务器前一天是否运行正常。")],-1))])])],64)):(p(),O(d,{key:1,"image-size":200,description:"面板日报暂无数据"}))],512),[[y,"ltd"===h(s).authType]]),f(o(m,{data:h(re),class:"px-[20%] my-[8rem]"},null,8,["data"]),[[y,"ltd"!==h(s).authType]])])}}});t("default",E(re,[["__scopeId","data-v-f3150210"]]))}}})}();
