!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,l="function"==typeof Symbol?Symbol:{},a=l.iterator||"@@iterator",o=l.toStringTag||"@@toStringTag";function u(e,l,a,o){var u=l&&l.prototype instanceof c?l:c,s=Object.create(u.prototype);return n(s,"_invoke",function(e,n,l){var a,o,u,c=0,s=l||[],f=!1,p={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return a=e,o=0,u=t,p.n=n,i}};function m(e,n){for(o=e,u=n,r=0;!f&&c&&!l&&r<s.length;r++){var l,a=s[r],m=p.p,d=a[2];e>3?(l=d===n)&&(u=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=t):a[0]<=m&&((l=e<2&&m<a[1])?(o=0,p.v=n,p.n=a[1]):m<d&&(l=e<3||a[0]>n||n>d)&&(a[4]=e,a[5]=n,p.n=d,o=0))}if(l||e>1)return i;throw f=!0,n}return function(l,s,d){if(c>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,d),o=s,u=d;(r=o<2?t:u)||!f;){a||(o?o<3?(o>1&&(p.n=-1),m(o,u)):p.n=u:p.v=u);try{if(c=2,a){if(o||(l="next"),r=a[l]){if(!(r=r.call(a,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,o<2&&(o=0)}else 1===o&&(r=a.return)&&r.call(a),o<2&&(u=TypeError("The iterator does not provide a '"+l+"' method"),o=1);a=t}else if((r=(f=p.n<0)?u:e.call(n,p))!==i)break}catch(r){a=t,o=1,u=r}finally{c=1}}return{value:r,done:f}}}(e,a,o),!0),s}var i={};function c(){}function s(){}function f(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(n(r={},a,function(){return this}),r),m=f.prototype=c.prototype=Object.create(p);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,n(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,n(m,"constructor",f),n(f,"constructor",s),s.displayName="GeneratorFunction",n(f,o,"GeneratorFunction"),n(m),n(m,o,"Generator"),n(m,a,function(){return this}),n(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:u,m:d}})()}function n(e,t,r,l){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}n=function(e,t,r,l){function o(t,r){n(e,t,function(e){return this._invoke(t,r,e)})}t?a?a(e,t,{value:r,enumerable:!l,configurable:!l,writable:!l}):e[t]=r:(o("next",0),o("throw",1),o("return",2))},n(e,t,r,l)}function t(e,n,t,r,l,a,o){try{var u=e[a](o),i=u.value}catch(e){return void t(e)}u.done?n(i):Promise.resolve(i).then(r,l)}function r(e){return function(){var n=this,r=arguments;return new Promise(function(l,a){var o=e.apply(n,r);function u(e){t(o,l,a,u,i,"next",e)}function i(e){t(o,l,a,u,i,"throw",e)}u(void 0)})}}function l(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return a(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy437.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792"],function(n,t){"use strict";var a,o,u,i,c,s,f,p,m,d,b,y,v,h,w,_,g,k,x,C,S,P,j,V,$,T,A,U,O,q,N,H,G,z;return{setters:[function(e){a=e._,o=e.iG,u=e.e,i=e.b,c=e.iH,s=e.f},function(e){f=e.x,p=e.y,m=e.A,d=e.N,b=e.e,y=e.C,v=e.D,h=e.H,w=e.c,_=e.o,g=e.O,k=e.z,x=e.B,C=e.U,S=e.ad,P=e.ab,j=e.bp,V=e.I,$=e.J,T=e.r,A=e.v,U=e.G,O=e.K,q=e.aY,N=e.aA,H=e.bY,G=e.t},function(e){z=e._},null],execute:function(){var t={class:"bt-msg-config"},M={class:"p-4rem"},I={class:"from"},L={class:"mt-2rem ml-2rem"},R={class:"el-dialog__footer flex justify-end"},E={class:"footer"};var D=a({},[["render",function(e,n){var r=h;return f(),p("div",t,[m("div",M,[m("div",I,[d(e.$slots,"from")]),m("div",L,[d(e.$slots,"tip")])]),m("div",null,[m("div",R,[m("div",E,[b(r,{type:"warning",onClick:n[0]||(n[0]=function(n){return e.$emit("close")})},{default:y(function(){return l(n[2]||(n[2]=[v("取消",-1)]))}),_:1}),b(r,{type:"primary",onClick:n[1]||(n[1]=function(n){return e.$emit("save")})},{default:y(function(){return l(n[3]||(n[3]=[v("保存",-1)]))}),_:1})])])])])}]]),F={style:{"list-style":"disc"}},Y=w({__name:"robot-base",props:["tipName","tipUrl","placeholder","type"],setup:function(n){var t=n,l=j().proxy,a=_({name:"",url:""}),c=i(),s=c.load,p=c.request,d=function(){var n=r(e().m(function n(){var r,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,r=s("正在设置".concat(t.type,"信息配置，请稍后...")),e.n=1,o(t.type,{title:a.name,url:a.url,atall:"True"});case 1:u=e.v,p(u),l.$emit("callback"),l.$emit("close"),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,r&&r.close(),e.f(3);case 4:return e.a(2)}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}();return function(e,t){var r=C,l=S,o=P,i=u;return f(),g(D,{onSave:d,onClose:t[2]||(t[2]=function(n){return e.$emit("close")})},{from:y(function(){return[b(o,null,{default:y(function(){return[b(l,{label:"名称"},{default:y(function(){return[b(r,{modelValue:k(a).name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return k(a).name=e}),autofocus:"",placeholder:"机器人名称或备注"},null,8,["modelValue"])]}),_:1}),b(l,{label:"URL"},{default:y(function(){return[b(r,{modelValue:k(a).url,"onUpdate:modelValue":t[1]||(t[1]=function(e){return k(a).url=e}),class:"url",type:"textarea",rows:4,placeholder:"请输入".concat(n.placeholder,"机器人URL")},null,8,["modelValue","placeholder"])]}),_:1})]}),_:1})]}),tip:y(function(){return[m("ul",F,[m("li",null,[b(i,{href:n.tipUrl},{default:y(function(){return[v("如何创建"+x(n.tipName)+"机器人",1)]}),_:1},8,["href"])])])]}),_:1})}}}),B=a(Y,[["__scopeId","data-v-b07059b7"]]),J={style:{"list-style":"disc"}},K=w({__name:"mail",setup:function(n){var t=j().proxy,a=_({emailName:"",emailPass:"",emailHost:"",emailPort:"465"}),c=i(),s=c.load,p=c.request,d={emailName:[{required:!0,message:"请输入发送人邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],emailPass:[{required:!0,message:"请输入SMTP密码",trigger:"blur"}],emailHost:[{required:!0,message:"请输入SMTP服务器",trigger:"blur"}],emailPort:[{required:!0,message:"请输入端口",trigger:"blur"}]},h=function(){t.$refs.emailRef.validate(function(){var n=r(e().m(function n(r){var l,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!r){e.n=5;break}return e.p=1,l=s("正在设置邮件信息配置，请稍后..."),e.n=2,o("mail",{send:"1",qq_mail:a.emailName,qq_stmp_pwd:a.emailPass,hosts:a.emailHost,port:a.emailPort});case 2:u=e.v,p(u),t.$emit("callback"),t.$emit("close"),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,l&&l.close(),e.f(4);case 5:return e.a(2)}},n,null,[[1,3,4,5]])}));return function(e){return n.apply(this,arguments)}}())};return function(e,n){var t=C,r=S,o=P,i=u,c=V("focus");return f(),g(D,{onSave:h,onClose:n[4]||(n[4]=function(n){return e.$emit("close")})},{from:y(function(){return[b(o,{ref:"emailRef",model:k(a),rules:d},{default:y(function(){return[b(r,{label:"发送人邮箱",prop:"emailName"},{default:y(function(){return[$(b(t,{modelValue:k(a).emailName,"onUpdate:modelValue":n[0]||(n[0]=function(e){return k(a).emailName=e})},null,8,["modelValue"]),[[c]])]}),_:1}),b(r,{label:"SMTP密码",prop:"emailPass"},{default:y(function(){return[b(t,{modelValue:k(a).emailPass,"onUpdate:modelValue":n[1]||(n[1]=function(e){return k(a).emailPass=e}),type:"password"},null,8,["modelValue"])]}),_:1}),b(r,{label:"SMTP服务器",prop:"emailHost"},{default:y(function(){return[b(t,{modelValue:k(a).emailHost,"onUpdate:modelValue":n[2]||(n[2]=function(e){return k(a).emailHost=e})},null,8,["modelValue"])]}),_:1}),b(r,{label:"端口",prop:"emailPort"},{default:y(function(){return[b(t,{modelValue:k(a).emailPort,"onUpdate:modelValue":n[3]||(n[3]=function(e){return k(a).emailPort=e})},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model"])]}),tip:y(function(){return[m("ul",J,[n[6]||(n[6]=m("li",null,"推荐使用465端口，协议为SSL/TLS",-1)),n[7]||(n[7]=m("li",null,"25端口为SMTP协议，587端口为STARTTLS协议",-1)),m("li",null,[b(i,{href:"https://www.bt.cn/bbs/thread-108097-1-1.html"},{default:y(function(){return l(n[5]||(n[5]=[v("配置教程",-1)]))}),_:1})])])]}),_:1})}}}),Q={style:{display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"center"}},W={key:0,style:{color:"var(--el-color-primary)"}},X={key:1,style:{color:"red"}},Z={style:{display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"center"}},ee={key:0,style:{color:"var(--el-color-primary)"}},ne={key:1,style:{display:"flex","flex-direction":"row","justify-content":"flex-start","align-items":"center"}},te={class:"ml-[1.5rem]"},re={key:2,style:{color:"red"}},le={style:{display:"flex","flex-direction":"column","align-items":"center"}},ae=w({__name:"we-chat-account",setup:function(n){var t=_({circleUrl:"",visible:!1,weChatAccount:!1,nickname:""}),a=_({nonce:0,res:{is_bound:0,is_subscribe:0,head_img:"",nickname:"",remaining:0},success:!1,status:!1}),o=i(),u=o.load,d=o.request,w=T(""),g=function(){var n=r(e().m(function n(){var t,r,l;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=u("正在获取信息配置，请稍后..."),e.n=1,c("wx_account","get_web_info");case 1:r=e.v,l=r.data,a=Object.assign(a,l),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,t&&t.close(),e.f(3);case 4:return e.a(2)}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}(),C=function(){var n=r(e().m(function n(){var r,l;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,!t.weChatAccount||""===w.value){e.n=1;break}return e.a(2);case 1:return e.n=2,c("wx_account","get_auth_url");case 2:r=e.v,l=r.data,w.value=l.res,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,e.f(4);case 5:return e.a(2)}},n,null,[[0,3,4,5]])}));return function(){return n.apply(this,arguments)}}(),j=function(){var n=r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return t.visible=!1,t.weChatAccount=!1,w.value="",e.n=1,g();case 1:return e.a(2)}},n)}));return function(){return n.apply(this,arguments)}}(),G=function(){var n=r(e().m(function n(){var t,r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=u("正在发送测试消息，请稍后..."),e.n=1,c("wx_account","push_data","发送测试消息");case 1:r=e.v,d(r),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,t&&t.close(),e.f(3);case 4:return e.a(2)}},n,null,[[0,2,3,4]])}));return function(){return n.apply(this,arguments)}}();return A(r(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,g();case 1:return e.a(2)}},n)}))),function(e,n){var r=s,o=h,u=q,i=N,c=S,d=H,_=z,g=P,T=V("bt-loading");return f(),p("div",null,[b(D,{onSave:n[1]||(n[1]=function(n){return e.$emit("close")})},{from:y(function(){return[b(g,{"label-position":"right","label-width":"100px"},{default:y(function(){return[b(c,{label:"绑定微信公众号"},{default:y(function(){return[m("div",Q,[1===k(a).res.is_subscribe?(f(),p("span",W,"已绑定")):U("",!0),0===k(a).res.is_subscribe?(f(),p("span",X,"未绑定")):U("",!0),b(i,{modelValue:k(t).visible,"onUpdate:modelValue":n[0]||(n[0]=function(e){return k(t).visible=e}),width:"160","popper-class":"white-popover"},{reference:y(function(){return[b(o,{class:"ml-[1.6rem]"},{default:y(function(){return l(n[4]||(n[4]=[v("立即绑定",-1)]))}),_:1})]}),default:y(function(){return[b(u,{shadow:"always",style:{"box-shadow":"rgb(0 0 0 / 46%) 0px 0 2rem 0px"}},{default:y(function(){return[n[3]||(n[3]=m("span",{style:{"font-size":"var(--el-font-size-small)"}},"请扫码，进行绑定",-1)),b(r,{src:"https://www.bt.cn/Public/img/bt_wx.jpg",custom:!0}),b(o,{onClick:j},{default:y(function(){return l(n[2]||(n[2]=[v("已扫码并完成绑定",-1)]))}),_:1})]}),_:1})]}),_:1},8,["modelValue"])])]}),_:1}),b(c,{label:"绑定微信帐号"},{default:y(function(){return[m("div",Z,[1===k(a).res.is_bound&&""===k(a).res.nickname?(f(),p("span",ee,"已绑定")):U("",!0),1===k(a).res.is_bound?(f(),p("div",ne,[b(d,{size:"small",src:k(a).res.head_img},null,8,["src"]),m("span",te,x(k(a).res.nickname),1)])):U("",!0),0===k(a).res.is_bound?(f(),p("span",re,"未绑定")):U("",!0),b(i,{width:"190",visible:k(t).weChatAccount,"popper-class":"white-popover"},{reference:y(function(){return[b(o,{class:"ml-[1.6rem]",onClick:C},{default:y(function(){return[v(x(1===k(a).res.is_bound?"更换微信账号":"立即绑定"),1)]}),_:1})]}),default:y(function(){return[b(u,{shadow:"always",style:{"box-shadow":"rgb(0 0 0 / 46%) 0px 0 2rem 0px"}},{default:y(function(){return[m("div",le,[n[6]||(n[6]=m("span",{style:{"font-size":"var(--el-font-size-small)"}},"请扫码，进行绑定",-1)),$(b(_,{value:k(w),size:150},null,8,["value"]),[[O,""!==k(w)],[T,""===k(w)],[T,"正在获取二维码，请稍后....","title"]]),b(o,{onClick:j},{default:y(function(){return l(n[5]||(n[5]=[v("已扫码并完成绑定",-1)]))}),_:1})])]}),_:1})]}),_:1},8,["visible"])])]}),_:1}),b(c,{label:"今日剩余发送次数"},{default:y(function(){return[m("span",null,x(k(a).res.remaining),1),b(o,{class:"ml-[1.6rem]",onClick:G},{default:y(function(){return l(n[7]||(n[7]=[v("发送测试消息",-1)]))}),_:1})]}),_:1})]}),_:1})]}),tip:y(function(){return l(n[8]||(n[8]=[m("ul",{style:{"list-style":"disc"}},[m("li",null,"没有绑定微信公众号无法接收面板告警消息"),m("li",null,"当前为体验版,限制每个宝塔账号发送频率100条/天")],-1)]))}),_:1})])}}});n("default",w({__name:"index",props:{compData:{default:function(){return{type:"",callback:function(){}}}}},setup:function(e){var n=G(e.compData),t=n.type,r=n.callback;return function(e,n){return f(),p("div",null,["dingding"===k(t)?(f(),g(B,{key:0,class:"dingding",placeholder:"钉钉","tip-name":"钉钉","tip-url":"https://www.bt.cn/bbs/thread-108081-1-1.html",type:"dingding",onClose:n[0]||(n[0]=function(n){return e.$emit("close")}),onCallback:k(r)},null,8,["onCallback"])):U("",!0),"feishu"===k(t)?(f(),g(B,{key:1,class:"feishu",placeholder:"飞书","tip-name":"飞书","tip-url":"https://www.bt.cn/bbs/thread-108274-1-1.html",type:"feishu",onClose:n[1]||(n[1]=function(n){return e.$emit("close")}),onCallback:k(r)},null,8,["onCallback"])):U("",!0),"weixin"===k(t)?(f(),g(B,{key:2,class:"weixin",placeholder:"企业微信","tip-name":"企业微信","tip-url":"https://www.bt.cn/bbs/thread-108116-1-1.html",type:"weixin",onClose:n[2]||(n[2]=function(n){return e.$emit("close")}),onCallback:k(r)},null,8,["onCallback"])):U("",!0),"mail"===k(t)?(f(),g(K,{key:3,onCallback:k(r),onClose:n[3]||(n[3]=function(n){return e.$emit("close")})},null,8,["onCallback"])):U("",!0),"wx_account"===k(t)?(f(),g(ae,{key:4,onSave:n[4]||(n[4]=function(n){return e.$emit("close")})})):U("",!0)])}}}))}}})}();
