!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,r,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.toStringTag||"@@toStringTag";function a(t,o,i,u){var a=o&&o.prototype instanceof l?o:l,s=Object.create(a.prototype);return n(s,"_invoke",function(t,n,o){var i,u,a,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,n){return i=t,u=0,a=e,p.n=n,c}};function m(t,n){for(u=t,a=n,r=0;!f&&l&&!o&&r<s.length;r++){var o,i=s[r],m=p.p,d=i[2];t>3?(o=d===n)&&(a=i[(u=i[4])?5:(u=3,3)],i[4]=i[5]=e):i[0]<=m&&((o=t<2&&m<i[1])?(u=0,p.v=n,p.n=i[1]):m<d&&(o=t<3||i[0]>n||n>d)&&(i[4]=t,i[5]=n,p.n=d,u=0))}if(o||t>1)return c;throw f=!0,n}return function(o,s,d){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,d),u=s,a=d;(r=u<2?e:a)||!f;){i||(u?u<3?(u>1&&(p.n=-1),m(u,a)):p.n=a:p.v=a);try{if(l=2,i){if(u||(o="next"),r=i[o]){if(!(r=r.call(i,a)))throw TypeError("iterator result is not an object");if(!r.done)return r;a=r.value,u<2&&(u=0)}else 1===u&&(r=i.return)&&r.call(i),u<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),u=1);i=e}else if((r=(f=p.n<0)?a:t.call(n,p))!==c)break}catch(r){i=e,u=1,a=r}finally{l=1}}return{value:r,done:f}}}(t,i,u),!0),s}var c={};function l(){}function s(){}function f(){}r=Object.getPrototypeOf;var p=[][i]?r(r([][i]())):(n(r={},i,function(){return this}),r),m=f.prototype=l.prototype=Object.create(p);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,n(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=f,n(m,"constructor",f),n(f,"constructor",s),s.displayName="GeneratorFunction",n(f,u,"GeneratorFunction"),n(m),n(m,u,"Generator"),n(m,i,function(){return this}),n(m,"toString",function(){return"[object Generator]"}),(t=function(){return{w:a,m:d}})()}function n(t,e,r,o){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}n=function(t,e,r,o){function u(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!o,configurable:!o,writable:!o}):t[e]=r:(u("next",0),u("throw",1),u("return",2))},n(t,e,r,o)}function e(t,n,e,r,o,i,u){try{var a=t[i](u),c=a.value}catch(t){return void e(t)}a.done?n(c):Promise.resolve(c).then(r,o)}function r(t){return function(){var n=this,r=arguments;return new Promise(function(o,i){var u=t.apply(n,r);function a(t){e(u,o,i,a,c,"next",t)}function c(t){e(u,o,i,a,c,"throw",t)}a(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./column-legacy.js?v=1763689792"],function(n,e){"use strict";var o,i,u,a,c,l,s,f,p,m,d,v,h,g,w,b,y,k,x,C,j,_,P,D,O,T,S,V,E,I,W,N,z,H,q,B,U,G,F;return{setters:[function(t){o=t.aQ,i=t.Q,u=t.bI,a=t.aD,c=t.n,l=t.H,s=t.bX,f=t.az,p=t.B,m=t.V,d=t.bY,v=t.M,h=t.bZ,g=t.b_,w=t.ax},function(t){b=t.J,y=t.I,k=t.e,x=t.aE,C=t.r,j=t.q,_=t.aT,P=t.ar,D=t.D,O=t.at,T=t.as,S=t.b6,V=t.aA,E=t.be,I=t.i,W=t.U,N=t.ap,z=t.ag,H=t.af,q=t.H},function(t){B=t.c,U=t.a,G=t.e,F=t.u}],execute:function(){function A(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!I(t)}var J=o(),M=J.refreshActiveTable,K=J.refs.cpuAndMemData,L=(n("b",function(t){var n=(t.p-1)*t.limit,e=n+t.limit;return s(n,e,t.list)}),n("f",function(t){var n=t.prop||"ps";return{label:"备注",prop:n,width:t.width?t.width:200,isCustom:!t.noCustom,render:function(e){if(void 0===e[n])return b(k("div",{class:"loading"},null),[[y("bt-loading"),!0]]);var r={lt:"<",gt:">",nbsp:" ",amp:"&",quot:'"'};return e[n]=e[n].replace(/&(lt|gt|nbsp|amp|quot);/gi,function(t,n){return r[n]}),x("input",{type:"text",value:e[n],class:"bt-table-input w-full",title:"点击修改备注，失去焦点后自动保存",placeholder:t.noPlace?"":"点击编辑备注",onBlur:function(r){if(e[n]===r.target.value)return!1;e[n]=r.target.value,t.edit?t.edit(e):Q(e,t.table)}})}}})),Q=function(){var n=r(t().m(function n(e,r){var o,a,c;return t().w(function(t){for(;;)switch(t.n){case 0:return o=e.id,a=e.ps,c=e.remark,t.n=1,i({loading:"正在修改备注信息，请稍后...",request:u({id:o,table:r,ps:a||c||""}),message:!0});case 1:return t.a(2)}},n)}));return function(t,e){return n.apply(this,arguments)}}(),R=(n("a",function(t){return c({component:function(){return l(function(){return e.import("./index-legacy232.js?v=1763689792")},void 0,e.meta.url)},compData:t,title:"创建容器",area:74,btn:"创建"})}),n("C",function(t){return c({component:function(){return l(function(){return e.import("./real-monitor-dialog-legacy.js?v=1763689792")},void 0,e.meta.url)},title:"【".concat(t.name,"】实时监控"),area:100,compData:{row:t}})}),n("r",function(t){return c({component:function(){return l(function(){return e.import("./container-rename-legacy.js?v=1763689792")},void 0,e.meta.url)},compData:{row:t,type:"dialog"},title:"重命名容器【".concat(t.name,"】"),area:40,btn:"保存"})}),n("N",r(t().m(function n(){return t().w(function(t){for(;;)switch(t.n){case 0:i({request:a({version:-1,product_type:10}),success:function(t){var n=t.data;c({component:function(){return l(function(){return e.import("./index-legacy196.js?v=1763689792")},void 0,e.meta.url)},area:52,compData:{name:"Docker",type:10,id:n.msg[0].id,description:n.msg[0].question}})}});case 1:return t.a(2)}},n)}))),n("o",function(t,n){return f(n)||(n=""),c({component:function(){return l(function(){return e.import("./index-legacy233.js?v=1763689792")},void 0,e.meta.url)},title:"容器【".concat(t.name,"】详情"),area:[90,64],compData:{row:t,type:n}})}),function(t){return c({component:function(){return l(function(){return e.import("./container-terminal-dialog-legacy.js?v=1763689792")},void 0,e.meta.url)},title:"宝塔终端",area:[80,50],compData:{cmd:t}})}),Y=(n("t",function(){var n=r(t().m(function n(r){return t().w(function(t){for(;;)switch(t.n){case 0:if("running"===r.status){t.n=1;break}return t.a(2,v.error("容器未运行"));case 1:c({title:"shell类型",area:40,component:function(){return l(function(){return e.import("./shell-type-select-legacy.js?v=1763689792")},void 0,e.meta.url)},compData:{row:r,openTerminalLog:R},btn:["确认"]});case 2:return t.a(2)}},n)}));return function(t){return n.apply(this,arguments)}}()),n("p",function(t){return c({component:function(){return l(function(){return e.import("./pull-mirror-dialog-legacy.js?v=1763689792")},void 0,e.meta.url)},title:"日志",area:64,compData:{isOther:t}})}),n("k",function(t){return c({component:function(){return l(function(){return e.import("./index-legacy234.js?v=1763689792")},void 0,e.meta.url)},title:"添加Yaml模板",area:64,btn:"添加",compData:{callback:t}})}),n("u",function(){var n=r(t().m(function n(e,o,i,u){var a,c,l;return t().w(function(n){for(;;)switch(n.n){case 0:return a=u.label,c=u.value,l=function(){var n=r(t().m(function n(e,r){var o,i,u;return t().w(function(t){for(;;)switch(t.n){case 0:o=e.id,u=c,t.n="delete"===u?1:3;break;case 1:return t.n=2,g({data:JSON.stringify({id:o})});case 2:case 4:return t.a(2,t.v);case 3:return i={id:o,status:c},t.n=4,h({data:JSON.stringify(i)});case 5:return t.a(2)}},n)}));return function(t,e){return n.apply(this,arguments)}}(),n.n=1,e({title:"批量".concat(a,"容器"),content:"批量".concat(a,"已选的容器，是否继续操作！"),column:[{label:"容器名",prop:"name"},B()],onConfirm:function(){var n=r(t().m(function n(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,o(l);case 1:return M(),t.a(2,!1)}},n)}));return function(){return n.apply(this,arguments)}}()});case 1:return n.a(2)}},n)}));return function(t,e,r,o){return n.apply(this,arguments)}}()),n("e",function(n){var e,o=n.terminalEvent,u=(n.logDataEvent,n.deleteDataEvent),a=n.conDetailEvent,c=n.setStatusEvent,l=n.setStatusTitle,s=n.openContainerBackups,f=n.changeTaskTopEvent,v=n.statusFilterKey,h=n.moreEvent;return[U(),G({event:function(t,n){return f(t,n)},param:"is_top"}),{label:"容器名",prop:"name",render:function(t){return k("span",{class:"bt-link",onClick:function(){return a(t)}},[t.name])}},{label:"容器ID",isCustom:!0,prop:"id",width:120,render:function(t){return k(_,{placement:"top"},{default:function(){return k("div",{class:"w-[100px] h-full",onClick:function(){return p({value:t.id})}},[t.id.slice(0,12)])},content:function(){return k("div",null,[t.id])}})}},{label:"备份",isCustom:!1,width:60,render:function(t){return t.hasOwnProperty("backup_count")?k("span",{class:"bt-link ".concat(t.backup_count>0?"":"!text-warning"),onClick:function(){return s(t)}},[t.backup_count>0?"有(".concat(t.backup_count,")"):"无备份"]):k("span",{class:"bt-link !text-warning",onClick:function(){return s(t)}},["无备份"])}},{label:"状态",renderHeader:function(){var t=[{title:"全部",key:"all"},{title:"正在运行",key:"running"},{title:"暂停",key:"paused"},{title:"停止",key:"exited"}];return x("div",{class:"flex items-center flex-nowrap"},["",x(P,{onCommand:function(t){return l(t)}},{default:function(){return x("span",{class:"text-small flex items-center"},[[k("span",{class:"status-header-text"},[D("状态"),"all"===v.value?"":"(".concat(t.find(function(t){return t.key===v.value}).title,")")])],x("i",{class:"svgtofont-el-arrow-down "})])},dropdown:function(){var n;return k(T,null,A(n=t.map(function(t){return k(O,{command:t.key},{default:function(){return[t.title]}})}))?n:{default:function(){return[n]}})}})])},prop:"status",isCustom:!0,width:120,render:function(t){var n=[],e=[];return"running"===t.status?(e=["运行中",x("span",{class:"svgtofont-icon-start text-primary"})],n=[{title:"停止",key:"stop"},{title:"重启",key:"restart"},{title:"强制停止",key:"kill"},{title:"暂停",key:"pause"}]):"exited"===t.status?(e=["已停止",x("span",{class:"svgtofont-icon-stop text-danger"},{})],n=[{title:"启动",key:"start"},{title:"重启",key:"restart"}]):(e=["已暂停",x("span",{class:"svgtofont-icon-stop text-danger"},{})],n=[{title:"重启",key:"restart"},{title:"恢复",key:"unpause"},{title:"强制停止",key:"kill"}]),x(P,{onCommand:function(n){return c(t,n)}},{default:function(){return k("span",{class:("running"===t.status?"text-primary":"text-danger")+" flex items-center"},[e])},dropdown:function(){var t;return k(T,null,A(t=n.map(function(t){return k(O,{key:t.key,command:t.key},{default:function(){return[t.title]}})}))?t:{default:function(){return[t]}})}})}},{label:"镜像",isCustom:!0,prop:"image",minWidth:100},{label:"IP",isCustom:!1,prop:"ip",minWidth:60,render:function(t){return t.ip.length>0?t.ip[0]:""}},{label:"IPV6",isCustom:!1,prop:"ipv6",minWidth:60,render:function(t){return t.ipv6.length>0?t.ipv6[0]:""}},{label:"CPU / 内存",isCustom:!1,prop:"cpu_mem",columnKey:"cpu_mem",showOverflowTooltip:!1,render:function(t){var n=K.value[t.id],e=Number(n.cpu_usage),r=Number(n.mem_percent);return e&&e>100&&(e=100),r&&r>100&&(r=100),"running"===t.status?void 0===n.cpu_usage||void 0===n.mem_percent?k("div",{class:"loading h-[4.6rem] flex items-center"},[D("正在获取中...")]):k(_,{placement:"top"},{default:function(){return k("div",{class:"w-[100px]"},[k("div",{class:"flex items-center justify-between"},[k("span",{class:"w-[3rem] inline-block whitespace-nowrap"},[D("cpu：")]),k(S,{class:"w-[7rem] ml-[1rem]",percentage:e||0,"show-text":!1},null)]),k("div",{class:"flex items-center justify-between"},[k("span",{class:"w-[3rem] inline-block whitespace-nowrap"},[D("内存：")]),k(S,{class:"w-[7rem] ml-[1rem]",percentage:r||0,"show-text":!1},null)])])},content:function(){return k("div",null,[D("CPU："),e,D("%"),k("br",null,null),D("内存："),r,D("%")])}}):k("div",{class:"h-[4.6rem] flex items-center"},[D("--")])}},{label:"端口(主机--\x3e容器)",prop:"ports",isCustom:!0,minWidth:130,columnKey:"ports",showOverflowTooltip:!1,render:function(t){for(var n=Object.entries(t.ports)||[],e=[],r=0,o=0;o<n.length;o++){if(r>=10){e.push("......");break}var i=n[o];i[1]&&(e.push("".concat(i[1][0].HostIp||"0.0.0.0",":").concat(i[1][0].HostPort,"--\x3e").concat(i[0]," ")),r++)}return k("span",{key:t.id,class:"flex items-center whitespace-pre-wrap gap-4 min-h-[3rem]",title:e.join(" ")},[e.map(function(t,n){return t.startsWith("0.0.0.0:")?k(V,{trigger:"hover",placement:"bottom",width:"12.5rem","popper-class":"!min-w-[12.5rem]"},{reference:function(){return k(E,{type:"primary",size:"default",class:"mr-1 cursor-pointer bt-link"},{default:function(){return[k("span",{class:"inline-flex items-center gap-x-1"},[k("i",{class:"svgtofont-el-link !text-base !text-primary"},null),t])]}})},default:function(){return k("div",{class:"-m-[12px] text-small"},[k("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-light",onClick:function(){return et(t,"http")}},[D("HTTP协议访问")]),k("div",{class:"px-[16px] py-[8px] cursor-pointer text-center hover:bg-light",onClick:function(){return et(t,"https")}},[D("HTTPS协议访问")])])}}):k(E,{type:"primary",size:"default",class:"mr-1",title:"本机内部访问"},A(t)?t:{default:function(){return[t]}})})])}},{label:"创建时间",isCustom:!1,prop:"created_time",width:150,render:function(t){return m(t.created_time)}},L({edit:(e=r(t().m(function n(e){return t().w(function(t){for(;;)switch(t.n){case 0:try{i({request:d({data:JSON.stringify({id:e.id,remark:e.remark})}),message:!0})}catch(n){}case 1:return t.a(2)}},n)})),function(t){return e.apply(this,arguments)}),noPlace:!0,noCustom:!0,prop:"remark",table:"containers",width:200}),F([{onClick:a,title:"管理"},{onClick:o,title:"终端"},{onClick:u,title:"删除"},{width:50,onClick:h,isMore:!0,menu:[{key:"log",title:"日志"},{key:"reName",title:"重命名"},{key:"realMonitor",title:"实时监控"},{key:"dir",title:"目录"}]}])]}),n("l",function(){return[U({key:"project_name"}),{label:"Compose模板名",prop:"project_name",minWidth:100},{label:"路径",prop:"conf_file",showOverflowTooltip:!0,minWidth:100},{label:"备注",prop:"remark",minWidth:100}]}),n("i",function(t){var n=t.setPort,e=t.delPort;return[{label:"本地端口",prop:"server",render:function(t){return k(W,{size:"small",modelValue:t.server,onInput:function(e){return n(e,t,"server")},placeholder:"例如：80"},null)}},{label:"容器",prop:"con",render:function(t){return k(W,{size:"small",modelValue:t.con,onInput:function(e){return n(e,t,"con")},placeholder:"例如：80"},null)}},{label:"对外暴露",prop:"output",width:100,render:function(t){return k(N,{size:"small",modelValue:t.output,onChange:function(e){return n(e,t,"output")}},null)},renderHeader:function(){return t="允许外部访问会将端口映射出去，所有人都可以访问这个端口(不建议)",k("div",{class:"flex items-center"},[k("span",null,["对外暴露"]),k(_,{content:t,placement:"top"},{default:function(){return[k("span",{class:"ml-4px bt-ico-ask"},["?"])]}})]);var t}},{label:"协议",prop:"protocol ",width:220,render:function(t){return k("div",{class:"flex items-center"},[k(z,{modelValue:t.protocol,onChange:function(e){return n(e,t,"protocol")}},{default:function(){return[k(H,{value:"tcp"},{default:function(){return[D("TCP")]}}),k(H,{value:"udp"},{default:function(){return[D("UDP")]}})]}}),k(q,{class:"!ml-[1rem] h-[2.8]",onClick:function(){return e(t)}},{default:function(){return[k("i",{class:"svgtofont-el-delete"},null)]}})])}}]}),n("j",function(t){var n=t.changeNet,e=t.delNet,r=t.netOptions;return[{label:"网络名称",prop:"network",minWidth:110,render:function(t){return k("div",{class:"h-[3rem]"},[k(w,{modelValue:t.network,class:"!w-[20rem]",options:r.value,onChange:function(e){return n(t,e,"network")}},null)])}},{label:"IPV4地址",prop:"con",width:150,render:function(t){return k(W,{size:"default",modelValue:t.ip4,"onUpdate:modelValue":function(n){return t.ip4=n},disabled:"bridge"==t.network||"none"==t.network||"host"==t.network,onBlur:function(e){return n(t,e.target.value,"ip4")},placeholder:"bridge"===t.network||"none"===t.network||"host"===t.network?"非自定义网卡":"例如：172.20.x.x"},null)}},{label:"IPV6地址",prop:"protocol ",minWidth:100,render:function(t){return k("div",{class:"flex items-center"},[k(W,{size:"default",modelValue:t.ip6,"onUpdate:modelValue":function(n){return t.ip6=n},disabled:"bridge"==t.network||"none"==t.network||"host"==t.network,onBlur:function(e){return n(t,e.target.value,"ip6")},placeholder:"bridge"===t.network||"none"===t.network||"host"===t.network?"自定义网卡可以设置":"例如：2001:0db8::1"},null),k(q,{class:"!ml-[1rem] h-[2.8]",onClick:function(){return e(t)}},{default:function(){return[k("i",{class:"svgtofont-el-delete"},null)]}})])}}]}),function(){var n=r(t().m(function n(e){var r,o,i;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,fetch(e);case 1:if(r=t.v,(o=r.headers.get("content-type"))&&o.startsWith("image/")){t.n=2;break}return t.a(2,"/static/img/soft_ico/icon_plug.svg");case 2:return t.n=3,r.blob();case 3:return i=t.v,t.a(2,new Promise(function(t,n){var e=new FileReader;e.onloadend=function(){return t(e.result)},e.onerror=function(){return t("/static/img/soft_ico/icon_plug.svg")},e.readAsDataURL(i)}))}},n)}));return function(t){return n.apply(this,arguments)}}()),X=function(){return new Promise(function(t,n){var e=indexedDB.open("ImageCacheDB",1);e.onupgradeneeded=function(t){t.target.result.createObjectStore("images",{keyPath:"url"})},e.onsuccess=function(){return t(e.result)},e.onerror=function(){return n(e.error)}})},Z=function(){var n=r(t().m(function n(e){var r;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,X();case 1:return r=t.v,t.a(2,new Promise(function(t,n){var o=r.transaction("images","readonly").objectStore("images").get(e);o.onsuccess=function(){return t(o.result?o.result.data:null)},o.onerror=function(){return n(o.error)}}))}},n)}));return function(t){return n.apply(this,arguments)}}(),$=function(){var n=r(t().m(function n(e,r){var o;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,X();case 1:return o=t.v,t.a(2,new Promise(function(t,n){var i=o.transaction("images","readwrite").objectStore("images").put({url:e,data:r});i.onsuccess=function(){return t()},i.onerror=function(){return n(i.error)}}))}},n)}));return function(t,e){return n.apply(this,arguments)}}(),tt=(n("c",r(t().m(function n(){var e;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,X();case 1:return e=t.v,t.a(2,new Promise(function(t,n){var r=e.transaction("images","readwrite").objectStore("images").clear();r.onsuccess=function(){return t()},r.onerror=function(){return n(r.error)}}))}},n)}))),n("g",function(){var n=r(t().m(function n(e){var r,o;return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Z(e);case 1:if(!(r=t.v)){t.n=2;break}return t.a(2,r);case 2:return t.n=3,Y(e);case 3:return o=t.v,t.n=4,$(e,o);case 4:return t.a(2,o);case 5:return t.a(2)}},n)}));return function(t){return n.apply(this,arguments)}}()),n("d",C(!1)),n("m",C("docker-appstore")),o()),nt=tt.getDockerState;tt.refs.settingData;j(nt,1e3);n("h",r(t().m(function n(){return t().w(function(t){for(;;)switch(t.n){case 0:c({component:function(){return l(function(){return e.import("./index-legacy235.js?v=1763689792")},void 0,e.meta.url)},title:"安装",area:64,btn:"确定"});case 1:return t.a(2)}},n)})));var et=function(t,n){var e=window.vite_public_ip,r=t.split("--\x3e")[0].split(":")[1],o="".concat(n,"://").concat(e,":").concat(r);window.open(o,"_blank")}}}})}();
