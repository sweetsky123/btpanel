import{ax as e,e as l,$ as a}from"./utils-lib.js?v=1763689792";import{c as s,s as t,r as o,w as n,n as d,x as i,y as p,e as u,C as r,A as m,z as c,B as _,R as f,D as b,F as x,b1 as v,J as V,K as g,G as w,U as y,ad as h,T as j,aA as I,am as P,an as k,V as D,ab as U,O as C,be as A}from"./base-lib.js?v=1763689792";import{_ as z}from"./index.vue_vue_type_script_setup_true_lang13.js?v=1763689792";import{A as H}from"./ssl.js?v=1763689792";import{d as S}from"./useMethod6.js?v=1763689792";import{M as N,i as q,a as M,g as F}from"./index61.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./useStore5.js?v=1763689792";import"./index109.js?v=1763689792";import"./index118.js?v=1763689792";import"./useMethod9.js?v=1763689792";import"./validator.js?v=1763689792";import"./index110.js?v=1763689792";import"./column.js?v=1763689792";import"./index107.js?v=1763689792";import"./useMethod11.js?v=1763689792";import"./header-nav-tools.vue_vue_type_script_setup_true_lang.js?v=1763689792";const R={class:"p-20px"},E={class:"w-320px"},O={class:"w-320px"},B={class:"w-100px ml-20px"},G={class:"!w-[320px] flex items-center"},J={class:"!p-[12px] bg-primary text-white leading-[2.4rem]"},K={class:"w-320px"},T={class:"el-select-dropdown__empty"},$={style:{float:"left"}},L={class:"ml-[1rem]",style:{float:"right",color:"var(--el-base-tertiary)","font-size":"var(--el-font-size-base)"}},Q={key:0,class:"flex flex-wrap gap-[5px]"},W={class:"text-tertiary ml-1"},X={style:{float:"left","max-width":"10ch","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},Y={class:"ml-[.8rem]",style:{float:"right",color:"var(--el-base-tertiary)","font-size":"var(--el-font-size-base)"}},Z=s({__name:"index",props:{compData:{}},emits:["close"],setup(s,{emit:Z}){const ee=N(),{form:le,formRef:ae,propsData:se}=t(ee),{initForm:te,rules:oe,unitOptions:ne}=ee,de=o(!1),ie=[{content:'<span class="text-dangerDark">提示A记录解析失败，请检查填写的A记录域名是否已解析到服务器IP</span>',isHtml:!0},{content:'<span class="text-dangerDark">在IP池中选择一个IP时，此IP将作为本域名发送邮件的出口IP</span>',isHtml:!0},{content:'<span class="text-dangerDark">在IP池中选择多个IP时，将开启IP轮换在多个IP中定时切换</span>',isHtml:!0},{content:"需要在DNS服务提供商控制台添加一条A记录",isHtml:!0},{content:"如果使用CloudFlare，添加记录时请选择[DNS only]",isHtml:!0}],pe=[{label:"捕获不存在的邮箱",value:"none"},{label:"捕获所有邮箱",value:"all"}],ue=Z,re=s,me=o([]),ce=()=>{ue("close"),S()},_e=()=>{ue("close"),M()},fe=e=>{const l=q.value.find(l=>l.value===e);return l?l.ip:""};return n(de,e=>{e&&(F(),(async()=>{const{data:e}=await H(),{data:l}=e;me.value=l})())}),d(()=>{te(re.compData)}),(s,t)=>{const o=y,n=h,d=j,H=e,S=I,N=l,M=P,F=k,Z=D,ee=A,te=z,ue=U,re=a;return i(),p("div",R,[u(ue,{ref_key:"formRef",ref:ae,model:c(le),rules:c(oe)},{default:r(()=>[u(n,{label:"域名",prop:"domain"},{default:r(()=>[m("div",E,[u(o,{modelValue:c(le).domain,"onUpdate:modelValue":t[0]||(t[0]=e=>c(le).domain=e),disabled:c(se).isEdit,placeholder:"请输入域名，例如：bt.cn"},null,8,["modelValue","disabled"])])]),_:1}),u(n,{label:"A 记录"},{default:r(()=>[m("div",O,[u(o,{modelValue:c(le).a_record,"onUpdate:modelValue":t[1]||(t[1]=e=>c(le).a_record=e),disabled:c(se).isEdit,placeholder:"请输入A记录，例如：mail.bt.cn"},null,8,["modelValue","disabled"])])]),_:1}),u(n,{label:"域名配额"},{default:r(()=>[u(d,{modelValue:c(le).quota,"onUpdate:modelValue":t[2]||(t[2]=e=>c(le).quota=e),class:"!w-200px",min:0,controls:!1},null,8,["modelValue"]),m("div",B,[u(H,{modelValue:c(le).quota_unit,"onUpdate:modelValue":t[3]||(t[3]=e=>c(le).quota_unit=e),options:c(ne)},null,8,["modelValue","options"])])]),_:1}),u(n,{label:"最大邮箱数量",prop:"mailboxes"},{default:r(()=>[u(d,{modelValue:c(le).mailboxes,"onUpdate:modelValue":t[4]||(t[4]=e=>c(le).mailboxes=e),class:"!w-320px",min:0,controls:!1},null,8,["modelValue"])]),_:1}),u(n,{label:"邮件捕获"},{default:r(()=>[m("div",G,[u(H,{class:"!w-[140px]",modelValue:c(le).catch_type,"onUpdate:modelValue":t[5]||(t[5]=e=>c(le).catch_type=e),options:pe},null,8,["modelValue"]),u(S,{placement:"top-start",width:"auto",trigger:"click","popper-class":"green-tips-popover !p-0 !border-none"},{reference:r(()=>[u(o,{class:"!w-[170px] ml-10px",modelValue:c(le).email,"onUpdate:modelValue":t[6]||(t[6]=e=>c(le).email=e)},null,8,["modelValue"])]),default:r(()=>[m("div",J,_("none"===c(le).catch_type?"捕获不存在的邮箱，转发到此邮箱":"捕获所有邮箱，转发到此邮箱"),1)]),_:1})])]),_:1}),u(te,{showConfig:c(de),"onUpdate:showConfig":t[10]||(t[10]=e=>f(de)?de.value=e:null)},{config:r(()=>[u(n,{label:"DNS"},{default:r(()=>[m("div",K,[u(F,{modelValue:c(le).dns_id,"onUpdate:modelValue":t[7]||(t[7]=e=>c(le).dns_id=e),class:"!w-320px",filterable:"","default-first-option":"",size:"default",placeholder:"请选择验证类型"},{empty:r(()=>[m("p",T,[t[12]||(t[12]=m("span",null,"暂无数据，请先添加DNS接口",-1)),u(N,{class:"!text-base",onClick:ce},{default:r(()=>[...t[11]||(t[11]=[b(">>添加",-1)])]),_:1})])]),default:r(()=>[(i(!0),p(x,null,v(c(me),e=>(i(),C(M,{key:e.id,label:e.dns_name,value:e.id},{default:r(()=>[m("span",$,_(e.dns_name),1),m("span",L,_(e.ps),1)]),_:2},1032,["label","value"]))),128)),u(M,{label:"更多类型",value:"none",disabled:""},{default:r(()=>[m("p",null,[t[14]||(t[14]=m("span",null,"更多类型，请添加DNS接口",-1)),u(N,{class:"!text-base",onClick:ce},{default:r(()=>[...t[13]||(t[13]=[b(">>添加",-1)])]),_:1})])]),_:1})]),_:1},8,["modelValue"])])]),_:1}),V(u(n,{label:" "},{default:r(()=>[u(Z,{modelValue:c(le).auto_create_record,"onUpdate:modelValue":t[8]||(t[8]=e=>c(le).auto_create_record=e),"true-label":1,"false-label":0},{default:r(()=>[...t[15]||(t[15]=[b("一键解析",-1)])]),_:1},8,["modelValue"])]),_:1},512),[[g,c(le).dns_id]]),u(n,{label:"IP池"},{default:r(()=>[u(F,{class:"!w-[320px] bt-multiple-select",modelValue:c(le).ip_tag,"onUpdate:modelValue":t[9]||(t[9]=e=>c(le).ip_tag=e),multiple:"",placeholder:"请选择IP"},{tag:r(()=>[c(le).ip_tag&&c(le).ip_tag.length?(i(),p("div",Q,[(i(!0),p(x,null,v(c(le).ip_tag,e=>(i(),C(ee,{type:"info",key:e,closable:"",class:"!w-auto inline-flex items-center",onClose:l=>(e=>{le.value.ip_tag=le.value.ip_tag.filter(l=>l!==e)})(e)},{default:r(()=>[b(_(e)+" ",1),m("span",W,"IP: "+_(fe(e)),1)]),_:2},1032,["onClose"]))),128))])):w("",!0)]),default:r(()=>[(i(!0),p(x,null,v(c(q),e=>(i(),C(M,{key:e.value,label:e.label,value:e.value},{default:r(()=>[m("span",X,_(e.label),1),m("span",Y,"IP: "+_(e.ip),1)]),_:2},1032,["label","value"]))),128)),u(M,{label:"更多类型",value:"none",disabled:""},{default:r(()=>[m("p",null,[t[17]||(t[17]=m("span",null,"更多IP，请前往IP池",-1)),u(N,{class:"!text-base",onClick:_e},{default:r(()=>[...t[16]||(t[16]=[b(">>添加",-1)])]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["showConfig"])]),_:1},8,["model","rules"]),u(re,{class:"pl-20px",options:ie})])}}});export{Z as default};
