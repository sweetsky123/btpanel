import{H as e,u as t,p as a,b3 as r,an as s,V as l,cN as n,ao as o,n as i,ap as u}from"./utils-lib.js?v=1763689792";import{_ as p}from"./index109.js?v=1763689792";import{j as c,r as m,o as d,s as _,g,e as b,D as v,c as h,x as y,O as f,C as w,z as k}from"./base-lib.js?v=1763689792";import{c as W,a as C,u as P}from"./column.js?v=1763689792";import{e as R,f as L,h as D,i as x,b as S}from"./useMethod5.js?v=1763689792";import{h as j,b as O,e as E,f as T}from"./form-item.js?v=1763689792";const A=c("WP-REMOTE-STORE",()=>{const t=m(!1),a=d({url:"",type:1,username:"",password:"",key:"",token:""}),r=d({Login_url:"",wp:"",php:"",sql:"",worker:"",username:"",language:"en"});return{addWordpressFormData:a,selectCofigFormData:r,addWordpressData:async r=>{try{const{useDataHandle:s}=await e(()=>import("./utils-lib.js?v=1763689792").then(e=>e.lV),__vite__mapDeps([]),import.meta.url),{getParams:l,getParamsKey:n}=await e(()=>Promise.resolve().then(()=>Z),void 0,import.meta.url);s({loading:"正在添加 Wordpress，请稍后...",request:1===a.type?R(l()):L(n()),data:{status:Boolean},message:!0,success:()=>{t.value=!0,r&&r()}})}catch(s){}},isRefreshRemoteList:t,resetAddWordpressData:()=>{a.url="",a.type=1,a.username="",a.password="",a.key="",a.token=""},resetSelectCofigData:()=>{r.Login_url="",r.wp="",r.php="",r.sql="",r.worker="",r.username="",r.language="en"}}}),{isRefreshRemoteList:q}=_(A()),B=async e=>{try{const{data:{list:t,total:a}}=await D({keyword:e.search,p_size:e.limit,p:e.p});return{data:t,total:a}}catch(t){return{data:[],total:0}}},F=async(e,t,a,r)=>{const{label:s,value:l}=r,n=new Map([["delete","批量删除已选的网站，删除后彻底失去访问和操作权限"]]),o=async(e,t)=>{const{id:a}=e;if("delete"===l)return await x({remote_id:a})};await e({title:"批量".concat(s,"网站"),content:"".concat(n.get(l),"，是否继续操作！"),column:[{label:"网站",prop:"site_url"},W()],onConfirm:async()=>(await t(o),q.value=!0,!1)})},{payment:M}=t();M.value;const{addWordpressFormData:V,selectCofigFormData:H,isRefreshRemoteList:z}=_(A()),{addWordpressData:I}=A(),K=e=>{const t={class:"!w-[300px]",clearable:!0},a=[{label:"凭据",value:1},{label:"密钥",value:2}];return g(()=>[E("连接类型","type",a,{attrs:{...t},labelAttrs:{labelWidth:"100px"}}),O("登录URL","url",{rules:[{required:!0,message:"请输入登录URL",trigger:"blur"}],attrs:{...t,placeholder:"请输入登录URL"},labelAttrs:{labelWidth:"100px"}}),...1===e.value.type?U(t):N(t)])},U=e=>[O("用户名","username",{attrs:{...e,placeholder:"请输入用户名"},rules:[{required:!0,message:"请输入用户名",trigger:"blur"}],labelAttrs:{labelWidth:"100px"}}),O("密码","password",{attrs:{...e,placeholder:"请输入密码"},rules:[{required:!0,message:"请输入密码",trigger:"blur"}],labelAttrs:{labelWidth:"100px"}})],N=e=>[O("Security Key","key",{attrs:{...e,placeholder:"请输入Security Key"},rules:[{required:!0,message:"请输入Security Key",trigger:"blur"}],labelAttrs:{labelWidth:"100px"}}),O("Security Token","token",{attrs:{...e,placeholder:"请输入Security Token"},rules:[{required:!0,message:"请输入Security Token",trigger:"blur"}],labelAttrs:{labelWidth:"100px"}}),{type:"custom",render:()=>b("span",{class:"leading-8"},[v("如何添加带有安全密钥的网站，遵循下面的步骤")])},T("",[{content:b("span",null,[v("1. 下载"),b("span",{class:"bt-link",onClick:()=>window.open("http://download.bt.cn/install/src/btpanel-wp-toolkit.zip","_blank","noopener,noreferrer")},[v("WP工具包")])])},{content:"2. 将插件上传到您的网站"},{content:"3. 在您的网站上激活插件"},{content:"4. 单击您网站上的安全键链接 /wp-admin/plugins.php页面\t"},{content:"5. 将密钥和令牌复制到上面的两个输入框"},{content:"6. 单击确认按钮以完成全部"}])],Q=()=>{const e={class:"w-[320px]",clearable:!0,disabled:!0};return g(()=>[j("登录URL",()=>b("div",{class:"bt-link",onClick:()=>X(H.value.Login_url)},[H.value.Login_url])),O("WP版本","wp",{attrs:{...e}}),O("插件版本","worker",{attrs:{...e}}),O("PHP版本","php",{attrs:{...e}}),O("MySQL版本","sql",{attrs:{...e}}),O("用户名","username",{attrs:{...e}}),O("网站语言","language",{attrs:{...e}})])},G=e=>{H.value.Login_url=e.login_url||"",H.value.wp=e.env_info.wordpress_version||"",H.value.php=e.env_info.php_version||"",H.value.worker=e.env_info.plugin_version||"",H.value.username=e.username||"",H.value.language=e.env_info.locale||"",H.value.sql=e.env_info.mysql_version||""},J=e=>{S(e,"remote")},X=e=>{window.open(e,"_blank","noopener,noreferrer")},Y=async e=>{await a({title:"删除",content:"这将从列表中删除您的网站【".concat(e.site_url,"】，是否继续操作?"),onConfirm:async()=>{await x({remote_id:e.id}),z.value=!0}})},Z=Object.freeze(Object.defineProperty({__proto__:null,addWordpress:async(e,t,a)=>{try{await t(),await I()}catch(r){}},getAddWordpressFormOption:K,getParams:()=>({login_url:V.value.url,username:V.value.username,password:V.value.password}),getParamsKey:()=>({login_url:V.value.url,security_key:V.value.key,security_token:V.value.token}),getSelectCofigFormOption:Q,onDel:Y,onLogin:X,onPay:J,setSelectCofigFormData:G},Symbol.toStringTag,{value:"Module"})),$=h({__name:"index",setup(a){const{isRefreshRemoteList:c}=_(A()),{mainHeight:m}=t(),d=t=>i({title:"站点修改【".concat(t.site_url,"】 -- 添加时间【").concat(l(t.create_time),"】"),area:55,compData:t,component:()=>e(()=>import("./index433.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)}),{BtOperation:g}=r({options:[{type:"button",label:"添加 Wordpress",active:!0,onClick:()=>i({title:"添加 Wordpress",area:55,compData:B,component:()=>e(()=>import("./index434.js?v=1763689792"),__vite__mapDeps([]),import.meta.url),btn:!0})}]}),v=u([{label:"删除",value:"delete",event:F}]),{BtTable:h,BtPage:W,BtRecommendSearch:R,BtRefresh:L,BtColumn:D,BtBatch:x,BtTableCategory:S,BtErrorMask:j,tableRef:O,classList:E,refresh:T}=s({request:e=>B(e),columns:[C(),{label:"网站名",minWidth:180,isCustom:!0,prop:"site_url",render:e=>b("span",{class:"bt-link",onClick:()=>{d(e)}},[e.site_url])},{label:"WP 版本",isCustom:!0,minWidth:100,render:e=>{var t;return b("span",{class:"bt-link",onClick:()=>{d(e)}},[(null==(t=e.env_info)?void 0:t.wordpress_version)?e.env_info.wordpress_version:"--"])}},{label:"插件版本",isCustom:!0,minWidth:100,render:e=>{var t;return b("span",{class:"bt-link",onClick:()=>{d(e)}},[(null==(t=e.env_info)?void 0:t.plugin_version)?e.env_info.plugin_version:"--"])}},{label:"PHP版本",isCustom:!0,minWidth:100,render:e=>{var t;return b("span",{class:"bt-link",onClick:()=>{d(e)}},[(null==(t=e.env_info)?void 0:t.php_version)?e.env_info.php_version:"--"])}},{label:"创建时间",align:"center",render:e=>l(e.create_time)},P([{onClick:t=>{(t=>{i({title:"WP登录",area:42,compData:t,component:()=>e(()=>import("./index435.js?v=1763689792"),__vite__mapDeps([]),import.meta.url)})})(t)},title:"登录"},{onClick:e=>{Y(e)},title:"删除"}])],extension:[v,n("search",{name:"wp",list:[],showHistory:!1,showRecommend:!1}),o(c)]});return(e,t)=>{const a=p;return y(),f(a,null,{"header-left":w(()=>[b(k(g))]),"header-right":w(()=>[b(k(R),{type:"remote-wp",placeholder:"请输入域名",class:"!w-[270px] mr-[10px]"})]),content:w(()=>[b(k(h),{"min-height":k(m)},null,8,["min-height"])]),"footer-left":w(()=>[b(k(x))]),"footer-right":w(()=>[b(k(W))]),_:1})}}}),ee=Object.freeze(Object.defineProperty({__proto__:null,default:$},Symbol.toStringTag,{value:"Module"}));export{K as a,X as b,Q as g,ee as i,J as o,G as s,A as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
