import{L as e,li as a,M as l,k as s}from"./utils-lib.js?v=1763689792";import{c as t,r,a8 as i,x as m,y as u,e as o,z as n,g as d,D as v}from"./base-lib.js?v=1763689792";import{u as p,a as c,g as b}from"./index71.js?v=1763689792";import{i as f,j,c as x,b as y,h as T,f as h}from"./form-item.js?v=1763689792";import{_ as w}from"./validator.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index109.js?v=1763689792";import"./index260.js?v=1763689792";import"./column.js?v=1763689792";import"./index110.js?v=1763689792";import"./index107.js?v=1763689792";const g={class:"p-[2rem]"},_=t({__name:"index",setup(t,{expose:_}){var C,q;const{isAlarmEdit:V,alarmRowData:D,nodeAlarmRefresh:L}=p(),P=r(0),R=r(V.value&&["222","223"].includes(null==(q=null==(C=D.value)?void 0:C.task_data)?void 0:q.tid)?"master":"clb"),U=["sms"],{BtForm:k,submit:A}=e({data:c,options:e=>d(()=>{var a,l;return[...V.value?[]:[f("告警类型","alarmType",[{label:"负载均衡",value:"clb"},{label:"主从复制",value:"master"}],{attrs:{onChange:e=>{R.value=e}}}),"clb"===R.value&&f("负载均衡类型","lcbType",[{label:"HTTP负载均衡",value:0},{label:"TCP/UDP负载均衡",value:1}],{attrs:{onChange:a=>{P.value=a,e.value.name=""}}})],..."master"===R.value?[f("主从复制类型","masterType",[{label:"Mysql",value:"222"},{label:"Redis",value:"223"}],{attrs:{disabled:V.value}})]:[],..."clb"===R.value?[j("负载均衡名称","name",0===P.value?null==(a=D.value)?void 0:a.clbList:null==(l=D.value)?void 0:l.tcpList,{attrs:{class:"!w-[32rem]",placeholder:"请选择负载均衡",filterable:!0,disabled:V.value},onChange:e=>{},rules:[{required:!0,message:"请选择负载均衡"}]}),...0===e.value.lcbType?[x("成功状态码","successCode",{attrs:{class:"!w-[32rem]",placeholder:"多个用逗号隔开，如：200,301,302,403,404"}})]:[y("连接失败次数","failTimes",{attrs:{class:"!w-[32rem]",placeholder:"如果n次后仍然无法正常连接则告警",rules:[{required:!0,message:"请输入连接失败次数"}]}})]]:[],T("配置发送次数",()=>o("div",{class:"flex items-center"},[o(s,{modelValue:e.value.sendTimes,"onUpdate:modelValue":a=>e.value.sendTimes=a,class:"!w-[8rem] mr-2",placeholder:"请输入发送次数",type:"text"},null),o("span",{class:"text-gray-400 text-small"},[v("次后停止推送，次日再次监控")])]),"sendTimes"),T("告警方式",()=>o("div",null,[o(w,{class:"!w-[32rem]",modelValue:e.value.type,"onUpdate:modelValue":a=>e.value.type=a,multiple:!0,limit:U,"is-show-api":!1,"all-alarm":!0},null)])),h(" ",[{content:"每隔1分钟进行检测异常后将发送告警"}])]}),submit:async(e,s,t)=>{await s();const r=b(e.value),i=await a(r);return l.request(i),L.value=!0,i.status}});return _({onConfirm:A}),i(()=>{D.value=[]}),(e,a)=>(m(),u("div",g,[o(n(k))]))}});export{_ as default};
