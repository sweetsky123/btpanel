import{e as l,Q as e,aC as a,b as s,$ as n}from"./utils-lib.js?v=1763689792";import{B as o}from"./index119.js?v=1763689792";import{c as t,r,e as i,D as u,F as m,v as d,I as p,x as c,y as g,z as v,R as f,A as x,C as j,J as y,O as L,G as b,H as C}from"./base-lib.js?v=1763689792";import{u as _,S as V}from"./useStore4.js?v=1763689792";import{getSiteAccessLogs as z,getSiteErrorLog as h,getProjectLog as k,getSetupLog as E}from"./site.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./ace.js?v=1763689792";const N={class:"h-full"},O={class:"mt-1rem"},S=t({__name:"index",setup(t){const S=s(),{siteInfo:q}=_(),{jumpTabEvent:w}=V(),B=r(!1),H=r("nginxLogs"),I=r(""),U=r([{label:"Nginx日志",name:"nginxLogs",lazy:!0,render:()=>i("span",null,null)},{label:"Nginx错误日志",name:"nginxErrorLogs",lazy:!0,render:()=>i("span",null,null)},{label:"项目日志",name:"projectLogs",lazy:!0,render:()=>i("span",null,null)},{label:"依赖安装日志",name:"installLogs",lazy:!0,render:()=>i("span",null,null)}]),A=[{content:i(m,null,[i("div",{class:"flex items-center"},[u("若依赖安装出现问题，可以前往 "),i(l,{onClick:()=>w("composer")},{default:()=>[u("Composer")]}),u(" 自定义安装")])])}],D=async(l=!1)=>{const{name:a}=q.value,s=new Map([["nginxLogs",z],["nginxErrorLogs",h],["projectLogs",k],["installLogs",E]]).get(H.value),n={projectLogs:{sitename:a},installLogs:{sitename:a,type:"install"},default:{siteName:a}},o=n[H.value]||n.default;s&&e({loading:B,request:s(o),success:e=>{var a,s;I.value=(null==(a=null==e?void 0:e.data)?void 0:a.data)||(null==(s=null==e?void 0:e.data)?void 0:s.msg)||e.msg,l&&S.success("刷新成功")}})},F=l=>{H.value=l,D()};return d(()=>D()),(l,e)=>{const s=a,t=C,r=o,m=n,d=p("bt-loading");return c(),g("div",null,[i(s,{type:"card",modelValue:v(H),"onUpdate:modelValue":e[0]||(e[0]=l=>f(H)?H.value=l:null),options:v(U),onChange:F},null,8,["modelValue","options"]),x("div",N,[i(t,{type:"primary",onClick:e[1]||(e[1]=l=>D(!0))},{default:j(()=>[...e[3]||(e[3]=[u("刷新日志",-1)])]),_:1}),x("div",O,[y(i(r,{class:"!h-[40rem] !w-full",modelValue:v(I),"onUpdate:modelValue":e[2]||(e[2]=l=>f(I)?I.value=l:null),id:"configContent",request:!1,isScrollBottom:!0,editorOption:{readOnly:!0,mode:"ace/mode/text"}},null,8,["modelValue"]),[[d,v(B)]])]),"installLogs"===v(H)?(c(),L(m,{key:0,class:"px-2rem",options:A})):b("",!0)])])}}});export{S as default};
