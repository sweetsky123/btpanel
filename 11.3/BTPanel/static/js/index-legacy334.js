!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function t(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?n(Object(l),!0).forEach(function(n){r(e,n,l[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):n(Object(l)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(l,n))})}return e}function r(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var l=r.call(n,t||"default");if("object"!=e(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function l(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,l,o,a,u=[],i=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;i=!1}else for(;!(i=(r=o.call(t)).done)&&(u.push(r.value),u.length!==n);i=!0);}catch(e){c=!0,l=e}finally{try{if(!i&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw l}}return u}}(e,n)||function(e,n){if(e){if("string"==typeof e)return o(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function a(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",l=t.toStringTag||"@@toStringTag";function o(t,r,l,o){var a=r&&r.prototype instanceof c?r:c,d=Object.create(a.prototype);return u(d,"_invoke",function(t,r,l){var o,a,u,c=0,d=l||[],s=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return o=n,a=0,u=e,f.n=t,i}};function m(t,r){for(a=t,u=r,n=0;!s&&c&&!l&&n<d.length;n++){var l,o=d[n],m=f.p,p=o[2];t>3?(l=p===r)&&(u=o[(a=o[4])?5:(a=3,3)],o[4]=o[5]=e):o[0]<=m&&((l=t<2&&m<o[1])?(a=0,f.v=r,f.n=o[1]):m<p&&(l=t<3||o[0]>r||r>p)&&(o[4]=t,o[5]=r,f.n=p,a=0))}if(l||t>1)return i;throw s=!0,r}return function(l,d,p){if(c>1)throw TypeError("Generator is already running");for(s&&1===d&&m(d,p),a=d,u=p;(n=a<2?e:u)||!s;){o||(a?a<3?(a>1&&(f.n=-1),m(a,u)):f.n=u:f.v=u);try{if(c=2,o){if(a||(l="next"),n=o[l]){if(!(n=n.call(o,u)))throw TypeError("iterator result is not an object");if(!n.done)return n;u=n.value,a<2&&(a=0)}else 1===a&&(n=o.return)&&n.call(o),a<2&&(u=TypeError("The iterator does not provide a '"+l+"' method"),a=1);o=e}else if((n=(s=f.n<0)?u:t.call(r,f))!==i)break}catch(n){o=e,a=1,u=n}finally{c=1}}return{value:n,done:s}}}(t,l,o),!0),d}var i={};function c(){}function d(){}function s(){}n=Object.getPrototypeOf;var f=[][r]?n(n([][r]())):(u(n={},r,function(){return this}),n),m=s.prototype=c.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,u(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e}return d.prototype=s,u(m,"constructor",s),u(s,"constructor",d),d.displayName="GeneratorFunction",u(s,l,"GeneratorFunction"),u(m),u(m,l,"Generator"),u(m,r,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),(a=function(){return{w:o,m:p}})()}function u(e,n,t,r){var l=Object.defineProperty;try{l({},"",{})}catch(e){l=0}u=function(e,n,t,r){function o(n,t){u(e,n,function(e){return this._invoke(n,t,e)})}n?l?l(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(o("next",0),o("throw",1),o("return",2))},u(e,n,t,r)}function i(e,n,t,r,l,o,a){try{var u=e[o](a),i=u.value}catch(e){return void t(e)}u.done?n(i):Promise.resolve(i).then(r,l)}function c(e){return function(){var n=this,t=arguments;return new Promise(function(r,l){var o=e.apply(n,t);function a(e){i(o,r,l,a,u,"next",e)}function u(e){i(o,r,l,a,u,"throw",e)}a(void 0)})}}System.register(["./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./useStore-legacy9.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./column-legacy.js?v=1763689792","./index-legacy107.js?v=1763689792"],function(e,n){"use strict";var r,o,u,i,d,s,f,m,p,_,b,v,w,h,y,g,V,j,P,O,x,F,S,I,N,U,T,D,k,B,E,z,A,C,G,K,M,q,H,R,J,L;return{setters:[function(e){r=e.s,o=e.j,u=e.r,i=e.o,d=e.g,s=e.b8,f=e.c,m=e.v,p=e.a8,_=e.x,b=e.y,v=e.e,w=e.C,h=e.z,y=e.F,g=e.b1,V=e.O,j=e.A,P=e.B,O=e.L,x=e.J,F=e.K,S=e.R,I=e.am,N=e.an,U=e.U,T=e.ad,D=e.bc,k=e.bd,B=e.ab,E=e.c3,z=e.b2,A=e.T},function(e){C=e.Q,G=e.R,K=e.ci,M=e.M,q=e.k,H=e._},function(e){R=e.u,J=e.J,L=e.K},null,null,null,null,null],execute:function(){var n=o("FTP-ACCESS-STORE",function(){var e=u(!1),n=u(0),t=u(0),r=u(),l=u(!1),o=u({username:"",download_bandwidth:"",upload_bandwidth:"",max_files:"",max_size:"",ratio:"",allowed_local_ips:"",denied_local_ips:"",allowed_client_ips:"",denied_client_ips:"",time_restrictions:[],max_sim_sessions:""}),a=i({download_bandwidth:"KB",upload_bandwidth:"KB",max_size:"KB"}),c=u(["KB","MB","GB"]),s=u({});return{accessFormFef:r,accessForm:o,uNum:n,dNum:t,icon:d(function(){return e.value?"svgtofont-el-arrow-up":"svgtofont-el-arrow-down"}),unitForm:a,advancedConfiguration:e,unitData:c,skipNull:l,AccessData:s}}),Q=function(){return r(n())},$=R().rowData,W=Q(),X=W.accessFormFef,Y=W.accessForm,Z=W.uNum,ee=W.dNum,ne=W.unitForm,te=W.advancedConfiguration,re=W.skipNull,le=W.AccessData,oe=function(e,n,t){""===n?t():""===n||void 0===n||null==n&&!re?t(new Error("请输入正确的IP地址")):K(n)?t():t(new Error("请输入正确的IP地址"))},ae=s({allowed_local_ips:[{required:!1,validator:oe,message:"请输入正确的IP地址",trigger:"blur"}],denied_local_ips:[{required:!1,validator:oe,message:"请输入正确的IP地址",trigger:"blur"}],allowed_client_ips:[{required:!1,validator:oe,message:"请输入正确的IP地址",trigger:"blur"}],denied_client_ips:[{required:!1,validator:oe,message:"请输入正确的IP地址",trigger:"blur"}]}),ue=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y.value,n=0,t=["allowed_local_ips","denied_local_ips","allowed_client_ips","denied_client_ips"];n<t.length;n++){var r=t[n];""!==e[r]&&(e[r]=e[r].replace(/\s+/g,""),re.value=!0,oe(0,e[r],function(e){if(e)throw M.error(e.message+"或将其置空"),new Error(e.message)}))}},ie=function(){var e=c(a().m(function e(){var n,t,r;return a().w(function(e){for(;;)switch(e.n){case 0:return n=pe(),ue(),e.n=1,X.value.validate();case 1:return e.n=2,C({loading:"正在获取FTP权限数据，请稍后...",request:J(n),data:{status:Boolean},message:!0});case 2:return t=e.v,r=t.status,e.a(2,r)}},e)}));return function(){return e.apply(this,arguments)}}(),ce=function(){te.value=!te.value},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le.value,n={},t={},r=0,l=0;for(var o in e){var a=e[o];if(["download_bandwidth","upload_bandwidth","max_size"].includes(o)){var u=a.slice(-2);t[o]=u||"MB",n[o]=a.slice(0,-2)}else if("time_restrictions"===o){if(""==a){n[o]=[new Date(2021,1,1,0,0),new Date(2021,1,1,23,59)];continue}var i=a.split("-"),c=i[0],d=i[1],s=c.slice(0,2),f=c.slice(2,4),m=d.slice(0,2),p=d.slice(2,4);n[o]=[new Date(2021,1,1,Number(s),Number(f)),new Date(2021,1,1,Number(m),Number(p))]}else if("ratio"===o){""==a&&(a="0:0");var _=a.split(":");r=Number(_[0]),l=Number(_[1])}else n[o]=a}return{perForm:n,unitForms:t,uNums:r,dNums:l}},se=function(){var e=c(a().m(function e(){var n;return a().w(function(e){for(;;)switch(e.n){case 0:return n=$.value.name,e.n=1,C({loading:"正在获取FTP权限数据，请稍后...",request:L({username:n}),success:function(e){var n=e.data,t=de(n),r=t.perForm,l=t.unitForms,o=t.uNums,a=t.dNums;Z.value=o,ee.value=a,Object.assign(Y.value,r),Object.assign(ne.value,l)}});case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),fe=function(){$.value={},Y.value={}},me=function(e){return[e.getHours().toString().padStart(2,"0"),e.getMinutes().toString().padStart(2,"0")]},pe=function(){var e=ne.value,n=Y.value,r=Z.value,o=ee.value,a=$.value.name,u={download_bandwidth:"",upload_bandwidth:"",max_size:""};for(var i in e){var c=e[i],d=n[i];["download_bandwidth","upload_bandwidth","max_size"].includes(i)&&(""===d?u[i]="0":(""===c&&(c="KB"),u[i]=d+c))}var s="0000-0000";if(G(n.time_restrictions)&&n.time_restrictions.length>0){var f=new Date(n.time_restrictions[0]),m=new Date(n.time_restrictions[1]),p=l(me(f),2),_=p[0],b=p[1],v=l(me(m),2),w=v[0],h=v[1];s="".concat(_).concat(b,"-").concat(w).concat(h)}return n.ratio="".concat(r||"0",":").concat(o||"0"),"0:0"===n.ratio&&(n.ratio=""),t(t({},n),{},{time_restrictions:s,username:a},u)},_e={class:"p-[20px]"},be={class:"flex"},ve=f({__name:"index",setup:function(e,n){var t=n.expose,r=Q(),l=r.accessFormFef,o=r.accessForm,a=r.uNum,u=r.dNum,i=r.icon,c=r.unitForm,d=r.advancedConfiguration,s=r.unitData;return m(se),p(fe),t({onConfirm:ie}),function(e,n){var t=I,r=N,f=U,m=T,p=D,C=k,G=B,K=q,M=E,H=z,R=A;return _(),b("div",_e,[v(G,{model:h(o),ref_key:"accessFormFef",ref:l,class:"demo-form-inline",rules:h(ae),"label-width":"11rem"},{default:w(function(){return[v(C,null,{default:w(function(){return[v(p,{span:12},{default:w(function(){return[v(m,{label:"下载带宽限制"},{default:w(function(){return[v(f,{type:"number",min:0,placeholder:"请输入下载带宽限制",modelValue:h(o).download_bandwidth,"onUpdate:modelValue":n[1]||(n[1]=function(e){return h(o).download_bandwidth=e}),class:"input-with-select"},{append:w(function(){return[v(r,{modelValue:h(c).download_bandwidth,"onUpdate:modelValue":n[0]||(n[0]=function(e){return h(c).download_bandwidth=e}),placeholder:"请选择"},{default:w(function(){return[(_(!0),b(y,null,g(h(s),function(e,n){return _(),V(t,{key:n,label:e,value:e},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1},8,["modelValue"])]}),_:1})]}),_:1}),v(p,{span:12},{default:w(function(){return[v(m,{label:"上传带宽限制"},{default:w(function(){return[v(f,{type:"number",min:0,placeholder:"请输入上传带宽限制",modelValue:h(o).upload_bandwidth,"onUpdate:modelValue":n[3]||(n[3]=function(e){return h(o).upload_bandwidth=e}),class:"input-with-select"},{append:w(function(){return[v(r,{modelValue:h(c).upload_bandwidth,"onUpdate:modelValue":n[2]||(n[2]=function(e){return h(c).upload_bandwidth=e}),placeholder:"请选择"},{default:w(function(){return[(_(!0),b(y,null,g(h(s),function(e,n){return _(),V(t,{key:n,label:e,value:e},null,8,["label","value"])}),128))]}),_:1},8,["modelValue"])]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["model","rules"]),v(G,{inline:!0,model:h(o),class:"demo-form-inline","label-width":"11rem"},{default:w(function(){return[v(C,null,{default:w(function(){return[v(p,{span:12},{default:w(function(){return[v(m,{label:"最大文件数量限制"},{default:w(function(){return[v(K,{type:"number",width:"18rem",min:0,modelValue:h(o).max_files,"onUpdate:modelValue":n[4]||(n[4]=function(e){return h(o).max_files=e}),placeholder:"请输入最大文件数量限制"},null,8,["modelValue"])]}),_:1})]}),_:1}),v(p,{span:12},{default:w(function(){return[v(m,{label:"最大文件大小限制"},{default:w(function(){return[v(f,{style:{"min-width":"180px"},placeholder:"请输入内容",type:"number",min:0,modelValue:h(o).max_size,"onUpdate:modelValue":n[6]||(n[6]=function(e){return h(o).max_size=e}),class:"input-with-select"},{append:w(function(){return[v(r,{modelValue:h(c).max_size,"onUpdate:modelValue":n[5]||(n[5]=function(e){return h(c).max_size=e}),placeholder:"请选择"},{default:w(function(){return[v(t,{label:"MB",value:"MB"})]}),_:1},8,["modelValue"])]}),_:1},8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["model"]),v(G,{inline:!0,model:h(o),class:"demo-form-inline","label-width":"11rem"},{default:w(function(){return[v(C,null,{default:w(function(){return[v(p,{span:12},{default:w(function(){return[v(m,{label:"时间限制"},{default:w(function(){return[v(M,{format:"HH:mm",style:{width:"18rem"},"is-range":"",modelValue:h(o).time_restrictions,"onUpdate:modelValue":n[7]||(n[7]=function(e){return h(o).time_restrictions=e}),"range-separator":"-","start-placeholder":"开始","end-placeholder":"结束",placeholder:"选择时间范围"},null,8,["modelValue"])]}),_:1})]}),_:1}),v(p,{span:12},{default:w(function(){return[v(m,{label:"最大并发会话数"},{default:w(function(){return[v(K,{width:"18rem",type:"number",min:0,modelValue:h(o).max_sim_sessions,"onUpdate:modelValue":n[8]||(n[8]=function(e){return h(o).max_sim_sessions=e}),placeholder:"请输入最大并发会话数"},null,8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["model"]),v(H,null,{default:w(function(){return[j("span",{class:"bt-link",onClick:n[9]||(n[9]=function(){return h(ce)&&h(ce).apply(void 0,arguments)})},P("svgtofont-el-arrow-down"===h(i)?"展开":"收起")+"更多配置 ",1),j("i",{class:O(h(i))},null,2)]}),_:1}),x(j("div",null,[v(G,{inline:!0,model:h(o),class:"demo-form-inline","label-width":"11rem"},{default:w(function(){return[v(C,null,{default:w(function(){return[v(p,{span:12},{default:w(function(){return[v(m,{prop:"allowed_local_ips",label:"允许的本地IP地址"},{default:w(function(){return[v(K,{width:"18rem",modelValue:h(o).allowed_local_ips,"onUpdate:modelValue":n[10]||(n[10]=function(e){return h(o).allowed_local_ips=e}),placeholder:"请输入允许的本地IP地址"},null,8,["modelValue"])]}),_:1})]}),_:1}),v(p,{span:12},{default:w(function(){return[v(m,{label:"拒绝的本地IP地址",prop:"denied_local_ips"},{default:w(function(){return[v(K,{width:"18rem",modelValue:h(o).denied_local_ips,"onUpdate:modelValue":n[11]||(n[11]=function(e){return h(o).denied_local_ips=e}),placeholder:"请输入拒绝的本地IP地址"},null,8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["model"]),v(G,{inline:!0,model:h(o),class:"demo-form-inline","label-width":"11rem"},{default:w(function(){return[v(C,null,{default:w(function(){return[v(p,{span:12},{default:w(function(){return[v(m,{label:"允许的客户端IP地址",prop:"allowed_client_ips"},{default:w(function(){return[v(K,{width:"18rem",modelValue:h(o).allowed_client_ips,"onUpdate:modelValue":n[12]||(n[12]=function(e){return h(o).allowed_client_ips=e}),placeholder:"请输入允许的客户端IP地址"},null,8,["modelValue"])]}),_:1})]}),_:1}),v(p,{span:12},{default:w(function(){return[v(m,{label:"拒绝的客户端IP地址",prop:"denied_client_ips"},{default:w(function(){return[v(K,{width:"18rem",modelValue:h(o).denied_client_ips,"onUpdate:modelValue":n[13]||(n[13]=function(e){return h(o).denied_client_ips=e}),placeholder:"请输入拒绝的客户端IP地址"},null,8,["modelValue"])]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["model"]),v(G,{inline:!0,model:h(o),class:"demo-form-inline","label-width":"11rem"},{default:w(function(){return[v(C,null,{default:w(function(){return[v(p,{span:24},{default:w(function(){return[v(m,{label:"上传和下载比率"},{default:w(function(){return[j("div",be,[v(R,{modelValue:h(a),"onUpdate:modelValue":n[14]||(n[14]=function(e){return S(a)?a.value=e:null}),"controls-position":"right",min:0},null,8,["modelValue"]),n[16]||(n[16]=j("span",{class:"mx-12px"},":",-1)),v(R,{modelValue:h(u),"onUpdate:modelValue":n[15]||(n[15]=function(e){return S(u)?u.value=e:null}),"controls-position":"right",min:0},null,8,["modelValue"])])]}),_:1})]}),_:1})]}),_:1})]}),_:1},8,["model"])],512),[[F,h(d)]]),n[17]||(n[17]=j("ul",{class:"mt-8px leading-8 text-small list-disc ml-20px"},[j("li",{class:"text-danger"},"注意：填写为0或为空时都表示不做限制，将按照上一次设定值延续。"),j("li",null,"允许的 IP 地址和被拒绝的 IP 地址若配置相同，将会拒绝该ip，因为“被拒绝”的设置优先级高于“被允许”的设置。"),j("li",null,"上传和下载比率限制：以上传文件数量和下载文件数量的形式表示。例如，设置为 “1:5”，那么用户每上传1个文件，就可以下载5个文件。设定其中某一个值为0将设置失败。"),j("li",null,"时间限制：指定用户可以访问FTP的时间范围。如：09:00到18:00，表示用户只能在这个时间范围内访问FTP。"),j("li",null,"最大并发会话数：即允许与FTP服务器同时建立的最大连接数。")],-1))])}}});e("default",H(ve,[["__scopeId","data-v-87e0d89a"]]))}}})}();
