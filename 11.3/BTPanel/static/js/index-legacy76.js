!function(){function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}var n=["type_id"];function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return r(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach(function(n){i(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function i(n,t,r){return(t=function(n){var t=function(n,t){if("object"!=e(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var o=r.call(n,t||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==e(t)?t:t+""}(t))in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return c(s,"_invoke",function(t,r,o){var a,u,c,l=0,s=o||[],f=!1,p={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(n,t){return a=n,u=0,c=e,p.n=t,i}};function v(t,r){for(u=t,c=r,n=0;!f&&l&&!o&&n<s.length;n++){var o,a=s[n],v=p.p,m=a[2];t>3?(o=m===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=v&&((o=t<2&&v<a[1])?(u=0,p.v=r,p.n=a[1]):v<m&&(o=t<3||a[0]>r||r>m)&&(a[4]=t,a[5]=r,p.n=m,u=0))}if(o||t>1)return i;throw f=!0,r}return function(o,s,m){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&v(s,m),u=s,c=m;(n=u<2?e:c)||!f;){a||(u?u<3?(u>1&&(p.n=-1),v(u,c)):p.n=c:p.v=c);try{if(l=2,a){if(u||(o="next"),n=a[o]){if(!(n=n.call(a,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,u<2&&(u=0)}else 1===u&&(n=a.return)&&n.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=e}else if((n=(f=p.n<0)?c:t.call(r,p))!==i)break}catch(n){a=e,u=1,c=n}finally{l=1}}return{value:n,done:f}}}(t,o,a),!0),s}var i={};function l(){}function s(){}function f(){}n=Object.getPrototypeOf;var p=[][r]?n(n([][r]())):(c(n={},r,function(){return this}),n),v=f.prototype=l.prototype=Object.create(p);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e}return s.prototype=f,c(v,"constructor",f),c(f,"constructor",s),s.displayName="GeneratorFunction",c(f,o,"GeneratorFunction"),c(v),c(v,o,"Generator"),c(v,r,function(){return this}),c(v,"toString",function(){return"[object Generator]"}),(u=function(){return{w:a,m:m}})()}function c(e,n,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}c=function(e,n,t,r){function a(n,t){c(e,n,function(e){return this._invoke(n,t,e)})}n?o?o(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t:(a("next",0),a("throw",1),a("return",2))},c(e,n,t,r)}function l(e,n,t,r,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void t(e)}u.done?n(c):Promise.resolve(c).then(r,o)}function s(e){return function(){var n=this,t=arguments;return new Promise(function(r,o){var a=e.apply(n,t);function i(e){l(a,r,o,i,u,"next",e)}function u(e){l(a,r,o,i,u,"throw",e)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./index-legacy137.js?v=1763689792","./column-legacy.js?v=1763689792","./useController-legacy6.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./index-legacy147.js?v=1763689792","./site-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792"],function(e,r){"use strict";var o,i,c,l,f,p,v,m,d,y,b,g,j,_,h,w,O,k,x,S,P,C,N,T,E,D,A,B,I,F,G,L,M,q,R,J,U,V,z,H,K,Q,W,$,X,Y,Z,ee,ne,te,re,oe,ae,ie,ue,ce,le,se,fe,pe,ve,me,de,ye,be,ge,je,_e,he;return{setters:[function(e){o=e.Q,i=e.aH,c=e.n,l=e.H,f=e.bR,p=e.b,v=e.p,m=e.aK,d=e.u,y=e.b3,b=e.an,g=e.q,j=e.x,_=e.ap},function(e){h=e._},function(e){w=e.g,O=e.r,k=e.p,x=e.c,S=e.s,P=e.e,C=e.D,N=e.w,T=e.v,E=e.n,D=e.x,A=e.y,B=e.z,I=e.O,F=e.C,G=e.A,L=e.G,M=e.R,q=e.F,R=e.b1,J=e.L,U=e.an,V=e.am},function(e){z=e._},function(e){H=e.c,K=e.a,Q=e.d,W=e.g,$=e.u},function(e){X=e.c,Y=e.h,Z=e.s,ee=e.d,ne=e.e,te=e.g,re=e.i,oe=e.u,ae=e.a,ie=e.k},function(e){ue=e.u,ce=e.S},function(e){le=e.u},function(e){se=e.getNodeVersionList,fe=e.setDefaultEnv,pe=e.getNodeJsEnvironment,ve=e.delNodeProject,me=e.getPackageManagers,de=e.modifyNodeProject,ye=e.batchDelSite,be=e.batchStatus},function(e){ge=e.l,je=e.i,_e=e.o,he=e.h}],execute:function(){var we=p(),Oe=ue(),ke=Oe.siteInfo,xe=Oe.isRefreshList,Se=Oe.activeType,Pe=ce().setSiteInfo,Ce=(e("i",w(function(){return!!ke.value})),O("0")),Ne=O([]),Te=k("_node_mask",!1),Ee=function(){var e=s(u().m(function e(){var n,t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,se();case 1:if(t=e.v,Ne.value=[],t.status){e.n=2;break}return Te.value=!0,e.a(2);case 2:Te.value=!1,null===(n=t.data)||void 0===n||n.forEach(function(e){e.setup&&Ne.value.push({label:e.version,value:e.version}),1===e.is_default&&(Ce.value=e.version)}),Ne.value.unshift({label:"未设置",value:"0"}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}));return function(){return e.apply(this,arguments)}}(),De=function(){var e=s(u().m(function e(){var n,t;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,o({loading:"正在设置，请稍后...",request:fe({version:Ce.value})});case 1:t=e.v,we.request({status:null===(n=t.data)||void 0===n?void 0:n.status,msg:t.data.data||t.data.error_msg});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ae=e("o",s(u().m(function e(){var n,t;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,i({sName:"nodejs"});case 1:return n=e.v,t=n.data,e.n=2,ge({name:"nodejs",softData:t});case 2:e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[0,3]])}))),Be=function(){ke.value=null,c({title:"添加Node项目",area:80,component:function(){return l(function(){return r.import("./index-legacy389.js?v=1763689792")},void 0,r.meta.url)},showFooter:!0})},Ie=function(){c({title:"PM2监控",area:120,showFooter:!1,component:function(){return l(function(){return r.import("./index-legacy390.js?v=1763689792")},void 0,r.meta.url)}})},Fe=function(){var e=s(u().m(function e(n){var t,r,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,v({type:"default",title:"删除项目-".concat(n.name),content:"风险操作，此操作不可逆，删除【".concat(n.name,"】项目后您将无法管理该项目，是否继续操作？"),input:{content:"删除项目"}});case 1:return e.p=1,t=n.project_config,r={project_name:t.project_name,project_type:t.project_type||"nodejs"},t.pm2_name&&(r.pm2_name=t.pm2_name),e.n=2,ve(r);case 2:o=e.v,we.request(o),xe.value=!0,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(n){return e.apply(this,arguments)}}(),Ge=function(e,n){Pe(e,n),c({isAsync:!0,title:"Node项目管理["+e.name+"] -- 添加时间["+e.addtime+"]",area:[87,71],component:function(){return l(function(){return r.import("./index-legacy391.js?v=1763689792")},void 0,r.meta.url)}})},Le=(e("u",function(){var e=s(u().m(function e(n){var t,r,o;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,me({version:n});case 1:return t=e.v,r=t.data,e.a(2,r.package_managers);case 2:e.p=2,o=e.v,m(o);case 3:return e.a(2)}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}()),e("n",O({nodejs_versions:[],package_managers:[],user_list:[],maximum_memory:0}))),Me=(e("g",s(u().m(function e(){var n,t,r,o,i;return u().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,pe();case 1:return i=e.v,Object.assign(Le.value,a(a({},null==i?void 0:i.data),{},{maximum_memory:(null==i||null===(n=i.data)||void 0===n?void 0:n.maximum_memory)||0,nodejs_versions:f(null==i||null===(t=i.data)||void 0===t?void 0:t.nodejs_versions,"array",[]),user_list:f(null==i||null===(r=i.data)||void 0===r?void 0:r.user_list,"array",[]),package_managers:f(null==i||null===(o=i.data)||void 0===o?void 0:o.package_managers,"array",[])})),e.a(2,i.data);case 2:return e.p=2,e.v,e.a(2,Le.value)}},e,null,[[0,2]])}))),e("s",function(){var e=s(u().m(function e(n){return u().w(function(e){for(;;)switch(e.n){case 0:if(!n){e.n=2;break}return e.n=1,o({loading:"正在保存修改，请稍后...",request:de(n),message:!0});case 1:xe.value=!0;case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),function(){var e=s(u().m(function e(n,t,r,o,i,c){var l,f,p,v,m,d;return u().w(function(e){for(;;)switch(e.n){case 0:return l=o.label,f=o.value,p=c.enable,v=c.exclude,m=new Map([["start","批量启动选中项目后，项目将正常访问"],["stop","批量停用选中的项目后，项目将会停止运行"],["restart","批量重启选中的项目后，项目将会重新启动"],["delete","批量删除选中的项目后，项目将无法恢复"]]),d=function(){var e=s(u().m(function e(n){var t,o,a,i,c,l,s;return u().w(function(e){for(;;)switch(e.n){case 0:t=new Map([["start",be],["stop",be],["restart",be]]),o=t.get(f),s=f,e.n="start"===s||"stop"===s||"restart"===s?1:"delete"===s?3:5;break;case 1:if(!o){e.n=3;break}return a=r.value.map(function(e){return e.project_config.pm2_name?{id:e.id,project_name:e.name,project_type:e.project_config.project_type||"nodejs",pm2_name:e.project_config.pm2_name}:{id:e.id,project_name:e.name,project_type:e.project_config.project_type||"nodejs"}}),i=he(!1,v,p,{params:{site_list:JSON.stringify(a),status:f,project_type:"NODE"}}),e.n=2,o(i,Se.value);case 2:case 4:return e.a(2,e.v);case 3:return c=r.value.map(function(e){return e.project_config.pm2_name?{id:e.id,name:e.name,project_type:e.project_config.project_type||"nodejs",pm2_name:e.project_config.pm2_name}:{id:e.id,name:e.name,project_type:e.project_config.project_type||"nodejs"}}),l=he(!1,v,p,{params:{project_type:Se.value.toUpperCase(),site_list:JSON.stringify(c)}}),e.n=4,ye(l);case 5:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}(),e.n=1,n({title:"批量".concat(l),content:"".concat(m.get(f),"，是否继续操作？"),column:[{label:"项目名称",prop:"name"},H()],onConfirm:function(){var e=s(u().m(function e(){var n,t,r;return u().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,d();case 1:n=e.v,xe.value=!0,i&&i(),t=je(n.data),r=(r=t.data).map(function(e){return a(a({},e),{},{name:e.name||e.project_name})}),_e(r,{title:"".concat(l,"网站")});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}()});case 1:return e.a(2)}},e)}));return function(n,t,r,o,a,i){return e.apply(this,arguments)}}()),qe={class:"content-mask"},Re={class:"flex items-center mx-12px"},Je=x({__name:"index",setup:function(e){d();var o=ce(),i=o.getSiteList,c=o.setSiteInfo,p=S(ce()),v=p.activeType,m=p.isRefreshList,w=p.siteInfo,O=p.searchWidth,k=y({options:[{type:"button",label:"添加项目",active:!0,onClick:function(){var e;if(null===(e=Ne.value)||void 0===e||!e.length)return Ae();Be()}},{type:"button",label:"Node版本管理器",onClick:Ae},{type:"button",label:"PM2监控",onClick:Ie}]}).BtOperation,x=le({key:"type_id",name:"Node分类",options:function(){return[{label:"全部分类",value:"all"}]},event:re,ignore:["0"],field:"type_name"}),H=_([{label:"启动项目",value:"start",event:Me},{label:"停用项目",value:"stop",event:Me},{label:"重启项目",value:"restart",event:Me},oe(),ae({classList:ie}),{label:"删除项目",value:"delete",event:Me}]),ue=b({request:function(e){var t=e.type_id,r=function(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,n);return i({data:JSON.stringify(a(a({},r),{},{type_id:g(t)||"all"===t?"":t}))})},columns:[K({type:"page",key:"id"}),X({onClick:function(e){Ge(e)}}),Y({type:v.value,onClick:function(e,n){if("setting"!==n){var t=e.run?"stop":"start";Z(e,"restart"===n?n:t)}else Ge(e,"state")}}),{label:"PID",isCustom:!0,render:function(e){var n=f(e.load_info,"object",{});if(0==Object.keys(n).length)return"--";var t=[];for(var r in e.load_info)e.load_info.hasOwnProperty(r)&&t.push(r);return t.join(",")}},{label:"CPU",isCustom:!1,render:function(e){var n=f(e.load_info,"object",{});if(0==Object.keys(n).length)return"--";var t=0;for(var r in e.load_info)t+=e.load_info[r].cpu_percent;return t.toFixed(2)+"%"}},{label:"内存",isCustom:!1,render:function(e){var n=f(e.load_info,"object",{});if(0==Object.keys(n).length)return"--";var t=0;for(var r in e.load_info)t+=e.load_info[r].memory_used;return j(t)}},Q(),ee(),W({table:"sites",width:200}),{label:"Node版本",isCustom:!0,render:function(e){return e.project_config.nodejs_version||"--"}},ne({onClick:function(e){Ge(e,"ssl")}}),$([{title:"设置",onClick:function(e){Ge(e)}},{title:"删除",onClick:function(e){Fe(e)}}])],extension:[x,H],empty:function(){return P("span",null,[C("您的列表为空，您可以"),P("span",{class:"bt-link",onClick:Be},[C("添加一个项目")])])}}),se=ue.BtTable,fe=ue.BtPage,pe=ue.BtRefresh,ve=ue.BtSearch,me=ue.BtColumn,de=ue.BtBatch,ye=ue.BtTableCategory,be=ue.refresh,ge=ue.config;return N(m,function(){var e=s(u().m(function e(n){var t,r;return u().w(function(e){for(;;)switch(e.n){case 0:if(!n){e.n=2;break}return e.n=1,be();case 1:null!==(t=w.value)&&void 0!==t&&t.name&&(r=ge.data.find(function(e){return e.name===w.value.name}))&&c(r),m.value=!1;case 2:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),T(function(){Ee(),E(function(){l(function(){return r.import("./index-legacy389.js?v=1763689792")},void 0,r.meta.url),l(function(){return r.import("./index-legacy391.js?v=1763689792")},void 0,r.meta.url)})}),function(e,n){var r=z,o=V,a=U,i=h;return D(),A("div",null,[B(Te)?(D(),I(r,{key:0},{content:F(function(){return[G("div",qe,[n[4]||(n[4]=G("i",{class:"svgtofont-el-warning text-warning !text-subtitleLarge mr-4px"},null,-1)),n[5]||(n[5]=C(" 未安装Node版本管理器，",-1)),G("span",{class:"bt-link",onClick:n[0]||(n[0]=function(){return B(Ae)&&B(Ae).apply(void 0,arguments)})},"点击安装")])]}),_:1})):L("",!0),P(i,null,{"header-left":F(function(){return[P(B(k)),G("div",Re,[n[7]||(n[7]=G("span",{class:"mr-4px"},"命令行版本",-1)),P(a,{class:"!w-[10rem]",placeholder:"未设置",modelValue:B(Ce),"onUpdate:modelValue":n[2]||(n[2]=function(e){return M(Ce)?Ce.value=e:null}),options:B(Ne),onChange:B(De)},{footer:F(function(){return[G("div",{class:"flex items-center justify-center py-[.8rem] cursor-pointer",onClick:n[1]||(n[1]=function(){return B(Ae)&&B(Ae).apply(void 0,arguments)})},t(n[6]||(n[6]=[G("span",{class:"bt-link"},"前往管理",-1)])))]}),default:F(function(){return[(D(!0),A(q,null,R(B(Ne),function(e,n){return D(),I(o,{key:n,label:e.label,value:e.value},null,8,["label","value"])}),128))]}),_:1},8,["modelValue","options","onChange"])]),G("div",{class:"flex items-center ml-1rem",onClick:n[3]||(n[3]=function(){return B(te)&&B(te).apply(void 0,arguments)})},t(n[8]||(n[8]=[G("i",{class:"svgtofont-desired text-medium"},null,-1),G("span",{class:"bt-link ml-1"},"需求反馈",-1)])))]}),"header-right":F(function(){return[P(B(ye),{class:"!w-[140px] mr-[10px]"}),P(B(ve),{class:J(["mr-[10px]","!w-[".concat(B(O),"px]")]),placeholder:"请输入项目名称或备注"},null,8,["class"]),P(B(pe),{class:"mr-[10px]"}),P(B(me))]}),content:F(function(){return[P(B(se))]}),"footer-left":F(function(){return[P(B(de))]}),"footer-right":F(function(){return[P(B(fe))]}),_:1})])}}}),Ue=Object.freeze(Object.defineProperty({__proto__:null,default:Je},Symbol.toStringTag,{value:"Module"}));e("a",Ue)}}})}();
