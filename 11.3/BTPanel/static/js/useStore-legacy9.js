!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){o(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function o(e,n,r){return(n=function(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,n||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,r,a,o){var c=r&&r.prototype instanceof i?r:i,f=Object.create(c.prototype);return u(f,"_invoke",function(n,r,a){var o,c,u,i=0,f=a||[],p=!1,l={p:0,n:0,v:t,a:m,f:m.bind(t,4),d:function(e,n){return o=e,c=0,u=t,l.n=n,s}};function m(n,r){for(c=n,u=r,e=0;!p&&i&&!a&&e<f.length;e++){var a,o=f[e],m=l.p,d=o[2];n>3?(a=d===r)&&(u=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=t):o[0]<=m&&((a=n<2&&m<o[1])?(c=0,l.v=r,l.n=o[1]):m<d&&(a=n<3||o[0]>r||r>d)&&(o[4]=n,o[5]=r,l.n=d,c=0))}if(a||n>1)return s;throw p=!0,r}return function(a,f,d){if(i>1)throw TypeError("Generator is already running");for(p&&1===f&&m(f,d),c=f,u=d;(e=c<2?t:u)||!p;){o||(c?c<3?(c>1&&(l.n=-1),m(c,u)):l.n=u:l.v=u);try{if(i=2,o){if(c||(a="next"),e=o[a]){if(!(e=e.call(o,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=o.return)&&e.call(o),c<2&&(u=TypeError("The iterator does not provide a '"+a+"' method"),c=1);o=t}else if((e=(p=l.n<0)?u:n.call(r,l))!==s)break}catch(e){o=t,c=1,u=e}finally{i=1}}return{value:e,done:p}}}(n,a,o),!0),f}var s={};function i(){}function f(){}function p(){}e=Object.getPrototypeOf;var l=[][r]?e(e([][r]())):(u(e={},r,function(){return this}),e),m=p.prototype=i.prototype=Object.create(l);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t}return f.prototype=p,u(m,"constructor",p),u(p,"constructor",f),f.displayName="GeneratorFunction",u(p,a,"GeneratorFunction"),u(m),u(m,a,"Generator"),u(m,r,function(){return this}),u(m,"toString",function(){return"[object Generator]"}),(c=function(){return{w:o,m:d}})()}function u(t,e,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(t){a=0}u=function(t,e,n,r){function o(e,n){u(t,e,function(t){return this._invoke(e,n,t)})}e?a?a(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},u(t,e,n,r)}function s(t,e,n,r,a,o,c){try{var u=t[o](c),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function c(t){s(o,r,a,c,u,"next",t)}function u(t){s(o,r,a,c,u,"throw",t)}c(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./validator-legacy.js?v=1763689792","./column-legacy.js?v=1763689792"],function(t,n){"use strict";var r,o,u,s,f,p,l,m,d,y,v,h,b,g,w,_,T,k,j,P,O;return{setters:[function(t){r=t.o,o=t.u,u=t.ex,s=t.aA,f=t.O,p=t.b2,l=t.p,m=t.Q,d=t.b,y=t.n,v=t.H},function(t){h=t.s,b=t.j,g=t.g,w=t.r},function(t){_=t.p,T=t.c,k=t.h,j=t.i,P=t.o},function(t){O=t.c}],execute:function(){var F=t("A",function(t){return r.post("ftp/SetStatus",{data:t,check:"msg"})}),S=function(t){return r.post("/datalist/batch/batch_set_ftp_status",{data:t,check:"msg",customType:"model"})},A=t("z",function(t){return r.post("ftp/DeleteUser",{data:t,check:"msg"})}),D=function(t){return r.post("ftp/SetUser",{data:t,check:"msg"})},E=function(t){return r.post("ftp/AddUser",{data:t,check:"msg"})},q=function(t){return r.post("ftp/setPort",{data:t,check:"msg"})},x=(t("K",function(t){return r.post("ftp/GetFtpUserAccess",{data:t,check:"msg"})}),t("J",function(t){return r.post("ftp/ModifyFtpUserAccess",{data:t,check:"msg"})}),t("x",function(t){return r.post("/logs/ftp/set_ftp_log",{customType:"model",data:t,check:"msg"})})),G=function(t){return r.post("/logs/ftp/get_login_log",{customType:"model",data:t,check:"object"})},I=function(t){return r.post("/logs/ftp/get_action_log",{customType:"model",data:t})},N=(t("t",function(t){return r.post("ftp/get_cron_config",{data:t,check:"object"})}),t("r",function(t){return r.post("ftp/set_cron_config",{data:t,check:"msg"})}),t("v",function(t){return r.post("project/quota/modify_path_quota",{data:t,customType:"model",check:"object"})}),t("H",function(){return r.post("logs/ftp/get_analysis_config",{customType:"model",check:"object"})}),t("G",function(t){return r.post("logs/ftp/set_analysis_config",{data:t,customType:"model",check:"msg"})}),t("C",function(t){return r.post("logs/ftp/log_analysis",{data:t,customType:"model"})}),t("E",function(t){return r.post("logs/ftp/set_cron_task",{data:t,customType:"model",check:"msg"})}),t("B",function(t){return r.post("logs/ftp/set_white_list",{data:t,customType:"model",check:"msg"})}),t("D",function(){return r.post("logs/ftp/get_white_list",{customType:"model",check:"object"})}),t("y",function(t){return r.post("safe/firewall/create_ip_rules",{data:t,customType:"model",check:"msg"})}),t("I",function(){return r.post("logs/ftp/ftp_users",{customType:"model",check:"array"})}),t("L",function(t){return r.post("/datalist/batch/batch_set_ftp_password",{data:t,check:"array",customType:"model"})}),function(){return r.post("ftp/view_ftp_types",{check:"object"})}),U=(t("d",function(t){return r.post("ftp/add_ftp_types",{check:"object",data:t})}),t("e",function(t){return r.post("ftp/update_ftp_types",{check:"object",data:t})}),t("f",function(t){return r.post("ftp/delete_ftp_types",{check:"object",data:t})}),function(t){return r.post("/datalist/batch/batch_set_ftp_type",{check:"object",data:t,customType:"model"})}),M=function(t){return r.post("/datalist/batch/batch_delete_ftp",{check:"object",data:t,customType:"model"})},R=t("F",b("FTP-STORE",function(){var t=o(),e=t.plugin,n=(t.getGlobalInfo,g(function(){return e.value.ftp.port})),r=w();return{ftpPort:n,pluginInfo:w({}),rowData:r,isRefreshFtpList:w(!1)}})),B=t("u",function(){return h(R())}),L=d(),C=o(),H=C.payment,J=C.getGlobalInfo,z=(t("l",w(!1)),t("q",function(){var t=i(c().m(function t(e,n,r){var a;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,m({loading:"正在".concat(n?"修改":"添加","FTP账号，请稍后..."),request:n?D(e):E(e),data:{status:Boolean},message:!0,success:function(t){K.value=!0,r&&r(t)}});case 1:return a=t.v,t.a(2,a.status);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}));return function(e,n,r){return t.apply(this,arguments)}}()),t("w",function(){var t=i(c().m(function t(e){var n;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,m({loading:"正在修改FTP端口，请稍后...",request:q({port:e.port}),data:{status:Boolean},message:!0});case 1:return(n=t.v).status&&J(),t.a(2,n.status);case 2:return t.p=2,t.v,t.a(2,!1)}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}()),B()),K=z.isRefreshFtpList,Q=z.pluginInfo,$=z.rowData,V=(t("j",i(c().m(function t(){var e,n;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,p({name:"pure-ftpd"});case 1:return e=t.v,n=e.data,Q.value=n,t.a(2,n);case 2:return t.p=2,t.v,t.a(2,{})}},t,null,[[0,2]])}))),{}),W=(t("g",function(){var t=i(c().m(function t(e){var n,r,o,i,f,p,l,m;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=JSON.stringify(e),r=Date.now(),t.p=1,t.n=2,u(a(a({},e),{},{table:"ftps"}));case 2:return o=t.v,i=o.data,f=i.data,p=i.page,l=i.search_history,m=i.error,V[n]={data:{data:f,total:s(p),other:{search_history:l,error:m}},timestamp:r},t.a(2,V[n].data);case 3:if(t.p=3,!("canceled"===t.v.message&&V[n]&&r-V[n].timestamp<100)){t.n=4;break}return t.a(2,V[n].data);case 4:return t.a(2,{data:[],total:0,other:{search_history:[]}})}},t,null,[[1,3]])}));return function(e){return t.apply(this,arguments)}}()),t("i",function(){var t=i(c().m(function t(e){return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,l({icon:"warning-filled",title:"删除FTP用户【".concat(e.name,"】"),content:"删除FTP用户后，该FTP用户将失去访问权限，是否继续操作？"});case 1:return t.n=2,m({loading:"正在删除FTP用户，请稍后...",request:A({id:e.id,username:e.name}),message:!0,success:function(t){K.value=!0}});case 2:t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}()),t("h",function(){var t=i(c().m(function t(e,n){var r,a,o,u;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=e.id,a=e.status,o=e.name,t.p=1,u=Boolean(Number(a)),t.n=2,l({title:"".concat(u?"停用":"启用","FTP用户【").concat(o,"】"),content:"".concat(u?"停用":"启用","选中的FTP用户后，该FTP用户将").concat(u?"失去":"恢复","访问权限，是否继续操作？")});case 2:return t.n=3,m({loading:"正在设置FTP状态，请稍后...",request:F({id:r,username:o,status:Number(!Number(a))}),message:!0,success:function(t){K.value=!0,n&&n(t)}});case 3:t.n=5;break;case 4:t.p=4,t.v;case 5:return t.a(2)}},t,null,[[1,4]])}));return function(e,n){return t.apply(this,arguments)}}()),t("b",function(t){var e=Math.floor(Date.now()/1e3),n=new Date(Number(t.end_time)).getTime()<e,r=Number(t.end_time)-e,a=Math.floor(r/86400)<7;return"0"===t.end_time&&(n=!1,a=!1),{isEnd:n,isOrange:a}}),t("c",i(c().m(function t(){var n;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n=[],t.n=1,m({request:N(),data:{msg:Array},success:function(t){var r=t.msg;n=[{label:"全部分类",value:"all"}].concat(e(r.map(function(t){return{label:t.ps,value:String(t.id)}})))}});case 1:return t.a(2,n||[]);case 2:return t.p=2,t.v,t.a(2,[])}},t,null,[[0,2]])}))),t("s",function(){var t=i(c().m(function t(e,n,r,a){return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,T({name:"Ftp分类",options:r.value,selectList:e.value,request:function(){var t=i(c().m(function t(r,o){var u,s,i;return c().w(function(t){for(;;)switch(t.n){case 0:return u=a.enable,s=a.exclude,i=k(e.value,s,u,{params:{id:r.id}}),t.n=1,m({loading:"正在批量设置FTP分类，请稍后...",request:U(i),message:!0});case 1:n(),K.value=!0,o();case 2:return t.a(2)}},t)}));return function(e,n){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)}));return function(e,n,r,a){return t.apply(this,arguments)}}()),t("k",function(){var t=i(c().m(function t(e,n,r,a,o,u){var s,f,p,l,m,d;return c().w(function(t){for(;;)switch(t.n){case 0:return s=a.label,f=a.value,p=u.enable,l=u.exclude,m=new Map([["start","批量启用已选的FTP用户，启用后恢复访问权限"],["stop","批量停用已选的FTP用户，停用后暂停访问权限"],["delete","批量删除已选的FTP用户，删除后彻底失去访问和操作权限"]]),d=function(){var t=i(c().m(function t(){var e,n,a,o,u,s;return c().w(function(t){for(;;)switch(t.n){case 0:e=new Map([["start",S],["stop",S],["delete",M]]),n=e.get(f),s=f,t.n="start"===s||"stop"===s?1:"delete"===s?4:7;break;case 1:if(a="start"===f?1:0,o=k(r.value,l,p,{params:{status:a}}),!n){t.n=3;break}return t.n=2,n(o);case 2:case 5:return t.a(2,t.v);case 3:case 6:return t.a(3,7);case 4:if(u=k(r.value,l,p),!n){t.n=6;break}return t.n=5,n(u);case 7:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}(),t.n=1,e({title:"批量".concat(s,"用户"),content:"".concat(m.get(f),"，是否继续操作！"),column:[{label:"用户名",prop:"name"},O()],onConfirm:function(){var t=i(c().m(function t(){var e,n,r;return c().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,d();case 1:e=t.v,K.value=!0,n=j(e.data),r=n.data,n.msg,o&&o(),P(r,{title:"".concat(s,"用户")});case 2:return t.a(2)}},t)}));return function(){return t.apply(this,arguments)}}()});case 1:return t.a(2)}},t)}));return function(e,n,r,a,o,c){return t.apply(this,arguments)}}()),t("p",function(){var t=i(c().m(function t(e){var n,r,a,o;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,G(e);case 1:if(n=t.v,r=n.data,a=r.data,o=r.page,Array.isArray(a)){t.n=2;break}return t.a(2,{data:[],total:0});case 2:return t.a(2,{data:a,total:s(o)});case 3:return t.p=3,t.v,t.a(2,{data:[],total:0})}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}()),t("n",function(){var t=i(c().m(function t(e){var n,r,a,o;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,I(e);case 1:if(n=t.v,r=n.data,a=r.data,o=r.page,Array.isArray(a)){t.n=2;break}return t.a(2,{data:[],total:0});case 2:return t.a(2,{data:a,total:s(o)});case 3:return t.p=3,t.v,t.a(2,{data:[],total:0})}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}()),function(t){y({title:"查看FTP日志【"+t.name+"】",area:[70,58],compData:t,component:function(){return v(function(){return n.import("./index-legacy337.js?v=1763689792")},void 0,n.meta.url)}})}),X=(t("o",function(){var t=i(c().m(function t(e){var n,r,a,o,u;return c().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,$.value=e,"free"===H.value.authType){t.n=6;break}return n=L.load("正在获取日志服务状态，请稍后..."),t.n=1,x({exec_name:"getlog"});case 1:if(r=t.v,a=r.status,o=r.msg,n.close(),a&&"stop"!==o){t.n=4;break}return t.n=2,l({title:"开启FTP日志服务",content:"开启FTP日志服务后，将记录FTP用户的访问日志，是否继续操作？"});case 2:return t.n=3,m({loading:"正在开启FTP日志服务，请稍后...",request:x({exec_name:"start"}),data:{status:Boolean},message:!0});case 3:null!=(u=t.v)&&u.status&&W(e),t.n=5;break;case 4:W(e);case 5:t.n=7;break;case 6:_({sourceId:57});case 7:t.n=9;break;case 8:t.p=8,t.v;case 9:return t.p=9,n&&n.close(),t.f(9);case 10:return t.a(2)}},t,null,[[0,8,9,10]])}));return function(e){return t.apply(this,arguments)}}()),t("m",function(){V={},f(["/ftp?action=view_ftp_types","/panel/public/get_soft_status","/datalist/data/get_data_list"])}),b("FTP-ADD-USER-STORE",function(){var t=o(),e=h(t).panel,n=g(function(){return e.value.sitePath}),r=w(),a=w({name:"",password:"",path:n.value||""});return{isEdit:w(!1),addFtpRef:r,ftpForm:a,defaultPath:n}}));t("a",function(){return h(X())})}}})}();
