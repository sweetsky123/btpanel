!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function i(e,o,c,a){var i=o&&o.prototype instanceof u?o:u,f=Object.create(i.prototype);return t(f,"_invoke",function(e,t,o){var c,a,i,u=0,f=o||[],p=!1,s={p:0,n:0,v:r,a:d,f:d.bind(r,4),d:function(e,t){return c=e,a=0,i=r,s.n=t,l}};function d(e,t){for(a=e,i=t,n=0;!p&&u&&!o&&n<f.length;n++){var o,c=f[n],d=s.p,m=c[2];e>3?(o=m===t)&&(i=c[(a=c[4])?5:(a=3,3)],c[4]=c[5]=r):c[0]<=d&&((o=e<2&&d<c[1])?(a=0,s.v=t,s.n=c[1]):d<m&&(o=e<3||c[0]>t||t>m)&&(c[4]=e,c[5]=t,s.n=m,a=0))}if(o||e>1)return l;throw p=!0,t}return function(o,f,m){if(u>1)throw TypeError("Generator is already running");for(p&&1===f&&d(f,m),a=f,i=m;(n=a<2?r:i)||!p;){c||(a?a<3?(a>1&&(s.n=-1),d(a,i)):s.n=i:s.v=i);try{if(u=2,c){if(a||(o="next"),n=c[o]){if(!(n=n.call(c,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,a<2&&(a=0)}else 1===a&&(n=c.return)&&n.call(c),a<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),a=1);c=r}else if((n=(p=s.n<0)?i:e.call(t,s))!==l)break}catch(n){c=r,a=1,i=n}finally{u=1}}return{value:n,done:p}}}(e,c,a),!0),f}var l={};function u(){}function f(){}function p(){}n=Object.getPrototypeOf;var s=[][c]?n(n([][c]())):(t(n={},c,function(){return this}),n),d=p.prototype=u.prototype=Object.create(s);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,t(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=p,t(d,"constructor",p),t(p,"constructor",f),f.displayName="GeneratorFunction",t(p,a,"GeneratorFunction"),t(d),t(d,a,"Generator"),t(d,c,function(){return this}),t(d,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:m}})()}function t(e,r,n,o){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}t=function(e,r,n,o){function a(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?c?c(e,r,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[r]=n:(a("next",0),a("throw",1),a("return",2))},t(e,r,n,o)}function r(e,t,r,n,o,c,a){try{var i=e[c](a),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}System.register(["./base-lib-legacy.js?v=1763689792","./utils-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792"],function(t,n){"use strict";var o,c,a,i,l,u,f,p,s,d,m,v,h,_,b,y,k,w,g,j,O,x,V,D,E,P,S;return{setters:[function(e){o=e.c,c=e.r,a=e.o,i=e.g,l=e.v,u=e.x,f=e.y,p=e.e,s=e.C,d=e.z,m=e.F,v=e.b1,h=e.J,_=e.K,b=e.A,y=e.D,k=e.B,w=e.an,g=e.ad,j=e.ab,O=e.am},function(e){x=e.X,V=e.Q,D=e.k,E=e.b,P=e._},function(e){S=e.groupProjectConfig},null],execute:function(){var n={class:"p-[2rem]"},G={class:"flex items-center mt-[1.6rem] ml-[3rem]"},T={class:"mt-[1.6rem] leading-8 text-small list-disc ml-[2rem]"},F=o({__name:"project-check",props:{compData:{default:{}}},setup:function(t,o){var P=o.expose,F=t,C=E(),N=c(),U=c(!1),q=a({check:"a;;",port:"",wait_time:180}),A={check:{required:!0,message:"请输入检测策略",trigger:"blur"},port:[{validator:function(e,t,r){t.split(",").filter(function(e){return""!==e}).some(function(e){return!x(e)})&&"port"==q.check?r(new Error("请输入正确的端口")):r()}}],wait_time:[{validator:function(e,t,r){t<=0&&"active"==q.check||""==t&&"active"==q.check?r(new Error("请输入正确的进程存活时长")):r()}}]},J=[{value:"all",label:"任意端口监听"},{value:"port",label:"指定端口监听"},{value:"active",label:"进程存活时长"}],z=i(function(){switch(q.check){case"all":return"任意端口监听策略，执行启动后,项目进程直到出现任意一个端口监听后, 才认定为启动成功,最大默认等待3分钟";case"port":return"指定端口监听策略，执行启动后，项目进程直到监听【".concat(q.port,"】端口后，才认定为启动成功,最大默认等待3分钟");case"active":return"进程存活时长，解释:启动该项目后，在【".concat(q.wait_time,"】秒内自动退出则认定为启动成功");default:return""}}),B=function(){var t,n=(t=e().m(function t(r){return e().w(function(e){for(;;)switch(e.n){case 0:if("active"!=q.check){e.n=1;break}if(!(q.wait_time<=0||""==q.wait_time)){e.n=1;break}return e.a(2,C.error("请输入正确的进程存活时长"));case 1:return e.n=2,N.value.validate();case 2:V({loading:U,request:S({group_id:F.compData.group_id,project_id:F.compData.id,check_info:JSON.stringify({type:"all"==q.check?"port":q.check,port:"port"==q.check?q.port.split(","):[],wait_time:"active"==q.check?q.wait_time:180})}),success:function(e){e.status&&(F.compData.refreshEvent&&F.compData.refreshEvent(),r&&r())}});case 3:return e.a(2)}},t)}),function(){var e=this,n=arguments;return new Promise(function(o,c){var a=t.apply(e,n);function i(e){r(a,o,c,i,l,"next",e)}function l(e){r(a,o,c,i,l,"throw",e)}i(void 0)})});return function(e){return n.apply(this,arguments)}}();return l(function(){var e,t,r,n,o;e=F.compData,q.check=(null===(t=e.check_info)||void 0===t?void 0:t.type)||"all","port"===q.check&&0==(null===(r=e.check_info)||void 0===r?void 0:r.port.length)&&(q.check="all"),q.port=(null===(n=e.check_info)||void 0===n?void 0:n.port.join(","))||"",q.wait_time=Number((null===(o=e.check_info)||void 0===o?void 0:o.wait_time)||180)}),P({onConfirm:B}),function(e,t){var r=O,o=w,c=g,a=D,i=j;return u(),f("div",n,[p(i,{ref_key:"javaAddFormRef",ref:N,model:d(q),disabled:d(U),"label-width":"9rem",rules:A},{default:s(function(){return[p(c,{label:"检测策略",prop:"check"},{default:s(function(){return[p(o,{modelValue:d(q).check,"onUpdate:modelValue":t[0]||(t[0]=function(e){return d(q).check=e}),class:"!w-[22rem]",placeholder:"请选择"},{default:s(function(){return[(u(),f(m,null,v(J,function(e){return p(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])}),64))]}),_:1},8,["modelValue"])]}),_:1}),h(p(c,{label:"端口",prop:"port"},{default:s(function(){return[p(a,{modelValue:d(q).port,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d(q).port=e}),placeholder:"多个用,分隔",width:"22rem"},null,8,["modelValue"])]}),_:1},512),[[_,"port"==d(q).check]]),h(b("div",G,[t[3]||(t[3]=y(" 启动该项目后，在 ",-1)),p(a,{modelValue:d(q).wait_time,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d(q).wait_time=e}),type:"number",width:"8rem",class:"!mx-[1rem]"},null,8,["modelValue"]),t[4]||(t[4]=y(" 秒内自动退出则认定为启动成功 ",-1))],512),[[_,"active"==d(q).check]])]}),_:1},8,["model","disabled"]),b("ul",T,[b("li",null,"当前效果："+k(d(z)),1),t[5]||(t[5]=b("li",null,"检查策略：主要是为了确认当前项目是否启动成功，保证顺序启动时，能在合适的情况下中断后续操作",-1)),t[6]||(t[6]=b("li",null,"任意端口监听策略（默认）：启动后，进程出现监听任意端口视为启动成功（最大等待3分钟）",-1)),t[7]||(t[7]=b("li",null,"指定端口监听策略：启动后，进程出现监听了您指定的所有端口后，视为启动成功（最大等待3分钟）",-1)),t[8]||(t[8]=b("li",null,"进程存活时长：启动后，进程在指定时长内未退出，则视为启动成功",-1))])])}}});t("default",P(F,[["__scopeId","data-v-5a19ff05"]]))}}})}();
