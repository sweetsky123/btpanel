!function(){function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",u=a.toStringTag||"@@toStringTag";function i(t,a,o,u){var i=a&&a.prototype instanceof l?a:l,s=Object.create(i.prototype);return e(s,"_invoke",function(t,e,a){var o,u,i,l=0,s=a||[],f=!1,p={p:0,n:0,v:n,a:m,f:m.bind(n,4),d:function(t,e){return o=t,u=0,i=n,p.n=e,c}};function m(t,e){for(u=t,i=e,r=0;!f&&l&&!a&&r<s.length;r++){var a,o=s[r],m=p.p,v=o[2];t>3?(a=v===e)&&(i=o[(u=o[4])?5:(u=3,3)],o[4]=o[5]=n):o[0]<=m&&((a=t<2&&m<o[1])?(u=0,p.v=e,p.n=o[1]):m<v&&(a=t<3||o[0]>e||e>v)&&(o[4]=t,o[5]=e,p.n=v,u=0))}if(a||t>1)return c;throw f=!0,e}return function(a,s,v){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&m(s,v),u=s,i=v;(r=u<2?n:i)||!f;){o||(u?u<3?(u>1&&(p.n=-1),m(u,i)):p.n=i:p.v=i);try{if(l=2,o){if(u||(a="next"),r=o[a]){if(!(r=r.call(o,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,u<2&&(u=0)}else 1===u&&(r=o.return)&&r.call(o),u<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),u=1);o=n}else if((r=(f=p.n<0)?i:t.call(e,p))!==c)break}catch(r){o=n,u=1,i=r}finally{l=1}}return{value:r,done:f}}}(t,o,u),!0),s}var c={};function l(){}function s(){}function f(){}r=Object.getPrototypeOf;var p=[][o]?r(r([][o]())):(e(r={},o,function(){return this}),r),m=f.prototype=l.prototype=Object.create(p);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,e(t,u,"GeneratorFunction")),t.prototype=Object.create(m),t}return s.prototype=f,e(m,"constructor",f),e(f,"constructor",s),s.displayName="GeneratorFunction",e(f,u,"GeneratorFunction"),e(m),e(m,u,"Generator"),e(m,o,function(){return this}),e(m,"toString",function(){return"[object Generator]"}),(t=function(){return{w:i,m:v}})()}function e(t,n,r,a){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}e=function(t,n,r,a){function u(n,r){e(t,n,function(t){return this._invoke(n,r,t)})}n?o?o(t,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[n]=r:(u("next",0),u("throw",1),u("return",2))},e(t,n,r,a)}function n(t,e,n,r,a,o,u){try{var i=t[o](u),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function r(t){return function(){var e=this,r=arguments;return new Promise(function(a,o){var u=t.apply(e,r);function i(t){n(u,a,o,i,c,"next",t)}function c(t){n(u,a,o,i,c,"throw",t)}i(void 0)})}}System.register(["./utils-lib-legacy.js?v=1763689792","./index-legacy109.js?v=1763689792","./base-lib-legacy.js?v=1763689792","./site-legacy.js?v=1763689792","./useController-legacy5.js?v=1763689792","./column-legacy.js?v=1763689792","./useController-legacy6.js?v=1763689792","./__commonjsHelpers__-legacy.js?v=1763689792","./useStore-legacy4.js?v=1763689792","./validator-legacy.js?v=1763689792","./index-legacy110.js?v=1763689792","./index-legacy107.js?v=1763689792","./useMethod-legacy5.js?v=1763689792"],function(e,n){"use strict";var a,o,u,i,c,l,s,f,p,m,v,d,y,h,b,g,w,j,_,B,x,k,C,R,T,D,L,O,P,E,S;return{setters:[function(t){a=t.b3,o=t.n,u=t.H,i=t.an,c=t.p,l=t.Q,s=t.ao,f=t.ap,p=t.M,m=t.aK,v=t.$,d=t.aj},function(t){y=t._},function(t){h=t.j,b=t.r,g=t.s,w=t.c,j=t.x,_=t.y,B=t.e,x=t.C,k=t.z,C=t.A},function(t){R=t.getDirAuth,T=t.getFileDeny,D=t.deleteDirAuth,L=t.delFileDeny},function(t){O=t.u},function(t){P=t.a,E=t.u},function(t){S=t.o},null,null,null,null,null,null],execute:function(){var G=h("wp-wordpress-security",function(){return{isRefreshLimitList:b(!1),isRefreshDenyList:b(!1)}}),F=g(O()).localRow,q=function(){var e=r(t().m(function e(n){var r,a;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,R({id:F.value.id});case 1:return r=t.v,a=r.data,t.a(2,{data:a[F.value.name],total:0,other:{search_history:[]}});case 2:return t.p=2,t.v,t.a(2,{data:[],total:0,other:{search_history:[]}})}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=r(t().m(function e(n){var r,a;return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,T({website:F.value.name});case 1:return r=t.v,a=r.data,t.a(2,{data:a,total:0,other:{search_history:[]}});case 2:return t.p=2,t.v,t.a(2,{data:[],total:0,other:{search_history:[]}})}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),A={class:"flex flex-col"},N=w({__name:"limit",setup:function(e){var d,h=g(O()).localRow,b=g(G()).isRefreshLimitList,w=a({options:[{onClick:function(){o({title:"添加限制访问",area:48,component:function(){return u(function(){return n.import("./limit-form-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:{isEdit:!1,siteId:h.value.id,getList:function(){b.value=!0}},btn:!0})},type:"button",active:!0,label:"添加限制访问"}]}).BtOperation,R=f([{label:"批量删除",value:"delete",event:(d=r(t().m(function e(n,a,o,u){var i,l,s;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,c({title:"批量删除限制访问规则",content:"批量删除选中的限制访问规则，该操作可能会存在风险，是否继续？"});case 1:return i=p.load("正在删除,请稍后..."),e.p=2,e.n=3,Promise.all(o.value.map(function(){var e=r(t().m(function e(n){return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,D({id:h.value.id,name:n.name});case 1:if(!t.v.data.status){t.n=2;break}return t.a(2,{name:n.name,status:!0});case 2:return t.a(2,{name:n.name,status:!1});case 3:t.n=5;break;case 4:return t.p=4,t.v,t.a(2,{name:n.name,status:!1});case 5:return t.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}()));case 3:l=e.v,S({resultData:l,resultTitle:"删除限制访问规则"}),b.value=!0,e.n=5;break;case 4:e.p=4,s=e.v,m(s);case 5:return e.p=5,i.close(),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])})),function(t,e,n,r){return d.apply(this,arguments)})}]),T=i({request:function(t){return q()},columns:[P(),{label:"名称",prop:"name"},{label:"路径",prop:"site_dir"},E([{onClick:function(t){o({title:"添加限制访问",area:48,component:function(){return u(function(){return n.import("./limit-form-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:{isEdit:!0,siteId:h.value.id,row:t,getList:function(){b.value=!0}},btn:!0})},title:"编辑"},{onClick:function(e){var n;c({title:"删除限制访问规则【".concat(e.name,"】"),content:"删除选中的规则后，访问".concat(e.site_dir,"将不再需要安全验证，是否继续操作？"),icon:"warning-filled",type:"calc",onConfirm:(n=r(t().m(function n(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,l({loading:"正在删除，请稍后...",request:D({id:h.value.id,name:e.name}),message:!0,success:function(){b.value=!0}});case 1:return t.a(2)}},n)})),function(){return n.apply(this,arguments)})})},title:"删除"}])],extension:[s(b),R]}),L=T.BtTable,F=(T.BtPage,T.BtRecommendSearch,T.BtRefresh,T.BtColumn,T.BtBatch);T.BtTableCategory,T.BtErrorMask,T.tableRef,T.classList,T.refresh;return function(t,e){var n=v,r=y;return j(),_("div",null,[B(r,null,{"header-left":x(function(){return[B(k(w))]}),content:x(function(){return[B(k(L))]}),"footer-left":x(function(){return[C("div",A,[B(k(F)),B(n,{options:[{content:"目录设置加密访问后，访问时需要输入账号密码才能访问"},{content:"例如我设置了加密访问 /test/ ,那我访问 http://aaa.com/test/ 时就要输入账号密码才能访问"}],class:"ml-[20px] mt-[20px]"})])]}),_:1})])}}}),H={class:"flex flex-col"},I=w({__name:"deny",setup:function(e){var d,h=g(O()).localRow,b=g(G()).isRefreshDenyList,w=a({options:[{onClick:function(){o({title:"添加拒绝访问",area:48,component:function(){return u(function(){return n.import("./deny-form-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:{isEdit:!1,siteName:h.value.name,getList:function(){b.value=!0}},btn:!0})},type:"button",active:!0,label:"添加拒绝访问"}]}).BtOperation,R=f([{label:"删除",value:"delete",event:(d=r(t().m(function e(n,a,o,u){var i,l,s;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,c({title:"批量删除拒绝访问规则",content:"批量删除选中的拒绝访问规则，该操作可能会存在风险，是否继续？"});case 1:return i=p.load("正在删除,请稍后..."),e.p=2,e.n=3,Promise.all(o.value.map(function(){var e=r(t().m(function e(n){return t().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,L({website:h.value.name,deny_name:n.name});case 1:if(!t.v.data.status){t.n=2;break}return t.a(2,{name:n.name,status:!0});case 2:return t.a(2,{name:n.name,status:!1});case 3:t.n=5;break;case 4:return t.p=4,t.v,t.a(2,{name:n.name,status:!1});case 5:return t.a(2)}},e,null,[[0,4]])}));return function(t){return e.apply(this,arguments)}}()));case 3:l=e.v,S({resultData:l,resultTitle:"删除拒绝访问规则"}),b.value=!0,e.n=5;break;case 4:e.p=4,s=e.v,m(s);case 5:return e.p=5,i.close(),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])})),function(t,e,n,r){return d.apply(this,arguments)})}]),T=i({request:function(t){return M()},columns:[P(),{label:"名称",prop:"name"},{label:"路径",prop:"dir"},E([{onClick:function(t){o({title:"添加拒绝访问",area:48,component:function(){return u(function(){return n.import("./deny-form-legacy.js?v=1763689792")},void 0,n.meta.url)},compData:{isEdit:!0,siteName:h.value.name,row:t,getList:function(){b.value=!0}},btn:!0})},title:"编辑"},{onClick:function(e){var n;c({title:"删除拒绝访问规则【".concat(e.name,"】"),content:"删除选中的规则后，访问".concat(e.dir,"该保护目录将失去防护，是否继续操作？"),icon:"warning-filled",type:"calc",onConfirm:(n=r(t().m(function n(){return t().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,l({loading:"正在删除，请稍后...",request:L({website:h.value.name,deny_name:e.name}),message:!0,success:function(){b.value=!0}});case 1:return t.a(2)}},n)})),function(){return n.apply(this,arguments)})})},title:"删除"}])],extension:[s(b),R]}),D=T.BtTable,F=(T.BtPage,T.BtRecommendSearch,T.BtRefresh,T.BtColumn,T.BtBatch);T.BtTableCategory,T.BtErrorMask,T.tableRef,T.classList,T.refresh;return function(t,e){var n=v,r=y;return j(),_("div",null,[B(r,null,{"header-left":x(function(){return[B(k(w))]}),content:x(function(){return[B(k(D))]}),"footer-left":x(function(){return[C("div",H,[B(k(F)),B(n,{options:[{content:"后缀：禁止访问的文件后缀"},{content:"目录：规则会在这个目录内生效"}],class:"mt-4px"})])]}),_:1})])}}});e("default",w({__name:"index",setup:function(t){var e=b("access"),r=d({type:"card",options:[{name:"access",label:"访问限制",render:function(){return N}},{name:"deny",label:"拒绝访问",render:function(){return I}},{name:"hotlink",label:"防盗链",render:function(){return u(function(){return n.import("./index-legacy243.js?v=1763689792")},void 0,n.meta.url)}}],value:e}).BtTabs;return function(t,e){return j(),_("div",null,[B(k(r))])}}}))}}})}();
