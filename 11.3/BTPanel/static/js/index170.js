import{_ as a}from"./index109.js?v=1763689792";import{p as e,Q as s,l as t,ah as i,b as r}from"./utils-lib.js?v=1763689792";import{cw as n,cx as o,cy as l}from"./validator.js?v=1763689792";import{c,r as p,aE as m,v as d,x as u,y as f,e as y,C as b,z as h}from"./base-lib.js?v=1763689792";import{a as j,u as x,c as _}from"./column.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./index107.js?v=1763689792";const w={class:"pb-[1rem] px-16px"},v=c({__name:"index",setup(c){const v=r(),g=p(),C=p([]),k=[j(),{label:"操作时间",prop:"time",width:180,render:a=>m("span",{},a.time)},{label:"文件路径",prop:"filepath",render:a=>m("span",{},a.filepath)},x([{title:"恢复",isHide:a=>{var e;return 0===(null==(e=a.historys)?void 0:e.length)},onClick:async a=>{await e({title:"恢复历史文件",content:"是否恢复历史文件 ".concat(a.time,"?恢复历史文件后，当前文件内容将会被替换！")}),s({loading:"正在恢复历史文件，请稍后...",request:n({filename:a.filepath,history:a.historys[0]}),success:a=>{a.status?(v.success("恢复成功"),q()):v.error("恢复失败")}})}},{title:"删除",onClick:async a=>{await s({loading:"正在删除历史文件，请稍后...",request:o({id:a.id}),message:!0,success:q})}}])],q=async()=>{await s({request:l(),data:[Array,C]})},H=[{label:"删除",value:"delete",event:async(a,e,s,t,i)=>{const r=async a=>await o({id:a.id});await a({title:"批量删除",content:"批量删除选中，是否继续操作？",column:[{prop:"filepath",label:"文件路径"},_()],onConfirm:async()=>(await e(r),q(),!1)})}}];return d(()=>{q()}),(e,s)=>{const r=t,n=i,o=a;return u(),f("div",w,[y(o,null,{content:b(()=>[y(r,{ref_key:"fileTableRef",ref:g,height:"40rem",column:k,description:"列表为空",data:h(C)},null,8,["data"])]),"footer-left":b(()=>[y(n,{"table-ref":h(g),options:h(H)},null,8,["table-ref","options"])]),_:1})])}}});export{v as default};
