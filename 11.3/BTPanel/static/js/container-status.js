import{c as e,av as a,g as t,x as s,y as l,A as r,B as n,z as i,L as o,O as c,C as d,D as u,G as p,e as m,F as v,b1 as k,M as g,J as y,K as f,H as b,aT as x}from"./base-lib.js?v=1763689792";import{aQ as h,V as _,Q as w,bZ as I,_ as C}from"./utils-lib.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";const S={class:"container-dialog"},T={class:"pb-[3rem] border-b border-dark"},j={class:"flex items-center ml-[2rem]"},A={class:"ml-[1rem]"},D={class:"flex mt-[2rem] ml-[2rem]"},P={class:"table ml-[2rem] mt-[2rem]"},N={class:"w-[30%]"},O={key:0,class:"w-[70%] truncate"},H=["onClick"],M={key:1,class:"h-[5rem] flex items-center"},G=C(e({__name:"container-status",setup(e){const{refs:{currentConDetail:C},getCurrentCon:G,refreshActiveTable:J}=h(),L=[{key:"name",label:"容器名称"},{key:"id",label:"容器ID",tooltip:!0},{key:"image",label:"使用的镜像"},{key:"run",label:"运行时间"},{key:"created",label:"创建时间"},{key:"start",label:"启动时间"},{key:"port",label:"端口",tag:!0,expand:a(!1)},{key:"ip",label:"IP",tag:!0,expand:a(!1)},{key:"ipv6",label:"IPV6",tag:!0,expand:a(!1)}],Q=t(()=>z(C.value)),V=t(()=>{var e,a;return"running"===(null==(a=null==(e=C.value)?void 0:e.State)?void 0:a.Status)}),q=e=>{const a=new Date(e).getTime();return _(a)},z=e=>{var a,t,s,l,r;if(!e.Id)return{name:"正在获取...",id:"正在获取...",idTip:"正在获取...",run:"正在获取...",created:"正在获取...",start:"正在获取...",image:"正在获取...",port:[],ip:[],ipv6:[]};const n=e.Name,i=e.Id.slice(0,12),o=(null==(a=e.Config)?void 0:a.Image)||"--",c=((e,a)=>{const t=Math.abs(e-a);return Math.floor(t/36e5)})((new Date).getTime(),new Date(null==(t=C.value.State)?void 0:t.StartedAt).getTime()),d=q(e.Created),u=q(null==(s=e.State)?void 0:s.StartedAt),p=Object.entries((null==(l=e.NetworkSettings)?void 0:l.Ports)||{})||[],m=[];p.forEach(e=>{e[1]&&m.push("".concat(e[1][0].HostPort,"--\x3e").concat(e[0]," "))});const v=Object.values((null==(r=e.NetworkSettings)?void 0:r.Networks)||{}),k=v.map(e=>e.IPAddress).filter(e=>""!==e)||[],g=v.map(e=>e.GlobalIPv6Address).filter(e=>""!==e)||[];return{name:n,id:i,idTip:e.Id,image:o,run:c>0?"".concat(c,"小时"):"不到1小时",created:d,start:u,port:m,ip:k,ipv6:g}},B=async e=>{const a="start"==e?"启动":"stop"==e?"停止":"重启",t={id:C.value.Id,status:e};await w({request:I({data:JSON.stringify(t)}),message:!0,loading:"正在".concat(a,"容器，请稍候..."),success:e=>{e.status&&(G(C.value.Id),J())}})};return(e,a)=>{const t=b,h=x;return s(),l("div",S,[r("div",T,[r("div",j,[a[3]||(a[3]=r("span",null,"当前状态：",-1)),r("span",A,n(i(V)?"运行中":"已停止"),1),r("span",{class:o(i(V)?"svgtofont-icon-start text-primary":"svgtofont-icon-stop text-danger")},null,2)]),r("div",D,[i(V)?p("",!0):(s(),c(t,{key:0,onClick:a[0]||(a[0]=e=>B("start"))},{default:d(()=>[...a[4]||(a[4]=[u(" 启动 ",-1)])]),_:1})),i(V)?(s(),c(t,{key:1,onClick:a[1]||(a[1]=e=>B("stop"))},{default:d(()=>[...a[5]||(a[5]=[u("停止",-1)])]),_:1})):p("",!0),m(t,{onClick:a[2]||(a[2]=e=>B("restart"))},{default:d(()=>[...a[6]||(a[6]=[u("重启",-1)])]),_:1})])]),r("div",P,[(s(),l(v,null,k(L,e=>r("div",{key:e.key,class:"item"},[r("div",N,n(e.label),1),e.tag?p("",!0):(s(),l("div",O,[m(h,{ref_for:!0,ref:"tlp",content:i(Q)["".concat(e.key,"Tip")],disabled:!e.tooltip,placement:"top"},{default:d(()=>[r("span",null,n(i(Q)[e.key]),1)]),_:2},1032,["content","disabled"])])),e.tag?(s(),l("div",{key:1,class:o(["w-[70%] relative",{"cursor-pointer":i(Q)[e.key].length>("ipv6"===e.key?2:3)}]),onClick:a=>(e=>{var a;!e.tag||(null==(a=Q.value[e.key])?void 0:a.length)<=("ipv6"===e.key?2:3)||(e.expand.value=!e.expand.value)})(e)},[i(Q)[e.key].length>0?(s(),l("div",{key:0,class:o(["py-[1rem] pr-[2rem] min-h-[5rem] grid gap-[1rem]",{"h-[5rem]":!e.expand.value,"items-center":!e.expand.value}]),style:g("grid-template-columns: repeat(auto-fill, minmax(".concat("ipv6"===e.key?"16":"13","rem, 1fr))"))},[(s(!0),l(v,null,k(i(Q)[e.key],(a,t)=>y((s(),l("span",{key:a,class:"custom-success-tag"},n(a),513)),[[f,("ipv6"===e.key?t<2:t<3)||e.expand.value]])),128)),i(Q)[e.key].length>("ipv6"===e.key?2:3)?(s(),l("span",{key:0,class:o(["absolute top-[50%] right-[0rem] text-extraLarge",e.expand.value?"svgtofont-el-arrow-up":"svgtofont-el-arrow-down"]),style:{transform:"translateY(-50%)"}},null,2)):p("",!0)],6)):p("",!0),i(Q)[e.key].length?p("",!0):(s(),l("div",M,"--"))],10,H)):p("",!0)])),64))])])}}}),[["__scopeId","data-v-443c08f1"]]);export{G as default};
