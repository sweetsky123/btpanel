import{L as e}from"./utils-lib.js?v=1763689792";import{c as s,s as a,aB as t,r,g as l,e as o,c5 as i,am as u,an as m,v as p,x as n,y as c,z as d,i as v}from"./base-lib.js?v=1763689792";import{b as g,j,h as f}from"./form-item.js?v=1763689792";import{D as b,f as x,s as h,e as w,c as _,g as P}from"./index238.js?v=1763689792";import"./__commonjsHelpers__.js?v=1763689792";import"./index110.js?v=1763689792";import"./index109.js?v=1763689792";import"./column.js?v=1763689792";import"./useController4.js?v=1763689792";import"./validator.js?v=1763689792";import"./index107.js?v=1763689792";import"./useController5.js?v=1763689792";import"./site.js?v=1763689792";import"./useStore4.js?v=1763689792";import"./useController6.js?v=1763689792";import"./useMethod5.js?v=1763689792";const y={class:"p-[2rem]"};const C=s({__name:"php-form",setup(s,{expose:C}){const H=b(),{versionOptions:O,extendOptions:q,templateOptions:V,extendsupOptions:k,isEdit:B}=a(H),S=t("popupClose",()=>{}),U=r(),{BtForm:z,submit:D,param:E}=e({data:x,options:e=>l(()=>[g("名称","name",{attrs:{class:"!w-[320px]",placeholder:"请输入环境名称",disabled:B.value},rules:[{required:!0,message:"请输入环境名称",trigger:"blur"}]}),j("版本","version",O.value,{attrs:{class:"!w-[22rem]",disabled:B.value,onChange:e=>{h(e)}},rules:[{required:!0,message:"请选择PHP版本",trigger:"change"}]}),f("PHP扩展源",()=>o(i,{modelValue:e.value.repo_url,"onUpdate:modelValue":s=>e.value.repo_url=s,class:"!w-[32rem]",placeholder:"请选择或输入PHP扩展源","fetch-suggestions":(e,s)=>{s(q.value)},"popper-class":"my-extautocomplete"},{default:({item:s})=>o("div",{class:s.value===e.value.repo_url?"bg-light flex items-center justify-between px-[2rem]":"flex items-center justify-between px-[2rem]"},[o("div",{class:s.value===e.value.repo_url?"bt-link w-[38rem] truncate":"w-[38rem] truncate"},[s.value+"(".concat(s.label,")")])])}),"repo_url",{attrs:{class:"!w-[22rem]"},rules:[{required:!0,message:"请输入或选择PHP扩展源",trigger:"change"}]}),...B.value?[]:[j("扩展模板","template",V.value,{attrs:{class:"!w-[22rem]",onChange:s=>{const a=V.value.find(e=>e.value===s);a&&(e.value.exts=a.ext.split(","))}},rules:[{required:!1,message:"请选择PHP扩展模板",trigger:"change"}]})],f("扩展",()=>{let s;return o(m,{ref:e=>U.value=e,class:"!w-[32rem]",modelValue:e.value.exts,"onUpdate:modelValue":s=>e.value.exts=s,filterable:!0,multiple:!0,"collapse-tags":!0,"collapse-tags-tooltip":!0,"reserve-keyword":!1,placeholder:"请选择扩展，可多选(可粘贴识别多个扩展，用,分隔)","filter-method":s=>w(s,k,e.value.version,E,U)},"function"==typeof(a=s=k.value.map(e=>o(u,{key:e.value,label:e.label,value:e.value},null)))||"[object Object]"===Object.prototype.toString.call(a)&&!v(a)?s:{default:()=>[s]});var a},"exts",{rules:[{required:!0,message:"请选择扩展，可多选(可粘贴识别多个扩展，用,分隔)",trigger:"change"}]})]),submit:async(e,s,a)=>{await s(),_(e.value,S)}});return p(()=>{P(E)}),C({onConfirm:D}),(e,s)=>(n(),c("div",y,[o(d(z))]))}});export{C as default};
